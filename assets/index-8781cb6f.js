(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const main$1="";function makeMap(e,t){const r=Object.create(null),n=e.split(",");for(let o=0;o<n.length;o++)r[n[o]]=!0;return t?o=>!!r[o.toLowerCase()]:o=>!!r[o]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$3=Object.assign,remove=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$2=(e,t)=>hasOwnProperty$2.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol$2=e=>typeof e=="symbol",isObject$3=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject$3(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString$3=Object.prototype.toString,toTypeString=e=>objectToString$3.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},def=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t},toNumber$2=e=>{const t=isString(e)?Number(e):NaN;return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],o=isString(n)?parseStringStyle(n):normalizeStyle(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(isString(e)||isObject$3(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const n=r.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let r=0;r<e.length;r++){const n=normalizeClass(e[r]);n&&(t+=n+" ")}else if(isObject$3(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const toDisplayString=e=>isString(e)?e:e==null?"":isArray$1(e)||isObject$3(e)&&(e.toString===objectToString$3||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,o])=>(r[`${n} =>`]=o,r),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$3(t)&&!isArray$1(t)&&!isPlainObject(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const o=t[n];wasTracked(o)&&!newTracked(o)?o.delete(e):t[r++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,r){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let o=n.get(r);o||n.set(r,o=createDep()),trackEffects(o)}}function trackEffects(e,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,r,n,o,a){const s=targetMap.get(e);if(!s)return;let l=[];if(t==="clear")l=[...s.values()];else if(r==="length"&&isArray$1(e)){const u=Number(n);s.forEach((c,f)=>{(f==="length"||!isSymbol$2(f)&&f>=u)&&l.push(c)})}else switch(r!==void 0&&l.push(s.get(r)),t){case"add":isArray$1(e)?isIntegerKey(r)&&l.push(s.get("length")):(l.push(s.get(ITERATE_KEY)),isMap(e)&&l.push(s.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(l.push(s.get(ITERATE_KEY)),isMap(e)&&l.push(s.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&l.push(s.get(ITERATE_KEY));break}if(l.length===1)l[0]&&triggerEffects(l[0]);else{const u=[];for(const c of l)c&&u.push(...c);triggerEffects(createDep(u))}}function triggerEffects(e,t){const r=isArray$1(e)?e:[...e];for(const n of r)n.computed&&triggerEffect(n);for(const n of r)n.computed||triggerEffect(n)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$2)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=toRaw(this);for(let a=0,s=this.length;a<s;a++)track(n,"get",a+"");const o=n[t](...r);return o===-1||o===!1?n[t](...r.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){pauseTracking();const n=toRaw(this)[t].apply(this,r);return resetTracking(),n}}),e}function hasOwnProperty$1(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,r=!1){this._isReadonly=t,this._shallow=r}get(t,r,n){const o=this._isReadonly,a=this._shallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return a;if(r==="__v_raw"&&n===(o?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(t))return t;const s=isArray$1(t);if(!o){if(s&&hasOwn$2(arrayInstrumentations,r))return Reflect.get(arrayInstrumentations,r,n);if(r==="hasOwnProperty")return hasOwnProperty$1}const l=Reflect.get(t,r,n);return(isSymbol$2(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(o||track(t,"get",r),a)?l:isRef(l)?s&&isIntegerKey(r)?l:l.value:isObject$3(l)?o?readonly(l):reactive(l):l}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,r,n,o){let a=t[r];if(isReadonly(a)&&isRef(a)&&!isRef(n))return!1;if(!this._shallow&&(!isShallow(n)&&!isReadonly(n)&&(a=toRaw(a),n=toRaw(n)),!isArray$1(t)&&isRef(a)&&!isRef(n)))return a.value=n,!0;const s=isArray$1(t)&&isIntegerKey(r)?Number(r)<t.length:hasOwn$2(t,r),l=Reflect.set(t,r,n,o);return t===toRaw(o)&&(s?hasChanged(n,a)&&trigger(t,"set",r,n):trigger(t,"add",r,n)),l}deleteProperty(t,r){const n=hasOwn$2(t,r);t[r];const o=Reflect.deleteProperty(t,r);return o&&n&&trigger(t,"delete",r,void 0),o}has(t,r){const n=Reflect.has(t,r);return(!isSymbol$2(r)||!builtInSymbols.has(r))&&track(t,"has",r),n}ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,r=!1,n=!1){e=e.__v_raw;const o=toRaw(e),a=toRaw(t);r||(hasChanged(t,a)&&track(o,"get",t),track(o,"get",a));const{has:s}=getProto(o),l=n?toShallow:r?toReadonly:toReactive;if(s.call(o,t))return l(e.get(t));if(s.call(o,a))return l(e.get(a));e!==o&&e.get(t)}function has(e,t=!1){const r=this.__v_raw,n=toRaw(r),o=toRaw(e);return t||(hasChanged(e,o)&&track(n,"has",e),track(n,"has",o)),e===o?r.has(e):r.has(e)||r.has(o)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$1(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const r=toRaw(this),{has:n,get:o}=getProto(r);let a=n.call(r,e);a||(e=toRaw(e),a=n.call(r,e));const s=o.call(r,e);return r.set(e,t),a?hasChanged(t,s)&&trigger(r,"set",e,t):trigger(r,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:r,get:n}=getProto(t);let o=r.call(t,e);o||(e=toRaw(e),o=r.call(t,e)),n&&n.call(t,e);const a=t.delete(e);return o&&trigger(t,"delete",e,void 0),a}function clear(){const e=toRaw(this),t=e.size!==0,r=e.clear();return t&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,t){return function(n,o){const a=this,s=a.__v_raw,l=toRaw(s),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",ITERATE_KEY),s.forEach((c,f)=>n.call(o,u(c),u(f),a))}}function createIterableMethod(e,t,r){return function(...n){const o=this.__v_raw,a=toRaw(o),s=isMap(a),l=e==="entries"||e===Symbol.iterator&&s,u=e==="keys"&&s,c=o[e](...n),f=r?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:d,done:g}=c.next();return g?{value:d,done:g}:{value:l?[f(d[0]),f(d[1])]:f(d),done:g}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(a){return get(this,a)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(a){return get(this,a,!1,!0)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(a){return get(this,a,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(a){return get(this,a,!0,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=createIterableMethod(a,!1,!1),r[a]=createIterableMethod(a,!0,!1),t[a]=createIterableMethod(a,!1,!0),n[a]=createIterableMethod(a,!0,!0)}),[e,r,t,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const r=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(hasOwn$2(r,o)&&o in n?r:n,o,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,r,n,o){if(!isObject$3(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const s=getTargetType(e);if(s===0)return e;const l=new Proxy(e,s===2?n:r);return o.set(e,l),l}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$3(e)?reactive(e):e,toReadonly=e=>isObject$3(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const r=e.dep;r&&triggerEffects(r)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:toRaw(t),this._value=r?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,r)=>unref(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const o=e[t];return isRef(o)&&!isRef(r)?(o.value=r,!0):Reflect.set(e,t,r,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,r,n,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,r=!1){let n,o;const a=isFunction(e);return a?(n=e,o=NOOP):(n=e.get,o=e.set),new ComputedRefImpl(n,o,a||!o,r)}function warn(e,...t){}function callWithErrorHandling(e,t,r,n){let o;try{o=n?e(...n):e()}catch(a){handleError(a,t,r)}return o}function callWithAsyncErrorHandling(e,t,r,n){if(isFunction(e)){const a=callWithErrorHandling(e,t,r,n);return a&&isPromise(a)&&a.catch(s=>{handleError(s,t,r)}),a}const o=[];for(let a=0;a<e.length;a++)o.push(callWithAsyncErrorHandling(e[a],t,r,n));return o}function handleError(e,t,r,n=!0){const o=t?t.vnode:null;if(t){let a=t.parent;const s=t.proxy,l=r;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,s,l)===!1)return}a=a.parent}const u=t.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[e,s,l]);return}}logError(e,r,o,n)}function logError(e,t,r,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,r=queue.length;for(;t<r;){const n=t+r>>>1,o=queue[n],a=getId(o);a<e||a===e&&o.pre?t=n+1:r=n}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const r=queue[t];r&&r.pre&&(queue.splice(t,1),t--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,n)=>getId(r)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const r=getId(e)-getId(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let o=r;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in n){const f=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:g}=n[f]||EMPTY_OBJ;g&&(o=r.map(m=>isString(m)?m.trim():m)),d&&(o=r.map(looseToNumber))}let l,u=n[l=toHandlerKey(t)]||n[l=toHandlerKey(camelize(t))];!u&&a&&(u=n[l=toHandlerKey(hyphenate(t))]),u&&callWithAsyncErrorHandling(u,e,6,o);const c=n[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,callWithAsyncErrorHandling(c,e,6,o)}}function normalizeEmitsOptions(e,t,r=!1){const n=t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let s={},l=!1;if(!isFunction(e)){const u=c=>{const f=normalizeEmitsOptions(c,t,!0);f&&(l=!0,extend$3(s,f))};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!l?(isObject$3(e)&&n.set(e,null),null):(isArray$1(a)?a.forEach(u=>s[u]=null):extend$3(s,a),isObject$3(e)&&n.set(e,s),s)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$2(e,t[0].toLowerCase()+t.slice(1))||hasOwn$2(e,hyphenate(t))||hasOwn$2(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,r){if(!t||e._n)return e;const n=(...o)=>{n._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(t);let s;try{s=e(...o)}finally{setCurrentRenderingInstance(a),n._d&&setBlockTracking(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:r,proxy:n,withProxy:o,props:a,propsOptions:[s],slots:l,attrs:u,emit:c,render:f,renderCache:d,data:g,setupState:m,ctx:x,inheritAttrs:w}=e;let M,b;const A=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const _=o||n;M=normalizeVNode(f.call(_,_,d,a,m,g,x)),b=u}else{const _=t;M=normalizeVNode(_.length>1?_(a,{attrs:u,slots:l,emit:c}):_(a,null)),b=t.props?u:getFunctionalFallthrough(u)}}catch(_){blockStack.length=0,handleError(_,e,1),M=createVNode(Comment)}let v=M;if(b&&w!==!1){const _=Object.keys(b),{shapeFlag:S}=v;_.length&&S&7&&(s&&_.some(isModelListener)&&(b=filterModelListeners(b,s)),v=cloneVNode(v,b))}return r.dirs&&(v=cloneVNode(v),v.dirs=v.dirs?v.dirs.concat(r.dirs):r.dirs),r.transition&&(v.transition=r.transition),M=v,setCurrentRenderingInstance(A),M}const getFunctionalFallthrough=e=>{let t;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=e[r]);return t},filterModelListeners=(e,t)=>{const r={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function shouldUpdateComponent(e,t,r){const{props:n,children:o,component:a}=e,{props:s,children:l,patchFlag:u}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?hasPropsChanged(n,s,c):!!s;if(u&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const g=f[d];if(s[g]!==n[g]&&!isEmitListener(c,g))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===s?!1:n?s?hasPropsChanged(n,s,c):!0:!!s;return!1}function hasPropsChanged(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!isEmitListener(r,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const INITIAL_WATCHER_VALUE={};function watch(e,t,r){return doWatch(e,t,r)}function doWatch(e,t,{immediate:r,deep:n,flush:o,onTrack:a,onTrigger:s}=EMPTY_OBJ){var l;const u=getCurrentScope()===((l=currentInstance)==null?void 0:l.scope)?currentInstance:null;let c,f=!1,d=!1;if(isRef(e)?(c=()=>e.value,f=isShallow(e)):isReactive(e)?(c=()=>e,n=!0):isArray$1(e)?(d=!0,f=e.some(_=>isReactive(_)||isShallow(_)),c=()=>e.map(_=>{if(isRef(_))return _.value;if(isReactive(_))return traverse(_);if(isFunction(_))return callWithErrorHandling(_,u,2)})):isFunction(e)?t?c=()=>callWithErrorHandling(e,u,2):c=()=>{if(!(u&&u.isUnmounted))return g&&g(),callWithAsyncErrorHandling(e,u,3,[m])}:c=NOOP,t&&n){const _=c;c=()=>traverse(_())}let g,m=_=>{g=A.onStop=()=>{callWithErrorHandling(_,u,4)}},x;if(isInSSRComponentSetup)if(m=NOOP,t?r&&callWithAsyncErrorHandling(t,u,3,[c(),d?[]:void 0,m]):c(),o==="sync"){const _=useSSRContext();x=_.__watcherHandles||(_.__watcherHandles=[])}else return NOOP;let w=d?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const M=()=>{if(A.active)if(t){const _=A.run();(n||f||(d?_.some((S,B)=>hasChanged(S,w[B])):hasChanged(_,w)))&&(g&&g(),callWithAsyncErrorHandling(t,u,3,[_,w===INITIAL_WATCHER_VALUE?void 0:d&&w[0]===INITIAL_WATCHER_VALUE?[]:w,m]),w=_)}else A.run()};M.allowRecurse=!!t;let b;o==="sync"?b=M:o==="post"?b=()=>queuePostRenderEffect(M,u&&u.suspense):(M.pre=!0,u&&(M.id=u.uid),b=()=>queueJob(M));const A=new ReactiveEffect(c,b);t?r?M():w=A.run():o==="post"?queuePostRenderEffect(A.run.bind(A),u&&u.suspense):A.run();const v=()=>{A.stop(),u&&u.scope&&remove(u.scope.effects,A)};return x&&x.push(v),v}function instanceWatch(e,t,r){const n=this.proxy,o=isString(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let a;isFunction(t)?a=t:(a=t.handler,r=t);const s=currentInstance;setCurrentInstance(this);const l=doWatch(o,a.bind(n),r);return s?setCurrentInstance(s):unsetCurrentInstance(),l}function createPathGetter(e,t){const r=t.split(".");return()=>{let n=e;for(let o=0;o<r.length&&n;o++)n=n[r[o]];return n}}function traverse(e,t){if(!isObject$3(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$1(e))for(let r=0;r<e.length;r++)traverse(e[r],t);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t)});else if(isPlainObject(e))for(const r in e)traverse(e[r],t);return e}function withDirectives(e,t){const r=currentRenderingInstance;if(r===null)return e;const n=getExposeProxy(r)||r.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,l,u,c=EMPTY_OBJ]=t[a];s&&(isFunction(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(l),o.push({dir:s,instance:n,value:l,oldValue:void 0,arg:u,modifiers:c}))}return e}function invokeDirectiveHook(e,t,r,n){const o=e.dirs,a=t&&t.dirs;for(let s=0;s<o.length;s++){const l=o[s];a&&(l.oldValue=a[s].value);let u=l.dir[n];u&&(pauseTracking(),callWithAsyncErrorHandling(u,r,8,[e.el,l,e,t]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:t}){const r=getCurrentInstance(),n=useTransitionState();let o;return()=>{const a=t.default&&getTransitionRawChildren(t.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const w of a)if(w.type!==Comment){s=w;break}}const l=toRaw(e),{mode:u}=l;if(n.isLeaving)return emptyPlaceholder(s);const c=getKeepAliveChild(s);if(!c)return emptyPlaceholder(s);const f=resolveTransitionHooks(c,l,n,r);setTransitionHooks(c,f);const d=r.subTree,g=d&&getKeepAliveChild(d);let m=!1;const{getTransitionKey:x}=c.type;if(x){const w=x();o===void 0?o=w:w!==o&&(o=w,m=!0)}if(g&&g.type!==Comment&&(!isSameVNodeType(c,g)||m)){const w=resolveTransitionHooks(g,l,n,r);if(setTransitionHooks(g,w),u==="out-in")return n.isLeaving=!0,w.afterLeave=()=>{n.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder(s);u==="in-out"&&c.type!==Comment&&(w.delayLeave=(M,b,A)=>{const v=getLeavingNodesForType(n,g);v[String(g.key)]=g,M[leaveCbKey]=()=>{b(),M[leaveCbKey]=void 0,delete f.delayedLeave},f.delayedLeave=A})}return s}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function resolveTransitionHooks(e,t,r,n){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:d,onLeave:g,onAfterLeave:m,onLeaveCancelled:x,onBeforeAppear:w,onAppear:M,onAfterAppear:b,onAppearCancelled:A}=t,v=String(e.key),_=getLeavingNodesForType(r,e),S=(E,T)=>{E&&callWithAsyncErrorHandling(E,n,9,T)},B=(E,T)=>{const y=T[1];S(E,T),isArray$1(E)?E.every(k=>k.length<=1)&&y():E.length<=1&&y()},I={mode:a,persisted:s,beforeEnter(E){let T=l;if(!r.isMounted)if(o)T=w||l;else return;E[leaveCbKey]&&E[leaveCbKey](!0);const y=_[v];y&&isSameVNodeType(e,y)&&y.el[leaveCbKey]&&y.el[leaveCbKey](),S(T,[E])},enter(E){let T=u,y=c,k=f;if(!r.isMounted)if(o)T=M||u,y=b||c,k=A||f;else return;let C=!1;const F=E[enterCbKey]=Y=>{C||(C=!0,Y?S(k,[E]):S(y,[E]),I.delayedLeave&&I.delayedLeave(),E[enterCbKey]=void 0)};T?B(T,[E,F]):F()},leave(E,T){const y=String(e.key);if(E[enterCbKey]&&E[enterCbKey](!0),r.isUnmounting)return T();S(d,[E]);let k=!1;const C=E[leaveCbKey]=F=>{k||(k=!0,T(),F?S(x,[E]):S(m,[E]),E[leaveCbKey]=void 0,_[y]===e&&delete _[y])};_[y]=e,g?B(g,[E,C]):C()},clone(E){return resolveTransitionHooks(E,t,r,n)}};return I}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,r){let n=[],o=0;for(let a=0;a<e.length;a++){let s=e[a];const l=r==null?s.key:String(r)+String(s.key!=null?s.key:a);s.type===Fragment?(s.patchFlag&128&&o++,n=n.concat(getTransitionRawChildren(s.children,t,l))):(t||s.type!==Comment)&&n.push(l!=null?cloneVNode(s,{key:l}):s)}if(o>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,r=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(injectHook(t,n,r),r){let o=r.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(n,t,r,o),o=o.parent}}function injectToKeepAliveRoot(e,t,r,n){const o=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],o)},r)}function injectHook(e,t,r=currentInstance,n=!1){if(r){const o=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const l=callWithAsyncErrorHandling(t,r,e,s);return unsetCurrentInstance(),resetTracking(),l});return n?o.unshift(a):o.push(a),a}}const createHook=e=>(t,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function renderList(e,t,r,n){let o;const a=r&&r[n];if(isArray$1(e)||isString(e)){o=new Array(e.length);for(let s=0,l=e.length;s<l;s++)o[s]=t(e[s],s,void 0,a&&a[s])}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,a&&a[s])}else if(isObject$3(e))if(e[Symbol.iterator])o=Array.from(e,(s,l)=>t(s,l,void 0,a&&a[l]));else{const s=Object.keys(e);o=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];o[l]=t(e[c],c,l,a&&a[l])}}else o=[];return r&&(r[n]=o),o}function renderSlot(e,t,r={},n,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return t!=="default"&&(r.name=t),createVNode("slot",r,n&&n());let a=e[t];a&&a._c&&(a._d=!1),openBlock();const s=a&&ensureValidVNode(a(r)),l=createBlock(Fragment,{key:r.key||s&&s.key||`_${t}`},s||(n?n():[]),s&&e._===1?64:-2);return!o&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function ensureValidVNode(e){return e.some(t=>isVNode(t)?!(t.type===Comment||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$2(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:r,setupState:n,data:o,props:a,accessCache:s,type:l,appContext:u}=e;let c;if(t[0]!=="$"){const m=s[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return o[t];case 4:return r[t];case 3:return a[t]}else{if(hasSetupBinding(n,t))return s[t]=1,n[t];if(o!==EMPTY_OBJ&&hasOwn$2(o,t))return s[t]=2,o[t];if((c=e.propsOptions[0])&&hasOwn$2(c,t))return s[t]=3,a[t];if(r!==EMPTY_OBJ&&hasOwn$2(r,t))return s[t]=4,r[t];shouldCacheAccess&&(s[t]=0)}}const f=publicPropertiesMap[t];let d,g;if(f)return t==="$attrs"&&track(e,"get",t),f(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(r!==EMPTY_OBJ&&hasOwn$2(r,t))return s[t]=4,r[t];if(g=u.config.globalProperties,hasOwn$2(g,t))return g[t]},set({_:e},t,r){const{data:n,setupState:o,ctx:a}=e;return hasSetupBinding(o,t)?(o[t]=r,!0):n!==EMPTY_OBJ&&hasOwn$2(n,t)?(n[t]=r,!0):hasOwn$2(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:o,propsOptions:a}},s){let l;return!!r[s]||e!==EMPTY_OBJ&&hasOwn$2(e,s)||hasSetupBinding(t,s)||(l=a[0])&&hasOwn$2(l,s)||hasOwn$2(n,s)||hasOwn$2(publicPropertiesMap,s)||hasOwn$2(o.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:hasOwn$2(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function normalizePropsOrEmits(e){return isArray$1(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),r=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:s,watch:l,provide:u,inject:c,created:f,beforeMount:d,mounted:g,beforeUpdate:m,updated:x,activated:w,deactivated:M,beforeDestroy:b,beforeUnmount:A,destroyed:v,unmounted:_,render:S,renderTracked:B,renderTriggered:I,errorCaptured:E,serverPrefetch:T,expose:y,inheritAttrs:k,components:C,directives:F,filters:Y}=t;if(c&&resolveInjections(c,n,null),s)for(const te in s){const q=s[te];isFunction(q)&&(n[te]=q.bind(r))}if(o){const te=o.call(r,r);isObject$3(te)&&(e.data=reactive(te))}if(shouldCacheAccess=!0,a)for(const te in a){const q=a[te],ue=isFunction(q)?q.bind(r,r):isFunction(q.get)?q.get.bind(r,r):NOOP,le=!isFunction(q)&&isFunction(q.set)?q.set.bind(r):NOOP,ge=computed({get:ue,set:le});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>ge.value,set:de=>ge.value=de})}if(l)for(const te in l)createWatcher(l[te],n,r,te);if(u){const te=isFunction(u)?u.call(r):u;Reflect.ownKeys(te).forEach(q=>{provide(q,te[q])})}f&&callHook$1(f,e,"c");function ee(te,q){isArray$1(q)?q.forEach(ue=>te(ue.bind(r))):q&&te(q.bind(r))}if(ee(onBeforeMount,d),ee(onMounted,g),ee(onBeforeUpdate,m),ee(onUpdated,x),ee(onActivated,w),ee(onDeactivated,M),ee(onErrorCaptured,E),ee(onRenderTracked,B),ee(onRenderTriggered,I),ee(onBeforeUnmount,A),ee(onUnmounted,_),ee(onServerPrefetch,T),isArray$1(y))if(y.length){const te=e.exposed||(e.exposed={});y.forEach(q=>{Object.defineProperty(te,q,{get:()=>r[q],set:ue=>r[q]=ue})})}else e.exposed||(e.exposed={});S&&e.render===NOOP&&(e.render=S),k!=null&&(e.inheritAttrs=k),C&&(e.components=C),F&&(e.directives=F)}function resolveInjections(e,t,r=NOOP){isArray$1(e)&&(e=normalizeInject(e));for(const n in e){const o=e[n];let a;isObject$3(o)?"default"in o?a=inject(o.from||n,o.default,!0):a=inject(o.from||n):a=inject(o),isRef(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[n]=a}}function callHook$1(e,t,r){callWithAsyncErrorHandling(isArray$1(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function createWatcher(e,t,r,n){const o=n.includes(".")?createPathGetter(r,n):()=>r[n];if(isString(e)){const a=t[e];isFunction(a)&&watch(o,a)}else if(isFunction(e))watch(o,e.bind(r));else if(isObject$3(e))if(isArray$1(e))e.forEach(a=>createWatcher(a,t,r,n));else{const a=isFunction(e.handler)?e.handler.bind(r):t[e.handler];isFunction(a)&&watch(o,a,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,l=a.get(t);let u;return l?u=l:!o.length&&!r&&!n?u=t:(u={},o.length&&o.forEach(c=>mergeOptions(u,c,s,!0)),mergeOptions(u,t,s)),isObject$3(t)&&a.set(t,u),u}function mergeOptions(e,t,r,n=!1){const{mixins:o,extends:a}=t;a&&mergeOptions(e,a,r,!0),o&&o.forEach(s=>mergeOptions(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const l=internalOptionMergeStrats[s]||r&&r[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$3(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$3(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$1(e)&&isArray$1(t)?[...new Set([...e,...t])]:extend$3(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const r=extend$3(Object.create(null),e);for(const n in t)r[n]=mergeAsArray(e[n],t[n]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,o=null){isFunction(n)||(n=extend$3({},n)),o!=null&&!isObject$3(o)&&(o=null);const a=createAppContext(),s=new WeakSet;let l=!1;const u=a.app={_uid:uid$1++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:version$1,get config(){return a.config},set config(c){},use(c,...f){return s.has(c)||(c&&isFunction(c.install)?(s.add(c),c.install(u,...f)):isFunction(c)&&(s.add(c),c(u,...f))),u},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),u},component(c,f){return f?(a.components[c]=f,u):a.components[c]},directive(c,f){return f?(a.directives[c]=f,u):a.directives[c]},mount(c,f,d){if(!l){const g=createVNode(n,o);return g.appContext=a,f&&t?t(g,c):e(g,c,d),l=!0,u._container=c,c.__vue_app__=u,getExposeProxy(g.component)||g.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return a.provides[c]=f,u},runWithContext(c){currentApp=u;try{return c()}finally{currentApp=null}}};return u}}let currentApp=null;function provide(e,t){if(currentInstance){let r=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===r&&(r=currentInstance.provides=Object.create(n)),r[e]=t}}function inject(e,t,r=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const o=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return r&&isFunction(t)?t.call(n&&n.proxy):t}}function initProps(e,t,r,n=!1){const o={},a={};def(a,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,o,a);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);r?e.props=n?o:shallowReactive(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function updateProps(e,t,r,n){const{props:o,attrs:a,vnode:{patchFlag:s}}=e,l=toRaw(o),[u]=e.propsOptions;let c=!1;if((n||s>0)&&!(s&16)){if(s&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let g=f[d];if(isEmitListener(e.emitsOptions,g))continue;const m=t[g];if(u)if(hasOwn$2(a,g))m!==a[g]&&(a[g]=m,c=!0);else{const x=camelize(g);o[x]=resolvePropValue(u,l,x,m,e,!1)}else m!==a[g]&&(a[g]=m,c=!0)}}}else{setFullProps(e,t,o,a)&&(c=!0);let f;for(const d in l)(!t||!hasOwn$2(t,d)&&((f=hyphenate(d))===d||!hasOwn$2(t,f)))&&(u?r&&(r[d]!==void 0||r[f]!==void 0)&&(o[d]=resolvePropValue(u,l,d,void 0,e,!0)):delete o[d]);if(a!==l)for(const d in a)(!t||!hasOwn$2(t,d))&&(delete a[d],c=!0)}c&&trigger(e,"set","$attrs")}function setFullProps(e,t,r,n){const[o,a]=e.propsOptions;let s=!1,l;if(t)for(let u in t){if(isReservedProp(u))continue;const c=t[u];let f;o&&hasOwn$2(o,f=camelize(u))?!a||!a.includes(f)?r[f]=c:(l||(l={}))[f]=c:isEmitListener(e.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,s=!0)}if(a){const u=toRaw(r),c=l||EMPTY_OBJ;for(let f=0;f<a.length;f++){const d=a[f];r[d]=resolvePropValue(o,u,d,c[d],e,!hasOwn$2(c,d))}}return s}function resolvePropValue(e,t,r,n,o,a){const s=e[r];if(s!=null){const l=hasOwn$2(s,"default");if(l&&n===void 0){const u=s.default;if(s.type!==Function&&!s.skipFactory&&isFunction(u)){const{propsDefaults:c}=o;r in c?n=c[r]:(setCurrentInstance(o),n=c[r]=u.call(null,t),unsetCurrentInstance())}else n=u}s[0]&&(a&&!l?n=!1:s[1]&&(n===""||n===hyphenate(r))&&(n=!0))}return n}function normalizePropsOptions(e,t,r=!1){const n=t.propsCache,o=n.get(e);if(o)return o;const a=e.props,s={},l=[];let u=!1;if(!isFunction(e)){const f=d=>{u=!0;const[g,m]=normalizePropsOptions(d,t,!0);extend$3(s,g),m&&l.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!u)return isObject$3(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(a))for(let f=0;f<a.length;f++){const d=camelize(a[f]);validatePropName(d)&&(s[d]=EMPTY_OBJ)}else if(a)for(const f in a){const d=camelize(f);if(validatePropName(d)){const g=a[f],m=s[d]=isArray$1(g)||isFunction(g)?{type:g}:extend$3({},g);if(m){const x=getTypeIndex(Boolean,m.type),w=getTypeIndex(String,m.type);m[0]=x>-1,m[1]=w<0||x<w,(x>-1||hasOwn$2(m,"default"))&&l.push(d)}}}const c=[s,l];return isObject$3(e)&&n.set(e,c),c}function validatePropName(e){return e[0]!=="$"}function getType$1(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType$1(e)===getType$1(t)}function getTypeIndex(e,t){return isArray$1(t)?t.findIndex(r=>isSameType(r,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,r)=>{if(t._n)return t;const n=withCtx((...o)=>normalizeSlotValue(t(...o)),r);return n._c=!1,n},normalizeObjectSlots=(e,t,r)=>{const n=e._ctx;for(const o in e){if(isInternalKey(o))continue;const a=e[o];if(isFunction(a))t[o]=normalizeSlot(o,a,n);else if(a!=null){const s=normalizeSlotValue(a);t[o]=()=>s}}},normalizeVNodeSlots=(e,t)=>{const r=normalizeSlotValue(t);e.slots.default=()=>r},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,r)=>{const{vnode:n,slots:o}=e;let a=!0,s=EMPTY_OBJ;if(n.shapeFlag&32){const l=t._;l?r&&l===1?a=!1:(extend$3(o,t),!r&&l===1&&delete o._):(a=!t.$stable,normalizeObjectSlots(t,o)),s=t}else t&&(normalizeVNodeSlots(e,t),s={default:1});if(a)for(const l in o)!isInternalKey(l)&&s[l]==null&&delete o[l]};function setRef(e,t,r,n,o=!1){if(isArray$1(e)){e.forEach((g,m)=>setRef(g,t&&(isArray$1(t)?t[m]:t),r,n,o));return}if(isAsyncWrapper(n)&&!o)return;const a=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,s=o?null:a,{i:l,r:u}=e,c=t&&t.r,f=l.refs===EMPTY_OBJ?l.refs={}:l.refs,d=l.setupState;if(c!=null&&c!==u&&(isString(c)?(f[c]=null,hasOwn$2(d,c)&&(d[c]=null)):isRef(c)&&(c.value=null)),isFunction(u))callWithErrorHandling(u,l,12,[s,f]);else{const g=isString(u),m=isRef(u);if(g||m){const x=()=>{if(e.f){const w=g?hasOwn$2(d,u)?d[u]:f[u]:u.value;o?isArray$1(w)&&remove(w,a):isArray$1(w)?w.includes(a)||w.push(a):g?(f[u]=[a],hasOwn$2(d,u)&&(d[u]=f[u])):(u.value=[a],e.k&&(f[e.k]=u.value))}else g?(f[u]=s,hasOwn$2(d,u)&&(d[u]=s)):m&&(u.value=s,e.k&&(f[e.k]=s))};s?(x.id=-1,queuePostRenderEffect(x,r)):x()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:s,createText:l,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:g,setScopeId:m=NOOP,insertStaticContent:x}=e,w=(R,D,O,V=null,G=null,z=null,X=!1,P=null,H=!!D.dynamicChildren)=>{if(R===D)return;R&&!isSameVNodeType(R,D)&&(V=pe(R),de(R,G,z,!0),R=null),D.patchFlag===-2&&(H=!1,D.dynamicChildren=null);const{type:j,ref:Z,shapeFlag:L}=D;switch(j){case Text:M(R,D,O,V);break;case Comment:b(R,D,O,V);break;case Static:R==null&&A(D,O,V,X);break;case Fragment:C(R,D,O,V,G,z,X,P,H);break;default:L&1?S(R,D,O,V,G,z,X,P,H):L&6?F(R,D,O,V,G,z,X,P,H):(L&64||L&128)&&j.process(R,D,O,V,G,z,X,P,H,xe)}Z!=null&&G&&setRef(Z,R&&R.ref,z,D||R,!D)},M=(R,D,O,V)=>{if(R==null)n(D.el=l(D.children),O,V);else{const G=D.el=R.el;D.children!==R.children&&c(G,D.children)}},b=(R,D,O,V)=>{R==null?n(D.el=u(D.children||""),O,V):D.el=R.el},A=(R,D,O,V)=>{[R.el,R.anchor]=x(R.children,D,O,V,R.el,R.anchor)},v=({el:R,anchor:D},O,V)=>{let G;for(;R&&R!==D;)G=g(R),n(R,O,V),R=G;n(D,O,V)},_=({el:R,anchor:D})=>{let O;for(;R&&R!==D;)O=g(R),o(R),R=O;o(D)},S=(R,D,O,V,G,z,X,P,H)=>{X=X||D.type==="svg",R==null?B(D,O,V,G,z,X,P,H):T(R,D,G,z,X,P,H)},B=(R,D,O,V,G,z,X,P)=>{let H,j;const{type:Z,props:L,shapeFlag:ne,transition:se,dirs:W}=R;if(H=R.el=s(R.type,z,L&&L.is,L),ne&8?f(H,R.children):ne&16&&E(R.children,H,null,V,G,z&&Z!=="foreignObject",X,P),W&&invokeDirectiveHook(R,null,V,"created"),I(H,R,R.scopeId,X,V),L){for(const ce in L)ce!=="value"&&!isReservedProp(ce)&&a(H,ce,null,L[ce],z,R.children,V,G,he);"value"in L&&a(H,"value",null,L.value),(j=L.onVnodeBeforeMount)&&invokeVNodeHook(j,V,R)}W&&invokeDirectiveHook(R,null,V,"beforeMount");const re=needTransition(G,se);re&&se.beforeEnter(H),n(H,D,O),((j=L&&L.onVnodeMounted)||re||W)&&queuePostRenderEffect(()=>{j&&invokeVNodeHook(j,V,R),re&&se.enter(H),W&&invokeDirectiveHook(R,null,V,"mounted")},G)},I=(R,D,O,V,G)=>{if(O&&m(R,O),V)for(let z=0;z<V.length;z++)m(R,V[z]);if(G){let z=G.subTree;if(D===z){const X=G.vnode;I(R,X,X.scopeId,X.slotScopeIds,G.parent)}}},E=(R,D,O,V,G,z,X,P,H=0)=>{for(let j=H;j<R.length;j++){const Z=R[j]=P?cloneIfMounted(R[j]):normalizeVNode(R[j]);w(null,Z,D,O,V,G,z,X,P)}},T=(R,D,O,V,G,z,X)=>{const P=D.el=R.el;let{patchFlag:H,dynamicChildren:j,dirs:Z}=D;H|=R.patchFlag&16;const L=R.props||EMPTY_OBJ,ne=D.props||EMPTY_OBJ;let se;O&&toggleRecurse(O,!1),(se=ne.onVnodeBeforeUpdate)&&invokeVNodeHook(se,O,D,R),Z&&invokeDirectiveHook(D,R,O,"beforeUpdate"),O&&toggleRecurse(O,!0);const W=G&&D.type!=="foreignObject";if(j?y(R.dynamicChildren,j,P,O,V,W,z):X||q(R,D,P,null,O,V,W,z,!1),H>0){if(H&16)k(P,D,L,ne,O,V,G);else if(H&2&&L.class!==ne.class&&a(P,"class",null,ne.class,G),H&4&&a(P,"style",L.style,ne.style,G),H&8){const re=D.dynamicProps;for(let ce=0;ce<re.length;ce++){const oe=re[ce],we=L[oe],Me=ne[oe];(Me!==we||oe==="value")&&a(P,oe,we,Me,G,R.children,O,V,he)}}H&1&&R.children!==D.children&&f(P,D.children)}else!X&&j==null&&k(P,D,L,ne,O,V,G);((se=ne.onVnodeUpdated)||Z)&&queuePostRenderEffect(()=>{se&&invokeVNodeHook(se,O,D,R),Z&&invokeDirectiveHook(D,R,O,"updated")},V)},y=(R,D,O,V,G,z,X)=>{for(let P=0;P<D.length;P++){const H=R[P],j=D[P],Z=H.el&&(H.type===Fragment||!isSameVNodeType(H,j)||H.shapeFlag&70)?d(H.el):O;w(H,j,Z,null,V,G,z,X,!0)}},k=(R,D,O,V,G,z,X)=>{if(O!==V){if(O!==EMPTY_OBJ)for(const P in O)!isReservedProp(P)&&!(P in V)&&a(R,P,O[P],null,X,D.children,G,z,he);for(const P in V){if(isReservedProp(P))continue;const H=V[P],j=O[P];H!==j&&P!=="value"&&a(R,P,j,H,X,D.children,G,z,he)}"value"in V&&a(R,"value",O.value,V.value)}},C=(R,D,O,V,G,z,X,P,H)=>{const j=D.el=R?R.el:l(""),Z=D.anchor=R?R.anchor:l("");let{patchFlag:L,dynamicChildren:ne,slotScopeIds:se}=D;se&&(P=P?P.concat(se):se),R==null?(n(j,O,V),n(Z,O,V),E(D.children,O,Z,G,z,X,P,H)):L>0&&L&64&&ne&&R.dynamicChildren?(y(R.dynamicChildren,ne,O,G,z,X,P),(D.key!=null||G&&D===G.subTree)&&traverseStaticChildren(R,D,!0)):q(R,D,O,Z,G,z,X,P,H)},F=(R,D,O,V,G,z,X,P,H)=>{D.slotScopeIds=P,R==null?D.shapeFlag&512?G.ctx.activate(D,O,V,X,H):Y(D,O,V,G,z,X,H):K(R,D,H)},Y=(R,D,O,V,G,z,X)=>{const P=R.component=createComponentInstance(R,V,G);if(isKeepAlive(R)&&(P.ctx.renderer=xe),setupComponent(P),P.asyncDep){if(G&&G.registerDep(P,ee),!R.el){const H=P.subTree=createVNode(Comment);b(null,H,D,O)}return}ee(P,R,D,O,G,z,X)},K=(R,D,O)=>{const V=D.component=R.component;if(shouldUpdateComponent(R,D,O))if(V.asyncDep&&!V.asyncResolved){te(V,D,O);return}else V.next=D,invalidateJob(V.update),V.update();else D.el=R.el,V.vnode=D},ee=(R,D,O,V,G,z,X)=>{const P=()=>{if(R.isMounted){let{next:Z,bu:L,u:ne,parent:se,vnode:W}=R,re=Z,ce;toggleRecurse(R,!1),Z?(Z.el=W.el,te(R,Z,X)):Z=W,L&&invokeArrayFns(L),(ce=Z.props&&Z.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ce,se,Z,W),toggleRecurse(R,!0);const oe=renderComponentRoot(R),we=R.subTree;R.subTree=oe,w(we,oe,d(we.el),pe(we),R,G,z),Z.el=oe.el,re===null&&updateHOCHostEl(R,oe.el),ne&&queuePostRenderEffect(ne,G),(ce=Z.props&&Z.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ce,se,Z,W),G)}else{let Z;const{el:L,props:ne}=D,{bm:se,m:W,parent:re}=R,ce=isAsyncWrapper(D);if(toggleRecurse(R,!1),se&&invokeArrayFns(se),!ce&&(Z=ne&&ne.onVnodeBeforeMount)&&invokeVNodeHook(Z,re,D),toggleRecurse(R,!0),L&&ve){const oe=()=>{R.subTree=renderComponentRoot(R),ve(L,R.subTree,R,G,null)};ce?D.type.__asyncLoader().then(()=>!R.isUnmounted&&oe()):oe()}else{const oe=R.subTree=renderComponentRoot(R);w(null,oe,O,V,R,G,z),D.el=oe.el}if(W&&queuePostRenderEffect(W,G),!ce&&(Z=ne&&ne.onVnodeMounted)){const oe=D;queuePostRenderEffect(()=>invokeVNodeHook(Z,re,oe),G)}(D.shapeFlag&256||re&&isAsyncWrapper(re.vnode)&&re.vnode.shapeFlag&256)&&R.a&&queuePostRenderEffect(R.a,G),R.isMounted=!0,D=O=V=null}},H=R.effect=new ReactiveEffect(P,()=>queueJob(j),R.scope),j=R.update=()=>H.run();j.id=R.uid,toggleRecurse(R,!0),j()},te=(R,D,O)=>{D.component=R;const V=R.vnode.props;R.vnode=D,R.next=null,updateProps(R,D.props,V,O),updateSlots(R,D.children,O),pauseTracking(),flushPreFlushCbs(),resetTracking()},q=(R,D,O,V,G,z,X,P,H=!1)=>{const j=R&&R.children,Z=R?R.shapeFlag:0,L=D.children,{patchFlag:ne,shapeFlag:se}=D;if(ne>0){if(ne&128){le(j,L,O,V,G,z,X,P,H);return}else if(ne&256){ue(j,L,O,V,G,z,X,P,H);return}}se&8?(Z&16&&he(j,G,z),L!==j&&f(O,L)):Z&16?se&16?le(j,L,O,V,G,z,X,P,H):he(j,G,z,!0):(Z&8&&f(O,""),se&16&&E(L,O,V,G,z,X,P,H))},ue=(R,D,O,V,G,z,X,P,H)=>{R=R||EMPTY_ARR,D=D||EMPTY_ARR;const j=R.length,Z=D.length,L=Math.min(j,Z);let ne;for(ne=0;ne<L;ne++){const se=D[ne]=H?cloneIfMounted(D[ne]):normalizeVNode(D[ne]);w(R[ne],se,O,null,G,z,X,P,H)}j>Z?he(R,G,z,!0,!1,L):E(D,O,V,G,z,X,P,H,L)},le=(R,D,O,V,G,z,X,P,H)=>{let j=0;const Z=D.length;let L=R.length-1,ne=Z-1;for(;j<=L&&j<=ne;){const se=R[j],W=D[j]=H?cloneIfMounted(D[j]):normalizeVNode(D[j]);if(isSameVNodeType(se,W))w(se,W,O,null,G,z,X,P,H);else break;j++}for(;j<=L&&j<=ne;){const se=R[L],W=D[ne]=H?cloneIfMounted(D[ne]):normalizeVNode(D[ne]);if(isSameVNodeType(se,W))w(se,W,O,null,G,z,X,P,H);else break;L--,ne--}if(j>L){if(j<=ne){const se=ne+1,W=se<Z?D[se].el:V;for(;j<=ne;)w(null,D[j]=H?cloneIfMounted(D[j]):normalizeVNode(D[j]),O,W,G,z,X,P,H),j++}}else if(j>ne)for(;j<=L;)de(R[j],G,z,!0),j++;else{const se=j,W=j,re=new Map;for(j=W;j<=ne;j++){const Ae=D[j]=H?cloneIfMounted(D[j]):normalizeVNode(D[j]);Ae.key!=null&&re.set(Ae.key,j)}let ce,oe=0;const we=ne-W+1;let Me=!1,be=0;const Ee=new Array(we);for(j=0;j<we;j++)Ee[j]=0;for(j=se;j<=L;j++){const Ae=R[j];if(oe>=we){de(Ae,G,z,!0);continue}let ke;if(Ae.key!=null)ke=re.get(Ae.key);else for(ce=W;ce<=ne;ce++)if(Ee[ce-W]===0&&isSameVNodeType(Ae,D[ce])){ke=ce;break}ke===void 0?de(Ae,G,z,!0):(Ee[ke-W]=j+1,ke>=be?be=ke:Me=!0,w(Ae,D[ke],O,null,G,z,X,P,H),oe++)}const Se=Me?getSequence(Ee):EMPTY_ARR;for(ce=Se.length-1,j=we-1;j>=0;j--){const Ae=W+j,ke=D[Ae],Ce=Ae+1<Z?D[Ae+1].el:V;Ee[j]===0?w(null,ke,O,Ce,G,z,X,P,H):Me&&(ce<0||j!==Se[ce]?ge(ke,O,Ce,2):ce--)}}},ge=(R,D,O,V,G=null)=>{const{el:z,type:X,transition:P,children:H,shapeFlag:j}=R;if(j&6){ge(R.component.subTree,D,O,V);return}if(j&128){R.suspense.move(D,O,V);return}if(j&64){X.move(R,D,O,xe);return}if(X===Fragment){n(z,D,O);for(let L=0;L<H.length;L++)ge(H[L],D,O,V);n(R.anchor,D,O);return}if(X===Static){v(R,D,O);return}if(V!==2&&j&1&&P)if(V===0)P.beforeEnter(z),n(z,D,O),queuePostRenderEffect(()=>P.enter(z),G);else{const{leave:L,delayLeave:ne,afterLeave:se}=P,W=()=>n(z,D,O),re=()=>{L(z,()=>{W(),se&&se()})};ne?ne(z,W,re):re()}else n(z,D,O)},de=(R,D,O,V=!1,G=!1)=>{const{type:z,props:X,ref:P,children:H,dynamicChildren:j,shapeFlag:Z,patchFlag:L,dirs:ne}=R;if(P!=null&&setRef(P,null,O,R,!0),Z&256){D.ctx.deactivate(R);return}const se=Z&1&&ne,W=!isAsyncWrapper(R);let re;if(W&&(re=X&&X.onVnodeBeforeUnmount)&&invokeVNodeHook(re,D,R),Z&6)Q(R.component,O,V);else{if(Z&128){R.suspense.unmount(O,V);return}se&&invokeDirectiveHook(R,null,D,"beforeUnmount"),Z&64?R.type.remove(R,D,O,G,xe,V):j&&(z!==Fragment||L>0&&L&64)?he(j,D,O,!1,!0):(z===Fragment&&L&384||!G&&Z&16)&&he(H,D,O),V&&ie(R)}(W&&(re=X&&X.onVnodeUnmounted)||se)&&queuePostRenderEffect(()=>{re&&invokeVNodeHook(re,D,R),se&&invokeDirectiveHook(R,null,D,"unmounted")},O)},ie=R=>{const{type:D,el:O,anchor:V,transition:G}=R;if(D===Fragment){ae(O,V);return}if(D===Static){_(R);return}const z=()=>{o(O),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(R.shapeFlag&1&&G&&!G.persisted){const{leave:X,delayLeave:P}=G,H=()=>X(O,z);P?P(R.el,z,H):H()}else z()},ae=(R,D)=>{let O;for(;R!==D;)O=g(R),o(R),R=O;o(D)},Q=(R,D,O)=>{const{bum:V,scope:G,update:z,subTree:X,um:P}=R;V&&invokeArrayFns(V),G.stop(),z&&(z.active=!1,de(X,R,D,O)),P&&queuePostRenderEffect(P,D),queuePostRenderEffect(()=>{R.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},he=(R,D,O,V=!1,G=!1,z=0)=>{for(let X=z;X<R.length;X++)de(R[X],D,O,V,G)},pe=R=>R.shapeFlag&6?pe(R.component.subTree):R.shapeFlag&128?R.suspense.next():g(R.anchor||R.el),_e=(R,D,O)=>{R==null?D._vnode&&de(D._vnode,null,null,!0):w(D._vnode||null,R,D,null,null,null,O),flushPreFlushCbs(),flushPostFlushCbs(),D._vnode=R},xe={p:w,um:de,m:ge,r:ie,mt:Y,mc:E,pc:q,pbc:y,n:pe,o:e};let ye,ve;return t&&([ye,ve]=t(xe)),{render:_e,hydrate:ye,createApp:createAppAPI(_e,ye)}}function toggleRecurse({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,r=!1){const n=e.children,o=t.children;if(isArray$1(n)&&isArray$1(o))for(let a=0;a<n.length;a++){const s=n[a];let l=o[a];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[a]=cloneIfMounted(o[a]),l.el=s.el),r||traverseStaticChildren(s,l)),l.type===Text&&(l.el=s.el)}}function getSequence(e){const t=e.slice(),r=[0];let n,o,a,s,l;const u=e.length;for(n=0;n<u;n++){const c=e[n];if(c!==0){if(o=r[r.length-1],e[o]<c){t[n]=o,r.push(n);continue}for(a=0,s=r.length-1;a<s;)l=a+s>>1,e[r[l]]<c?a=l+1:s=l;c<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=t[s];return r}const isTeleport=e=>e.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,r,n,o,a){return setupBlock(createBaseVNode(e,t,r,n,o,a,!0))}function createBlock(e,t,r,n,o){return setupBlock(createVNode(e,t,r,n,o,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!r}:e:null);function createBaseVNode(e,t=null,r=null,n=0,o=null,a=e===Fragment?0:1,s=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return l?(normalizeChildren(u,r),a&128&&e.normalize(u)):r&&(u.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!s&&currentBlock&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(e,t=null,r=null,n=0,o=null,a=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const l=cloneVNode(e,t,!0);return r&&normalizeChildren(l,r),isBlockTreeEnabled>0&&!a&&currentBlock&&(l.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=l:currentBlock.push(l)),l.patchFlag|=-2,l}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:l,style:u}=t;l&&!isString(l)&&(t.class=normalizeClass(l)),isObject$3(u)&&(isProxy(u)&&!isArray$1(u)&&(u=extend$3({},u)),t.style=normalizeStyle(u))}const s=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$3(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,r,n,o,s,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$3({},e):e:null}function cloneVNode(e,t,r=!1){const{props:n,ref:o,patchFlag:a,children:s}=e,l=t?mergeProps(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&normalizeKey(l),ref:t&&t.ref?r&&o?isArray$1(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray$1(t))r=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),normalizeChildren(e,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),n&64?(r=16,t=[createTextVNode(t)]):r=8);e.children=t,e.shapeFlag|=r}function mergeProps(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(o==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(o)){const a=t[o],s=n[o];s&&a!==s&&!(isArray$1(a)&&a.includes(s))&&(t[o]=a?[].concat(a,s):s)}else o!==""&&(t[o]=n[o])}return t}function invokeVNodeHook(e,t,r,n=null){callWithAsyncErrorHandling(e,t,7,[r,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,r){const n=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,o),emitsOptions:normalizeEmitsOptions(n,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:r,children:n}=e.vnode,o=isStatefulComponent(e);initProps(e,r,o,t),initSlots(e,n);const a=o?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,a}function setupStatefulComponent(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=r;if(n){const o=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const a=callWithErrorHandling(n,e,0,[e.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(a)){if(a.then(unsetCurrentInstance,unsetCurrentInstance),t)return a.then(s=>{handleSetupResult(e,s,t)}).catch(s=>{handleError(s,e,0)});e.asyncDep=a}else handleSetupResult(e,a,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,r){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$3(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,r)}let compile;function finishComponentSetup(e,t,r){const n=e.type;if(!e.render){if(!t&&compile&&!n.render){const o=n.template||resolveMergedOptions(e).template;if(o){const{isCustomElement:a,compilerOptions:s}=e.appContext.config,{delimiters:l,compilerOptions:u}=n,c=extend$3(extend$3({isCustomElement:a,delimiters:l},s),u);n.render=compile(o,c)}}e.render=n.render||NOOP}{setCurrentInstance(e),pauseTracking();try{applyOptions(e)}finally{resetTracking(),unsetCurrentInstance()}}}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return track(e,"get","$attrs"),t[r]}}))}function createSetupContext(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(t,r){return r in t||r in publicPropertiesMap}}))}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,r){const n=arguments.length;return n===2?isObject$3(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&isVNode(r)&&(r=[r]),createVNode(e,t,r))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$1="3.3.8",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const o=t?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,o,a){const s=r?r.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===a||!(o=o.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const l=templateContainer.content;if(n){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$3({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(e,t=[])=>{isArray$1(e)?e.forEach(r=>r(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$1(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const C in e)C in DOMTransitionPropsValidators||(t[C]=e[C]);if(e.css===!1)return t;const{name:r="v",type:n,duration:o,enterFromClass:a=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:l=`${r}-enter-to`,appearFromClass:u=a,appearActiveClass:c=s,appearToClass:f=l,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:g=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,x=normalizeDuration(o),w=x&&x[0],M=x&&x[1],{onBeforeEnter:b,onEnter:A,onEnterCancelled:v,onLeave:_,onLeaveCancelled:S,onBeforeAppear:B=b,onAppear:I=A,onAppearCancelled:E=v}=t,T=(C,F,Y)=>{removeTransitionClass(C,F?f:l),removeTransitionClass(C,F?c:s),Y&&Y()},y=(C,F)=>{C._isLeaving=!1,removeTransitionClass(C,d),removeTransitionClass(C,m),removeTransitionClass(C,g),F&&F()},k=C=>(F,Y)=>{const K=C?I:A,ee=()=>T(F,C,Y);callHook(K,[F,ee]),nextFrame(()=>{removeTransitionClass(F,C?u:a),addTransitionClass(F,C?f:l),hasExplicitCallback(K)||whenTransitionEnds(F,n,w,ee)})};return extend$3(t,{onBeforeEnter(C){callHook(b,[C]),addTransitionClass(C,a),addTransitionClass(C,s)},onBeforeAppear(C){callHook(B,[C]),addTransitionClass(C,u),addTransitionClass(C,c)},onEnter:k(!1),onAppear:k(!0),onLeave(C,F){C._isLeaving=!0;const Y=()=>y(C,F);addTransitionClass(C,d),forceReflow(),addTransitionClass(C,g),nextFrame(()=>{C._isLeaving&&(removeTransitionClass(C,d),addTransitionClass(C,m),hasExplicitCallback(_)||whenTransitionEnds(C,n,M,Y))}),callHook(_,[C,Y])},onEnterCancelled(C){T(C,!1),callHook(v,[C])},onAppearCancelled(C){T(C,!0),callHook(E,[C])},onLeaveCancelled(C){y(C),callHook(S,[C])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$3(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber$2(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[vtcKey]||(e[vtcKey]=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[vtcKey];r&&(r.delete(t),r.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,r,n){const o=e._endId=++endId,a=()=>{o===e._endId&&n()};if(r)return setTimeout(a,r);const{type:s,timeout:l,propCount:u}=getTransitionInfo(e,t);if(!s)return n();const c=s+"end";let f=0;const d=()=>{e.removeEventListener(c,g),a()},g=m=>{m.target===e&&++f>=u&&d()};setTimeout(()=>{f<u&&d()},l+1),e.addEventListener(c,g)}function getTransitionInfo(e,t){const r=window.getComputedStyle(e),n=x=>(r[x]||"").split(", "),o=n(`${TRANSITION}Delay`),a=n(`${TRANSITION}Duration`),s=getTimeout(o,a),l=n(`${ANIMATION}Delay`),u=n(`${ANIMATION}Duration`),c=getTimeout(l,u);let f=null,d=0,g=0;t===TRANSITION?s>0&&(f=TRANSITION,d=s,g=a.length):t===ANIMATION?c>0&&(f=ANIMATION,d=c,g=u.length):(d=Math.max(s,c),f=d>0?s>c?TRANSITION:ANIMATION:null,g=f?f===TRANSITION?a.length:u.length:0);const m=f===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:f,timeout:d,propCount:g,hasTransform:m}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>toMs(r)+toMs(e[n])))}function toMs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(e,t,r){const n=e[vtcKey];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const vShowOldKey=Symbol("_vod"),vShow={beforeMount(e,{value:t},{transition:r}){e[vShowOldKey]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[vShowOldKey]:"none"}function patchStyle(e,t,r){const n=e.style,o=isString(r);if(r&&!o){if(t&&!isString(t))for(const a in t)r[a]==null&&setStyle(n,a,"");for(const a in r)setStyle(n,a,r[a])}else{const a=n.display;o?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),vShowOldKey in e&&(n.display=a)}}const importantRE=/\s*!important$/;function setStyle(e,t,r){if(isArray$1(r))r.forEach(n=>setStyle(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=autoPrefix(e,t);importantRE.test(r)?e.setProperty(hyphenate(n),r.replace(importantRE,""),"important"):e[n]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const r=prefixCache[t];if(r)return r;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let o=0;o<prefixes.length;o++){const a=prefixes[o]+n;if(a in e)return prefixCache[t]=a}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,r,n,o){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,r);else{const a=isSpecialBooleanAttr(t);r==null||a&&!includeBooleanAttr(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function patchDOMProp(e,t,r,n,o,a,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,o,a),e[t]=r??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=r;const c=l==="OPTION"?e.getAttribute("value"):e.value,f=r??"";c!==f&&(e.value=f),r==null&&e.removeAttribute(t);return}let u=!1;if(r===""||r==null){const c=typeof e[t];c==="boolean"?r=includeBooleanAttr(r):r==null&&c==="string"?(r="",u=!0):c==="number"&&(r=0,u=!0)}try{e[t]=r}catch{}u&&e.removeAttribute(t)}function addEventListener(e,t,r,n){e.addEventListener(t,r,n)}function removeEventListener(e,t,r,n){e.removeEventListener(t,r,n)}const veiKey=Symbol("_vei");function patchEvent(e,t,r,n,o=null){const a=e[veiKey]||(e[veiKey]={}),s=a[t];if(n&&s)s.value=n;else{const[l,u]=parseName(t);if(n){const c=a[t]=createInvoker(n,o);addEventListener(e,l,c,u)}else s&&(removeEventListener(e,l,s,u),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,r.value),t,5,[n])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,r,n,o=!1,a,s,l,u)=>{t==="class"?patchClass(e,n,o):t==="style"?patchStyle(e,r,n):isOn(t)?isModelListener(t)||patchEvent(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,o))?patchDOMProp(e,t,n,a,s,l,u):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,o))};function shouldSetAsProp(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(r)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$1(t)?r=>invokeArrayFns(t,r):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:r,number:n}},o){e[assignKey]=getModelAssigner(o);const a=n||o.props&&o.props.type==="number";addEventListener(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;r&&(l=l.trim()),a&&(l=looseToNumber(l)),e[assignKey](l)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:o}},a){if(e[assignKey]=getModelAssigner(a),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(o||e.type==="number")&&looseToNumber(e.value)===t))return;const s=t??"";e.value!==s&&(e.value=s)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(r=>e[`${r}Key`]&&!t.includes(r))},withModifiers=(e,t)=>(r,...n)=>{for(let o=0;o<t.length;o++){const a=modifierGuards[t[o]];if(a&&a(r,t))return}return e(r,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>r=>{if(!("key"in r))return;const n=hyphenate(r.key);if(t.some(o=>o===n||keyNames[o]===n))return e(r)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:r}=t;return t.mount=n=>{const o=normalizeContainer(n);if(!o)return;const a=t._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const s=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _imports_0$1="/logo.png",_imports_0="/icons/skitarii/ranger.jpg",allColors=[{text:"transparent",colorValue:"transparent",uuid:"4ce66a56"},{text:"Abaddon Black Citadel - Base Layer",colorValue:"#010100",uuid:"34c4f448"},{text:"Administratum Grey Citadel - Base Layer",colorValue:"#9da299",uuid:"97bec853"},{text:"Ahriman Blue Citadel - Base Layer",colorValue:"#1F8C9C",uuid:"5d4443cb"},{text:"Alaitoc Blue Citadel - Base Layer",colorValue:"#2e5689",uuid:"ef62d76b"},{text:"Alien Purple Army Painter",colorValue:"#50317b",uuid:"0fce4a2d"},{text:"Altdorf Guard Blue Citadel - Base Layer",colorValue:"#274b9b",uuid:"f7a42f55"},{text:"Angel Green Army Painter",colorValue:"#0c391d",uuid:"166c5149"},{text:"Arcane Blue P3 Formula",colorValue:"#7acfd9",uuid:"b64ebf22"},{text:"Army Green Army Painter",colorValue:"#6e7645",uuid:"971cdc7e"},{text:"Ash Grey Army Painter",colorValue:"#a2a5a4",uuid:"b482ed46"},{text:"Averland Sunset Citadel - Base Layer",colorValue:"#fbba00",uuid:"d0121320"},{text:"Azure Vallejo - Model",colorValue:"#717cad",uuid:"b8b7d678"},{text:"Babe Blonde Army Painter",colorValue:"#f8dd0d",uuid:"dc9caa26"},{text:"Baharroth Blue Citadel - Edge",colorValue:"#58C1CD",uuid:"e1940e62"},{text:"Balor Brown Citadel - Base Layer",colorValue:"#915e02",uuid:"994757d9"},{text:"Baneblade Brown Citadel - Base Layer",colorValue:"#99826b",uuid:"543506e5"},{text:"Barbarian Flesh Army Painter",colorValue:"#e89c6c",uuid:"fd45c262"},{text:"Bastion Grey P3 Formula",colorValue:"#777965",uuid:"e9a6ff08"},{text:"Battledress Green P3 Formula",colorValue:"#757232",uuid:"0933f511"},{text:"Battlefield Brown P3 Formula",colorValue:"#32251c",uuid:"886bff6c"},{text:"Beast Hide P3 Formula",colorValue:"#b1956b",uuid:"06328030"},{text:"Beasty Brown Vallejo - Game",colorValue:"#55432d",uuid:"a77cc318"},{text:"Beaten Purple P3 Formula",colorValue:"#552a72",uuid:"132d3fdc"},{text:"Beige Red Vallejo - Model",colorValue:"#c79166",uuid:"7fe51828"},{text:"Beige Vallejo - Model",colorValue:"#dbc58e",uuid:"14f9d4dd"},{text:"Bestigor Flesh Citadel - Base Layer",colorValue:"#D38A57",uuid:"1110e165"},{text:"Black Green Vallejo - Model",colorValue:"#19423e",uuid:"68ea3ccf"},{text:"Black Vallejo - Game",colorValue:"#000000",uuid:"e52576e9"},{text:"Bloodstone P3 Formula",colorValue:"#9e4822",uuid:"61c1e24e"},{text:"Bloodtracker Brown P3 Formula",colorValue:"#a66a28",uuid:"b66e2ff9"},{text:"Bloody Red Vallejo - Game",colorValue:"#bf282e",uuid:"fa49073d"},{text:"Blue Green Vallejo - Model",colorValue:"#1a9496",uuid:"cb340deb"},{text:"Blue Grey Pale Vallejo - Model",colorValue:"#9ea7a5",uuid:"cc6e4fbf"},{text:"Blue Horror Citadel - Edge",colorValue:"#A2BAD2",uuid:"15d7f536"},{text:"Blue Vallejo - Model",colorValue:"#043667",uuid:"39f987eb"},{text:"Blue Violet Vallejo - Model",colorValue:"#795c9a",uuid:"11530dbd"},{text:"Bone White Vallejo - Game",colorValue:"#e8be86",uuid:"5dbd0f5c"},{text:"Bootstrap Leather P3 Formula",colorValue:"#956939",uuid:"9ceec961"},{text:"Bright Orange Vallejo - Model",colorValue:"#f26833",uuid:"346a6c29"},{text:"Bronze Fleshtone Vallejo - Game",colorValue:"#db945c",uuid:"0b25b419"},{text:"Buff Vallejo - Model",colorValue:"#d2ca9f",uuid:"d3868889"},{text:"Bugmans Glow Citadel - Base Layer",colorValue:"#8c5144",uuid:"c8d65d54"},{text:"Burnt Umber Vallejo - Model",colorValue:"#665148",uuid:"96ab5f1c"},{text:"Cadian Fleshtone Citadel - Base Layer",colorValue:"#cb7953",uuid:"fcd0e2b4"},{text:"Caledor Sky Citadel - Base Layer",colorValue:"#38689c",uuid:"f88a6148"},{text:"Calgar Blue Citadel - Base Layer",colorValue:"#456eb5",uuid:"a8092306"},{text:"Caliban Green Citadel - Base Layer",colorValue:"#003b1d",uuid:"610207c4"},{text:"Camoflage Green Vallejo - Game",colorValue:"#71753a",uuid:"74a76fe3"},{text:"Carmine Red Vallejo - Model",colorValue:"#b73035",uuid:"971e7e3a"},{text:"Carnal Pink P3 Formula",colorValue:"#fae2ec",uuid:"87ff293a"},{text:"Castellan Green Citadel - Base Layer",colorValue:"#384d20",uuid:"706151ca"},{text:"Cavalry Brown Vallejo - Model",colorValue:"#853f3d",uuid:"c239d289"},{text:"Cayman Green Vallejo - Game",colorValue:"#285648",uuid:"30f515ad"},{text:"Celestra Grey Citadel - Base Layer",colorValue:"#9caeae",uuid:"bd886934"},{text:"Centaur Skin Army Painter",colorValue:"#deaba0",uuid:"a612cddf"},{text:"Ceramite White Citadel - Base Layer",colorValue:"#ffffff",uuid:"588c280b"},{text:"Chaotic Red Army Painter",colorValue:"#6c1e10",uuid:"4cef49b6"},{text:"Charred Brown Vallejo - Game",colorValue:"#39343b",uuid:"1a4fa608"},{text:"Coal Black P3 Formula",colorValue:"#005a61",uuid:"709e768e"},{text:"Cold Grey Vallejo - Game",colorValue:"#54646d",uuid:"324faeac"},{text:"Combat Fatigue Army Painter",colorValue:"#878e5c",uuid:"c7a9a712"},{text:"Commando Green Army Painter",colorValue:"#827b39",uuid:"87e473bc"},{text:"Corpse Pale Army Painter",colorValue:"#edccad",uuid:"843bbc1e"},{text:"Crystal Blue Army Painter",colorValue:"#0083c2",uuid:"abd900c3"},{text:"Cryx Bane Base P3 Formula",colorValue:"#303924",uuid:"951b8062"},{text:"Cryx Bane Highlight P3 Formula",colorValue:"#93907d",uuid:"598d572b"},{text:"Cultist Robe Army Painter",colorValue:"#756e60",uuid:"a191fab7"},{text:"Cygnar Base Blue P3 Formula",colorValue:"#124b9b",uuid:"02299629"},{text:"Cygnar Blue Highlight P3 Formula",colorValue:"#1f75bb",uuid:"43287708"},{text:"Cygnus Yellow P3 Formula",colorValue:"#f3e72e",uuid:"5a4204dd"},{text:"Daemonette Hide Citadel - Base Layer",colorValue:"#696685",uuid:"2da473ef"},{text:"Daemonic Yellow Army Painter",colorValue:"#fada06",uuid:"51b87b30"},{text:"Dark Flesh Vallejo - Model",colorValue:"#d9a262",uuid:"6bfd92fd"},{text:"Dark Fleshtone Vallejo - Game",colorValue:"#4f2b26",uuid:"883c64ca"},{text:"Dark Green Vallejo - Game",colorValue:"#083c2a",uuid:"51fd05ad"},{text:"Dark Prussian Blue Vallejo - Model",colorValue:"#192c43",uuid:"a49f6c88"},{text:"Dark Reaper Citadel - Base Layer",colorValue:"#3B5150",uuid:"5775b3fe"},{text:"Dark Red Vallejo - Model",colorValue:"#a24a46",uuid:"0e8968bd"},{text:"Dark Sea Grey Vallejo - Model",colorValue:"#787d7a",uuid:"a810d6a7"},{text:"Dark Sky Army Painter",colorValue:"#2b4b5f",uuid:"a1d297c7"},{text:"Dark Stone Army Painter",colorValue:"#605752",uuid:"bce6839f"},{text:"Dark Yellow Vallejo - Model",colorValue:"#9d9059",uuid:"179b73e0"},{text:"Dawnstone Citadel - Base Layer",colorValue:"#7b7e74",uuid:"2691d331"},{text:"Dead Flesh Vallejo - Game",colorValue:"#bcb686",uuid:"c3d46fa2"},{text:"Dead White Vallejo - Game",colorValue:"#ffffff",uuid:"c08a3ccc"},{text:"Death Guard Armor Citadel - Base Layer",colorValue:"#848A66",uuid:"4d95f3ef"},{text:"Death World Forest Citadel - Base Layer",colorValue:"#666c2d",uuid:"d5b0ee1f"},{text:"Deathclaw Brown Citadel - Base Layer",colorValue:"#ba6952",uuid:"4b4fc710"},{text:"Dechala Lilac Citadel - Edge",colorValue:"#B69FCC",uuid:"6ded33de"},{text:"Deep Blue Army Painter",colorValue:"#083251",uuid:"ed4e511d"},{text:"Deep Sky Blue Vallejo - Model",colorValue:"#00a6da",uuid:"aec12c36"},{text:"Deep Yellow Vallejo - Model",colorValue:"#ffe30c",uuid:"6fc21585"},{text:"Dirt Spatter Army Painter",colorValue:"#5e3827",uuid:"6d02e876"},{text:"Doombull Brown Citadel - Base Layer",colorValue:"#5e0605",uuid:"0f713d72"},{text:"Dorn Yellow Citadel - Edge",colorValue:"#FFF200",uuid:"ae0811fc"},{text:"Dragon Red Army Painter",colorValue:"#9a1b1e",uuid:"3007bdf5"},{text:"Drake Tooth Army Painter",colorValue:"#cfcbb4",uuid:"bacb72cd"},{text:"Dryad Bark Citadel - Base Layer",colorValue:"#3b342e",uuid:"04cdd5b9"},{text:"Dungeon Grey Army Painter",colorValue:"#686c71",uuid:"6d0f7977"},{text:"Dwarf Skin Vallejo - Game",colorValue:"#cc7c67",uuid:"7ebd66d4"},{text:"Electric Blue Vallejo - Game",colorValue:"#008cbf",uuid:"ae365d50"},{text:"Elemental Bolt Army Painter",colorValue:"#009a82",uuid:"5044f842"},{text:"Elf Green Army Painter",colorValue:"#495122",uuid:"9be91bcf"},{text:"Elfic Flesh Vallejo - Game",colorValue:"#cdc29c",uuid:"7700b812"},{text:"Elysian Green Citadel - Base Layer",colorValue:"#81932e",uuid:"1c591854"},{text:"Emperors Children Citadel - Base Layer",colorValue:"#bd3f75",uuid:"9fb46d3c"},{text:"English Uniform Vallejo - Model",colorValue:"#715833",uuid:"02b4f0aa"},{text:"Eshin Grey Citadel - Base Layer",colorValue:"#535659",uuid:"4f53c697"},{text:"Evil Suns Scarlet Citadel - Base Layer",colorValue:"#c00b0c",uuid:"4938270f"},{text:"Exile Blue P3 Formula",colorValue:"#203367",uuid:"8549c9aa"},{text:"Fenrisian Grey Citadel - Base Layer",colorValue:"#789ebb",uuid:"a7994490"},{text:"Field Blue Vallejo - Model",colorValue:"#436872",uuid:"b2c5560e"},{text:"Field Grey Army Painter",colorValue:"#787c78",uuid:"156ce0cc"},{text:"Filthy Cape Army Painter",colorValue:"#7c7863",uuid:"55136d2c"},{text:"Fire Dragon Bright Citadel - Base Layer",colorValue:"#f1844a",uuid:"8d4f48b9"},{text:"Fire Lizard Army Painter",colorValue:"#d67128",uuid:"6208f430"},{text:"Flash Gitz Yellow Citadel - Base Layer",colorValue:"#ffee00",uuid:"16cedbe8"},{text:"Flat Blue Vallejo - Model",colorValue:"#336991",uuid:"390dce44"},{text:"Flat Earth Vallejo - Model",colorValue:"#87643c",uuid:"bfb14673"},{text:"Flat Flesh Vallejo - Model",colorValue:"#d8a977",uuid:"d724baf0"},{text:"Flat Green Vallejo - Model",colorValue:"#2a6531",uuid:"3fe8d7f6"},{text:"Flat Red Vallejo - Model",colorValue:"#aa3037",uuid:"2a4f68fb"},{text:"Flayed One Flesh Citadel - Base Layer",colorValue:"#f3ca8a",uuid:"e03aba66"},{text:"Foul Green Vallejo - Game",colorValue:"#239378",uuid:"d9f2cf00"},{text:"French Mirage Blue Vallejo - Model",colorValue:"#557880",uuid:"814a345d"},{text:"Fulgrim Pink Citadel - Edge",colorValue:"#F4AFCD",uuid:"8e256119"},{text:"Gauss Blaster Green Citadel - Edge",colorValue:"#84C3AA",uuid:"f276d784"},{text:"Genestealer Purple Citadel - Base Layer",colorValue:"#7c5ca4",uuid:"17895ab7"},{text:"German Camoflage Black Brown Vallejo - Model",colorValue:"#553528",uuid:"a46cde51"},{text:"German Camoflage Medium Brown Vallejo - Model",colorValue:"#722b2f",uuid:"c254217a"},{text:"German Camoflage Pale Brown Vallejo - Model",colorValue:"#82685e",uuid:"eba782f6"},{text:"Ghost Grey Vallejo - Game",colorValue:"#a7c5db",uuid:"4583dc93"},{text:"Glossy Black Vallejo - Model",colorValue:"#010101",uuid:"b6a077f3"},{text:"Gnarls Green P3 Formula",colorValue:"#126232",uuid:"725cd390"},{text:"Goblin Green Army Painter",colorValue:"#348941",uuid:"1f3a213d"},{text:"Goblin Green Vallejo - Game",colorValue:"#23743c",uuid:"5f94d59f"},{text:"Gold Brown Vallejo - Model",colorValue:"#ba8636",uuid:"dedee7b4"},{text:"Gold Yellow Vallejo - Game",colorValue:"#fdb318",uuid:"f7285e26"},{text:"Golden Olive Vallejo - Model",colorValue:"#78923b",uuid:"a8cb07c5"},{text:"Golden Yellow Vallejo - Model",colorValue:"#f7c65e",uuid:"55f38043"},{text:"Gorgon Hide Army Painter",colorValue:"#c7d2e4",uuid:"52e7c30c"},{text:"Gorthor Brown Citadel - Base Layer",colorValue:"#6e4e46",uuid:"26383882"},{text:"Gory Red Vallejo - Game",colorValue:"#810504",uuid:"5616d0d9"},{text:"Greatcoat Grey P3 Formula",colorValue:"#4d5861",uuid:"09c73044"},{text:"Green Grey Vallejo - Model",colorValue:"#827e61",uuid:"d86a4665"},{text:"Greenskin Army Painter",colorValue:"#136232",uuid:"ca85e615"},{text:"Grey Blue Vallejo - Model",colorValue:"#45708d",uuid:"102a016a"},{text:"Grey Green Vallejo - Model",colorValue:"#565a60",uuid:"bedc0045"},{text:"Grey Grey Vallejo - Model",colorValue:"#aecbbb",uuid:"7f545184"},{text:"Griffon Blue Army Painter",colorValue:"#215383",uuid:"1d332ba0"},{text:"Gun Corps Brown P3 Formula",colorValue:"#937d48",uuid:"e8ae7dac"},{text:"Hammerfall Khaki P3 Formula",colorValue:"#c8bf98",uuid:"ece3ed9c"},{text:"Hardened Carapace Army Painter",colorValue:"#4c473f",uuid:"13aede80"},{text:"Heartfire P3 Formula",colorValue:"#f6b046",uuid:"90e37ed3"},{text:"Heavy Blue Grey Vallejo - Game",colorValue:"#9ca7a7",uuid:"451a4414"},{text:"Heavy Blue Vallejo - Game",colorValue:"#29556d",uuid:"77c230fc"},{text:"Heavy Brown Vallejo - Game",colorValue:"#705d41",uuid:"7722d492"},{text:"Heavy Gold Brown Vallejo - Game",colorValue:"#ba8636",uuid:"0c22ad27"},{text:"Heavy Green Vallejo - Game",colorValue:"#566840",uuid:"ba2375ce"},{text:"Heavy Khaki Vallejo - Game",colorValue:"#9d965d",uuid:"05d2d187"},{text:"Heavy Ochre Vallejo - Game",colorValue:"#a87536",uuid:"b0821a5b"},{text:"Heavy Red Vallejo - Game",colorValue:"#943238",uuid:"1da8ea62"},{text:"Heavy Sienna Vallejo - Game",colorValue:"#744642",uuid:"8b86de7a"},{text:"Heavy Skintone Vallejo - Game",colorValue:"#aa7b62",uuid:"9fc4ab68"},{text:"Heavy Violet Vallejo - Game",colorValue:"#4c2e65",uuid:"6f7aff69"},{text:"Heavy Warm Grey Vallejo - Game",colorValue:"#939066",uuid:"cbea00bf"},{text:"Hexed Lichen Vallejo - Game",colorValue:"#34274d",uuid:"ba0446a8"},{text:"Hoeth Blue Citadel - Base Layer",colorValue:"#4f7fb5",uuid:"7bc6490b"},{text:"Hot Orange Vallejo - Game",colorValue:"#e43027",uuid:"be9dcd6c"},{text:"Hull Red Vallejo - Model",colorValue:"#522724",uuid:"2bf643c4"},{text:"Hydra Turquoise Army Painter",colorValue:"#199ba3",uuid:"0cc68b93"},{text:"Ice Storm Army Painter",colorValue:"#639ec9",uuid:"47830ba0"},{text:"Idrian Flesh P3 Formula",colorValue:"#9b5e37",uuid:"406de381"},{text:"Incubi Darkness Citadel - Base Layer",colorValue:"#094345",uuid:"759f51f1"},{text:"Intermediate Green Vallejo - Model",colorValue:"#49944f",uuid:"5d16096e"},{text:"Iosan Green P3 Formula",colorValue:"#22a854",uuid:"aabdf911"},{text:"Iraqi Sand Vallejo - Model",colorValue:"#b89972",uuid:"8f5e415a"},{text:"Ironhull Grey P3 Formula",colorValue:"#8e969b",uuid:"cf479088"},{text:"Jack Bone P3 Formula",colorValue:"#d6d4aa",uuid:"20b99b3f"},{text:"Jokaero Orange Citadel - Base Layer",colorValue:"#e6200f",uuid:"f741976c"},{text:"Jungle Green Army Painter",colorValue:"#88ac2e",uuid:"ac7b953c"},{text:"Kabalite Green Citadel - Base Layer",colorValue:"#008660",uuid:"e0081121"},{text:"Kantor Blue Citadel - Base Layer",colorValue:"#06234f",uuid:"0420b268"},{text:"Karak Stone Citadel - Base Layer",colorValue:"#c1a069",uuid:"c0f1ea57"},{text:"Khador Red Base P3 Formula",colorValue:"#ee2824",uuid:"28c70e2a"},{text:"Khador Red Highlight P3 Formula",colorValue:"#f29042",uuid:"8868b5c3"},{text:"Khaki Vallejo - Game",colorValue:"#8c806d",uuid:"12ee8746"},{text:"Khardic Flesh P3 Formula",colorValue:"#cb7b5b",uuid:"2cf2a671"},{text:"Khorne Red Citadel - Base Layer",colorValue:"#6a0a01",uuid:"424d7aef"},{text:"Kislev Flesh Citadel - Base Layer",colorValue:"#dbad75",uuid:"947e2174"},{text:"Kobold Skin Army Painter",colorValue:"#c9a484",uuid:"b024a6c9"},{text:"Kraken Skin Army Painter",colorValue:"#71c591",uuid:"eb326c6f"},{text:"Krieg Khaki Citadel - Edge",colorValue:"#C0BD81",uuid:"ada33308"},{text:"Leather Brown Army Painter",colorValue:"#764823",uuid:"f836e4ba"},{text:"Leather Brown Vallejo - Game",colorValue:"#7b5d2a",uuid:"fdcdaf38"},{text:"Leather Brown Vallejo - Model",colorValue:"#4a4639",uuid:"b9acfeef"},{text:"Lemon Yellow Vallejo - Model",colorValue:"#fef10e",uuid:"3daa3d9d"},{text:"Light Brown Vallejo - Model",colorValue:"#bf764e",uuid:"0959b110"},{text:"Light Green Vallejo - Model",colorValue:"#00a850",uuid:"c47c9002"},{text:"Light Orange Vallejo - Model",colorValue:"#f68627",uuid:"d9a3bc33"},{text:"Light Sea Grey Vallejo - Model",colorValue:"#97b4b5",uuid:"338c1501"},{text:"Lime Green Vallejo - Model",colorValue:"#6fae4e",uuid:"4643078e"},{text:"Loren Forest Citadel - Base Layer",colorValue:"#5b7426",uuid:"87d28e37"},{text:"Lothern Blue Citadel - Base Layer",colorValue:"#3ba1d1",uuid:"72e1b0c8"},{text:"Luftwaffe Camoflage Green Vallejo - Model",colorValue:"#596b3f",uuid:"d11b1e84"},{text:"Lugganath Orange Citadel - Edge",colorValue:"#F79E86",uuid:"9a2ae2f9"},{text:"Macragge Blue Citadel - Base Layer",colorValue:"#14397a",uuid:"4474ebdf"},{text:"Magenta Vallejo - Model",colorValue:"#a92a56",uuid:"b03b289f"},{text:"Magic Blue Vallejo - Game",colorValue:"#024381",uuid:"09fd11e2"},{text:"Mars Red Army Painter",colorValue:"#b73b37",uuid:"8ce8067f"},{text:"Matt Black Army Painter",colorValue:"#231f20",uuid:"2b6bd01c"},{text:"Matt White Army Painter",colorValue:"#ffffff",uuid:"e1b7283c"},{text:"Mechanicus Standard Grey Citadel - Base Layer",colorValue:"#454e50",uuid:"f056cffd"},{text:"Medium Olive Vallejo - Model",colorValue:"#226b2e",uuid:"19978704"},{text:"Medium Sea Grey Vallejo - Model",colorValue:"#869393",uuid:"154c0c17"},{text:"Mephiston Red Citadel - Base Layer",colorValue:"#9b0e05",uuid:"fb14ad4a"},{text:"Meredius Blue P3 Formula",colorValue:"#00b0b9",uuid:"69e71d5b"},{text:"Middlestone Vallejo - Model",colorValue:"#9c9660",uuid:"6c760c12"},{text:"Midlund Flesh P3 Formula",colorValue:"#f0a983",uuid:"611184d7"},{text:"Moldy Ochre P3 Formula",colorValue:"#ddb43e",uuid:"900537ab"},{text:"Monster Brown Army Painter",colorValue:"#855c2a",uuid:"7c62e0dd"},{text:"Moon Yellow Vallejo - Game",colorValue:"#fff103",uuid:"6e9389b1"},{text:"Moot Green Citadel - Base Layer",colorValue:"#57aa2d",uuid:"f7debd04"},{text:"Morrow White P3 Formula",colorValue:"#FEFBFD",uuid:"60e977dc"},{text:"Mouldy Clothes Army Painter",colorValue:"#447b3a",uuid:"f020606a"},{text:"Mournfang Brown Citadel - Base Layer",colorValue:"#681104",uuid:"bf9db0f6"},{text:"Murderous Magenta P3 Formula",colorValue:"#a81f5e",uuid:"b73e6264"},{text:"Mutation Green Vallejo - Game",colorValue:"#296934",uuid:"538efdbc"},{text:"Mythical Orange Army Painter",colorValue:"#e73d24",uuid:"c44ba0d9"},{text:"Naggaroth Night Citadel - Base Layer",colorValue:"#433656",uuid:"f5584530"},{text:"Necromance Cloak Army Painter",colorValue:"#3c3d37",uuid:"a5c144f1"},{text:"Necrotic Flesh Army Painter",colorValue:"#bfc292",uuid:"0ed04c44"},{text:"Nurgling Green Citadel - Base Layer",colorValue:"#90a15f",uuid:"d5b761bb"},{text:"Ochre Brown Vallejo - Model",colorValue:"#a77237",uuid:"422447f3"},{text:"Ogryn Camoflage Citadel - Base Layer",colorValue:"#a9af42",uuid:"a1768b96"},{text:"Olive Green Vallejo - Model",colorValue:"#6a8b3a",uuid:"b9c879f8"},{text:"Oozing Purple Army Painter",colorValue:"#aa94b4",uuid:"4a0e63ed"},{text:"Orange Brown Vallejo - Model",colorValue:"#b86f44",uuid:"99b1fd03"},{text:"Orange Fire Vallejo - Game",colorValue:"#f1652e",uuid:"cc8fe1e6"},{text:"Orc Blood Army Painter",colorValue:"#925f6e",uuid:"6ee1f800"},{text:"Ordic Olive P3 Formula",colorValue:"#6e7e36",uuid:"5074d13f"},{text:"Oxford Blue Vallejo - Model",colorValue:"#3a465f",uuid:"3d80e136"},{text:"Pale Blue Vallejo - Model",colorValue:"#83b5b2",uuid:"d2954c1b"},{text:"Pale Flesh Vallejo - Game",colorValue:"#f6bdb3",uuid:"e9bf30ad"},{text:"Pale Grey Blue Vallejo - Model",colorValue:"#bacdd0",uuid:"a5419953"},{text:"Pale Sand Vallejo - Model",colorValue:"#d1c49c",uuid:"ac506dec"},{text:"Pale Yellow Vallejo - Game",colorValue:"#d5c179",uuid:"7900103b"},{text:"Pallid Wych Flesh Citadel - Base Layer",colorValue:"#d6d5c4",uuid:"b079e79f"},{text:"Parasite Brown Vallejo - Game",colorValue:"#b1481f",uuid:"2d1c3971"},{text:"Park Green Flat Vallejo - Model",colorValue:"#008c5d",uuid:"0e180c71"},{text:"Pastel Blue Vallejo - Model",colorValue:"#67859b",uuid:"c86df2ea"},{text:"Phoenix Flames Army Painter",colorValue:"#faa61a",uuid:"75eb1f32"},{text:"Pink Horror Citadel - Base Layer",colorValue:"#96325c",uuid:"5d25ccf8"},{text:"Plague Brown Vallejo - Game",colorValue:"#cc9b34",uuid:"d939a0c8"},{text:"Pure Red Army Painter",colorValue:"#cf2127",uuid:"8c10e453"},{text:"Rakarth Flesh Citadel - Base Layer",colorValue:"#aba495",uuid:"02a7f23e"},{text:"Ratskin Flesh Citadel - Base Layer",colorValue:"#AD6B4C",uuid:"ca934661"},{text:"Reflective Green Vallejo - Model",colorValue:"#496244",uuid:"b6b3e1d0"},{text:"Rhinox Hide Citadel - Base Layer",colorValue:"#4e3433",uuid:"e099996c"},{text:"Rosy Flesh Vallejo - Game",colorValue:"#f89e84",uuid:"6539a0ec"},{text:"Royal Blue Vallejo - Model",colorValue:"#41558d",uuid:"83d4b213"},{text:"Royal Purple Vallejo - Game",colorValue:"#23264f",uuid:"4d7e4d01"},{text:"Royal Purple Vallejo - Model",colorValue:"#4b2967",uuid:"0c7c8a29"},{text:"Rucksack Tan P3 Formula",colorValue:"#b4973f",uuid:"ad3f156f"},{text:"Russ Grey Citadel - Base Layer",colorValue:"#55768a",uuid:"6299a01d"},{text:"Saddle Brown Vallejo - Model",colorValue:"#89584f",uuid:"0a5866ad"},{text:"Salmon Rose Vallejo - Model",colorValue:"#f89d87",uuid:"be75c8ef"},{text:"Sand Yellow Vallejo - Model",colorValue:"#d7bf75",uuid:"e87c5be5"},{text:"Sanguine Base P3 Formula",colorValue:"#6c160f",uuid:"ad4bdd39"},{text:"Scaly Hide Army Painter",colorValue:"#859852",uuid:"55c21f72"},{text:"Scarlet Vallejo - Model",colorValue:"#da3630",uuid:"7768dcbd"},{text:"Scorpion Green Vallejo - Game",colorValue:"#48b851",uuid:"3aa8b534"},{text:"Screamer Pink Citadel - Base Layer",colorValue:"#831740",uuid:"cbc7a70b"},{text:"Screaming Skull Citadel - Base Layer",colorValue:"#d9d8a6",uuid:"206b6ca7"},{text:"Scurvy Green Vallejo - Game",colorValue:"#09474e",uuid:"50400af2"},{text:"Silver Grey Vallejo - Model",colorValue:"#d8dfd5",uuid:"cf59980c"},{text:"Skarsnik Green Citadel - Base Layer",colorValue:"#5e9067",uuid:"c6b548ec"},{text:"Skavenblight Dinge Citadel - Base Layer",colorValue:"#4f4840",uuid:"a5369b28"},{text:"Skeleton Bone Army Painter",colorValue:"#d3c89d",uuid:"c5c18c95"},{text:"Skorne Red P3 Formula",colorValue:"#b01f24",uuid:"1281a25f"},{text:"Skrag Brown Citadel - Base Layer",colorValue:"#954b00",uuid:"243fbc19"},{text:"Sky Grey Vallejo - Model",colorValue:"#b3b6b2",uuid:"31ebbe87"},{text:"Slaanesh Grey Citadel - Base Layer",colorValue:"#8E8C97",uuid:"3401d405"},{text:"Sombre Grey Vallejo - Game",colorValue:"#4c5c7d",uuid:"4175831b"},{text:"Sotek Green Citadel - Base Layer",colorValue:"#056976",uuid:"0bd265e6"},{text:"Spaceship Exterior Army Painter",colorValue:"#cdced0",uuid:"1f02fd08"},{text:"Squig Orange Citadel - Base Layer",colorValue:"#b04d3e",uuid:"8e3948b0"},{text:"Steel Grey Vallejo - Game",colorValue:"#64889d",uuid:"968121bb"},{text:"Steel Legion Drab Citadel - Base Layer",colorValue:"#695634",uuid:"2eb6a7e9"},{text:"Stegadon Scale Green Citadel - Base Layer",colorValue:"#004261",uuid:"beb2b74e"},{text:"Stone Grey Vallejo - Model",colorValue:"#959980",uuid:"7a1099ed"},{text:"Stonewall Grey Vallejo - Game",colorValue:"#828e95",uuid:"8887ef43"},{text:"Stormvermin Fur Citadel - Base Layer",colorValue:"#7d736a",uuid:"780c5a71"},{text:"Straken Green Citadel - Base Layer",colorValue:"#6e8611",uuid:"2e36b2ba"},{text:"Sulfuric Yellow P3 Formula",colorValue:"#f0d233",uuid:"b90d5253"},{text:"Sulphide Ochre Army Painter",colorValue:"#c68512",uuid:"9a44bd10"},{text:"Sun Yellow Vallejo - Game",colorValue:"#ffcf07",uuid:"e21c729e"},{text:"Sunset Red Vallejo - Model",colorValue:"#c22c5f",uuid:"1cb6488f"},{text:"Sybarite Green Citadel - Base Layer",colorValue:"#36a062",uuid:"fc5a6cf1"},{text:"Tallarn Sand Citadel - Base Layer",colorValue:"#ab7d00",uuid:"52e7acbc"},{text:"Tan Earth Vallejo - Model",colorValue:"#9c7962",uuid:"8144f1f4"},{text:"Tan Vallejo - Game",colorValue:"#9f4746",uuid:"4b922754"},{text:"Tanned Flesh Army Painter",colorValue:"#bc745e",uuid:"03c52290"},{text:"Tau Light Ochre Citadel - Base Layer",colorValue:"#c26e02",uuid:"1f6a15cf"},{text:"Teclis Blue Citadel - Base Layer",colorValue:"#387bbf",uuid:"f6072c93"},{text:"Temple Guard Blue Citadel - Base Layer",colorValue:"#35998e",uuid:"6fcc48d9"},{text:"Terracota Vallejo - Game",colorValue:"#6b1306",uuid:"a86f98f3"},{text:"Thamar Black P3 Formula",colorValue:"#040707",uuid:"bfb800e2"},{text:"The Fang Citadel - Base Layer",colorValue:"#457479",uuid:"efc3fb13"},{text:"Thornwood Green P3 Formula",colorValue:"#65654b",uuid:"f15e8b9e"},{text:"Thousand Sons Blue Citadel - Base Layer",colorValue:"#18ABCC",uuid:"59e8f366"},{text:"Thunderhawk Blue Citadel - Base Layer",colorValue:"#417074",uuid:"87a80eda"},{text:"Toxic Mist Army Painter",colorValue:"#39c0c5",uuid:"abbd66a4"},{text:"Traitor Green P3 Formula",colorValue:"#809065",uuid:"a6311369"},{text:"Troll Claws Army Painter",colorValue:"#cb8b4e",uuid:"93589b2a"},{text:"Troll Slayer Orange Citadel - Base Layer",colorValue:"#eb641b",uuid:"afdf3448"},{text:"Trollblood Base P3 Formula",colorValue:"#13899b",uuid:"2ca359f6"},{text:"Trollblood Highlight P3 Formula",colorValue:"#bab4a3",uuid:"09780cc7"},{text:"Turquoise Vallejo - Game",colorValue:"#03676f",uuid:"1476bb09"},{text:"Turquoise Vallejo - Model",colorValue:"#008e9c",uuid:"19743a76"},{text:"Tuskgor Fur Citadel - Base Layer",colorValue:"#8e3734",uuid:"02c16f84"},{text:"Ulthuan Grey Citadel - Base Layer",colorValue:"#d2e4df",uuid:"6541024a"},{text:"Ultramarine Blue Army Painter",colorValue:"#0f4e85",uuid:"19e5154c"},{text:"Ultramarine Vallejo - Model",colorValue:"#3b5da7",uuid:"d2e9deb8"},{text:"Underbelly Blue P3 Formula",colorValue:"#c0d4da",uuid:"e236c56e"},{text:"Ungor Flesh Citadel - Base Layer",colorValue:"#dbac63",uuid:"4cc7a2ed"},{text:"Uniform Green Vallejo - Model",colorValue:"#577a38",uuid:"6c42634e"},{text:"Uniform Grey Army Painter",colorValue:"#5e6a73",uuid:"8a5ca6a3"},{text:"USA Olive Drab Vallejo - Model",colorValue:"#3b4947",uuid:"9d953732"},{text:"Ushabti Bone Citadel - Base Layer",colorValue:"#c6c180",uuid:"29c17ae2"},{text:"Vampire Red Army Painter",colorValue:"#981d34",uuid:"ec7bb2e6"},{text:"Venom Wyrm Army Painter",colorValue:"#6a653e",uuid:"ecaad133"},{text:"Verdigris Vallejo - Game",colorValue:"#b3ceca",uuid:"3342c123"},{text:"Viking Blue Army Painter",colorValue:"#00609a",uuid:"1224989e"},{text:"Violet Red Vallejo - Model",colorValue:"#6b2946",uuid:"e115a173"},{text:"Violet Vallejo - Model",colorValue:"#4b2f65",uuid:"72d9e434"},{text:"Voidshield Blue Army Painter",colorValue:"#2ca2d9",uuid:"5d01f14c"},{text:"Waaagh! Flesh Citadel - Base Layer",colorValue:"#275627",uuid:"72d07017"},{text:"Warboss Green Citadel - Base Layer",colorValue:"#3b7d54",uuid:"3b34e712"},{text:"Warlord Purple Vallejo - Game",colorValue:"#7d1a44",uuid:"33b3f920"},{text:"Warpfiend Grey Citadel - Base Layer",colorValue:"#6B6A74",uuid:"d30e041c"},{text:"Warpstone Glow Citadel - Base Layer",colorValue:"#257326",uuid:"839b1779"},{text:"Wasteland Soil Army Painter",colorValue:"#774b58",uuid:"1df07c68"},{text:"Wazdakka Red Citadel - Base Layer",colorValue:"#8d0d01",uuid:"80231d89"},{text:"Werewolf Fur Army Painter",colorValue:"#785e4e",uuid:"a5081206"},{text:"White Scar Citadel - Base Layer",colorValue:"#FFFFFF",uuid:"d58a4e24"},{text:"White Vallejo - Model",colorValue:"#ffffff",uuid:"55b5f296"},{text:"Wild Rider Red Citadel - Base Layer",colorValue:"#e21516",uuid:"c398213a"},{text:"Witch Brew Army Painter",colorValue:"#92963e",uuid:"13d58a77"},{text:"Wizards Orb Army Painter",colorValue:"#00726a",uuid:"9f18d02b"},{text:"Wolf Grey Army Painter",colorValue:"#5b8093",uuid:"aebc64f8"},{text:"Wolf Grey Vallejo - Game",colorValue:"#90a2bc",uuid:"b522fd1f"},{text:"Wurm Green P3 Formula",colorValue:"#8fbe40",uuid:"c61c0cc6"},{text:"Xereus Purple Citadel - Base Layer",colorValue:"#4b205c",uuid:"77971691"},{text:"XV-88 Citadel - Base Layer",colorValue:"#7b4d1c",uuid:"9bdbd496"},{text:"Yellow Olive Vallejo - Model",colorValue:"#26392e",uuid:"29427975"},{text:"Yriel Yellow Citadel - Base Layer",colorValue:"#ffda00",uuid:"0e21969b"},{text:"Zamesi Desert Citadel - Base Layer",colorValue:"#e0a503",uuid:"99892c5f"},{text:"Zandri Dust Citadel - Base Layer",colorValue:"#a89758",uuid:"8dc755fe"}];function isEmpty(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function not(e){return(...t)=>!e(...t)}function includes(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function filterOptions(e,t,r,n){return t?e.filter(o=>includes(n(o,r),t)).sort((o,a)=>n(o,r).length-n(a,r).length):e}function stripGroups(e){return e.filter(t=>!t.$isLabel)}function flattenOptions(e,t){return r=>r.reduce((n,o)=>o[e]&&o[e].length?(n.push({$groupLabel:o[t],$isLabel:!0}),n.concat(o[e])):n,[])}function filterGroups(e,t,r,n,o){return a=>a.map(s=>{if(!s[r])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const l=filterOptions(s[r],e,t,o);return l.length?{[n]:s[n],[r]:l}:[]})}const flow=(...e)=>t=>e.reduce((r,n)=>n(r),t),multiselectMixin={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return isEmpty(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let r=this.options.concat();return this.internalSearch?r=this.groupValues?this.filterAndFlat(r,t,this.label):filterOptions(r,t,this.label,this.customLabel):r=this.groupValues?flattenOptions(this.groupValues,this.groupLabel)(r):r,r=this.hideSelected?r.filter(not(this.isSelected)):r,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?r.push({isTag:!0,label:e}):r.unshift({isTag:!0,label:e})),r.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,r){return flow(filterGroups(t,r,this.groupValues,this.groupLabel,this.customLabel),flattenOptions(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return flow(flattenOptions(this.groupValues,this.groupLabel),stripGroups)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(isEmpty(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return isEmpty(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const r=this.internalValue.filter(n=>t[this.groupValues].indexOf(n)===-1);this.$emit("update:modelValue",r)}else{let r=t[this.groupValues].filter(n=>!(this.isOptionDisabled(n)||this.isSelected(n)));this.max&&r.splice(this.max-this.internalValue.length),this.$emit("select",r,this.id),this.$emit("update:modelValue",this.internalValue.concat(r))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const r=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const n=this.internalValue.slice(0,r).concat(this.internalValue.slice(r+1));this.$emit("update:modelValue",n)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},pointerMixin={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40},onPointerChange:{type:Function,default:null}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const r=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);return r&&!this.wholeGroupDisabled(r)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(r)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0,this.onPointerChange&&typeof this.onPointerChange=="function"&&this.onPointerChange(this)}}},Multiselect_vue_vue_type_style_index_0_lang="",_export_sfc=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},_sfc_main$2={name:"vue-multiselect",mixins:[multiselectMixin,pointerMixin],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}},_hoisted_1$2=["tabindex","aria-owns"],_hoisted_2$1={ref:"tags",class:"multiselect__tags"},_hoisted_3$1={class:"multiselect__tags-wrap"},_hoisted_4$1=["textContent"],_hoisted_5$1=["onKeypress","onMousedown"],_hoisted_6$1=["textContent"],_hoisted_7$1={class:"multiselect__spinner"},_hoisted_8$1=["name","id","placeholder","value","disabled","tabindex","aria-controls"],_hoisted_9$1=["id"],_hoisted_10$1={key:0},_hoisted_11$1={class:"multiselect__option"},_hoisted_12$1=["id","role"],_hoisted_13$1=["onClick","onMouseenter","data-select","data-selected","data-deselect"],_hoisted_14=["data-select","data-deselect","onMouseenter","onMousedown"],_hoisted_15={class:"multiselect__option"},_hoisted_16={class:"multiselect__option"};function _sfc_render(e,t,r,n,o,a){return openBlock(),createElementBlock("div",{tabindex:e.searchable?-1:r.tabindex,class:normalizeClass([{"multiselect--active":e.isOpen,"multiselect--disabled":r.disabled,"multiselect--above":a.isAbove,"multiselect--has-options-group":a.hasOptionGroup},"multiselect"]),onFocus:t[13]||(t[13]=s=>e.activate()),onBlur:t[14]||(t[14]=s=>e.searchable?!1:e.deactivate()),onKeydown:[t[15]||(t[15]=withKeys(withModifiers(s=>e.pointerForward(),["self","prevent"]),["down"])),t[16]||(t[16]=withKeys(withModifiers(s=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[17]||(t[17]=withKeys(withModifiers(s=>e.addPointerElement(s),["stop","self"]),["enter","tab"])),onKeyup:t[18]||(t[18]=withKeys(s=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[renderSlot(e.$slots,"caret",{toggle:e.toggle},()=>[createBaseVNode("div",{onMousedown:t[0]||(t[0]=withModifiers(s=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),renderSlot(e.$slots,"clear",{search:e.search}),createBaseVNode("div",_hoisted_2$1,[renderSlot(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[withDirectives(createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.visibleValues,(s,l)=>renderSlot(e.$slots,"tag",{option:s,search:e.search,remove:e.removeElement},()=>[(openBlock(),createElementBlock("span",{class:"multiselect__tag",key:l},[createBaseVNode("span",{textContent:toDisplayString(e.getOptionLabel(s))},null,8,_hoisted_4$1),createBaseVNode("i",{tabindex:"1",onKeypress:withKeys(withModifiers(u=>e.removeElement(s),["prevent"]),["enter"]),onMousedown:withModifiers(u=>e.removeElement(s),["prevent"]),class:"multiselect__tag-icon"},null,40,_hoisted_5$1)]))])),256))],512),[[vShow,a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>r.limit?renderSlot(e.$slots,"limit",{key:0},()=>[createBaseVNode("strong",{class:"multiselect__strong",textContent:toDisplayString(r.limitText(e.internalValue.length-r.limit))},null,8,_hoisted_6$1)]):createCommentVNode("",!0)]),createVNode(Transition,{name:"multiselect__loading"},{default:withCtx(()=>[renderSlot(e.$slots,"loading",{},()=>[withDirectives(createBaseVNode("div",_hoisted_7$1,null,512),[[vShow,r.loading]])])]),_:3}),e.searchable?(openBlock(),createElementBlock("input",{key:0,ref:"search",name:r.name,id:e.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:e.placeholder,style:normalizeStyle(a.inputStyle),value:e.search,disabled:r.disabled,tabindex:r.tabindex,onInput:t[1]||(t[1]=s=>e.updateSearch(s.target.value)),onFocus:t[2]||(t[2]=withModifiers(s=>e.activate(),["prevent"])),onBlur:t[3]||(t[3]=withModifiers(s=>e.deactivate(),["prevent"])),onKeyup:t[4]||(t[4]=withKeys(s=>e.deactivate(),["esc"])),onKeydown:[t[5]||(t[5]=withKeys(withModifiers(s=>e.pointerForward(),["prevent"]),["down"])),t[6]||(t[6]=withKeys(withModifiers(s=>e.pointerBackward(),["prevent"]),["up"])),t[8]||(t[8]=withKeys(withModifiers(s=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[7]||(t[7]=withKeys(withModifiers(s=>e.addPointerElement(s),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,_hoisted_8$1)):createCommentVNode("",!0),a.isSingleLabelVisible?(openBlock(),createElementBlock("span",{key:1,class:"multiselect__single",onMousedown:t[9]||(t[9]=withModifiers((...s)=>e.toggle&&e.toggle(...s),["prevent"]))},[renderSlot(e.$slots,"singleLabel",{option:a.singleValue},()=>[createTextVNode(toDisplayString(e.currentOptionLabel),1)])],32)):createCommentVNode("",!0),a.isPlaceholderVisible?(openBlock(),createElementBlock("span",{key:2,class:"multiselect__placeholder",onMousedown:t[10]||(t[10]=withModifiers((...s)=>e.toggle&&e.toggle(...s),["prevent"]))},[renderSlot(e.$slots,"placeholder",{},()=>[createTextVNode(toDisplayString(e.placeholder),1)])],32)):createCommentVNode("",!0)],512),createVNode(Transition,{name:"multiselect"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:"multiselect__content-wrapper",onFocus:t[11]||(t[11]=(...s)=>e.activate&&e.activate(...s)),tabindex:"-1",onMousedown:t[12]||(t[12]=withModifiers(()=>{},["prevent"])),style:normalizeStyle({maxHeight:e.optimizedHeight+"px"}),ref:"list"},[createBaseVNode("ul",{class:"multiselect__content",style:normalizeStyle(a.contentStyle),role:"listbox",id:"listbox-"+e.id},[renderSlot(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(openBlock(),createElementBlock("li",_hoisted_10$1,[createBaseVNode("span",_hoisted_11$1,[renderSlot(e.$slots,"maxElements",{},()=>[createTextVNode("Maximum of "+toDisplayString(e.max)+" options selected. First remove a selected option to select another.",1)])])])):createCommentVNode("",!0),!e.max||e.internalValue.length<e.max?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(e.filteredOptions,(s,l)=>(openBlock(),createElementBlock("li",{class:"multiselect__element",key:l,id:e.id+"-"+l,role:s&&(s.$isLabel||s.$isDisabled)?null:"option"},[s&&(s.$isLabel||s.$isDisabled)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([e.optionHighlight(l,s),"multiselect__option"]),onClick:withModifiers(u=>e.select(s),["stop"]),onMouseenter:withModifiers(u=>e.pointerSet(l),["self"]),"data-select":s&&s.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[renderSlot(e.$slots,"option",{option:s,search:e.search,index:l},()=>[createBaseVNode("span",null,toDisplayString(e.getOptionLabel(s)),1)])],42,_hoisted_13$1)),s&&(s.$isLabel||s.$isDisabled)?(openBlock(),createElementBlock("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:normalizeClass([e.groupHighlight(l,s),"multiselect__option"]),onMouseenter:withModifiers(u=>e.groupSelect&&e.pointerSet(l),["self"]),onMousedown:withModifiers(u=>e.selectGroup(s),["prevent"])},[renderSlot(e.$slots,"option",{option:s,search:e.search,index:l},()=>[createBaseVNode("span",null,toDisplayString(e.getOptionLabel(s)),1)])],42,_hoisted_14)):createCommentVNode("",!0)],8,_hoisted_12$1))),128)):createCommentVNode("",!0),withDirectives(createBaseVNode("li",null,[createBaseVNode("span",_hoisted_15,[renderSlot(e.$slots,"noResult",{search:e.search},()=>[createTextVNode("No elements found. Consider changing the search query.")])])],512),[[vShow,r.showNoResults&&e.filteredOptions.length===0&&e.search&&!r.loading]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("span",_hoisted_16,[renderSlot(e.$slots,"noOptions",{},()=>[createTextVNode("List is empty.")])])],512),[[vShow,r.showNoOptions&&(e.options.length===0||a.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!r.loading]]),renderSlot(e.$slots,"afterList")],12,_hoisted_9$1)],36),[[vShow,e.isOpen]])]),_:3})],42,_hoisted_1$2)}const Multiselect=_export_sfc(_sfc_main$2,[["render",_sfc_render]]),vueMultiselect="",svgs$2=[{layer:"main",path:"/icons/marine_simple/complete_filled.svg"},{layer:"highlight",path:"/icons/marine_simple/highlight_filled.svg"},{layer:"shadow",path:"/icons/marine_simple/shadow_filled.svg"},{layer:"edge",path:"/icons/marine_simple/complete.svg"}],basicScheme$2=({transparent:e,perfectWhite:t},r)=>({edge:{color:t,opacity:r},main:{color:e,opacity:r},highlight:{color:e,opacity:r},shadow:{color:e,opacity:r}}),marineSimple={name:"simple marine",svgs:svgs$2,basicScheme:basicScheme$2},svgs$1=[{layer:"base",path:"/icons/marine_complex/mask_base.svg"},{layer:"armour",path:"/icons/marine_complex/mask_armour.svg"},{layer:"armour highlight",path:"/icons/marine_complex/mask_armour_highlight.svg"},{layer:"armour shadow",path:"/icons/marine_complex/mask_armour_shadow.svg"},{layer:"pauldron",path:"/icons/marine_complex/mask_pauldron.svg"},{layer:"pauldron trim",path:"/icons/marine_complex/mask_pauldron_trim.svg"},{layer:"pauldron highlight",path:"/icons/marine_complex/mask_pauldron_highlight.svg"},{layer:"pauldron trim highlight",path:"/icons/marine_complex/mask_pauldron_trim_highlight.svg"},{layer:"eyes",path:"/icons/marine_complex/mask_eyes.svg"},{layer:"eyes glow",path:"/icons/marine_complex/mask_eyes_glow.svg"},{layer:"helmet details",path:"/icons/marine_complex/mask_helmet_details.svg"},{layer:"aquila",path:"/icons/marine_complex/mask_aquila.svg"},{layer:"aquila highlight",path:"/icons/marine_complex/mask_aquila_highlight.svg"},{layer:"seals",path:"/icons/marine_complex/mask_seals.svg"},{layer:"seals paper",path:"/icons/marine_complex/mask_seals_paper.svg"},{layer:"gun",path:"/icons/marine_complex/mask_gun.svg"},{layer:"edge",path:"/icons/marine_complex/edge.svg"},{layer:"edge highlight",path:"/icons/marine_complex/edge_highlight.svg"}],basicScheme$1=({transparent:e,perfectWhite:t},r)=>({edge:{color:t,opacity:r},"edge highlight":{color:e,opacity:r},armour:{color:e,opacity:r},pauldron:{color:e,opacity:r},"pauldron trim":{color:e,opacity:r},"pauldron highlight":{color:e,opacity:r},"pauldron trim highlight":{color:e,opacity:r},"armour highlight":{color:e,opacity:r},"armour shadow":{color:e,opacity:r},gun:{color:e,opacity:r},aquila:{color:e,opacity:r},"aquila highlight":{color:e,opacity:r},eyes:{color:e,opacity:r},"eyes glow":{color:e,opacity:r},"helmet details":{color:e,opacity:r},seals:{color:e,opacity:r},"seals paper":{color:e,opacity:r},base:{color:e,opacity:r}}),marineComplex={name:"complex marine",svgs:svgs$1,basicScheme:basicScheme$1},svgs=[],basicScheme=(e,t)=>({}),fromImage={name:"from Image",svgs,basicScheme};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}function isObject$2(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$2,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal||freeSelf||Function("return this")(),_root=root$2,root$1=_root,now$1=function(){return root$1.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch{}var o=nativeObjectToString$1.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),o}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$2(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$2,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$1(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$1(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,isObject=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(e,t,r){var n,o,a,s,l,u,c=0,f=!1,d=!1,g=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject(r)&&(f=!!r.leading,d="maxWait"in r,a=d?nativeMax(toNumber(r.maxWait)||0,t):a,g="trailing"in r?!!r.trailing:g);function m(B){var I=n,E=o;return n=o=void 0,c=B,s=e.apply(E,I),s}function x(B){return c=B,l=setTimeout(b,t),f?m(B):s}function w(B){var I=B-u,E=B-c,T=t-I;return d?nativeMin(T,a-E):T}function M(B){var I=B-u,E=B-c;return u===void 0||I>=t||I<0||d&&E>=a}function b(){var B=now();if(M(B))return A(B);l=setTimeout(b,w(B))}function A(B){return l=void 0,g&&n?m(B):(n=o=void 0,s)}function v(){l!==void 0&&clearTimeout(l),c=0,n=u=o=l=void 0}function _(){return l===void 0?s:A(now())}function S(){var B=now(),I=M(B);if(n=arguments,o=this,u=B,I){if(l===void 0)return x(u);if(d)return clearTimeout(l),l=setTimeout(b,t),m(u)}return l===void 0&&(l=setTimeout(b,t)),s}return S.cancel=v,S.flush=_,S}var debounce_1=debounce;const debounce$1=getDefaultExportFromCjs(debounce_1),bitMethods={getBit(e){return this.data[getSlot(e)]&1<<getShift(e)?1:0},setBit(e){this.data[getSlot(e)]|=1<<getShift(e)},clearBit(e){this.data[getSlot(e)]&=~(1<<getShift(e))},toggleBit(e){this.data[getSlot(e)]^=1<<getShift(e)},getBitXY(e,t){return e>=this.width||t>=this.height?0:this.getBit(t*this.width+e)},setBitXY(e,t){this.setBit(t*this.width+e)},clearBitXY(e,t){this.clearBit(t*this.width+e)},toggleBitXY(e,t){this.toggleBit(t*this.width+e)}};function getSlot(e){return e>>3}function getShift(e){return 7-(e&7)}function setBitMethods(e){for(const t in bitMethods)e.prototype[t]=bitMethods[t]}function checkProcessable(e,t={}){let{bitDepth:r,alpha:n,colorModel:o,components:a,channels:s}=t;if(typeof e!="string"||e.length===0)throw new TypeError("processName must be a string");if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.bitDepth)))throw new TypeError(`The process: ${e} can only be applied if bit depth is in: ${r}`);if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.alpha)))throw new TypeError(`The process: ${e} can only be applied if alpha is in: ${n}`);if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.colorModel)))throw new TypeError(`The process: ${e} can only be applied if color model is in: ${o}`);if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.components))){let l=`The process: ${e} can only be applied if the number of components is in: ${a}`;throw a.length===1&&a[0]===1?new TypeError(`${l}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(l)}if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.channels)))throw new TypeError(`The process: ${e} can only be applied if the number of channels is in: ${s}`)}function createBlob(e,t){e=e||[],t=t||{},typeof t=="string"&&(t={type:t});try{return new Blob(e,t)}catch(a){if(a.name!=="TypeError")throw a;for(var r=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,n=new r,o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}function dataURLToBlob(e){var t=e.match(/data:([^;]+)/)[1],r=e.replace(/^[^,]+,/,""),n=binaryStringToArrayBuffer(atob(r));return createBlob([n],{type:t})}function canvasToBlob(e,t,r){return typeof e.toBlob=="function"?new Promise(function(n){e.toBlob(n,t,r)}):Promise.resolve(dataURLToBlob(e.toDataURL(t,r)))}function binaryStringToArrayBuffer(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=-1;++o<t;)n[o]=e.charCodeAt(o);return r}(function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function t(n="utf-8"){if(n!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${n}') is invalid.`)}Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(n,o={stream:!1}){if(o.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let a=0;const s=n.length;let l=0,u=Math.max(32,s+(s>>1)+7),c=new Uint8Array(u>>3<<3);for(;a<s;){let f=n.charCodeAt(a++);if(f>=55296&&f<=56319){if(a<s){const d=n.charCodeAt(a);(d&64512)===56320&&(++a,f=((f&1023)<<10)+(d&1023)+65536)}if(f>=55296&&f<=56319)continue}if(l+4>c.length){u+=8,u*=1+a/n.length*2,u=u>>3<<3;const d=new Uint8Array(u);d.set(c),c=d}if(f&4294967168)if(!(f&4294965248))c[l++]=f>>6&31|192;else if(!(f&4294901760))c[l++]=f>>12&15|224,c[l++]=f>>6&63|128;else if(!(f&4292870144))c[l++]=f>>18&7|240,c[l++]=f>>12&63|128,c[l++]=f>>6&63|128;else continue;else{c[l++]=f;continue}c[l++]=f&63|128}return c.slice(0,l)};function r(n="utf-8",o={fatal:!1}){if(n!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${n}') is invalid.`);if(o.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(n,o={stream:!1}){if(o.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const a=new Uint8Array(n);let s=0;const l=a.length,u=[];for(;s<l;){const c=a[s++];if(c===0)break;if(!(c&128))u.push(c);else if((c&224)===192){const f=a[s++]&63;u.push((c&31)<<6|f)}else if((c&240)===224){const f=a[s++]&63,d=a[s++]&63;u.push((c&31)<<12|f<<6|d)}else if((c&248)===240){const f=a[s++]&63,d=a[s++]&63,g=a[s++]&63;let m=(c&7)<<18|f<<12|d<<6|g;m>65535&&(m-=65536,u.push(m>>>10&1023|55296),m=56320|m&1023),u.push(m)}}return String.fromCharCode.apply(null,u)},e.TextEncoder=t,e.TextDecoder=r})(typeof window<"u"?window:typeof self<"u"?self:globalThis);function decode$5(e,t="utf8"){return new TextDecoder(t).decode(e)}const encoder$1=new TextEncoder;function encode$3(e){return encoder$1.encode(e)}const defaultByteLength$1=1024*8,hostBigEndian=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};let IOBuffer$4=class nt{constructor(t=defaultByteLength$1,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const o=r.offset?r.offset>>>0:0,a=t.byteLength-o;let s=o;(ArrayBuffer.isView(t)||t instanceof nt)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+o),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=typedArrays[r].BYTES_PER_ELEMENT*t,o=this.byteOffset+this.offset,a=this.buffer.slice(o,o+n);if(this.littleEndian===hostBigEndian&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(o,o+n));l.reverse();const u=new typedArrays[r](l.buffer);return this.offset+=n,u.reverse(),u}const s=new typedArrays[r](a);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return decode$5(this.readBytes(t))}decodeText(t=1,r="utf-8"){return decode$5(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(encode$3(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};const IOBuffer$5=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer:IOBuffer$4},Symbol.toStringTag,{value:"Module"})),require$$0$4=getAugmentedNamespace(IOBuffer$5);var constants$4={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}};const{IOBuffer:IOBuffer$3}=require$$0$4,constants$3=constants$4,tableLeft=[];for(let e=0;e<=8;e++)tableLeft.push(255<<e);class BMPEncoder extends IOBuffer$3{constructor(t){if(t.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!t.height||!t.width)throw new Error("ImageData width and height are required");super(t.data),this.width=t.width,this.height=t.height,this.bitDepth=t.bitDepth,this.channels=t.channels,this.components=t.components}encode(){this.encoded=new IOBuffer$3,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const t=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(t),this.encoded.toArray()}writePixelArray(){let t=this.encoded;const r=Math.floor((this.bitDepth*this.width+31)/32)*4,n=Math.ceil(this.bitDepth*this.width/8),o=r-n,a=this.bitDepth*this.width%8,s=a===0?0:8-a,l=r*this.height;let u,c,f=0,d=0,g=8;t.mark(),c=this.readUint8();for(let m=this.height-1;m>=0;m--){const x=m===0;t.reset(),t.skip(m*r);for(let w=0;w<n;w++){const M=w===n-1;d<=s&&M?(t.writeByte(c<<d),(s===0||s===d)&&!x&&(u=c,c=this.readByte())):d===0?(u=c,c=this.readUint8(),t.writeByte(u)):(u=c,c=this.readUint8(),t.writeByte(u<<d&tableLeft[d]|c>>g)),M&&(f+=a||0,t.skip(o),d=f%8,g=8-d)}}r>n&&(t.reset(),t.skip(l-1),t.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(t){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(t)}writeBitmapV5Header(){const r=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(constants$3.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(r).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(constants$3.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(constants$3.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}var BMPEncoder_1=BMPEncoder;const Encoder=BMPEncoder_1;var encode$2=function(t){return new Encoder(t).encode()};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)],put_short=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},send_bits=(e,t,r)=>{e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},send_code=(e,t,r)=>{send_bits(e,r[t*2],r[t*2+1])},bi_reverse=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},bi_flush=e=>{e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},gen_bitlen=(e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,f,d,g,m,x,w=0;for(g=0;g<=MAX_BITS$1;g++)e.bl_count[g]=0;for(r[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<HEAP_SIZE$1;c++)f=e.heap[c],g=r[r[f*2+1]*2+1]+1,g>u&&(g=u,w++),r[f*2+1]=g,!(f>n)&&(e.bl_count[g]++,m=0,f>=l&&(m=s[f-l]),x=r[f*2],e.opt_len+=x*(g+m),a&&(e.static_len+=x*(o[f*2+1]+m)));if(w!==0){do{for(g=u-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[u]--,w-=2}while(w>0);for(g=u;g!==0;g--)for(f=e.bl_count[g];f!==0;)d=e.heap[--c],!(d>n)&&(r[d*2+1]!==g&&(e.opt_len+=(g-r[d*2+1])*r[d*2],r[d*2+1]=g),f--)}},gen_codes=(e,t,r)=>{const n=new Array(MAX_BITS$1+1);let o=0,a,s;for(a=1;a<=MAX_BITS$1;a++)o=o+r[a-1]<<1,n[a]=o;for(s=0;s<=t;s++){let l=e[s*2+1];l!==0&&(e[s*2]=bi_reverse(n[l]++,l))}},tr_static_init=()=>{let e,t,r,n,o;const a=new Array(MAX_BITS$1+1);for(r=0,n=0;n<LENGTH_CODES$1-1;n++)for(base_length[n]=r,e=0;e<1<<extra_lbits[n];e++)_length_code[r++]=n;for(_length_code[r-1]=n,o=0,n=0;n<16;n++)for(base_dist[n]=o,e=0;e<1<<extra_dbits[n];e++)_dist_code[o++]=n;for(o>>=7;n<D_CODES$1;n++)for(base_dist[n]=o<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+o++]=n;for(t=0;t<=MAX_BITS$1;t++)a[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,a[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,a[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,a[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,a[8]++;for(gen_codes(static_ltree,L_CODES$1+1,a),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=e=>{let t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bi_windup=e=>{e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},smaller=(e,t,r,n)=>{const o=t*2,a=r*2;return e[o]<e[a]||e[o]===e[a]&&n[t]<=n[r]},pqdownheap=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&smaller(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!smaller(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},compress_block=(e,t,r)=>{let n,o,a=0,s,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,o=e.pending_buf[e.sym_buf+a++],n===0?send_code(e,o,t):(s=_length_code[o],send_code(e,s+LITERALS$1+1,t),l=extra_lbits[s],l!==0&&(o-=base_length[s],send_bits(e,o,l)),n--,s=d_code(n),send_code(e,s,r),l=extra_dbits[s],l!==0&&(n-=base_dist[s],send_bits(e,n,l)));while(a<e.sym_next);send_code(e,END_BLOCK,t)},build_tree=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems;let s,l,u=-1,c;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,s=0;s<a;s++)r[s*2]!==0?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,r[c*2]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=n[c*2+1]);for(t.max_code=u,s=e.heap_len>>1;s>=1;s--)pqdownheap(e,r,s);c=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,r[c*2]=r[s*2]+r[l*2],e.depth[c]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,r[s*2+1]=r[l*2+1]=c,e.heap[1]=c++,pqdownheap(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(r,u,e.bl_count)},scan_tree=(e,t,r)=>{let n,o=-1,a,s=t[0*2+1],l=0,u=7,c=4;for(s===0&&(u=138,c=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],!(++l<u&&a===s)&&(l<c?e.bl_tree[a*2]+=l:a!==0?(a!==o&&e.bl_tree[a*2]++,e.bl_tree[REP_3_6*2]++):l<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,l=0,o=a,s===0?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4))},send_tree=(e,t,r)=>{let n,o=-1,a,s=t[0*2+1],l=0,u=7,c=4;for(s===0&&(u=138,c=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++l<u&&a===s)){if(l<c)do send_code(e,a,e.bl_tree);while(--l!==0);else a!==0?(a!==o&&(send_code(e,a,e.bl_tree),l--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,l-3,2)):l<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,l-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,l-11,7));l=0,o=a,s===0?(u=138,c=3):a===s?(u=6,c=3):(u=7,c=4)}},build_bl_tree=e=>{let t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},send_all_trees=(e,t,r,n)=>{let o;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,n-4,4),o=0;o<n;o++)send_bits(e,e.bl_tree[bl_order[o]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)},detect_data_type=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Z_BINARY;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT;for(r=32;r<LITERALS$1;r++)if(e.dyn_ltree[r*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=e=>{static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)},_tr_stored_block$1=(e,t,r,n)=>{send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),bi_windup(e),put_short(e,r),put_short(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},_tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)},_tr_flush_block$1=(e,t,r,n)=>{let o,a,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$1&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=r+5,r+4<=o&&t!==-1?_tr_stored_block$1(e,t,r,n):e.strategy===Z_FIXED$1||a===o?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)},_tr_tally$1=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[r]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.sym_next===e.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,t,r,n)=>{let o=e&65535|0,a=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do o=o+t[n++]|0,a=a+o|0;while(--s);o%=65521,a%=65521}return o|a<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable$1=new Uint32Array(makeTable()),crc32=(e,t,r,n)=>{const o=crcTable$1,a=n+r;e^=-1;for(let s=n;s<a;s++)e=e>>>8^o[(e^t[s])&255];return e^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(e,t)=>(e.msg=messages[t],t),rank=e=>e*2-(e>4?9:0),zero=e=>{let t=e.length;for(;--t>=0;)e[t]=0},slide_hash=e=>{let t,r,n,o=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=o?r-o:0;while(--t);t=o,n=t;do r=e.prev[--n],e.prev[n]=r>=o?r-o:0;while(--t)};let HASH_ZLIB=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,HASH=HASH_ZLIB;const flush_pending=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},flush_block_only=(e,t)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)},put_byte=(e,t)=>{e.pending_buf[e.pending++]=t},putShortMSB=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},read_buf=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),e.state.wrap===1?e.adler=adler32_1(e.adler,t,o,r):e.state.wrap===2&&(e.adler=crc32_1(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},longest_match=(e,t)=>{let r=e.max_chain_length,n=e.strstart,o,a,s=e.prev_length,l=e.nice_match;const u=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,f=e.w_mask,d=e.prev,g=e.strstart+MAX_MATCH;let m=c[n+s-1],x=c[n+s];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(o=t,!(c[o+s]!==x||c[o+s-1]!==m||c[o]!==c[n]||c[++o]!==c[n+1])){n+=2,o++;do;while(c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&n<g);if(a=MAX_MATCH-(g-n),n=g-MAX_MATCH,a>s){if(e.match_start=t,s=a,a>=l)break;m=c[n+s-1],x=c[n+s]}}while((t=d[t&f])>u&&--r!==0);return s<=e.lookahead?s:e.lookahead},fill_window=e=>{const t=e.w_size;let r,n,o;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),slide_hash(e),n+=t),e.strm.avail_in===0)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=MIN_MATCH)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=HASH(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=HASH(e,e.ins_h,e.window[o+MIN_MATCH-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)},deflate_stored=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,o,a,s=0,l=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,o=e.strstart-e.block_start,n>o+e.strm.avail_in&&(n=o+e.strm.avail_in),n>a&&(n=a),n<r&&(n===0&&t!==Z_FINISH$3||t===Z_NO_FLUSH$2||n!==o+e.strm.avail_in)))break;s=t===Z_FINISH$3&&n===o+e.strm.avail_in?1:0,_tr_stored_block(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,flush_pending(e.strm),o&&(o>n&&(o=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,n-=o),n&&(read_buf(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(s===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?BS_FINISH_DONE:t!==Z_NO_FLUSH$2&&t!==Z_FINISH$3&&e.strm.avail_in===0&&e.strstart===e.block_start?BS_BLOCK_DONE:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(read_buf(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,r=a>e.w_size?e.w_size:a,o=e.strstart-e.block_start,(o>=r||(o||t===Z_FINISH$3)&&t!==Z_NO_FLUSH$2&&e.strm.avail_in===0&&o<=a)&&(n=o>a?a:o,s=t===Z_FINISH$3&&e.strm.avail_in===0&&n===o?1:0,_tr_stored_block(e,e.block_start,n,s),e.block_start+=n,flush_pending(e.strm)),s?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(e,t)=>{let r,n;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH)if(n=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1]);else n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-MIN_MATCH,n=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(n=_tr_tally(e,0,e.window[e.strstart-1]),n&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(e,t)=>{let r,n,o,a;const s=e.window;for(;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(o=e.strstart-1,n=s[o],n===s[++o]&&n===s[++o]&&n===s[++o])){a=e.strstart+MAX_MATCH;do;while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<a);e.match_length=MAX_MATCH-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(r=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(e.match_length=0,r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=e=>{e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==INIT_STATE&&t.status!==GZIP_STATE&&t.status!==EXTRA_STATE&&t.status!==NAME_STATE&&t.status!==COMMENT_STATE&&t.status!==HCRC_STATE&&t.status!==BUSY_STATE&&t.status!==FINISH_STATE?1:0},deflateResetKeep=e=>{if(deflateStateCheck(e))return err(e,Z_STREAM_ERROR$2);e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?GZIP_STATE:t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=-2,_tr_init(t),Z_OK$3},deflateReset=e=>{const t=deflateResetKeep(e);return t===Z_OK$3&&lm_init(e.state),t},deflateSetHeader=(e,t)=>deflateStateCheck(e)||e.state.wrap!==2?Z_STREAM_ERROR$2:(e.state.gzhead=t,Z_OK$3),deflateInit2=(e,t,r,n,o,a)=>{if(!e)return Z_STREAM_ERROR$2;let s=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>MAX_MEM_LEVEL||r!==Z_DEFLATED$2||n<8||n>15||t<0||t>9||a<0||a>Z_FIXED||n===8&&s!==1)return err(e,Z_STREAM_ERROR$2);n===8&&(n=9);const l=new DeflateState;return e.state=l,l.strm=e,l.status=INIT_STATE,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+MIN_MATCH-1)/MIN_MATCH),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=a,l.method=r,deflateReset(e)},deflateInit=(e,t)=>deflateInit2(e,t,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(e,t)=>{if(deflateStateCheck(e)||t>Z_BLOCK$1||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===FINISH_STATE&&t!==Z_FINISH$3)return err(e,e.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(flush_pending(e),e.avail_out===0)return r.last_flush=-1,Z_OK$3}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$3)return err(e,Z_BUF_ERROR$1);if(r.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$1);if(r.status===INIT_STATE&&r.wrap===0&&(r.status=BUSY_STATE),r.status===INIT_STATE){let o=Z_DEFLATED$2+(r.w_bits-8<<4)<<8,a=-1;if(r.strategy>=Z_HUFFMAN_ONLY||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=PRESET_DICT),o+=31-o%31,putShortMSB(r,o),r.strstart!==0&&(putShortMSB(r,e.adler>>>16),putShortMSB(r,e.adler&65535)),e.adler=1,r.status=BUSY_STATE,flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3}if(r.status===GZIP_STATE){if(e.adler=0,put_byte(r,31),put_byte(r,139),put_byte(r,8),r.gzhead)put_byte(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),put_byte(r,r.gzhead.time&255),put_byte(r,r.gzhead.time>>8&255),put_byte(r,r.gzhead.time>>16&255),put_byte(r,r.gzhead.time>>24&255),put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0),put_byte(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(put_byte(r,r.gzhead.extra.length&255),put_byte(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=EXTRA_STATE;else if(put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0),put_byte(r,OS_CODE),r.status=BUSY_STATE,flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3}if(r.status===EXTRA_STATE){if(r.gzhead.extra){let o=r.pending,a=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+a>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=l,flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3;o=0,a-=l}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending+=a,r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=NAME_STATE}if(r.status===NAME_STATE){if(r.gzhead.name){let o=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o)),flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3;o=0}r.gzindex<r.gzhead.name.length?a=r.gzhead.name.charCodeAt(r.gzindex++)&255:a=0,put_byte(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=COMMENT_STATE}if(r.status===COMMENT_STATE){if(r.gzhead.comment){let o=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o)),flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3;o=0}r.gzindex<r.gzhead.comment.length?a=r.gzhead.comment.charCodeAt(r.gzindex++)&255:a=0,put_byte(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-o,o))}r.status=HCRC_STATE}if(r.status===HCRC_STATE){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(flush_pending(e),r.pending!==0))return r.last_flush=-1,Z_OK$3;put_byte(r,e.adler&255),put_byte(r,e.adler>>8&255),e.adler=0}if(r.status=BUSY_STATE,flush_pending(e),r.pending!==0)return r.last_flush=-1,Z_OK$3}if(e.avail_in!==0||r.lookahead!==0||t!==Z_NO_FLUSH$2&&r.status!==FINISH_STATE){let o=r.level===0?deflate_stored(r,t):r.strategy===Z_HUFFMAN_ONLY?deflate_huff(r,t):r.strategy===Z_RLE?deflate_rle(r,t):configuration_table[r.level].func(r,t);if((o===BS_FINISH_STARTED||o===BS_FINISH_DONE)&&(r.status=FINISH_STATE),o===BS_NEED_MORE||o===BS_FINISH_STARTED)return e.avail_out===0&&(r.last_flush=-1),Z_OK$3;if(o===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?_tr_align(r):t!==Z_BLOCK$1&&(_tr_stored_block(r,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),flush_pending(e),e.avail_out===0))return r.last_flush=-1,Z_OK$3}return t!==Z_FINISH$3?Z_OK$3:r.wrap<=0?Z_STREAM_END$3:(r.wrap===2?(put_byte(r,e.adler&255),put_byte(r,e.adler>>8&255),put_byte(r,e.adler>>16&255),put_byte(r,e.adler>>24&255),put_byte(r,e.total_in&255),put_byte(r,e.total_in>>8&255),put_byte(r,e.total_in>>16&255),put_byte(r,e.total_in>>24&255)):(putShortMSB(r,e.adler>>>16),putShortMSB(r,e.adler&65535)),flush_pending(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=e=>{if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const t=e.state.status;return e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(e,t)=>{let r=t.length;if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const n=e.state,o=n.wrap;if(o===2||o===1&&n.status!==INIT_STATE||n.lookahead)return Z_STREAM_ERROR$2;if(o===1&&(e.adler=adler32_1(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){o===0&&(zero(n.head),n.strstart=0,n.block_start=0,n.insert=0);let u=new Uint8Array(n.w_size);u.set(t.subarray(r-n.w_size,r),0),t=u,r=n.w_size}const a=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,fill_window(n);n.lookahead>=MIN_MATCH;){let u=n.strstart,c=n.lookahead-(MIN_MATCH-1);do n.ins_h=HASH(n,n.ins_h,n.window[u+MIN_MATCH-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--c);n.strstart=u,n.lookahead=MIN_MATCH-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=MIN_MATCH-1,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=a,n.wrap=o,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)_has(r,n)&&(e[n]=r[n])}}return e},flattenChunks=e=>{let t=0;for(let n=0,o=e.length;n<o;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,o=0,a=e.length;n<a;n++){let s=e[n];r.set(s,o),o+=s.length}return r},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,o,a,s=e.length,l=0;for(o=0;o<s;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<s&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),a=0,o=0;a<l;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<s&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const buf2binstring=(e,t)=>{if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var buf2string=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,o;const a=new Array(r*2);for(o=0,n=0;n<r;){let s=e[n++];if(s<128){a[o++]=s;continue}let l=_utf8len[s];if(l>4){a[o++]=65533,n+=l-1;continue}for(s&=l===2?31:l===3?15:7;l>1&&n<r;)s=s<<6|e[n++]&63,l--;if(l>1){a[o++]=65533;continue}s<65536?a[o++]=s:(s-=65536,a[o++]=55296|s>>10&1023,a[o++]=56320|s&1023)}return buf2binstring(a,o)},utf8border=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let r=deflate_1$2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$2)throw new Error(messages[r]);if(t.header&&deflate_1$2.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=strings.string2buf(t.dictionary):toString$1$1.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=deflate_1$2.deflateSetDictionary(this.strm,n),r!==Z_OK$2)throw new Error(messages[r]);this._dict_set=!0}}Deflate$1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let o,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof e=="string"?r.input=strings.string2buf(e):toString$1$1.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Z_SYNC_FLUSH||a===Z_FULL_FLUSH)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(o=deflate_1$2.deflate(r,a),o===Z_STREAM_END$2)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=deflate_1$2.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Z_OK$2;if(r.avail_out===0){this.onData(r.output);continue}if(a>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(e){this.chunks.push(e)};Deflate$1.prototype.onEnd=function(e){e===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function deflate$1(e,t){const r=new Deflate$1(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function deflateRaw$1(e,t){return t=t||{},t.raw=!0,deflate$1(e,t)}function gzip$1(e,t){return t=t||{},t.gzip=!0,deflate$1(e,t)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(t,r){let n,o,a,s,l,u,c,f,d,g,m,x,w,M,b,A,v,_,S,B,I,E,T,y;const k=t.state;n=t.next_in,T=t.input,o=n+(t.avail_in-5),a=t.next_out,y=t.output,s=a-(r-t.avail_out),l=a+(t.avail_out-257),u=k.dmax,c=k.wsize,f=k.whave,d=k.wnext,g=k.window,m=k.hold,x=k.bits,w=k.lencode,M=k.distcode,b=(1<<k.lenbits)-1,A=(1<<k.distbits)-1;e:do{x<15&&(m+=T[n++]<<x,x+=8,m+=T[n++]<<x,x+=8),v=w[m&b];t:for(;;){if(_=v>>>24,m>>>=_,x-=_,_=v>>>16&255,_===0)y[a++]=v&65535;else if(_&16){S=v&65535,_&=15,_&&(x<_&&(m+=T[n++]<<x,x+=8),S+=m&(1<<_)-1,m>>>=_,x-=_),x<15&&(m+=T[n++]<<x,x+=8,m+=T[n++]<<x,x+=8),v=M[m&A];r:for(;;){if(_=v>>>24,m>>>=_,x-=_,_=v>>>16&255,_&16){if(B=v&65535,_&=15,x<_&&(m+=T[n++]<<x,x+=8,x<_&&(m+=T[n++]<<x,x+=8)),B+=m&(1<<_)-1,B>u){t.msg="invalid distance too far back",k.mode=BAD$1;break e}if(m>>>=_,x-=_,_=a-s,B>_){if(_=B-_,_>f&&k.sane){t.msg="invalid distance too far back",k.mode=BAD$1;break e}if(I=0,E=g,d===0){if(I+=c-_,_<S){S-=_;do y[a++]=g[I++];while(--_);I=a-B,E=y}}else if(d<_){if(I+=c+d-_,_-=d,_<S){S-=_;do y[a++]=g[I++];while(--_);if(I=0,d<S){_=d,S-=_;do y[a++]=g[I++];while(--_);I=a-B,E=y}}}else if(I+=d-_,_<S){S-=_;do y[a++]=g[I++];while(--_);I=a-B,E=y}for(;S>2;)y[a++]=E[I++],y[a++]=E[I++],y[a++]=E[I++],S-=3;S&&(y[a++]=E[I++],S>1&&(y[a++]=E[I++]))}else{I=a-B;do y[a++]=y[I++],y[a++]=y[I++],y[a++]=y[I++],S-=3;while(S>2);S&&(y[a++]=y[I++],S>1&&(y[a++]=y[I++]))}}else if(_&64){t.msg="invalid distance code",k.mode=BAD$1;break e}else{v=M[(v&65535)+(m&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){k.mode=TYPE$1;break e}else{t.msg="invalid literal/length code",k.mode=BAD$1;break e}else{v=w[(v&65535)+(m&(1<<_)-1)];continue t}break}}while(n<o&&a<l);S=x>>3,n-=S,x-=S<<3,m&=(1<<x)-1,t.next_in=n,t.next_out=a,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=a<l?257+(l-a):257-(a-l),k.hold=m,k.bits=x};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,t,r,n,o,a,s,l)=>{const u=l.bits;let c=0,f=0,d=0,g=0,m=0,x=0,w=0,M=0,b=0,A=0,v,_,S,B,I,E=null,T;const y=new Uint16Array(MAXBITS+1),k=new Uint16Array(MAXBITS+1);let C=null,F,Y,K;for(c=0;c<=MAXBITS;c++)y[c]=0;for(f=0;f<n;f++)y[t[r+f]]++;for(m=u,g=MAXBITS;g>=1&&y[g]===0;g--);if(m>g&&(m=g),g===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<g&&y[d]===0;d++);for(m<d&&(m=d),M=1,c=1;c<=MAXBITS;c++)if(M<<=1,M-=y[c],M<0)return-1;if(M>0&&(e===CODES$1||g!==1))return-1;for(k[1]=0,c=1;c<MAXBITS;c++)k[c+1]=k[c]+y[c];for(f=0;f<n;f++)t[r+f]!==0&&(s[k[t[r+f]]++]=f);if(e===CODES$1?(E=C=s,T=20):e===LENS$1?(E=lbase,C=lext,T=257):(E=dbase,C=dext,T=0),A=0,f=0,c=d,I=a,x=m,w=0,S=-1,b=1<<m,B=b-1,e===LENS$1&&b>ENOUGH_LENS$1||e===DISTS$1&&b>ENOUGH_DISTS$1)return 1;for(;;){F=c-w,s[f]+1<T?(Y=0,K=s[f]):s[f]>=T?(Y=C[s[f]-T],K=E[s[f]-T]):(Y=32+64,K=0),v=1<<c-w,_=1<<x,d=_;do _-=v,o[I+(A>>w)+_]=F<<24|Y<<16|K|0;while(_!==0);for(v=1<<c-1;A&v;)v>>=1;if(v!==0?(A&=v-1,A+=v):A=0,f++,--y[c]===0){if(c===g)break;c=t[r+s[f]]}if(c>m&&(A&B)!==S){for(w===0&&(w=m),I+=d,x=c-w,M=1<<x;x+w<g&&(M-=y[x+w],!(M<=0));)x++,M<<=1;if(b+=1<<x,e===LENS$1&&b>ENOUGH_LENS$1||e===DISTS$1&&b>ENOUGH_DISTS$1)return 1;S=A&B,o[S]=m<<24|x<<16|I-a|0}}return A!==0&&(o[I+A]=c-w<<24|64<<16|0),l.bits=m,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=(e,t)=>{let r;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=(e,t)=>{if(!e)return Z_STREAM_ERROR$1;const r=new InflateState;e.state=r,r.strm=e,r.window=null,r.mode=HEAD;const n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,t,r,n)=>{let o;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(t.subarray(r-n,r-n+o),a.wnext),n-=o,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},inflate$2=(e,t)=>{let r,n,o,a,s,l,u,c,f,d,g,m,x,w,M=0,b,A,v,_,S,B,I,E;const T=new Uint8Array(4);let y,k;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;r=e.state,r.mode===TYPE&&(r.mode=TYPEDO),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,c=r.hold,f=r.bits,d=l,g=u,E=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(r.wrap===0){r.mode=TYPEDO;break}for(;f<16;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=c&255,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0),c=0,f=0,r.mode=FLAGS;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=BAD;break}if((c&15)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(c>>>=4,f-=4,I=(c&15)+8,r.wbits===0&&(r.wbits=I),I>15||I>r.wbits){e.msg="invalid window size",r.mode=BAD;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=c&512?DICTID:TYPE,c=0,f=0;break;case FLAGS:for(;f<16;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(r.flags=c,(r.flags&255)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=BAD;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,f=0,r.mode=TIME;case TIME:for(;f<32;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,r.check=crc32_1(r.check,T,4,0)),c=0,f=0,r.mode=OS;case OS:for(;f<16;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,f=0,r.mode=EXLEN;case EXLEN:if(r.flags&1024){for(;f<16;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,f=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+m),I)),r.flags&512&&r.wrap&4&&(r.check=crc32_1(r.check,n,m,a)),l-=m,a+=m,r.length-=m),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(r.flags&2048){if(l===0)break e;m=0;do I=n[a+m++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I));while(I&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=crc32_1(r.check,n,m,a)),l-=m,a+=m,I)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(r.flags&4096){if(l===0)break e;m=0;do I=n[a+m++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I));while(I&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=crc32_1(r.check,n,m,a)),l-=m,a+=m,I)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(r.flags&512){for(;f<16;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(r.wrap&4&&c!==(r.check&65535)){e.msg="header crc mismatch",r.mode=BAD;break}c=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;f<32;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}e.adler=r.check=zswap32(c),c=0,f=0,r.mode=DICT;case DICT:if(r.havedict===0)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=c,r.bits=f,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){c>>>=f&7,f-=f&7,r.mode=CHECK;break}for(;f<3;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}switch(r.last=c&1,c>>>=1,f-=1,c&3){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){c>>>=2,f-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD}c>>>=2,f-=2;break;case STORED:for(c>>>=f&7,f-=f&7;f<32;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD;break}if(r.length=c&65535,c=0,f=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(m=r.length,m){if(m>l&&(m=l),m>u&&(m=u),m===0)break e;o.set(n.subarray(a,a+m),s),l-=m,a+=m,u-=m,s+=m,r.length-=m;break}r.mode=TYPE;break;case TABLE:for(;f<14;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(r.nlen=(c&31)+257,c>>>=5,f-=5,r.ndist=(c&31)+1,c>>>=5,f-=5,r.ncode=(c&15)+4,c>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;f<3;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.lens[C[r.have++]]=c&7,c>>>=3,f-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,y={bits:r.lenbits},E=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,y),r.lenbits=y.bits,E){e.msg="invalid code lengths set",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[c&(1<<r.lenbits)-1],b=M>>>24,A=M>>>16&255,v=M&65535,!(b<=f);){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(v<16)c>>>=b,f-=b,r.lens[r.have++]=v;else{if(v===16){for(k=b+2;f<k;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(c>>>=b,f-=b,r.have===0){e.msg="invalid bit length repeat",r.mode=BAD;break}I=r.lens[r.have-1],m=3+(c&3),c>>>=2,f-=2}else if(v===17){for(k=b+3;f<k;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}c>>>=b,f-=b,I=0,m=3+(c&7),c>>>=3,f-=3}else{for(k=b+7;f<k;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}c>>>=b,f-=b,I=0,m=11+(c&127),c>>>=7,f-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD;break}for(;m--;)r.lens[r.have++]=I}}if(r.mode===BAD)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=BAD;break}if(r.lenbits=9,y={bits:r.lenbits},E=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,y),r.lenbits=y.bits,E){e.msg="invalid literal/lengths set",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,y={bits:r.distbits},E=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,y),r.distbits=y.bits,E){e.msg="invalid distances set",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=c,r.bits=f,inffast(e,g),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,c=r.hold,f=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;M=r.lencode[c&(1<<r.lenbits)-1],b=M>>>24,A=M>>>16&255,v=M&65535,!(b<=f);){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(A&&!(A&240)){for(_=b,S=A,B=v;M=r.lencode[B+((c&(1<<_+S)-1)>>_)],b=M>>>24,A=M>>>16&255,v=M&65535,!(_+b<=f);){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}c>>>=_,f-=_,r.back+=_}if(c>>>=b,f-=b,r.back+=b,r.length=v,A===0){r.mode=LIT;break}if(A&32){r.back=-1,r.mode=TYPE;break}if(A&64){e.msg="invalid literal/length code",r.mode=BAD;break}r.extra=A&15,r.mode=LENEXT;case LENEXT:if(r.extra){for(k=r.extra;f<k;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;M=r.distcode[c&(1<<r.distbits)-1],b=M>>>24,A=M>>>16&255,v=M&65535,!(b<=f);){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(!(A&240)){for(_=b,S=A,B=v;M=r.distcode[B+((c&(1<<_+S)-1)>>_)],b=M>>>24,A=M>>>16&255,v=M&65535,!(_+b<=f);){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}c>>>=_,f-=_,r.back+=_}if(c>>>=b,f-=b,r.back+=b,A&64){e.msg="invalid distance code",r.mode=BAD;break}r.offset=v,r.extra=A&15,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(k=r.extra;f<k;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(u===0)break e;if(m=g-u,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break}m>r.wnext?(m-=r.wnext,x=r.wsize-m):x=r.wnext-m,m>r.length&&(m=r.length),w=r.window}else w=o,x=s-r.offset,m=r.length;m>u&&(m=u),u-=m,r.length-=m;do o[s++]=w[x++];while(--m);r.length===0&&(r.mode=LEN);break;case LIT:if(u===0)break e;o[s++]=r.length,u--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;f<32;){if(l===0)break e;l--,c|=n[a++]<<f,f+=8}if(g-=u,e.total_out+=g,r.total+=g,r.wrap&4&&g&&(e.adler=r.check=r.flags?crc32_1(r.check,o,g,s-g):adler32_1(r.check,o,g,s-g)),g=u,r.wrap&4&&(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check",r.mode=BAD;break}c=0,f=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;f<32;){if(l===0)break e;l--,c+=n[a++]<<f,f+=8}if(r.wrap&4&&c!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=BAD;break}c=0,f=0}r.mode=DONE;case DONE:E=Z_STREAM_END$1;break e;case BAD:E=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=c,r.bits=f,(r.wsize||g!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,g-e.avail_out),d-=e.avail_in,g-=e.avail_out,e.total_in+=d,e.total_out+=g,r.total+=g,r.wrap&4&&g&&(e.adler=r.check=r.flags?crc32_1(r.check,o,g,e.next_out-g):adler32_1(r.check,o,g,e.next_out-g)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(d===0&&g===0||t===Z_FINISH$1)&&E===Z_OK$1&&(E=Z_BUF_ERROR),E},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,t)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(e,t)=>{const r=t.length;let n,o,a;return inflateStateCheck(e)||(n=e.state,n.wrap!==0&&n.mode!==DICT)?Z_STREAM_ERROR$1:n.mode===DICT&&(o=1,o=adler32_1(o,t,r,0),o!==n.check)?Z_DATA_ERROR$1:(a=updatewindow(e,t,r,r),a?(n.mode=MEM,Z_MEM_ERROR$1):(n.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=strings.string2buf(t.dictionary):toString$2.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary),r!==Z_OK)))throw new Error(messages[r])}Inflate$1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,s,l;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=inflate_1$2.inflate(r,s),a===Z_NEED_DICT&&o&&(a=inflate_1$2.inflateSetDictionary(r,o),a===Z_OK?a=inflate_1$2.inflate(r,s):a===Z_DATA_ERROR&&(a=Z_NEED_DICT));r.avail_in>0&&a===Z_STREAM_END&&r.state.wrap>0&&e[r.next_in]!==0;)inflate_1$2.inflateReset(r),a=inflate_1$2.inflate(r,s);switch(a){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(a),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||a===Z_STREAM_END))if(this.options.to==="string"){let u=strings.utf8border(r.output,r.next_out),c=r.next_out-u,f=strings.buf2string(r.output,u);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(u,u+c),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===Z_OK&&l===0)){if(a===Z_STREAM_END)return a=inflate_1$2.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(e){this.chunks.push(e)};Inflate$1.prototype.onEnd=function(e){e===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function inflate$1(e,t){const r=new Inflate$1(t);if(r.push(e),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){return t=t||{},t.raw=!0,inflate$1(e,t)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;crcTable[e]=t}const initialCrc=4294967295;function updateCrc(e,t,r){let n=e;for(let o=0;o<r;o++)n=crcTable[(n^t[o])&255]^n>>>8;return n}function crc(e,t){return(updateCrc(initialCrc,e,t)^initialCrc)>>>0}var ColorType;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.GREYSCALE=0]="GREYSCALE",e[e.TRUECOLOUR=2]="TRUECOLOUR",e[e.INDEXED_COLOUR=3]="INDEXED_COLOUR",e[e.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",e[e.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.NO_INTERLACE=0]="NO_INTERLACE",e[e.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer$4{constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let t=0;t<pngSignature.length;t++)if(this.readUint8()!==pngSignature[t])throw new Error(`wrong PNG signature. Byte at ${t} should be ${pngSignature[t]}.`)}decodeChunk(){const t=this.readUint32(),r=this.readChars(4),n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);if(this._checkCrc){const o=this.readUint32(),a=t+4,s=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-a-4,a),a);if(s!==o)throw new Error(`CRC mismatch for chunk ${r}. Expected ${o}, found ${s}`)}else this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=checkBitDepth(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case ColorType.GREYSCALE:n=1;break;case ColorType.TRUECOLOUR:n=3;break;case ColorType.INDEXED_COLOUR:n=1;break;case ColorType.GREYSCALE_ALPHA:n=2;break;case ColorType.TRUECOLOUR_ALPHA:n=4;break;default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let o=0;o<r;o++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}decodetRNS(t){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){let r="",n;for(;(n=this.readChar())!==NULL;)r+=n;const o=this.readUint8();if(o!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const a=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:inflate_1(a)}}decodetEXt(t){let r="",n;for(;(n=this.readChar())!==NULL;)r+=n;this._png.text[r]=this.readChars(t-r.length-1)}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(t);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(t){const r=this._png.height,n=this._png.channels*this._png.depth/8,o=this._png.width*n,a=new Uint8Array(this._png.height*o);let s=empty,l=0,u,c;for(let f=0;f<r;f++){switch(u=t.subarray(l+1,l+1+o),c=a.subarray(f*o,(f+1)*o),t[l]){case 0:unfilterNone(u,c,o);break;case 1:unfilterSub(u,c,o,n);break;case 2:unfilterUp(u,c,s,o);break;case 3:unfilterAverage(u,c,s,o,n);break;case 4:unfilterPaeth(u,c,s,o,n);break;default:throw new Error(`Unsupported filter: ${t[l]}`)}s=c,l+=o+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const f=new Uint16Array(a.buffer);if(osIsLittleEndian)for(let d=0;d<f.length;d++)f[d]=swap16(f[d]);this._png.data=f}else this._png.data=a}}function unfilterNone(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function unfilterSub(e,t,r,n){let o=0;for(;o<n;o++)t[o]=e[o];for(;o<r;o++)t[o]=e[o]+t[o-n]&255}function unfilterUp(e,t,r,n){let o=0;if(r.length===0)for(;o<n;o++)t[o]=e[o];else for(;o<n;o++)t[o]=e[o]+r[o]&255}function unfilterAverage(e,t,r,n,o){let a=0;if(r.length===0){for(;a<o;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-o]>>1)&255}else{for(;a<o;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-o]+r[a]>>1)&255}}function unfilterPaeth(e,t,r,n,o){let a=0;if(r.length===0){for(;a<o;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-o]&255}else{for(;a<o;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+paethPredictor(t[a-o],r[a],r[a-o])&255}}function paethPredictor(e,t,r){const n=e+t-r,o=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-r);return o<=a&&o<=s?e:a<=s?t:r}function swap16(e){return(e&255)<<8|e>>8&255}function checkBitDepth(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer$4{constructor(t,r={}){super(),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...r.zlib},this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:r,channels:n,depth:o,data:a}=this._png,s=n*t,l=new IOBuffer$4().setBigEndian();let u=0;for(let d=0;d<r;d++)if(l.writeByte(0),o===8)u=writeDataBytes(a,l,s,u);else if(o===16)u=writeDataUint16(a,l,s,u);else throw new Error("unreachable");const c=l.toArray(),f=deflate_1(c,this._zlibOptions);this.encodeIDAT(f)}_checkData(t){const{colorType:r,channels:n,depth:o}=getColorType(t),a={width:checkInteger(t.width,"width"),height:checkInteger(t.height,"height"),channels:n,data:t.data,depth:o,text:{}};this._colorType=r;const s=a.width*a.height*n;if(a.data.length!==s)throw new RangeError(`wrong data size. Found ${a.data.length}, expected ${s}`);return a}writeCrc(t){this.writeUint32(crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function checkInteger(e,t){if(Number.isInteger(e)&&e>0)return e;throw new TypeError(`${t} must be a positive integer`)}function getColorType(e){const{channels:t=4,depth:r=8}=e;if(t!==4&&t!==3&&t!==2&&t!==1)throw new RangeError(`unsupported number of channels: ${t}`);if(r!==8&&r!==16)throw new RangeError(`unsupported bit depth: ${r}`);const n={channels:t,depth:r,colorType:ColorType.UNKNOWN};switch(t){case 4:n.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:n.colorType=ColorType.TRUECOLOUR;break;case 1:n.colorType=ColorType.GREYSCALE;break;case 2:n.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return n}function writeDataBytes(e,t,r,n){for(let o=0;o<r;o++)t.writeByte(e[n++]);return n}function writeDataUint16(e,t,r,n){for(let o=0;o<r;o++)t.writeUint16(e[n++]);return n}var ResolutionUnitSpecifier;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(e,t){return new PngDecoder(e,t).decode()}function encodePng$1(e,t){return new PngEncoder(e,t).encode()}var encoder={exports:{}};(function(e){function t(n){var o=Math.floor,a=new Array(64),s=new Array(64),l=new Array(64),u=new Array(64),c,f,d,g,m=new Array(65535),x=new Array(65535),w=new Array(64),M=new Array(64),b=[],A=0,v=7,_=new Array(64),S=new Array(64),B=new Array(64),I=new Array(256),E=new Array(2048),T,y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(P){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],j=0;j<64;j++){var Z=o((H[j]*P+50)/100);Z<1?Z=1:Z>255&&(Z=255),a[y[j]]=Z}for(var L=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ne=0;ne<64;ne++){var se=o((L[ne]*P+50)/100);se<1?se=1:se>255&&(se=255),s[y[ne]]=se}for(var W=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],re=0,ce=0;ce<8;ce++)for(var oe=0;oe<8;oe++)l[re]=1/(a[y[re]]*W[ce]*W[oe]*8),u[re]=1/(s[y[re]]*W[ce]*W[oe]*8),re++}function le(P,H){for(var j=0,Z=0,L=new Array,ne=1;ne<=16;ne++){for(var se=1;se<=P[ne];se++)L[H[Z]]=[],L[H[Z]][0]=j,L[H[Z]][1]=ne,Z++,j++;j*=2}return L}function ge(){c=le(k,C),f=le(K,ee),d=le(F,Y),g=le(te,q)}function de(){for(var P=1,H=2,j=1;j<=15;j++){for(var Z=P;Z<H;Z++)x[32767+Z]=j,m[32767+Z]=[],m[32767+Z][1]=j,m[32767+Z][0]=Z;for(var L=-(H-1);L<=-P;L++)x[32767+L]=j,m[32767+L]=[],m[32767+L][1]=j,m[32767+L][0]=H-1+L;P<<=1,H<<=1}}function ie(){for(var P=0;P<256;P++)E[P]=19595*P,E[P+256>>0]=38470*P,E[P+512>>0]=7471*P+32768,E[P+768>>0]=-11059*P,E[P+1024>>0]=-21709*P,E[P+1280>>0]=32768*P+8421375,E[P+1536>>0]=-27439*P,E[P+1792>>0]=-5329*P}function ae(P){for(var H=P[0],j=P[1]-1;j>=0;)H&1<<j&&(A|=1<<v),j--,v--,v<0&&(A==255?(Q(255),Q(0)):Q(A),v=7,A=0)}function Q(P){b.push(P)}function he(P){Q(P>>8&255),Q(P&255)}function pe(P,H){var j,Z,L,ne,se,W,re,ce,oe=0,we,Me=8,be=64;for(we=0;we<Me;++we){j=P[oe],Z=P[oe+1],L=P[oe+2],ne=P[oe+3],se=P[oe+4],W=P[oe+5],re=P[oe+6],ce=P[oe+7];var Ee=j+ce,Se=j-ce,Ae=Z+re,ke=Z-re,Ce=L+W,Oe=L-W,Xe=ne+se,qe=ne-se,Ve=Ee+Xe,Ge=Ee-Xe,Ue=Ae+Ce,Le=Ae-Ce;P[oe]=Ve+Ue,P[oe+4]=Ve-Ue;var ze=(Le+Ge)*.707106781;P[oe+2]=Ge+ze,P[oe+6]=Ge-ze,Ve=qe+Oe,Ue=Oe+ke,Le=ke+Se;var Ke=(Ve-Le)*.382683433,$=.5411961*Ve+Ke,N=1.306562965*Le+Ke,U=Ue*.707106781,J=Se+U,fe=Se-U;P[oe+5]=fe+$,P[oe+3]=fe-$,P[oe+1]=J+N,P[oe+7]=J-N,oe+=8}for(oe=0,we=0;we<Me;++we){j=P[oe],Z=P[oe+8],L=P[oe+16],ne=P[oe+24],se=P[oe+32],W=P[oe+40],re=P[oe+48],ce=P[oe+56];var me=j+ce,$e=j-ce,Te=Z+re,Ie=Z-re,Pe=L+W,We=L-W,Re=ne+se,He=ne-se,De=me+Re,Ne=me-Re,Fe=Te+Pe,Ye=Te-Pe;P[oe]=De+Fe,P[oe+32]=De-Fe;var Ze=(Ye+Ne)*.707106781;P[oe+16]=Ne+Ze,P[oe+48]=Ne-Ze,De=He+We,Fe=We+Ie,Ye=Ie+$e;var je=(De-Ye)*.382683433,Je=.5411961*De+je,et=1.306562965*Ye+je,tt=Fe*.707106781,rt=$e+tt,it=$e-tt;P[oe+40]=it+Je,P[oe+24]=it-Je,P[oe+8]=rt+et,P[oe+56]=rt-et,oe++}var Qe;for(we=0;we<be;++we)Qe=P[we]*H[we],w[we]=Qe>0?Qe+.5|0:Qe-.5|0;return w}function _e(){he(65504),he(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),he(1),he(1),Q(0),Q(0)}function xe(P){if(P){he(65505),P[0]===69&&P[1]===120&&P[2]===105&&P[3]===102?he(P.length+2):(he(P.length+5+2),Q(69),Q(120),Q(105),Q(102),Q(0));for(var H=0;H<P.length;H++)Q(P[H])}}function ye(P,H){he(65472),he(17),Q(8),he(H),he(P),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}function ve(){he(65499),he(132),Q(0);for(var P=0;P<64;P++)Q(a[P]);Q(1);for(var H=0;H<64;H++)Q(s[H])}function R(){he(65476),he(418),Q(0);for(var P=0;P<16;P++)Q(k[P+1]);for(var H=0;H<=11;H++)Q(C[H]);Q(16);for(var j=0;j<16;j++)Q(F[j+1]);for(var Z=0;Z<=161;Z++)Q(Y[Z]);Q(1);for(var L=0;L<16;L++)Q(K[L+1]);for(var ne=0;ne<=11;ne++)Q(ee[ne]);Q(17);for(var se=0;se<16;se++)Q(te[se+1]);for(var W=0;W<=161;W++)Q(q[W])}function D(P){typeof P>"u"||P.constructor!==Array||P.forEach(H=>{if(typeof H=="string"){he(65534);var j=H.length;he(j+2);var Z;for(Z=0;Z<j;Z++)Q(H.charCodeAt(Z))}})}function O(){he(65498),he(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0)}function V(P,H,j,Z,L){for(var ne=L[0],se=L[240],W,re=16,ce=63,oe=64,we=pe(P,H),Me=0;Me<oe;++Me)M[y[Me]]=we[Me];var be=M[0]-j;j=M[0],be==0?ae(Z[0]):(W=32767+be,ae(Z[x[W]]),ae(m[W]));for(var Ee=63;Ee>0&&M[Ee]==0;Ee--);if(Ee==0)return ae(ne),j;for(var Se=1,Ae;Se<=Ee;){for(var ke=Se;M[Se]==0&&Se<=Ee;++Se);var Ce=Se-ke;if(Ce>=re){Ae=Ce>>4;for(var Oe=1;Oe<=Ae;++Oe)ae(se);Ce=Ce&15}W=32767+M[Se],ae(L[(Ce<<4)+x[W]]),ae(m[W]),Se++}return Ee!=ce&&ae(ne),j}function G(){for(var P=String.fromCharCode,H=0;H<256;H++)I[H]=P(H)}this.encode=function(P,H){new Date().getTime(),H&&z(H),b=new Array,A=0,v=7,he(65496),_e(),D(P.comments),xe(P.exifBuffer),ve(),ye(P.width,P.height),R(),O();var j=0,Z=0,L=0;A=0,v=7,this.encode.displayName="_encode_";for(var ne=P.data,se=P.width,W=P.height,re=se*4,ce,oe=0,we,Me,be,Ee,Se,Ae,ke,Ce;oe<W;){for(ce=0;ce<re;){for(Ee=re*oe+ce,Se=Ee,Ae=-1,ke=0,Ce=0;Ce<64;Ce++)ke=Ce>>3,Ae=(Ce&7)*4,Se=Ee+ke*re+Ae,oe+ke>=W&&(Se-=re*(oe+1+ke-W)),ce+Ae>=re&&(Se-=ce+Ae-re+4),we=ne[Se++],Me=ne[Se++],be=ne[Se++],_[Ce]=(E[we]+E[Me+256>>0]+E[be+512>>0]>>16)-128,S[Ce]=(E[we+768>>0]+E[Me+1024>>0]+E[be+1280>>0]>>16)-128,B[Ce]=(E[we+1280>>0]+E[Me+1536>>0]+E[be+1792>>0]>>16)-128;j=V(_,l,j,c,d),Z=V(S,u,Z,f,g),L=V(B,u,L,f,g),ce+=32}oe+=8}if(v>=0){var Oe=[];Oe[1]=v+1,Oe[0]=(1<<v+1)-1,ae(Oe)}return he(65497),Buffer.from(b)};function z(P){if(P<=0&&(P=1),P>100&&(P=100),T!=P){var H=0;P<50?H=Math.floor(5e3/P):H=Math.floor(200-P*2),ue(H),T=P}}function X(){var P=new Date().getTime();n||(n=50),G(),ge(),de(),ie(),z(n),new Date().getTime()-P}X()}e.exports=r;function r(n,o){typeof o>"u"&&(o=50);var a=new t(o),s=a.encode(n,o);return{data:s,width:n.width,height:n.height}}})(encoder);var encoderExports=encoder.exports,decoder={exports:{}};(function(e){var t=function(){var o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=4017,s=799,l=3406,u=2276,c=1567,f=3784,d=5793,g=2896;function m(){}function x(S,B){for(var I=0,E=[],T,y,k=16;k>0&&!S[k-1];)k--;E.push({children:[],index:0});var C=E[0],F;for(T=0;T<k;T++){for(y=0;y<S[T];y++){for(C=E.pop(),C.children[C.index]=B[I];C.index>0;){if(E.length===0)throw new Error("Could not recreate Huffman Table");C=E.pop()}for(C.index++,E.push(C);E.length<=T;)E.push(F={children:[],index:0}),C.children[C.index]=F.children,C=F;I++}T+1<k&&(E.push(F={children:[],index:0}),C.children[C.index]=F.children,C=F)}return E[0].children}function w(S,B,I,E,T,y,k,C,F,Y){I.precision,I.samplesPerLine,I.scanLines;var K=I.mcusPerLine,ee=I.progressive;I.maxH,I.maxV;var te=B,q=0,ue=0;function le(){if(ue>0)return ue--,q>>ue&1;if(q=S[B++],q==255){var W=S[B++];if(W)throw new Error("unexpected marker: "+(q<<8|W).toString(16))}return ue=7,q>>>7}function ge(W){for(var re=W,ce;(ce=le())!==null;){if(re=re[ce],typeof re=="number")return re;if(typeof re!="object")throw new Error("invalid huffman sequence")}return null}function de(W){for(var re=0;W>0;){var ce=le();if(ce===null)return;re=re<<1|ce,W--}return re}function ie(W){var re=de(W);return re>=1<<W-1?re:re+(-1<<W)+1}function ae(W,re){var ce=ge(W.huffmanTableDC),oe=ce===0?0:ie(ce);re[0]=W.pred+=oe;for(var we=1;we<64;){var Me=ge(W.huffmanTableAC),be=Me&15,Ee=Me>>4;if(be===0){if(Ee<15)break;we+=16;continue}we+=Ee;var Se=o[we];re[Se]=ie(be),we++}}function Q(W,re){var ce=ge(W.huffmanTableDC),oe=ce===0?0:ie(ce)<<F;re[0]=W.pred+=oe}function he(W,re){re[0]|=le()<<F}var pe=0;function _e(W,re){if(pe>0){pe--;return}for(var ce=y,oe=k;ce<=oe;){var we=ge(W.huffmanTableAC),Me=we&15,be=we>>4;if(Me===0){if(be<15){pe=de(be)+(1<<be)-1;break}ce+=16;continue}ce+=be;var Ee=o[ce];re[Ee]=ie(Me)*(1<<F),ce++}}var xe=0,ye;function ve(W,re){for(var ce=y,oe=k,we=0;ce<=oe;){var Me=o[ce],be=re[Me]<0?-1:1;switch(xe){case 0:var Ee=ge(W.huffmanTableAC),Se=Ee&15,we=Ee>>4;if(Se===0)we<15?(pe=de(we)+(1<<we),xe=4):(we=16,xe=1);else{if(Se!==1)throw new Error("invalid ACn encoding");ye=ie(Se),xe=we?2:3}continue;case 1:case 2:re[Me]?re[Me]+=(le()<<F)*be:(we--,we===0&&(xe=xe==2?3:0));break;case 3:re[Me]?re[Me]+=(le()<<F)*be:(re[Me]=ye<<F,xe=0);break;case 4:re[Me]&&(re[Me]+=(le()<<F)*be);break}ce++}xe===4&&(pe--,pe===0&&(xe=0))}function R(W,re,ce,oe,we){var Me=ce/K|0,be=ce%K,Ee=Me*W.v+oe,Se=be*W.h+we;W.blocks[Ee]===void 0&&Y.tolerantDecoding||re(W,W.blocks[Ee][Se])}function D(W,re,ce){var oe=ce/W.blocksPerLine|0,we=ce%W.blocksPerLine;W.blocks[oe]===void 0&&Y.tolerantDecoding||re(W,W.blocks[oe][we])}var O=E.length,V,G,z,X,P,H;ee?y===0?H=C===0?Q:he:H=C===0?_e:ve:H=ae;var j=0,Z,L;O==1?L=E[0].blocksPerLine*E[0].blocksPerColumn:L=K*I.mcusPerColumn,T||(T=L);for(var ne,se;j<L;){for(G=0;G<O;G++)E[G].pred=0;if(pe=0,O==1)for(V=E[0],P=0;P<T;P++)D(V,H,j),j++;else for(P=0;P<T;P++){for(G=0;G<O;G++)for(V=E[G],ne=V.h,se=V.v,z=0;z<se;z++)for(X=0;X<ne;X++)R(V,H,j,z,X);if(j++,j===L)break}if(j===L)do{if(S[B]===255&&S[B+1]!==0)break;B+=1}while(B<S.length-2);if(ue=0,Z=S[B]<<8|S[B+1],Z<65280)throw new Error("marker was not found");if(Z>=65488&&Z<=65495)B+=2;else break}return B-te}function M(S,B){var I=[],E=B.blocksPerLine,T=B.blocksPerColumn,y=E<<3,k=new Int32Array(64),C=new Uint8Array(64);function F(de,ie,ae){var Q=B.quantizationTable,he,pe,_e,xe,ye,ve,R,D,O,V=ae,G;for(G=0;G<64;G++)V[G]=de[G]*Q[G];for(G=0;G<8;++G){var z=8*G;if(V[1+z]==0&&V[2+z]==0&&V[3+z]==0&&V[4+z]==0&&V[5+z]==0&&V[6+z]==0&&V[7+z]==0){O=d*V[0+z]+512>>10,V[0+z]=O,V[1+z]=O,V[2+z]=O,V[3+z]=O,V[4+z]=O,V[5+z]=O,V[6+z]=O,V[7+z]=O;continue}he=d*V[0+z]+128>>8,pe=d*V[4+z]+128>>8,_e=V[2+z],xe=V[6+z],ye=g*(V[1+z]-V[7+z])+128>>8,D=g*(V[1+z]+V[7+z])+128>>8,ve=V[3+z]<<4,R=V[5+z]<<4,O=he-pe+1>>1,he=he+pe+1>>1,pe=O,O=_e*f+xe*c+128>>8,_e=_e*c-xe*f+128>>8,xe=O,O=ye-R+1>>1,ye=ye+R+1>>1,R=O,O=D+ve+1>>1,ve=D-ve+1>>1,D=O,O=he-xe+1>>1,he=he+xe+1>>1,xe=O,O=pe-_e+1>>1,pe=pe+_e+1>>1,_e=O,O=ye*u+D*l+2048>>12,ye=ye*l-D*u+2048>>12,D=O,O=ve*s+R*a+2048>>12,ve=ve*a-R*s+2048>>12,R=O,V[0+z]=he+D,V[7+z]=he-D,V[1+z]=pe+R,V[6+z]=pe-R,V[2+z]=_e+ve,V[5+z]=_e-ve,V[3+z]=xe+ye,V[4+z]=xe-ye}for(G=0;G<8;++G){var X=G;if(V[8+X]==0&&V[16+X]==0&&V[24+X]==0&&V[32+X]==0&&V[40+X]==0&&V[48+X]==0&&V[56+X]==0){O=d*ae[G+0]+8192>>14,V[0+X]=O,V[8+X]=O,V[16+X]=O,V[24+X]=O,V[32+X]=O,V[40+X]=O,V[48+X]=O,V[56+X]=O;continue}he=d*V[0+X]+2048>>12,pe=d*V[32+X]+2048>>12,_e=V[16+X],xe=V[48+X],ye=g*(V[8+X]-V[56+X])+2048>>12,D=g*(V[8+X]+V[56+X])+2048>>12,ve=V[24+X],R=V[40+X],O=he-pe+1>>1,he=he+pe+1>>1,pe=O,O=_e*f+xe*c+2048>>12,_e=_e*c-xe*f+2048>>12,xe=O,O=ye-R+1>>1,ye=ye+R+1>>1,R=O,O=D+ve+1>>1,ve=D-ve+1>>1,D=O,O=he-xe+1>>1,he=he+xe+1>>1,xe=O,O=pe-_e+1>>1,pe=pe+_e+1>>1,_e=O,O=ye*u+D*l+2048>>12,ye=ye*l-D*u+2048>>12,D=O,O=ve*s+R*a+2048>>12,ve=ve*a-R*s+2048>>12,R=O,V[0+X]=he+D,V[56+X]=he-D,V[8+X]=pe+R,V[48+X]=pe-R,V[16+X]=_e+ve,V[40+X]=_e-ve,V[24+X]=xe+ye,V[32+X]=xe-ye}for(G=0;G<64;++G){var P=128+(V[G]+8>>4);ie[G]=P<0?0:P>255?255:P}}_(y*T*8);for(var Y,K,ee=0;ee<T;ee++){var te=ee<<3;for(Y=0;Y<8;Y++)I.push(new Uint8Array(y));for(var q=0;q<E;q++){F(B.blocks[ee][q],C,k);var ue=0,le=q<<3;for(K=0;K<8;K++){var ge=I[te+K];for(Y=0;Y<8;Y++)ge[le+Y]=C[ue++]}}}return I}function b(S){return S<0?0:S>255?255:S}m.prototype={load:function(B){var I=new XMLHttpRequest;I.open("GET",B,!0),I.responseType="arraybuffer",I.onload=(function(){var E=new Uint8Array(I.response||I.mozResponseArrayBuffer);this.parse(E),this.onload&&this.onload()}).bind(this),I.send(null)},parse:function(B){var I=this.opts.maxResolutionInMP*1e3*1e3,E=0;B.length;function T(){var be=B[E]<<8|B[E+1];return E+=2,be}function y(){var be=T(),Ee=B.subarray(E,E+be-2);return E+=Ee.length,Ee}function k(be){var Ee=1,Se=1,Ae,ke;for(ke in be.components)be.components.hasOwnProperty(ke)&&(Ae=be.components[ke],Ee<Ae.h&&(Ee=Ae.h),Se<Ae.v&&(Se=Ae.v));var Ce=Math.ceil(be.samplesPerLine/8/Ee),Oe=Math.ceil(be.scanLines/8/Se);for(ke in be.components)if(be.components.hasOwnProperty(ke)){Ae=be.components[ke];var Xe=Math.ceil(Math.ceil(be.samplesPerLine/8)*Ae.h/Ee),qe=Math.ceil(Math.ceil(be.scanLines/8)*Ae.v/Se),Ve=Ce*Ae.h,Ge=Oe*Ae.v,Ue=Ge*Ve,Le=[];_(Ue*256);for(var ze=0;ze<Ge;ze++){for(var Ke=[],$=0;$<Ve;$++)Ke.push(new Int32Array(64));Le.push(Ke)}Ae.blocksPerLine=Xe,Ae.blocksPerColumn=qe,Ae.blocks=Le}be.maxH=Ee,be.maxV=Se,be.mcusPerLine=Ce,be.mcusPerColumn=Oe}var C=null,F=null,Y,K,ee=[],te=[],q=[],ue=[],le=T(),ge=-1;if(this.comments=[],le!=65496)throw new Error("SOI not found");for(le=T();le!=65497;){var de,ie;switch(le){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ae=y();if(le===65534){var Q=String.fromCharCode.apply(null,ae);this.comments.push(Q)}le===65504&&ae[0]===74&&ae[1]===70&&ae[2]===73&&ae[3]===70&&ae[4]===0&&(C={version:{major:ae[5],minor:ae[6]},densityUnits:ae[7],xDensity:ae[8]<<8|ae[9],yDensity:ae[10]<<8|ae[11],thumbWidth:ae[12],thumbHeight:ae[13],thumbData:ae.subarray(14,14+3*ae[12]*ae[13])}),le===65505&&ae[0]===69&&ae[1]===120&&ae[2]===105&&ae[3]===102&&ae[4]===0&&(this.exifBuffer=ae.subarray(5,ae.length)),le===65518&&ae[0]===65&&ae[1]===100&&ae[2]===111&&ae[3]===98&&ae[4]===101&&ae[5]===0&&(F={version:ae[6],flags0:ae[7]<<8|ae[8],flags1:ae[9]<<8|ae[10],transformCode:ae[11]});break;case 65499:for(var he=T(),pe=he+E-2;E<pe;){var _e=B[E++];_(256);var xe=new Int32Array(64);if(_e>>4)if(_e>>4===1)for(ie=0;ie<64;ie++){var ye=o[ie];xe[ye]=T()}else throw new Error("DQT: invalid table spec");else for(ie=0;ie<64;ie++){var ye=o[ie];xe[ye]=B[E++]}ee[_e&15]=xe}break;case 65472:case 65473:case 65474:T(),Y={},Y.extended=le===65473,Y.progressive=le===65474,Y.precision=B[E++],Y.scanLines=T(),Y.samplesPerLine=T(),Y.components={},Y.componentsOrder=[];var ve=Y.scanLines*Y.samplesPerLine;if(ve>I){var R=Math.ceil((ve-I)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${R}MP`)}var D=B[E++],O;for(de=0;de<D;de++){O=B[E];var V=B[E+1]>>4,G=B[E+1]&15,z=B[E+2];if(V<=0||G<=0)throw new Error("Invalid sampling factor, expected values above 0");Y.componentsOrder.push(O),Y.components[O]={h:V,v:G,quantizationIdx:z},E+=3}k(Y),te.push(Y);break;case 65476:var X=T();for(de=2;de<X;){var P=B[E++],H=new Uint8Array(16),j=0;for(ie=0;ie<16;ie++,E++)j+=H[ie]=B[E];_(16+j);var Z=new Uint8Array(j);for(ie=0;ie<j;ie++,E++)Z[ie]=B[E];de+=17+j,(P>>4?q:ue)[P&15]=x(H,Z)}break;case 65501:T(),K=T();break;case 65500:T(),T();break;case 65498:T();var L=B[E++],ne=[],se;for(de=0;de<L;de++){se=Y.components[B[E++]];var W=B[E++];se.huffmanTableDC=ue[W>>4],se.huffmanTableAC=q[W&15],ne.push(se)}var re=B[E++],ce=B[E++],oe=B[E++],we=w(B,E,Y,ne,K,re,ce,oe>>4,oe&15,this.opts);E+=we;break;case 65535:B[E]!==255&&E--;break;default:if(B[E-3]==255&&B[E-2]>=192&&B[E-2]<=254){E-=3;break}else if(le===224||le==225){if(ge!==-1)throw new Error(`first unknown JPEG marker at offset ${ge.toString(16)}, second unknown JPEG marker ${le.toString(16)} at offset ${(E-1).toString(16)}`);ge=E-1;const be=T();if(B[E+be-2]===255){E+=be-2;break}}throw new Error("unknown JPEG marker "+le.toString(16))}le=T()}if(te.length!=1)throw new Error("only single frame JPEGs supported");for(var de=0;de<te.length;de++){var Me=te[de].components;for(var ie in Me)Me[ie].quantizationTable=ee[Me[ie].quantizationIdx],delete Me[ie].quantizationIdx}this.width=Y.samplesPerLine,this.height=Y.scanLines,this.jfif=C,this.adobe=F,this.components=[];for(var de=0;de<Y.componentsOrder.length;de++){var se=Y.components[Y.componentsOrder[de]];this.components.push({lines:M(Y,se),scaleX:se.h/Y.maxH,scaleY:se.v/Y.maxV})}},getData:function(B,I){var E=this.width/B,T=this.height/I,y,k,C,F,Y,K,ee,te,q,ue,le=0,ge,de,ie,ae,Q,he,pe,_e,xe,ye,ve,R=B*I*this.components.length;_(R);var D=new Uint8Array(R);switch(this.components.length){case 1:for(y=this.components[0],ue=0;ue<I;ue++)for(Y=y.lines[0|ue*y.scaleY*T],q=0;q<B;q++)ge=Y[0|q*y.scaleX*E],D[le++]=ge;break;case 2:for(y=this.components[0],k=this.components[1],ue=0;ue<I;ue++)for(Y=y.lines[0|ue*y.scaleY*T],K=k.lines[0|ue*k.scaleY*T],q=0;q<B;q++)ge=Y[0|q*y.scaleX*E],D[le++]=ge,ge=K[0|q*k.scaleX*E],D[le++]=ge;break;case 3:for(ve=!0,this.adobe&&this.adobe.transformCode?ve=!0:typeof this.opts.colorTransform<"u"&&(ve=!!this.opts.colorTransform),y=this.components[0],k=this.components[1],C=this.components[2],ue=0;ue<I;ue++)for(Y=y.lines[0|ue*y.scaleY*T],K=k.lines[0|ue*k.scaleY*T],ee=C.lines[0|ue*C.scaleY*T],q=0;q<B;q++)ve?(ge=Y[0|q*y.scaleX*E],de=K[0|q*k.scaleX*E],ie=ee[0|q*C.scaleX*E],_e=b(ge+1.402*(ie-128)),xe=b(ge-.3441363*(de-128)-.71413636*(ie-128)),ye=b(ge+1.772*(de-128))):(_e=Y[0|q*y.scaleX*E],xe=K[0|q*k.scaleX*E],ye=ee[0|q*C.scaleX*E]),D[le++]=_e,D[le++]=xe,D[le++]=ye;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(ve=!1,this.adobe&&this.adobe.transformCode?ve=!0:typeof this.opts.colorTransform<"u"&&(ve=!!this.opts.colorTransform),y=this.components[0],k=this.components[1],C=this.components[2],F=this.components[3],ue=0;ue<I;ue++)for(Y=y.lines[0|ue*y.scaleY*T],K=k.lines[0|ue*k.scaleY*T],ee=C.lines[0|ue*C.scaleY*T],te=F.lines[0|ue*F.scaleY*T],q=0;q<B;q++)ve?(ge=Y[0|q*y.scaleX*E],de=K[0|q*k.scaleX*E],ie=ee[0|q*C.scaleX*E],ae=te[0|q*F.scaleX*E],Q=255-b(ge+1.402*(ie-128)),he=255-b(ge-.3441363*(de-128)-.71413636*(ie-128)),pe=255-b(ge+1.772*(de-128))):(Q=Y[0|q*y.scaleX*E],he=K[0|q*k.scaleX*E],pe=ee[0|q*C.scaleX*E],ae=te[0|q*F.scaleX*E]),D[le++]=255-Q,D[le++]=255-he,D[le++]=255-pe,D[le++]=255-ae;break;default:throw new Error("Unsupported color mode")}return D},copyToImageData:function(B,I){var E=B.width,T=B.height,y=B.data,k=this.getData(E,T),C=0,F=0,Y,K,ee,te,q,ue,le,ge,de;switch(this.components.length){case 1:for(K=0;K<T;K++)for(Y=0;Y<E;Y++)ee=k[C++],y[F++]=ee,y[F++]=ee,y[F++]=ee,I&&(y[F++]=255);break;case 3:for(K=0;K<T;K++)for(Y=0;Y<E;Y++)le=k[C++],ge=k[C++],de=k[C++],y[F++]=le,y[F++]=ge,y[F++]=de,I&&(y[F++]=255);break;case 4:for(K=0;K<T;K++)for(Y=0;Y<E;Y++)q=k[C++],ue=k[C++],ee=k[C++],te=k[C++],le=255-b(q*(1-te/255)+te),ge=255-b(ue*(1-te/255)+te),de=255-b(ee*(1-te/255)+te),y[F++]=le,y[F++]=ge,y[F++]=de,I&&(y[F++]=255);break;default:throw new Error("Unsupported color mode")}}};var A=0,v=0;function _(S=0){var B=A+S;if(B>v){var I=Math.ceil((B-v)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${I}MB`)}A=B}return m.resetMaxMemoryUsage=function(S){A=0,v=S},m.getBytesAllocated=function(){return A},m.requestMemoryAllocation=_,m}();e.exports=r;function r(n,o={}){var a={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},s={...a,...o},l=new Uint8Array(n),u=new t;u.opts=s,t.resetMaxMemoryUsage(s.maxMemoryUsageInMB*1024*1024),u.parse(l);var c=s.formatAsRGBA?4:3,f=u.width*u.height*c;try{t.requestMemoryAllocation(f);var d={width:u.width,height:u.height,exifBuffer:u.exifBuffer,data:s.useTArray?new Uint8Array(f):Buffer.alloc(f)};u.comments.length>0&&(d.comments=u.comments)}catch(g){throw g instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+f):g instanceof ReferenceError&&g.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):g}return u.copyToImageData(d,s.formatAsRGBA),d}})(decoder);var decoderExports=decoder.exports,encode$1=encoderExports,decode$4=decoderExports,jpegJs={encode:encode$1,decode:decode$4};let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let e=0;e<chars.length;e++)lookup[chars.charCodeAt(e)]=e;function encode(e){let t,r=e.length,n="";for(t=0;t<r;t+=3)n+=chars[e[t]>>2],n+=chars[(e[t]&3)<<4|e[t+1]>>4],n+=chars[(e[t+1]&15)<<2|e[t+2]>>6],n+=chars[e[t+2]&63];return r%3===2?n=`${n.substring(0,n.length-1)}=`:r%3===1&&(n=`${n.substring(0,n.length-2)}==`),n}function decode$3(e){let t=e.length*.75,r=e.length,n=0,o,a,s,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new Uint8Array(t);for(let c=0;c<r;c+=4)o=lookup[e.charCodeAt(c)],a=lookup[e.charCodeAt(c+1)],s=lookup[e.charCodeAt(c+2)],l=lookup[e.charCodeAt(c+3)],u[n++]=o<<2|a>>4,u[n++]=(a&15)<<4|s>>2,u[n++]=(s&3)<<6|l&63;return u}function toBase64URL(e,t){const r=encode(e);return`data:${t};base64,${r}`}const ImageData=self.ImageData,DOMImage=self.Image;function createCanvas(e,t){let r=self.document.createElement("canvas");return r.width=e,r.height=t,r}function fetchBinary(e,{withCredentials:t=!1}={}){return new Promise(function(r,n){let o=new self.XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials=t,o.onload=function(a){this.status!==200?n(a):r(this.response)},o.onerror=n,o.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(e){return e.includes("/")||(e=`image/${e}`),e}function encodeJpeg(e,t={}){const r={width:e.width,height:e.height,data:e.getRGBAData()};return jpegJs.encode(r,t.quality).data}function encodePng(e,t){const r={width:e.width,height:e.height,channels:e.channels,depth:e.bitDepth,data:e.data};return(r.depth===1||r.depth===32)&&(r.depth=8,r.channels=4,r.data=e.getRGBAData()),encodePng$1(r,t)}const exportMethods={save(e,t={}){const{useCanvas:r=!1,encoder:n=void 0}=t;let{format:o}=t;if(!o){const a=/\.(?<format>[a-zA-Z]+)$/.exec(e);a&&(o=a.groups.format.toLowerCase())}if(!o)throw new Error("file format not provided");return new Promise((a,s)=>{let l,u;switch(o.toLowerCase()){case"png":{r?l=this.getCanvas().pngStream():u=encodePng(this,n);break}case"jpg":case"jpeg":r?l=this.getCanvas().jpegStream():u=encodeJpeg(this,n);break;case"bmp":u=encode$2(this,n);break;default:throw new RangeError(`invalid output format: ${o}`)}if(l){let c=createWriteStream();c.on("finish",a),c.on("error",s),l.pipe(c)}else u&&writeFile()})},toDataURL(e="image/png",t={}){typeof e=="object"&&(t=e,e="image/png");const{useCanvas:r=!1,encoder:n=void 0}=t;e=getType(e);function o(a,s){const l=a(s,n);return toBase64URL(l,e)}return e==="image/bmp"?o(encode$2,this):e==="image/png"&&!r?o(encodePng,this):e==="image/jpeg"&&!r?o(encodeJpeg,this):this.getCanvas().toDataURL(e)},toBuffer(e={}){const{format:t="png",encoder:r=void 0}=e;switch(t.toLowerCase()){case"png":return encodePng(this,r);case"jpeg":case"jpg":return encodeJpeg(this,r);case"bmp":return encode$2(this,r);default:throw new RangeError(`invalid output format: ${t}`)}},toBase64(e="image/png",t={}){if(t.async)return this.toDataURL(e,t).then(function(r){return r.substring(r.indexOf(",")+1)});{const r=this.toDataURL(e,t);return r.substring(r.indexOf(",")+1)}},toBlob(e="image/png",t=.8){return canvasToBlob(this.getCanvas(),e,t)},getCanvas(){const e=new ImageData(this.getRGBAData({clamped:!0}),this.width,this.height);let t=createCanvas(this.width,this.height);return t.getContext("2d").putImageData(e,0,0),t}};function setExportMethods(e){for(const t in exportMethods)e.prototype[t]=exportMethods[t]}var hasOwn$1={exports:{}};const name="has-own",version="1.0.1",description="A safer .hasOwnProperty() - hasOwn(name, obj)",main="index.js",scripts={test:"make test"},author="Aaron Heckmann <aaron.heckmann+github@gmail.com>",license="MIT",repository={type:"git",url:"git://github.com/aheckmann/has-own.git"},homepage="https://github.com/aheckmann/has-own/",devDependencies={mocha:"^6.2.2"},require$$0$3={name,version,description,main,scripts,author,license,repository,homepage,devDependencies};(function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=t=function(o,a){return r.call(a,o)},t.version=require$$0$3.version})(hasOwn$1,hasOwn$1.exports);var hasOwnExports=hasOwn$1.exports;const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(e,t,r={}){let{inPlace:n=!1,returnThis:o=!0,partialArgs:a=[]}=r;return n?Image.prototype[e]=function(...s){this.computed=null;let l=t.apply(this,[...a,...s]);return o?this:l}:Image.prototype[e]=function(...s){return t.apply(this,[...a,...s])},Image}function extendProperty(e,t,r={}){let{partialArgs:n=[]}=r;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(e,this.computed))return this.computed[e];let o=t.apply(this,n);return this.computed[e]=o,o},Object.defineProperty(Image.prototype,e,computedPropertyDescriptor$1),Image}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(e={}){const{clamped:t}=e;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const r=this.width*this.height*4;let n=t?new Uint8ClampedArray(r):new Uint8Array(r);return this.bitDepth===1?fillDataFromBinary(this,n):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,n):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,n))):this.components===1?fillDataFromGrey(this,n):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,n)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,n)):fillAlpha(this,n),n}function fillDataFromBinary(e,t){for(let r=0;r<e.size;r++){const n=e.getBit(r);t[r*4]=n*255,t[r*4+1]=n*255,t[r*4+2]=n*255}}function fillDataFromGrey32(e,t){const r=e.min[0],o=e.max[0]-r;for(let a=0;a<e.size;a++){const s=Math.floor(255*(e.data[a]-r)/o);t[a*4]=s,t[a*4+1]=s,t[a*4+2]=s}}function fillDataFromRGB32(e,t){const r=Math.min(...e.min),o=Math.max(...e.max)-r;for(let a=0;a<e.size;a++){const s=Math.floor(255*(e.data[a*3]-r)/o),l=Math.floor(255*(e.data[a*3+1]-r)/o),u=Math.floor(255*(e.data[a*3+2]-r)/o);t[a*4]=s,t[a*4+1]=l,t[a*4+2]=u}}function fillDataFromGrey(e,t){for(let r=0;r<e.size;r++)t[r*4]=e.data[r*e.channels]>>>e.bitDepth-8,t[r*4+1]=e.data[r*e.channels]>>>e.bitDepth-8,t[r*4+2]=e.data[r*e.channels]>>>e.bitDepth-8}function fillDataFromRGB(e,t){for(let r=0;r<e.size;r++)t[r*4]=e.data[r*e.channels]>>>e.bitDepth-8,t[r*4+1]=e.data[r*e.channels+1]>>>e.bitDepth-8,t[r*4+2]=e.data[r*e.channels+2]>>>e.bitDepth-8}function copyAlpha(e,t){for(let r=0;r<e.size;r++)t[r*4+3]=e.data[r*e.channels+e.components]>>e.bitDepth-8}function fillAlpha(e,t){for(let r=0;r<e.size;r++)t[r*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(e){const t=kinds[e];if(!t)throw new RangeError(`invalid image kind: ${e}`);return t}const validBitDepth=[1,8,16,32];function verifyKindDefinition(e){const{components:t,alpha:r,bitDepth:n,colorModel:o}=e;if(!Number.isInteger(t)||t<=0)throw new RangeError(`invalid components: ${t}. Must be a positive integer`);if(r!==0&&r!==1&&typeof r!="boolean")throw new TypeError(`invalid alpha: ${r}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(n))throw new RangeError(`invalid bitDepth: ${n}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[o])throw new RangeError(`invalid colorModel: ${o}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(e,t,r){let n=t*e;return r===1&&(n=Math.ceil(n/8)),n}function createPixelArray(e,t,r,n,o,a){const s=n*e;let l;switch(o){case 1:l=new Uint8Array(Math.ceil(s/8));break;case 8:l=new Uint8Array(s);break;case 16:l=new Uint16Array(s);break;case 32:l=new Float32Array(s);break;default:throw new Error(`Cannot create pixel array for bit depth ${o}`)}if(r)for(let u=t;u<l.length;u+=n)l[u]=a;return l}const defaultByteLength=1024*8,charArray=[];let IOBuffer$2=class{constructor(t,r){r=r||{},t===void 0&&(t=defaultByteLength),typeof t=="number"&&(t=new ArrayBuffer(t));let n=t.byteLength;const o=r.offset?r.offset>>>0:0;t.buffer&&(n=t.byteLength-o,t.byteLength!==t.buffer.byteLength?t=t.buffer.slice(t.byteOffset+o,t.byteOffset+t.byteLength):o?t=t.buffer.slice(o):t=t.buffer),this.buffer=t,this.length=n,this.byteLength=n,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=n||defaultByteLength,this._mark=0}available(t){return t===void 0&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(t){t===void 0&&(t=1),this.offset+=t}seek(t){this.offset=t}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(t){if(t===void 0&&(t=1),!this.available(t)){const r=this._increment+this._increment;this._increment=r;const n=this.length+r,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){t===void 0&&(t=1);for(var r=new Uint8Array(t),n=0;n<t;n++)r[n]=this.readByte();return r}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){t===void 0&&(t=1),charArray.length=t;for(var r=0;r<t;r++)charArray[r]=this.readChar();return charArray.join("")}writeBoolean(t){this.writeUint8(t?255:0)}writeInt8(t){this.ensureAvailable(1),this._data.setInt8(this.offset++,t)}writeUint8(t){this.ensureAvailable(1),this._data.setUint8(this.offset++,t)}writeByte(t){this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r])}writeInt16(t){this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2}writeUint16(t){this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2}writeInt32(t){this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4}writeUint32(t){this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat32(t){this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat64(t){this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8}writeChar(t){this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}};var IOBuffer_1=IOBuffer$2,src$3={};const tagsById$5={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName$5={};for(var i$2 in tagsById$5)tagsByName$5[tagsById$5[i$2]]=i$2;var standard$1={tagsById:tagsById$5,tagsByName:tagsByName$5};const tagsById$4={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$4={};for(var i$1 in tagsById$4)tagsByName$4[tagsById$4[i$1]]=i$1;var exif$1={tagsById:tagsById$4,tagsByName:tagsByName$4};const tagsById$3={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$3={};for(var i in tagsById$3)tagsByName$3[tagsById$3[i]]=i;var gps$1={tagsById:tagsById$3,tagsByName:tagsByName$3};const tags$1={standard:standard$1,exif:exif$1,gps:gps$1};let IFD$2=class{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(t){if(typeof t=="number")return this.fields.get(t);if(typeof t=="string")return this.fields.get(tags$1[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const r=tags$1[this.kind].tagsById;for(var t of this.fields.keys())r[t]&&(this._map[r[t]]=this.fields.get(t))}return this._map}};var ifd=IFD$2;const Ifd=ifd,dateTimeRegex$1=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;let TiffIfd$1=class extends Ifd{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var t=new Date,r=dateTimeRegex$1.exec(this.dateTime);return t.setFullYear(r[1],r[2]-1,r[3]),t.setHours(r[4],r[5],r[6]),t}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return alwaysArray$1(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return alwaysArray$1(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}};function alwaysArray$1(e){return typeof e=="number"?[e]:e}var tiffIfd=TiffIfd$1,ifdValue={},types$1=new Map([[1,[1,readByte$1]],[2,[1,readASCII$1]],[3,[2,readShort$1]],[4,[4,readLong$1]],[5,[8,readRational$1]],[6,[1,readSByte$1]],[7,[1,readByte$1]],[8,[2,readSShort$1]],[9,[4,readSLong$1]],[10,[8,readSRational$1]],[11,[4,readFloat$1]],[12,[8,readDouble$1]]]);ifdValue.getByteLength=function(e,t){return types$1.get(e)[0]*t};ifdValue.readData=function(e,t,r){return types$1.get(t)[1](e,r)};function readByte$1(e,t){if(t===1)return e.readUint8();for(var r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.readUint8();return r}function readASCII$1(e,t){for(var r=[],n="",o=0;o<t;o++){var a=String.fromCharCode(e.readUint8());a==="\0"?(r.push(n),n=""):n+=a}return r.length===1?r[0]:r}function readShort$1(e,t){if(t===1)return e.readUint16();for(var r=new Uint16Array(t),n=0;n<t;n++)r[n]=e.readUint16();return r}function readLong$1(e,t){if(t===1)return e.readUint32();for(var r=new Uint32Array(t),n=0;n<t;n++)r[n]=e.readUint32();return r}function readRational$1(e,t){if(t===1)return e.readUint32()/e.readUint32();for(var r=new Array(t),n=0;n<t;n++)r[n]=e.readUint32()/e.readUint32();return r}function readSByte$1(e,t){if(t===1)return e.readInt8();for(var r=new Int8Array(t),n=0;n<t;n++)r[n]=e.readInt8();return r}function readSShort$1(e,t){if(t===1)return e.readInt16();for(var r=new Int16Array(t),n=0;n<t;n++)r[n]=e.readInt16();return r}function readSLong$1(e,t){if(t===1)return e.readInt32();for(var r=new Int32Array(t),n=0;n<t;n++)r[n]=e.readInt32();return r}function readSRational$1(e,t){if(t===1)return e.readInt32()/e.readInt32();for(var r=new Array(t),n=0;n<t;n++)r[n]=e.readInt32()/e.readInt32();return r}function readFloat$1(e,t){if(t===1)return e.readFloat32();for(var r=new Float32Array(t),n=0;n<t;n++)r[n]=e.readFloat32();return r}function readDouble$1(e,t){if(t===1)return e.readFloat64();for(var r=new Float64Array(t),n=0;n<t;n++)r[n]=e.readFloat64();return r}const IOBuffer$1=IOBuffer_1,IFD$1=ifd,TiffIFD=tiffIfd,IFDValue=ifdValue,defaultOptions$d={ignoreImageData:!1,onlyFirst:!1};let TIFFDecoder$2=class extends IOBuffer$1{constructor(t,r){super(t,r),this._nextIFD=0}decode(t){t=Object.assign({},defaultOptions$d,t);const r=[];for(this.decodeHeader();this._nextIFD;)if(r.push(this.decodeIFD(t)),t.onlyFirst)return r[0];return r}decodeHeader(){let t=this.readUint16();if(t===18761)this.setLittleEndian();else if(t===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+t.toString(16));if(t=this.readUint16(),t!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t){this.seek(this._nextIFD);var r;t.kind?r=new IFD$1(t.kind):r=new TiffIFD;const n=this.readUint16();for(var o=0;o<n;o++)this.decodeIFDEntry(r);return t.ignoreImageData||this.decodeImageData(r),this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const r=this.offset,n=this.readUint16(),o=this.readUint16(),a=this.readUint32();if(o<1||o>12){this.skip(4);return}IFDValue.getByteLength(o,a)>4&&this.seek(this.readUint32());const l=IFDValue.readData(this,o,a);if(t.fields.set(n,l),n===34665||n===34853){let u=this.offset,c;n===34665?c="exif":n===34853&&(c="gps"),this._nextIFD=l,t[c]=this.decodeIFD({kind:c,ignoreImageData:!0}),this.offset=u}this.seek(r),this.skip(12)}decodeImageData(t){const r=t.orientation;switch(r&&r!==1&&unsupported$1("orientation",r),t.type){case 1:case 2:this.readStripData(t);break;default:unsupported$1("image type",t.type);break}}readStripData(t){const r=t.width,n=t.height,o=validateBitDepth(t.bitsPerSample),a=t.sampleFormat;let s=r*n;const l=getDataArray$1(s,1,o,a),u=t.compression,f=t.rowsPerStrip*r,d=t.stripOffsets,g=t.stripByteCounts;for(var m=0,x=0;x<d.length;x++){var w=this.getStripData(u,d[x],g[x]),M=s>f?f:s;s-=M,o===8?m=fill8bit$1(l,w,m,M):o===16?m=fill16bit$1(l,w,m,M,this.isLittleEndian()):o===32&&a===3?m=fillFloat32$1(l,w,m,M,this.isLittleEndian()):unsupported$1("bitDepth",o)}t.data=l}getStripData(t,r,n){switch(t){case 1:return new DataView(this.buffer,r,n);case 2:case 32773:return unsupported$1("Compression",t);default:throw new Error("invalid compression: "+t)}}};var tiffDecoder=TIFFDecoder$2;function getDataArray$1(e,t,r,n){return r===8?new Uint8Array(e*t):r===16?new Uint16Array(e*t):r===32&&n===3?new Float32Array(e*t):unsupported$1("bit depth / sample format",r+" / "+n)}function fill8bit$1(e,t,r,n){for(var o=0;o<n;o++)e[r++]=t.getUint8(o);return r}function fill16bit$1(e,t,r,n,o){for(var a=0;a<n*2;a+=2)e[r++]=t.getUint16(a,o);return r}function fillFloat32$1(e,t,r,n,o){for(var a=0;a<n*4;a+=4)e[r++]=t.getFloat32(a,o);return r}function unsupported$1(e,t){throw new Error("Unsupported "+e+": "+t)}function validateBitDepth(e){if(e.length){const r=e;e=r[0];for(var t=0;t<r.length;t++)r[t]!==e&&unsupported$1("bit depth",r)}return e}const TIFFDecoder$1=tiffDecoder;var decode$2=function(t,r){return new TIFFDecoder$1(t,r).decode(r)};src$3.decode=decode$2;const IOBuffer=IOBuffer_1,tiff=src$3;function decode$1(e){const t=new IOBuffer(e),r={};if(t.setBigEndian(),t.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(t.readUint16()===65505){t.readUint16();const a=t.readBytes(6);if(a[0]===69&&a[1]===120&&a[2]===105&&a[3]===102&&a[4]===0&&a[5]===0){const s=tiff.decode(t,{onlyFirst:!0,ignoreImageData:!0,offset:t.offset});r.exif=s}}return r}var decode_1=decode$1,decode=decode_1,imageType$2={exports:{}},fileType$1={exports:{}};(function(module){const toBytes=e=>[...e].map(t=>t.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(e,t=0){let r=e[t],n=1,o=0;for(;++o<8;)n*=256,r+=e[t+o]*n;return r}const fileType=e=>{if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Uint8Array?e:new Uint8Array(e);if(!(t&&t.length>1))return null;const r=(o,a)=>{a=Object.assign({offset:0},a);for(let s=0;s<o.length;s++)if(a.mask){if(o[s]!==(a.mask[s]&t[s+a.offset]))return!1}else if(o[s]!==t[s+a.offset])return!1;return!0},n=(o,a)=>r(toBytes(o),a);if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(r([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((r([73,73,42,0])||r([77,77,0,42]))&&r([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r([73,73,42,0])||r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r([80,75,3,4])){if(r([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(r(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(n("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(n("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(n("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const o=(u,c=0)=>u.findIndex((f,d,g)=>d>=c&&g[d]===80&&g[d+1]===75&&g[d+2]===3&&g[d+3]===4);let a=0,s=!1,l=null;do{const u=a+30;if(s||(s=r(oxmlContentTypes,{offset:u})||r(oxmlRels,{offset:u})),l||(n("word/",{offset:u})?l={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:n("ppt/",{offset:u})?l={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:n("xl/",{offset:u})&&(l={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s&&l)return l;a=o(t,u)}while(a>=0);if(l)return l}if(r([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(r([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(r([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([51,103,112,53])||r([0,0,0])&&r([102,116,121,112],{offset:4})&&(r([109,112,52,49],{offset:8})||r([109,112,52,50],{offset:8})||r([105,115,111,109],{offset:8})||r([105,115,111,50],{offset:8})||r([109,109,112,52],{offset:8})||r([77,52,86],{offset:8})||r([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(r([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(r([26,69,223,163])){const o=t.subarray(4,4100),a=o.findIndex((s,l,u)=>u[l]===66&&u[l+1]===130);if(a!==-1){const s=a+3,l=u=>[...u].every((c,f)=>o[s+f]===c.charCodeAt(0));if(l("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(l("webm"))return{ext:"webm",mime:"video/webm"}}}if(r([0,0,0,20,102,116,121,112,113,116,32,32])||r([102,114,101,101],{offset:4})||r([102,116,121,112,113,116,32,32],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r([48,38,178,117,142,102,207,17,166,217])){let o=30;do{const a=readUInt64LE(t,o+16);if(r([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:o})){if(r([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:o+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(r([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:o+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}o+=a}while(o+24<=t.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let o=0;o<2&&o<t.length-16;o++){if(r([73,68,51],{offset:o})||r([255,226],{offset:o,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([255,228],{offset:o,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,248],{offset:o,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([255,240],{offset:o,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(r([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(r([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(r([79,103,103,83]))return r([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:r([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:r([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:r([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:r([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(r([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(r([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(r([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(r([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(r([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((t[0]===67||t[0]===70)&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([119,79,70,70])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(r([119,79,70,50])&&(r([0,1,0,0],{offset:4})||r([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r([37,33]))return{ext:"ps",mime:"application/postscript"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r([77,83,67,70])||r([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(r([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(r([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r([0,0,0,12,106,80,32,32,13,10,135,10])){if(r([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(r([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(r([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(r([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(r([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([102,116,121,112],{offset:4})){if(r([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(r([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(r([104,101,105,99],{offset:8})||r([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(r([104,101,118,99],{offset:8})||r([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return r([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:r([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:r([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:r([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:r([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:r([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:r([212,195,178,161])||r([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const e=new stream.PassThrough,t=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{e.fileType=fileType(t)}catch(r){reject(r)}readableStream.unshift(t),stream.pipeline?resolve(stream.pipeline(readableStream,e,()=>{})):resolve(readableStream.pipe(e))})})})(fileType$1);var fileTypeExports=fileType$1.exports;const fileType=fileTypeExports,imageExts=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),imageType=e=>{const t=fileType(e);return imageExts.has(t&&t.ext)?t:null};imageType$2.exports=imageType;imageType$2.exports.default=imageType;Object.defineProperty(imageType,"minimumBytes",{value:fileType.minimumBytes});var imageTypeExports=imageType$2.exports;const imageType$1=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(e){if(e.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const t=e.rowsPerStrip*e.width*e.samplesPerPixel*(e.bitsPerSample/8);return new Array(e.stripOffsets.length).fill(t)}function applyHorizontalDifferencing8Bit(e,t,r){let n=0;for(;n<e.length;){for(let o=r;o<t*r;o+=r)for(let a=0;a<r;a++)e[n+o+a]=e[n+o+a]+e[n+o-(r-a)]&255;n+=t*r}}function applyHorizontalDifferencing16Bit(e,t,r){let n=0;for(;n<e.length;){for(let o=r;o<t*r;o+=r)for(let a=0;a<r;a++)e[n+o+a]=e[n+o+a]+e[n+o-(r-a)]&65535;n+=t*r}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let e in tagsById$2)tagsByName$2[tagsById$2[e]]=Number(e);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let e in tagsById$1)tagsByName$1[tagsById$1[e]]=Number(e);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let e in tagsById)tagsByName[tagsById[e]]=Number(e);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if(typeof t=="number")return this.fields.get(t);if(typeof t=="string")return this.fields.get(tags[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=tags[this.kind].tagsById;for(let r of this.fields.keys())t[r]&&(this._map[t[r]]=this.fields.get(r));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(e,t){const r=types.get(e);if(!r)throw new Error(`type not found: ${e}`);return r[0]*t}function readData(e,t,r){const n=types.get(t);if(!n)throw new Error(`type not found: ${t}`);return n[1](e,r)}function readByte(e,t){if(t===1)return e.readUint8();let r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.readUint8();return r}function readASCII(e,t){let r=[],n="";for(let o=0;o<t;o++){let a=String.fromCharCode(e.readUint8());a==="\0"?(r.push(n),n=""):n+=a}return r.length===1?r[0]:r}function readShort(e,t){if(t===1)return e.readUint16();let r=new Uint16Array(t);for(let n=0;n<t;n++)r[n]=e.readUint16();return r}function readLong(e,t){if(t===1)return e.readUint32();let r=new Uint32Array(t);for(let n=0;n<t;n++)r[n]=e.readUint32();return r}function readRational(e,t){if(t===1)return e.readUint32()/e.readUint32();let r=new Array(t);for(let n=0;n<t;n++)r[n]=e.readUint32()/e.readUint32();return r}function readSByte(e,t){if(t===1)return e.readInt8();let r=new Int8Array(t);for(let n=0;n<t;n++)r[n]=e.readInt8();return r}function readSShort(e,t){if(t===1)return e.readInt16();let r=new Int16Array(t);for(let n=0;n<t;n++)r[n]=e.readInt16();return r}function readSLong(e,t){if(t===1)return e.readInt32();let r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=e.readInt32();return r}function readSRational(e,t){if(t===1)return e.readInt32()/e.readInt32();let r=new Array(t);for(let n=0;n<t;n++)r[n]=e.readInt32()/e.readInt32();return r}function readFloat(e,t){if(t===1)return e.readFloat32();let r=new Float32Array(t);for(let n=0;n<t;n++)r[n]=e.readFloat32();return r}function readDouble(e,t){if(t===1)return e.readFloat64();let r=new Float64Array(t);for(let n=0;n<t;n++)r[n]=e.readFloat64();return r}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let t=0;t<256;t++)stringTable.push([t]);const e=[];for(let t=256;t<4096;t++)stringTable.push(e)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(t){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),this.outData=new IOBuffer$4(t.byteLength),this.initializeTable()}decode(){let t=0,r=0;for(;(t=this.getNextCode())!==EOI_CODE;)if(t===CLEAR_CODE){if(this.initializeTable(),t=this.getNextCode(),t===EOI_CODE)break;this.writeString(this.stringFromCode(t)),r=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(r).concat(this.stringFromCode(t)[0])),r=t;else{const o=this.stringFromCode(r).concat(this.stringFromCode(r)[0]);this.writeString(o),this.addStringToTable(o),r=t}const n=this.outData.toArray();return new DataView(n.buffer,n.byteOffset,n.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return stringTable[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){if(stringTable[this.tableLength++]=t,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const t=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:t}}function decompressLzw(e){return new LzwDecoder(e).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let t=new Date,r=dateTimeRegex.exec(this.dateTime);if(r===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(r[1]),Number(r[2])-1,Number(r[3])),t.setHours(Number(r[4]),Number(r[5]),Number(r[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&typeof t!="number"?t[0]:t}get alpha(){const t=this.extraSamples;return t?t[0]!==0:!1}get associatedAlpha(){const t=this.extraSamples;return t?t[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,r=this.get("ColorMap");if(!r)return;if(r.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const n=[];for(let o=0;o<t;o++)n.push([r[o],r[o+t],r[o+2*t]]);return n}}function alwaysArray(e){return typeof e=="number"?[e]:e}function decompressZlib(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=inflate_1(t);return new DataView(r.buffer,r.byteOffset,r.byteLength)}const defaultOptions$c={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer$4{constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),t===2)return!0;if(t===1)return!1;throw unsupported("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw unsupported("ifdCount",t)}decode(t={}){t=Object.assign({},defaultOptions$c,t);const r=[];for(this.decodeHeader();this._nextIFD;)if(r.push(this.decodeIFD(t,!0)),t.onlyFirst)return[r[0]];return r}decodeHeader(){const t=this.readUint16();if(t===18761)this.setLittleEndian();else if(t===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${t.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,r){this.seek(this._nextIFD);let n;if(r)n=new TiffIfd;else{if(!t.kind)throw new Error("kind is missing");n=new IFD(t.kind)}const o=this.readUint16();for(let a=0;a<o;a++)this.decodeIFDEntry(n);if(!t.ignoreImageData){if(!(n instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(n)}return this._nextIFD=this.readUint32(),n}decodeIFDEntry(t){const r=this.offset,n=this.readUint16(),o=this.readUint16(),a=this.readUint32();if(o<1||o>12){this.skip(4);return}getByteLength(o,a)>4&&this.seek(this.readUint32());const l=readData(this,o,a);if(t.fields.set(n,l),n===34665||n===34853){let u=this.offset,c="exif";n===34665?c="exif":n===34853&&(c="gps"),this._nextIFD=l,t[c]=this.decodeIFD({kind:c,ignoreImageData:!0},!1),this.offset=u}this.seek(r),this.skip(12)}decodeImageData(t){const r=t.orientation;if(r&&r!==1)throw unsupported("orientation",r);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw unsupported("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),t.type===0){const n=t.bitsPerSample,o=Math.pow(2,n)-1;for(let a=0;a<t.data.length;a++)t.data[a]=o-t.data[a]}}readStripData(t){const r=t.width,n=t.height,o=t.bitsPerSample,a=t.sampleFormat,s=r*n*t.samplesPerPixel,l=getDataArray(s,o,a),c=t.rowsPerStrip*r*t.samplesPerPixel,f=t.stripOffsets,d=t.stripByteCounts||guessStripByteCounts(t);let g=s,m=0;for(let x=0;x<f.length;x++){let w=new DataView(this.buffer,this.byteOffset+f[x],d[x]),M=g>c?c:g;g-=M;let b=w;switch(t.compression){case 1:break;case 5:{b=decompressLzw(w);break}case 8:{b=decompressZlib(w);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",t.compression)}m=this.fillUncompressed(o,a,l,b,m,M)}t.data=l}fillUncompressed(t,r,n,o,a,s){if(t===8)return fill8bit(n,o,a,s);if(t===16)return fill16bit(n,o,a,s,this.isLittleEndian());if(t===32&&r===3)return fillFloat32(n,o,a,s,this.isLittleEndian());throw unsupported("bitDepth",t)}applyPredictor(t){const r=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:{if(r===8)applyHorizontalDifferencing8Bit(t.data,t.width,t.components);else if(r===16)applyHorizontalDifferencing16Bit(t.data,t.width,t.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${r}`);break}default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:r,components:n,maxSampleValue:o}=t;for(let a=0;a<r.length;a+=n){const s=r[a+n-1];for(let l=0;l<n-1;l++)r[a+l]=Math.round(r[a+l]*o/s)}}}}function getDataArray(e,t,r){if(t===8)return new Uint8Array(e);if(t===16)return new Uint16Array(e);if(t===32&&r===3)return new Float32Array(e);throw unsupported("bit depth / sample format",`${t} / ${r}`)}function fill8bit(e,t,r,n){for(let o=0;o<n;o++)e[r++]=t.getUint8(o);return r}function fill16bit(e,t,r,n,o){for(let a=0;a<n*2;a+=2)e[r++]=t.getUint16(a,o);return r}function fillFloat32(e,t,r,n,o){for(let a=0;a<n*4;a+=4)e[r++]=t.getFloat32(a,o);return r}function unsupported(e,t){return new Error(`Unsupported ${e}: ${t}`)}function decodeTIFF(e,t){return new TIFFDecoder(e).decode(t)}function matchAndCrop(e={}){let{algorithm:t="matchToPrevious",ignoreBorder:r=[0,0]}=e;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let n=t==="matchToPrevious",o=this[0],a=[];a[0]={position:[0,0],image:this[0]};let s=[0,0];for(let g=1;g<this.length;g++){let m=o.getBestMatch(this[g],{border:r});a[g]={position:[m[0]+s[0],m[1]+s[1]],image:this[g]},n&&(s[0]+=m[0],s[1]+=m[1],o=this[g])}let l=0,u=0,c=0,f=0;for(let g=0;g<a.length;g++){let m=a[g];m.position[0]>l&&(l=m.position[0]),m.position[0]<u&&(u=m.position[0]),m.position[1]>c&&(c=m.position[1]),m.position[1]<f&&(f=m.position[1])}u=0-u,f=0-f;for(let g=0;g<a.length;g++){let m=a[g];m.crop=m.image.crop({x:l-m.position[0],y:c-m.position[1],width:o.width-u-l,height:o.height-f-c})}let d=[];for(let g=0;g<a.length;g++)d[g]=a[g].crop;return new Stack(d)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].min;for(let t=1;t<this.length;t++)for(let r=0;r<e.length;r++)e[r]=Math.min(e[r],this[t].min[r]);return e}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].max;for(let t=1;t<this.length;t++)for(let r=0;r<e.length;r++)e[r]=Math.max(e[r],this[t].max[r]);return e}function median$2(e){let t=e.reduce((s,l)=>s+l);if(t===0)throw new Error("unreachable");let r=0,n=0,o=t/2,a;for(;;){if(e[r]>0){if(a!==void 0)return(a+r)/2;if(n+=e[r],n>o)return r;n===o&&(a=r)}r++}}function mean$2(e){let t=0,r=0;for(let n=0;n<e.length;n++)t+=e[n],r+=e[n]*n;return t===0?0:r/t}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let e=this.getHistograms({maxSlots:this[0].maxValue+1}),t=new Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];t[r]=median$2(n)}return t}function histogram(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistogram(e);for(let r=1;r<this.length;r++){let n=this[r].getHistogram(e);for(let o=0;o<t.length;o++)t[o]+=n[o]}return t}function histograms(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistograms(e),r=t[0].length;for(let n=1;n<this.length;n++){let o=this[n].getHistograms(e);for(let a=0;a<t.length;a++)for(let s=0;s<r;s++)t[a][s]+=o[a][s]}return t}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let e=new Uint32Array(this[0].data.length);for(let n=0;n<this.length;n++){let o=this[n];for(let a=0;a<this[0].data.length;a++)e[a]+=o.data[a]}let t=Image.createFrom(this[0]),r=t.data;for(let n=0;n<this[0].data.length;n++)r[n]=e[n]/this.length;return t}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Image.createFrom(this[0]);e.data.fill(0);for(const t of this)for(let r=0;r<e.data.length;r++)e.data[r]=Math.max(t.data[r],e.data[r]);return e}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let e=Image.createFrom(this[0]);e.data.fill(e.maxValue);for(const t of this)for(let r=0;r<e.data.length;r++)e.data[r]=Math.min(t.data[r],e.data[r]);return e}function extend$2(e){e.extendMethod("matchAndCrop",matchAndCrop),e.extendMethod("getMin",min$2),e.extendMethod("getMax",max$2),e.extendMethod("getMedian",median$1),e.extendMethod("getHistogram",histogram),e.extendMethod("getHistograms",histograms),e.extendMethod("getAverage",averageImage),e.extendMethod("getAverageImage",averageImage),e.extendMethod("getMaxImage",maxImage),e.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(t){if(Array.isArray(t)){super(t.length);for(let r=0;r<t.length;r++)this[r]=t[r]}else typeof t=="number"?super(t):super();this.computed=null}static load(t){return Promise.all(t.map(Image.load)).then(r=>new Stack(r))}static extendMethod(t,r,n={}){let{inPlace:o=!1,returnThis:a=!0,partialArgs:s=[]}=n;return o?Stack.prototype[t]=function(...l){this.computed=null;let u=r.apply(this,[...s,...l]);return a?this:u}:Stack.prototype[t]=function(...l){return r.apply(this,[...s,...l])},Stack}static extendProperty(t,r,n={}){let{partialArgs:o=[]}=n;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(t,this.computed))return this.computed[t];let a=r.apply(this,o);return this.computed[t]=a,a},Object.defineProperty(Stack.prototype,t,computedPropertyDescriptor),Stack}checkProcessable(t,r={}){if(typeof t!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${t} can not be applied on an empty stack`);this[0].checkProcessable(t,r);for(let n=1;n<this.length;n++){if((r.sameSize===void 0||r.sameSize)&&this[0].width!==this[n].width)throw new TypeError(`The process: ${t} can not be applied if width is not identical in all images`);if((r.sameSize===void 0||r.sameSize)&&this[0].height!==this[n].height)throw new TypeError(`The process: ${t} can not be applied if height is not identical in all images`);if((r.sameAlpha===void 0||r.sameAlpha)&&this[0].alpha!==this[n].alpha)throw new TypeError(`The process: ${t} can not be applied if alpha is not identical in all images`);if((r.sameBitDepth===void 0||r.sameBitDepth)&&this[0].bitDepth!==this[n].bitDepth)throw new TypeError(`The process: ${t} can not be applied if bitDepth is not identical in all images`);if((r.sameColorModel===void 0||r.sameColorModel)&&this[0].colorModel!==this[n].colorModel)throw new TypeError(`The process: ${t} can not be applied if colorModel is not identical in all images`);if((r.sameNumberChannels===void 0||r.sameNumberChannels)&&this[0].channels!==this[n].channels)throw new TypeError(`The process: ${t} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(e,t){if(typeof e!="function")throw new TypeError(`${e} is not a function`);let r=new Stack(this.length);for(let n=0;n<this.length;n++)r[n]=e.call(t,this[n],n,this);return r});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(e,t){if(typeof e=="string")return loadURL(e,t);if(e instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(e),void 0,t&&t.ignorePalette));if(e.buffer)return Promise.resolve(loadBinary(e,void 0,t&&t.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(e,t,r){const n=imageType$1(e);if(n)switch(n.mime){case"image/png":return loadPNG(e);case"image/jpeg":return loadJPEG(e);case"image/tiff":return loadTIFF(e,r);default:return loadGeneric(o(n.mime))}return loadGeneric(o("application/octet-stream"));function o(a){return t||toBase64URL(e,a)}}function loadURL(e,t){const r=e.slice(0,64).match(isDataURL);let n;return r!==null?n=Promise.resolve(decode$3(e.slice(r[0].length))):n=fetchBinary(e,t),n.then(o=>{const a=new Uint8Array(o);return loadBinary(a,r?e:void 0,t&&t.ignorePalette)})}function loadPNG(e){const t=decodePng(e);let r=t.channels,n,o=0;return r===2||r===4?(n=r-1,o=1):n=r,t.palette?loadPNGFromPalette(t):new Image(t.width,t.height,t.data,{components:n,alpha:o,bitDepth:t.depth})}function loadPNGFromPalette(e){const t=e.width*e.height,r=e.palette[0].length,n=new Uint8Array(t*r),o=8/e.depth,a=e.depth<8?o:1,s=parseInt("1".repeat(e.depth),2),l=r===4;let u=0;for(let c=0;c<t;c++){const f=Math.floor(c/a);let d=e.data[f];e.depth<8&&(d=d>>>e.depth*(o-1-c%o)&s);const g=e.palette[d];n[u++]=g[0],n[u++]=g[1],n[u++]=g[2],l&&(n[u++]=g[3])}return new Image(e.width,e.height,n,{components:3,alpha:l,bitDepth:8})}function loadJPEG(e){const t=decode(e);let r;t.exif&&(r=getMetadata(t.exif));const n=jpegJs.decode(e,{useTArray:!0,maxMemoryUsageInMB:1024});let o=new Image(n.width,n.height,n.data,{meta:r});if(r&&r.tiff.tags.Orientation){const a=r.tiff.tags.Orientation;a>2&&(o=o.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[a])),[2,4,5,7].includes(a)&&(o=o.flipX())}return o}function loadTIFF(e,t){let r=decodeTIFF(e);return r.length===1?getImageFromIFD(r[0],t):new Stack(r.map(function(n){return getImageFromIFD(n,t)}))}function getMetadata(e){const t={tiff:{fields:e.fields,tags:e.map}};return e.exif&&(t.exif=e.exif),e.gps&&(t.gps=e.gps),t}function getImageFromIFD(e,t){if(!t&&e.type===3){const r=new Uint16Array(3*e.width*e.height),n=e.palette;let o=0;for(let a=0;a<e.data.length;a++){const s=e.data[a],l=n[s];r[o++]=l[0],r[o++]=l[1],r[o++]=l[2]}return new Image(e.width,e.height,r,{components:3,alpha:e.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(e)})}else return new Image(e.width,e.height,e.data,{components:e.type===2?3:1,alpha:e.alpha,colorModel:e.type===2?RGB$1:GREY$1,bitDepth:e.bitsPerSample.length?e.bitsPerSample[0]:e.bitsPerSample,meta:getMetadata(e)})}function loadGeneric(e,t){return t=t||{},new Promise(function(r,n){let o=new DOMImage;o.onload=function(){let a=o.width,s=o.height,u=createCanvas(a,s).getContext("2d");u.drawImage(o,0,0,a,s);let c=u.getImageData(0,0,a,s).data;r(new Image(a,s,c,t))},o.onerror=function(){n(new Error(`Could not load ${e}`))},o.src=e})}const valueMethods={getValueXY(e,t,r){return this.data[(t*this.width+e)*this.channels+r]},setValueXY(e,t,r,n){return this.data[(t*this.width+e)*this.channels+r]=n,this.computed=null,this},getValue(e,t){return this.data[e*this.channels+t]},setValue(e,t,r){return this.data[e*this.channels+t]=r,this.computed=null,this},getPixelXY(e,t){return this.getPixel(t*this.width+e)},setPixelXY(e,t,r){return this.setPixel(t*this.width+e,r)},getPixel(e){const t=new Array(this.channels),r=e*this.channels;for(let n=0;n<this.channels;n++)t[n]=this.data[r+n];return t},setPixel(e,t){const r=e*this.channels;for(let n=0;n<t.length;n++)this.data[r+n]=t[n];return this.computed=null,this}};function setValueMethods(e){for(const t in valueMethods)e.prototype[t]=valueMethods[t]}function getImageParameters(e){return{width:e.width,height:e.height,components:e.components,alpha:e.alpha,colorModel:e.colorModel,bitDepth:e.bitDepth}}function getOutputImage(e,t,r,n={}){const{out:o}=t;if(o===void 0)return n.copy?e.clone():Image.createFrom(e,r);{if(!Image.isImage(o))throw new TypeError("out must be an Image object");const a=Object.assign(getImageParameters(e),r);for(const s in a)if(o[s]!==a[s])throw new RangeError(`cannot use out. Its ${s} must be "${a[s]}" (found "${o[s]}")`);return o}}function getOutputImageOrInPlace(e,t,r){if(t.inPlace!==void 0&&typeof t.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(t.inPlace){if(t.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return e}return getOutputImage(e,t,null,r)}function abs(e={}){this.checkProcessable("abs",{bitDepth:[32]});const t=getOutputImageOrInPlace(this,e);return absolute(this,t),t}function absolute(e,t){for(let r=0;r<e.data.length;r++)t.data[r]=Math.abs(e.data[r])}function copyAlphaChannel(e,t){if(e.alpha===1&&t.alpha===1)for(let r=0;r<e.size;r++)t.data[r*t.channels+t.components]=e.data[r*e.channels+e.components]}function invert(e={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const t=getOutputImageOrInPlace(this,e);return this.bitDepth===1?invertBinary(this,t):(invertColor(this,t),this!==t&&copyAlphaChannel(this,t)),t}function invertBinary(e,t){for(let r=0;r<e.data.length;r++)t.data[r]=~e.data[r]}function invertColor(e,t){for(let r=0;r<e.data.length;r+=e.channels)for(let n=0;n<e.components;n++)t.data[r+n]=e.maxValue-e.data[r+n]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let e=0;e<this.height;e++){let t=e*this.width*this.channels;for(let r=0;r<Math.floor(this.width/2);r++){let n=r*this.channels+t,o=(this.width-r-1)*this.channels+t;for(let a=0;a<this.channels;a++){let s=this.data[n+a];this.data[n+a]=this.data[o+a],this.data[o+a]=s}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let e=0;e<Math.floor(this.height/2);e++)for(let t=0;t<this.width;t++){let r=t*this.channels+e*this.width*this.channels,n=t*this.channels+(this.height-1-e)*this.channels*this.width;for(let o=0;o<this.channels;o++){let a=this.data[r+o];this.data[r+o]=this.data[n+o],this.data[n+o]=a}}return this}function blurFilter(e={}){const{radius:t=1}=e;if(t<1)throw new Error("radius must be greater than 1");const r=2*t+1,n=new Array(r);for(let o=0;o<r;o++){n[o]=new Array(r);for(let a=0;a<r;a++)n[o][a]=1/(r*r)}return this.convolution(n)}var medianQuickselect_min={exports:{}};(function(e){(function(){function t(o){for(var a=0,s=o.length-1,l=void 0,u=void 0,c=void 0,f=n(a,s);;){if(s<=a)return o[f];if(s==a+1)return o[a]>o[s]&&r(o,a,s),o[f];for(l=n(a,s),o[l]>o[s]&&r(o,l,s),o[a]>o[s]&&r(o,a,s),o[l]>o[a]&&r(o,l,a),r(o,l,a+1),u=a+1,c=s;;){do u++;while(o[a]>o[u]);do c--;while(o[c]>o[a]);if(c<u)break;r(o,u,c)}r(o,a,c),c<=f&&(a=u),c>=f&&(s=c-1)}}var r=function(a,s,l){var u;return u=[a[l],a[s]],a[s]=u[0],a[l]=u[1],u},n=function(a,s){return~~((a+s)/2)};e.exports?e.exports=t:window.median=t})()})(medianQuickselect_min);var medianQuickselect_minExports=medianQuickselect_min.exports;const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(e,t={}){let{channels:r,allowAlpha:n,defaultAlpha:o}=t;return typeof n!="boolean"&&(n=!0),typeof r>"u"?allChannels(e,o):validateChannels(e,r,n)}function allChannels(e,t){let r=t?e.channels:e.components,n=new Array(r);for(let o=0;o<r;o++)n[o]=o;return n}function validateChannels(e,t,r){Array.isArray(t)||(t=[t]);for(let n=0;n<t.length;n++)t[n]=validateChannel(e,t[n],r);return t}function validateChannel(e,t,r=!0){if(t===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(typeof t=="string"){switch(e.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(t))switch(t){case"r":t=0;break;case"g":t=1;break;case"b":t=2;break}break;case HSL:if("hsl".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"l":t=2;break}break;case HSV:if("hsv".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"v":t=2;break}break;case CMYK$1:if("cmyk".includes(t))switch(t){case"c":t=0;break;case"m":t=1;break;case"y":t=2;break;case"k":t=3;break}break;default:throw new Error(`Unexpected color model: ${e.colorModel}`)}if(t==="a"){if(!e.alpha)throw new Error("validateChannel : the image does not contain alpha channel");t=e.components}if(typeof t=="string")throw new Error(`validateChannel : undefined channel: ${t}`)}if(t>=e.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(!r&&t>=e.components)throw new RangeError("validateChannel : alpha channel may not be selected");return t}function medianFilter(e={}){let{radius:t=1,border:r="copy",channels:n}=e;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),t<1)throw new Error("radius must be greater than 0");n=validateArrayOfChannels(this,n);let o=t,a=t,s=Image.createFrom(this),l=(o*2+1)*(a*2+1),u=new Array(l);for(let c=0;c<n.length;c++){let f=n[c];for(let d=a;d<this.height-a;d++)for(let g=o;g<this.width-o;g++){let m=0;for(let w=-a;w<=a;w++)for(let M=-o;M<=o;M++){let b=((d+w)*this.width+g+M)*this.channels+f;u[m++]=this.data[b]}let x=(d*this.width+g)*this.channels+f;s.data[x]=quickSelectMedian(u)}}if(this.alpha&&!n.includes(this.channels))for(let c=this.components;c<this.data.length;c=c+this.channels)s.data[c]=this.data[c];return s.setBorder({size:[o,a],algorithm:r}),s}function gaussianFilter(e={}){let{radius:t=1,sigma:r,channels:n,border:o="copy"}=e;this.checkProcessable("gaussian",{bitDepth:[8,16]});const a=getKernel(t,r);return this.convolution([a,a],{border:o,channels:n,algorithm:"separable"})}function getKernel(e,t){const r=e*2+1,n=new Array(r),o=t||((r-1)*.5-1)*.3+.8,a=-.5/(o*o);let s=0;for(let l=0;l<r;l++){const u=l-e,c=Math.exp(a*u*u);n[l]=c,s+=c}for(let l=0;l<r;l++)n[l]/=s;return n}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={};(function(e){(function(){var t;t=e;var r={release:"0.3.0",date:"2013-03"};t.toString=function(){return"version "+r.release+", released "+r.date};for(var n=0,o=null,a=null,s={init:function(c){if(c!==0&&!(c&c-1))n=c,s._initArray(),s._makeBitReversalTable(),s._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(c,f){s.fft(c,f,1)},ifft1d:function(c,f){var d=1/n;s.fft(c,f,-1);for(var g=0;g<n;g++)c[g]*=d,f[g]*=d},bt1d:function(c,f){s.fft(c,f,-1)},fft2d:function(c,f){for(var d=[],g=[],m=0,x=0;x<n;x++){m=x*n;for(var w=0;w<n;w++)d[w]=c[w+m],g[w]=f[w+m];s.fft1d(d,g);for(var M=0;M<n;M++)c[M+m]=d[M],f[M+m]=g[M]}for(var b=0;b<n;b++){for(var A=0;A<n;A++)m=b+A*n,d[A]=c[m],g[A]=f[m];s.fft1d(d,g);for(var v=0;v<n;v++)m=b+v*n,c[m]=d[v],f[m]=g[v]}},ifft2d:function(c,f){for(var d=[],g=[],m=0,x=0;x<n;x++){m=x*n;for(var w=0;w<n;w++)d[w]=c[w+m],g[w]=f[w+m];s.ifft1d(d,g);for(var M=0;M<n;M++)c[M+m]=d[M],f[M+m]=g[M]}for(var b=0;b<n;b++){for(var A=0;A<n;A++)m=b+A*n,d[A]=c[m],g[A]=f[m];s.ifft1d(d,g);for(var v=0;v<n;v++)m=b+v*n,c[m]=d[v],f[m]=g[v]}},fft:function(c,f,d){for(var g,m,x,w,M,b,A,v,_,S=n>>2,B=0;B<n;B++)w=o[B],B<w&&(M=c[B],c[B]=c[w],c[w]=M,M=f[B],f[B]=f[w],f[w]=M);for(var I=1;I<n;I<<=1){m=0,g=n/(I<<1);for(var E=0;E<I;E++){b=a[m+S],A=d*a[m];for(var T=E;T<n;T+=I<<1)x=T+I,v=b*c[x]+A*f[x],_=b*f[x]-A*c[x],c[x]=c[T]-v,c[T]+=v,f[x]=f[T]-_,f[T]+=_;m+=g}}},_initArray:function(){typeof Uint32Array<"u"?o=new Uint32Array(n):o=[],typeof Float64Array<"u"?a=new Float64Array(n*1.25):a=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var c=0,f=0,d=0;for(o[0]=0;++c<n;){for(d=n>>1;d<=f;)f-=d,d>>=1;f+=d,o[c]=f}},_makeCosSinTable:function(){var c=n>>1,f=n>>2,d=n>>3,g=c+f,m=Math.sin(Math.PI/n),x=2*m*m,w=Math.sqrt(x*(2-x)),M=a[f]=1,b=a[0]=0;m=2*x;for(var A=1;A<d;A++)M-=x,x+=m*M,b+=w,w-=m*b,a[A]=b,a[f-A]=M;d!==0&&(a[d]=Math.sqrt(.5));for(var v=0;v<f;v++)a[c-v]=a[v];for(var _=0;_<g;_++)a[_+c]=-a[_]}},l=["init","fft1d","ifft1d","fft2d","ifft2d"],u=0;u<l.length;u++)t[l[u]]=s[l[u]];return t.bt=s.bt1d,t.fft=s.fft1d,t.ifft=s.ifft1d,t}).call(commonjsGlobal)})(fftlib);var FFT$1=fftlib,FFTUtils$1={DEBUG:!1,ifft2DArray:function(e,t,r){var n=new Array(t*r),o=t/2,a=(r-1)*2;FFT$1.init(o);for(var s={re:new Array(o),im:new Array(o)},l=0;l<r;l++){for(var u=o-1;u>=0;u--)s.re[u]=e[u*2*r+l],s.im[u]=e[(u*2+1)*r+l];FFT$1.bt(s.re,s.im);for(var u=o-1;u>=0;u--)n[u*2*r+l]=s.re[u],n[(u*2+1)*r+l]=s.im[u]}var c=new Array(o*a);FFT$1.init(a);for(var f={re:new Array(a),im:new Array(a)},d=a*o,u=0;u<t;u+=2){f.re[0]=n[u*r],f.im[0]=n[(u+1)*r];for(var l=1;l<r;l++)f.re[l]=n[u*r+l],f.im[l]=n[(u+1)*r+l],f.re[a-l]=n[u*r+l],f.im[a-l]=-n[(u+1)*r+l];FFT$1.bt(f.re,f.im);for(var g=u/2*a,l=a-1;l>=0;l--)c[g+l]=f.re[l]/d}return c},fft2DArray:function(e,t,r,n){Object.assign({},{inplace:!0});var o=r/2+1,a=t*2,s=new Array(a*o);FFT$1.init(r);for(var l={re:new Array(r),im:new Array(r)},u={re:new Array(r),im:new Array(r)},c={re:new Array(r),im:new Array(r)},f,d,g,m,x,w=0;w<t/2;w++){f=w*2*r,l.re=e.slice(f,f+r),f=(w*2+1)*r,l.im=e.slice(f,f+r),FFT$1.fft1d(l.re,l.im),this.reconstructTwoRealFFT(l,u,c),d=w*4*o,g=(w*4+1)*o,m=(w*4+2)*o,x=(w*4+3)*o;for(var M=o-1;M>=0;M--)s[d+M]=u.re[M],s[g+M]=u.im[M],s[m+M]=c.re[M],s[x+M]=c.im[M]}u=null,c=null;var b=new Array(a*o);FFT$1.init(t);for(var A={re:new Array(t),im:new Array(t)},v=o-1;v>=0;v--){for(var w=t-1;w>=0;w--)A.re[w]=s[w*2*o+v],A.im[w]=s[(w*2+1)*o+v],isNaN(A.re[w])&&(A.re[w]=0),isNaN(A.im[w])&&(A.im[w]=0);FFT$1.fft1d(A.re,A.im);for(var w=t-1;w>=0;w--)b[w*2*o+v]=A.re[w],b[(w*2+1)*o+v]=A.im[w]}return b},reconstructTwoRealFFT:function(e,t,r){var n=e.re.length;t.re[0]=e.re[0],t.im[0]=0,r.re[0]=e.im[0],r.im[0]=0;for(var o,a,s,l,u,c=n/2;c>0;c--)u=n-c,o=.5*(e.re[c]-e.re[u]),a=.5*(e.re[c]+e.re[u]),s=.5*(e.im[c]-e.im[u]),l=.5*(e.im[c]+e.im[u]),t.re[c]=a,t.im[c]=s,t.re[u]=a,t.im[u]=-s,r.re[c]=l,r.im[c]=-o,r.re[u]=l,r.im[u]=o},convolute2DI:function(e,t,r,n){for(var o,a,s=0;s<r/2;s++)for(var l=0;l<n;l++)o=e[s*2*n+l]*t[s*2*n+l]-e[(s*2+1)*n+l]*t[(s*2+1)*n+l],a=e[s*2*n+l]*t[(s*2+1)*n+l]+e[(s*2+1)*n+l]*t[s*2*n+l],e[s*2*n+l]=o,e[(s*2+1)*n+l]=a},convolute:function(e,t,r,n,o){for(var a=new Array(n*r),s=0;s<r*n;s++)a[s]=e[s];a=this.fft2DArray(a,r,n);for(var l=t.length,u=t[0].length,c=new Array(n*r),s=0;s<n*r;s++)c[s]=0;for(var f,d,g=Math.floor((l-1)/2),m=Math.floor((u-1)/2),x=0;x<l;x++){f=(x-g+r)%r;for(var w=0;w<u;w++)d=(w-m+n)%n,c[f*n+d]=t[x][w]}c=this.fft2DArray(c,r,n);var M=r*2,b=n/2+1;return this.convolute2DI(a,c,M,b),this.ifft2DArray(a,M,b)},toRadix2:function(e,t,r){var n,o,a,s,l=r,u=t;if(!(r!==0&&!(r&r-1))){for(l=0;r>>++l;);l=1<<l}if(!(t!==0&&!(t&t-1))){for(u=0;t>>++u;);u=1<<u}if(u==t&&l==r)return{data:e,rows:t,cols:r};var c=new Array(u*l),f=Math.floor((u-t)/2)-t,d=Math.floor((l-r)/2)-r;for(n=0;n<u;n++)for(a=n*l,s=(n-f)%t*r,o=0;o<l;o++)c[a+o]=e[s+(o-d)%r];return{data:c,rows:u,cols:l}},crop:function(e,t,r,n,o,a){if(t==n&&r==o)return e;Object.assign({},a);var s=new Array(o*n),l=Math.floor((t-n)/2),u=Math.floor((r-o)/2),c,f,d,g;for(d=0;d<n;d++)for(c=d*o,f=(d+l)*r,g=0;g<o;g++)s[c+g]=e[f+(g+u)];return s}},FFTUtils_1=FFTUtils$1;src$2.FFTUtils=FFTUtils_1;src$2.FFT=fftlib;var FFTUtils=src$2.FFTUtils;function convolutionFFT(e,t,r){var n=matrix2Array(e),o=n.data,a=Object.assign({normalize:!1,divisor:1,rows:n.rows,cols:n.cols},r),s,l;if(a.rows&&a.cols)s=a.rows,l=a.cols;else throw new Error("Invalid number of rows or columns "+s+" "+l);var u=a.divisor,c,f,d=t.length,g=t[0].length;if(a.normalize)for(u=0,c=0;c<d;c++)for(f=0;f<g;f++)u+=t[c][f];if(u===0)throw new RangeError("convolution: The divisor is equal to zero");var m=FFTUtils.toRadix2(o,s,l),x=FFTUtils.convolute(m.data,t,m.rows,m.cols);if(x=FFTUtils.crop(x,m.rows,m.cols,s,l),u!=0&&u!=1)for(c=0;c<x.length;c++)x[c]/=u;return x}function convolutionDirect(e,t,r){var n=matrix2Array(e),o=n.data,a=Object.assign({normalize:!1,divisor:1,rows:n.rows,cols:n.cols},r),s,l;if(a.rows&&a.cols)s=a.rows,l=a.cols;else throw new Error("Invalid number of rows or columns "+s+" "+l);var u=a.divisor,c=t.length,f=t[0].length,d,g,m,x,w,M,b,A,v;if(a.normalize)for(u=0,d=0;d<c;d++)for(g=0;g<f;g++)u+=t[d][g];if(u===0)throw new RangeError("convolution: The divisor is equal to zero");var _=new Array(s*l),S=Math.floor(c/2),B=Math.floor(f/2);for(x=0;x<s;x++)for(m=0;m<l;m++){for(M=0,g=0;g<c;g++)for(d=0;d<f;d++)b=t[c-g-1][f-d-1],A=(x+g-S+s)%s,v=(m+d-B+l)%l,w=A*l+v,M+=o[w]*b;w=x*l+m,_[w]=M/u}return _}function LoG(e,t,r){var n=1e3;r&&r.factor&&(n=r.factor);var o=new Array(t),a,s,l,u;n*=-1;var c=(t-1)/2,f=2*e*e;for(a=0;a<t;a++)for(o[a]=new Array(t),u=(a-c)*(a-c),s=0;s<t;s++)l=-((s-c)*(s-c)+u)/f,o[a][s]=Math.round(n*(1+l)*Math.exp(l));return o}function matrix2Array(e){var t=e,r,n;if(typeof e[0]!="number"){r=e.length,n=e[0].length,t=new Array(r*n);for(var o=0;o<r;o++)for(var a=0;a<n;a++)t[o*n+a]=e[o][a]}else{var s=Math.sqrt(e.length);Number.isInteger(s)&&(r=s,n=s)}return{data:t,rows:r,cols:n}}var src$1={fft:convolutionFFT,direct:convolutionDirect,kernelFactory:{LoG},matrix2Array},_isFinite=Number.isFinite||function(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)},isFinite$1=_isFinite,isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite$1(e)&&Math.floor(e)===e};const isInteger$1=getDefaultExportFromCjs(isInteger);function validateKernel(e){let t,r;if(Array.isArray(e))if(Array.isArray(e[0])){if(!(e.length&1)||!(e[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");t=Math.floor(e.length/2),r=Math.floor(e[0].length/2)}else{let n=Math.sqrt(e.length);if(isInteger$1(n))r=t=Math.floor(Math.sqrt(e.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let o=new Array(n);for(let a=0;a<n;a++){o[a]=new Array(n);for(let s=0;s<n;s++)o[a][s]=e[a*n+s]}e=o}else throw new Error(`validateKernel: Invalid Kernel: ${e}`);return{kernel:e,kWidth:r,kHeight:t}}function clamp(e,t){return Math.round(Math.min(Math.max(e,0),t.maxValue))}function directConvolution(e,t,r){if(r===void 0){const a=e.length+t.length-1;r=new Array(a)}fill(r);for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)r[n+o]+=e[n]*t[o];return r}function fill(e){for(var t=0;t<e.length;t++)e[t]=0}function FFT(e){if(this.size=e|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var t=new Array(this.size*2),r=0;r<t.length;r+=2){const u=Math.PI*r/this.size;t[r]=Math.cos(u),t[r+1]=-Math.sin(u)}this.table=t;for(var n=0,o=1;this.size>o;o<<=1)n++;this._width=n%2===0?n-1:n,this._bitrev=new Array(1<<this._width);for(var a=0;a<this._bitrev.length;a++){this._bitrev[a]=0;for(var s=0;s<this._width;s+=2){var l=this._width-s-2;this._bitrev[a]|=(a>>>s&3)<<l}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function e(t,r){for(var n=r||new Array(t.length>>>1),o=0;o<t.length;o+=2)n[o>>>1]=t[o];return n};FFT.prototype.createComplexArray=function e(){const t=new Array(this._csize);for(var r=0;r<t.length;r++)t[r]=0;return t};FFT.prototype.toComplexArray=function e(t,r){for(var n=r||this.createComplexArray(),o=0;o<n.length;o+=2)n[o]=t[o>>>1],n[o+1]=0;return n};FFT.prototype.completeSpectrum=function e(t){for(var r=this._csize,n=r>>>1,o=2;o<n;o+=2)t[r-o]=t[o],t[r-o+1]=-t[o+1]};FFT.prototype.transform=function e(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function e(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function e(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=1,this._transform4();for(var n=0;n<t.length;n++)t[n]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function e(){var t=this._out,r=this._csize,n=this._width,o=1<<n,a=r/o<<1,s,l,u=this._bitrev;if(a===4)for(s=0,l=0;s<r;s+=a,l++){const w=u[l];this._singleTransform2(s,w,o)}else for(s=0,l=0;s<r;s+=a,l++){const w=u[l];this._singleTransform4(s,w,o)}var c=this._inv?-1:1,f=this.table;for(o>>=2;o>=2;o>>=2){a=r/o<<1;var d=a>>>2;for(s=0;s<r;s+=a)for(var g=s+d,m=s,x=0;m<g;m+=2,x+=o){const w=m,M=w+d,b=M+d,A=b+d,v=t[w],_=t[w+1],S=t[M],B=t[M+1],I=t[b],E=t[b+1],T=t[A],y=t[A+1],k=v,C=_,F=f[x],Y=c*f[x+1],K=S*F-B*Y,ee=S*Y+B*F,te=f[2*x],q=c*f[2*x+1],ue=I*te-E*q,le=I*q+E*te,ge=f[3*x],de=c*f[3*x+1],ie=T*ge-y*de,ae=T*de+y*ge,Q=k+ue,he=C+le,pe=k-ue,_e=C-le,xe=K+ie,ye=ee+ae,ve=c*(K-ie),R=c*(ee-ae),D=Q+xe,O=he+ye,V=Q-xe,G=he-ye,z=pe+R,X=_e-ve,P=pe-R,H=_e+ve;t[w]=D,t[w+1]=O,t[M]=z,t[M+1]=X,t[b]=V,t[b+1]=G,t[A]=P,t[A+1]=H}}};FFT.prototype._singleTransform2=function e(t,r,n){const o=this._out,a=this._data,s=a[r],l=a[r+1],u=a[r+n],c=a[r+n+1],f=s+u,d=l+c,g=s-u,m=l-c;o[t]=f,o[t+1]=d,o[t+2]=g,o[t+3]=m};FFT.prototype._singleTransform4=function e(t,r,n){const o=this._out,a=this._data,s=this._inv?-1:1,l=n*2,u=n*3,c=a[r],f=a[r+1],d=a[r+n],g=a[r+n+1],m=a[r+l],x=a[r+l+1],w=a[r+u],M=a[r+u+1],b=c+m,A=f+x,v=c-m,_=f-x,S=d+w,B=g+M,I=s*(d-w),E=s*(g-M),T=b+S,y=A+B,k=v+E,C=_-I,F=b-S,Y=A-B,K=v-E,ee=_+I;o[t]=T,o[t+1]=y,o[t+2]=k,o[t+3]=C,o[t+4]=F,o[t+5]=Y,o[t+6]=K,o[t+7]=ee};FFT.prototype._realTransform4=function e(){var t=this._out,r=this._csize,n=this._width,o=1<<n,a=r/o<<1,s,l,u=this._bitrev;if(a===4)for(s=0,l=0;s<r;s+=a,l++){const Se=u[l];this._singleRealTransform2(s,Se>>>1,o>>>1)}else for(s=0,l=0;s<r;s+=a,l++){const Se=u[l];this._singleRealTransform4(s,Se>>>1,o>>>1)}var c=this._inv?-1:1,f=this.table;for(o>>=2;o>=2;o>>=2){a=r/o<<1;var d=a>>>1,g=d>>>1,m=g>>>1;for(s=0;s<r;s+=a)for(var x=0,w=0;x<=m;x+=2,w+=o){var M=s+x,b=M+g,A=b+g,v=A+g,_=t[M],S=t[M+1],B=t[b],I=t[b+1],E=t[A],T=t[A+1],y=t[v],k=t[v+1],C=_,F=S,Y=f[w],K=c*f[w+1],ee=B*Y-I*K,te=B*K+I*Y,q=f[2*w],ue=c*f[2*w+1],le=E*q-T*ue,ge=E*ue+T*q,de=f[3*w],ie=c*f[3*w+1],ae=y*de-k*ie,Q=y*ie+k*de,he=C+le,pe=F+ge,_e=C-le,xe=F-ge,ye=ee+ae,ve=te+Q,R=c*(ee-ae),D=c*(te-Q),O=he+ye,V=pe+ve,G=_e+D,z=xe-R;if(t[M]=O,t[M+1]=V,t[b]=G,t[b+1]=z,x===0){var X=he-ye,P=pe-ve;t[A]=X,t[A+1]=P;continue}if(x!==m){var H=_e,j=-xe,Z=he,L=-pe,ne=-c*D,se=-c*R,W=-c*ve,re=-c*ye,ce=H+ne,oe=j+se,we=Z+re,Me=L-W,be=s+g-x,Ee=s+d-x;t[be]=ce,t[be+1]=oe,t[Ee]=we,t[Ee+1]=Me}}}};FFT.prototype._singleRealTransform2=function e(t,r,n){const o=this._out,a=this._data,s=a[r],l=a[r+n],u=s+l,c=s-l;o[t]=u,o[t+1]=0,o[t+2]=c,o[t+3]=0};FFT.prototype._singleRealTransform4=function e(t,r,n){const o=this._out,a=this._data,s=this._inv?-1:1,l=n*2,u=n*3,c=a[r],f=a[r+n],d=a[r+l],g=a[r+u],m=c+d,x=c-d,w=f+g,M=s*(f-g),b=m+w,A=x,v=-M,_=m-w,S=x,B=M;o[t]=b,o[t+1]=0,o[t+2]=A,o[t+3]=v,o[t+4]=_,o[t+5]=0,o[t+6]=S,o[t+7]=B};function convolutionSeparable(e,t,r,n){const o=new Array(e.length);let a,s,l,u;u=t[1],l=(u.length-1)/2,s=new Array(r+u.length-1),a=new Array(r);for(let c=0;c<n;c++){for(let f=0;f<r;f++)a[f]=e[c*r+f];directConvolution(a,u,s);for(let f=0;f<r;f++)o[c*r+f]=s[l+f]}u=t[0],l=(u.length-1)/2,s=new Array(n+u.length-1),a=new Array(n);for(let c=0;c<r;c++){for(let f=0;f<n;f++)a[f]=o[f*r+c];directConvolution(a,u,s);for(let f=0;f<n;f++)o[f*r+c]=s[l+f]}return o}var matrix$2={};const toString$1=Object.prototype.toString;function isAnyArray$1(e){const t=toString$1.call(e);return t.endsWith("Array]")&&!t.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:isAnyArray$1},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(libEsm);function max$1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var r=t.fromIndex,n=r===void 0?0:r,o=t.toIndex,a=o===void 0?e.length:o;if(n<0||n>=e.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[n],l=n+1;l<a;l++)e[l]>s&&(s=e[l]);return s}function min$1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var r=t.fromIndex,n=r===void 0?0:r,o=t.toIndex,a=o===void 0?e.length:o;if(n<0||n>=e.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[n],l=n+1;l<a;l++)e[l]<s&&(s=e[l]);return s}function rescale$1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray$1(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(t.output!==void 0){if(!isAnyArray$1(t.output))throw new TypeError("output option must be an array if specified");r=t.output}else r=new Array(e.length);var n=min$1(e),o=max$1(e);if(n===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=t.min,s=a===void 0?t.autoMinMax?n:0:a,l=t.max,u=l===void 0?t.autoMinMax?o:1:l;if(s>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-s)/(o-n),f=0;f<e.length;f++)r[f]=(e[f]-n)*c+s;return r}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);Object.defineProperty(matrix$2,"__esModule",{value:!0});var isAnyArray=require$$0$2,rescale=require$$1;const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(e,t={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:o=8,padMinus:a="auto"}=t;return`${e.constructor.name} {
${indent}[
${indentData}${inspectData(e,r,n,o,a)}
${indent}]
${indent}rows: ${e.rows}
${indent}columns: ${e.columns}
}`}function inspectData(e,t,r,n,o){const{rows:a,columns:s}=e,l=Math.min(a,t),u=Math.min(s,r),c=[];if(o==="auto"){o=!1;e:for(let f=0;f<l;f++)for(let d=0;d<u;d++)if(e.get(f,d)<0){o=!0;break e}}for(let f=0;f<l;f++){let d=[];for(let g=0;g<u;g++)d.push(formatNumber(e.get(f,g),n,o));c.push(`${d.join(" ")}`)}return u!==s&&(c[c.length-1]+=` ... ${s-r} more columns`),l!==a&&c.push(`... ${a-t} more rows`),c.join(`
${indentData}`)}function formatNumber(e,t,r){return(e>=0&&r?` ${formatNumber2(e,t-1)}`:formatNumber2(e,t)).padEnd(t)}function formatNumber2(e,t){let r=e.toString();if(r.length<=t)return r;let n=e.toFixed(t);if(n.length>t&&(n=e.toFixed(Math.max(0,t-(n.length-t)))),n.length<=t&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let o=e.toExponential(t);return o.length>t&&(o=e.toExponential(Math.max(0,t-(o.length-t)))),o.slice(0)}function installMathOperations(e,t){e.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},e.prototype.addS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)+n);return this},e.prototype.addM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)+n.get(o,a));return this},e.add=function(n,o){return new t(n).add(o)},e.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},e.prototype.subS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)-n);return this},e.prototype.subM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)-n.get(o,a));return this},e.sub=function(n,o){return new t(n).sub(o)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},e.prototype.mulS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)*n);return this},e.prototype.mulM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)*n.get(o,a));return this},e.mul=function(n,o){return new t(n).mul(o)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},e.prototype.divS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)/n);return this},e.prototype.divM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)/n.get(o,a));return this},e.div=function(n,o){return new t(n).div(o)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},e.prototype.modS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)%n);return this},e.prototype.modM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)%n.get(o,a));return this},e.mod=function(n,o){return new t(n).mod(o)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},e.prototype.andS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)&n);return this},e.prototype.andM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)&n.get(o,a));return this},e.and=function(n,o){return new t(n).and(o)},e.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},e.prototype.orS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)|n);return this},e.prototype.orM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)|n.get(o,a));return this},e.or=function(n,o){return new t(n).or(o)},e.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},e.prototype.xorS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)^n);return this},e.prototype.xorM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)^n.get(o,a));return this},e.xor=function(n,o){return new t(n).xor(o)},e.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},e.prototype.leftShiftS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)<<n);return this},e.prototype.leftShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)<<n.get(o,a));return this},e.leftShift=function(n,o){return new t(n).leftShift(o)},e.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},e.prototype.signPropagatingRightShiftS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)>>n);return this},e.prototype.signPropagatingRightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)>>n.get(o,a));return this},e.signPropagatingRightShift=function(n,o){return new t(n).signPropagatingRightShift(o)},e.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},e.prototype.rightShiftS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)>>>n);return this},e.prototype.rightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)>>>n.get(o,a));return this},e.rightShift=function(n,o){return new t(n).rightShift(o)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,~this.get(n,o));return this},e.not=function(n){return new t(n).not()},e.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.abs(this.get(n,o)));return this},e.abs=function(n){return new t(n).abs()},e.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.acos(this.get(n,o)));return this},e.acos=function(n){return new t(n).acos()},e.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.acosh(this.get(n,o)));return this},e.acosh=function(n){return new t(n).acosh()},e.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.asin(this.get(n,o)));return this},e.asin=function(n){return new t(n).asin()},e.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.asinh(this.get(n,o)));return this},e.asinh=function(n){return new t(n).asinh()},e.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.atan(this.get(n,o)));return this},e.atan=function(n){return new t(n).atan()},e.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.atanh(this.get(n,o)));return this},e.atanh=function(n){return new t(n).atanh()},e.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.cbrt(this.get(n,o)));return this},e.cbrt=function(n){return new t(n).cbrt()},e.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.ceil(this.get(n,o)));return this},e.ceil=function(n){return new t(n).ceil()},e.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.clz32(this.get(n,o)));return this},e.clz32=function(n){return new t(n).clz32()},e.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.cos(this.get(n,o)));return this},e.cos=function(n){return new t(n).cos()},e.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.cosh(this.get(n,o)));return this},e.cosh=function(n){return new t(n).cosh()},e.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.exp(this.get(n,o)));return this},e.exp=function(n){return new t(n).exp()},e.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.expm1(this.get(n,o)));return this},e.expm1=function(n){return new t(n).expm1()},e.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.floor(this.get(n,o)));return this},e.floor=function(n){return new t(n).floor()},e.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.fround(this.get(n,o)));return this},e.fround=function(n){return new t(n).fround()},e.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.log(this.get(n,o)));return this},e.log=function(n){return new t(n).log()},e.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.log1p(this.get(n,o)));return this},e.log1p=function(n){return new t(n).log1p()},e.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.log10(this.get(n,o)));return this},e.log10=function(n){return new t(n).log10()},e.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.log2(this.get(n,o)));return this},e.log2=function(n){return new t(n).log2()},e.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.round(this.get(n,o)));return this},e.round=function(n){return new t(n).round()},e.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.sign(this.get(n,o)));return this},e.sign=function(n){return new t(n).sign()},e.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.sin(this.get(n,o)));return this},e.sin=function(n){return new t(n).sin()},e.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.sinh(this.get(n,o)));return this},e.sinh=function(n){return new t(n).sinh()},e.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.sqrt(this.get(n,o)));return this},e.sqrt=function(n){return new t(n).sqrt()},e.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.tan(this.get(n,o)));return this},e.tan=function(n){return new t(n).tan()},e.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.tanh(this.get(n,o)));return this},e.tanh=function(n){return new t(n).tanh()},e.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.set(n,o,Math.trunc(this.get(n,o)));return this},e.trunc=function(n){return new t(n).trunc()},e.pow=function(n,o){return new t(n).pow(o)},e.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},e.prototype.powS=function(n){for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,Math.pow(this.get(o,a),n));return this},e.prototype.powM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let a=0;a<this.columns;a++)this.set(o,a,Math.pow(this.get(o,a),n.get(o,a)));return this}}function checkRowIndex(e,t,r){let n=r?e.rows:e.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function checkColumnIndex(e,t,r){let n=r?e.columns:e.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function checkRowVector(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function checkColumnVector(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function checkRowIndices(e,t){if(!isAnyArray.isAnyArray(t))throw new TypeError("row indices must be an array");for(let r=0;r<t.length;r++)if(t[r]<0||t[r]>=e.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(e,t){if(!isAnyArray.isAnyArray(t))throw new TypeError("column indices must be an array");for(let r=0;r<t.length;r++)if(t[r]<0||t[r]>=e.columns)throw new RangeError("column indices are out of range")}function checkRange(e,t,r,n,o){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",t),checkNumber("endRow",r),checkNumber("startColumn",n),checkNumber("endColumn",o),t>r||n>o||t<0||t>=e.rows||r<0||r>=e.rows||n<0||n>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function newArray$2(e,t=0){let r=[];for(let n=0;n<e;n++)r.push(t);return r}function checkNumber(e,t){if(typeof t!="number")throw new TypeError(`${e} must be a number`)}function checkNonEmpty(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(e){let t=newArray$2(e.rows);for(let r=0;r<e.rows;++r)for(let n=0;n<e.columns;++n)t[r]+=e.get(r,n);return t}function sumByColumn(e){let t=newArray$2(e.columns);for(let r=0;r<e.rows;++r)for(let n=0;n<e.columns;++n)t[n]+=e.get(r,n);return t}function sumAll(e){let t=0;for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)t+=e.get(r,n);return t}function productByRow(e){let t=newArray$2(e.rows,1);for(let r=0;r<e.rows;++r)for(let n=0;n<e.columns;++n)t[r]*=e.get(r,n);return t}function productByColumn(e){let t=newArray$2(e.columns,1);for(let r=0;r<e.rows;++r)for(let n=0;n<e.columns;++n)t[n]*=e.get(r,n);return t}function productAll(e){let t=1;for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)t*=e.get(r,n);return t}function varianceByRow(e,t,r){const n=e.rows,o=e.columns,a=[];for(let s=0;s<n;s++){let l=0,u=0,c=0;for(let f=0;f<o;f++)c=e.get(s,f)-r[s],l+=c,u+=c*c;t?a.push((u-l*l/o)/(o-1)):a.push((u-l*l/o)/o)}return a}function varianceByColumn(e,t,r){const n=e.rows,o=e.columns,a=[];for(let s=0;s<o;s++){let l=0,u=0,c=0;for(let f=0;f<n;f++)c=e.get(f,s)-r[s],l+=c,u+=c*c;t?a.push((u-l*l/n)/(n-1)):a.push((u-l*l/n)/n)}return a}function varianceAll(e,t,r){const n=e.rows,o=e.columns,a=n*o;let s=0,l=0,u=0;for(let c=0;c<n;c++)for(let f=0;f<o;f++)u=e.get(c,f)-r,s+=u,l+=u*u;return t?(l-s*s/a)/(a-1):(l-s*s/a)/a}function centerByRow(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t[r])}function centerByColumn(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t[n])}function centerAll(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t)}function getScaleByRow(e){const t=[];for(let r=0;r<e.rows;r++){let n=0;for(let o=0;o<e.columns;o++)n+=Math.pow(e.get(r,o),2)/(e.columns-1);t.push(Math.sqrt(n))}return t}function scaleByRow(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t[r])}function getScaleByColumn(e){const t=[];for(let r=0;r<e.columns;r++){let n=0;for(let o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/(e.rows-1);t.push(Math.sqrt(n))}return t}function scaleByColumn(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t[n])}function getScaleAll(e){const t=e.size-1;let r=0;for(let n=0;n<e.columns;n++)for(let o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/t;return Math.sqrt(r)}function scaleAll(e,t){for(let r=0;r<e.rows;r++)for(let n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t)}let AbstractMatrix$1=class Be{static from1DArray(t,r,n){if(t*r!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Matrix$3(t,r);for(let s=0;s<t;s++)for(let l=0;l<r;l++)a.set(s,l,n[s*r+l]);return a}static rowVector(t){let r=new Matrix$3(1,t.length);for(let n=0;n<t.length;n++)r.set(0,n,t[n]);return r}static columnVector(t){let r=new Matrix$3(t.length,1);for(let n=0;n<t.length;n++)r.set(n,0,t[n]);return r}static zeros(t,r){return new Matrix$3(t,r)}static ones(t,r){return new Matrix$3(t,r).fill(1)}static rand(t,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:o=Math.random}=n;let a=new Matrix$3(t,r);for(let s=0;s<t;s++)for(let l=0;l<r;l++)a.set(s,l,o());return a}static randInt(t,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:o=0,max:a=1e3,random:s=Math.random}=n;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");let l=a-o,u=new Matrix$3(t,r);for(let c=0;c<t;c++)for(let f=0;f<r;f++){let d=o+Math.round(s()*l);u.set(c,f,d)}return u}static eye(t,r,n){r===void 0&&(r=t),n===void 0&&(n=1);let o=Math.min(t,r),a=this.zeros(t,r);for(let s=0;s<o;s++)a.set(s,s,n);return a}static diag(t,r,n){let o=t.length;r===void 0&&(r=o),n===void 0&&(n=r);let a=Math.min(o,r,n),s=this.zeros(r,n);for(let l=0;l<a;l++)s.set(l,l,t[l]);return s}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);let n=t.rows,o=t.columns,a=new Matrix$3(n,o);for(let s=0;s<n;s++)for(let l=0;l<o;l++)a.set(s,l,Math.min(t.get(s,l),r.get(s,l)));return a}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);let n=t.rows,o=t.columns,a=new this(n,o);for(let s=0;s<n;s++)for(let l=0;l<o;l++)a.set(s,l,Math.max(t.get(s,l),r.get(s,l)));return a}static checkMatrix(t){return Be.isMatrix(t)?t:new Matrix$3(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)t.call(this,r,n);return this}to1DArray(){let t=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)t.push(this.get(r,n));return t}to2DArray(){let t=[];for(let r=0;r<this.rows;r++){t.push([]);for(let n=0;n<this.columns;n++)t[r].push(this.get(r,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}isEchelonForm(){let t=0,r=0,n=-1,o=!0,a=!1;for(;t<this.rows&&o;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(t,r)===0?r++:this.get(t,r)===1&&r>n?(a=!0,n=r):(o=!1,a=!0);t++}return o}isReducedEchelonForm(){let t=0,r=0,n=-1,o=!0,a=!1;for(;t<this.rows&&o;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(t,r)===0?r++:this.get(t,r)===1&&r>n?(a=!0,n=r):(o=!1,a=!0);for(let s=r+1;s<this.rows;s++)this.get(t,s)!==0&&(o=!1);t++}return o}echelonForm(){let t=this.clone(),r=0,n=0;for(;r<t.rows&&n<t.columns;){let o=r;for(let a=r;a<t.rows;a++)t.get(a,n)>t.get(o,n)&&(o=a);if(t.get(o,n)===0)n++;else{t.swapRows(r,o);let a=t.get(r,n);for(let s=n;s<t.columns;s++)t.set(r,s,t.get(r,s)/a);for(let s=r+1;s<t.rows;s++){let l=t.get(s,n)/t.get(r,n);t.set(s,n,0);for(let u=n+1;u<t.columns;u++)t.set(s,u,t.get(s,u)-t.get(r,u)*l)}r++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),r=t.columns,n=t.rows,o=n-1;for(;o>=0;)if(t.maxRow(o)===0)o--;else{let a=0,s=!1;for(;a<n&&s===!1;)t.get(o,a)===1?s=!0:a++;for(let l=0;l<o;l++){let u=t.get(l,a);for(let c=a;c<r;c++){let f=t.get(l,c)-u*t.get(o,c);t.set(l,c,f)}}o--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:r=1,columns:n=1}=t;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let o=new Matrix$3(this.rows*r,this.columns*n);for(let a=0;a<r;a++)for(let s=0;s<n;s++)o.setSubMatrix(this,this.rows*a,this.columns*s);return o}fill(t){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,t);return this}neg(){return this.mulS(-1)}getRow(t){checkRowIndex(this,t);let r=[];for(let n=0;n<this.columns;n++)r.push(this.get(t,n));return r}getRowVector(t){return Matrix$3.rowVector(this.getRow(t))}setRow(t,r){checkRowIndex(this,t),r=checkRowVector(this,r);for(let n=0;n<this.columns;n++)this.set(t,n,r[n]);return this}swapRows(t,r){checkRowIndex(this,t),checkRowIndex(this,r);for(let n=0;n<this.columns;n++){let o=this.get(t,n);this.set(t,n,this.get(r,n)),this.set(r,n,o)}return this}getColumn(t){checkColumnIndex(this,t);let r=[];for(let n=0;n<this.rows;n++)r.push(this.get(n,t));return r}getColumnVector(t){return Matrix$3.columnVector(this.getColumn(t))}setColumn(t,r){checkColumnIndex(this,t),r=checkColumnVector(this,r);for(let n=0;n<this.rows;n++)this.set(n,t,r[n]);return this}swapColumns(t,r){checkColumnIndex(this,t),checkColumnIndex(this,r);for(let n=0;n<this.rows;n++){let o=this.get(n,t);this.set(n,t,this.get(n,r)),this.set(n,r,o)}return this}addRowVector(t){t=checkRowVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[n]);return this}subRowVector(t){t=checkRowVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[n]);return this}mulRowVector(t){t=checkRowVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[n]);return this}divRowVector(t){t=checkRowVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[n]);return this}addColumnVector(t){t=checkColumnVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[r]);return this}subColumnVector(t){t=checkColumnVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[r]);return this}mulColumnVector(t){t=checkColumnVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[r]);return this}divColumnVector(t){t=checkColumnVector(this,t);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[r]);return this}mulRow(t,r){checkRowIndex(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*r);return this}mulColumn(t,r){checkColumnIndex(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*r);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const r=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)>r[n]&&(r[n]=this.get(n,o));return r}case"column":{const r=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)>r[o]&&(r[o]=this.get(n,o));return r}case void 0:{let r=this.get(0,0);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)>r&&(r=this.get(n,o));return r}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){checkNonEmpty(this);let t=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)>t&&(t=this.get(n,o),r[0]=n,r[1]=o);return r}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const r=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)<r[n]&&(r[n]=this.get(n,o));return r}case"column":{const r=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)<r[o]&&(r[o]=this.get(n,o));return r}case void 0:{let r=this.get(0,0);for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)<r&&(r=this.get(n,o));return r}default:throw new Error(`invalid option: ${t}`)}}minIndex(){checkNonEmpty(this);let t=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let o=0;o<this.columns;o++)this.get(n,o)<t&&(t=this.get(n,o),r[0]=n,r[1]=o);return r}maxRow(t){if(checkRowIndex(this,t),this.isEmpty())return NaN;let r=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n));return r}maxRowIndex(t){checkRowIndex(this,t),checkNonEmpty(this);let r=this.get(t,0),n=[t,0];for(let o=1;o<this.columns;o++)this.get(t,o)>r&&(r=this.get(t,o),n[1]=o);return n}minRow(t){if(checkRowIndex(this,t),this.isEmpty())return NaN;let r=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n));return r}minRowIndex(t){checkRowIndex(this,t),checkNonEmpty(this);let r=this.get(t,0),n=[t,0];for(let o=1;o<this.columns;o++)this.get(t,o)<r&&(r=this.get(t,o),n[1]=o);return n}maxColumn(t){if(checkColumnIndex(this,t),this.isEmpty())return NaN;let r=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t));return r}maxColumnIndex(t){checkColumnIndex(this,t),checkNonEmpty(this);let r=this.get(0,t),n=[0,t];for(let o=1;o<this.rows;o++)this.get(o,t)>r&&(r=this.get(o,t),n[0]=o);return n}minColumn(t){if(checkColumnIndex(this,t),this.isEmpty())return NaN;let r=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t));return r}minColumnIndex(t){checkColumnIndex(this,t),checkNonEmpty(this);let r=this.get(0,t),n=[0,t];for(let o=1;o<this.rows;o++)this.get(o,t)<r&&(r=this.get(o,t),n[0]=o);return n}diag(){let t=Math.min(this.rows,this.columns),r=[];for(let n=0;n<t;n++)r.push(this.get(n,n));return r}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)t+=this.get(r,n),this.set(r,n,t);return this}dot(t){Be.isMatrix(t)&&(t=t.to1DArray());let r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let o=0;o<r.length;o++)n+=r[o]*t[o];return n}mmul(t){t=Matrix$3.checkMatrix(t);let r=this.rows,n=this.columns,o=t.columns,a=new Matrix$3(r,o),s=new Float64Array(n);for(let l=0;l<o;l++){for(let u=0;u<n;u++)s[u]=t.get(u,l);for(let u=0;u<r;u++){let c=0;for(let f=0;f<n;f++)c+=this.get(u,f)*s[f];a.set(u,l,c)}}return a}strassen2x2(t){t=Matrix$3.checkMatrix(t);let r=new Matrix$3(2,2);const n=this.get(0,0),o=t.get(0,0),a=this.get(0,1),s=t.get(0,1),l=this.get(1,0),u=t.get(1,0),c=this.get(1,1),f=t.get(1,1),d=(n+c)*(o+f),g=(l+c)*o,m=n*(s-f),x=c*(u-o),w=(n+a)*f,M=(l-n)*(o+s),b=(a-c)*(u+f),A=d+x-w+b,v=m+w,_=g+x,S=d-g+m+M;return r.set(0,0,A),r.set(0,1,v),r.set(1,0,_),r.set(1,1,S),r}strassen3x3(t){t=Matrix$3.checkMatrix(t);let r=new Matrix$3(3,3);const n=this.get(0,0),o=this.get(0,1),a=this.get(0,2),s=this.get(1,0),l=this.get(1,1),u=this.get(1,2),c=this.get(2,0),f=this.get(2,1),d=this.get(2,2),g=t.get(0,0),m=t.get(0,1),x=t.get(0,2),w=t.get(1,0),M=t.get(1,1),b=t.get(1,2),A=t.get(2,0),v=t.get(2,1),_=t.get(2,2),S=(n+o+a-s-l-f-d)*M,B=(n-s)*(-m+M),I=l*(-g+m+w-M-b-A+_),E=(-n+s+l)*(g-m+M),T=(s+l)*(-g+m),y=n*g,k=(-n+c+f)*(g-x+b),C=(-n+c)*(x-b),F=(c+f)*(-g+x),Y=(n+o+a-l-u-c-f)*b,K=f*(-g+x+w-M-b-A+v),ee=(-a+f+d)*(M+A-v),te=(a-d)*(M-v),q=a*A,ue=(f+d)*(-A+v),le=(-a+l+u)*(b+A-_),ge=(a-u)*(b-_),de=(l+u)*(-A+_),ie=o*w,ae=u*v,Q=s*x,he=c*m,pe=d*_,_e=y+q+ie,xe=S+E+T+y+ee+q+ue,ye=y+k+F+Y+q+le+de,ve=B+I+E+y+q+le+ge,R=B+E+T+y+ae,D=q+le+ge+de+Q,O=y+k+C+K+ee+te+q,V=ee+te+q+ue+he,G=y+k+C+F+pe;return r.set(0,0,_e),r.set(0,1,xe),r.set(0,2,ye),r.set(1,0,ve),r.set(1,1,R),r.set(1,2,D),r.set(2,0,O),r.set(2,1,V),r.set(2,2,G),r}mmulStrassen(t){t=Matrix$3.checkMatrix(t);let r=this.clone(),n=r.rows,o=r.columns,a=t.rows,s=t.columns;o!==a&&console.warn(`Multiplying ${n} x ${o} and ${a} x ${s} matrix: dimensions do not match.`);function l(d,g,m){let x=d.rows,w=d.columns;if(x===g&&w===m)return d;{let M=Be.zeros(g,m);return M=M.setSubMatrix(d,0,0),M}}let u=Math.max(n,a),c=Math.max(o,s);r=l(r,u,c),t=l(t,u,c);function f(d,g,m,x){if(m<=512||x<=512)return d.mmul(g);m%2===1&&x%2===1?(d=l(d,m+1,x+1),g=l(g,m+1,x+1)):m%2===1?(d=l(d,m+1,x),g=l(g,m+1,x)):x%2===1&&(d=l(d,m,x+1),g=l(g,m,x+1));let w=parseInt(d.rows/2,10),M=parseInt(d.columns/2,10),b=d.subMatrix(0,w-1,0,M-1),A=g.subMatrix(0,w-1,0,M-1),v=d.subMatrix(0,w-1,M,d.columns-1),_=g.subMatrix(0,w-1,M,g.columns-1),S=d.subMatrix(w,d.rows-1,0,M-1),B=g.subMatrix(w,g.rows-1,0,M-1),I=d.subMatrix(w,d.rows-1,M,d.columns-1),E=g.subMatrix(w,g.rows-1,M,g.columns-1),T=f(Be.add(b,I),Be.add(A,E),w,M),y=f(Be.add(S,I),A,w,M),k=f(b,Be.sub(_,E),w,M),C=f(I,Be.sub(B,A),w,M),F=f(Be.add(b,v),E,w,M),Y=f(Be.sub(S,b),Be.add(A,_),w,M),K=f(Be.sub(v,I),Be.add(B,E),w,M),ee=Be.add(T,C);ee.sub(F),ee.add(K);let te=Be.add(k,F),q=Be.add(y,C),ue=Be.sub(T,y);ue.add(k),ue.add(Y);let le=Be.zeros(2*ee.rows,2*ee.columns);return le=le.setSubMatrix(ee,0,0),le=le.setSubMatrix(te,ee.rows,0),le=le.setSubMatrix(q,0,ee.columns),le=le.setSubMatrix(ue,ee.rows,ee.columns),le.subMatrix(0,m-1,0,x-1)}return f(r,t,u,c)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=t;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let o=new Matrix$3(this.rows,this.columns);for(let a=0;a<this.rows;a++){const s=this.getRow(a);s.length>0&&rescale(s,{min:r,max:n,output:s}),o.setRow(a,s)}return o}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=t;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let o=new Matrix$3(this.rows,this.columns);for(let a=0;a<this.columns;a++){const s=this.getColumn(a);s.length&&rescale(s,{min:r,max:n,output:s}),o.setColumn(a,s)}return o}flipRows(){const t=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let n=0;n<t;n++){let o=this.get(r,n),a=this.get(r,this.columns-1-n);this.set(r,n,a),this.set(r,this.columns-1-n,o)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let n=0;n<t;n++){let o=this.get(n,r),a=this.get(this.rows-1-n,r);this.set(n,r,a),this.set(this.rows-1-n,r,o)}return this}kroneckerProduct(t){t=Matrix$3.checkMatrix(t);let r=this.rows,n=this.columns,o=t.rows,a=t.columns,s=new Matrix$3(r*o,n*a);for(let l=0;l<r;l++)for(let u=0;u<n;u++)for(let c=0;c<o;c++)for(let f=0;f<a;f++)s.set(o*l+c,a*u+f,this.get(l,u)*t.get(c,f));return s}kroneckerSum(t){if(t=Matrix$3.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let r=this.rows,n=t.rows,o=this.kroneckerProduct(Matrix$3.eye(n,n)),a=Matrix$3.eye(r,r).kroneckerProduct(t);return o.add(a)}transpose(){let t=new Matrix$3(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)t.set(n,r,this.get(r,n));return t}sortRows(t=compareNumbers){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t=compareNumbers){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,n,o){checkRange(this,t,r,n,o);let a=new Matrix$3(r-t+1,o-n+1);for(let s=t;s<=r;s++)for(let l=n;l<=o;l++)a.set(s-t,l-n,this.get(s,l));return a}subMatrixRow(t,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let o=new Matrix$3(t.length,n-r+1);for(let a=0;a<t.length;a++)for(let s=r;s<=n;s++){if(t[a]<0||t[a]>=this.rows)throw new RangeError(`Row index out of range: ${t[a]}`);o.set(a,s-r,this.get(t[a],s))}return o}subMatrixColumn(t,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let o=new Matrix$3(n-r+1,t.length);for(let a=0;a<t.length;a++)for(let s=r;s<=n;s++){if(t[a]<0||t[a]>=this.columns)throw new RangeError(`Column index out of range: ${t[a]}`);o.set(s-r,a,this.get(s,t[a]))}return o}setSubMatrix(t,r,n){if(t=Matrix$3.checkMatrix(t),t.isEmpty())return this;let o=r+t.rows-1,a=n+t.columns-1;checkRange(this,r,o,n,a);for(let s=0;s<t.rows;s++)for(let l=0;l<t.columns;l++)this.set(r+s,n+l,t.get(s,l));return this}selection(t,r){checkRowIndices(this,t),checkColumnIndices(this,r);let n=new Matrix$3(t.length,r.length);for(let o=0;o<t.length;o++){let a=t[o];for(let s=0;s<r.length;s++){let l=r[s];n.set(o,s,this.get(a,l))}}return n}trace(){let t=Math.min(this.rows,this.columns),r=0;for(let n=0;n<t;n++)r+=this.get(n,n);return r}clone(){let t=new Matrix$3(this.rows,this.columns);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)t.set(r,n,this.get(r,n));return t}sum(t){switch(t){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const r=this.sum(t);switch(t){case"row":{for(let n=0;n<this.rows;n++)r[n]/=this.columns;return r}case"column":{for(let n=0;n<this.columns;n++)r[n]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,r={}){if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:o=this.mean(t)}=r;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!isAnyArray.isAnyArray(o))throw new TypeError("mean must be an array");return varianceByRow(this,n,o)}case"column":{if(!isAnyArray.isAnyArray(o))throw new TypeError("mean must be an array");return varianceByColumn(this,n,o)}case void 0:{if(typeof o!="number")throw new TypeError("mean must be a number");return varianceAll(this,n,o)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,r){typeof t=="object"&&(r=t,t=void 0);const n=this.variance(t,r);if(t===void 0)return Math.sqrt(n);for(let o=0;o<n.length;o++)n[o]=Math.sqrt(n[o]);return n}center(t,r={}){if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");const{center:n=this.mean(t)}=r;switch(t){case"row":{if(!isAnyArray.isAnyArray(n))throw new TypeError("center must be an array");return centerByRow(this,n),this}case"column":{if(!isAnyArray.isAnyArray(n))throw new TypeError("center must be an array");return centerByColumn(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return centerAll(this,n),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,r={}){if(typeof t=="object"&&(r=t,t=void 0),typeof r!="object")throw new TypeError("options must be an object");let n=r.scale;switch(t){case"row":{if(n===void 0)n=getScaleByRow(this);else if(!isAnyArray.isAnyArray(n))throw new TypeError("scale must be an array");return scaleByRow(this,n),this}case"column":{if(n===void 0)n=getScaleByColumn(this);else if(!isAnyArray.isAnyArray(n))throw new TypeError("scale must be an array");return scaleByColumn(this,n),this}case void 0:{if(n===void 0)n=getScaleAll(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return scaleAll(this,n),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return inspectMatrixWithOptions(this,t)}};AbstractMatrix$1.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix$1.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(e,t){return e-t}function isArrayOfNumbers(e){return e.every(t=>typeof t=="number")}AbstractMatrix$1.random=AbstractMatrix$1.rand;AbstractMatrix$1.randomInt=AbstractMatrix$1.randInt;AbstractMatrix$1.diagonal=AbstractMatrix$1.diag;AbstractMatrix$1.prototype.diagonal=AbstractMatrix$1.prototype.diag;AbstractMatrix$1.identity=AbstractMatrix$1.eye;AbstractMatrix$1.prototype.negate=AbstractMatrix$1.prototype.neg;AbstractMatrix$1.prototype.tensorProduct=AbstractMatrix$1.prototype.kroneckerProduct;let Matrix$3=class ot extends AbstractMatrix$1{constructor(t,r){if(super(),ot.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0)if(this.data=[],Number.isInteger(r)&&r>=0)for(let n=0;n<t;n++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(isAnyArray.isAnyArray(t)){const n=t;if(t=n.length,r=t?n[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let o=0;o<t;o++){if(n[o].length!==r)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(n[o]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[o]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=t,this.columns=r}set(t,r,n){return this.data[t][r]=n,this}get(t,r){return this.data[t][r]}removeRow(t){return checkRowIndex(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,r){return r===void 0&&(r=t,t=this.rows),checkRowIndex(this,t,!0),r=Float64Array.from(checkRowVector(this,r)),this.data.splice(t,0,r),this.rows+=1,this}removeColumn(t){checkColumnIndex(this,t);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns-1);for(let o=0;o<t;o++)n[o]=this.data[r][o];for(let o=t+1;o<this.columns;o++)n[o-1]=this.data[r][o];this.data[r]=n}return this.columns-=1,this}addColumn(t,r){typeof r>"u"&&(r=t,t=this.columns),checkColumnIndex(this,t,!0),r=checkColumnVector(this,r);for(let n=0;n<this.rows;n++){const o=new Float64Array(this.columns+1);let a=0;for(;a<t;a++)o[a]=this.data[n][a];for(o[a++]=r[n];a<this.columns+1;a++)o[a]=this.data[n][a-1];this.data[n]=o}return this.columns+=1,this}};installMathOperations(AbstractMatrix$1,Matrix$3);class BaseView extends AbstractMatrix$1{constructor(t,r,n){super(),this.matrix=t,this.rows=r,this.columns=n}}let MatrixColumnView$1=class extends BaseView{constructor(t,r){checkColumnIndex(t,r),super(t,t.rows,1),this.column=r}set(t,r,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}},MatrixColumnSelectionView$1=class extends BaseView{constructor(t,r){checkColumnIndices(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,n){return this.matrix.set(t,this.columnIndices[r],n),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}},MatrixFlipColumnView$1=class extends BaseView{constructor(t){super(t,t.rows,t.columns)}set(t,r,n){return this.matrix.set(t,this.columns-r-1,n),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}},MatrixFlipRowView$1=class extends BaseView{constructor(t){super(t,t.rows,t.columns)}set(t,r,n){return this.matrix.set(this.rows-t-1,r,n),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}},MatrixRowView$1=class extends BaseView{constructor(t,r){checkRowIndex(t,r),super(t,1,t.columns),this.row=r}set(t,r,n){return this.matrix.set(this.row,r,n),this}get(t,r){return this.matrix.get(this.row,r)}},MatrixRowSelectionView$1=class extends BaseView{constructor(t,r){checkRowIndices(t,r),super(t,r.length,t.columns),this.rowIndices=r}set(t,r,n){return this.matrix.set(this.rowIndices[t],r,n),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}},MatrixSelectionView$1=class extends BaseView{constructor(t,r,n){checkRowIndices(t,r),checkColumnIndices(t,n),super(t,r.length,n.length),this.rowIndices=r,this.columnIndices=n}set(t,r,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],n),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}},MatrixSubView$1=class extends BaseView{constructor(t,r,n,o,a){checkRange(t,r,n,o,a),super(t,n-r+1,a-o+1),this.startRow=r,this.startColumn=o}set(t,r,n){return this.matrix.set(this.startRow+t,this.startColumn+r,n),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}},MatrixTransposeView$2=class extends BaseView{constructor(t){super(t,t.columns,t.rows)}set(t,r,n){return this.matrix.set(r,t,n),this}get(t,r){return this.matrix.get(r,t)}},WrapperMatrix1D$1=class extends AbstractMatrix$1{constructor(t,r={}){const{rows:n=1}=r;if(t.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,r,n){let o=this._calculateIndex(t,r);return this.data[o]=n,this}get(t,r){let n=this._calculateIndex(t,r);return this.data[n]}_calculateIndex(t,r){return t*this.columns+r}},WrapperMatrix2D$1=class extends AbstractMatrix$1{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,n){return this.data[t][r]=n,this}get(t,r){return this.data[t][r]}};function wrap$1(e,t){if(isAnyArray.isAnyArray(e))return e[0]&&isAnyArray.isAnyArray(e[0])?new WrapperMatrix2D$1(e):new WrapperMatrix1D$1(e,t);throw new Error("the argument is not an array")}let LuDecomposition$1=class{constructor(t){t=WrapperMatrix2D$1.checkMatrix(t);let r=t.clone(),n=r.rows,o=r.columns,a=new Float64Array(n),s=1,l,u,c,f,d,g,m,x,w;for(l=0;l<n;l++)a[l]=l;for(x=new Float64Array(n),u=0;u<o;u++){for(l=0;l<n;l++)x[l]=r.get(l,u);for(l=0;l<n;l++){for(w=Math.min(l,u),d=0,c=0;c<w;c++)d+=r.get(l,c)*x[c];x[l]-=d,r.set(l,u,x[l])}for(f=u,l=u+1;l<n;l++)Math.abs(x[l])>Math.abs(x[f])&&(f=l);if(f!==u){for(c=0;c<o;c++)g=r.get(f,c),r.set(f,c,r.get(u,c)),r.set(u,c,g);m=a[f],a[f]=a[u],a[u]=m,s=-s}if(u<n&&r.get(u,u)!==0)for(l=u+1;l<n;l++)r.set(l,u,r.get(l,u)/r.get(u,u))}this.LU=r,this.pivotVector=a,this.pivotSign=s}isSingular(){let t=this.LU,r=t.columns;for(let n=0;n<r;n++)if(t.get(n,n)===0)return!0;return!1}solve(t){t=Matrix$3.checkMatrix(t);let r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=r.columns,l,u,c;for(c=0;c<s;c++)for(l=c+1;l<s;l++)for(u=0;u<o;u++)a.set(l,u,a.get(l,u)-a.get(c,u)*r.get(l,c));for(c=s-1;c>=0;c--){for(u=0;u<o;u++)a.set(c,u,a.get(c,u)/r.get(c,c));for(l=0;l<c;l++)for(u=0;u<o;u++)a.set(l,u,a.get(l,u)-a.get(c,u)*r.get(l,c))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let r=this.pivotSign,n=t.columns;for(let o=0;o<n;o++)r*=t.get(o,o);return r}get lowerTriangularMatrix(){let t=this.LU,r=t.rows,n=t.columns,o=new Matrix$3(r,n);for(let a=0;a<r;a++)for(let s=0;s<n;s++)a>s?o.set(a,s,t.get(a,s)):a===s?o.set(a,s,1):o.set(a,s,0);return o}get upperTriangularMatrix(){let t=this.LU,r=t.rows,n=t.columns,o=new Matrix$3(r,n);for(let a=0;a<r;a++)for(let s=0;s<n;s++)a<=s?o.set(a,s,t.get(a,s)):o.set(a,s,0);return o}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function hypotenuse$1(e,t){let r=0;return Math.abs(e)>Math.abs(t)?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):t!==0?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0}let QrDecomposition$1=class{constructor(t){t=WrapperMatrix2D$1.checkMatrix(t);let r=t.clone(),n=t.rows,o=t.columns,a=new Float64Array(o),s,l,u,c;for(u=0;u<o;u++){let f=0;for(s=u;s<n;s++)f=hypotenuse$1(f,r.get(s,u));if(f!==0){for(r.get(u,u)<0&&(f=-f),s=u;s<n;s++)r.set(s,u,r.get(s,u)/f);for(r.set(u,u,r.get(u,u)+1),l=u+1;l<o;l++){for(c=0,s=u;s<n;s++)c+=r.get(s,u)*r.get(s,l);for(c=-c/r.get(u,u),s=u;s<n;s++)r.set(s,l,r.get(s,l)+c*r.get(s,u))}}a[u]=-f}this.QR=r,this.Rdiag=a}solve(t){t=Matrix$3.checkMatrix(t);let r=this.QR,n=r.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let o=t.columns,a=t.clone(),s=r.columns,l,u,c,f;for(c=0;c<s;c++)for(u=0;u<o;u++){for(f=0,l=c;l<n;l++)f+=r.get(l,c)*a.get(l,u);for(f=-f/r.get(c,c),l=c;l<n;l++)a.set(l,u,a.get(l,u)+f*r.get(l,c))}for(c=s-1;c>=0;c--){for(u=0;u<o;u++)a.set(c,u,a.get(c,u)/this.Rdiag[c]);for(l=0;l<c;l++)for(u=0;u<o;u++)a.set(l,u,a.get(l,u)-a.get(c,u)*r.get(l,c))}return a.subMatrix(0,s-1,0,o-1)}isFullRank(){let t=this.QR.columns;for(let r=0;r<t;r++)if(this.Rdiag[r]===0)return!1;return!0}get upperTriangularMatrix(){let t=this.QR,r=t.columns,n=new Matrix$3(r,r),o,a;for(o=0;o<r;o++)for(a=0;a<r;a++)o<a?n.set(o,a,t.get(o,a)):o===a?n.set(o,a,this.Rdiag[o]):n.set(o,a,0);return n}get orthogonalMatrix(){let t=this.QR,r=t.rows,n=t.columns,o=new Matrix$3(r,n),a,s,l,u;for(l=n-1;l>=0;l--){for(a=0;a<r;a++)o.set(a,l,0);for(o.set(l,l,1),s=l;s<n;s++)if(t.get(l,l)!==0){for(u=0,a=l;a<r;a++)u+=t.get(a,l)*o.get(a,s);for(u=-u/t.get(l,l),a=l;a<r;a++)o.set(a,s,o.get(a,s)+u*t.get(a,l))}}return o}},SingularValueDecomposition$1=class{constructor(t,r={}){if(t=WrapperMatrix2D$1.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,o=t.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:s=!0,autoTranspose:l=!1}=r;let u=!!a,c=!!s,f=!1,d;if(n<o)if(!l)d=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{d=t.transpose(),n=d.rows,o=d.columns,f=!0;let y=u;u=c,c=y}else d=t.clone();let g=Math.min(n,o),m=Math.min(n+1,o),x=new Float64Array(m),w=new Matrix$3(n,g),M=new Matrix$3(o,o),b=new Float64Array(o),A=new Float64Array(n),v=new Float64Array(m);for(let y=0;y<m;y++)v[y]=y;let _=Math.min(n-1,o),S=Math.max(0,Math.min(o-2,n)),B=Math.max(_,S);for(let y=0;y<B;y++){if(y<_){x[y]=0;for(let k=y;k<n;k++)x[y]=hypotenuse$1(x[y],d.get(k,y));if(x[y]!==0){d.get(y,y)<0&&(x[y]=-x[y]);for(let k=y;k<n;k++)d.set(k,y,d.get(k,y)/x[y]);d.set(y,y,d.get(y,y)+1)}x[y]=-x[y]}for(let k=y+1;k<o;k++){if(y<_&&x[y]!==0){let C=0;for(let F=y;F<n;F++)C+=d.get(F,y)*d.get(F,k);C=-C/d.get(y,y);for(let F=y;F<n;F++)d.set(F,k,d.get(F,k)+C*d.get(F,y))}b[k]=d.get(y,k)}if(u&&y<_)for(let k=y;k<n;k++)w.set(k,y,d.get(k,y));if(y<S){b[y]=0;for(let k=y+1;k<o;k++)b[y]=hypotenuse$1(b[y],b[k]);if(b[y]!==0){b[y+1]<0&&(b[y]=0-b[y]);for(let k=y+1;k<o;k++)b[k]/=b[y];b[y+1]+=1}if(b[y]=-b[y],y+1<n&&b[y]!==0){for(let k=y+1;k<n;k++)A[k]=0;for(let k=y+1;k<n;k++)for(let C=y+1;C<o;C++)A[k]+=b[C]*d.get(k,C);for(let k=y+1;k<o;k++){let C=-b[k]/b[y+1];for(let F=y+1;F<n;F++)d.set(F,k,d.get(F,k)+C*A[F])}}if(c)for(let k=y+1;k<o;k++)M.set(k,y,b[k])}}let I=Math.min(o,n+1);if(_<o&&(x[_]=d.get(_,_)),n<I&&(x[I-1]=0),S+1<I&&(b[S]=d.get(S,I-1)),b[I-1]=0,u){for(let y=_;y<g;y++){for(let k=0;k<n;k++)w.set(k,y,0);w.set(y,y,1)}for(let y=_-1;y>=0;y--)if(x[y]!==0){for(let k=y+1;k<g;k++){let C=0;for(let F=y;F<n;F++)C+=w.get(F,y)*w.get(F,k);C=-C/w.get(y,y);for(let F=y;F<n;F++)w.set(F,k,w.get(F,k)+C*w.get(F,y))}for(let k=y;k<n;k++)w.set(k,y,-w.get(k,y));w.set(y,y,1+w.get(y,y));for(let k=0;k<y-1;k++)w.set(k,y,0)}else{for(let k=0;k<n;k++)w.set(k,y,0);w.set(y,y,1)}}if(c)for(let y=o-1;y>=0;y--){if(y<S&&b[y]!==0)for(let k=y+1;k<o;k++){let C=0;for(let F=y+1;F<o;F++)C+=M.get(F,y)*M.get(F,k);C=-C/M.get(y+1,y);for(let F=y+1;F<o;F++)M.set(F,k,M.get(F,k)+C*M.get(F,y))}for(let k=0;k<o;k++)M.set(k,y,0);M.set(y,y,1)}let E=I-1,T=Number.EPSILON;for(;I>0;){let y,k;for(y=I-2;y>=-1&&y!==-1;y--){const C=Number.MIN_VALUE+T*Math.abs(x[y]+Math.abs(x[y+1]));if(Math.abs(b[y])<=C||Number.isNaN(b[y])){b[y]=0;break}}if(y===I-2)k=4;else{let C;for(C=I-1;C>=y&&C!==y;C--){let F=(C!==I?Math.abs(b[C]):0)+(C!==y+1?Math.abs(b[C-1]):0);if(Math.abs(x[C])<=T*F){x[C]=0;break}}C===y?k=3:C===I-1?k=1:(k=2,y=C)}switch(y++,k){case 1:{let C=b[I-2];b[I-2]=0;for(let F=I-2;F>=y;F--){let Y=hypotenuse$1(x[F],C),K=x[F]/Y,ee=C/Y;if(x[F]=Y,F!==y&&(C=-ee*b[F-1],b[F-1]=K*b[F-1]),c)for(let te=0;te<o;te++)Y=K*M.get(te,F)+ee*M.get(te,I-1),M.set(te,I-1,-ee*M.get(te,F)+K*M.get(te,I-1)),M.set(te,F,Y)}break}case 2:{let C=b[y-1];b[y-1]=0;for(let F=y;F<I;F++){let Y=hypotenuse$1(x[F],C),K=x[F]/Y,ee=C/Y;if(x[F]=Y,C=-ee*b[F],b[F]=K*b[F],u)for(let te=0;te<n;te++)Y=K*w.get(te,F)+ee*w.get(te,y-1),w.set(te,y-1,-ee*w.get(te,F)+K*w.get(te,y-1)),w.set(te,F,Y)}break}case 3:{const C=Math.max(Math.abs(x[I-1]),Math.abs(x[I-2]),Math.abs(b[I-2]),Math.abs(x[y]),Math.abs(b[y])),F=x[I-1]/C,Y=x[I-2]/C,K=b[I-2]/C,ee=x[y]/C,te=b[y]/C,q=((Y+F)*(Y-F)+K*K)/2,ue=F*K*(F*K);let le=0;(q!==0||ue!==0)&&(q<0?le=0-Math.sqrt(q*q+ue):le=Math.sqrt(q*q+ue),le=ue/(q+le));let ge=(ee+F)*(ee-F)+le,de=ee*te;for(let ie=y;ie<I-1;ie++){let ae=hypotenuse$1(ge,de);ae===0&&(ae=Number.MIN_VALUE);let Q=ge/ae,he=de/ae;if(ie!==y&&(b[ie-1]=ae),ge=Q*x[ie]+he*b[ie],b[ie]=Q*b[ie]-he*x[ie],de=he*x[ie+1],x[ie+1]=Q*x[ie+1],c)for(let pe=0;pe<o;pe++)ae=Q*M.get(pe,ie)+he*M.get(pe,ie+1),M.set(pe,ie+1,-he*M.get(pe,ie)+Q*M.get(pe,ie+1)),M.set(pe,ie,ae);if(ae=hypotenuse$1(ge,de),ae===0&&(ae=Number.MIN_VALUE),Q=ge/ae,he=de/ae,x[ie]=ae,ge=Q*b[ie]+he*x[ie+1],x[ie+1]=-he*b[ie]+Q*x[ie+1],de=he*b[ie+1],b[ie+1]=Q*b[ie+1],u&&ie<n-1)for(let pe=0;pe<n;pe++)ae=Q*w.get(pe,ie)+he*w.get(pe,ie+1),w.set(pe,ie+1,-he*w.get(pe,ie)+Q*w.get(pe,ie+1)),w.set(pe,ie,ae)}b[I-2]=ge;break}case 4:{if(x[y]<=0&&(x[y]=x[y]<0?-x[y]:0,c))for(let C=0;C<=E;C++)M.set(C,y,-M.get(C,y));for(;y<E&&!(x[y]>=x[y+1]);){let C=x[y];if(x[y]=x[y+1],x[y+1]=C,c&&y<o-1)for(let F=0;F<o;F++)C=M.get(F,y+1),M.set(F,y+1,M.get(F,y)),M.set(F,y,C);if(u&&y<n-1)for(let F=0;F<n;F++)C=w.get(F,y+1),w.set(F,y+1,w.get(F,y)),w.set(F,y,C);y++}I--;break}}}if(f){let y=M;M=w,w=y}this.m=n,this.n=o,this.s=x,this.U=w,this.V=M}solve(t){let r=t,n=this.threshold,o=this.s.length,a=Matrix$3.zeros(o,o);for(let g=0;g<o;g++)Math.abs(this.s[g])<=n?a.set(g,g,0):a.set(g,g,1/this.s[g]);let s=this.U,l=this.rightSingularVectors,u=l.mmul(a),c=l.rows,f=s.rows,d=Matrix$3.zeros(c,f);for(let g=0;g<c;g++)for(let m=0;m<f;m++){let x=0;for(let w=0;w<o;w++)x+=u.get(g,w)*s.get(m,w);d.set(g,m,x)}return d.mmul(r)}solveForDiagonal(t){return this.solve(Matrix$3.diag(t))}inverse(){let t=this.V,r=this.threshold,n=t.rows,o=t.columns,a=new Matrix$3(n,this.s.length);for(let f=0;f<n;f++)for(let d=0;d<o;d++)Math.abs(this.s[d])>r&&a.set(f,d,t.get(f,d)/this.s[d]);let s=this.U,l=s.rows,u=s.columns,c=new Matrix$3(n,l);for(let f=0;f<n;f++)for(let d=0;d<l;d++){let g=0;for(let m=0;m<u;m++)g+=a.get(f,m)*s.get(d,m);c.set(f,d,g)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,n=this.s;for(let o=0,a=n.length;o<a;o++)n[o]>t&&r++;return r}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix$3.diag(this.s)}};function inverse$1(e,t=!1){return e=WrapperMatrix2D$1.checkMatrix(e),t?new SingularValueDecomposition$1(e).inverse():solve$1(e,Matrix$3.eye(e.rows))}function solve$1(e,t,r=!1){return e=WrapperMatrix2D$1.checkMatrix(e),t=WrapperMatrix2D$1.checkMatrix(t),r?new SingularValueDecomposition$1(e).solve(t):e.isSquare()?new LuDecomposition$1(e).solve(t):new QrDecomposition$1(e).solve(t)}function determinant$1(e){if(e=Matrix$3.checkMatrix(e),e.isSquare()){if(e.columns===0)return 1;let t,r,n,o;if(e.columns===2)return t=e.get(0,0),r=e.get(0,1),n=e.get(1,0),o=e.get(1,1),t*o-r*n;if(e.columns===3){let a,s,l;return a=new MatrixSelectionView$1(e,[1,2],[1,2]),s=new MatrixSelectionView$1(e,[1,2],[0,2]),l=new MatrixSelectionView$1(e,[1,2],[0,1]),t=e.get(0,0),r=e.get(0,1),n=e.get(0,2),t*determinant$1(a)-r*determinant$1(s)+n*determinant$1(l)}else return new LuDecomposition$1(e).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xrange(e,t){let r=[];for(let n=0;n<e;n++)n!==t&&r.push(n);return r}function dependenciesOneRow(e,t,r,n=1e-9,o=1e-9){if(e>o)return new Array(t.rows+1).fill(0);{let a=t.addRow(r,[0]);for(let s=0;s<a.rows;s++)Math.abs(a.get(s,0))<n&&a.set(s,0,0);return a.to1DArray()}}function linearDependencies$1(e,t={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=t;e=Matrix$3.checkMatrix(e);let o=e.rows,a=new Matrix$3(o,o);for(let s=0;s<o;s++){let l=Matrix$3.columnVector(e.getRow(s)),u=e.subMatrixRow(xrange(o,s)).transpose(),f=new SingularValueDecomposition$1(u).solve(l),d=Matrix$3.sub(l,u.mmul(f)).abs().max();a.setRow(s,dependenciesOneRow(d,f,s,r,n))}return a}function pseudoInverse$1(e,t=Number.EPSILON){if(e=Matrix$3.checkMatrix(e),e.isEmpty())return e.transpose();let r=new SingularValueDecomposition$1(e,{autoTranspose:!0}),n=r.leftSingularVectors,o=r.rightSingularVectors,a=r.diagonal;for(let s=0;s<a.length;s++)Math.abs(a[s])>t?a[s]=1/a[s]:a[s]=0;return o.mmul(Matrix$3.diag(a).mmul(n.transpose()))}function covariance$1(e,t=e,r={}){e=new Matrix$3(e);let n=!1;if(typeof t=="object"&&!Matrix$3.isMatrix(t)&&!isAnyArray.isAnyArray(t)?(r=t,t=e,n=!0):t=new Matrix$3(t),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0}=r;o&&(e=e.center("column"),n||(t=t.center("column")));const a=e.transpose().mmul(t);for(let s=0;s<a.rows;s++)for(let l=0;l<a.columns;l++)a.set(s,l,a.get(s,l)*(1/(e.rows-1)));return a}function correlation$1(e,t=e,r={}){e=new Matrix$3(e);let n=!1;if(typeof t=="object"&&!Matrix$3.isMatrix(t)&&!isAnyArray.isAnyArray(t)?(r=t,t=e,n=!0):t=new Matrix$3(t),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:o=!0,scale:a=!0}=r;o&&(e.center("column"),n||t.center("column")),a&&(e.scale("column"),n||t.scale("column"));const s=e.standardDeviation("column",{unbiased:!0}),l=n?s:t.standardDeviation("column",{unbiased:!0}),u=e.transpose().mmul(t);for(let c=0;c<u.rows;c++)for(let f=0;f<u.columns;f++)u.set(c,f,u.get(c,f)*(1/(s[c]*l[f]))*(1/(e.rows-1)));return u}let EigenvalueDecomposition$1=class{constructor(t,r={}){const{assumeSymmetric:n=!1}=r;if(t=WrapperMatrix2D$1.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let o=t.columns,a=new Matrix$3(o,o),s=new Float64Array(o),l=new Float64Array(o),u=t,c,f,d=!1;if(n?d=!0:d=t.isSymmetric(),d){for(c=0;c<o;c++)for(f=0;f<o;f++)a.set(c,f,u.get(c,f));tred2(o,l,s,a),tql2(o,l,s,a)}else{let g=new Matrix$3(o,o),m=new Float64Array(o);for(f=0;f<o;f++)for(c=0;c<o;c++)g.set(c,f,u.get(c,f));orthes(o,g,m,a),hqr2(o,l,s,a,g)}this.n=o,this.e=l,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t=this.n,r=this.e,n=this.d,o=new Matrix$3(t,t),a,s;for(a=0;a<t;a++){for(s=0;s<t;s++)o.set(a,s,0);o.set(a,a,n[a]),r[a]>0?o.set(a,a+1,r[a]):r[a]<0&&o.set(a,a-1,r[a])}return o}};function tred2(e,t,r,n){let o,a,s,l,u,c,f,d;for(u=0;u<e;u++)r[u]=n.get(e-1,u);for(l=e-1;l>0;l--){for(d=0,s=0,c=0;c<l;c++)d=d+Math.abs(r[c]);if(d===0)for(t[l]=r[l-1],u=0;u<l;u++)r[u]=n.get(l-1,u),n.set(l,u,0),n.set(u,l,0);else{for(c=0;c<l;c++)r[c]/=d,s+=r[c]*r[c];for(o=r[l-1],a=Math.sqrt(s),o>0&&(a=-a),t[l]=d*a,s=s-o*a,r[l-1]=o-a,u=0;u<l;u++)t[u]=0;for(u=0;u<l;u++){for(o=r[u],n.set(u,l,o),a=t[u]+n.get(u,u)*o,c=u+1;c<=l-1;c++)a+=n.get(c,u)*r[c],t[c]+=n.get(c,u)*o;t[u]=a}for(o=0,u=0;u<l;u++)t[u]/=s,o+=t[u]*r[u];for(f=o/(s+s),u=0;u<l;u++)t[u]-=f*r[u];for(u=0;u<l;u++){for(o=r[u],a=t[u],c=u;c<=l-1;c++)n.set(c,u,n.get(c,u)-(o*t[c]+a*r[c]));r[u]=n.get(l-1,u),n.set(l,u,0)}}r[l]=s}for(l=0;l<e-1;l++){if(n.set(e-1,l,n.get(l,l)),n.set(l,l,1),s=r[l+1],s!==0){for(c=0;c<=l;c++)r[c]=n.get(c,l+1)/s;for(u=0;u<=l;u++){for(a=0,c=0;c<=l;c++)a+=n.get(c,l+1)*n.get(c,u);for(c=0;c<=l;c++)n.set(c,u,n.get(c,u)-a*r[c])}}for(c=0;c<=l;c++)n.set(c,l+1,0)}for(u=0;u<e;u++)r[u]=n.get(e-1,u),n.set(e-1,u,0);n.set(e-1,e-1,1),t[0]=0}function tql2(e,t,r,n){let o,a,s,l,u,c,f,d,g,m,x,w,M,b,A,v;for(s=1;s<e;s++)t[s-1]=t[s];t[e-1]=0;let _=0,S=0,B=Number.EPSILON;for(c=0;c<e;c++){for(S=Math.max(S,Math.abs(r[c])+Math.abs(t[c])),f=c;f<e&&!(Math.abs(t[f])<=B*S);)f++;if(f>c)do{for(o=r[c],d=(r[c+1]-o)/(2*t[c]),g=hypotenuse$1(d,1),d<0&&(g=-g),r[c]=t[c]/(d+g),r[c+1]=t[c]*(d+g),m=r[c+1],a=o-r[c],s=c+2;s<e;s++)r[s]-=a;for(_=_+a,d=r[f],x=1,w=x,M=x,b=t[c+1],A=0,v=0,s=f-1;s>=c;s--)for(M=w,w=x,v=A,o=x*t[s],a=x*d,g=hypotenuse$1(d,t[s]),t[s+1]=A*g,A=t[s]/g,x=d/g,d=x*r[s]-A*o,r[s+1]=a+A*(x*o+A*r[s]),u=0;u<e;u++)a=n.get(u,s+1),n.set(u,s+1,A*n.get(u,s)+x*a),n.set(u,s,x*n.get(u,s)-A*a);d=-A*v*M*b*t[c]/m,t[c]=A*d,r[c]=x*d}while(Math.abs(t[c])>B*S);r[c]=r[c]+_,t[c]=0}for(s=0;s<e-1;s++){for(u=s,d=r[s],l=s+1;l<e;l++)r[l]<d&&(u=l,d=r[l]);if(u!==s)for(r[u]=r[s],r[s]=d,l=0;l<e;l++)d=n.get(l,s),n.set(l,s,n.get(l,u)),n.set(l,u,d)}}function orthes(e,t,r,n){let o=0,a=e-1,s,l,u,c,f,d,g;for(d=o+1;d<=a-1;d++){for(g=0,c=d;c<=a;c++)g=g+Math.abs(t.get(c,d-1));if(g!==0){for(u=0,c=a;c>=d;c--)r[c]=t.get(c,d-1)/g,u+=r[c]*r[c];for(l=Math.sqrt(u),r[d]>0&&(l=-l),u=u-r[d]*l,r[d]=r[d]-l,f=d;f<e;f++){for(s=0,c=a;c>=d;c--)s+=r[c]*t.get(c,f);for(s=s/u,c=d;c<=a;c++)t.set(c,f,t.get(c,f)-s*r[c])}for(c=0;c<=a;c++){for(s=0,f=a;f>=d;f--)s+=r[f]*t.get(c,f);for(s=s/u,f=d;f<=a;f++)t.set(c,f,t.get(c,f)-s*r[f])}r[d]=g*r[d],t.set(d,d-1,g*l)}}for(c=0;c<e;c++)for(f=0;f<e;f++)n.set(c,f,c===f?1:0);for(d=a-1;d>=o+1;d--)if(t.get(d,d-1)!==0){for(c=d+1;c<=a;c++)r[c]=t.get(c,d-1);for(f=d;f<=a;f++){for(l=0,c=d;c<=a;c++)l+=r[c]*n.get(c,f);for(l=l/r[d]/t.get(d,d-1),c=d;c<=a;c++)n.set(c,f,n.get(c,f)+l*r[c])}}}function hqr2(e,t,r,n,o){let a=e-1,s=0,l=e-1,u=Number.EPSILON,c=0,f=0,d=0,g=0,m=0,x=0,w=0,M=0,b,A,v,_,S,B,I,E,T,y,k,C,F,Y,K;for(b=0;b<e;b++)for((b<s||b>l)&&(r[b]=o.get(b,b),t[b]=0),A=Math.max(b-1,0);A<e;A++)f=f+Math.abs(o.get(b,A));for(;a>=s;){for(_=a;_>s&&(x=Math.abs(o.get(_-1,_-1))+Math.abs(o.get(_,_)),x===0&&(x=f),!(Math.abs(o.get(_,_-1))<u*x));)_--;if(_===a)o.set(a,a,o.get(a,a)+c),r[a]=o.get(a,a),t[a]=0,a--,M=0;else if(_===a-1){if(I=o.get(a,a-1)*o.get(a-1,a),d=(o.get(a-1,a-1)-o.get(a,a))/2,g=d*d+I,w=Math.sqrt(Math.abs(g)),o.set(a,a,o.get(a,a)+c),o.set(a-1,a-1,o.get(a-1,a-1)+c),E=o.get(a,a),g>=0){for(w=d>=0?d+w:d-w,r[a-1]=E+w,r[a]=r[a-1],w!==0&&(r[a]=E-I/w),t[a-1]=0,t[a]=0,E=o.get(a,a-1),x=Math.abs(E)+Math.abs(w),d=E/x,g=w/x,m=Math.sqrt(d*d+g*g),d=d/m,g=g/m,A=a-1;A<e;A++)w=o.get(a-1,A),o.set(a-1,A,g*w+d*o.get(a,A)),o.set(a,A,g*o.get(a,A)-d*w);for(b=0;b<=a;b++)w=o.get(b,a-1),o.set(b,a-1,g*w+d*o.get(b,a)),o.set(b,a,g*o.get(b,a)-d*w);for(b=s;b<=l;b++)w=n.get(b,a-1),n.set(b,a-1,g*w+d*n.get(b,a)),n.set(b,a,g*n.get(b,a)-d*w)}else r[a-1]=E+d,r[a]=E+d,t[a-1]=w,t[a]=-w;a=a-2,M=0}else{if(E=o.get(a,a),T=0,I=0,_<a&&(T=o.get(a-1,a-1),I=o.get(a,a-1)*o.get(a-1,a)),M===10){for(c+=E,b=s;b<=a;b++)o.set(b,b,o.get(b,b)-E);x=Math.abs(o.get(a,a-1))+Math.abs(o.get(a-1,a-2)),E=T=.75*x,I=-.4375*x*x}if(M===30&&(x=(T-E)/2,x=x*x+I,x>0)){for(x=Math.sqrt(x),T<E&&(x=-x),x=E-I/((T-E)/2+x),b=s;b<=a;b++)o.set(b,b,o.get(b,b)-x);c+=x,E=T=I=.964}for(M=M+1,S=a-2;S>=_&&(w=o.get(S,S),m=E-w,x=T-w,d=(m*x-I)/o.get(S+1,S)+o.get(S,S+1),g=o.get(S+1,S+1)-w-m-x,m=o.get(S+2,S+1),x=Math.abs(d)+Math.abs(g)+Math.abs(m),d=d/x,g=g/x,m=m/x,!(S===_||Math.abs(o.get(S,S-1))*(Math.abs(g)+Math.abs(m))<u*(Math.abs(d)*(Math.abs(o.get(S-1,S-1))+Math.abs(w)+Math.abs(o.get(S+1,S+1))))));)S--;for(b=S+2;b<=a;b++)o.set(b,b-2,0),b>S+2&&o.set(b,b-3,0);for(v=S;v<=a-1&&(Y=v!==a-1,v!==S&&(d=o.get(v,v-1),g=o.get(v+1,v-1),m=Y?o.get(v+2,v-1):0,E=Math.abs(d)+Math.abs(g)+Math.abs(m),E!==0&&(d=d/E,g=g/E,m=m/E)),E!==0);v++)if(x=Math.sqrt(d*d+g*g+m*m),d<0&&(x=-x),x!==0){for(v!==S?o.set(v,v-1,-x*E):_!==S&&o.set(v,v-1,-o.get(v,v-1)),d=d+x,E=d/x,T=g/x,w=m/x,g=g/d,m=m/d,A=v;A<e;A++)d=o.get(v,A)+g*o.get(v+1,A),Y&&(d=d+m*o.get(v+2,A),o.set(v+2,A,o.get(v+2,A)-d*w)),o.set(v,A,o.get(v,A)-d*E),o.set(v+1,A,o.get(v+1,A)-d*T);for(b=0;b<=Math.min(a,v+3);b++)d=E*o.get(b,v)+T*o.get(b,v+1),Y&&(d=d+w*o.get(b,v+2),o.set(b,v+2,o.get(b,v+2)-d*m)),o.set(b,v,o.get(b,v)-d),o.set(b,v+1,o.get(b,v+1)-d*g);for(b=s;b<=l;b++)d=E*n.get(b,v)+T*n.get(b,v+1),Y&&(d=d+w*n.get(b,v+2),n.set(b,v+2,n.get(b,v+2)-d*m)),n.set(b,v,n.get(b,v)-d),n.set(b,v+1,n.get(b,v+1)-d*g)}}}if(f!==0){for(a=e-1;a>=0;a--)if(d=r[a],g=t[a],g===0)for(_=a,o.set(a,a,1),b=a-1;b>=0;b--){for(I=o.get(b,b)-d,m=0,A=_;A<=a;A++)m=m+o.get(b,A)*o.get(A,a);if(t[b]<0)w=I,x=m;else if(_=b,t[b]===0?o.set(b,a,I!==0?-m/I:-m/(u*f)):(E=o.get(b,b+1),T=o.get(b+1,b),g=(r[b]-d)*(r[b]-d)+t[b]*t[b],B=(E*x-w*m)/g,o.set(b,a,B),o.set(b+1,a,Math.abs(E)>Math.abs(w)?(-m-I*B)/E:(-x-T*B)/w)),B=Math.abs(o.get(b,a)),u*B*B>1)for(A=b;A<=a;A++)o.set(A,a,o.get(A,a)/B)}else if(g<0)for(_=a-1,Math.abs(o.get(a,a-1))>Math.abs(o.get(a-1,a))?(o.set(a-1,a-1,g/o.get(a,a-1)),o.set(a-1,a,-(o.get(a,a)-d)/o.get(a,a-1))):(K=cdiv(0,-o.get(a-1,a),o.get(a-1,a-1)-d,g),o.set(a-1,a-1,K[0]),o.set(a-1,a,K[1])),o.set(a,a-1,0),o.set(a,a,1),b=a-2;b>=0;b--){for(y=0,k=0,A=_;A<=a;A++)y=y+o.get(b,A)*o.get(A,a-1),k=k+o.get(b,A)*o.get(A,a);if(I=o.get(b,b)-d,t[b]<0)w=I,m=y,x=k;else if(_=b,t[b]===0?(K=cdiv(-y,-k,I,g),o.set(b,a-1,K[0]),o.set(b,a,K[1])):(E=o.get(b,b+1),T=o.get(b+1,b),C=(r[b]-d)*(r[b]-d)+t[b]*t[b]-g*g,F=(r[b]-d)*2*g,C===0&&F===0&&(C=u*f*(Math.abs(I)+Math.abs(g)+Math.abs(E)+Math.abs(T)+Math.abs(w))),K=cdiv(E*m-w*y+g*k,E*x-w*k-g*y,C,F),o.set(b,a-1,K[0]),o.set(b,a,K[1]),Math.abs(E)>Math.abs(w)+Math.abs(g)?(o.set(b+1,a-1,(-y-I*o.get(b,a-1)+g*o.get(b,a))/E),o.set(b+1,a,(-k-I*o.get(b,a)-g*o.get(b,a-1))/E)):(K=cdiv(-m-T*o.get(b,a-1),-x-T*o.get(b,a),w,g),o.set(b+1,a-1,K[0]),o.set(b+1,a,K[1]))),B=Math.max(Math.abs(o.get(b,a-1)),Math.abs(o.get(b,a))),u*B*B>1)for(A=b;A<=a;A++)o.set(A,a-1,o.get(A,a-1)/B),o.set(A,a,o.get(A,a)/B)}for(b=0;b<e;b++)if(b<s||b>l)for(A=b;A<e;A++)n.set(b,A,o.get(b,A));for(A=e-1;A>=s;A--)for(b=s;b<=l;b++){for(w=0,v=s;v<=Math.min(A,l);v++)w=w+n.get(b,v)*o.get(v,A);n.set(b,A,w)}}}function cdiv(e,t,r,n){let o,a;return Math.abs(r)>Math.abs(n)?(o=n/r,a=r+o*n,[(e+o*t)/a,(t-o*e)/a]):(o=r/n,a=n+o*r,[(o*e+t)/a,(o*t-e)/a])}let CholeskyDecomposition$1=class{constructor(t){if(t=WrapperMatrix2D$1.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let r=t,n=r.rows,o=new Matrix$3(n,n),a=!0,s,l,u;for(l=0;l<n;l++){let c=0;for(u=0;u<l;u++){let f=0;for(s=0;s<u;s++)f+=o.get(u,s)*o.get(l,s);f=(r.get(l,u)-f)/o.get(u,u),o.set(l,u,f),c=c+f*f}for(c=r.get(l,l)-c,a&=c>0,o.set(l,l,Math.sqrt(Math.max(c,0))),u=l+1;u<n;u++)o.set(l,u,0)}this.L=o,this.positiveDefinite=!!a}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=WrapperMatrix2D$1.checkMatrix(t);let r=this.L,n=r.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let o=t.columns,a=t.clone(),s,l,u;for(u=0;u<n;u++)for(l=0;l<o;l++){for(s=0;s<u;s++)a.set(u,l,a.get(u,l)-a.get(s,l)*r.get(u,s));a.set(u,l,a.get(u,l)/r.get(u,u))}for(u=n-1;u>=0;u--)for(l=0;l<o;l++){for(s=u+1;s<n;s++)a.set(u,l,a.get(u,l)-a.get(s,l)*r.get(s,u));a.set(u,l,a.get(u,l)/r.get(u,u))}return a}get lowerTriangularMatrix(){return this.L}};class nipals{constructor(t,r={}){t=WrapperMatrix2D$1.checkMatrix(t);let{Y:n}=r;const{scaleScores:o=!1,maxIterations:a=1e3,terminationCriteria:s=1e-10}=r;let l;if(n){if(isAnyArray.isAnyArray(n)&&typeof n[0]=="number"?n=Matrix$3.columnVector(n):n=WrapperMatrix2D$1.checkMatrix(n),n.rows!==t.rows)throw new Error("Y should have the same number of rows as X");l=n.getColumnVector(0)}else l=t.getColumnVector(0);let u=1,c,f,d,g;for(let m=0;m<a&&u>s;m++)d=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),d=d.div(d.norm()),c=t.mmul(d).div(d.transpose().mmul(d).get(0,0)),m>0&&(u=c.clone().sub(g).pow(2).sum()),g=c.clone(),n?(f=n.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0)),f=f.div(f.norm()),l=n.mmul(f).div(f.transpose().mmul(f).get(0,0))):l=c;if(n){let m=t.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0));m=m.div(m.norm());let x=t.clone().sub(c.clone().mmul(m.transpose())),w=l.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0)),M=n.clone().sub(c.clone().mulS(w.get(0,0)).mmul(f.transpose()));this.t=c,this.p=m.transpose(),this.w=d.transpose(),this.q=f,this.u=l,this.s=c.transpose().mmul(c),this.xResidual=x,this.yResidual=M,this.betas=w}else this.w=d.transpose(),this.s=c.transpose().mmul(c).sqrt(),o?this.t=c.clone().div(this.s.get(0,0)):this.t=c,this.xResidual=t.sub(c.mmul(d.transpose()))}}var AbstractMatrix_1=matrix$2.AbstractMatrix=AbstractMatrix$1,CHO$1=matrix$2.CHO=CholeskyDecomposition$1,CholeskyDecomposition_1=matrix$2.CholeskyDecomposition=CholeskyDecomposition$1,EVD$1=matrix$2.EVD=EigenvalueDecomposition$1,EigenvalueDecomposition_1=matrix$2.EigenvalueDecomposition=EigenvalueDecomposition$1,LU$1=matrix$2.LU=LuDecomposition$1,LuDecomposition_1=matrix$2.LuDecomposition=LuDecomposition$1,Matrix_1=matrix$2.Matrix=Matrix$3,MatrixColumnSelectionView_1=matrix$2.MatrixColumnSelectionView=MatrixColumnSelectionView$1,MatrixColumnView_1=matrix$2.MatrixColumnView=MatrixColumnView$1,MatrixFlipColumnView_1=matrix$2.MatrixFlipColumnView=MatrixFlipColumnView$1,MatrixFlipRowView_1=matrix$2.MatrixFlipRowView=MatrixFlipRowView$1,MatrixRowSelectionView_1=matrix$2.MatrixRowSelectionView=MatrixRowSelectionView$1,MatrixRowView_1=matrix$2.MatrixRowView=MatrixRowView$1,MatrixSelectionView_1=matrix$2.MatrixSelectionView=MatrixSelectionView$1,MatrixSubView_1=matrix$2.MatrixSubView=MatrixSubView$1,MatrixTransposeView_1=matrix$2.MatrixTransposeView=MatrixTransposeView$2,NIPALS$1=matrix$2.NIPALS=nipals,Nipals$1=matrix$2.Nipals=nipals,QR$1=matrix$2.QR=QrDecomposition$1,QrDecomposition_1=matrix$2.QrDecomposition=QrDecomposition$1,SVD$1=matrix$2.SVD=SingularValueDecomposition$1,SingularValueDecomposition_1=matrix$2.SingularValueDecomposition=SingularValueDecomposition$1,WrapperMatrix1D_1=matrix$2.WrapperMatrix1D=WrapperMatrix1D$1,WrapperMatrix2D_1=matrix$2.WrapperMatrix2D=WrapperMatrix2D$1,correlation_1=matrix$2.correlation=correlation$1,covariance_1=matrix$2.covariance=covariance$1,_default=matrix$2.default=Matrix$3,determinant_1=matrix$2.determinant=determinant$1,inverse_1=matrix$2.inverse=inverse$1,linearDependencies_1=matrix$2.linearDependencies=linearDependencies$1,pseudoInverse_1=matrix$2.pseudoInverse=pseudoInverse$1,solve_1=matrix$2.solve=solve$1,wrap_1=matrix$2.wrap=wrap$1;const AbstractMatrix=AbstractMatrix_1,CHO=CHO$1,CholeskyDecomposition=CholeskyDecomposition_1,EVD=EVD$1,EigenvalueDecomposition=EigenvalueDecomposition_1,LU=LU$1,LuDecomposition=LuDecomposition_1,Matrix$2=Matrix_1,MatrixColumnSelectionView=MatrixColumnSelectionView_1,MatrixColumnView=MatrixColumnView_1,MatrixFlipColumnView=MatrixFlipColumnView_1,MatrixFlipRowView=MatrixFlipRowView_1,MatrixRowSelectionView=MatrixRowSelectionView_1,MatrixRowView=MatrixRowView_1,MatrixSelectionView=MatrixSelectionView_1,MatrixSubView=MatrixSubView_1,MatrixTransposeView$1=MatrixTransposeView_1,NIPALS=NIPALS$1,Nipals=Nipals$1,QR=QR$1,QrDecomposition=QrDecomposition_1,SVD=SVD$1,SingularValueDecomposition=SingularValueDecomposition_1,WrapperMatrix1D=WrapperMatrix1D_1,WrapperMatrix2D=WrapperMatrix2D_1,correlation=correlation_1,covariance=covariance_1,matrix=_default.Matrix?_default.Matrix:Matrix_1,determinant=determinant_1,inverse=inverse_1,linearDependencies=linearDependencies_1,pseudoInverse=pseudoInverse_1,solve=solve_1,wrap=wrap_1,matrix$1=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix,CHO,CholeskyDecomposition,EVD,EigenvalueDecomposition,LU,LuDecomposition,Matrix:Matrix$2,MatrixColumnSelectionView,MatrixColumnView,MatrixFlipColumnView,MatrixFlipRowView,MatrixRowSelectionView,MatrixRowView,MatrixSelectionView,MatrixSubView,MatrixTransposeView:MatrixTransposeView$1,NIPALS,Nipals,QR,QrDecomposition,SVD,SingularValueDecomposition,WrapperMatrix1D,WrapperMatrix2D,correlation,covariance,default:matrix,determinant,inverse,linearDependencies,pseudoInverse,solve,wrap},Symbol.toStringTag,{value:"Module"}));function getSeparatedKernel(e){const t=new SVD(e,{autoTranspose:!0});if(t.rank!==1)return null;const r=Math.sqrt(t.s[0]),n=t.U.to2DArray().map(a=>a[0]*r),o=t.V.to2DArray().map(a=>a[0]*r);return[n,o]}function convolution(e,t={}){let{channels:r,bitDepth:n,normalize:o=!1,divisor:a=1,border:s="copy",algorithm:l="auto"}=t,u={};n&&(u.bitDepth=n);let c=Image.createFrom(this,u);if(r=validateArrayOfChannels(this,r),l!=="separable")({kernel:e}=validateKernel(e));else if(!Array.isArray(e)||e.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(l==="auto"){let _=getSeparatedKernel(e);_!==null?(l="separable",e=_):(e.length>9||e[0].length>9)&&this.width<=4096&&this.height<=4096?l="fft":l="direct"}let f,d;l==="separable"?(f=Math.floor(e[0].length/2),d=Math.floor(e[1].length/2)):(f=Math.floor(e.length/2),d=Math.floor(e[0].length/2));let g=c.isClamped,m=new Array(this.height*this.width),x,w,M,b,A,v;for(b=0;b<r.length;b++){for(A=r[b],M=0;M<this.height;M++)for(w=0;w<this.width;w++)x=M*this.width+w,m[x]=this.data[x*this.channels+A];if(l==="direct")v=src$1.direct(m,e,{rows:this.height,cols:this.width,normalize:o,divisor:a});else if(l==="separable"){if(v=convolutionSeparable(m,e,this.width,this.height),o){a=0;for(let _=0;_<e[0].length;_++)for(let S=0;S<e[1].length;S++)a+=e[0][_]*e[1][S]}if(a!==1)for(let _=0;_<v.length;_++)v[_]/=a}else v=src$1.fft(m,e,{rows:this.height,cols:this.width,normalize:o,divisor:a});for(M=0;M<this.height;M++)for(w=0;w<this.width;w++)x=M*this.width+w,g?c.data[x*this.channels+A]=clamp(v[x],c):c.data[x*this.channels+A]=v[x]}if(this.alpha&&!r.includes(this.channels))for(w=this.components;w<this.data.length;w=w+this.channels)c.data[w]=this.data[w];return s!=="periodic"&&c.setBorder({size:[d,f],algorithm:s}),c}function gradientFilter(e={}){let{direction:t="xy",border:r="copy",kernelX:n,kernelY:o,channels:a,bitDepth:s=this.bitDepth}=e;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),t){case"x":if(!n)throw new Error("kernelX option is missing");return convolution.call(this,n,{channels:a,border:r,bitDepth:s});case"y":if(!o)throw new Error("kernelY option is missing");return convolution.call(this,o,{channels:a,border:r,bitDepth:s});case"xy":{if(!n)throw new Error("kernelX option is missing");if(!o)throw new Error("kernelY option is missing");const l=convolution.call(this,n,{channels:a,border:r,bitDepth:32}),u=convolution.call(this,o,{channels:a,border:r,bitDepth:32});return l.hypotenuse(u,{bitDepth:s,channels:a})}default:throw new Error(`Unknown parameter direction: ${t}`)}}function sobelFilter(e){return gradientFilter.call(this,Object.assign({},e,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(e){return gradientFilter.call(this,Object.assign({},e,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1=newArray;function newArray(e,t){e=e||0;for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r}const newArray$1=getDefaultExportFromCjs(newArray_1);function level(e={}){let{algorithm:t="range",channels:r,min:n=this.min,max:o=this.max}=e;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),r=validateArrayOfChannels(this,{channels:r}),r.length!==this.channel&&(Array.isArray(n)&&n.length===this.channels&&(n=n.filter((a,s)=>r.includes(s))),Array.isArray(o)&&o.length===this.channels&&(o=o.filter((a,s)=>r.includes(s)))),t){case"range":n<0&&(n=0),o>this.maxValue&&(o=this.maxValue),Array.isArray(n)||(n=newArray$1(r.length,n)),Array.isArray(o)||(o=newArray$1(r.length,o)),processImage(this,n,o,r);break;default:throw new Error(`level: algorithm not implement: ${t}`)}return this}function processImage(e,t,r,n){let o=1e-5,a=new Array(n.length);for(let s=0;s<n.length;s++)t[s]===0&&r[s]===e.maxValue||r[s]===t[s]?a[s]=0:a[s]=(e.maxValue+1-o)/(r[s]-t[s]),t[s]+=(.5-o/2)/a[s];for(let s=0;s<n.length;s++){let l=n[s];if(a[s]!==0)for(let u=0;u<e.data.length;u+=e.channels)e.data[u+l]=Math.min(Math.max(0,(e.data[u+l]-t[s])*a[s]+.5|0),e.maxValue)}}var toString=Object.prototype.toString,isArrayType=function e(t){return toString.call(t).substr(-6,5)==="Array"};const isArray=getDefaultExportFromCjs(isArrayType);function checkNumberArray(e){if(isNaN(e)){if(e instanceof Image)return e.data;if(!isArray(e))throw new Error("checkNumberArray: the value should be either a number, array or Image");return e}else{if(e<=0)throw new Error("checkNumberArray: the value must be greater than 0");return e}}function add(e,t={}){let{channels:r}=t;if(this.checkProcessable("add",{bitDepth:[8,16]}),r=validateArrayOfChannels(this,{channels:r}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("add: the data size is different");for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.max(0,Math.min(this.maxValue,this.data[a+o]+e[a+o]>>0))}}else for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.min(this.maxValue,this.data[a+o]+e>>0)}return this}function subtract(e,t={}){let{channels:r}=t;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),r=validateArrayOfChannels(this,{channels:r}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("subtract: the data size is different");for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.max(0,Math.min(this.maxValue,this.data[a+o]-e[a+o]>>0))}}else for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.max(0,this.data[a+o]-e>>0)}return this}function subtractImage(e,t={}){let{channels:r,absolute:n=!1}=t;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==e.width||this.height!==e.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("subtractImage: both images must have the same number of channels");let o=this.clone();r=validateArrayOfChannels(this,{channels:r});for(let a=0;a<r.length;a++){let s=r[a];for(let l=s;l<this.data.length;l+=this.channels){let u=this.data[l]-e.data[l];n?o.data[l]=Math.abs(u):o.data[l]=Math.max(u,0)}}return o}function hypotenuse(e,t={}){let{bitDepth:r=this.bitDepth,channels:n}=t;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==e.width||this.height!==e.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("hypotenuse: both images must have the same number of channels");let o=Image.createFrom(this,{bitDepth:r});n=validateArrayOfChannels(this,{channels:n});let a=o.isClamped;for(let s=0;s<n.length;s++){let l=n[s];for(let u=l;u<this.data.length;u+=this.channels){let c=Math.hypot(this.data[u],e.data[u]);a?o.data[u]=Math.min(Math.max(Math.round(c),0),o.maxValue):o.data[u]=c}}return o}function multiply(e,t={}){let{channels:r}=t;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),e<=0)throw new Error("multiply: the value must be greater than 0");if(r=validateArrayOfChannels(this,{channels:r}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("multiply: the data size is different");for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.max(0,Math.min(this.maxValue,this.data[a+o]*e[a+o]>>0))}}else for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.min(this.maxValue,this.data[a+o]*e>>0)}return this}function divide(e,t={}){let{channels:r}=t;if(this.checkProcessable("divide",{bitDepth:[8,16]}),r=validateArrayOfChannels(this,{channels:r}),e=checkNumberArray(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("divide: the: the data size is different");for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.max(0,Math.min(this.maxValue,this.data[a+o]/e[a+o]>>0))}}else for(let n=0;n<r.length;n++){let o=r[n];for(let a=0;a<this.data.length;a+=this.channels)this.data[a+o]=Math.min(this.maxValue,this.data[a+o]/e>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(t){if(typeof t=="number")return this._predict(t);if(isAnyArray$1(t)){const r=[];for(let n=0;n<t.length;n++)r.push(this._predict(t[n]));return r}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,r){if(!isAnyArray$1(t)||!isAnyArray$1(r)||t.length!==r.length)throw new Error("x and y must be arrays of the same length");const n=t.length,o=new Array(n);for(let m=0;m<n;m++)o[m]=this._predict(t[m]);let a=0,s=0,l=0,u=0,c=0,f=0,d=0;for(let m=0;m<n;m++)a+=o[m],s+=r[m],c+=o[m]*o[m],f+=r[m]*r[m],d+=o[m]*r[m],r[m]!==0&&(l+=(r[m]-o[m])*(r[m]-o[m])/r[m]),u+=(r[m]-o[m])*(r[m]-o[m]);const g=(n*d-a*s)/Math.sqrt((n*c-a*a)*(n*f-s*s));return{r:g,r2:g*g,chi2:l,rmsd:Math.sqrt(u/n)}}}const require$$0$1=getAugmentedNamespace(matrix$1);function squaredEuclidean$4(e,t){let r=0;for(let n=0;n<e.length;n++)r+=(e[n]-t[n])*(e[n]-t[n]);return r}function euclidean$2(e,t){return Math.sqrt(squaredEuclidean$4(e,t))}const euclidean$3=Object.freeze(Object.defineProperty({__proto__:null,euclidean:euclidean$2,squaredEuclidean:squaredEuclidean$4},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$3),{squaredEuclidean:squaredEuclidean$3}=require$$0,defaultOptions$b={sigma:1};let GaussianKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$b,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,r){const n=squaredEuclidean$3(t,r);return Math.exp(-n/this.divisor)}};var gaussianKernel=GaussianKernel$1;const defaultOptions$a={degree:1,constant:1,scale:1};let PolynomialKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$a,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,r){for(var n=0,o=0;o<t.length;o++)n+=t[o]*r[o];return Math.pow(this.scale*n+this.constant,this.degree)}};var polynomialKernel=PolynomialKernel$1;const defaultOptions$9={alpha:.01,constant:-Math.E};let SigmoidKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$9,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,r){for(var n=0,o=0;o<t.length;o++)n+=t[o]*r[o];return Math.tanh(this.alpha*n+this.constant)}};var sigmoidKernel=SigmoidKernel$1;const defaultOptions$8={sigma:1,degree:1};let ANOVAKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$8,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,r){for(var n=0,o=Math.min(t.length,r.length),a=1;a<=o;++a)n+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[a-1],a)-Math.pow(r[a-1],a),2)),this.degree);return n}};var anovaKernel=ANOVAKernel$1;const{squaredEuclidean:squaredEuclidean$2}=require$$0,defaultOptions$7={sigma:1};let CauchyKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$7,t),this.sigma=t.sigma}compute(t,r){return 1/(1+squaredEuclidean$2(t,r)/(this.sigma*this.sigma))}};var cauchyKernel=CauchyKernel$1;const{euclidean:euclidean$1}=require$$0,defaultOptions$6={sigma:1};let ExponentialKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$6,t),this.sigma=t.sigma,this.divisor=2*t.sigma*t.sigma}compute(t,r){const n=euclidean$1(t,r);return Math.exp(-n/this.divisor)}};var exponentialKernel=ExponentialKernel$1;class HistogramIntersectionKernel{compute(t,r){for(var n=Math.min(t.length,r.length),o=0,a=0;a<n;++a)o+=Math.min(t[a],r[a]);return o}}var histogramIntersectionKernel=HistogramIntersectionKernel;const{euclidean}=require$$0,defaultOptions$5={sigma:1};let LaplacianKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$5,t),this.sigma=t.sigma}compute(t,r){const n=euclidean(t,r);return Math.exp(-n/this.sigma)}};var laplacianKernel=LaplacianKernel$1;const{squaredEuclidean:squaredEuclidean$1}=require$$0,defaultOptions$4={constant:1};let MultiquadraticKernel$1=class{constructor(t){t=Object.assign({},defaultOptions$4,t),this.constant=t.constant}compute(t,r){return Math.sqrt(squaredEuclidean$1(t,r)+this.constant*this.constant)}};var multiquadraticKernel=MultiquadraticKernel$1;const{squaredEuclidean}=require$$0,defaultOptions$3={constant:1};class RationalQuadraticKernel{constructor(t){t=Object.assign({},defaultOptions$3,t),this.constant=t.constant}compute(t,r){const n=squaredEuclidean(t,r);return 1-n/(n+this.constant)}}var rationalQuadraticKernel=RationalQuadraticKernel;const{Matrix:Matrix$1,MatrixTransposeView}=require$$0$1,GaussianKernel=gaussianKernel,PolynomialKernel=polynomialKernel,SigmoidKernel=sigmoidKernel,ANOVAKernel=anovaKernel,CauchyKernel=cauchyKernel,ExponentialKernel=exponentialKernel,HistogramKernel=histogramIntersectionKernel,LaplacianKernel=laplacianKernel,MultiquadraticKernel=multiquadraticKernel,RationalKernel=rationalQuadraticKernel,kernelType={gaussian:GaussianKernel,rbf:GaussianKernel,polynomial:PolynomialKernel,poly:PolynomialKernel,anova:ANOVAKernel,cauchy:CauchyKernel,exponential:ExponentialKernel,histogram:HistogramKernel,min:HistogramKernel,laplacian:LaplacianKernel,multiquadratic:MultiquadraticKernel,rational:RationalKernel,sigmoid:SigmoidKernel,mlp:SigmoidKernel};class Kernel{constructor(t,r){if(this.kernelType=t,t!=="linear")if(typeof t=="string"){t=t.toLowerCase();var n=kernelType[t];if(n)this.kernelFunction=new n(r);else throw new Error(`unsupported kernel type: ${t}`)}else if(typeof t=="object"&&typeof t.compute=="function")this.kernelFunction=t;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(t,r){if(t=Matrix$1.checkMatrix(t),r===void 0?r=t:r=Matrix$1.checkMatrix(r),this.kernelType==="linear")return t.mmul(new MatrixTransposeView(r));const n=new Matrix$1(t.rows,r.rows);if(t===r)for(let o=0;o<t.rows;o++)for(let a=o;a<t.rows;a++){const s=this.kernelFunction.compute(t.getRow(o),t.getRow(a));n.set(o,a,s),n.set(a,o,s)}else for(let o=0;o<t.rows;o++)for(let a=0;a<r.rows;a++)n.set(o,a,this.kernelFunction.compute(t.getRow(o),r.getRow(a)));return n}}var kernel=Kernel;const Kernel$1=getDefaultExportFromCjs(kernel),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(t,r,n){if(super(),t===!0)this.alpha=r.alpha,this.inputs=r.inputs,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=new Kernel$1(r.kernelType,r.kernelOptions);else{t=Matrix$2.checkMatrix(t),n=Object.assign({},defaultOptions$2,n);const o=new Kernel$1(n.kernelType,n.kernelOptions),a=o.compute(t),s=t.rows;a.add(Matrix$2.eye(s,s).mul(n.lambda)),this.alpha=solve(a,r),this.inputs=t,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=o}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if(t.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,t)}}function background$1(e,t,r){const n=new KernelRidgeRegression(e,t,r),o=new Array(this.size);for(let l=0;l<this.width;l++)for(let u=0;u<this.height;u++)o[u*this.width+l]=[l,u];const a=n.predict(o),s=Image.createFrom(this);for(let l=0;l<this.size;l++)s.data[l]=Math.min(this.maxValue,Math.max(0,a[l][0]));return s}function dilate(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let n=!0;e:for(const a of t)for(const s of a)if(s!==1){n=!1;break e}let o=this;for(let a=0;a<r;a++)if(this.bitDepth===1)if(n){const s=o.clone();o=dilateOnceBinaryOnlyOnes(o,s,t.length,t[0].length)}else{const s=Image.createFrom(o);o=dilateOnceBinary(o,s,t)}else if(n){const s=Image.createFrom(o);o=dilateOnceGreyOnlyOnes(o,s,t.length,t[0].length)}else{const s=Image.createFrom(o);o=dilateOnceGrey(o,s,t)}return o}function dilateOnceGrey(e,t,r){const n=r.length,o=r[0].length;let a=(n-1)/2,s=(o-1)/2;for(let l=0;l<e.height;l++)for(let u=0;u<e.width;u++){let c=0;for(let f=0;f<o;f++)for(let d=0;d<n;d++){if(r[d][f]!==1)continue;let g=d-a+u,m=f-s+l;if(g<0||m<0||g>=e.width||m>=e.height)continue;const x=e.getValueXY(g,m,0);x>c&&(c=x)}t.setValueXY(u,l,0,c)}return t}function dilateOnceGreyOnlyOnes(e,t,r,n){const o=(r-1)/2,a=(n-1)/2,s=[];for(let l=0;l<e.width;l++)s.push(0);for(let l=0;l<e.height;l++){for(let u=0;u<e.width;u++){let c=0;for(let f=Math.max(0,l-a);f<Math.min(e.height,l+a+1);f++){const d=e.getValueXY(u,f,0);d>c&&(c=d)}s[u]=c}for(let u=0;u<e.width;u++){let c=0;for(let f=Math.max(0,u-o);f<Math.min(e.width,u+o+1);f++)s[f]>c&&(c=s[f]);t.setValueXY(u,l,0,c)}}return t}function dilateOnceBinary(e,t,r){const n=r.length,o=r[0].length;let a=(n-1)/2,s=(o-1)/2;for(let l=0;l<e.height;l++)for(let u=0;u<e.width;u++){let c=0;e:for(let f=0;f<o;f++)for(let d=0;d<n;d++){if(r[d][f]!==1)continue;let g=d-a+u,m=f-s+l;if(m<0||g<0||g>=e.width||m>=e.height)continue;if(e.getBitXY(g,m)===1){c=1;break e}}c===1&&t.setBitXY(u,l)}return t}function dilateOnceBinaryOnlyOnes(e,t,r,n){const o=(r-1)/2,a=(n-1)/2,s=[];for(let l=0;l<e.width;l++)s.push(1);for(let l=0;l<e.height;l++){for(let u=0;u<e.width;u++){s[u]=0;for(let c=Math.max(0,l-a);c<Math.min(e.height,l+a+1);c++)if(e.getBitXY(u,c)===1){s[u]=1;break}}for(let u=0;u<e.width;u++)if(t.getBitXY(u,l)!==1){for(let c=Math.max(0,u-o);c<Math.min(e.width,u+o+1);c++)if(s[c]===1){t.setBitXY(u,l);break}}}return t}function erode(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let n=!0;e:for(const a of t)for(const s of a)if(s!==1){n=!1;break e}let o=this;for(let a=0;a<r;a++)if(this.bitDepth===1)if(n){const s=o.clone();o=erodeOnceBinaryOnlyOnes(o,s,t.length,t[0].length)}else{const s=Image.createFrom(o);o=erodeOnceBinary(o,s,t)}else if(n){const s=Image.createFrom(o);o=erodeOnceGreyOnlyOnes(o,s,t.length,t[0].length)}else{const s=Image.createFrom(o);o=erodeOnceGrey(o,s,t)}return o}function erodeOnceGrey(e,t,r){const n=r.length,o=r[0].length;let a=(n-1)/2,s=(o-1)/2;for(let l=0;l<e.height;l++)for(let u=0;u<e.width;u++){let c=e.maxValue;for(let f=0;f<o;f++)for(let d=0;d<n;d++){if(r[d][f]!==1)continue;let g=d-a+u,m=f-s+l;if(g<0||m<0||g>=e.width||m>=e.height)continue;const x=e.getValueXY(g,m,0);x<c&&(c=x)}t.setValueXY(u,l,0,c)}return t}function erodeOnceGreyOnlyOnes(e,t,r,n){const o=(r-1)/2,a=(n-1)/2,s=[];for(let l=0;l<e.width;l++)s.push(0);for(let l=0;l<e.height;l++){for(let u=0;u<e.width;u++){let c=e.maxValue;for(let f=Math.max(0,l-a);f<Math.min(e.height,l+a+1);f++){const d=e.getValueXY(u,f,0);d<c&&(c=d)}s[u]=c}for(let u=0;u<e.width;u++){let c=e.maxValue;for(let f=Math.max(0,u-o);f<Math.min(e.width,u+o+1);f++)s[f]<c&&(c=s[f]);t.setValueXY(u,l,0,c)}}return t}function erodeOnceBinary(e,t,r){const n=r.length,o=r[0].length;let a=(n-1)/2,s=(o-1)/2;for(let l=0;l<e.height;l++)for(let u=0;u<e.width;u++){let c=1;e:for(let f=0;f<o;f++)for(let d=0;d<n;d++){if(r[d][f]!==1)continue;let g=d-a+u,m=f-s+l;if(m<0||g<0||g>=e.width||m>=e.height)continue;if(e.getBitXY(g,m)===0){c=0;break e}}c===1&&t.setBitXY(u,l)}return t}function erodeOnceBinaryOnlyOnes(e,t,r,n){const o=(r-1)/2,a=(n-1)/2,s=[];for(let l=0;l<e.width;l++)s.push(0);for(let l=0;l<e.height;l++){for(let u=0;u<e.width;u++){s[u]=1;for(let c=Math.max(0,l-a);c<Math.min(e.height,l+a+1);c++)if(e.getBitXY(u,c)===0){s[u]=0;break}}for(let u=0;u<e.width;u++)if(t.getBitXY(u,l)!==0){for(let c=Math.max(0,u-o);c<Math.min(e.width,u+o+1);c++)if(s[c]===0){t.clearBitXY(u,l);break}}}return t}function open(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let n=this;for(let o=0;o<r;o++)n=n.erode({kernel:t}),n=n.dilate({kernel:t});return n}function close(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let n=this;for(let o=0;o<r;o++)n=n.dilate({kernel:t}).erode({kernel:t});return n}function topHat(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),t.length%2===0||t[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let n=this;for(let o=0;o<r;o++)n=n.open({kernel:t}).subtractImage(n,{absolute:!0});return n}function blackHat(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let n=this;for(let o=0;o<r;o++)n=n.close({kernel:t}).subtractImage(n,{absolute:!0});return n}function morphologicalGradient(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:r=1}=e;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2===0||t.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let n=this;for(let o=0;o<r;o++){let a=n.dilate({kernel:t}),s=n.erode({kernel:t});n=a.subtractImage(s,{absolute:!0})}return n}function order4Points(e){let t=0,r=0,n=0,o=0,a=e[0][0],s=0;for(let c=1;c<e.length;c++)e[c][0]<a&&(a=e[c][0],s=c);let l=e[(s+1)%e.length][0],u=(s+1)%e.length;for(let c=1;c<e.length;c++)e[c][0]<l&&c!==s&&(l=e[c][0],u=c);return e[u][1]<e[s][1]?(t=e[u],o=e[s],s!==(u+1)%4?(r=e[(u+1)%4],n=e[(u+2)%4]):(r=e[(u+2)%4],n=e[(u+3)%4])):(o=e[u],t=e[s],u!==(s+1)%4?(r=e[(s+1)%4],n=e[(s+2)%4]):(r=e[(s+2)%4],n=e[(s+3)%4])),[t,r,n,o]}function distance2Points(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function crossVect(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dotVect(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function computeWidthAndHeigth(e,t,r,n,o,a){let s=Math.max(distance2Points(e,t),distance2Points(n,r)),l=Math.max(distance2Points(e,n),distance2Points(t,r)),u=0,c=0,f=Math.ceil(o/2),d=Math.ceil(a/2),g=s/l,m=[e[0],e[1],1],x=[t[0],t[1],1],w=[n[0],n[1],1],M=[r[0],r[1],1],b=dotVect(crossVect(m,M),w)/dotVect(crossVect(x,M),w),A=dotVect(crossVect(m,M),x)/dotVect(crossVect(w,M),x),v=[b*x[0]-m[0],b*x[1]-m[1],b*x[2]-m[2]],_=[A*w[0]-m[0],A*w[1]-m[1],A*w[2]-m[2]],S=v[0],B=v[1],I=v[2],E=_[0],T=_[1],y=_[2],k=1/(I*y)*(S*E-(S*y+I*E)*f+I*y*f*f+(B*T-(B*y+I*T)*d+I*y*d*d));k>=0?k=Math.sqrt(k):k=Math.sqrt(-k);let C=new Matrix$2([[k,0,f],[0,k,d],[0,0,1]]),F=C.transpose(),Y=inverse(F),K=inverse(C),ee=Matrix$2.rowVector(v),te=Matrix$2.rowVector(_),q=Math.sqrt(dotVect(ee.mmul(Y).mmul(K).to1DArray(),v)/dotVect(te.mmul(Y).mmul(K).to1DArray(),_));return q===0||g===0?(u=Math.ceil(s),c=Math.ceil(l)):q<g?(u=Math.ceil(s),c=Math.ceil(u/q)):(c=Math.ceil(l),u=Math.ceil(q*c)),[u,c]}function projectionPoint(e,t,r,n,o,a,s,l,u,c,f,d){let[g,m]=[(r*e+n*t+o)/(u*e+c*t+1),(a*e+s*t+l)/(u*e+c*t+1)];return f.getValueXY(Math.floor(g),Math.floor(m),d)}function warpingFourPoints(e,t={}){let{calculateRatio:r=!0}=t;if(e.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${e.length} elements`);let[n,o,a,s]=e,l=[n,o,a,s],[u,c,f,d]=order4Points(l),g,m;r?[g,m]=computeWidthAndHeigth(u,c,f,d,this.width,this.height):(g=Math.ceil(Math.max(distance2Points(u,c),distance2Points(d,f))),m=Math.ceil(Math.max(distance2Points(u,d),distance2Points(c,f))));let x=Image.createFrom(this,{width:g,height:m}),[w,M]=u,[b,A]=c,[v,_]=f,[S,B]=d,[I,E]=[0,0],[T,y]=[0,g-1],[k,C]=[m-1,g-1],[F,Y]=[m-1,0],K=new Matrix$2([[I,E,1,0,0,0,-I*w,-E*w],[T,y,1,0,0,0,-T*b,-y*b],[k,C,1,0,0,0,-k*v,-E*v],[F,Y,1,0,0,0,-F*S,-Y*S],[0,0,0,I,E,1,-I*M,-E*M],[0,0,0,T,y,1,-T*A,-y*A],[0,0,0,k,C,1,-k*_,-C*_],[0,0,0,F,Y,1,-F*B,-Y*B]]),ee=Matrix$2.columnVector([w,b,v,S,M,A,_,B]),q=new SingularValueDecomposition(K).solve(ee),[ue,le,ge,de,ie,ae,Q,he]=q.to1DArray(),pe=new Matrix$2(m,g);for(let _e=0;_e<this.channels;_e++){for(let xe=0;xe<m;xe++)for(let ye=0;ye<g;ye++)pe.set(xe,ye,projectionPoint(xe,ye,ue,le,ge,de,ie,ae,Q,he,this,_e));x.setMatrix(pe,{channel:_e})}return x}function crop(e={}){let{x:t=0,y:r=0,width:n=this.width-t,height:o=this.height-r}=e;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),t=Math.round(t),r=Math.round(r),n=Math.round(n),o=Math.round(o),t>this.width-1||r>this.height-1)throw new RangeError(`crop: origin (x:${t}, y:${r}) out of range (${this.width-1}; ${this.height-1})`);if(n<=0||o<=0)throw new RangeError(`crop: width and height (width:${n}; height:${o}) must be positive numbers`);if(t<0||r<0)throw new RangeError(`crop: x and y (x:${t}, y:${r}) must be positive numbers`);if(n>this.width-t||o>this.height-r)throw new RangeError(`crop: (x: ${t}, y:${r}, width:${n}, height:${o}) size is out of range`);let a=this;if(this.bitDepth===1){const s=new Image(n,o,{kind:"BINARY",parent:this});a=cropBinary(this,s,t,r,n,o)}else{const s=Image.createFrom(this,{width:n,height:o,position:[t,r]});a=cropDefault(this,s,t,r,n,o)}return a}function cropDefault(e,t,r,n,o,a){let s=o*e.channels,l=n+a,u=0,c=r*e.channels;for(let f=n;f<l;f++){let d=f*e.width*e.channels+c,g=d+s;for(;d<g;d++)t.data[u++]=e.data[d]}return t}function cropBinary(e,t,r,n,o,a){let s=o*e.channels,l=n+a,u=0,c=r*e.channels;for(let f=n;f<l;f++){let d=f*e.width*e.channels+c,g=d+s;for(;d<g;d++)e.getBit(d)&&t.setBit(u),++u}return t}function cropAlpha(e={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:t=this.maxValue}=e;let r=findLeft(this,t,this.components);if(r===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let n=findTop(this,t,this.components,r),o=findBottom(this,t,this.components,r),a=findRight(this,t,this.components,r,n,o);return this.crop({x:r,y:n,width:a-r+1,height:o-n+1})}function findLeft(e,t,r){for(let n=0;n<e.width;n++)for(let o=0;o<e.height;o++)if(e.getValueXY(n,o,r)>=t)return n;return-1}function findTop(e,t,r,n){for(let o=0;o<e.height;o++)for(let a=n;a<e.width;a++)if(e.getValueXY(a,o,r)>=t)return o;return-1}function findBottom(e,t,r,n){for(let o=e.height-1;o>=0;o--)for(let a=n;a<e.width;a++)if(e.getValueXY(a,o,r)>=t)return o;return-1}function findRight(e,t,r,n,o,a){for(let s=e.width-1;s>=n;s--)for(let l=o;l<=a;l++)if(e.getValueXY(s,l,r)>=t)return s;return-1}function getFactor(e){if(typeof e=="string"){const t=e[e.length-1];e=parseFloat(e),t==="%"&&(e/=100)}return e}function getThreshold$1(e,t){if(!t)throw Error("getThreshold : the maxValue should be specified");if(typeof e=="string"){if(e[e.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(e)/100*t}else{if(typeof e=="number")return e<1?e*t:e;throw Error("getThreshold : the value is not valid")}}function factorDimensions(e,t,r){e=getFactor(e);let n=Math.round(e*t),o=Math.round(e*r);return n<=0&&(n=1),o<=0&&(o=1),{width:n,height:o}}function checkRow(e,t){if(t<0||t>=e.height)throw new RangeError(`row must be included between 0 and ${e.height-1}. Current value: ${t}`)}function checkColumn(e,t){if(t<0||t>=e.width)throw new RangeError(`column must be included between 0 and ${e.width-1}. Current value: ${t}`)}function checkChannel(e,t){if(t<0||t>=e.channels)throw new RangeError(`channel must be included between 0 and ${e.channels-1}. Current value: ${t}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(e){if(typeof e!="string")throw new TypeError("interpolation must be a string");if(e=e.toLowerCase(),!validInterpolations[e])throw new RangeError(`invalid interpolation algorithm: ${e}`);return validInterpolations[e]}function nearestNeighbor(e,t,r){const n=this.width/t,o=this.height/r;if(this.bitDepth>1)for(let a=0;a<t;a++){const s=Math.floor((a+.5)*n);for(let l=0;l<r;l++){const u=Math.floor((l+.5)*o);for(let c=0;c<this.channels;c++)e.setValueXY(a,l,c,this.getValueXY(s,u,c))}}else for(let a=0;a<t;a++){const s=Math.floor((a+.5)*n);for(let l=0;l<r;l++){const u=Math.floor((l+.5)*o);this.getBitXY(s,u)&&e.setBitXY(a,l)}}}function resize(e={}){const{factor:t=1,interpolation:r=validInterpolations.nearestneighbor,preserveAspectRatio:n=!0}=e,o=checkInterpolation(r);let a=e.width,s=e.height;if(a||(s&&n?a=Math.round(s*(this.width/this.height)):a=this.width),s||(n?s=Math.round(a*(this.height/this.width)):s=this.height),{width:a,height:s}=factorDimensions(t,a,s),a===this.width&&s===this.height){const f=this.clone();return f.position=[0,0],f}let l=Math.round((this.width-a)/2),u=Math.round((this.height-s)/2);const c=Image.createFrom(this,{width:a,height:s,position:[l,u]});switch(o){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,c,a,s);break;default:throw new Error(`unsupported resize interpolation: ${o}`)}return c}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{colorModel:HSV}),t=0,r=this.data;for(let n=0;n<r.length;n+=this.channels){let o=r[n],a=r[n+1],s=r[n+2],l=Math.min(o,a,s),u=Math.max(o,a,s),c=u-l,f=0,d=u===0?0:c/u,g=u;if(u!==l){switch(u){case o:f=(a-s)/c+(a<s?6:0);break;case a:f=(s-o)/c+2;break;case s:f=(o-a)/c+4;break;default:throw new Error("unreachable")}f/=6}e.data[t++]=f*this.maxValue,e.data[t++]=d*this.maxValue,e.data[t++]=g,this.alpha&&(e.data[t++]=r[n+3])}return e}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{colorModel:HSL}),t=Math.floor(this.maxValue/2),r=0,n=this.data;for(let o=0;o<n.length;o+=this.channels){let a=n[o],s=n[o+1],l=n[o+2],u=Math.max(a,s,l),c=Math.min(a,s,l),f=0,d=0,g=(u+c)/2;if(u!==c){let m=u-c;switch(d=g>t?m/(2-u-c):m/(u+c),u){case a:f=(s-l)/m+(s<l?6:0);break;case s:f=(l-a)/m+2;break;case l:f=(a-s)/m+4;break;default:throw new Error("unreachable")}f/=6}e.data[r++]=f*this.maxValue,e.data[r++]=d*this.maxValue,e.data[r++]=g,this.alpha&&(e.data[r++]=n[o+3])}return e}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let e=Image.createFrom(this,{components:4,colorModel:CMYK$1}),t=0,r=this.data;for(let n=0;n<r.length;n+=this.channels){let o=r[n],a=r[n+1],s=r[n+2],l=Math.min(this.maxValue-o,this.maxValue-a,this.maxValue-s),u=(this.maxValue-o-l)/(1-l/this.maxValue),c=(this.maxValue-a-l)/(1-l/this.maxValue),f=(this.maxValue-s-l)/(1-l/this.maxValue);e.data[t++]=Math.round(u),e.data[t++]=Math.round(c),e.data[t++]=Math.round(f),e.data[t++]=Math.round(l),this.alpha&&(e.data[t++]=r[n+3])}return e}function rgba8(){return new Image(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(e,t,r){return e*6966+t*23436+r*2366>>15},luma601(e,t,r){return e*9798+t*19235+r*3735>>15},maximum(e,t,r){return Math.max(e,t,r)},minimum(e,t,r){return Math.min(e,t,r)},average(e,t,r){return(e+t+r)/3>>0},minmax(e,t,r){return(Math.max(e,t,r)+Math.min(e,t,r))/2},red(e){return e},green(e,t){return t},blue(e,t,r){return r},cyan(e,t,r,n){let o=methods$1.black(e,t,r,n);return(n.maxValue-e-o)/(1-o/n.maxValue)>>0},magenta(e,t,r,n){let o=methods$1.black(e,t,r,n);return(n.maxValue-t-o)/(1-o/n.maxValue)>>0},yellow(e,t,r,n){let o=methods$1.black(e,t,r,n);return(n.maxValue-r-o)/(1-o/n.maxValue)>>0},black(e,t,r,n){return Math.min(n.maxValue-e,n.maxValue-t,n.maxValue-r)},hue(e,t,r,n){let o=methods$1.min(e,t,r),a=methods$1.max(e,t,r);if(a===o)return 0;let s=0,l=a-o;switch(a){case e:s=(t-r)/l+(t<r?6:0);break;case t:s=(r-e)/l+2;break;case r:s=(e-t)/l+4;break;default:throw new Error("unreachable")}return s/6*n.maxValue>>0},saturation(e,t,r,n){let o=methods$1.min(e,t,r),a=methods$1.max(e,t,r),s=a-o;return a===0?0:s/a*n.maxValue},lightness(e,t,r){let n=methods$1.min(e,t,r);return(methods$1.max(e,t,r)+n)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(e=>{});function grey(e={}){let{algorithm:t="luma709",keepAlpha:r=!1,mergeAlpha:n=!0}=e;if(typeof t!="string"&&typeof t!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(t="red"),r&=this.alpha,n&=this.alpha,r&&(n=!1);let o=getOutputImage(this,e,{components:1,alpha:r,colorModel:GREY$1}),a;if(typeof t=="function")a=t;else if(a=methods$1[t.toLowerCase()],!a)throw new Error(`unsupported grey algorithm: ${t}`);let s=0;for(let l=0;l<this.data.length;l+=this.channels)n?o.data[s++]=clamp(a(this.data[l],this.data[l+1],this.data[l+2],this)*this.data[l+this.components]/this.maxValue,this):(o.data[s++]=clamp(a(this.data[l],this.data[l+1],this.data[l+2],this),this),o.alpha&&(o.data[s++]=this.data[l+this.components]));return o}function huang(e){let t=0;for(let f=0;f<e.length;f++)if(e[f]!==0){t=f;break}let r=e.length-1;for(let f=e.length-1;f>=t;f--)if(e[f]!==0){r=f;break}let n=1/(r-t),o=new Array(e.length),a=0,s=0;for(let f=t;f<e.length;f++)a+=f*e[f],s+=e[f],o[f]=a/s;let l=new Array(e.length);a=s=0;for(let f=r;f>0;f--)a+=f*e[f],s+=e[f],l[f-1]=a/s;let u=-1,c=Number.MAX_VALUE;for(let f=0;f<e.length;f++){let d=0,g;for(let m=0;m<=f;m++)g=1/(1+n*Math.abs(m-o[f])),g<1e-6||g>.999999||(d+=e[m]*(-g*Math.log(g)-(1-g)*Math.log(1-g)));for(let m=f+1;m<e.length;m++)g=1/(1+n*Math.abs(m-l[f])),g<1e-6||g>.999999||(d+=e[m]*(-g*Math.log(g)-(1-g)*Math.log(1-g)));d<c&&(c=d,u=f)}return u}function intermodes(e){let t=e.slice(),r=0;for(;!bimodalTest$1(t);){let o=0,a=0,s=t[0];for(let l=0;l<e.length-1;l++)o=a,a=s,s=t[l+1],t[l]=(o+a+s)/3;if(t[e.length-1]=(a+s)/3,r++,r>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let n=0;for(let o=1;o<e.length-1;o++)t[o-1]<t[o]&&t[o+1]<t[o]&&(n+=o);return Math.floor(n/2)}function bimodalTest$1(e){let t=!1,r=0;for(let n=1;n<e.length-1;n++)if(e[n-1]<e[n]&&e[n+1]<e[n]&&(r++,r>2))return!1;return r===2&&(t=!0),t}function isodata(e){let t,r,n,o,a=0;for(let s=1;s<e.length;s++)if(e[s]>0){a=s+1;break}for(;;){t=0,n=0;for(let s=0;s<a;s++)n=n+e[s],t=t+e[s]*s;o=0,r=0;for(let s=a+1;s<e.length;s++)r+=e[s],o+=e[s]*s;if(n>0&&r>0&&(t/=n,o/=r,a===Math.round((t+o)/2)))break;if(a++,a>e.length-2)throw new Error("Threshold not found")}return a}function li(e,t){let r,n,o,a,s,l,u,c,f,d,g,m;g=.5,d=0;for(let x=0;x<e.length;x++)d+=x*e[x];d/=t,u=d;do{l=u,r=l+.5|0,n=0,a=0;for(let x=0;x<=r;x++)n+=x*e[x],a+=e[x];c=a===0?0:n/a,o=0,s=0;for(let x=r+1;x<e.length;x++)o+=x*e[x],s+=e[x];f=s===0?0:o/s,m=(c-f)/(Math.log(c)-Math.log(f)),m<-Number.EPSILON?u=m-.5|0:u=m+.5|0}while(Math.abs(u-l)>g);return r}function maxEntropy(e,t){let r=new Array(e.length);for(let g=0;g<e.length;g++)r[g]=e[g]/t;let n=new Array(e.length),o=new Array(e.length);n[0]=r[0],o[0]=1-n[0];for(let g=1;g<e.length;g++)n[g]=n[g-1]+r[g],o[g]=1-n[g];let a=0;for(let g=0;g<e.length;g++)if(Math.abs(n[g])>=Number.EPSILON){a=g;break}let s=e.length-1;for(let g=e.length-1;g>=a;g--)if(Math.abs(o[g])>=Number.EPSILON){s=g;break}let l=-1,u,c=Number.MIN_VALUE,f,d;for(let g=a;g<=s;g++){f=0;for(let m=0;m<=g;m++)e[m]!==0&&(f-=r[m]/n[g]*Math.log(r[m]/n[g]));d=0;for(let m=g+1;m<e.length;m++)e[m]!==0&&(d-=r[m]/o[g]*Math.log(r[m]/o[g]));u=f+d,c<u&&(c=u,l=g)}return l}function mean$1(e,t){let r=0;for(let n=0;n<e.length;n++)r+=n*e[n];return Math.floor(r/t)}function minError(e,t){let r,n=-2,o,a,s,l,u,c,f,d,g,m,x,w=0;for(let M=0;M<e.length;M++)w+=M*e[M];for(w/=t,r=w;r!==n;){let M=sumA(e,r),b=sumA(e,e.length-1),A=sumB(e,r),v=sumB(e,e.length-1),_=sumC(e,r),S=sumC(e,e.length-1);if(o=A/M,a=(v-A)/(b-M),s=M/b,l=(b-M)/b,u=_/M-o*o,c=(S-_)/(b-M)-a*a,f=1/u-1/c,d=o/u-a/c,g=o*o/u-a*a/c+Math.log10(u*(l*l)/(c*(s*s))),m=d*d-f*g,m<0)return r;n=r,x=(d+Math.sqrt(m))/f,isNaN(x)?r=n:r=Math.floor(x)}return r}function sumA(e,t){let r=0;for(let n=0;n<=t;n++)r+=e[n];return r}function sumB(e,t){let r=0;for(let n=0;n<=t;n++)r+=n*e[n];return r}function sumC(e,t){let r=0;for(let n=0;n<=t;n++)r+=n*n*e[n];return r}function minimum(e){if(e.length<2)return 0;let t=0,r=-1,n=-1,o=new Array(e.length);for(let a=0;a<e.length;a++)o[a]=e[a],e[a]>0&&(n=a);for(;!bimodalTest(o);)if(o=smoothed(o),t++,t>1e4)return r;return r=minimumBetweenPeeks(o,n),r}function smoothed(e){let t=new Array(e.length);for(let r=1;r<e.length-1;r++)t[r]=(e[r-1]+e[r]+e[r+1])/3;return t[0]=(e[0]+e[1])/3,t[e.length-1]=(e[e.length-2]+e[e.length-1])/3,t}function minimumBetweenPeeks(e,t){let r;for(let n=1;n<t;n++)if(e[n-1]>e[n]&&e[n+1]>=e[n]){r=n;break}return r}function bimodalTest(e){let t=e.length,r=!1,n=0;for(let o=1;o<t-1;o++)if(e[o-1]<e[o]&&e[o+1]<e[o]&&(n++,n>2))return!1;return n===2&&(r=!0),r}function moments(e,t){let r=1,n=0,o=0,a=0,s=0,l,u,c,f,d,g,m=-1,x=e.length,w=new Array(x);for(let M=0;M<x;M++)w[M]=e[M]/t;for(let M=0;M<x;M++)n+=M*w[M],o+=M*M*w[M],a+=M*M*M*w[M];u=r*o-n*n,c=(-o*o+n*a)/u,f=(r*-a+o*n)/u,d=.5*(-f-Math.sqrt(f*f-4*c)),g=.5*(-f+Math.sqrt(f*f-4*c)),l=(g-n)/(g-d);for(let M=0;M<x;M++)if(s+=w[M],s>l){m=M;break}return m}function otsu(e,t){let r=0,n=0,o=0,a=0,s=0;for(let l=0;l<e.length;l++)s+=l*e[l];for(let l=0;l<e.length;l++){n=n+e[l];const u=t-n;if(n===0||u===0)continue;r=r+l*e[l];const c=(s-r)/u,f=n*u*(r/n-c)*(r/n-c);f>=o&&(a=l,o=f)}return a}function percentile(e){let t=-1,r=.5,n=new Array(e.length),o=partialSum(e,e.length-1),a=1;for(let s=0;s<e.length;s++)n[s]=Math.abs(partialSum(e,s)/o-r),n[s]<a&&(a=n[s],t=s);return t}function partialSum(e,t){let r=0;for(let n=0;n<=t;n++)r+=e[n];return r}function renyiEntropy(e,t){let r,n,o,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length),u=0,c=0,f=0,d=0,g=0,m=0,w=1/(1-.5),b=1/(1-2);for(let S=0;S<e.length;S++)a[S]=e[S]/t;s[0]=a[0],l[0]=1-s[0];for(let S=1;S<e.length;S++)s[S]=s[S-1]+a[S],l[S]=1-s[S];n=0;for(let S=0;S<e.length;S++)if(Math.abs(s[S])>=Number.EPSILON){n=S;break}o=e.length-1;for(let S=e.length-1;S>=n;S--)if(Math.abs(l[S])>=Number.EPSILON){o=S;break}for(let S=n;S<=o;S++){let B=0,I=0,E=0;for(let K=0;K<=S;K++)e[K]!==0&&(B-=a[K]/s[S]*Math.log(a[K]/s[S])),I+=Math.sqrt(a[K]/s[S]),E+=a[K]*a[K]/(s[S]*s[S]);let T=0,y=0,k=0;for(let K=S+1;K<e.length;K++)e[K]!==0&&(T-=a[K]/l[S]*Math.log(a[K]/l[S])),y+=Math.sqrt(a[K]/l[S]),k+=a[K]*a[K]/(l[S]*l[S]);let C=B+T,F=w*(I*y>0?Math.log(I*y):0),Y=b*(E*k>0?Math.log(E*k):0);C>d&&(d=C,u=S),F>g&&(g=F,c=S),Y>m&&(m=Y,f=S)}let A=[u,c,f];A.sort((S,B)=>S-B);let v;Math.abs(A[0]-A[1])<=5?Math.abs(A[1]-A[2])<=5?v=[1,2,1]:v=[0,1,3]:Math.abs(A[1]-A[2])<=5?v=[3,1,0]:v=[1,2,1];let _=s[A[2]]-s[A[0]];return r=Math.round(A[0]*(s[A[0]]+.25*_*v[0])+.25*A[1]*_*v[1]+A[2]*(l[A[2]]+.25*_*v[2])),r}function shanbhag(e,t){let r=new Array(e.length);for(let m=0;m<e.length;m++)r[m]=e[m]/t;let n=new Array(e.length),o=new Array(e.length);n[0]=r[0],o[0]=1-n[0];for(let m=1;m<e.length;m++)n[m]=n[m-1]+r[m],o[m]=1-n[m];let a=0;for(let m=0;m<e.length;m++)if(Math.abs(n[m])>=Number.EPSILON){a=m;break}let s=e.length-1;for(let m=e.length-1;m>=a;m--)if(Math.abs(o[m])>=Number.EPSILON){s=m;break}let l=-1,u=Number.MAX_VALUE,c,f,d,g;for(let m=a;m<=s;m++){d=0,c=.5/n[m];for(let x=1;x<=m;x++)d-=r[x]*Math.log(1-c*n[x-1]);d*=c,g=0,c=.5/o[m];for(let x=m+1;x<e.length;x++)g-=r[x]*Math.log(1-c*o[x]);g*=c,f=Math.abs(d-g),f<u&&(u=f,l=m)}return l}function triangle$1(e){let t=0,r=0,n=0,o=0;for(let d=0;d<e.length;d++)if(e[d]>0){t=d;break}t>0&&t--;for(let d=e.length-1;d>0;d--)if(e[d]>0){o=d;break}o<e.length-1&&o++;for(let d=0;d<e.length;d++)e[d]>r&&(n=d,r=e[d]);let a=!1;if(n-t<o-n){a=!0;let d=0,g=e.length-1;for(;d<g;){let m=e[d];e[d]=e[g],e[g]=m,d++,g--}t=e.length-1-o,n=e.length-1-n}if(t===n)return t;let s,l,u;s=e[n],l=t-n,u=Math.sqrt(s*s+l*l),s/=u,l/=u,u=s*t+l*e[t];let c=t,f=0;for(let d=t+1;d<=n;d++){let g=s*d+l*e[d]-u;g>f&&(c=d,f=g)}if(c--,a){let d=0,g=e.length-1;for(;d<g;){let m=e[d];e[d]=e[g],e[g]=m,d++,g--}return e.length-1-c}else return c}function yen(e,t){let r=new Array(e.length);for(let c=0;c<e.length;c++)r[c]=e[c]/t;let n=new Array(e.length);n[0]=r[0];for(let c=1;c<e.length;c++)n[c]=n[c-1]+r[c];let o=new Array(e.length);o[0]=r[0]*r[0];for(let c=1;c<e.length;c++)o[c]=o[c-1]+r[c]*r[c];let a=new Array(e.length);a[e.length-1]=0;for(let c=e.length-2;c>=0;c--)a[c]=a[c+1]+r[c+1]*r[c+1];let s=-1,l=Number.MIN_VALUE,u;for(let c=0;c<e.length;c++)u=-1*(o[c]*a[c]>0?Math.log(o[c]*a[c]):0)+2*(n[c]*(1-n[c])>0?Math.log(n[c]*(1-n[c])):0),u>l&&(l=u,s=c);return s}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(e=>{names[e]=e});function getThreshold(e={}){let{algorithm:t=names.otsu}=e;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let r=methods[t.toLowerCase()];if(r){let n=this.getHistogram();return r(n,this.size)}else throw new Error(`unknown thresholding algorithm: ${t}`)}const THRESHOLD="threshold";function mask(e={}){let{algorithm:t=THRESHOLD,threshold:r=.5,useAlpha:n=!0,invert:o=!1}=e;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),t===THRESHOLD?r=getThreshold$1(r,this.maxValue):r=getThreshold.call(this,e);let a=new Image(this.width,this.height,{kind:"BINARY",parent:this}),s=0;if(this.alpha&&n)for(let l=0;l<this.data.length;l+=this.channels){let u=this.data[l]+(this.maxValue-this.data[l])*(this.maxValue-this.data[l+1])/this.maxValue;(o&&u<=r||!o&&u>=r)&&a.setBit(s),s++}else for(let l=0;l<this.data.length;l+=this.channels)(o&&this.data[l]<=r||!o&&this.data[l]>=r)&&a.setBit(s),s++;return a}function copyImage(e,t,r,n){let o=e.width,a=e.height,s=t.width,l=e.channels;for(let u=0;u<o;u++)for(let c=0;c<a;c++)for(let f=0;f<l;f++){let d=(c*o+u)*l+f,g=((n+c)*s+r+u)*l+f;t.data[g]=e.data[d]}}function pad(e={}){let{size:t=0,algorithm:r="copy",color:n}=e;if(this.checkProcessable("pad",{bitDepth:[8,16]}),r==="set"){if(n.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let u=0;u<n.length;u++)n[u]===0&&(n[u]=.001)}else n=newArray$1(this.channels,null);Array.isArray(t)||(t=[t,t]);let o=this.width+t[0]*2,a=this.height+t[1]*2,s=this.channels,l=Image.createFrom(this,{width:o,height:a});copyImage(this,l,t[0],t[1]);for(let u=t[0];u<o-t[0];u++)for(let c=0;c<s;c++){let f=n[c]||l.data[(t[1]*o+u)*s+c];for(let d=0;d<t[1];d++)l.data[(d*o+u)*s+c]=f;f=n[c]||l.data[((a-t[1]-1)*o+u)*s+c];for(let d=a-t[1];d<a;d++)l.data[(d*o+u)*s+c]=f}for(let u=0;u<a;u++)for(let c=0;c<s;c++){let f=n[c]||l.data[(u*o+t[0])*s+c];for(let d=0;d<t[0];d++)l.data[(u*o+d)*s+c]=f;f=n[c]||l.data[(u*o+o-t[0]-1)*s+c];for(let d=o-t[0];d<o;d++)l.data[(u*o+d)*s+c]=f}return l}function colorDepth(e=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(e))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===e)return this.clone();let t=Image.createFrom(this,{bitDepth:e});switch(e){case 8:if(this.bitDepth===1)for(let r=0;r<this.size;r++)this.getBit(r)&&(t.data[r]=255);else for(let r=0;r<this.data.length;r++)t.data[r]=this.data[r]>>8;break;case 16:if(this.bitDepth===1)for(let r=0;r<this.size;r++)this.getBit(r)&&(t.data[r]=65535);else for(let r=0;r<this.data.length;r++)t.data[r]=this.data[r]<<8|this.data[r];break;default:throw new Error("colorDepth conversion unexpected case")}return t}function rotateFree(e,t={}){const{interpolation:r=validInterpolations.nearestneighbor,width:n=this.width,height:o=this.height}=t;if(typeof e!="number")throw new TypeError("degrees must be a number");const a=checkInterpolation(r),s=e*Math.PI/180,l=Math.floor(Math.abs(n*Math.cos(s))+Math.abs(o*Math.sin(s))),u=Math.floor(Math.abs(o*Math.cos(s))+Math.abs(n*Math.sin(s))),c=Math.cos(-s),f=Math.sin(-s);let d=l/2,g=u/2;l%2===0?(d=d-.5,u%2===0?g=g-.5:g=Math.floor(g)):(d=Math.floor(d),u%2===0?g=g-.5:g=Math.floor(g));const m=Math.floor(n/2-d),x=Math.floor(o/2-g);if(this.bitDepth===1){const w=new Image(l,u,{kind:"BINARY",parent:this});switch(a){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,w,m,x,d,g,c,f);case validInterpolations.bilinear:return rotateBinaryBilinear(this,w,m,x,d,g,c,f);default:throw new Error(`unsupported rotate interpolation: ${a}`)}}else{const w=Image.createFrom(this,{width:l,height:u});switch(a){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,w,m,x,d,g,c,f);case validInterpolations.bilinear:return rotateBilinear(this,w,m,x,d,g,c,f);default:throw new Error(`unsupported rotate interpolation: ${a}`)}}}function rotateNearestNeighbor(e,t,r,n,o,a,s,l){for(let u=0;u<t.width;u+=1)for(let c=0;c<t.height;c+=1)for(let f=0;f<e.channels;f++){let d=Math.round((u-o)*s-(c-a)*l+o)+r,g=Math.round((c-a)*s+(u-o)*l+a)+n;d<0||d>=e.width||g<0||g>=e.height?e.alpha===1&&f===e.channels-1?t.setValueXY(u,c,f,0):t.setValueXY(u,c,f,e.maxValue):t.setValueXY(u,c,f,e.getValueXY(d,g,f))}return t}function rotateBinaryNearestNeighbor(e,t,r,n,o,a,s,l){for(let u=0;u<t.width;u+=1)for(let c=0;c<t.height;c+=1){let f=Math.round((u-o)*s-(c-a)*l+o)+r,d=Math.round((c-a)*s+(u-o)*l+a)+n;(f<0||f>=e.width||d<0||d>=e.height||e.getBitXY(f,d))&&t.setBitXY(u,c)}return t}function rotateBilinear(e,t,r,n,o,a,s,l){let u=e.width*e.channels;for(let c=0;c<t.height;c++)for(let f=0;f<t.width;f++){let d=(f-o)*s-(c-a)*l+o+r,g=(c-a)*s+(f-o)*l+a+n,m=d|0,x=g|0,w=d-m,M=g-x;for(let b=0;b<e.channels;b++)if(d<0||d>=e.width||g<0||g>=e.height)e.alpha===1&&b===e.channels-1?t.setValueXY(f,c,b,0):t.setValueXY(f,c,b,e.maxValue);else{let A=(x*e.width+m)*e.channels+b,v=e.data[A],_=e.data[A+e.channels],S=e.data[A+u],B=e.data[A+u+e.channels],I=v+w*(_-v)+M*(S-v)+w*M*(v-_-S+B)|0;t.setValueXY(f,c,b,I)}}return t}function rotateBinaryBilinear(e,t,r,n,o,a,s,l){let u=e.width;for(let c=0;c<t.height;c++)for(let f=0;f<t.width;f++){let d=(f-o)*s-(c-a)*l+o+r,g=(c-a)*s+(f-o)*l+a+n,m=d|0,x=g|0,w=d-m,M=g-x;if(d<0||d>=e.width||g<0||g>=e.height)t.setBitXY(f,c);else{let b=x*e.width+m,A=e.getBit(b),v=e.getBit(b+1),_=e.getBit(b+u),S=e.getBit(b+1+u);(A|w&v-A|M&_-A|w&M&A-v-_+S)>0&&t.setBitXY(f,c)}}return t}function rotate$1(e,t){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof e!="number")throw new TypeError("angle must be a number");switch(e<0&&(e=Math.ceil(-e/360)*360+e),e%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,e,t)}}function rotateLeft(){if(this.bitDepth===1){const e=new Image(this.height,this.width,{kind:"BINARY",parent:this}),t=e.height-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)this.getBitXY(n,r)&&e.setBitXY(r,t-n);return e}else{const e=Image.createFrom(this,{width:this.height,height:this.width}),t=e.height-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)for(let o=0;o<this.channels;o++)e.setValueXY(r,t-n,o,this.getValueXY(n,r,o));return e}}function rotateRight(){if(this.bitDepth===1){const e=new Image(this.height,this.width,{kind:"BINARY",parent:this}),t=e.width-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)this.getBitXY(n,r)&&e.setBitXY(t-r,n);return e}else{const e=Image.createFrom(this,{width:this.height,height:this.width}),t=e.width-1;for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)for(let o=0;o<this.channels;o++)e.setValueXY(t-r,n,o,this.getValueXY(n,r,o));return e}}function rotate180(){if(this.bitDepth===1){const e=new Image(this.width,this.height,{kind:"BINARY",parent:this}),t=e.width-1,r=e.height-1;for(let n=0;n<this.height;n++)for(let o=0;o<this.width;o++)this.getBitXY(o,n)&&e.setBitXY(t-o,r-n);return e}else{const e=Image.createFrom(this),t=e.width-1,r=e.height-1;for(let n=0;n<this.height;n++)for(let o=0;o<this.width;o++)for(let a=0;a<this.channels;a++)e.setValueXY(t-o,r-n,a,this.getValueXY(o,n,a));return e}}function insert(e,t={}){const r=getImageParameters(e);this.checkProcessable("insert",r);let{x:n=0,y:o=0}=t;const a=getOutputImageOrInPlace(this,t,{copy:!0}),s=Math.min(a.height,o+e.height),l=Math.min(a.width,n+e.width);if(a.bitDepth===1)for(let u=o;u<s;u++)for(let c=n;c<l;c++)e.getBitXY(c-n,u-o)?a.setBitXY(c,u):a.clearBitXY(c,u);else for(let u=o;u<s;u++)for(let c=n;c<l;c++)a.setPixelXY(c,u,e.getPixelXY(c-n,u-o));return a}function setBorder(e={}){let{size:t=0,algorithm:r="copy",color:n}=e;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),r==="set"){if(n.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let l=0;l<n.length;l++)n[l]===0&&(n[l]=.001)}else n=newArray$1(this.channels,null);Array.isArray(t)||(t=[t,t]);let o=t[0],a=t[1],s=this.channels;for(let l=o;l<this.width-o;l++)for(let u=0;u<s;u++){let c=n[u]||this.data[(l+this.width*a)*s+u];for(let f=0;f<a;f++)this.data[(f*this.width+l)*s+u]=c;c=n[u]||this.data[(l+this.width*(this.height-a-1))*s+u];for(let f=this.height-a;f<this.height;f++)this.data[(f*this.width+l)*s+u]=c}for(let l=0;l<this.height;l++)for(let u=0;u<s;u++){let c=n[u]||this.data[(l*this.width+o)*s+u];for(let f=0;f<o;f++)this.data[(l*this.width+f)*s+u]=c;c=n[u]||this.data[(l*this.width+this.width-o-1)*s+u];for(let f=this.width-o;f<this.width;f++)this.data[(l*this.width+f)*s+u]=c}return this}function split(e={}){let{preserveAlpha:t=!0}=e;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let r=new Stack,n=this.data;if(this.alpha&&t)for(let o=0;o<this.components;o++){let a=Image.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),s=0;for(let l=0;l<n.length;l+=this.channels)a.data[s++]=n[l+o],a.data[s++]=n[l+this.components];r.push(a)}else for(let o=0;o<this.channels;o++){let a=Image.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),s=0;for(let l=0;l<n.length;l+=this.channels)a.data[s++]=n[l+o];r.push(a)}return r}function getChannel(e,t={}){let{keepAlpha:r=!1,mergeAlpha:n=!1}=t;r&=this.alpha,n&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),e=validateChannel(this,e);let o=Image.createFrom(this,{components:1,alpha:r,colorModel:GREY$1}),a=0;for(let s=0;s<this.data.length;s+=this.channels)n?o.data[a++]=this.data[s+e]*this.data[s+this.components]/this.maxValue:(o.data[a++]=this.data[s+e],r&&(o.data[a++]=this.data[s+this.components]));return o}function combineChannels(e=defaultCombineMethod,t={}){let{mergeAlpha:r=!1,keepAlpha:n=!1}=t;r&=this.alpha,n&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let o=Image.createFrom(this,{components:1,alpha:n,colorModel:GREY$1}),a=0;for(let s=0;s<this.size;s++){let l=e(this.getPixel(s));r?o.data[a++]=l*this.data[s*this.channels+this.components]/this.maxValue:(o.data[a++]=l,n&&(o.data[a++]=this.data[s*this.channels+this.components]))}return o}function defaultCombineMethod(e){return(e[0]+e[1]+e[2])/3}function setChannel(e,t){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),t.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),t.width!==this.width||t.height!==this.height)throw new Error("Images must have exactly the same width and height");e=validateChannel(this,e);let r=e;for(let n=0;n<t.data.length;n++)this.data[r]=t.data[n],r+=this.channels;return this}function getSimilarity(e,t={}){let{shift:r=[0,0],average:n,channels:o,defaultAlpha:a,normalize:s,border:l=[0,0]}=t;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(l)||(l=[l,l]),o=validateArrayOfChannels(this,{channels:o,defaultAlpha:a}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");typeof n>"u"&&(n=!0);let u=Math.max(l[0],-r[0]),c=Math.min(this.width-l[0],this.width-r[0]),f=Math.max(l[1],-r[1]),d=Math.min(this.height-l[1],this.height-r[1]),g=newArray$1(o.length,0);for(let m=0;m<o.length;m++){let x=o[m],w=s?this.sum[x]:Math.max(this.sum[x],e.sum[x]),M=s?e.sum[x]:Math.max(this.sum[x],e.sum[x]);if(w!==0&&M!==0)for(let b=u;b<c;b++)for(let A=f;A<d;A++){let v=b*this.multiplierX+A*this.multiplierY+x,_=v+r[0]*this.multiplierX+r[1]*this.multiplierY;g[m]+=Math.min(this.data[v]/w,e.data[_]/M)}}return n?g.reduce((m,x)=>m+x)/g.length:g}function getPixelsGrid(e={}){let{sampling:t=[10,10],painted:r=!1,mask:n}=e;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(t)||(t=[t,t]);const o=t[0],a=t[1],s=[],l=[],u=this.width/o,c=this.height/a;let f=Math.floor(u/2);for(let g=0;g<o;g++){let m=Math.floor(c/2);for(let x=0;x<a;x++){let w=Math.round(f),M=Math.round(m);(!n||n.getBitXY(w,M))&&(s.push([w,M]),l.push(this.getPixelXY(w,M))),m+=c}f+=u}const d={xyS:s,zS:l};return r&&(d.painted=this.rgba8().paintPoints(s)),d}function Matrix(e,t,r){const n=new Array(e);for(let o=0;o<e;o++)n[o]=new Array(t);if(r)for(let o=0;o<e;o++)for(let a=0;a<t;a++)n[o][a]=r;return n.width=e,n.height=t,Object.setPrototypeOf(n,Matrix.prototype),n}Matrix.prototype.localMin=function(e,t){let r=this[e][t],n=[e,t];for(let o=Math.max(0,e-1);o<Math.min(this.length,e+2);o++)for(let a=Math.max(0,t-1);a<Math.min(this[0].length,t+2);a++)this[o][a]<r&&(r=this[o][a],n=[o,a]);return{position:n,value:r}};Matrix.prototype.localMax=function(e,t){let r=this[e][t],n=[e,t];for(let o=Math.max(0,e-1);o<Math.min(this.length,e+2);o++)for(let a=Math.max(0,t-1);a<Math.min(this[0].length,t+2);a++)this[o][a]>r&&(r=this[o][a],n=[o,a]);return{position:n,value:r}};Matrix.prototype.localSearch=function(e,t,r){let n=[];for(let o=Math.max(0,e-1);o<Math.min(this.length,e+2);o++)for(let a=Math.max(0,t-1);a<Math.min(this[0].length,t+2);a++)this[o][a]===r&&n.push([o,a]);return n};function getBestMatch(e,t={}){let{border:r}=t;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");let n=new Matrix(e.width,e.height,-1/0),o=Math.floor(e.width/2),a=Math.floor(e.height/2),s=o,l=a,u=!1;for(;!u;){let c=n.localSearch(o,a,-1/0);for(let d=0;d<c.length;d++){let g=c[d],m=this.getSimilarity(e,{border:r,shift:[s-g[0],l-g[1]]});n[g[0]][g[1]]=m}let f=n.localMax(o,a);f.position[0]!==o||f.position[1]!==a?(o=f.position[0],a=f.position[1]):u=!0}return[o-s,a-l]}function getRow(e,t=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,e),checkChannel(this,t);let r=new Array(this.width),n=0,o=e*this.width*this.channels+t,a=o+this.width*this.channels;for(let s=o;s<a;s+=this.channels)r[n++]=this.data[s];return r}function getColumn(e,t=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,e),checkChannel(this,t);let r=new Array(this.height),n=0,o=this.width*this.channels;for(let a=t+e*this.channels;a<this.data.length;a+=o)r[n++]=this.data[a];return r}function getMatrix(e={}){let{channel:t}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),t===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}let r=new Matrix$2(this.height,this.width);for(let n=0;n<this.height;n++)for(let o=0;o<this.width;o++)r.set(n,o,this.getValueXY(o,n,t));return r}function setMatrix(e,t={}){e=new Matrix$2(e);let{channel:r}=t;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),r===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}if(this.width!==e.columns||this.height!==e.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let n=0;n<this.height;n++)for(let o=0;o<this.width;o++)this.setValueXY(o,n,r,e.get(n,o));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let e=new Array(this.size),t=0;for(let r=0;r<this.data.length;r+=this.channels){let n=new Array(this.components);for(let o=0;o<this.components;o++)n[o]=this.data[r+o];e[t++]=n}return e}function getIntersection(e){let t=this,r=t.getClosestCommonParent(e),n=t.getRelativePosition(r,{defaultFurther:!0}),o=getRelativePositionForAllPixels(t,n),a=e.getRelativePosition(r,{defaultFurther:!0}),s=getRelativePositionForAllPixels(e,a),l=getCommonSurface(o,s),u={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let c=0;c<l.length;c++){let f=l[c],d=[f[0]-n[0],f[1]-n[1]],g=[f[0]-a[0],f[1]-a[1]],m=t.getBitXY(d[0],d[1]),x=e.getBitXY(g[0],g[1]);m===1&&x===1&&u.commonWhitePixels.push(f)}for(let c=0;c<o.length;c++){let f,d;c!==0&&(f=Math.floor(c/t.width),d=c%t.width),t.getBitXY(f,d)===1&&u.whitePixelsMask1.push(o[c])}for(let c=0;c<s.length;c++){let f=0,d=0;c!==0&&(f=Math.floor(c/e.width),d=c%e.width),e.getBitXY(f,d)===1&&u.whitePixelsMask2.push(s[c])}return u}function getRelativePositionForAllPixels(e,t){let r=[];for(let n=0;n<e.height;n++)for(let o=0;o<e.width;o++){let a=[n,o];r.push([a[0]+t[0],a[1]+t[1]])}return r}function getCommonSurface(e,t){let r=0,n=0,o=[];for(;r<e.length&&n<t.length;)e[r][0]===t[n][0]&&e[r][1]===t[n][1]?(o.push(e[r]),r++,n++):e[r][0]<t[n][0]||e[r][0]===t[n][0]&&e[r][1]<t[n][1]?r++:n++;return o}function getClosestCommonParent(e){let t=getDepth(this),r=getDepth(e),n;if(t>=r?n=getFurthestParent(this,t):n=getFurthestParent(e,r),t===0||r===0)return n;let o=this,a=e;for(;t!==r;)if(t>r){if(o=o.parent,o===null)return n;t=t-1}else{if(a=a.parent,a===null)return n;r=r-1}for(;o!==a&&o!==null&&a!==null;)if(o=o.parent,a=a.parent,o===null||a===null)return n;return o!==a?n:o}function getDepth(e){let t=0,r=e;for(;r.parent!=null;)r=r.parent,t++;return t}function getFurthestParent(e,t){let r=e;for(;t>0;)r=r.parent,t=t-1;return r}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(e,t){e.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),t=Object.assign({},defaultOptions$1,t);const r=e.width,n=e.height,o=e.maxValue,a={sigma:t.gaussianBlur,radius:3},s=e.gaussianFilter(a),l=s.convolution(Gy,convOptions),u=s.convolution(Gx,convOptions),c=u.hypotenuse(l),f=e.constructor,d=new f(r,n,{kind:"GREY",bitDepth:32}),g=new f(r,n,{kind:"GREY",bitDepth:32}),m=new f(r,n,{kind:"GREY"});for(var x=1;x<r-1;x++)for(var w=1;w<n-1;w++){var M=(Math.round(Math.atan2(u.getValueXY(x,w,0),l.getValueXY(x,w,0))*(5/Math.PI))+5)%5;M===0&&(c.getValueXY(x,w,0)<=c.getValueXY(x,w-1,0)||c.getValueXY(x,w,0)<=c.getValueXY(x,w+1,0))||M===1&&(c.getValueXY(x,w,0)<=c.getValueXY(x-1,w+1,0)||c.getValueXY(x,w,0)<=c.getValueXY(x+1,w-1,0))||M===2&&(c.getValueXY(x,w,0)<=c.getValueXY(x-1,w,0)||c.getValueXY(x,w,0)<=c.getValueXY(x+1,w,0))||M===3&&(c.getValueXY(x,w,0)<=c.getValueXY(x-1,w-1,0)||c.getValueXY(x,w,0)<=c.getValueXY(x+1,w+1,0))||d.setValueXY(x,w,0,c.getValueXY(x,w,0))}for(x=0;x<r*n;++x){var b=d.data[x],A=0;b>t.highThreshold&&(A++,m.data[x]=o),b>t.lowThreshold&&A++,g.data[x]=A}var v=[];for(x=1;x<r-1;++x)for(w=1;w<n-1;++w)if(g.getValueXY(x,w,0)===1){e:for(var _=x-1;_<x+2;++_)for(var S=w-1;S<w+2;++S)if(g.getValueXY(_,S,0)===2){v.push([x,w]),m.setValueXY(x,w,0,o);break e}}for(;v.length>0;){var B=[];for(x=0;x<v.length;++x)for(w=-1;w<2;++w)for(_=-1;_<2;++_)if(!(w===0&&_===0)){var I=v[x][0]+w,E=v[x][1]+_;g.getValueXY(I,E,0)===1&&m.getValueXY(I,E,0)===0&&(B.push([I,E]),m.setValueXY(I,E,0,o))}v=B}return m}function cannyEdge(e){return cannyEdgeDetector(this,e)}function extract(e,t={}){let{position:r}=t;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!r&&(r=e.getRelativePosition(this),!r))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let n=Image.createFrom(this,{width:e.width,height:e.height,alpha:1,position:r,parent:this});for(let o=0;o<e.width;o++)for(let a=0;a<e.height;a++){for(let s=0;s<this.channels;s++){let l=this.getValueXY(o+r[0],a+r[1],s);n.setValueXY(o,a,s,l)}e.getBitXY(o,a)||n.setValueXY(o,a,this.components,0)}return n}else{let n=Image.createFrom(this,{width:e.width,height:e.height,position:r,parent:this});for(let o=0;o<e.height;o++)for(let a=0;a<e.width;a++)e.getBitXY(a,o)&&this.getBitXY(a+r[0],o+r[1])&&n.setBitXY(a,o);return n}}var fastList={exports:{}};(function(e,t){(function(){function r(o,a,s){this.next=s,s&&(s.prev=this),this.prev=a,a&&(a.next=this),this.data=o}function n(){if(!(this instanceof n))return new n;this._head=null,this._tail=null,this.length=0}n.prototype={push:function(o){this._tail=new r(o,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var o=this._tail;return this._tail=o.prev,o.prev&&(o.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),o.data}},unshift:function(o){this._head=new r(o,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var o=this._head;return this._head=o.next,o.next&&(o.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),o.data}},item:function(o){o<0&&(o=this.length+o);for(var a=this._head;o-- >0&&a;)a=a.next;return a?a.data:void 0},slice:function(o,a){if(o||(o=0),a||(a=this.length),a<0&&(a=this.length+a),o<0&&(o=this.length+o),a===o)return[];if(a<o)throw new Error("invalid offset: "+o+","+a+" (length="+this.length+")");for(var s=a-o,l=new Array(s),u=0,c=this._head;o-- >0&&c;)c=c.next;for(;u<s&&c;)l[u++]=c.data,c=c.next;return l},drop:function(){n.call(this)},forEach:function(o,a){for(var s=this._head,l=0,u=this.length;l<u&&s;)o.call(a||this,s.data,l,this),s=s.next,l++},map:function(o,a){var s=new n;return this.forEach(function(l,u,c){s.push(o.call(a||c,l,u,c))}),s},filter:function(o,a){var s=new n;return this.forEach(function(l,u,c){o.call(a||c,l,u,c)&&s.push(l)}),s},reduce:function(o,a,s){var l=0,u=this._head,c=this.length;for(a||(l=1,a=u&&u.data,u=u&&u.next);l<c&&u;)a=o.call(s||this,a,u.data,this),l++,u=u.next;return a}},e.exports=n})()})(fastList);var fastListExports=fastList.exports;const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(e={}){const{x:t=0,y:r=0,inPlace:n=!0}=e,o=n?this:Image.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(t,r))return o;const s=new LinkedList;for(s.push(new Node(t,r));s.length>0;){const l=s.shift();o.setBitXY(l.x,l.y);for(let u=l.x+1;u<this.width&&(!o.getBitXY(u,l.y)&&!this.getBitXY(u,l.y));u++)o.setBitXY(u,l.y),l.y+1<this.height&&!this.getBitXY(u,l.y+1)&&s.push(new Node(u,l.y+1)),l.y-1>=0&&!this.getBitXY(u,l.y-1)&&s.push(new Node(u,l.y-1));for(let u=l.x-1;u>=0&&(!o.getBitXY(u,l.y)&&!this.getBitXY(u,l.y));u++)o.setBitXY(u,l.y),l.y+1<this.height&&!this.getBitXY(u,l.y+1)&&s.push(new Node(u,l.y+1)),l.y-1>=0&&!this.getBitXY(u,l.y-1)&&s.push(new Node(u,l.y-1))}return o}function Node(e,t){this.x=e,this.y=t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}function hsv2rgb(e,t,r){t=t/100,r=r/100;var n=[],o=r*t,a=e/60,s=o*(1-Math.abs(a%2-1)),l=r-o;return a>=0&&a<1?n=[o,s,0]:a>=1&&a<2?n=[s,o,0]:a>=2&&a<3?n=[0,o,s]:e>=3&&a<4?n=[0,s,o]:e>=4&&a<5?n=[s,0,o]:e>=5&&a<=6?n=[o,0,s]:n=[0,0,0],{r:Math.round(255*(n[0]+l)),g:Math.round(255*(n[1]+l)),b:Math.round(255*(n[2]+l))}}function hsl2hsv(e,t,r){return t*=(r<50?r:100-r)/100,{h:e,s:2*t/(r+t)*100,v:r+t}}function hsl2rgb$1(e,t,r){var n=hsl2hsv(e,t,r);return hsv2rgb(n.h,n.s,n.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(e){return named(e)||hex3(e)||hex6(e)||rgb(e)||rgba$1(e)||hsl(e)||hsla(e)}function named(e){var t=colors[e.toLowerCase()];if(t)return{r:t[0],g:t[1],b:t[2],a:100}}function rgb(e){var t=e.match(/rgb\(([^)]+)\)/);if(t){var r=t[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:100}}}function rgba$1(e){var t=e.match(/rgba\(([^)]+)\)/);if(t){var r=t[1].split(/ *, */).map(Number);return{r:r[0],g:r[1],b:r[2],a:r[3]*100}}}function hex6(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:100}}function hex3(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:100}}function hsl(e){var t=e.match(/hsl\(([^)]+)\)/);if(t){var r=t[1].split(/ *, */),n=parseInt(r[0],10),o=parseInt(r[1],10),a=parseInt(r[2],10),s=hsl2rgb$1(n,o,a);return _extends({},s,{a:100})}}function hsla(e){var t=e.match(/hsla\(([^)]+)\)/);if(t){var r=t[1].split(/ *, */),n=parseInt(r[0],10),o=parseInt(r[1],10),a=parseInt(r[2],10),s=parseInt(parseFloat(r[3])*100,10),l=hsl2rgb$1(n,o,a);return _extends({},l,{a:s})}}function css2array(e){let t=parse(e);return[t.r,t.g,t.b,Math.round(t.a*255/100)]}function hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hsl2rgb(e,t,r){let n,o,a,s,l,u;return t/=100,r/=100,t===0?s=l=u=r*255:(r<=.5?o=r*(t+1):o=r+t-r*t,n=r*2-o,a=e/360,s=hue2rgb(n,o,a+1/3),l=hue2rgb(n,o,a),u=hue2rgb(n,o,a-1/3)),{r:s,g:l,b:u}}function getDistinctColors(e){let t=new Array(e),r=0;for(let n=0;n<360;n+=360/e){r++;let o=hsl2rgb(n,100,30+r%4*15);t[r-1]=[Math.round(o.r*255),Math.round(o.g*255),Math.round(o.b*255)]}return t}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(e){let{color:t,colors:r,randomColors:n,numberColors:o=50}=e;if(t&&!Array.isArray(t)&&(t=css2array(t)),t)return[t];if(r)return r=r.map(function(a){return Array.isArray(a)?a:css2array(a)}),r;if(n){r=new Array(o);for(let a=0;a<o;a++)r[a]=getRandomColor()}return getDistinctColors(o)}function paintLabels(e,t,r={}){let{color:n="blue",colors:o,font:a="12px Helvetica",rotate:s=0}=r;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(e))throw Error("paintLabels: labels must be an array");if(!Array.isArray(t))throw Error("paintLabels: positions must be an array");if(n&&!Array.isArray(n)&&(n=css2array(n)),o?o=o.map(function(c){return Array.isArray(c)?c:css2array(c)}):o=[n],e.length!==t.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(a)||(a=[a]),Array.isArray(s)||(s=[s]);let u=this.getCanvas().getContext("2d");for(let c=0;c<e.length;c++){u.save();let f=o[c%o.length];u.fillStyle=`rgba(${f[0]},${f[1]},${f[2]},${f[3]/this.maxValue})`,u.font=a[c%a.length];let d=t[c];u.translate(d[0],d[1]),u.rotate(s[c%s.length]/180*Math.PI),u.fillText(e[c],0,0),u.restore()}return this.data=Uint8Array.from(u.getImageData(0,0,this.width,this.height).data),this}function paintMasks(e,t={}){let{alpha:r=255,labels:n=[],labelsPosition:o=[],labelColor:a="blue",labelFont:s="12px Helvetica"}=t;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let l=getColors(Object.assign({},t,{numberColors:e.length}));Array.isArray(e)||(e=[e]);for(let u=0;u<e.length;u++){let c=e[u],f=l[u%l.length];for(let d=0;d<c.width;d++)for(let g=0;g<c.height;g++)if(c.getBitXY(d,g))for(let m=0;m<Math.min(this.components,f.length);m++)if(r===255)this.setValueXY(d+c.position[0],g+c.position[1],m,f[m]);else{let x=this.getValueXY(d+c.position[0],g+c.position[1],m);x=Math.round((x*(255-r)+f[m]*r)/255),this.setValueXY(d+c.position[0],g+c.position[1],m,x)}}if(Array.isArray(n)&&n.length>0){let c=this.getCanvas().getContext("2d");c.fillStyle=a,c.font=s;for(let f=0;f<Math.min(e.length,n.length);f++){let d=o[f]?o[f]:e[f].position;c.fillText(n[f],d[0],d[1])}this.data=Uint8Array.from(c.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(e,t){let r=new Array(e);for(let n=0;n<e;n++)r[n]=new Array(t).fill(0);return r}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(t={}){let{kind:r="cross",shape:n,size:o,width:a,height:s,filled:l=!0}=t;if(o&&(a=o,s=o),n)switch(n.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(a,s,{filled:l});break;case"circle":case"ellipse":this.matrix=ellipse(a,s,{filled:l});break;case"triangle":this.matrix=triangle(a,s,{filled:l});break;default:throw new Error(`Shape: unexpected shape: ${n}`)}else if(r)switch(r.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${r}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let t=this.matrix,r=[];for(let n=0;n<t.length;n++)for(let o=0;o<t[0].length;o++)t[n][o]&&r.push([o-this.halfWidth,n-this.halfHeight]);return r}getMask(){let t=new Image(this.width,this.height,{kind:BINARY});for(let r=0;r<this.matrix.length;r++)for(let n=0;n<this.matrix[0].length;n++)this.matrix[r][n]&&t.setBitXY(n,r);return t}}function rectangle(e,t,r){const n=zerosMatrix(t,e);if(r.filled)for(let o=0;o<t;o++)for(let a=0;a<e;a++)n[o][a]=1;else{for(let o of[0,t-1])for(let a=0;a<e;a++)n[o][a]=1;for(let o=0;o<t;o++)for(let a of[0,e-1])n[o][a]=1}return n}function ellipse(e,t,r){const n=zerosMatrix(t,e);let o=1-t%2,a=1-e%2,s=Math.floor((e-1)/2),l=Math.floor((t-1)/2),u=s*s,c=l*l;if(r.filled)for(let f=0;f<=l;f++){let d=Math.floor(Math.sqrt(u-u*f*f/c));for(let g=s-d;g<=s;g++)n[l-f][g]=1,n[l+f+o][g]=1,n[l-f][e-g-1]=1,n[l+f+o][e-g-1]=1}else{for(let f=0;f<=l;f++){let d=Math.floor(Math.sqrt(u-u*f*f/c)),g=s-d;n[l-f][g]=1,n[l+f+o][g]=1,n[l-f][e-g-1]=1,n[l+f+o][e-g-1]=1}for(let f=0;f<=s;f++){let d=Math.floor(Math.sqrt(c-c*f*f/u)),g=l-d;n[g][s-f]=1,n[g][s+f+a]=1,n[t-g-1][s-f]=1,n[t-g-1][s+f+a]=1}}return n}function triangle(e,t,r){if(!r.filled)throw new Error("Non filled triangle is not implemented");const n=zerosMatrix(t,e);for(let o=0;o<t;o++){let a=Math.floor((1-o/t)*e/2);for(let s=a;s<e-a;s++)n[o][s]=1}return n}function paintPoints(e,t={}){let{shape:r}=t;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let n=getColors(Object.assign({},t,{numberColors:e.length})),o=new Shape(r).getPoints(),a=Math.min(this.channels,n[0].length);for(let s=0;s<e.length;s++){let l=n[s%n.length],u=e[s][0],c=e[s][1];for(let f=0;f<o.length;f++){let d=o[f][0],g=o[f][1];if(u+d>=0&&c+g>=0&&u+d<this.width&&c+g<this.height){let m=(u+d+(c+g)*this.width)*this.channels;for(let x=0;x<a;x++)this.data[m+x]=l[x]}}}return this}function paintPolyline(e,t={}){let{color:r=[this.maxValue,0,0],closed:n=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let o=Math.min(this.channels,r.length);for(let a=0;a<e.length-1+n;a++){let s=e[a],l=e[(a+1)%e.length],u=l[0]-s[0],c=l[1]-s[1],f=Math.max(Math.abs(u),Math.abs(c)),d=u/f,g=c/f,m=s[0],x=s[1];for(let w=0;w<=f;w++){let M=Math.round(m),b=Math.round(x);if(M>=0&&b>=0&&M<this.width&&b<this.height)if(this.bitDepth===1)this.setBitXY(M,b);else{let A=(M+b*this.width)*this.channels;for(let v=0;v<o;v++)this.data[A+v]=r[v]}m=m+d,x=x+g}}return this}function paintPolylines(e,t={}){let r=Object.assign({},t);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let n=getColors(Object.assign({},t,{numberColors:e.length}));for(let o=0;o<e.length;o++)r.color=n[o%n.length],this.paintPolyline(e[o],r);return this}function paintPolygon(e,t={}){let{color:r=[this.maxValue,0,0],filled:n=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),t.closed=!0;let o=deleteDouble(e);if(n===!1)return this.paintPolyline(e,t);{let a=Array(this.height);for(let s=0;s<this.height;s++){a[s]=[];for(let l=0;l<this.width;l++)a[s].push(0)}for(let s=0;s<o.length;s++){const l=lineBetweenTwoPoints(o[s],o[(s+1)%o.length]);for(let u=0;u<this.height;u++)for(let c=0;c<this.width;c++)isAtTheRightOfTheLine(c,u,l,this.height)&&(a[u][c]=a[u][c]===0?1:0)}for(let s=0;s<this.height;s++)for(let l=0;l<this.width;l++)if(a[s][l]===1)if(this.bitDepth===1)this.setBitXY(l,s);else{let u=Math.min(this.channels,r.length),c=(l+s*this.width)*this.channels;for(let f=0;f<u;f++)this.data[c+f]=r[f]}return this.paintPolyline(e,t)}}function deleteDouble(e){let t=[];for(let r=0;r<e.length;r++)if(!(e[r][0]===e[(r+1)%e.length][0]&&e[r][1]===e[(r+1)%e.length][1])){if(e[r][0]===e[(r-1+e.length)%e.length][0]&&e[r][1]===e[(r-1+e.length)%e.length][1])continue;if(e[(r+1)%e.length][0]===e[(r-1+e.length)%e.length][0]&&e[(r-1+e.length)%e.length][1]===e[(r+1)%e.length][1])continue;t.push(e[r])}return t}function lineBetweenTwoPoints(e,t){if(e[0]===t[0])return{a:0,b:e[0],vertical:!0};{const r=(t[1]-e[1])/(t[0]-e[0]),n=e[1]-r*e[0];return{a:r,b:n,vertical:!1}}}function isAtTheRightOfTheLine(e,t,r,n){if(r.vertical===!0)return r.b<=e;if(r.a===0)return!1;{const o=(t-r.b)/r.a;return o<e&&o>=0&&o<=n}}function paintPolygons(e,t={}){let r=Object.assign({},t);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let n=getColors(Object.assign({},t,{numberColors:e.length}));for(let o=0;o<e.length;o++)r.color=n[o%n.length],this.paintPolygon(e[o],r);return this}function getHistogram(e={}){let{maxSlots:t=256,channel:r,useAlpha:n=!0}=e;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),r===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}return getChannelHistogram.call(this,r,{useAlpha:n,maxSlots:t})}function getHistograms(e={}){const{maxSlots:t=256,useAlpha:r=!0}=e;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let n=new Array(r?this.components:this.channels);for(let o=0;o<n.length;o++)n[o]=getChannelHistogram.call(this,o,{useAlpha:r,maxSlots:t});return n}function getChannelHistogram(e,t){let{useAlpha:r,maxSlots:n}=t;if(this.bitDepth===1){let u=[0,0];for(let c=0;c<this.height;c++)for(let f=0;f<this.width;f++){let d=this.getBitXY(c,f);d===0?u[0]+=1:d===1&&(u[1]+=1)}return u}let o=Math.log2(n);if(!isInteger$1(o))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let a=0;this.bitDepth>o&&(a=this.bitDepth-o);let s=this.data,l=newArray$1(Math.pow(2,Math.min(this.bitDepth,o)),0);if(r&&this.alpha){let u=this.channels-e-1;for(let c=e;c<s.length;c+=this.channels)l[s[c]>>a]+=s[c+u]/this.maxValue}else for(let u=e;u<s.length;u+=this.channels)l[s[u]>>a]++;return l}function getColorHistogram(e={}){let{useAlpha:t=!0,nbSlots:r=512}=e;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let n=Math.log(r)/Math.log(8);if(n!==Math.floor(n))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let o=this.bitDepth-n,a=this.data,s=newArray$1(Math.pow(8,n),0),l=Math.pow(2,n*2),u=Math.pow(2,n);for(let c=0;c<a.length;c+=this.channels){let f=(a[c]>>o)*l+(a[c+1]>>o)*u+(a[c+2]>>o);t&&this.alpha?s[f]+=a[c+this.channels-1]/this.maxValue:s[f]++}return s}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let e=newArray$1(this.channels,1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let r=0;r<this.channels;r++)this.data[t+r]<e[r]&&(e[r]=this.data[t+r]);return e}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let e=newArray$1(this.channels,-1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let r=0;r<this.channels;r++)this.data[t+r]>e[r]&&(e[r]=this.data[t+r]);return e}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let e=newArray$1(this.channels,0);for(let t=0;t<this.data.length;t+=this.channels)for(let r=0;r<this.channels;r++)e[r]+=this.data[t+r];return e}function getMoment(e=0,t=0){this.checkProcessable("getMoment",{bitDepth:[1]});let r=0;for(let n=0;n<this.width;n++)for(let o=0;o<this.height;o++)this.getBitXY(n,o)===1&&(r+=n**e*o**t);return r}function localMaxima(e={}){let{mask:t,region:r=3,removeClosePoints:n=0,invert:o=!1,maxEquals:a=2}=e,s=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),r*=4;let l=o?0:1,u=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],c=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],f=r<=8?1:2,d=[];for(let g=f;g<s.height-f;g++)for(let m=f;m<s.width-f;m++){if(t&&t.getBitXY(m,g)!==l)continue;let x=0,w=0,M=s.data[m+g*s.width];for(let b=0;b<r;b++)o?s.data[m+u[b]+(g+c[b])*s.width]>M&&x++:s.data[m+u[b]+(g+c[b])*s.width]<M&&x++,s.data[m+u[b]+(g+c[b])*s.width]===M&&w++;x+w===r&&w<=a&&d.push([m,g])}if(n>0)for(let g=0;g<d.length;g++)for(let m=g+1;m<d.length;m++)Math.sqrt(Math.pow(d[g][0]-d[m][0],2)+Math.pow(d[g][1]-d[m][1],2))<n&&(d[g][0]=d[g][0]+d[m][0]>>1,d[g][1]=d[g][1]+d[m][1]>>1,d.splice(m,1),m--);return d}function mean(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];t[r]=mean$2(n)}return t}function median(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];t[r]=median$2(n)}return t}function points(){this.checkProcessable("points",{bitDepth:[1]});const e=[];for(let t=0;t<this.width;t++)for(let r=0;r<this.height;r++)this.getBitXY(t,r)===1&&e.push([t,r]);return e}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const e=[];for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++)if(this.getBitXY(r,t)===1)for(e.push([r,t]),this.getBitXY(r+1,t)!==1?(e.push([r+1,t]),e.push([r+1,t+1]),this.getBitXY(r,t+1)!==1&&e.push([r,t+1])):this.getBitXY(r,t+1)!==1&&(e.push([r,t+1]),e.push([r+1,t+1]));r<this.width-2&&this.getBitXY(r+1,t)===1&&this.getBitXY(r+2,t)===1;)r++;return e}function getRelativePosition(e,t={}){if(this===e)return[0,0];let r=[0,0],n=this;for(;n;){if(n===e)return r;n.position&&(r[0]+=n.position[0],r[1]+=n.position[1]),n=n.parent}return t.defaultFurther?r:!1}function countAlphaPixels(e={}){let{alpha:t=1}=e;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let r=0;if(t!==void 0){for(let n=this.components;n<this.data.length;n+=this.channels)this.data[n]===t&&r++;return r}else return this.size}function monotoneChainConvexHull$1(e,t={}){const{sorted:r}=t;r||(e=e.slice().sort(byXThenY));const n=e.length,o=new Array(n*2);let a=0;for(let l=0;l<n;l++){const u=e[l];for(;a>=2&&cw(o[a-2],o[a-1],u)<=0;)a--;o[a++]=u}const s=a+1;for(let l=n-2;l>=0;l--){const u=e[l];for(;a>=s&&cw(o[a-2],o[a-1],u)<=0;)a--;o[a++]=u}return o.slice(0,a-1)}function cw(e,t,r){return(t[1]-e[1])*(r[0]-e[0])-(t[0]-e[0])*(r[1]-e[1])}function byXThenY(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(e){for(let t=0;t<e.length;t++)e[t][0]=Math.round(e[t][0]),e[t][1]=Math.round(e[t][1]);return e}function difference(e,t){return[e[0]-t[0],e[1]-t[1]]}function normalize(e){let t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]}function rotate(e,t,r){r===void 0&&(r=new Array(t.length));let n=Math.cos(e),o=Math.sin(e);for(let a=0;a<r.length;++a)r[a]=[n*t[a][0]-o*t[a][1],o*t[a][0]+n*t[a][1]];return r}function perimeter(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r][0],o=e[r][1],a=e[r===e.length-1?0:r+1][0],s=e[r===e.length-1?0:r+1][1];t+=Math.sqrt((a-n)**2+(s-o)**2)}return t}function surface(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r][0],o=e[r===e.length-1?0:r+1][1],a=e[r===e.length-1?0:r+1][0],s=e[r][1];t+=n*o*.5,t-=a*s*.5}return Math.abs(t)}function minMax(e){let t=1/0,r=1/0,n=-1/0,o=-1/0;for(let a=0;a<e.length;a++)e[a][0]<t&&(t=e[a][0]),e[a][0]>n&&(n=e[a][0]),e[a][1]<r&&(r=e[a][1]),e[a][1]>o&&(o=e[a][1]);return[[t,r],[n,o]]}function moveToZeroZero(e,t){t===void 0&&(t=new Array(e.length).fill(0).map(()=>[]));let r=minMax(e),n=r[0][0],o=r[0][1];for(let a=0;a<e.length;a++)t[a][0]=e[a][0]-n,t[a][1]=e[a][1]-o;return t}function minimalBoundingRectangle(e={}){const{originalPoints:t=monotoneChainConvexHull.call(this)}=e;if(t.length===0)return[];if(t.length===1)return[t[0],t[0],t[0],t[0]];const r=new Array(t.length);let n=1/0,o=0,a;for(let s=0;s<r.length;s++){let l=getAngle$1(t[s],t[(s+1)%r.length]);rotate(-l,t,r);let u=r[s][0],c=r[s][1],f=r[(s+1)%r.length][0],d=r[(s+1)%r.length][1],g=!0,m=0,x=0,w=0;for(let v=0;v<r.length;v++){let _=r[v][0],S=r[v][1],B=(_-u)/(f-u);g===!0?(g=!1,m=B,x=B):(B<m&&(m=B),B>x&&(x=B));let I=(-(f-u)*S+f*c-d*u)/(f-u);Math.abs(I)>Math.abs(w)&&(w=I)}let M=[u+m*(f-u),c],b=[u+x*(f-u),c],A=Math.abs(w*(m-x)*(f-u));A<n&&(o=l,n=A,a=[M,b,[b[0],b[1]-w],[M[0],M[1]-w]])}return rotate(o,a,a),a}function getAngle$1(e,t){let r=difference(t,e),n=normalize(r),o=Math.acos(n[0]);return n[1]<0?-o:o}function extend$1(e){let t={inPlace:!0};e.extendMethod("invert",invert),e.extendMethod("abs",abs),e.extendMethod("level",level,t),e.extendMethod("add",add,t),e.extendMethod("subtract",subtract,t),e.extendMethod("subtractImage",subtractImage),e.extendMethod("multiply",multiply,t),e.extendMethod("divide",divide,t),e.extendMethod("hypotenuse",hypotenuse),e.extendMethod("background",background$1),e.extendMethod("flipX",flipX),e.extendMethod("flipY",flipY),e.extendMethod("blurFilter",blurFilter),e.extendMethod("medianFilter",medianFilter),e.extendMethod("gaussianFilter",gaussianFilter),e.extendMethod("sobelFilter",sobelFilter),e.extendMethod("gradientFilter",gradientFilter),e.extendMethod("scharrFilter",scharrFilter),e.extendMethod("dilate",dilate),e.extendMethod("erode",erode),e.extendMethod("open",open),e.extendMethod("close",close),e.extendMethod("topHat",topHat),e.extendMethod("blackHat",blackHat),e.extendMethod("morphologicalGradient",morphologicalGradient),e.extendMethod("warpingFourPoints",warpingFourPoints),e.extendMethod("crop",crop),e.extendMethod("cropAlpha",cropAlpha),e.extendMethod("resize",resize).extendMethod("scale",resize),e.extendMethod("hsv",hsv),e.extendMethod("hsl",hsl$1),e.extendMethod("cmyk",cmyk),e.extendMethod("rgba8",rgba8),e.extendMethod("grey",grey).extendMethod("gray",grey),e.extendMethod("mask",mask),e.extendMethod("pad",pad),e.extendMethod("colorDepth",colorDepth),e.extendMethod("setBorder",setBorder,t),e.extendMethod("rotate",rotate$1),e.extendMethod("rotateLeft",rotateLeft),e.extendMethod("rotateRight",rotateRight),e.extendMethod("insert",insert),e.extendMethod("getRow",getRow),e.extendMethod("getColumn",getColumn),e.extendMethod("getMatrix",getMatrix),e.extendMethod("setMatrix",setMatrix),e.extendMethod("getPixelsArray",getPixelsArray),e.extendMethod("getIntersection",getIntersection),e.extendMethod("getClosestCommonParent",getClosestCommonParent),e.extendMethod("getThreshold",getThreshold),e.extendMethod("split",split),e.extendMethod("getChannel",getChannel),e.extendMethod("combineChannels",combineChannels),e.extendMethod("setChannel",setChannel),e.extendMethod("getSimilarity",getSimilarity),e.extendMethod("getPixelsGrid",getPixelsGrid),e.extendMethod("getBestMatch",getBestMatch),e.extendMethod("cannyEdge",cannyEdge),e.extendMethod("convolution",convolution),e.extendMethod("extract",extract),e.extendMethod("floodFill",floodFill),e.extendMethod("paintLabels",paintLabels,t),e.extendMethod("paintMasks",paintMasks,t),e.extendMethod("paintPoints",paintPoints,t),e.extendMethod("paintPolyline",paintPolyline,t),e.extendMethod("paintPolylines",paintPolylines,t),e.extendMethod("paintPolygon",paintPolygon,t),e.extendMethod("paintPolygons",paintPolygons,t),e.extendMethod("countAlphaPixels",countAlphaPixels),e.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),e.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),e.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),e.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),e.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),e.extendMethod("getMin",min).extendProperty("min",min),e.extendMethod("getMax",max).extendProperty("max",max),e.extendMethod("getSum",sum).extendProperty("sum",sum),e.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),e.extendMethod("getLocalMaxima",localMaxima),e.extendMethod("getMedian",median).extendProperty("median",median),e.extendMethod("getMean",mean).extendProperty("mean",mean),e.extendMethod("getPoints",points).extendProperty("points",points),e.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),e.extendMethod("getRelativePosition",getRelativePosition)}var quantities={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(commonjsGlobal,function(){function r($){return typeof $=="string"||$ instanceof String}var n=Number.isFinite||window.isFinite;function o($){return n($)}function a($){return $}function s($){var N={};return $.filter(function(U){return N.hasOwnProperty(U)?!1:N[U]=!0})}function l($,N){if(N.length!==$.length)return!1;for(var U=0;U<$.length;U++)if(N[U].compareArray&&!N[U].compareArray($[U])||N[U]!==$[U])return!1;return!0}function u($,N){Object.keys(N).forEach(function(U){$[U]=N[U]})}function c(){for(var $=1,N=0,U=0;U<arguments.length;U++){var J=arguments[U];N=N+g(J),$*=J}return N!==0?d($,N):$}function f($,N){if(N===0)throw new Error("Divide by zero");var U=Math.pow(10,g(N)),J=U/(U*N);return c($,J)}function d($,N){return Math.round($*Math.pow(10,N))/Math.pow(10,N)}function g($){if(!isFinite($))return 0;for(var N=0;$%1!==0;)$*=10,N++;return N}function m(){var $;if(!this)return $=Object.create(m.prototype),m.apply($,arguments),$;$=Error.apply(this,arguments),this.name="QtyError",this.message=$.message,this.stack=$.stack}m.prototype=Object.create(Error.prototype,{constructor:{value:m}});function x($,N){throw new m("Incompatible units: "+$+" and "+N)}var w={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","μ","µ","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","Ω","Ω"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},M=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],b="<1>",A=[b];function v($,N){var U=N[1],J=N[3]||[],fe=N[4]||[];if(!o(U))throw new m($+": Invalid unit definition. 'scalar' must be a number");J.forEach(function(me){if(w[me]===void 0)throw new m($+": Invalid unit definition. Unit "+me+" in 'numerator' is not recognized")}),fe.forEach(function(me){if(w[me]===void 0)throw new m($+": Invalid unit definition. Unit "+me+" in 'denominator' is not recognized")})}var _={},S={},B={},I={},E={};for(var T in w)if(w.hasOwnProperty(T)){var y=w[T];if(y[2]==="prefix"){_[T]=y[1];for(var k=0;k<y[0].length;k++)S[y[0][k]]=T}else{v(T,y),B[T]={scalar:y[1],numerator:y[3],denominator:y[4]};for(var C=0;C<y[0].length;C++)I[y[0][C]]=T}E[T]=y[0][0]}function F($){var N,U=[],J=Object.keys(w);if(typeof $>"u")for(N=0;N<J.length;N++)["","prefix"].indexOf(w[J[N]][2])===-1&&U.push(J[N].substr(1,J[N].length-2));else{if(this.getKinds().indexOf($)===-1)throw new m("Kind not recognized");for(N=0;N<J.length;N++)w[J[N]][2]===$&&U.push(J[N].substr(1,J[N].length-2))}return U.sort(function(fe,me){return fe.toLowerCase()<me.toLowerCase()?-1:fe.toLowerCase()>me.toLowerCase()?1:0})}function Y($){if(!I[$])throw new m("Unit not recognized");return w[I[$]][0]}var K=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function ee(){if(this.signature)return this.signature;for(var $=te.call(this),N=0;N<$.length;N++)$[N]*=Math.pow(20,N);return $.reduce(function(U,J){return U+J},0)}function te(){if(!this.isBase())return te.call(this.toBase());for(var $=new Array(K.length),N=0;N<$.length;N++)$[N]=0;for(var U,J,fe=0;fe<this.numerator.length;fe++)(U=w[this.numerator[fe]])&&(J=K.indexOf(U[2]),J>=0&&($[J]=$[J]+1));for(var me=0;me<this.denominator.length;me++)(U=w[this.denominator[me]])&&(J=K.indexOf(U[2]),J>=0&&($[J]=$[J]-1));return $}var q="[+-]",ue="\\d+",le=q+"?"+ue,ge="\\."+ue,de="(?:"+ue+"(?:"+ge+")?)|(?:"+ge+")",ie="[Ee]"+le,ae="(?:"+de+")(?:"+ie+")?",Q=q+"?\\s*"+ae,he="("+Q+")?\\s*([^/]*)(?:/(.+))?",pe=new RegExp("^"+he+"$"),_e="\\^|\\*{2}",xe="[01234]",ye=new RegExp("([^ \\*\\d]+?)(?:"+_e+")?(-?"+xe+"(?![a-zA-Z]))"),ve=new RegExp("([^ \\*\\d]+?)(?:"+_e+")?("+xe+"(?![a-zA-Z]))");function R($){r($)||($=$.toString()),$=$.trim();var N=pe.exec($);if(!N)throw new m($+": Quantity not recognized");var U=N[1];U?(U=U.replace(/\s/g,""),this.scalar=parseFloat(U)):this.scalar=1;for(var J=N[2],fe=N[3],me,$e,Te;N=ye.exec(J);){if(me=parseFloat(N[2]),isNaN(me))throw new m("Unit exponent is not a number");if(me===0&&!z.test(N[1]))throw new m("Unit not recognized");$e=N[1]+" ",Te="";for(var Ie=0;Ie<Math.abs(me);Ie++)Te+=$e;me>=0?J=J.replace(N[0],Te):(fe=fe?fe+Te:Te,J=J.replace(N[0],""))}for(;N=ve.exec(fe);){if(me=parseFloat(N[2]),isNaN(me))throw new m("Unit exponent is not a number");if(me===0&&!z.test(N[1]))throw new m("Unit not recognized");$e=N[1]+" ",Te="";for(var Pe=0;Pe<me;Pe++)Te+=$e;fe=fe.replace(N[0],Te)}J&&(this.numerator=H(J.trim())),fe&&(this.denominator=H(fe.trim()))}var D=Object.keys(S).sort(function($,N){return N.length-$.length}).join("|"),O=Object.keys(I).sort(function($,N){return N.length-$.length}).join("|"),V="\\b|$",G="("+D+")??("+O+")(?:"+V+")",z=new RegExp("^\\s*("+G+"[\\s\\*]*)+$"),X=new RegExp(G,"g"),P={};function H($){var N=P[$];if(N)return N;var U,J=[];if(!z.test($))throw new m("Unit not recognized");for(;U=X.exec($);)J.push(U.slice(1));return J=J.map(function(fe){return S[fe[0]]?[S[fe[0]],I[fe[1]]]:[I[fe[1]]]}),J=J.reduce(function(fe,me){return fe.concat(me)},[]),J=J.filter(function(fe){return fe}),P[$]=J,J}function j($){if(!r($))throw new m("Argument should be a string");try{return this($)}catch{return null}}function Z($){return $ instanceof L}function L($,N){if(ne.apply(null,arguments),!Z(this))return new L($,N);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=A,this.denominator=A,se($)?(this.scalar=$.scalar,this.numerator=$.numerator&&$.numerator.length!==0?$.numerator:A,this.denominator=$.denominator&&$.denominator.length!==0?$.denominator:A):N?(R.call(this,N),this.scalar=$):R.call(this,$),this.denominator.join("*").indexOf("temp")>=0)throw new m("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new m("Cannot multiply by temperatures");if(!l(this.denominator,A))throw new m("Cannot divide with temperatures")}if(this.initValue=$,W.call(this),this.isTemperature()&&this.baseScalar<0)throw new m("Temperatures must not be less than absolute zero")}L.prototype={constructor:L};function ne($,N){if(N){if(!(o($)&&r(N)))throw new m("Only number accepted as initialization value when units are explicitly provided")}else if(!(r($)||o($)||Z($)||se($)))throw new m("Only string, number or quantity accepted as single initialization value")}function se($){return $&&typeof $=="object"&&$.hasOwnProperty("scalar")}function W(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=ee.call(this);else{var $=this.toBase();this.baseScalar=$.scalar,this.signature=$.signature}}var re={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function ce(){return s(Object.keys(re).map(function($){return re[$]}))}L.prototype.kind=function(){return re[this.signature.toString()]},u(L.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&l(this.denominator,A)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function oe($,N){var U=$.units(),J=N.to(U),fe=L(be(U));return L({scalar:$.scalar-J.scalar,numerator:fe.numerator,denominator:fe.denominator})}function we($,N){var U=N.to(be($.units()));return L({scalar:$.scalar-U.scalar,numerator:$.numerator,denominator:$.denominator})}function Me($,N){var U=N.to(be($.units()));return L({scalar:$.scalar+U.scalar,numerator:$.numerator,denominator:$.denominator})}function be($){if($==="tempK")return"degK";if($==="tempC")return"degC";if($==="tempF")return"degF";if($==="tempR")return"degR";throw new m("Unknown type for temp conversion from: "+$)}function Ee($,N){var U=Se($),J=N.units(),fe;if(J==="degK")fe=U.scalar;else if(J==="degC")fe=U.scalar;else if(J==="degF")fe=U.scalar*9/5;else if(J==="degR")fe=U.scalar*9/5;else throw new m("Unknown type for degree conversion to: "+J);return L({scalar:fe,numerator:N.numerator,denominator:N.denominator})}function Se($){var N=$.units(),U;if(N.match(/(deg)[CFRK]/))U=$.baseScalar;else if(N==="tempK")U=$.scalar;else if(N==="tempC")U=$.scalar;else if(N==="tempF")U=$.scalar*5/9;else if(N==="tempR")U=$.scalar*5/9;else throw new m("Unknown type for temp conversion from: "+N);return L({scalar:U,numerator:["<kelvin>"],denominator:A})}function Ae($,N){var U=N.units(),J;if(U==="tempK")J=$.baseScalar;else if(U==="tempC")J=$.baseScalar-273.15;else if(U==="tempF")J=$.baseScalar*9/5-459.67;else if(U==="tempR")J=$.baseScalar*9/5;else throw new m("Unknown type for temp conversion to: "+U);return L({scalar:J,numerator:N.numerator,denominator:N.denominator})}function ke($){var N=$.units(),U;if(N.match(/(deg)[CFRK]/))U=$.baseScalar;else if(N==="tempK")U=$.scalar;else if(N==="tempC")U=$.scalar+273.15;else if(N==="tempF")U=($.scalar+459.67)*5/9;else if(N==="tempR")U=$.scalar*5/9;else throw new m("Unknown type for temp conversion from: "+N);return L({scalar:U,numerator:["<temp-K>"],denominator:A})}u(L.prototype,{to:function($){var N,U;if($==null)return this;if(!r($))return this.to($.units());if(N=this._conversionCache[$],N)return N;if(U=L($),U.units()===this.units())return this;if(!this.isCompatible(U))this.isInverse(U)?U=this.inverse().to($):x(this.units(),U.units());else if(U.isTemperature())U=Ae(this,U);else if(U.isDegrees())U=Ee(this,U);else{var J=f(this.baseScalar,U.baseScalar);U=L({scalar:J,numerator:U.numerator,denominator:U.denominator})}return this._conversionCache[$]=U,U},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return ke(this);var $=Oe[this.units()];return $||($=Xe(this.numerator,this.denominator),Oe[this.units()]=$),$.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new m("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function($){if(r($)&&($=L($)),o($)&&($=L($+" "+this.units())),this.isUnitless()?$.isUnitless()||x(this.units(),$.units()):$=$.to(this.units()),$.scalar===0)throw new m("Divide by zero");var N=c(Math.round(this.scalar/$.scalar),$.scalar);return L(N+this.units())}});function Ce($,N){var U=L($),J=L(N);if(U.eq(J))return a;var fe;return U.isTemperature()?fe=function(me){return U.mul(me).to(J).scalar}:fe=function(me){return me*U.baseScalar/J.baseScalar},function($e){var Te,Ie,Pe;if(Array.isArray($e)){for(Ie=$e.length,Pe=[],Te=0;Te<Ie;Te++)Pe.push(fe($e[Te]));return Pe}else return fe($e)}}var Oe={};function Xe($,N){for(var U=[],J=[],fe=1,me,$e=0;$e<$.length;$e++)me=$[$e],_[me]?fe=c(fe,_[me]):B[me]&&(fe*=B[me].scalar,B[me].numerator&&U.push(B[me].numerator),B[me].denominator&&J.push(B[me].denominator));for(var Te=0;Te<N.length;Te++)me=N[Te],_[me]?fe/=_[me]:B[me]&&(fe/=B[me].scalar,B[me].numerator&&J.push(B[me].numerator),B[me].denominator&&U.push(B[me].denominator));return U=U.reduce(function(Ie,Pe){return Ie.concat(Pe)},[]),J=J.reduce(function(Ie,Pe){return Ie.concat(Pe)},[]),L({scalar:fe,numerator:U,denominator:J})}L.parse=j,L.getUnits=F,L.getAliases=Y,L.mulSafe=c,L.divSafe=f,L.getKinds=ce,L.swiftConverter=Ce,L.Error=m,u(L.prototype,{add:function($){if(r($)&&($=L($)),this.isCompatible($)||x(this.units(),$.units()),this.isTemperature()&&$.isTemperature())throw new m("Cannot add two temperatures");return this.isTemperature()?Me(this,$):$.isTemperature()?Me($,this):L({scalar:this.scalar+$.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function($){if(r($)&&($=L($)),this.isCompatible($)||x(this.units(),$.units()),this.isTemperature()&&$.isTemperature())return oe(this,$);if(this.isTemperature())return we(this,$);if($.isTemperature())throw new m("Cannot subtract a temperature from a differential degree unit");return L({scalar:this.scalar-$.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function($){if(o($))return L({scalar:c(this.scalar,$),numerator:this.numerator,denominator:this.denominator});if(r($)&&($=L($)),(this.isTemperature()||$.isTemperature())&&!(this.isUnitless()||$.isUnitless()))throw new m("Cannot multiply by temperatures");var N=this,U=$;N.isCompatible(U)&&N.signature!==400&&(U=U.to(N));var J=qe(N.numerator,N.denominator,U.numerator,U.denominator);return L({scalar:c(N.scalar,U.scalar,J[2]),numerator:J[0],denominator:J[1]})},div:function($){if(o($)){if($===0)throw new m("Divide by zero");return L({scalar:this.scalar/$,numerator:this.numerator,denominator:this.denominator})}else r($)&&($=L($));if($.scalar===0)throw new m("Divide by zero");if($.isTemperature())throw new m("Cannot divide with temperatures");if(this.isTemperature()&&!$.isUnitless())throw new m("Cannot divide with temperatures");var N=this,U=$;N.isCompatible(U)&&N.signature!==400&&(U=U.to(N));var J=qe(N.numerator,N.denominator,U.denominator,U.numerator);return L({scalar:c(N.scalar,J[2])/U.scalar,numerator:J[0],denominator:J[1]})},inverse:function(){if(this.isTemperature())throw new m("Cannot divide with temperatures");if(this.scalar===0)throw new m("Divide by zero");return L({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function qe($,N,U,J){function fe(De){return De!==b}$=$.filter(fe),U=U.filter(fe),N=N.filter(fe),J=J.filter(fe);var me={};function $e(De,Ne){for(var Fe,Ye,Ze,je=0;je<De.length;je++)if(_[De[je]]?(Fe=De[je+1],Ye=De[je],Ze=_[Ye],je++):(Fe=De[je],Ye=null,Ze=1),Fe&&Fe!==b)if(me[Fe]){me[Fe][0]+=Ne;var Je=me[Fe][2]?_[me[Fe][2]]:1;me[Fe][Ne===1?3:4]*=f(Ze,Je)}else me[Fe]=[Ne,Fe,Ye,1,1]}$e($,1),$e(N,-1),$e(U,1),$e(J,-1);var Te=[],Ie=[],Pe=1;for(var We in me)if(me.hasOwnProperty(We)){var Re=me[We],He;if(Re[0]>0)for(He=0;He<Re[0];He++)Te.push(Re[2]===null?Re[1]:[Re[2],Re[1]]);else if(Re[0]<0)for(He=0;He<-Re[0];He++)Ie.push(Re[2]===null?Re[1]:[Re[2],Re[1]]);Pe*=f(Re[3],Re[4])}return Te.length===0&&(Te=A),Ie.length===0&&(Ie=A),Te=Te.reduce(function(De,Ne){return De.concat(Ne)},[]),Ie=Ie.reduce(function(De,Ne){return De.concat(Ne)},[]),[Te,Ie,Pe]}u(L.prototype,{eq:function($){return this.compareTo($)===0},lt:function($){return this.compareTo($)===-1},lte:function($){return this.eq($)||this.lt($)},gt:function($){return this.compareTo($)===1},gte:function($){return this.eq($)||this.gt($)},compareTo:function($){if(r($))return this.compareTo(L($));if(this.isCompatible($)||x(this.units(),$.units()),this.baseScalar<$.baseScalar)return-1;if(this.baseScalar===$.baseScalar)return 0;if(this.baseScalar>$.baseScalar)return 1},same:function($){return this.scalar===$.scalar&&this.units()===$.units()}}),u(L.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function($){return l($,A)})},isCompatible:function($){return r($)?this.isCompatible(L($)):Z($)&&$.signature!==void 0?this.signature===$.signature:!1},isInverse:function($){return this.inverse().isCompatible($)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function($){$!==b&&M.indexOf($)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function Ve(){}Ve.prototype.get=function($){return arguments.length>1&&($=Array.apply(null,arguments)),$.reduce(function(N,U,J){if(N){var fe=N[U];return J===$.length-1?fe?fe.data:void 0:fe}},this)},Ve.prototype.set=function($,N){return arguments.length>2&&($=Array.prototype.slice.call(arguments,0,-1),N=arguments[arguments.length-1]),$.reduce(function(U,J,fe){var me=U[J];return me===void 0&&(me=U[J]={}),fe===$.length-1?(me.data=N,N):me},this)};function Ge($,N){return($+" "+N).trim()}L.formatter=Ge,u(L.prototype,{units:function(){if(this._units!==void 0)return this._units;var $=l(this.numerator,A),N=l(this.denominator,A);if($&&N)return this._units="",this._units;var U=Le(this.numerator),J=Le(this.denominator);return this._units=U+(N?"":"/"+J),this._units},toString:function($,N){var U;if(o($))U=this.units(),N=$;else if(r($))U=$;else if(Z($))return this.toPrec($).toString(N);var J=this.to(U),fe=N!==void 0?d(J.scalar,N):J.scalar;return J=(fe+" "+J.units()).trim(),J},format:function($,N){arguments.length===1&&typeof $=="function"&&(N=$,$=void 0),N=N||L.formatter;var U=this.to($);return N.call(this,U.scalar,U.units())}});var Ue=new Ve;function Le($){var N=Ue.get($);if(N)return N;var U=l($,A);return U?N="1":N=Ke(ze($)).join("*"),Ue.set($,N),N}function ze($){for(var N=[],U,J,fe=0;fe<$.length;fe++)U=$[fe],J=$[fe+1],_[U]?(N.push(E[U]+E[J]),fe++):N.push(E[U]);return N}function Ke($){var N=$.reduce(function(U,J){var fe=U[J];return fe||U.push(fe=U[J]=[J,0]),fe[1]++,U},[]);return N.map(function(U){return U[0]+(U[1]>1?U[1]:"")})}return L.version="1.8.0",L})})(quantities);var quantitiesExports=quantities.exports;const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(e,t=""){let r=t.split(".");for(let n of r){if(e[n]===void 0)return;e=e[n]}return e}var orientation={exports:{}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(e,t,r){var n=e*t,o=SPLITTER*e,a=o-e,s=o-a,l=e-s,u=SPLITTER*t,c=u-t,f=u-c,d=t-f,g=n-s*f,m=g-l*f,x=m-s*d,w=l*d-x;return r?(r[0]=w,r[1]=n,r):[w,n]}var robustSum=linearExpansionSum;function scalarScalar$1(e,t){var r=e+t,n=r-e,o=r-n,a=t-n,s=e-o,l=s+a;return l?[l,r]:[r]}function linearExpansionSum(e,t){var r=e.length|0,n=t.length|0;if(r===1&&n===1)return scalarScalar$1(e[0],t[0]);var o=r+n,a=new Array(o),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),g=t[u],m=c(g),x,w;d<m?(w=f,l+=1,l<r&&(f=e[l],d=c(f))):(w=g,u+=1,u<n&&(g=t[u],m=c(g))),l<r&&d<m||u>=n?(x=f,l+=1,l<r&&(f=e[l],d=c(f))):(x=g,u+=1,u<n&&(g=t[u],m=c(g)));for(var M=x+w,b=M-x,A=w-b,v=A,_=M,S,B,I,E,T;l<r&&u<n;)d<m?(x=f,l+=1,l<r&&(f=e[l],d=c(f))):(x=g,u+=1,u<n&&(g=t[u],m=c(g))),w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S;for(;l<r;)x=f,w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S,l+=1,l<r&&(f=e[l]);for(;u<n;)x=g,w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S,u+=1,u<n&&(g=t[u]);return v&&(a[s++]=v),_&&(a[s++]=_),s||(a[s++]=0),a.length=s,a}var twoSum$1=fastTwoSum;function fastTwoSum(e,t,r){var n=e+t,o=n-e,a=n-o,s=t-o,l=e-a;return r?(r[0]=l+s,r[1]=n,r):[l+s,n]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(e,t){var r=e.length;if(r===1){var n=twoProduct(e[0],t);return n[0]?n:[n[1]]}var o=new Array(2*r),a=[.1,.1],s=[.1,.1],l=0;twoProduct(e[0],t,a),a[0]&&(o[l++]=a[0]);for(var u=1;u<r;++u){twoProduct(e[u],t,s);var c=a[1];twoSum(c,s[0],a),a[0]&&(o[l++]=a[0]);var f=s[1],d=a[1],g=f+d,m=g-f,x=d-m;a[1]=g,x&&(o[l++]=x)}return a[1]&&(o[l++]=a[1]),l===0&&(o[l++]=0),o.length=l,o}var robustDiff=robustSubtract;function scalarScalar(e,t){var r=e+t,n=r-e,o=r-n,a=t-n,s=e-o,l=s+a;return l?[l,r]:[r]}function robustSubtract(e,t){var r=e.length|0,n=t.length|0;if(r===1&&n===1)return scalarScalar(e[0],-t[0]);var o=r+n,a=new Array(o),s=0,l=0,u=0,c=Math.abs,f=e[l],d=c(f),g=-t[u],m=c(g),x,w;d<m?(w=f,l+=1,l<r&&(f=e[l],d=c(f))):(w=g,u+=1,u<n&&(g=-t[u],m=c(g))),l<r&&d<m||u>=n?(x=f,l+=1,l<r&&(f=e[l],d=c(f))):(x=g,u+=1,u<n&&(g=-t[u],m=c(g)));for(var M=x+w,b=M-x,A=w-b,v=A,_=M,S,B,I,E,T;l<r&&u<n;)d<m?(x=f,l+=1,l<r&&(f=e[l],d=c(f))):(x=g,u+=1,u<n&&(g=-t[u],m=c(g))),w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S;for(;l<r;)x=f,w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S,l+=1,l<r&&(f=e[l]);for(;u<n;)x=g,w=v,M=x+w,b=M-x,A=w-b,A&&(a[s++]=A),S=_+M,B=S-_,I=S-B,E=M-B,T=_-I,v=T+E,_=S,u+=1,u<n&&(g=-t[u]);return v&&(a[s++]=v),_&&(a[s++]=_),s||(a[s++]=0),a.length=s,a}(function(e){var t=twoProduct_1,r=robustSum,n=robustScale,o=robustDiff,a=5,s=11102230246251565e-32,l=(3+16*s)*s,u=(7+56*s)*s;function c(v,_,S,B){return function(E,T,y){var k=v(v(_(T[1],y[0]),_(-y[1],T[0])),v(_(E[1],T[0]),_(-T[1],E[0]))),C=v(_(E[1],y[0]),_(-y[1],E[0])),F=B(k,C);return F[F.length-1]}}function f(v,_,S,B){return function(E,T,y,k){var C=v(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),T[2]),v(S(v(_(T[1],k[0]),_(-k[1],T[0])),-y[2]),S(v(_(T[1],y[0]),_(-y[1],T[0])),k[2]))),v(S(v(_(T[1],k[0]),_(-k[1],T[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),k[2])))),F=v(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-y[2]),S(v(_(E[1],y[0]),_(-y[1],E[0])),k[2]))),v(S(v(_(T[1],y[0]),_(-y[1],T[0])),E[2]),v(S(v(_(E[1],y[0]),_(-y[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),y[2])))),Y=B(C,F);return Y[Y.length-1]}}function d(v,_,S,B){return function(E,T,y,k,C){var F=v(v(v(S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),y[2]),v(S(v(_(y[1],C[0]),_(-C[1],y[0])),-k[2]),S(v(_(y[1],k[0]),_(-k[1],y[0])),C[2]))),T[3]),v(S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),T[2]),v(S(v(_(T[1],C[0]),_(-C[1],T[0])),-k[2]),S(v(_(T[1],k[0]),_(-k[1],T[0])),C[2]))),-y[3]),S(v(S(v(_(y[1],C[0]),_(-C[1],y[0])),T[2]),v(S(v(_(T[1],C[0]),_(-C[1],T[0])),-y[2]),S(v(_(T[1],y[0]),_(-y[1],T[0])),C[2]))),k[3]))),v(S(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),T[2]),v(S(v(_(T[1],k[0]),_(-k[1],T[0])),-y[2]),S(v(_(T[1],y[0]),_(-y[1],T[0])),k[2]))),-C[3]),v(S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),T[2]),v(S(v(_(T[1],C[0]),_(-C[1],T[0])),-k[2]),S(v(_(T[1],k[0]),_(-k[1],T[0])),C[2]))),E[3]),S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-k[2]),S(v(_(E[1],k[0]),_(-k[1],E[0])),C[2]))),-T[3])))),v(v(S(v(S(v(_(T[1],C[0]),_(-C[1],T[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),C[2]))),k[3]),v(S(v(S(v(_(T[1],k[0]),_(-k[1],T[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),k[2]))),-C[3]),S(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),T[2]),v(S(v(_(T[1],k[0]),_(-k[1],T[0])),-y[2]),S(v(_(T[1],y[0]),_(-y[1],T[0])),k[2]))),E[3]))),v(S(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-y[2]),S(v(_(E[1],y[0]),_(-y[1],E[0])),k[2]))),-T[3]),v(S(v(S(v(_(T[1],k[0]),_(-k[1],T[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),k[2]))),y[3]),S(v(S(v(_(T[1],y[0]),_(-y[1],T[0])),E[2]),v(S(v(_(E[1],y[0]),_(-y[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),y[2]))),-k[3]))))),Y=v(v(v(S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),y[2]),v(S(v(_(y[1],C[0]),_(-C[1],y[0])),-k[2]),S(v(_(y[1],k[0]),_(-k[1],y[0])),C[2]))),E[3]),S(v(S(v(_(k[1],C[0]),_(-C[1],k[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-k[2]),S(v(_(E[1],k[0]),_(-k[1],E[0])),C[2]))),-y[3])),v(S(v(S(v(_(y[1],C[0]),_(-C[1],y[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-y[2]),S(v(_(E[1],y[0]),_(-y[1],E[0])),C[2]))),k[3]),S(v(S(v(_(y[1],k[0]),_(-k[1],y[0])),E[2]),v(S(v(_(E[1],k[0]),_(-k[1],E[0])),-y[2]),S(v(_(E[1],y[0]),_(-y[1],E[0])),k[2]))),-C[3]))),v(v(S(v(S(v(_(y[1],C[0]),_(-C[1],y[0])),T[2]),v(S(v(_(T[1],C[0]),_(-C[1],T[0])),-y[2]),S(v(_(T[1],y[0]),_(-y[1],T[0])),C[2]))),E[3]),S(v(S(v(_(y[1],C[0]),_(-C[1],y[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-y[2]),S(v(_(E[1],y[0]),_(-y[1],E[0])),C[2]))),-T[3])),v(S(v(S(v(_(T[1],C[0]),_(-C[1],T[0])),E[2]),v(S(v(_(E[1],C[0]),_(-C[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),C[2]))),y[3]),S(v(S(v(_(T[1],y[0]),_(-y[1],T[0])),E[2]),v(S(v(_(E[1],y[0]),_(-y[1],E[0])),-T[2]),S(v(_(E[1],T[0]),_(-T[1],E[0])),y[2]))),-C[3])))),K=B(F,Y);return K[K.length-1]}}function g(v){var _=v===3?c:v===4?f:d;return _(r,t,n,o)}var m=g(3),x=g(4),w=[function(){return 0},function(){return 0},function(_,S){return S[0]-_[0]},function(_,S,B){var I=(_[1]-B[1])*(S[0]-B[0]),E=(_[0]-B[0])*(S[1]-B[1]),T=I-E,y;if(I>0){if(E<=0)return T;y=I+E}else if(I<0){if(E>=0)return T;y=-(I+E)}else return T;var k=l*y;return T>=k||T<=-k?T:m(_,S,B)},function(_,S,B,I){var E=_[0]-I[0],T=S[0]-I[0],y=B[0]-I[0],k=_[1]-I[1],C=S[1]-I[1],F=B[1]-I[1],Y=_[2]-I[2],K=S[2]-I[2],ee=B[2]-I[2],te=T*F,q=y*C,ue=y*k,le=E*F,ge=E*C,de=T*k,ie=Y*(te-q)+K*(ue-le)+ee*(ge-de),ae=(Math.abs(te)+Math.abs(q))*Math.abs(Y)+(Math.abs(ue)+Math.abs(le))*Math.abs(K)+(Math.abs(ge)+Math.abs(de))*Math.abs(ee),Q=u*ae;return ie>Q||-ie>Q?ie:x(_,S,B,I)}];function M(v){var _=w[v.length];return _||(_=w[v.length]=g(v.length)),_.apply(void 0,v)}function b(v,_,S,B,I,E,T){return function(k,C,F,Y,K){switch(arguments.length){case 0:case 1:return 0;case 2:return B(k,C);case 3:return I(k,C,F);case 4:return E(k,C,F,Y);case 5:return T(k,C,F,Y,K)}for(var ee=new Array(arguments.length),te=0;te<arguments.length;++te)ee[te]=arguments[te];return v(ee)}}function A(){for(;w.length<=a;)w.push(g(w.length));e.exports=b.apply(void 0,[M].concat(w));for(var v=0;v<=a;++v)e.exports[v]=w[v]}A()})(orientation);var orientationExports=orientation.exports,robustPnp=robustPointInPolygon,orient=orientationExports;function robustPointInPolygon(e,t){for(var r=t[0],n=t[1],o=e.length,a=1,s=o,l=0,u=o-1;l<s;u=l++){var c=e[l],f=e[u],d=c[1],g=f[1];if(g<d){if(g<n&&n<d){var m=orient(c,f,t);if(m===0)return 0;a^=0<m|0}else if(n===d){var x=e[(l+1)%o],w=x[1];if(d<w){var m=orient(c,f,t);if(m===0)return 0;a^=0<m|0}}}else if(d<g){if(d<n&&n<g){var m=orient(c,f,t);if(m===0)return 0;a^=m<0|0}else if(n===d){var x=e[(l+1)%o],w=x[1];if(w<d){var m=orient(c,f,t);if(m===0)return 0;a^=m<0|0}}}else if(n===d){var M=Math.min(c[0],f[0]),b=Math.max(c[0],f[0]);if(l===0){for(;u>0;){var A=(u+o-1)%o,v=e[A];if(v[1]!==n)break;var _=v[0];M=Math.min(M,_),b=Math.max(b,_),u=A}if(u===0)return M<=r&&r<=b?0:1;s=u+1}for(var S=e[(u+o-1)%o][1];l+1<s;){var v=e[l+1];if(v[1]!==n)break;var _=v[0];M=Math.min(M,_),b=Math.max(b,_),l+=1}if(M<=r&&r<=b)return 0;var B=e[(l+1)%o][1];r<M&&S<n!=B<n&&(a^=1)}}return 2*a-1}const robustPointInPolygon$1=getDefaultExportFromCjs(robustPnp);function feretDiameters(e={}){const{originalPoints:t=monotoneChainConvexHull.call(this)}=e;if(t.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(t.length===1)return{min:1,max:1,minLine:[t[0],t[0]],maxLine:[t[0],t[0]],aspectRatio:1};const r=new Array(t.length);let n=1/0,o=0,a=[];for(let c=0;c<t.length;c++){let f=getAngle(t[c],t[(c+1)%t.length]);rotate(-f,t,r);let d=0,g=[];for(let m=0;m<t.length;m++){let x=Math.abs(r[c][1]-r[m][1]);x>d&&(d=x,g=[],g.push([r[m][0],r[c][1]],[r[m][0],r[m][1]]))}d<n&&(n=d,o=f,a=g)}rotate(o,a,a);let s=0,l=[],u=0;for(let c=0;c<t.length-1;c++)for(let f=c+1;f<t.length;f++){let d=(t[c][0]-t[f][0])**2+(t[c][1]-t[f][1])**2;d>u&&(u=d,s=Math.sqrt(d),l=[t[c],t[f]])}return{min:n,minLine:a,max:s,maxLine:l,aspectRatio:n/s}}function getAngle(e,t){let r=difference(t,e),n=normalize(r),o=Math.acos(n[0]);return n[1]<0?-o:o}class Roi{constructor(t,r){this.map=t,this.id=r,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(t={}){const{scale:r=1,kind:n=""}=t;let o;switch(n){case"contour":o=this.contourMask;break;case"box":o=this.boxMask;break;case"filled":o=this.filledMask;break;case"center":o=this.centerMask;break;case"mbr":o=this.mbrFilledMask;break;case"hull":o=this.convexHullFilledMask;break;case"hullContour":o=this.convexHullMask;break;case"mbrContour":o=this.mbrMask;break;case"feret":o=this.feretMask;break;default:o=this.mask}return r<1&&(o=o.resize({factor:r}),o.parent=this.mask.parent,o.position[0]+=this.minX,o.position[1]+=this.minY),o}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let t=this.borderIDs,r=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let n=this.internalIDs;for(let o=0;o<t.length;o++)n.includes(t[o])||(this.computed.externalIDs.push(t[o]),this.computed.externalLengths.push(r[o]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let t=getBorders(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let t=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++)this.map.data[r+this.minX+(n+this.minY)*this.map.width]===this.id&&(r>0&&r<this.width-1&&n>0&&n<this.height-1?(this.map.data[r-1+this.minX+(n+this.minY)*this.map.width]!==this.id||this.map.data[r+1+this.minX+(n+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(n-1+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(n+1+this.minY)*this.map.width]!==this.id)&&t.setBitXY(r,n):t.setBitXY(r,n));this.computed.contourMask=t}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let t=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)t.setBitXY(r,0),t.setBitXY(r,this.height-1);for(let r=0;r<this.height;r++)t.setBitXY(0,r),t.setBitXY(this.width-1,r);this.computed.boxMask=t}return this.computed.boxMask}get mask(){if(!this.computed.mask){let t=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++)this.map.data[r+this.minX+(n+this.minY)*this.map.width]===this.id&&t.setBitXY(r,n);this.computed.mask=t}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let t=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let n=0;n<this.height;n++){let o=r+this.minX+(n+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[o])&&t.setBitXY(r,n)}this.computed.filledMask=t}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let t=new Shape({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const t=[];for(let n=0;n<this.width;n++)for(let o=0;o<this.height;o++)this.map.data[n+this.minX+(o+this.minY)*this.map.width]===this.id&&(n>0&&n<this.width-1&&o>0&&o<this.height-1?(this.map.data[n-1+this.minX+(o+this.minY)*this.map.width]!==this.id||this.map.data[n+1+this.minX+(o+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(o-1+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(o+1+this.minY)*this.map.width]!==this.id)&&(t.push([n,o]),t.push([n+1,o]),t.push([n,o+1]),t.push([n+1,o+1])):(t.push([n,o]),t.push([n+1,o]),t.push([n,o+1]),t.push([n+1,o+1])));const r=monotoneChainConvexHull$1(t);this.computed.convexHull={polyline:r,surface:surface(r),perimeter:perimeter(r)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const t=this.convexHull,r=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});r.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=r}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const t=this.convexHull,r=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let o=0;o<this.height;o++)robustPointInPolygon$1(t.polyline,[n,o])!==1&&r.setBitXY(n,o);this.computed.convexHullFilledMask=r}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let t=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(t.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{let r=t[0],n=t[1],o=t[2],a=Math.sqrt((r[0]-n[0])**2+(r[1]-n[1])**2),s=Math.sqrt((o[0]-n[0])**2+(o[1]-n[1])**2);this.computed.mbr={width:a,height:s,elongation:1-a/s,aspectRatio:a/s,surface:a*s,perimeter:(a+s)*2,rectangle:t}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let t=this.perimeterInfo,r=2-Math.sqrt(2);return t.one+t.two*2+t.three*3+t.four*4-r*(t.two+t.three*2+t.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const t=new Image(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let t=round(this.mbr.rectangle);if(t.length>0){const r=minMax(t),n=new Image(r[1][0]-r[0][0]+1,r[1][1]-r[0][1]+1,{kind:BINARY,position:[this.minX+r[0][0],this.minY+r[0][1]],parent:this.map.parent});t=moveToZeroZero(t),n.paintPolyline(t,{closed:!0}),this.computed.mbrMask=n}else this.computed.mbrMask=new Image(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const t=new Image(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),r=this.mask.minimalBoundingRectangle();for(let n=0;n<this.width;n++)for(let o=0;o<this.height;o++)robustPointInPolygon$1(r,[n,o])!==1&&t.setBitXY(n,o);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let t=[];for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++){let o=(r+this.minY)*this.map.width+n+this.minX;this.map.data[o]===this.id&&t.push([n,r])}this.computed.points=t}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let t=0,r;const n=this.points;for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++){let s=Math.pow(n[o][0]-n[a][0],2)+Math.pow(n[o][1]-n[a][1],2);s>=t&&(t=s,r=[n[o],n[a]])}this.computed.maxLengthPoints=r}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let t=this.maxLengthPoints,r=-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])*180/Math.PI;this.computed.angle=r}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(e){let t=e.map,r=t.data,n=new Set,o=new Map,a=new Set,s=[1,0,-1,0],l=[0,1,0,-1];for(let f=e.minX;f<=e.maxX;f++)for(let d=e.minY;d<=e.maxY;d++){let g=f+d*t.width;if(r[g]===e.id)for(let m=0;m<4;m++){let x=f+s[m],w=d+l[m];if(x>=0&&w>=0&&x<t.width&&w<t.height){let M=x+w*t.width;if(r[M]!==e.id&&!a.has(M)){a.add(M),n.add(r[M]);let b=o.get(r[M]);b?o.set(r[M],++b):o.set(r[M],1)}}}}let u=Array.from(n),c=u.map(function(f){return o.get(f)});return{ids:u,lengths:c}}function getBoxIDs(e){let t=new Set,r=e.map,n=r.data;for(let o of[0,e.height-1])for(let a=0;a<e.width;a++){let s=(o+e.minY)*r.width+a+e.minX;if(a-e.minX>0&&n[s]===e.id&&n[s-1]!==e.id){let l=n[s-1];t.add(l)}if(r.width-a-e.minX>1&&n[s]===e.id&&n[s+1]!==e.id){let l=n[s+1];t.add(l)}}for(let o of[0,e.width-1])for(let a=0;a<e.height;a++){let s=(a+e.minY)*r.width+o+e.minX;if(a-e.minY>0&&n[s]===e.id&&n[s-r.width]!==e.id){let l=n[s-r.width];t.add(l)}if(r.height-a-e.minY>1&&n[s]===e.id&&n[s+r.width]!==e.id){let l=n[s+r.width];t.add(l)}}return Array.from(t)}function getBox(e){let t=0,r=e.map,n=r.data,o=[0];e.height>1&&(o[1]=e.height-1);for(let s of o)for(let l=1;l<e.width-1;l++){let u=(s+e.minY)*r.width+l+e.minX;n[u]===e.id&&t++}let a=[0];e.width>1&&(a[1]=e.width-1);for(let s of a)for(let l=0;l<e.height;l++){let u=(l+e.minY)*r.width+s+e.minX;n[u]===e.id&&t++}return t}function getBorder(e){let t=0,r=e.map,n=r.data;for(let o=1;o<e.width-1;o++)for(let a=1;a<e.height-1;a++){let s=(a+e.minY)*r.width+o+e.minX;n[s]===e.id&&(n[s-1]!==e.id||n[s+1]!==e.id||n[s-r.width]!==e.id||n[s+r.width]!==e.id)&&t++}return t+e.box}function getPerimeterInfo(e){let t=e.map,r=t.data,n=0,o=0,a=0,s=0;for(let l=0;l<e.width;l++)for(let u=0;u<e.height;u++){let c=(u+e.minY)*t.width+l+e.minX;if(r[c]===e.id){let f=0;switch((l===0||e.externalIDs.includes(r[c-1]))&&f++,(l===e.width-1||e.externalIDs.includes(r[c+1]))&&f++,(u===0||e.externalIDs.includes(r[c-t.width]))&&f++,(u===e.height-1||e.externalIDs.includes(r[c+t.width]))&&f++,f){case 1:n++;break;case 2:o++;break;case 3:a++;break;case 4:s++;break}}}return{one:n,two:o,three:a,four:s}}function getExternal(e){let t=0,r=e.map,n=r.data;for(let o=1;o<e.width-1;o++)for(let a=1;a<e.height-1;a++){let s=(a+e.minY)*r.width+o+e.minX;n[s]===e.id&&(e.externalIDs.includes(n[s-1])||e.externalIDs.includes(n[s+1])||e.externalIDs.includes(n[s-r.width])||e.externalIDs.includes(n[s+r.width]))&&t++}return t+e.box}function getHolesInfo(e){let t=0,r=e.map.width,n=e.map.data;for(let o=1;o<e.width-1;o++)for(let a=1;a<e.height-1;a++){let s=(a+e.minY)*r+o+e.minX;e.internalIDs.includes(n[s])&&n[s]!==e.id&&t++}return{number:e.internalIDs.length-1,surface:t}}function getInternalIDs(e){let t=[e.id],r=e.map,n=r.data;if(e.height>2)for(let a=0;a<e.width;a++){let s=e.minY*r.width+a+e.minX;if(t.includes(n[s])){let l=n[s+r.width];!t.includes(l)&&!e.boxIDs.includes(l)&&t.push(l)}}let o=new Array(4);for(let a=1;a<e.width-1;a++)for(let s=1;s<e.height-1;s++){let l=(s+e.minY)*r.width+a+e.minX;if(t.includes(n[l])){o[0]=n[l-1],o[1]=n[l+1],o[2]=n[l-r.width],o[3]=n[l+r.width];for(let u=0;u<4;u++){let c=o[u];!t.includes(c)&&!e.boxIDs.includes(c)&&t.push(c)}}}return t}class RoiLayer{constructor(t,r){this.roiMap=t,this.options=r,this.roi=this.createRoi()}createRoi(){let t=this.roiMap.data,r={};this.roiMap.positive=0,this.roiMap.negative=0;for(let l=0;l<t.length;l++)t[l]&&!r[t[l]]&&(r[t[l]]=!0,t[l]>0?this.roiMap.positive++:this.roiMap.negative++);let n={};for(let l in r)n[l]=new Roi(this.roiMap,l*1);let o=this.roiMap.width,a=this.roiMap.height;for(let l=0;l<a;l++)for(let u=0;u<o;u++){let c=l*o+u;if(t[c]!==0){const f=t[c],d=n[f];u<d.minX&&(d.minX=u),u>d.maxX&&(d.maxX=u),l<d.minY&&(d.minY=l),l>d.maxY&&(d.maxY=l),d.meanX+=u,d.meanY+=l,d.surface++}}let s=[];for(let l in r)n[l].meanX/=n[l].surface,n[l].meanY/=n[l].surface,s.push(n[l]);return s}}function commonBorderLength(e){let t=e.data,r=[1,0,-1,0],n=[0,1,0,-1],o=e.minMax,a=-o.min,s=o.max+a,l=[];for(let c=0;c<=s;c++)l.push(Object.create(null));for(let c=0;c<e.width;c++)for(let f=0;f<e.height;f++){let d=c+f*e.width,g=t[d];if(g!==0){let m=Object.create(null),x=!1;for(let w=0;w<4;w++){let M=c+r[w],b=f+n[w];if(M>=0&&b>=0&&M<e.width&&b<e.height){let A=t[M+b*e.width];g!==A&&(x=!0,A!==0&&m[A]===void 0&&(m[A]=!0,l[A+a][g]?l[A+a][g]++:l[A+a][g]=1))}else x=!0}x&&(l[g+a][g]?l[g+a][g]++:l[g+a][g]=1)}}let u={};for(let c=0;c<l.length;c++)Object.keys(l[c]).length>0&&(u[c-a]=l[c]);return u}function mergeRoi(e={}){const{algorithm:t="commonBorderLength",minCommonBorderLength:r=5,maxCommonBorderLength:n=100,minCommonBorderRatio:o=.3,maxCommonBorderRatio:a=1}=e;let s=function(M,b,A){return M[A]>=r&&M[A]<=n};typeof t=="function"&&(s=t),t.toLowerCase()==="commonborderratio"&&(s=function(M,b,A){let v=Math.min(M[A]/M[b],1);return v>=o&&v<=a});const l=this,u=l.commonBorderLength;let c={},f={};for(let M of Object.keys(u)){let b=u[M],A=Object.keys(b);for(let v of A)if(v!==M&&s(b,M,v)){let _=v;f[v]&&(_=f[v]);let S=M;if(f[M]&&(S=f[M]),Number(_)!==S){let B=Math.min(_,S),I=Math.max(_,S);if(c[B]||(c[B]={}),c[B][I]=!0,f[I]=B,c[I]){for(let E of Object.keys(c[I]))c[B][E]=!0,f[E]=B;delete c[I]}}}}let d=l.minMax,g=-d.min,m=d.max+g,x=new Array(m+1).fill(0);for(let M of Object.keys(f))x[Number(M)+g]=f[M];let w=l.data;for(let M=0;M<w.length;M++){let b=w[M];if(b!==0){let A=x[b+g];A!==0&&(w[M]=A)}}return l.computed={},l}class RoiMap{constructor(t,r){this.parent=t,this.width=t.width,this.height=t.height,this.data=r,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n=0;n<this.data.length;n++)this.data[n]<t&&(t=this.data[n]),this.data[n]>r&&(r=this.data[n]);return{min:t,max:r}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(t={}){return mergeRoi.call(this,t)}mergeRois(t){const r=t[0],n=t.slice(1);for(let o=0;o<this.data.length;o++)n.includes(this.data[o])&&(this.data[o]=r)}rowsInfo(){let t=new Array(this.height),r=0;for(let n=0;n<this.data.length;n+=this.width){let o={row:r,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[r++]=o;let a={},s={},l=[],u=this.data[n],c=0;for(let f=n;f<n+this.width;f++){let d=this.data[f];u!==d&&(u=d,l.push(c),c=0),c++,d>0?(o.positivePixel++,a[d]||(a[d]=!0)):d<0?(o.negativePixel++,s[d]||(s[d]=!0)):o.zeroPixel++}l.push(c),o.medianChange=l.sort((f,d)=>f-d)[Math.floor(l.length/2)],o.positiveRoiIDs=Object.keys(a),o.negativeRoiIDs=Object.keys(s),o.positiveRoi=o.positiveRoiIDs.length,o.negativeRoi=o.negativeRoiIDs.length}return t}colsInfo(){let t=new Array(this.width),r=0;for(let n=0;n<this.width;n++){let o={col:r,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[r++]=o;let a={},s={},l=[],u=this.data[n],c=0;for(let f=n;f<n+this.data.length;f+=this.width){let d=this.data[f];u!==d&&(u=d,l.push(c),c=0),c++,d>0?(o.positivePixel++,a[d]||(a[d]=!0)):d<0?(o.negativePixel++,s[d]||(s[d]=!0)):o.zeroPixel++}l.push(c),o.medianChange=l.sort((f,d)=>f-d)[Math.floor(l.length/2)],o.positiveRoiIDs=Object.keys(a),o.negativeRoiIDs=Object.keys(s),o.positiveRoi=o.positiveRoiIDs.length,o.negativeRoi=o.negativeRoiIDs.length}return t}}function fromMask(e,t={}){const{allowCorners:r=!1}=t,n=65535;let o=new Int16Array(e.size),a=0,s=0,l=new Uint16Array(n+1),u=new Uint16Array(n+1);for(let f=0;f<e.width;f++)for(let d=0;d<e.height;d++)o[d*e.width+f]===0&&c(f,d);function c(f,d){let g=0,m=0,x=e.getBitXY(f,d),w=x?++a:--s;if(a>32767||s<-32768)throw new Error("Too many regions of interest");for(l[0]=f,u[0]=d;g<=m;){let M=l[g&n],b=u[g&n];if(o[b*e.width+M]=w,M>0&&o[b*e.width+M-1]===0&&e.getBitXY(M-1,b)===x&&(m++,l[m&n]=M-1,u[m&n]=b,o[b*e.width+M-1]=-32768),b>0&&o[(b-1)*e.width+M]===0&&e.getBitXY(M,b-1)===x&&(m++,l[m&n]=M,u[m&n]=b-1,o[(b-1)*e.width+M]=-32768),M<e.width-1&&o[b*e.width+M+1]===0&&e.getBitXY(M+1,b)===x&&(m++,l[m&n]=M+1,u[m&n]=b,o[b*e.width+M+1]=-32768),b<e.height-1&&o[(b+1)*e.width+M]===0&&e.getBitXY(M,b+1)===x&&(m++,l[m&n]=M,u[m&n]=b+1,o[(b+1)*e.width+M]=-32768),r&&(M>0&&b>0&&o[(b-1)*e.width+M-1]===0&&e.getBitXY(M-1,b-1)===x&&(m++,l[m&n]=M-1,u[m&n]=b-1,o[(b-1)*e.width+M-1]=-32768),M<e.width-1&&b>0&&o[(b-1)*e.width+M+1]===0&&e.getBitXY(M+1,b-1)===x&&(m++,l[m&n]=M+1,u[m&n]=b-1,o[(b-1)*e.width+M+1]=-32768),M>0&&b<e.height-1&&o[(b+1)*e.width+M-1]===0&&e.getBitXY(M-1,b+1)===x&&(m++,l[m&n]=M-1,u[m&n]=b+1,o[(b+1)*e.width+M-1]=-32768),M<e.width-1&&b<e.height-1&&o[(b+1)*e.width+M+1]===0&&e.getBitXY(M+1,b+1)===x&&(m++,l[m&n]=M+1,u[m&n]=b+1,o[(b+1)*e.width+M+1]=-32768)),g++,m-g>n)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(e,o)}class DisjointSet{constructor(){this.nodes=new Map}add(t){var r=this.nodes.get(t);return r||(r=new DisjointSetNode(t),this.nodes.set(t,r)),r}union(t,r){const n=this.find(t),o=this.find(r);n!==o&&(n.rank<o.rank?n.parent=o:n.rank>o.rank?o.parent=n:(o.parent=n,n.rank++))}find(t){for(var r=t;r.parent!==null;)r=r.parent;for(var n=t;n.parent!==null;){var o=n;n=n.parent,o.parent=r}return r}connected(t,r){return this.find(t)===this.find(r)}}var DisjointSet_1=DisjointSet;function DisjointSetNode(e){this.value=e,this.parent=null,this.rank=0}const DisjointSet$1=getDefaultExportFromCjs(DisjointSet_1),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(e,t={}){const{allowCorners:r=!1}=t;let n=4;r&&(n=8);let o,a,s;if(n===8)o=direction8X,a=direction8Y,s=neighbours8;else if(n===4)o=direction4X,a=direction4Y,s=neighbours4;else throw new RangeError(`unsupported neighbours count: ${n}`);const l=e.size,u=e.width,c=e.height,f=new Array(l),d=new Uint32Array(l),g=new DisjointSet$1;let m=1;for(let x=0;x<c;x++)for(let w=0;w<u;w++){const M=w+x*u;if(e.getBit(M)){let b=null;for(let A=0;A<s.length;A++){const v=w+o[A],_=x+a[A];if(v>=0&&_>=0&&v<u&&_<c){const S=v+_*u;let B=f[S];B?(s[A]=B,(!b||s[A].value<b.value)&&(b=s[A])):s[A]=null}}if(!b)f[M]=g.add(m++);else{f[M]=b;for(let A=0;A<s.length;A++)s[A]&&s[A]!==b&&g.union(b,s[A])}}}for(let x=0;x<c;x++)for(let w=0;w<u;w++){const M=w+x*u;e.getBit(M)&&(d[M]=g.find(f[M]).value)}return new RoiMap(e,d)}function fromMaxima(e={}){let{allowCorner:t=!0,onlyTop:r=!1,invert:n=!1}=e,o=this;o.checkProcessable("fromMaxima",{components:[1]});const a=1,s=2;let l=0,u=0,c=new Int16Array(o.size),f=new Int8Array(o.size),d=new Float32Array(o.size),g=1048575,m=new Uint16Array(g+1),x=new Uint16Array(g+1),w=0,M=0,b=new Uint16Array(g+1),A=new Uint16Array(g+1),v=0,_=0;for(S(o);w<M;){let E=m[w&g],T=x[w&g];I(E,T,s),w++}return new RoiMap(o,c);function S({maxima:E=!0}){for(let T=1;T<o.height-1;T++)for(let y=1;y<o.width-1;y++){let k=y+T*o.width;if(f[k]===0){let C=E?o.data[k]:-o.data[y+T*o.width];if(o.data[T*o.width+y-1]>C||o.data[T*o.width+y+1]>C||o.data[(T-1)*o.width+y]>C||o.data[(T+1)*o.width+y]>C||t&&(o.data[(T-1)*o.width+y-1]>C||o.data[(T-1)*o.width+y+1]>C||o.data[(T+1)*o.width+y-1]>C||o.data[(T+1)*o.width+y+1]>C))continue;c[k]=E?++l:--u,B(y,T)||(E?--l:++u)}}}function B(E,T){let y=M;v=0,_=1,b[0]=E,A[0]=T;let k=!0;for(;v<_;){let C=b[v&g],F=A[v&g];k&=I(C,F,a),v++}if(!k){for(let C=0;C<_;C++){let F=b[C&g],K=A[C&g]*o.width+F;c[K]=0}M=y}return k}function I(E,T,y){let k=c[T*o.width+E],C=o.data[T*o.width+E];for(let F=T-1;F<=T+1;F++)for(let Y=E-1;Y<=E+1;Y++){let K=F*o.width+Y;if(f[K]===0)switch(f[K]=1,d[K]=o.data[K]-C,y){case a:if(d[K]===0){if(Y===0||F===0||Y===o.width-1||F===o.height-1)return!1;c[K]=k,b[_&g]=Y,A[_&g]=F,_++}else{if(d[K]>0)return!1;r||(c[K]=k,m[M&g]=Y,x[M&g]=F,M++)}break;case s:d[K]<=0&&(c[K]=k,m[M&g]=Y,x[M&g]=F,M++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(e,t={}){let r=new Shape(t),n=new Int16Array(this.size),o=0,a=r.getPoints();for(let s=0;s<e.length;s++){o++;let l=e[s][0],u=e[s][1];for(let c=0;c<a.length;c++){let f=a[c][0],d=a[c][1];l+f>=0&&u+d>=0&&l+f<this.width&&u+d<this.height&&(n[l+f+(u+d)*this.width]=o)}}return new RoiMap(this,n)}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,a){function s(c,f){if(!o[c]){if(!n[c]){var d=typeof commonjsRequire=="function"&&commonjsRequire;if(!f&&d)return d(c,!0);if(l)return l(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var m=o[c]={exports:{}};n[c][0].call(m.exports,function(x){var w=n[c][1][x];return s(w||x)},m,m.exports,r,n,o,a)}return o[c].exports}for(var l=typeof commonjsRequire=="function"&&commonjsRequire,u=0;u<a.length;u++)s(a[u]);return s}({1:[function(r,n,o){var a,s,l,u,c,f=function(g,m){for(var x in m)d.call(m,x)&&(g[x]=m[x]);function w(){this.constructor=g}return w.prototype=m.prototype,g.prototype=new w,g.__super__=m.prototype,g},d={}.hasOwnProperty;a=r("./PriorityQueue/AbstractPriorityQueue"),s=r("./PriorityQueue/ArrayStrategy"),u=r("./PriorityQueue/BinaryHeapStrategy"),l=r("./PriorityQueue/BHeapStrategy"),c=function(g){f(m,g);function m(x){x||(x={}),x.strategy||(x.strategy=u),x.comparator||(x.comparator=function(w,M){return(w||0)-(M||0)}),m.__super__.constructor.call(this,x)}return m}(a),c.ArrayStrategy=s,c.BinaryHeapStrategy=u,c.BHeapStrategy=l,n.exports=c},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(r,n,o){n.exports=function(){function a(s){var l;if((s!=null?s.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((s!=null?s.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new s.strategy(s),this.length=(s!=null&&(l=s.initialValues)!=null?l.length:void 0)||0}return a.prototype.queue=function(s){this.length++,this.priv.queue(s)},a.prototype.dequeue=function(s){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},a.prototype.peek=function(s){if(!this.length)throw"Empty queue";return this.priv.peek()},a.prototype.clear=function(){return this.length=0,this.priv.clear()},a}()},{}],3:[function(r,n,o){var a;a=function(s,l,u){var c,f,d;for(f=0,c=s.length;f<c;)d=f+c>>>1,u(s[d],l)>=0?f=d+1:c=d;return f},n.exports=function(){function s(l){var u;this.options=l,this.comparator=this.options.comparator,this.data=((u=this.options.initialValues)!=null?u.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return s.prototype.queue=function(l){var u;u=a(this.data,l,this.comparator),this.data.splice(u,0,l)},s.prototype.dequeue=function(){return this.data.pop()},s.prototype.peek=function(){return this.data[this.data.length-1]},s.prototype.clear=function(){this.data.length=0},s}()},{}],4:[function(r,n,o){n.exports=function(){function a(s){var l,u,c,f,d,g,m,x;for(this.comparator=(s!=null?s.comparator:void 0)||function(w,M){return w-M},this.pageSize=(s!=null?s.pageSize:void 0)||512,this.length=0,m=0;1<<m<this.pageSize;)m+=1;if(1<<m!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=m,this._emptyMemoryPageTemplate=l=[],u=0,d=this.pageSize;0<=d?u<d:u>d;0<=d?++u:--u)l.push(null);if(this._memory=[],this._mask=this.pageSize-1,s.initialValues)for(g=s.initialValues,c=0,f=g.length;c<f;c++)x=g[c],this.queue(x)}return a.prototype.queue=function(s){this.length+=1,this._write(this.length,s),this._bubbleUp(this.length,s)},a.prototype.dequeue=function(){var s,l;return s=this._read(1),l=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,l),this._bubbleDown(1,l)),s},a.prototype.peek=function(){return this._read(1)},a.prototype.clear=function(){this.length=0,this._memory.length=0},a.prototype._write=function(s,l){var u;for(u=s>>this._shift;u>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[u][s&this._mask]=l},a.prototype._read=function(s){return this._memory[s>>this._shift][s&this._mask]},a.prototype._bubbleUp=function(s,l){var u,c,f,d;for(u=this.comparator;s>1&&(c=s&this._mask,s<this.pageSize||c>3?f=s&~this._mask|c>>1:c<2?(f=s-this.pageSize>>this._shift,f+=f&~(this._mask>>1),f|=this.pageSize>>1):f=s-2,d=this._read(f),!(u(d,l)<0));)this._write(f,l),this._write(s,d),s=f},a.prototype._bubbleDown=function(s,l){var u,c,f,d,g;for(g=this.comparator;s<this.length;)if(s>this._mask&&!(s&this._mask-1)?u=c=s+2:s&this.pageSize>>1?(u=(s&~this._mask)>>1,u|=s&this._mask>>1,u=u+1<<this._shift,c=u+1):(u=s+(s&this._mask),c=u+1),u!==c&&c<=this.length)if(f=this._read(u),d=this._read(c),g(f,l)<0&&g(f,d)<=0)this._write(u,l),this._write(s,f),s=u;else if(g(d,l)<0)this._write(c,l),this._write(s,d),s=c;else break;else if(u<=this.length)if(f=this._read(u),g(f,l)<0)this._write(u,l),this._write(s,f),s=u;else break;else break},a}()},{}],5:[function(r,n,o){n.exports=function(){function a(s){var l;this.comparator=(s!=null?s.comparator:void 0)||function(u,c){return u-c},this.length=0,this.data=((l=s.initialValues)!=null?l.slice(0):void 0)||[],this._heapify()}return a.prototype._heapify=function(){var s,l,u;if(this.data.length>0)for(s=l=1,u=this.data.length;1<=u?l<u:l>u;s=1<=u?++l:--l)this._bubbleUp(s)},a.prototype.queue=function(s){this.data.push(s),this._bubbleUp(this.data.length-1)},a.prototype.dequeue=function(){var s,l;return l=this.data[0],s=this.data.pop(),this.data.length>0&&(this.data[0]=s,this._bubbleDown(0)),l},a.prototype.peek=function(){return this.data[0]},a.prototype.clear=function(){this.length=0,this.data.length=0},a.prototype._bubbleUp=function(s){for(var l,u;s>0&&(l=s-1>>>1,this.comparator(this.data[s],this.data[l])<0);)u=this.data[l],this.data[l]=this.data[s],this.data[s]=u,s=l},a.prototype._bubbleDown=function(s){var l,u,c,f,d;for(l=this.data.length-1;u=(s<<1)+1,f=u+1,c=s,u<=l&&this.comparator(this.data[u],this.data[c])<0&&(c=u),f<=l&&this.comparator(this.data[f],this.data[c])<0&&(c=f),c!==s;)d=this.data[c],this.data[c]=this.data[s],this.data[s]=d,s=c},a}()},{}]},{},[1])(1)})})(priorityQueue);var priorityQueueExports=priorityQueue.exports;const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(e={}){let{points:t,mask:r,image:n,fillMaxValue:o=this.maxValue,invert:a=!1}=e,s=n||this;s.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),a=!a,t||(t=s.getLocalMaxima({invert:a,mask:r}));let l=a?0:1,u=new Int16Array(s.size),c=s.width,f=s.height,d=new PriorityQueue({comparator:(g,m)=>g[2]-m[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let g=0;g<t.length;g++){let m=t[g][0]+t[g][1]*c;u[m]=g+1;let x=s.data[m];(a&&x<=o||!a&&x>=o)&&d.queue([t[g][0],t[g][1],x])}for(;d.length>0;){let g=d.dequeue(),m=g[0]+g[1]*c;for(let x=0;x<4;x++){let w=g[0]+dxs[x],M=g[1]+dys[x];if(w>=0&&M>=0&&w<c&&M<f){let b=w+M*c;if(!r||r.getBit(b)===l){let A=s.data[b];(a&&A<=o||!a&&A>=o)&&u[b]===0&&(u[b]=u[m],d.queue([g[0]+dxs[x],g[1]+dys[x],A]))}}}}return new RoiMap(s,u)}class RoiManager{constructor(t,r={}){this._image=t,this._options=r,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(t={}){let r=Object.assign({},this._options,t),n=fromMaxima.call(this._image,t);this._layers[r.label]=new RoiLayer(n,r)}fromPoints(t,r={}){let n=Object.assign({},this._options,r),o=fromPoints.call(this._image,t,r);return this._layers[n.label]=new RoiLayer(o,n),this}putMap(t,r={}){let n=new RoiMap(this._image,t),o=Object.assign({},this._options,r);return this._layers[o.label]=new RoiLayer(n,o),this}fromWaterShed(t={}){let r=Object.assign({},this._options,t),n=fromWaterShed.call(this._image,t);this._layers[r.label]=new RoiLayer(n,r)}fromMask(t,r={}){let n=Object.assign({},this._options,r),o=fromMask.call(this._image,t,r);return this._layers[n.label]=new RoiLayer(o,n),this}fromMaskConnectedComponentLabelingAlgorithm(t,r={}){let n=Object.assign({},this._options,r),o=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,t,r);return this._layers[n.label]=new RoiLayer(o,n),this}getMap(t={}){let r=Object.assign({},this._options,t);return this._assertLayerWithLabel(r.label),this._layers[r.label].roiMap}rowsInfo(t={}){return this.getMap(t).rowsInfo()}colsInfo(t={}){return this.getMap(t).rowsInfo()}getRoiIds(t={}){let r=this.getRois(t);if(r){let n=new Array(r.length);for(let o=0;o<r.length;o++)n[o]=r[o].id;return n}throw new Error("ROIs not found")}getRois(t={}){let{label:r=this._options.label,positive:n=!0,negative:o=!0,minSurface:a=0,maxSurface:s=Number.POSITIVE_INFINITY,minWidth:l=0,maxWidth:u=Number.POSITIVE_INFINITY,minHeight:c=0,maxHeight:f=Number.POSITIVE_INFINITY,minRatio:d=0,maxRatio:g=Number.POSITIVE_INFINITY}=t;if(!this._layers[r])throw new Error(`this Roi layer (${r}) does not exist`);const m=this._layers[r].roi,x=[];for(const w of m)(w.id<0&&o||w.id>0&&n)&&w.surface>=a&&w.surface<=s&&w.width>=l&&w.width<=u&&w.height>=c&&w.height<=f&&w.ratio>=d&&w.ratio<=g&&x.push(w);return x}getRoi(t,r={}){const{label:n=this._options.label}=r;if(!this._layers[n])throw new Error(`this Roi layer (${n}) does not exist`);const o=this._layers[n].roi.find(a=>a.id===t);if(!o)throw new Error(`found no Roi with id ${t}`);return o}getMasks(t={}){let r=this.getRois(t),n=new Array(r.length);for(let o=0;o<r.length;o++)n[o]=r[o].getMask(t);return n}getAnalysisMasks(t={}){const{analysisProperty:r}=t;let n=`${r}Mask`,o=this.getRois(t);return o.length===0||!o[0][n]?[]:o.map(a=>a[n])}getData(t={}){let r=Object.assign({},this._options,t);return this._assertLayerWithLabel(r.label),this._layers[r.label].roiMap.data}paint(t={}){let{labelProperty:r,analysisProperty:n}=t;this._painted||(this._painted=this._image.rgba8());let o=this.getMasks(t);if(r){const a=this.getRois(t);t.labels=a.map(c=>deepValue(c,r));const s=Math.max(...t.labels);let l=!1,u=!1;if(r.includes("surface")?l=!0:/(?:perimeter|min|max|external|width|height|length)/.test(r)&&(u=!0),isFinite(s)){let c="";if(t.unit!=="pixel"&&t.pixelSize&&(u||l)){c=l?`${t.unit}^2`:t.unit;let f=l?"m^2":"m",d=l?t.pixelSize**2:t.pixelSize;const g=Qty.swiftConverter(f,c);t.labels=t.labels.map(m=>g(d*m))}s>50?t.labels=t.labels.map(f=>Math.round(f)+c):s>10?t.labels=t.labels.map(f=>f.toFixed(1)+c):t.labels=t.labels.map(f=>f.toFixed(2)+c)}t.labelsPosition=a.map(c=>[c.meanX,c.meanY])}if(this._painted.paintMasks(o,t),n){let a=this.getAnalysisMasks(t);this._painted.paintMasks(a,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}getMask(t={}){let r=new Image(this._image.width,this._image.height,{kind:"BINARY"}),n=this.getMasks(t);for(let o=0;o<n.length;o++){let a=n[o];for(let s=0;s<a.width;s++)for(let l=0;l<a.height;l++)a.getBitXY(s,l)&&r.setBitXY(s+a.position[0],l+a.position[1])}return r}resetPainted(t={}){const{image:r}=t;r?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(t={}){const r=this.getMap(t);return r.mergeRoi(t),this.putMap(r.data,t),this}mergeRois(t,r={}){if(!Array.isArray(t)||t.some(o=>!Number.isInteger(o)))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach(o=>this.getRoi(o));const n=this.getMap(r);return n.mergeRois(t),this.putMap(n.data,r),this}findCorrespondingRoi(t,r={}){let n=this.getRois(r),o=[];for(let a=0;a<n.length;a++){let s=n[a],l=s.minX,u=s.minY,c=s.points,f=Math.sign(s.id),d=correspondingRoisInformation(l,u,c,t,f);o.push(d)}return o}_assertLayerWithLabel(t){if(!this._layers[t])throw new Error(`no layer with label ${t}`)}}function correspondingRoisInformation(e,t,r,n,o){let a={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let s=0;s<r.length;s++){let l=r[s],u=l[0],c=l[1],f=u+e+(c+t)*n.width,d=n.data[f];(d>0||d<0)&&(a.id.includes(d)?a.surface[a.id.indexOf(d)]+=1:(a.id.push(d),a.surface.push(1)))}for(let s=0;s<a.id.length;s++)Math.sign(a.id[s])===o?a.same+=a.surface[s]:a.opposite+=a.surface[s],a.roiSurfaceCovered[s]=a.surface[s]/r.length;return a.total=a.opposite+a.same,a}const objectToString=Object.prototype.toString;class Image{constructor(t,r,n,o){if(arguments.length===1?(o=t,{width:t,height:r,data:n}=o):n&&!n.length&&(o=n,{data:n}=o),t===void 0&&(t=1),r===void 0&&(r=1),o===void 0&&(o={}),typeof o!="object"||o===null)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new RangeError("height must be a positive integer");const{kind:a=RGBA}=o;if(typeof a!="string")throw new TypeError("kind must be a string");const s=getKind(a),l=Object.assign({},o);for(const w in s)l[w]===void 0&&(l[w]=s[w]);verifyKindDefinition(l);const{components:u,bitDepth:c,colorModel:f}=l,d=l.alpha+0,g=t*r,m=u+d,x=c===32?Number.MAX_VALUE:2**c-1;if(n===void 0)n=createPixelArray(g,u,d,m,c,x);else{const w=getTheoreticalPixelArraySize(g,m,c);if(n.length!==w)throw new RangeError(`incorrect data size: ${n.length}. Should be ${w}`)}this.width=t,this.height=r,this.data=n,this.size=g,this.components=u,this.alpha=d,this.bitDepth=c,this.maxValue=x,this.colorModel=f,this.channels=m,this.meta=o.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:o.parent||null}),this.position=o.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(t){return objectToString.call(t)==="[object IJSImage]"}static fromCanvas(t){const n=t.getContext("2d").getImageData(0,0,t.width,t.height);return new Image(n.width,n.height,n.data)}static createFrom(t,r){const n=getImageParameters(t);return Object.assign(n,{parent:t,position:[0,0]},r),new Image(n)}getRoiManager(t){return new RoiManager(this,t)}clone(){const t=this.data.slice();return new Image(this.width,this.height,t,this)}apply(t){for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++){let o=(r*this.width+n)*this.channels;t.call(this,o)}}}setValueMethods(Image);setBitMethods(Image);setExportMethods(Image);Image.prototype.checkProcessable=checkProcessable;Image.prototype.getRGBAData=getRGBAData;Image.load=load;Image.extendMethod=extendMethod;Image.extendProperty=extendProperty;extend$1(Image);var workerTemplate$1={},worker$1=function(){self.window=self;function e(){this._listeners={}}e.prototype.on=function(r,n){if(this._listeners[r])throw new RangeError("there is already a listener for "+r);if(typeof n!="function")throw new TypeError("callback argument must be a function");this._listeners[r]=n},e.prototype._send=function(r,n,o){o===void 0?o=[]:Array.isArray(o)||(o=[o]),self.postMessage({id:r,data:n},o)},e.prototype._trigger=function(r,n){if(!this._listeners[r])throw new Error("event "+r+" is not defined");this._listeners[r].apply(null,n)};var t=new e;self.onmessage=function(r){switch(r.data.action){case"exec":r.data.args.unshift(function(n,o){t._send(r.data.id,n,o)}),t._trigger(r.data.event,r.data.args);break;case"ping":t._send(r.data.id,"pong");break;default:throw new Error("unexpected action: "+r.data.action)}}},workerStr=worker$1.toString().split('"CODE";');workerTemplate$1.newWorkerURL=function e(t,r){var n=new Blob(["(",workerStr[0],"importScripts.apply(self, "+JSON.stringify(r)+`);
`,"(",t,")();",workerStr[1],")();"],{type:"application/javascript"});return URL.createObjectURL(n)};var workerTemplate=workerTemplate$1,CORES=navigator.hardwareConcurrency||1;function WorkerManager(e,t){if(typeof e!="string"&&typeof e!="function")throw new TypeError("func argument must be a function");if(t===void 0&&(t={}),typeof t!="object"||t===null)throw new TypeError("options argument must be an object");this._workerCode=e.toString(),t.maxWorkers===void 0||t.maxWorkers==="auto"?this._numWorkers=Math.min(CORES-1,1):t.maxWorkers>0?this._numWorkers=Math.min(t.maxWorkers,CORES):this._numWorkers=CORES,this._workers=new Map,this._timeout=t.timeout||0,this._terminateOnError=!!t.terminateOnError;var r=t.deps;typeof r=="string"&&(r=[r]),Array.isArray(r)||(r=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(r)}WorkerManager.prototype._init=function(e){for(var t=workerTemplate.newWorkerURL(this._workerCode,e),r=0;r<this._numWorkers;r++){var n=new Worker(t);n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,n.id=r,this._workers.set(n,null)}URL.revokeObjectURL(t)};WorkerManager.prototype._onerror=function(e,t){if(!this._terminated){this._working--,e.running=!1;var r=this._workers.get(e);r&&r[1](t.message),this._workers.set(e,null),this._terminateOnError?this.terminate():this._exec()}};WorkerManager.prototype._onmessage=function(e,t){if(!this._terminated){this._working--,e.running=!1;var r=this._workers.get(e);r&&r[0](t.data.data),this._workers.set(e,null),this._exec()}};WorkerManager.prototype._exec=function(){for(var e of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!e.running)for(var t=0;t<this._waiting.length;t++){var r=this._waiting[t];if(!(typeof r[4]=="number"&&r[4]!==e.id)){this._waiting.splice(t,1),e.postMessage({action:"exec",event:r[0],args:r[1]},r[2]),e.running=!0,e.time=Date.now(),this._workers.set(e,r[3]),this._working++;break}}}};WorkerManager.prototype.terminate=function(){if(!this._terminated){for(var e of this._workers)e[0].terminate(),e[1]&&e[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}};WorkerManager.prototype.postAll=function(e,t){if(this._terminated)throw new Error("Cannot post (terminated)");var r=[];for(var n of this._workers.keys())r.push(this.post(e,t,[],n.id));return Promise.all(r)};WorkerManager.prototype.post=function(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);var o=this;return new Promise(function(a,s){if(o._terminated)throw new Error("Cannot post (terminated)");o._waiting.push([e,t,r,[a,s],n]),o._exec()})};var src=WorkerManager;const WorkerManager$1=getDefaultExportFromCjs(src),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(e,t,r){t=Object.assign({},defaultOptions,t);const n=this.manager;return Array.isArray(e)?Promise.all(e.map(function(o){const a=runOnce(n,o,t);return typeof r=="function"&&a.then(r),a})):runOnce(n,e,t)}function runOnce(e,t,r){return e.post("data",[t,r]).then(function(n){for(let o in n)n[o]=new Image(n[o]);return n})}function work(){worker.on("data",function(e,t,r){t=new IJS(t);const n={},o=[],a=t.grey(),s=a.sobelFilter();m("sobel",s);const l=s.level().mask({threshold:r.threshold});m("mask",l);const u=s.getRoiManager();u.fromMask(l);const c=u.getMask(r.roi);m("realMask",c);const f=a.getPixelsGrid({sampling:r.sampling,mask:c}),d=t.getBackground(f.xyS,f.zS,r.regression);m("background",d);const g=t.subtract(d);n.result=g,o.push(g.data.buffer),e(n,o);function m(x,w){r.include.includes(x)&&(n[x]=w,o.push(w.data.buffer))}})}const background={run,work};function extend(e){e.extendMethod("background",background)}let Worker$1=class at{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(t){if(typeof t!="string")throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}static extendMethod(t,r){let n,o,a={};function s(...l){return n||(this.checkUrl(),o=this.url,n=new WorkerManager$1(r.work,{deps:o}),a.manager=n),r.run.call(a,...l)}s.reset=function(){n&&(n.terminate(),n=new WorkerManager$1(r.work,{deps:o}),a.manager=n)},at.prototype[t]=s}};extend(Worker$1);const _hoisted_1$1={class:"h-full"},_hoisted_2={class:"flex flex-col md:flex-row justify-center md:items-stretch md:h-full w-full"},_hoisted_3={class:"w-full md:w-1/3"},_hoisted_4={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_5={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_6={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_7={class:"flex-col justify-center items-center w-full"},_hoisted_8=["disabled"],_hoisted_9={class:"flex flex-wrap gap-3 mt-10"},_hoisted_10=["onClick"],_hoisted_11={class:"relative w-full md:w-2/3"},_hoisted_12={key:0,class:"flex flex-wrap"},_hoisted_13=["src"],_sfc_main$1={__name:"ColorSchemer",setup(e){const t=allColors.find(E=>E.colorValue==="transparent"),r=allColors.find(E=>E.colorValue==="#ffffff"),n=ref([marineSimple,marineComplex,fromImage]),o=ref(marineSimple),a=ref({}),s=ref(null),l=ref(null),u=ref(new URLSearchParams(window.location.search)),c=ref(null),f=ref(!1),d=ref(null),g=ref({}),m=()=>{Image.load("/icons/skitarii/ranger.jpg").then(E=>{const T=E.grey(),y=E.grey({algorithm:"red"}),k=y.mask(),C=T.cannyEdge({lowThreshold:100,highThreshold:150,gaussianBlur:1}).invert();g.value.red=y,g.value.mask=k,g.value.grey=T,g.value.edge=C})};onMounted(()=>{M(),watch(a,debounce$1(E=>{u.value.set("state",S(o.value,E)),history.replaceState(null,null,"?"+u.value.toString())},300),{deep:!0}),watch(o,()=>{x()}),m()});const x=()=>{l.value=null,a.value=o.value.basicScheme({transparent:t,perfectWhite:r},1)},w=E=>{l.value=E},M=()=>{try{const E=B(u.value.get("state"));o.value=E.model||n.value[0],a.value=o.value.basicScheme({transparent:t,perfectWhite:r},1),E.model&&(E.colorScheme||[]).forEach(([T,y])=>{a.value[T]={color:y.color,opacity:y.opacity}})}catch(E){console.error(E),x()}},b=E=>{a.value[l.value].color=E.filteredOptions[E.pointer]},A=(E,T)=>{c.value&&(a.value[l.value].color=c.value,a.value[l.value].opacity=c.value)},v=(E,T)=>{a.value[l.value].color=E,c.value=null,f.value=!1},_=()=>{f.value=!0,c.value=a.value[l.value].color},S=(E,T)=>{const y=Object.entries(T).map(([k,C])=>[k,C.color.uuid,C.opacity].join(",")).join(";");return`${btoa(E.name)}-${btoa(y)}`},B=E=>{const T=E==null?void 0:E.split("-");if(!T||T.length!==2)return;const y=atob(T[0]),k=atob(T[1]),C=n.value.find(Y=>Y.name===y);if(!C)throw new Error("Invalid code");const F=k.split(";").map(Y=>Y.split(",")).map(Y=>{const K=Y[0],ee=allColors.find(q=>q.uuid===Y[1]),te=Y[2];if(K&&ee&&te)return[K,{color:ee,opacity:te}]});return{model:C,colorScheme:F[0]?F:null}},I=(E,T)=>{var k;const y=a.value[E.layer];return{"mask-image":`url(${E.path})`,"mask-repeat":"no-repeat","mask-size":"contain","z-index":T+10,opacity:(y==null?void 0:y.opacity)||1,background:((k=y==null?void 0:y.color)==null?void 0:k.colorValue)||"#fff000"}};return(E,T)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createVNode(Multiselect,{class:"!text-black",modelValue:o.value,"onUpdate:modelValue":T[0]||(T[0]=y=>o.value=y),options:n.value,"close-on-select":!0,"clear-on-select":!1,hideSelected:!0,label:"name",selectLabel:"","tack-by":"name"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_5,[createBaseVNode("button",{onClick:T[1]||(T[1]=y=>x()),class:"p-2 bg-white text-black rounded-lg grow"}," reset colors ↺ ")]),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[createBaseVNode("div",null,[createVNode(Multiselect,{ref_key:"multiselect",ref:s,modelValue:(a.value[l.value]||{}).color,"onUpdate:modelValue":T[2]||(T[2]=y=>(a.value[l.value]||{}).color=y),class:"!text-black overflow-visible grow",showLabels:!1,onPointerChange:b,onClose:A,onOpen:_,onSelect:v,options:unref(allColors),"close-on-select":!0,"clear-on-select":!1,placeholder:"color...",label:"text","tack-by":"uuid",selectLabel:"",disabled:!l.value},null,8,["modelValue","options","disabled"]),withDirectives(createBaseVNode("input",{class:"w-full","onUpdate:modelValue":T[3]||(T[3]=y=>(a.value[l.value]||{}).opacity=y),name:"opacity",step:"0.01",type:"range",min:"0",max:"1",disabled:!l.value},null,8,_hoisted_8),[[vModelText,(a.value[l.value]||{}).opacity]])]),createBaseVNode("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(a.value),y=>(openBlock(),createElementBlock("div",{key:y,onClick:k=>w(y),class:"flex justify-center items-center relative hover:translate-y-[-4px] cursor-pointer"},[createBaseVNode("div",{class:normalizeClass(["bg-[#181818] text-white border-2 border-black rounded-lg p-1 translate-y-[-5px]",{"!border-gray-500":l.value===y}])},toDisplayString(y),3),createBaseVNode("div",{class:"absolute bottom-0 w-[95%] h-1 rounded-xl",style:normalizeStyle({background:a.value[y].color.colorValue})},null,4)],8,_hoisted_10))),128))])])])]),createBaseVNode("div",_hoisted_11,[o.value.name==="from Image"?(openBlock(),createElementBlock("div",_hoisted_12,[createTextVNode(" before "),createBaseVNode("img",{ref_key:"before",ref:d,src:_imports_0},null,512),createTextVNode(" after "),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(y,k)=>(openBlock(),createElementBlock("div",{key:k},[createBaseVNode("div",null,[createTextVNode(toDisplayString(k)+" ",1),createBaseVNode("img",{src:y.toDataURL()},null,8,_hoisted_13)])]))),128))])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(o.value.svgs,(y,k)=>(openBlock(),createElementBlock("div",{key:y.layer,class:"absolute h-[100vh] md:max-h-50vh md:h-full left-0 right-0 top-0",style:normalizeStyle(I(y,k))},null,4))),128))])])]))}},_hoisted_1=createBaseVNode("div",{class:"flex items-center mx-5 mt-5"},[createBaseVNode("img",{class:"h-20",src:_imports_0$1}),createBaseVNode("h1",{class:"text-xl"},"colors be scheming")],-1),_sfc_main={__name:"App",setup(e){return(t,r)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1,createVNode(_sfc_main$1)],64))}},tailwind="";createApp(_sfc_main).mount("#app");

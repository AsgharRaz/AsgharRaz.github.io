(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const main$2="";function makeMap(r,e){const t=Object.create(null),n=r.split(",");for(let a=0;a<n.length;a++)t[n[a]]=!0;return e?a=>!!t[a.toLowerCase()]:a=>!!t[a]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend$3=Object.assign,remove=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$2=(r,e)=>hasOwnProperty$2.call(r,e),isArray$1=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isDate=r=>toTypeString(r)==="[object Date]",isFunction=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol$2=r=>typeof r=="symbol",isObject$3=r=>r!==null&&typeof r=="object",isPromise=r=>(isObject$3(r)||isFunction(r))&&isFunction(r.then)&&isFunction(r.catch),objectToString$3=Object.prototype.toString,toTypeString=r=>objectToString$3.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},def=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},looseToNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e},toNumber$2=r=>{const e=isString(r)?Number(r):NaN;return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(r){if(isArray$1(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],a=isString(n)?parseStringStyle(n):normalizeStyle(n);if(a)for(const s in a)e[s]=a[s]}return e}else if(isString(r)||isObject$3(r))return r}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const e={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const n=t.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray$1(r))for(let t=0;t<r.length;t++){const n=normalizeClass(r[t]);n&&(e+=n+" ")}else if(isObject$3(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function looseCompareArrays(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=looseEqual(r[n],e[n]);return t}function looseEqual(r,e){if(r===e)return!0;let t=isDate(r),n=isDate(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=isSymbol$2(r),n=isSymbol$2(e),t||n)return r===e;if(t=isArray$1(r),n=isArray$1(e),t||n)return t&&n?looseCompareArrays(r,e):!1;if(t=isObject$3(r),n=isObject$3(e),t||n){if(!t||!n)return!1;const a=Object.keys(r).length,s=Object.keys(e).length;if(a!==s)return!1;for(const c in r){const f=r.hasOwnProperty(c),b=e.hasOwnProperty(c);if(f&&!b||!f&&b||!looseEqual(r[c],e[c]))return!1}}return String(r)===String(e)}function looseIndexOf(r,e){return r.findIndex(t=>looseEqual(t,e))}const toDisplayString=r=>isString(r)?r:r==null?"":isArray$1(r)||isObject$3(r)&&(r.toString===objectToString$3||!isFunction(r.toString))?JSON.stringify(r,replacer,2):String(r),replacer=(r,e)=>e&&e.__v_isRef?replacer(r,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,a])=>(t[`${n} =>`]=a,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$3(e)&&!isArray$1(e)&&!isPlainObject(e)?String(e):e;let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(r,e=activeEffectScope){e&&e.active&&e.effects.push(r)}function getCurrentScope(){return activeEffectScope}const createDep=r=>{const e=new Set(r);return e.w=0,e.n=0,e},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:e}=r;if(e.length){let t=0;for(let n=0;n<e.length;n++){const a=e[n];wasTracked(a)&&!newTracked(a)?a.delete(r):e[t++]=a,a.w&=~trackOpBit,a.n&=~trackOpBit}e.length=t}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,t=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,e,t){if(shouldTrack&&activeEffect){let n=targetMap.get(r);n||targetMap.set(r,n=new Map);let a=n.get(t);a||n.set(t,a=createDep()),trackEffects(a)}}function trackEffects(r,e){let t=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,t=!wasTracked(r)):t=!r.has(activeEffect),t&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger(r,e,t,n,a,s){const c=targetMap.get(r);if(!c)return;let f=[];if(e==="clear")f=[...c.values()];else if(t==="length"&&isArray$1(r)){const b=Number(n);c.forEach((g,m)=>{(m==="length"||!isSymbol$2(m)&&m>=b)&&f.push(g)})}else switch(t!==void 0&&f.push(c.get(t)),e){case"add":isArray$1(r)?isIntegerKey(t)&&f.push(c.get("length")):(f.push(c.get(ITERATE_KEY)),isMap(r)&&f.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(r)||(f.push(c.get(ITERATE_KEY)),isMap(r)&&f.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&f.push(c.get(ITERATE_KEY));break}if(f.length===1)f[0]&&triggerEffects(f[0]);else{const b=[];for(const g of f)g&&b.push(...g);triggerEffects(createDep(b))}}function triggerEffects(r,e){const t=isArray$1(r)?r:[...r];for(const n of t)n.computed&&triggerEffect(n);for(const n of t)n.computed||triggerEffect(n)}function triggerEffect(r,e){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol$2)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const n=toRaw(this);for(let s=0,c=this.length;s<c;s++)track(n,"get",s+"");const a=n[e](...t);return a===-1||a===!1?n[e](...t.map(toRaw)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){pauseTracking();const n=toRaw(this)[e].apply(this,t);return resetTracking(),n}}),r}function hasOwnProperty$1(r){const e=toRaw(this);return track(e,"has",r),e.hasOwnProperty(r)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._shallow=t}get(e,t,n){const a=this._isReadonly,s=this._shallow;if(t==="__v_isReactive")return!a;if(t==="__v_isReadonly")return a;if(t==="__v_isShallow")return s;if(t==="__v_raw"&&n===(a?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(e))return e;const c=isArray$1(e);if(!a){if(c&&hasOwn$2(arrayInstrumentations,t))return Reflect.get(arrayInstrumentations,t,n);if(t==="hasOwnProperty")return hasOwnProperty$1}const f=Reflect.get(e,t,n);return(isSymbol$2(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(a||track(e,"get",t),s)?f:isRef(f)?c&&isIntegerKey(t)?f:f.value:isObject$3(f)?a?readonly(f):reactive(f):f}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,n,a){let s=e[t];if(isReadonly(s)&&isRef(s)&&!isRef(n))return!1;if(!this._shallow&&(!isShallow(n)&&!isReadonly(n)&&(s=toRaw(s),n=toRaw(n)),!isArray$1(e)&&isRef(s)&&!isRef(n)))return s.value=n,!0;const c=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn$2(e,t),f=Reflect.set(e,t,n,a);return e===toRaw(a)&&(c?hasChanged(n,s)&&trigger(e,"set",t,n):trigger(e,"add",t,n)),f}deleteProperty(e,t){const n=hasOwn$2(e,t);e[t];const a=Reflect.deleteProperty(e,t);return a&&n&&trigger(e,"delete",t,void 0),a}has(e,t){const n=Reflect.has(e,t);return(!isSymbol$2(t)||!builtInSymbols.has(t))&&track(e,"has",t),n}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function get(r,e,t=!1,n=!1){r=r.__v_raw;const a=toRaw(r),s=toRaw(e);t||(hasChanged(e,s)&&track(a,"get",e),track(a,"get",s));const{has:c}=getProto(a),f=n?toShallow:t?toReadonly:toReactive;if(c.call(a,e))return f(r.get(e));if(c.call(a,s))return f(r.get(s));r!==a&&r.get(e)}function has(r,e=!1){const t=this.__v_raw,n=toRaw(t),a=toRaw(r);return e||(hasChanged(r,a)&&track(n,"has",r),track(n,"has",a)),r===a?t.has(r):t.has(r)||t.has(a)}function size(r,e=!1){return r=r.__v_raw,!e&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add$1(r){r=toRaw(r);const e=toRaw(this);return getProto(e).has.call(e,r)||(e.add(r),trigger(e,"add",r,r)),this}function set(r,e){e=toRaw(e);const t=toRaw(this),{has:n,get:a}=getProto(t);let s=n.call(t,r);s||(r=toRaw(r),s=n.call(t,r));const c=a.call(t,r);return t.set(r,e),s?hasChanged(e,c)&&trigger(t,"set",r,e):trigger(t,"add",r,e),this}function deleteEntry(r){const e=toRaw(this),{has:t,get:n}=getProto(e);let a=t.call(e,r);a||(r=toRaw(r),a=t.call(e,r)),n&&n.call(e,r);const s=e.delete(r);return a&&trigger(e,"delete",r,void 0),s}function clear(){const r=toRaw(this),e=r.size!==0,t=r.clear();return e&&trigger(r,"clear",void 0,void 0),t}function createForEach(r,e){return function(n,a){const s=this,c=s.__v_raw,f=toRaw(c),b=e?toShallow:r?toReadonly:toReactive;return!r&&track(f,"iterate",ITERATE_KEY),c.forEach((g,m)=>n.call(a,b(g),b(m),s))}}function createIterableMethod(r,e,t){return function(...n){const a=this.__v_raw,s=toRaw(a),c=isMap(s),f=r==="entries"||r===Symbol.iterator&&c,b=r==="keys"&&c,g=a[r](...n),m=t?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",b?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:l,done:o}=g.next();return o?{value:l,done:o}:{value:f?[m(l[0]),m(l[1])]:m(l),done:o}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(s){return get(this,s)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(s){return get(this,s,!1,!0)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},t={get(s){return get(this,s,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(s){return get(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=createIterableMethod(s,!1,!1),t[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),n[s]=createIterableMethod(s,!0,!0)}),[r,t,e,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,e){const t=e?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(n,a,s)=>a==="__v_isReactive"?!r:a==="__v_isReadonly"?r:a==="__v_raw"?n:Reflect.get(hasOwn$2(t,a)&&a in n?t:n,a,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(r,e,t,n,a){if(!isObject$3(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const s=a.get(r);if(s)return s;const c=getTargetType(r);if(c===0)return r;const f=new Proxy(r,c===2?n:t);return a.set(r,f),f}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return def(r,"__v_skip",!0),r}const toReactive=r=>isObject$3(r)?reactive(r):r,toReadonly=r=>isObject$3(r)?readonly(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,e){r=toRaw(r);const t=r.dep;t&&triggerEffects(t)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function ref(r){return createRef(r,!1)}function createRef(r,e){return isRef(r)?r:new RefImpl(r,e)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this))}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,e,t)=>unref(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const a=r[e];return isRef(a)&&!isRef(t)?(a.value=t,!0):Reflect.set(r,e,t,n)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,t,n,a){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(r,e,t=!1){let n,a;const s=isFunction(r);return s?(n=r,a=NOOP):(n=r.get,a=r.set),new ComputedRefImpl(n,a,s||!a,t)}function warn(r,...e){}function callWithErrorHandling(r,e,t,n){let a;try{a=n?r(...n):r()}catch(s){handleError(s,e,t)}return a}function callWithAsyncErrorHandling(r,e,t,n){if(isFunction(r)){const s=callWithErrorHandling(r,e,t,n);return s&&isPromise(s)&&s.catch(c=>{handleError(c,e,t)}),s}const a=[];for(let s=0;s<r.length;s++)a.push(callWithAsyncErrorHandling(r[s],e,t,n));return a}function handleError(r,e,t,n=!0){const a=e?e.vnode:null;if(e){let s=e.parent;const c=e.proxy,f=t;for(;s;){const g=s.ec;if(g){for(let m=0;m<g.length;m++)if(g[m](r,c,f)===!1)return}s=s.parent}const b=e.appContext.config.errorHandler;if(b){callWithErrorHandling(b,null,10,[r,c,f]);return}}logError(r,t,a,n)}function logError(r,e,t,n=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex(r){let e=flushIndex+1,t=queue.length;for(;e<t;){const n=e+t>>>1,a=queue[n],s=getId(a);s<r||s===r&&a.pre?e=n+1:t=n}return e}function queueJob(r){(!queue.length||!queue.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue.push(r):queue.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const e=queue.indexOf(r);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(r){isArray$1(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const t=queue[e];t&&t.pre&&(queue.splice(e,1),e--,t())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((t,n)=>getId(t)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?1/0:r.id,comparator=(r,e)=>{const t=getId(r)-getId(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||EMPTY_OBJ;let a=t;const s=e.startsWith("update:"),c=s&&e.slice(7);if(c&&c in n){const m=`${c==="modelValue"?"model":c}Modifiers`,{number:l,trim:o}=n[m]||EMPTY_OBJ;o&&(a=t.map(u=>isString(u)?u.trim():u)),l&&(a=t.map(looseToNumber))}let f,b=n[f=toHandlerKey(e)]||n[f=toHandlerKey(camelize(e))];!b&&s&&(b=n[f=toHandlerKey(hyphenate(e))]),b&&callWithAsyncErrorHandling(b,r,6,a);const g=n[f+"Once"];if(g){if(!r.emitted)r.emitted={};else if(r.emitted[f])return;r.emitted[f]=!0,callWithAsyncErrorHandling(g,r,6,a)}}function normalizeEmitsOptions(r,e,t=!1){const n=e.emitsCache,a=n.get(r);if(a!==void 0)return a;const s=r.emits;let c={},f=!1;if(!isFunction(r)){const b=g=>{const m=normalizeEmitsOptions(g,e,!0);m&&(f=!0,extend$3(c,m))};!t&&e.mixins.length&&e.mixins.forEach(b),r.extends&&b(r.extends),r.mixins&&r.mixins.forEach(b)}return!s&&!f?(isObject$3(r)&&n.set(r,null),null):(isArray$1(s)?s.forEach(b=>c[b]=null):extend$3(c,s),isObject$3(r)&&n.set(r,c),c)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$2(r,e[0].toLowerCase()+e.slice(1))||hasOwn$2(r,hyphenate(e))||hasOwn$2(r,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function withCtx(r,e=currentRenderingInstance,t){if(!e||r._n)return r;const n=(...a)=>{n._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e);let c;try{c=r(...a)}finally{setCurrentRenderingInstance(s),n._d&&setBlockTracking(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:t,proxy:n,withProxy:a,props:s,propsOptions:[c],slots:f,attrs:b,emit:g,render:m,renderCache:l,data:o,setupState:u,ctx:d,inheritAttrs:y}=r;let w,_;const T=setCurrentRenderingInstance(r);try{if(t.shapeFlag&4){const E=a||n;w=normalizeVNode(m.call(E,E,l,s,u,o,d)),_=b}else{const E=e;w=normalizeVNode(E.length>1?E(s,{attrs:b,slots:f,emit:g}):E(s,null)),_=e.props?b:getFunctionalFallthrough(b)}}catch(E){blockStack.length=0,handleError(E,r,1),w=createVNode(Comment)}let S=w;if(_&&y!==!1){const E=Object.keys(_),{shapeFlag:A}=S;E.length&&A&7&&(c&&E.some(isModelListener)&&(_=filterModelListeners(_,c)),S=cloneVNode(S,_))}return t.dirs&&(S=cloneVNode(S),S.dirs=S.dirs?S.dirs.concat(t.dirs):t.dirs),t.transition&&(S.transition=t.transition),w=S,setCurrentRenderingInstance(T),w}const getFunctionalFallthrough=r=>{let e;for(const t in r)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=r[t]);return e},filterModelListeners=(r,e)=>{const t={};for(const n in r)(!isModelListener(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function shouldUpdateComponent(r,e,t){const{props:n,children:a,component:s}=r,{props:c,children:f,patchFlag:b}=e,g=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&b>=0){if(b&1024)return!0;if(b&16)return n?hasPropsChanged(n,c,g):!!c;if(b&8){const m=e.dynamicProps;for(let l=0;l<m.length;l++){const o=m[l];if(c[o]!==n[o]&&!isEmitListener(g,o))return!0}}}else return(a||f)&&(!f||!f.$stable)?!0:n===c?!1:n?c?hasPropsChanged(n,c,g):!0:!!c;return!1}function hasPropsChanged(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(e[s]!==r[s]&&!isEmitListener(t,s))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray$1(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}const INITIAL_WATCHER_VALUE={};function watch(r,e,t){return doWatch(r,e,t)}function doWatch(r,e,{immediate:t,deep:n,flush:a,onTrack:s,onTrigger:c}=EMPTY_OBJ){var f;const b=getCurrentScope()===((f=currentInstance)==null?void 0:f.scope)?currentInstance:null;let g,m=!1,l=!1;if(isRef(r)?(g=()=>r.value,m=isShallow(r)):isReactive(r)?(g=()=>r,n=!0):isArray$1(r)?(l=!0,m=r.some(E=>isReactive(E)||isShallow(E)),g=()=>r.map(E=>{if(isRef(E))return E.value;if(isReactive(E))return traverse(E);if(isFunction(E))return callWithErrorHandling(E,b,2)})):isFunction(r)?e?g=()=>callWithErrorHandling(r,b,2):g=()=>{if(!(b&&b.isUnmounted))return o&&o(),callWithAsyncErrorHandling(r,b,3,[u])}:g=NOOP,e&&n){const E=g;g=()=>traverse(E())}let o,u=E=>{o=T.onStop=()=>{callWithErrorHandling(E,b,4)}},d;if(isInSSRComponentSetup)if(u=NOOP,e?t&&callWithAsyncErrorHandling(e,b,3,[g(),l?[]:void 0,u]):g(),a==="sync"){const E=useSSRContext();d=E.__watcherHandles||(E.__watcherHandles=[])}else return NOOP;let y=l?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const w=()=>{if(T.active)if(e){const E=T.run();(n||m||(l?E.some((A,P)=>hasChanged(A,y[P])):hasChanged(E,y)))&&(o&&o(),callWithAsyncErrorHandling(e,b,3,[E,y===INITIAL_WATCHER_VALUE?void 0:l&&y[0]===INITIAL_WATCHER_VALUE?[]:y,u]),y=E)}else T.run()};w.allowRecurse=!!e;let _;a==="sync"?_=w:a==="post"?_=()=>queuePostRenderEffect(w,b&&b.suspense):(w.pre=!0,b&&(w.id=b.uid),_=()=>queueJob(w));const T=new ReactiveEffect(g,_);e?t?w():y=T.run():a==="post"?queuePostRenderEffect(T.run.bind(T),b&&b.suspense):T.run();const S=()=>{T.stop(),b&&b.scope&&remove(b.scope.effects,T)};return d&&d.push(S),S}function instanceWatch(r,e,t){const n=this.proxy,a=isString(r)?r.includes(".")?createPathGetter(n,r):()=>n[r]:r.bind(n,n);let s;isFunction(e)?s=e:(s=e.handler,t=e);const c=currentInstance;setCurrentInstance(this);const f=doWatch(a,s.bind(n),t);return c?setCurrentInstance(c):unsetCurrentInstance(),f}function createPathGetter(r,e){const t=e.split(".");return()=>{let n=r;for(let a=0;a<t.length&&n;a++)n=n[t[a]];return n}}function traverse(r,e){if(!isObject$3(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),isRef(r))traverse(r.value,e);else if(isArray$1(r))for(let t=0;t<r.length;t++)traverse(r[t],e);else if(isSet(r)||isMap(r))r.forEach(t=>{traverse(t,e)});else if(isPlainObject(r))for(const t in r)traverse(r[t],e);return r}function withDirectives(r,e){const t=currentRenderingInstance;if(t===null)return r;const n=getExposeProxy(t)||t.proxy,a=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[c,f,b,g=EMPTY_OBJ]=e[s];c&&(isFunction(c)&&(c={mounted:c,updated:c}),c.deep&&traverse(f),a.push({dir:c,instance:n,value:f,oldValue:void 0,arg:b,modifiers:g}))}return r}function invokeDirectiveHook(r,e,t,n){const a=r.dirs,s=e&&e.dirs;for(let c=0;c<a.length;c++){const f=a[c];s&&(f.oldValue=s[c].value);let b=f.dir[n];b&&(pauseTracking(),callWithAsyncErrorHandling(b,t,8,[r.el,f,r,e]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(r,{slots:e}){const t=getCurrentInstance(),n=useTransitionState();let a;return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;let c=s[0];if(s.length>1){for(const y of s)if(y.type!==Comment){c=y;break}}const f=toRaw(r),{mode:b}=f;if(n.isLeaving)return emptyPlaceholder(c);const g=getKeepAliveChild(c);if(!g)return emptyPlaceholder(c);const m=resolveTransitionHooks(g,f,n,t);setTransitionHooks(g,m);const l=t.subTree,o=l&&getKeepAliveChild(l);let u=!1;const{getTransitionKey:d}=g.type;if(d){const y=d();a===void 0?a=y:y!==a&&(a=y,u=!0)}if(o&&o.type!==Comment&&(!isSameVNodeType(g,o)||u)){const y=resolveTransitionHooks(o,f,n,t);if(setTransitionHooks(o,y),b==="out-in")return n.isLeaving=!0,y.afterLeave=()=>{n.isLeaving=!1,t.update.active!==!1&&t.update()},emptyPlaceholder(c);b==="in-out"&&g.type!==Comment&&(y.delayLeave=(w,_,T)=>{const S=getLeavingNodesForType(n,o);S[String(o.key)]=o,w[leaveCbKey]=()=>{_(),w[leaveCbKey]=void 0,delete m.delayedLeave},m.delayedLeave=T})}return c}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function resolveTransitionHooks(r,e,t,n){const{appear:a,mode:s,persisted:c=!1,onBeforeEnter:f,onEnter:b,onAfterEnter:g,onEnterCancelled:m,onBeforeLeave:l,onLeave:o,onAfterLeave:u,onLeaveCancelled:d,onBeforeAppear:y,onAppear:w,onAfterAppear:_,onAppearCancelled:T}=e,S=String(r.key),E=getLeavingNodesForType(t,r),A=(M,F)=>{M&&callWithAsyncErrorHandling(M,n,9,F)},P=(M,F)=>{const O=F[1];A(M,F),isArray$1(M)?M.every(D=>D.length<=1)&&O():M.length<=1&&O()},k={mode:s,persisted:c,beforeEnter(M){let F=f;if(!t.isMounted)if(a)F=y||f;else return;M[leaveCbKey]&&M[leaveCbKey](!0);const O=E[S];O&&isSameVNodeType(r,O)&&O.el[leaveCbKey]&&O.el[leaveCbKey](),A(F,[M])},enter(M){let F=b,O=g,D=m;if(!t.isMounted)if(a)F=w||b,O=_||g,D=T||m;else return;let R=!1;const C=M[enterCbKey]=U=>{R||(R=!0,U?A(D,[M]):A(O,[M]),k.delayedLeave&&k.delayedLeave(),M[enterCbKey]=void 0)};F?P(F,[M,C]):C()},leave(M,F){const O=String(r.key);if(M[enterCbKey]&&M[enterCbKey](!0),t.isUnmounting)return F();A(l,[M]);let D=!1;const R=M[leaveCbKey]=C=>{D||(D=!0,F(),C?A(d,[M]):A(u,[M]),M[leaveCbKey]=void 0,E[O]===r&&delete E[O])};E[O]=r,o?P(o,[M,R]):R()},clone(M){return resolveTransitionHooks(M,e,t,n)}};return k}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getKeepAliveChild(r){return isKeepAlive(r)?r.children?r.children[0]:void 0:r}function setTransitionHooks(r,e){r.shapeFlag&6&&r.component?setTransitionHooks(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function getTransitionRawChildren(r,e=!1,t){let n=[],a=0;for(let s=0;s<r.length;s++){let c=r[s];const f=t==null?c.key:String(t)+String(c.key!=null?c.key:s);c.type===Fragment?(c.patchFlag&128&&a++,n=n.concat(getTransitionRawChildren(c.children,e,f))):(e||c.type!==Comment)&&n.push(f!=null?cloneVNode(c,{key:f}):c)}if(a>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,t=currentInstance){const n=r.__wdc||(r.__wdc=()=>{let a=t;for(;a;){if(a.isDeactivated)return;a=a.parent}return r()});if(injectHook(e,n,t),t){let a=t.parent;for(;a&&a.parent;)isKeepAlive(a.parent.vnode)&&injectToKeepAliveRoot(n,e,t,a),a=a.parent}}function injectToKeepAliveRoot(r,e,t,n){const a=injectHook(e,r,n,!0);onUnmounted(()=>{remove(n[e],a)},t)}function injectHook(r,e,t=currentInstance,n=!1){if(t){const a=t[r]||(t[r]=[]),s=e.__weh||(e.__weh=(...c)=>{if(t.isUnmounted)return;pauseTracking(),setCurrentInstance(t);const f=callWithAsyncErrorHandling(e,t,r,c);return unsetCurrentInstance(),resetTracking(),f});return n?a.unshift(s):a.push(s),s}}const createHook=r=>(e,t=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...n)=>e(...n),t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}function renderList(r,e,t,n){let a;const s=t&&t[n];if(isArray$1(r)||isString(r)){a=new Array(r.length);for(let c=0,f=r.length;c<f;c++)a[c]=e(r[c],c,void 0,s&&s[c])}else if(typeof r=="number"){a=new Array(r);for(let c=0;c<r;c++)a[c]=e(c+1,c,void 0,s&&s[c])}else if(isObject$3(r))if(r[Symbol.iterator])a=Array.from(r,(c,f)=>e(c,f,void 0,s&&s[f]));else{const c=Object.keys(r);a=new Array(c.length);for(let f=0,b=c.length;f<b;f++){const g=c[f];a[f]=e(r[g],g,f,s&&s[f])}}else a=[];return t&&(t[n]=a),a}function renderSlot(r,e,t={},n,a){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return e!=="default"&&(t.name=e),createVNode("slot",t,n&&n());let s=r[e];s&&s._c&&(s._d=!1),openBlock();const c=s&&ensureValidVNode(s(t)),f=createBlock(Fragment,{key:t.key||c&&c.key||`_${e}`},c||(n?n():[]),c&&r._===1?64:-2);return!a&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function ensureValidVNode(r){return r.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?r:null}const getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,e)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn$2(r,e),PublicInstanceProxyHandlers={get({_:r},e){const{ctx:t,setupState:n,data:a,props:s,accessCache:c,type:f,appContext:b}=r;let g;if(e[0]!=="$"){const u=c[e];if(u!==void 0)switch(u){case 1:return n[e];case 2:return a[e];case 4:return t[e];case 3:return s[e]}else{if(hasSetupBinding(n,e))return c[e]=1,n[e];if(a!==EMPTY_OBJ&&hasOwn$2(a,e))return c[e]=2,a[e];if((g=r.propsOptions[0])&&hasOwn$2(g,e))return c[e]=3,s[e];if(t!==EMPTY_OBJ&&hasOwn$2(t,e))return c[e]=4,t[e];shouldCacheAccess&&(c[e]=0)}}const m=publicPropertiesMap[e];let l,o;if(m)return e==="$attrs"&&track(r,"get",e),m(r);if((l=f.__cssModules)&&(l=l[e]))return l;if(t!==EMPTY_OBJ&&hasOwn$2(t,e))return c[e]=4,t[e];if(o=b.config.globalProperties,hasOwn$2(o,e))return o[e]},set({_:r},e,t){const{data:n,setupState:a,ctx:s}=r;return hasSetupBinding(a,e)?(a[e]=t,!0):n!==EMPTY_OBJ&&hasOwn$2(n,e)?(n[e]=t,!0):hasOwn$2(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(s[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:a,propsOptions:s}},c){let f;return!!t[c]||r!==EMPTY_OBJ&&hasOwn$2(r,c)||hasSetupBinding(e,c)||(f=s[0])&&hasOwn$2(f,c)||hasOwn$2(n,c)||hasOwn$2(publicPropertiesMap,c)||hasOwn$2(a.config.globalProperties,c)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:hasOwn$2(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function normalizePropsOrEmits(r){return isArray$1(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),t=r.proxy,n=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,r,"bc");const{data:a,computed:s,methods:c,watch:f,provide:b,inject:g,created:m,beforeMount:l,mounted:o,beforeUpdate:u,updated:d,activated:y,deactivated:w,beforeDestroy:_,beforeUnmount:T,destroyed:S,unmounted:E,render:A,renderTracked:P,renderTriggered:k,errorCaptured:M,serverPrefetch:F,expose:O,inheritAttrs:D,components:R,directives:C,filters:U}=e;if(g&&resolveInjections(g,n,null),c)for(const j in c){const K=c[j];isFunction(K)&&(n[j]=K.bind(t))}if(a){const j=a.call(t,t);isObject$3(j)&&(r.data=reactive(j))}if(shouldCacheAccess=!0,s)for(const j in s){const K=s[j],ee=isFunction(K)?K.bind(t,t):isFunction(K.get)?K.get.bind(t,t):NOOP,he=!isFunction(K)&&isFunction(K.set)?K.set.bind(t):NOOP,ge=computed({get:ee,set:he});Object.defineProperty(n,j,{enumerable:!0,configurable:!0,get:()=>ge.value,set:Se=>ge.value=Se})}if(f)for(const j in f)createWatcher(f[j],n,t,j);if(b){const j=isFunction(b)?b.call(t):b;Reflect.ownKeys(j).forEach(K=>{provide(K,j[K])})}m&&callHook$1(m,r,"c");function V(j,K){isArray$1(K)?K.forEach(ee=>j(ee.bind(t))):K&&j(K.bind(t))}if(V(onBeforeMount,l),V(onMounted,o),V(onBeforeUpdate,u),V(onUpdated,d),V(onActivated,y),V(onDeactivated,w),V(onErrorCaptured,M),V(onRenderTracked,P),V(onRenderTriggered,k),V(onBeforeUnmount,T),V(onUnmounted,E),V(onServerPrefetch,F),isArray$1(O))if(O.length){const j=r.exposed||(r.exposed={});O.forEach(K=>{Object.defineProperty(j,K,{get:()=>t[K],set:ee=>t[K]=ee})})}else r.exposed||(r.exposed={});A&&r.render===NOOP&&(r.render=A),D!=null&&(r.inheritAttrs=D),R&&(r.components=R),C&&(r.directives=C)}function resolveInjections(r,e,t=NOOP){isArray$1(r)&&(r=normalizeInject(r));for(const n in r){const a=r[n];let s;isObject$3(a)?"default"in a?s=inject(a.from||n,a.default,!0):s=inject(a.from||n):s=inject(a),isRef(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:c=>s.value=c}):e[n]=s}}function callHook$1(r,e,t){callWithAsyncErrorHandling(isArray$1(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function createWatcher(r,e,t,n){const a=n.includes(".")?createPathGetter(t,n):()=>t[n];if(isString(r)){const s=e[r];isFunction(s)&&watch(a,s)}else if(isFunction(r))watch(a,r.bind(t));else if(isObject$3(r))if(isArray$1(r))r.forEach(s=>createWatcher(s,e,t,n));else{const s=isFunction(r.handler)?r.handler.bind(t):e[r.handler];isFunction(s)&&watch(a,s,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:a,optionsCache:s,config:{optionMergeStrategies:c}}=r.appContext,f=s.get(e);let b;return f?b=f:!a.length&&!t&&!n?b=e:(b={},a.length&&a.forEach(g=>mergeOptions(b,g,c,!0)),mergeOptions(b,e,c)),isObject$3(e)&&s.set(e,b),b}function mergeOptions(r,e,t,n=!1){const{mixins:a,extends:s}=e;s&&mergeOptions(r,s,t,!0),a&&a.forEach(c=>mergeOptions(r,c,t,!0));for(const c in e)if(!(n&&c==="expose")){const f=internalOptionMergeStrats[c]||t&&t[c];r[c]=f?f(r[c],e[c]):e[c]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend$3(isFunction(r)?r.call(this,this):r,isFunction(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray$1(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend$3(Object.create(null),r,e):e}function mergeEmitsOrPropsOptions(r,e){return r?isArray$1(r)&&isArray$1(e)?[...new Set([...r,...e])]:extend$3(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const t=extend$3(Object.create(null),r);for(const n in e)t[n]=mergeAsArray(r[n],e[n]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,e){return function(n,a=null){isFunction(n)||(n=extend$3({},n)),a!=null&&!isObject$3(a)&&(a=null);const s=createAppContext(),c=new WeakSet;let f=!1;const b=s.app={_uid:uid$1++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:version$1,get config(){return s.config},set config(g){},use(g,...m){return c.has(g)||(g&&isFunction(g.install)?(c.add(g),g.install(b,...m)):isFunction(g)&&(c.add(g),g(b,...m))),b},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),b},component(g,m){return m?(s.components[g]=m,b):s.components[g]},directive(g,m){return m?(s.directives[g]=m,b):s.directives[g]},mount(g,m,l){if(!f){const o=createVNode(n,a);return o.appContext=s,m&&e?e(o,g):r(o,g,l),f=!0,b._container=g,g.__vue_app__=b,getExposeProxy(o.component)||o.component.proxy}},unmount(){f&&(r(null,b._container),delete b._container.__vue_app__)},provide(g,m){return s.provides[g]=m,b},runWithContext(g){currentApp=b;try{return g()}finally{currentApp=null}}};return b}}let currentApp=null;function provide(r,e){if(currentInstance){let t=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===t&&(t=currentInstance.provides=Object.create(n)),t[r]=e}}function inject(r,e,t=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const a=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(a&&r in a)return a[r];if(arguments.length>1)return t&&isFunction(e)?e.call(n&&n.proxy):e}}function initProps(r,e,t,n=!1){const a={},s={};def(s,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,e,a,s);for(const c in r.propsOptions[0])c in a||(a[c]=void 0);t?r.props=n?a:shallowReactive(a):r.type.props?r.props=a:r.props=s,r.attrs=s}function updateProps(r,e,t,n){const{props:a,attrs:s,vnode:{patchFlag:c}}=r,f=toRaw(a),[b]=r.propsOptions;let g=!1;if((n||c>0)&&!(c&16)){if(c&8){const m=r.vnode.dynamicProps;for(let l=0;l<m.length;l++){let o=m[l];if(isEmitListener(r.emitsOptions,o))continue;const u=e[o];if(b)if(hasOwn$2(s,o))u!==s[o]&&(s[o]=u,g=!0);else{const d=camelize(o);a[d]=resolvePropValue(b,f,d,u,r,!1)}else u!==s[o]&&(s[o]=u,g=!0)}}}else{setFullProps(r,e,a,s)&&(g=!0);let m;for(const l in f)(!e||!hasOwn$2(e,l)&&((m=hyphenate(l))===l||!hasOwn$2(e,m)))&&(b?t&&(t[l]!==void 0||t[m]!==void 0)&&(a[l]=resolvePropValue(b,f,l,void 0,r,!0)):delete a[l]);if(s!==f)for(const l in s)(!e||!hasOwn$2(e,l))&&(delete s[l],g=!0)}g&&trigger(r,"set","$attrs")}function setFullProps(r,e,t,n){const[a,s]=r.propsOptions;let c=!1,f;if(e)for(let b in e){if(isReservedProp(b))continue;const g=e[b];let m;a&&hasOwn$2(a,m=camelize(b))?!s||!s.includes(m)?t[m]=g:(f||(f={}))[m]=g:isEmitListener(r.emitsOptions,b)||(!(b in n)||g!==n[b])&&(n[b]=g,c=!0)}if(s){const b=toRaw(t),g=f||EMPTY_OBJ;for(let m=0;m<s.length;m++){const l=s[m];t[l]=resolvePropValue(a,b,l,g[l],r,!hasOwn$2(g,l))}}return c}function resolvePropValue(r,e,t,n,a,s){const c=r[t];if(c!=null){const f=hasOwn$2(c,"default");if(f&&n===void 0){const b=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction(b)){const{propsDefaults:g}=a;t in g?n=g[t]:(setCurrentInstance(a),n=g[t]=b.call(null,e),unsetCurrentInstance())}else n=b}c[0]&&(s&&!f?n=!1:c[1]&&(n===""||n===hyphenate(t))&&(n=!0))}return n}function normalizePropsOptions(r,e,t=!1){const n=e.propsCache,a=n.get(r);if(a)return a;const s=r.props,c={},f=[];let b=!1;if(!isFunction(r)){const m=l=>{b=!0;const[o,u]=normalizePropsOptions(l,e,!0);extend$3(c,o),u&&f.push(...u)};!t&&e.mixins.length&&e.mixins.forEach(m),r.extends&&m(r.extends),r.mixins&&r.mixins.forEach(m)}if(!s&&!b)return isObject$3(r)&&n.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let m=0;m<s.length;m++){const l=camelize(s[m]);validatePropName(l)&&(c[l]=EMPTY_OBJ)}else if(s)for(const m in s){const l=camelize(m);if(validatePropName(l)){const o=s[m],u=c[l]=isArray$1(o)||isFunction(o)?{type:o}:extend$3({},o);if(u){const d=getTypeIndex(Boolean,u.type),y=getTypeIndex(String,u.type);u[0]=d>-1,u[1]=y<0||d<y,(d>-1||hasOwn$2(u,"default"))&&f.push(l)}}}const g=[c,f];return isObject$3(r)&&n.set(r,g),g}function validatePropName(r){return r[0]!=="$"}function getType$2(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function isSameType(r,e){return getType$2(r)===getType$2(e)}function getTypeIndex(r,e){return isArray$1(e)?e.findIndex(t=>isSameType(t,r)):isFunction(e)&&isSameType(e,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray$1(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,e,t)=>{if(e._n)return e;const n=withCtx((...a)=>normalizeSlotValue(e(...a)),t);return n._c=!1,n},normalizeObjectSlots=(r,e,t)=>{const n=r._ctx;for(const a in r){if(isInternalKey(a))continue;const s=r[a];if(isFunction(s))e[a]=normalizeSlot(a,s,n);else if(s!=null){const c=normalizeSlotValue(s);e[a]=()=>c}}},normalizeVNodeSlots=(r,e)=>{const t=normalizeSlotValue(e);r.slots.default=()=>t},initSlots=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=toRaw(e),def(e,"_",t)):normalizeObjectSlots(e,r.slots={})}else r.slots={},e&&normalizeVNodeSlots(r,e);def(r.slots,InternalObjectKey,1)},updateSlots=(r,e,t)=>{const{vnode:n,slots:a}=r;let s=!0,c=EMPTY_OBJ;if(n.shapeFlag&32){const f=e._;f?t&&f===1?s=!1:(extend$3(a,e),!t&&f===1&&delete a._):(s=!e.$stable,normalizeObjectSlots(e,a)),c=e}else e&&(normalizeVNodeSlots(r,e),c={default:1});if(s)for(const f in a)!isInternalKey(f)&&c[f]==null&&delete a[f]};function setRef(r,e,t,n,a=!1){if(isArray$1(r)){r.forEach((o,u)=>setRef(o,e&&(isArray$1(e)?e[u]:e),t,n,a));return}if(isAsyncWrapper(n)&&!a)return;const s=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,c=a?null:s,{i:f,r:b}=r,g=e&&e.r,m=f.refs===EMPTY_OBJ?f.refs={}:f.refs,l=f.setupState;if(g!=null&&g!==b&&(isString(g)?(m[g]=null,hasOwn$2(l,g)&&(l[g]=null)):isRef(g)&&(g.value=null)),isFunction(b))callWithErrorHandling(b,f,12,[c,m]);else{const o=isString(b),u=isRef(b);if(o||u){const d=()=>{if(r.f){const y=o?hasOwn$2(l,b)?l[b]:m[b]:b.value;a?isArray$1(y)&&remove(y,s):isArray$1(y)?y.includes(s)||y.push(s):o?(m[b]=[s],hasOwn$2(l,b)&&(l[b]=m[b])):(b.value=[s],r.k&&(m[r.k]=b.value))}else o?(m[b]=c,hasOwn$2(l,b)&&(l[b]=c)):u&&(b.value=c,r.k&&(m[r.k]=c))};c?(d.id=-1,queuePostRenderEffect(d,t)):d()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:c,createText:f,createComment:b,setText:g,setElementText:m,parentNode:l,nextSibling:o,setScopeId:u=NOOP,insertStaticContent:d}=r,y=(W,X,te,ie=null,ye=null,be=null,Ae=!1,J=null,ve=!!X.dynamicChildren)=>{if(W===X)return;W&&!isSameVNodeType(W,X)&&(ie=Ee(W),Se(W,ye,be,!0),W=null),X.patchFlag===-2&&(ve=!1,X.dynamicChildren=null);const{type:de,ref:Oe,shapeFlag:fe}=X;switch(de){case Text:w(W,X,te,ie);break;case Comment:_(W,X,te,ie);break;case Static:W==null&&T(X,te,ie,Ae);break;case Fragment:R(W,X,te,ie,ye,be,Ae,J,ve);break;default:fe&1?A(W,X,te,ie,ye,be,Ae,J,ve):fe&6?C(W,X,te,ie,ye,be,Ae,J,ve):(fe&64||fe&128)&&de.process(W,X,te,ie,ye,be,Ae,J,ve,De)}Oe!=null&&ye&&setRef(Oe,W&&W.ref,be,X||W,!X)},w=(W,X,te,ie)=>{if(W==null)n(X.el=f(X.children),te,ie);else{const ye=X.el=W.el;X.children!==W.children&&g(ye,X.children)}},_=(W,X,te,ie)=>{W==null?n(X.el=b(X.children||""),te,ie):X.el=W.el},T=(W,X,te,ie)=>{[W.el,W.anchor]=d(W.children,X,te,ie,W.el,W.anchor)},S=({el:W,anchor:X},te,ie)=>{let ye;for(;W&&W!==X;)ye=o(W),n(W,te,ie),W=ye;n(X,te,ie)},E=({el:W,anchor:X})=>{let te;for(;W&&W!==X;)te=o(W),a(W),W=te;a(X)},A=(W,X,te,ie,ye,be,Ae,J,ve)=>{Ae=Ae||X.type==="svg",W==null?P(X,te,ie,ye,be,Ae,J,ve):F(W,X,ye,be,Ae,J,ve)},P=(W,X,te,ie,ye,be,Ae,J)=>{let ve,de;const{type:Oe,props:fe,shapeFlag:Ue,transition:Ze,dirs:$e}=W;if(ve=W.el=c(W.type,be,fe&&fe.is,fe),Ue&8?m(ve,W.children):Ue&16&&M(W.children,ve,null,ie,ye,be&&Oe!=="foreignObject",Ae,J),$e&&invokeDirectiveHook(W,null,ie,"created"),k(ve,W,W.scopeId,Ae,ie),fe){for(const Ge in fe)Ge!=="value"&&!isReservedProp(Ge)&&s(ve,Ge,null,fe[Ge],be,W.children,ie,ye,oe);"value"in fe&&s(ve,"value",null,fe.value),(de=fe.onVnodeBeforeMount)&&invokeVNodeHook(de,ie,W)}$e&&invokeDirectiveHook(W,null,ie,"beforeMount");const Le=needTransition(ye,Ze);Le&&Ze.beforeEnter(ve),n(ve,X,te),((de=fe&&fe.onVnodeMounted)||Le||$e)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,ie,W),Le&&Ze.enter(ve),$e&&invokeDirectiveHook(W,null,ie,"mounted")},ye)},k=(W,X,te,ie,ye)=>{if(te&&u(W,te),ie)for(let be=0;be<ie.length;be++)u(W,ie[be]);if(ye){let be=ye.subTree;if(X===be){const Ae=ye.vnode;k(W,Ae,Ae.scopeId,Ae.slotScopeIds,ye.parent)}}},M=(W,X,te,ie,ye,be,Ae,J,ve=0)=>{for(let de=ve;de<W.length;de++){const Oe=W[de]=J?cloneIfMounted(W[de]):normalizeVNode(W[de]);y(null,Oe,X,te,ie,ye,be,Ae,J)}},F=(W,X,te,ie,ye,be,Ae)=>{const J=X.el=W.el;let{patchFlag:ve,dynamicChildren:de,dirs:Oe}=X;ve|=W.patchFlag&16;const fe=W.props||EMPTY_OBJ,Ue=X.props||EMPTY_OBJ;let Ze;te&&toggleRecurse(te,!1),(Ze=Ue.onVnodeBeforeUpdate)&&invokeVNodeHook(Ze,te,X,W),Oe&&invokeDirectiveHook(X,W,te,"beforeUpdate"),te&&toggleRecurse(te,!0);const $e=ye&&X.type!=="foreignObject";if(de?O(W.dynamicChildren,de,J,te,ie,$e,be):Ae||K(W,X,J,null,te,ie,$e,be,!1),ve>0){if(ve&16)D(J,X,fe,Ue,te,ie,ye);else if(ve&2&&fe.class!==Ue.class&&s(J,"class",null,Ue.class,ye),ve&4&&s(J,"style",fe.style,Ue.style,ye),ve&8){const Le=X.dynamicProps;for(let Ge=0;Ge<Le.length;Ge++){const ze=Le[Ge],Je=fe[ze],ot=Ue[ze];(ot!==Je||ze==="value")&&s(J,ze,Je,ot,ye,W.children,te,ie,oe)}}ve&1&&W.children!==X.children&&m(J,X.children)}else!Ae&&de==null&&D(J,X,fe,Ue,te,ie,ye);((Ze=Ue.onVnodeUpdated)||Oe)&&queuePostRenderEffect(()=>{Ze&&invokeVNodeHook(Ze,te,X,W),Oe&&invokeDirectiveHook(X,W,te,"updated")},ie)},O=(W,X,te,ie,ye,be,Ae)=>{for(let J=0;J<X.length;J++){const ve=W[J],de=X[J],Oe=ve.el&&(ve.type===Fragment||!isSameVNodeType(ve,de)||ve.shapeFlag&70)?l(ve.el):te;y(ve,de,Oe,null,ie,ye,be,Ae,!0)}},D=(W,X,te,ie,ye,be,Ae)=>{if(te!==ie){if(te!==EMPTY_OBJ)for(const J in te)!isReservedProp(J)&&!(J in ie)&&s(W,J,te[J],null,Ae,X.children,ye,be,oe);for(const J in ie){if(isReservedProp(J))continue;const ve=ie[J],de=te[J];ve!==de&&J!=="value"&&s(W,J,de,ve,Ae,X.children,ye,be,oe)}"value"in ie&&s(W,"value",te.value,ie.value)}},R=(W,X,te,ie,ye,be,Ae,J,ve)=>{const de=X.el=W?W.el:f(""),Oe=X.anchor=W?W.anchor:f("");let{patchFlag:fe,dynamicChildren:Ue,slotScopeIds:Ze}=X;Ze&&(J=J?J.concat(Ze):Ze),W==null?(n(de,te,ie),n(Oe,te,ie),M(X.children,te,Oe,ye,be,Ae,J,ve)):fe>0&&fe&64&&Ue&&W.dynamicChildren?(O(W.dynamicChildren,Ue,te,ye,be,Ae,J),(X.key!=null||ye&&X===ye.subTree)&&traverseStaticChildren(W,X,!0)):K(W,X,te,Oe,ye,be,Ae,J,ve)},C=(W,X,te,ie,ye,be,Ae,J,ve)=>{X.slotScopeIds=J,W==null?X.shapeFlag&512?ye.ctx.activate(X,te,ie,Ae,ve):U(X,te,ie,ye,be,Ae,ve):N(W,X,ve)},U=(W,X,te,ie,ye,be,Ae)=>{const J=W.component=createComponentInstance(W,ie,ye);if(isKeepAlive(W)&&(J.ctx.renderer=De),setupComponent(J),J.asyncDep){if(ye&&ye.registerDep(J,V),!W.el){const ve=J.subTree=createVNode(Comment);_(null,ve,X,te)}return}V(J,W,X,te,ye,be,Ae)},N=(W,X,te)=>{const ie=X.component=W.component;if(shouldUpdateComponent(W,X,te))if(ie.asyncDep&&!ie.asyncResolved){j(ie,X,te);return}else ie.next=X,invalidateJob(ie.update),ie.update();else X.el=W.el,ie.vnode=X},V=(W,X,te,ie,ye,be,Ae)=>{const J=()=>{if(W.isMounted){let{next:Oe,bu:fe,u:Ue,parent:Ze,vnode:$e}=W,Le=Oe,Ge;toggleRecurse(W,!1),Oe?(Oe.el=$e.el,j(W,Oe,Ae)):Oe=$e,fe&&invokeArrayFns(fe),(Ge=Oe.props&&Oe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ge,Ze,Oe,$e),toggleRecurse(W,!0);const ze=renderComponentRoot(W),Je=W.subTree;W.subTree=ze,y(Je,ze,l(Je.el),Ee(Je),W,ye,be),Oe.el=ze.el,Le===null&&updateHOCHostEl(W,ze.el),Ue&&queuePostRenderEffect(Ue,ye),(Ge=Oe.props&&Oe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ge,Ze,Oe,$e),ye)}else{let Oe;const{el:fe,props:Ue}=X,{bm:Ze,m:$e,parent:Le}=W,Ge=isAsyncWrapper(X);if(toggleRecurse(W,!1),Ze&&invokeArrayFns(Ze),!Ge&&(Oe=Ue&&Ue.onVnodeBeforeMount)&&invokeVNodeHook(Oe,Le,X),toggleRecurse(W,!0),fe&&qe){const ze=()=>{W.subTree=renderComponentRoot(W),qe(fe,W.subTree,W,ye,null)};Ge?X.type.__asyncLoader().then(()=>!W.isUnmounted&&ze()):ze()}else{const ze=W.subTree=renderComponentRoot(W);y(null,ze,te,ie,W,ye,be),X.el=ze.el}if($e&&queuePostRenderEffect($e,ye),!Ge&&(Oe=Ue&&Ue.onVnodeMounted)){const ze=X;queuePostRenderEffect(()=>invokeVNodeHook(Oe,Le,ze),ye)}(X.shapeFlag&256||Le&&isAsyncWrapper(Le.vnode)&&Le.vnode.shapeFlag&256)&&W.a&&queuePostRenderEffect(W.a,ye),W.isMounted=!0,X=te=ie=null}},ve=W.effect=new ReactiveEffect(J,()=>queueJob(de),W.scope),de=W.update=()=>ve.run();de.id=W.uid,toggleRecurse(W,!0),de()},j=(W,X,te)=>{X.component=W;const ie=W.vnode.props;W.vnode=X,W.next=null,updateProps(W,X.props,ie,te),updateSlots(W,X.children,te),pauseTracking(),flushPreFlushCbs(),resetTracking()},K=(W,X,te,ie,ye,be,Ae,J,ve=!1)=>{const de=W&&W.children,Oe=W?W.shapeFlag:0,fe=X.children,{patchFlag:Ue,shapeFlag:Ze}=X;if(Ue>0){if(Ue&128){he(de,fe,te,ie,ye,be,Ae,J,ve);return}else if(Ue&256){ee(de,fe,te,ie,ye,be,Ae,J,ve);return}}Ze&8?(Oe&16&&oe(de,ye,be),fe!==de&&m(te,fe)):Oe&16?Ze&16?he(de,fe,te,ie,ye,be,Ae,J,ve):oe(de,ye,be,!0):(Oe&8&&m(te,""),Ze&16&&M(fe,te,ie,ye,be,Ae,J,ve))},ee=(W,X,te,ie,ye,be,Ae,J,ve)=>{W=W||EMPTY_ARR,X=X||EMPTY_ARR;const de=W.length,Oe=X.length,fe=Math.min(de,Oe);let Ue;for(Ue=0;Ue<fe;Ue++){const Ze=X[Ue]=ve?cloneIfMounted(X[Ue]):normalizeVNode(X[Ue]);y(W[Ue],Ze,te,null,ye,be,Ae,J,ve)}de>Oe?oe(W,ye,be,!0,!1,fe):M(X,te,ie,ye,be,Ae,J,ve,fe)},he=(W,X,te,ie,ye,be,Ae,J,ve)=>{let de=0;const Oe=X.length;let fe=W.length-1,Ue=Oe-1;for(;de<=fe&&de<=Ue;){const Ze=W[de],$e=X[de]=ve?cloneIfMounted(X[de]):normalizeVNode(X[de]);if(isSameVNodeType(Ze,$e))y(Ze,$e,te,null,ye,be,Ae,J,ve);else break;de++}for(;de<=fe&&de<=Ue;){const Ze=W[fe],$e=X[Ue]=ve?cloneIfMounted(X[Ue]):normalizeVNode(X[Ue]);if(isSameVNodeType(Ze,$e))y(Ze,$e,te,null,ye,be,Ae,J,ve);else break;fe--,Ue--}if(de>fe){if(de<=Ue){const Ze=Ue+1,$e=Ze<Oe?X[Ze].el:ie;for(;de<=Ue;)y(null,X[de]=ve?cloneIfMounted(X[de]):normalizeVNode(X[de]),te,$e,ye,be,Ae,J,ve),de++}}else if(de>Ue)for(;de<=fe;)Se(W[de],ye,be,!0),de++;else{const Ze=de,$e=de,Le=new Map;for(de=$e;de<=Ue;de++){const We=X[de]=ve?cloneIfMounted(X[de]):normalizeVNode(X[de]);We.key!=null&&Le.set(We.key,de)}let Ge,ze=0;const Je=Ue-$e+1;let ot=!1,Qe=0;const at=new Array(Je);for(de=0;de<Je;de++)at[de]=0;for(de=Ze;de<=fe;de++){const We=W[de];if(ze>=Je){Se(We,ye,be,!0);continue}let pt;if(We.key!=null)pt=Le.get(We.key);else for(Ge=$e;Ge<=Ue;Ge++)if(at[Ge-$e]===0&&isSameVNodeType(We,X[Ge])){pt=Ge;break}pt===void 0?Se(We,ye,be,!0):(at[pt-$e]=de+1,pt>=Qe?Qe=pt:ot=!0,y(We,X[pt],te,null,ye,be,Ae,J,ve),ze++)}const st=ot?getSequence(at):EMPTY_ARR;for(Ge=st.length-1,de=Je-1;de>=0;de--){const We=$e+de,pt=X[We],vt=We+1<Oe?X[We+1].el:ie;at[de]===0?y(null,pt,te,vt,ye,be,Ae,J,ve):ot&&(Ge<0||de!==st[Ge]?ge(pt,te,vt,2):Ge--)}}},ge=(W,X,te,ie,ye=null)=>{const{el:be,type:Ae,transition:J,children:ve,shapeFlag:de}=W;if(de&6){ge(W.component.subTree,X,te,ie);return}if(de&128){W.suspense.move(X,te,ie);return}if(de&64){Ae.move(W,X,te,De);return}if(Ae===Fragment){n(be,X,te);for(let fe=0;fe<ve.length;fe++)ge(ve[fe],X,te,ie);n(W.anchor,X,te);return}if(Ae===Static){S(W,X,te);return}if(ie!==2&&de&1&&J)if(ie===0)J.beforeEnter(be),n(be,X,te),queuePostRenderEffect(()=>J.enter(be),ye);else{const{leave:fe,delayLeave:Ue,afterLeave:Ze}=J,$e=()=>n(be,X,te),Le=()=>{fe(be,()=>{$e(),Ze&&Ze()})};Ue?Ue(be,$e,Le):Le()}else n(be,X,te)},Se=(W,X,te,ie=!1,ye=!1)=>{const{type:be,props:Ae,ref:J,children:ve,dynamicChildren:de,shapeFlag:Oe,patchFlag:fe,dirs:Ue}=W;if(J!=null&&setRef(J,null,te,W,!0),Oe&256){X.ctx.deactivate(W);return}const Ze=Oe&1&&Ue,$e=!isAsyncWrapper(W);let Le;if($e&&(Le=Ae&&Ae.onVnodeBeforeUnmount)&&invokeVNodeHook(Le,X,W),Oe&6)re(W.component,te,ie);else{if(Oe&128){W.suspense.unmount(te,ie);return}Ze&&invokeDirectiveHook(W,null,X,"beforeUnmount"),Oe&64?W.type.remove(W,X,te,ye,De,ie):de&&(be!==Fragment||fe>0&&fe&64)?oe(de,X,te,!1,!0):(be===Fragment&&fe&384||!ye&&Oe&16)&&oe(ve,X,te),ie&&we(W)}($e&&(Le=Ae&&Ae.onVnodeUnmounted)||Ze)&&queuePostRenderEffect(()=>{Le&&invokeVNodeHook(Le,X,W),Ze&&invokeDirectiveHook(W,null,X,"unmounted")},te)},we=W=>{const{type:X,el:te,anchor:ie,transition:ye}=W;if(X===Fragment){ne(te,ie);return}if(X===Static){E(W);return}const be=()=>{a(te),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(W.shapeFlag&1&&ye&&!ye.persisted){const{leave:Ae,delayLeave:J}=ye,ve=()=>Ae(te,be);J?J(W.el,be,ve):ve()}else be()},ne=(W,X)=>{let te;for(;W!==X;)te=o(W),a(W),W=te;a(X)},re=(W,X,te)=>{const{bum:ie,scope:ye,update:be,subTree:Ae,um:J}=W;ie&&invokeArrayFns(ie),ye.stop(),be&&(be.active=!1,Se(Ae,W,X,te)),J&&queuePostRenderEffect(J,X),queuePostRenderEffect(()=>{W.isUnmounted=!0},X),X&&X.pendingBranch&&!X.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===X.pendingId&&(X.deps--,X.deps===0&&X.resolve())},oe=(W,X,te,ie=!1,ye=!1,be=0)=>{for(let Ae=be;Ae<W.length;Ae++)Se(W[Ae],X,te,ie,ye)},Ee=W=>W.shapeFlag&6?Ee(W.component.subTree):W.shapeFlag&128?W.suspense.next():o(W.anchor||W.el),Re=(W,X,te)=>{W==null?X._vnode&&Se(X._vnode,null,null,!0):y(X._vnode||null,W,X,null,null,null,te),flushPreFlushCbs(),flushPostFlushCbs(),X._vnode=W},De={p:y,um:Se,m:ge,r:we,mt:U,mc:M,pc:K,pbc:O,n:Ee,o:r};let He,qe;return e&&([He,qe]=e(De)),{render:Re,hydrate:He,createApp:createAppAPI(Re,He)}}function toggleRecurse({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function needTransition(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(r,e,t=!1){const n=r.children,a=e.children;if(isArray$1(n)&&isArray$1(a))for(let s=0;s<n.length;s++){const c=n[s];let f=a[s];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=a[s]=cloneIfMounted(a[s]),f.el=c.el),t||traverseStaticChildren(c,f)),f.type===Text&&(f.el=c.el)}}function getSequence(r){const e=r.slice(),t=[0];let n,a,s,c,f;const b=r.length;for(n=0;n<b;n++){const g=r[n];if(g!==0){if(a=t[t.length-1],r[a]<g){e[n]=a,t.push(n);continue}for(s=0,c=t.length-1;s<c;)f=s+c>>1,r[t[f]]<g?s=f+1:c=f;g<r[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,c=t[s-1];s-- >0;)t[s]=c,c=e[c];return t}const isTeleport=r=>r.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,t,n,a,s){return setupBlock(createBaseVNode(r,e,t,n,a,s,!0))}function createBlock(r,e,t,n,a){return setupBlock(createVNode(r,e,t,n,a,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?isString(r)||isRef(r)||isFunction(r)?{i:currentRenderingInstance,r,k:e,f:!!t}:r:null);function createBaseVNode(r,e=null,t=null,n=0,a=null,s=r===Fragment?0:1,c=!1,f=!1){const b={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return f?(normalizeChildren(b,t),s&128&&r.normalize(b)):t&&(b.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(b.patchFlag>0||s&6)&&b.patchFlag!==32&&currentBlock.push(b),b}const createVNode=_createVNode;function _createVNode(r,e=null,t=null,n=0,a=null,s=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const f=cloneVNode(r,e,!0);return t&&normalizeChildren(f,t),isBlockTreeEnabled>0&&!s&&currentBlock&&(f.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=f:currentBlock.push(f)),f.patchFlag|=-2,f}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:f,style:b}=e;f&&!isString(f)&&(e.class=normalizeClass(f)),isObject$3(b)&&(isProxy(b)&&!isArray$1(b)&&(b=extend$3({},b)),e.style=normalizeStyle(b))}const c=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$3(r)?4:isFunction(r)?2:0;return createBaseVNode(r,e,t,n,a,c,s,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend$3({},r):r:null}function cloneVNode(r,e,t=!1){const{props:n,ref:a,patchFlag:s,children:c}=r,f=e?mergeProps(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?t&&a?isArray$1(a)?a.concat(normalizeRef(e)):[a,normalizeRef(e)]:normalizeRef(e):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:c,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?s===-1?16:s|16:s,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function createTextVNode(r=" ",e=0){return createVNode(Text,null,r,e)}function createCommentVNode(r="",e=!1){return e?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray$1(r)?createVNode(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),normalizeChildren(r,a()),a._c&&(a._d=!0));return}else{t=32;const a=e._;!a&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:a===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),n&64?(t=16,e=[createTextVNode(e)]):t=8);r.children=e,r.shapeFlag|=t}function mergeProps(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(a==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(a)){const s=e[a],c=n[a];c&&s!==c&&!(isArray$1(s)&&s.includes(c))&&(e[a]=s?[].concat(s,c):c)}else a!==""&&(e[a]=n[a])}return e}function invokeVNodeHook(r,e,t,n=null){callWithAsyncErrorHandling(r,e,7,[t,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,e,t){const n=r.type,a=(e?e.appContext:r.appContext)||emptyAppContext,s={uid:uid++,vnode:r,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,a),emitsOptions:normalizeEmitsOptions(n,a),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit.bind(null,s),r.ce&&r.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(r=>currentInstance=r),internalSetCurrentInstance=r=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(e=>e(r)):globalCurrentInstanceSetters[0](r)};const setCurrentInstance=r=>{internalSetCurrentInstance(r),r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1){isInSSRComponentSetup=e;const{props:t,children:n}=r.vnode,a=isStatefulComponent(r);initProps(r,t,a,e),initSlots(r,n);const s=a?setupStatefulComponent(r,e):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:n}=t;if(n){const a=r.setupContext=n.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const s=callWithErrorHandling(n,r,0,[r.props,a]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),e)return s.then(c=>{handleSetupResult(r,c,e)}).catch(c=>{handleError(c,r,0)});r.asyncDep=s}else handleSetupResult(r,s,e)}else finishComponentSetup(r,e)}function handleSetupResult(r,e,t){isFunction(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject$3(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r,t)}let compile;function finishComponentSetup(r,e,t){const n=r.type;if(!r.render){if(!e&&compile&&!n.render){const a=n.template||resolveMergedOptions(r).template;if(a){const{isCustomElement:s,compilerOptions:c}=r.appContext.config,{delimiters:f,compilerOptions:b}=n,g=extend$3(extend$3({isCustomElement:s,delimiters:f},c),b);n.render=compile(a,g)}}r.render=n.render||NOOP}{setCurrentInstance(r),pauseTracking();try{applyOptions(r)}finally{resetTracking(),unsetCurrentInstance()}}}function getAttrsProxy(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(e,t){return track(r,"get","$attrs"),e[t]}}))}function createSetupContext(r){const e=t=>{r.exposed=t||{}};return{get attrs(){return getAttrsProxy(r)},slots:r.slots,emit:r.emit,expose:e}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](r)},has(e,t){return t in e||t in publicPropertiesMap}}))}function isClassComponent(r){return isFunction(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup);function h(r,e,t){const n=arguments.length;return n===2?isObject$3(e)&&!isArray$1(e)?isVNode(e)?createVNode(r,null,[e]):createVNode(r,e):createVNode(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&isVNode(t)&&(t=[t]),createVNode(r,e,t))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$1="3.3.8",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const a=e?doc.createElementNS(svgNS,r):doc.createElement(r,t?{is:t}:void 0);return r==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,a,s){const c=t?t.previousSibling:e.lastChild;if(a&&(a===s||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),t),!(a===s||!(a=a.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${r}</svg>`:r;const f=templateContainer.content;if(n){const b=f.firstChild;for(;b.firstChild;)f.appendChild(b.firstChild);f.removeChild(b)}e.insertBefore(f,t)}return[c?c.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(r,{slots:e})=>h(BaseTransition,resolveTransitionProps(r),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$3({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(r,e=[])=>{isArray$1(r)?r.forEach(t=>t(...e)):r&&r(...e)},hasExplicitCallback=r=>r?isArray$1(r)?r.some(e=>e.length>1):r.length>1:!1;function resolveTransitionProps(r){const e={};for(const R in r)R in DOMTransitionPropsValidators||(e[R]=r[R]);if(r.css===!1)return e;const{name:t="v",type:n,duration:a,enterFromClass:s=`${t}-enter-from`,enterActiveClass:c=`${t}-enter-active`,enterToClass:f=`${t}-enter-to`,appearFromClass:b=s,appearActiveClass:g=c,appearToClass:m=f,leaveFromClass:l=`${t}-leave-from`,leaveActiveClass:o=`${t}-leave-active`,leaveToClass:u=`${t}-leave-to`}=r,d=normalizeDuration(a),y=d&&d[0],w=d&&d[1],{onBeforeEnter:_,onEnter:T,onEnterCancelled:S,onLeave:E,onLeaveCancelled:A,onBeforeAppear:P=_,onAppear:k=T,onAppearCancelled:M=S}=e,F=(R,C,U)=>{removeTransitionClass(R,C?m:f),removeTransitionClass(R,C?g:c),U&&U()},O=(R,C)=>{R._isLeaving=!1,removeTransitionClass(R,l),removeTransitionClass(R,u),removeTransitionClass(R,o),C&&C()},D=R=>(C,U)=>{const N=R?k:T,V=()=>F(C,R,U);callHook(N,[C,V]),nextFrame(()=>{removeTransitionClass(C,R?b:s),addTransitionClass(C,R?m:f),hasExplicitCallback(N)||whenTransitionEnds(C,n,y,V)})};return extend$3(e,{onBeforeEnter(R){callHook(_,[R]),addTransitionClass(R,s),addTransitionClass(R,c)},onBeforeAppear(R){callHook(P,[R]),addTransitionClass(R,b),addTransitionClass(R,g)},onEnter:D(!1),onAppear:D(!0),onLeave(R,C){R._isLeaving=!0;const U=()=>O(R,C);addTransitionClass(R,l),forceReflow(),addTransitionClass(R,o),nextFrame(()=>{R._isLeaving&&(removeTransitionClass(R,l),addTransitionClass(R,u),hasExplicitCallback(E)||whenTransitionEnds(R,n,w,U))}),callHook(E,[R,U])},onEnterCancelled(R){F(R,!1),callHook(S,[R])},onAppearCancelled(R){F(R,!0),callHook(M,[R])},onLeaveCancelled(R){O(R),callHook(A,[R])}})}function normalizeDuration(r){if(r==null)return null;if(isObject$3(r))return[NumberOf(r.enter),NumberOf(r.leave)];{const e=NumberOf(r);return[e,e]}}function NumberOf(r){return toNumber$2(r)}function addTransitionClass(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[vtcKey]||(r[vtcKey]=new Set)).add(e)}function removeTransitionClass(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const t=r[vtcKey];t&&(t.delete(e),t.size||(r[vtcKey]=void 0))}function nextFrame(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let endId=0;function whenTransitionEnds(r,e,t,n){const a=r._endId=++endId,s=()=>{a===r._endId&&n()};if(t)return setTimeout(s,t);const{type:c,timeout:f,propCount:b}=getTransitionInfo(r,e);if(!c)return n();const g=c+"end";let m=0;const l=()=>{r.removeEventListener(g,o),s()},o=u=>{u.target===r&&++m>=b&&l()};setTimeout(()=>{m<b&&l()},f+1),r.addEventListener(g,o)}function getTransitionInfo(r,e){const t=window.getComputedStyle(r),n=d=>(t[d]||"").split(", "),a=n(`${TRANSITION}Delay`),s=n(`${TRANSITION}Duration`),c=getTimeout(a,s),f=n(`${ANIMATION}Delay`),b=n(`${ANIMATION}Duration`),g=getTimeout(f,b);let m=null,l=0,o=0;e===TRANSITION?c>0&&(m=TRANSITION,l=c,o=s.length):e===ANIMATION?g>0&&(m=ANIMATION,l=g,o=b.length):(l=Math.max(c,g),m=l>0?c>g?TRANSITION:ANIMATION:null,o=m?m===TRANSITION?s.length:b.length:0);const u=m===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:m,timeout:l,propCount:o,hasTransform:u}}function getTimeout(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,n)=>toMs(t)+toMs(r[n])))}function toMs(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(r,e,t){const n=r[vtcKey];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const vShowOldKey=Symbol("_vod"),vShow={beforeMount(r,{value:e},{transition:t}){r[vShowOldKey]=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):setDisplay(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(r),setDisplay(r,!0),n.enter(r)):n.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,e))},beforeUnmount(r,{value:e}){setDisplay(r,e)}};function setDisplay(r,e){r.style.display=e?r[vShowOldKey]:"none"}function patchStyle(r,e,t){const n=r.style,a=isString(t);if(t&&!a){if(e&&!isString(e))for(const s in e)t[s]==null&&setStyle(n,s,"");for(const s in t)setStyle(n,s,t[s])}else{const s=n.display;a?e!==t&&(n.cssText=t):e&&r.removeAttribute("style"),vShowOldKey in r&&(n.display=s)}}const importantRE=/\s*!important$/;function setStyle(r,e,t){if(isArray$1(t))t.forEach(n=>setStyle(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=autoPrefix(r,e);importantRE.test(t)?r.setProperty(hyphenate(n),t.replace(importantRE,""),"important"):r[n]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const t=prefixCache[e];if(t)return t;let n=camelize(e);if(n!=="filter"&&n in r)return prefixCache[e]=n;n=capitalize(n);for(let a=0;a<prefixes.length;a++){const s=prefixes[a]+n;if(s in r)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,t,n,a){if(n&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,t);else{const s=isSpecialBooleanAttr(e);t==null||s&&!includeBooleanAttr(t)?r.removeAttribute(e):r.setAttribute(e,s?"":t)}}function patchDOMProp(r,e,t,n,a,s,c){if(e==="innerHTML"||e==="textContent"){n&&c(n,a,s),r[e]=t??"";return}const f=r.tagName;if(e==="value"&&f!=="PROGRESS"&&!f.includes("-")){r._value=t;const g=f==="OPTION"?r.getAttribute("value"):r.value,m=t??"";g!==m&&(r.value=m),t==null&&r.removeAttribute(e);return}let b=!1;if(t===""||t==null){const g=typeof r[e];g==="boolean"?t=includeBooleanAttr(t):t==null&&g==="string"?(t="",b=!0):g==="number"&&(t=0,b=!0)}try{r[e]=t}catch{}b&&r.removeAttribute(e)}function addEventListener(r,e,t,n){r.addEventListener(e,t,n)}function removeEventListener(r,e,t,n){r.removeEventListener(e,t,n)}const veiKey=Symbol("_vei");function patchEvent(r,e,t,n,a=null){const s=r[veiKey]||(r[veiKey]={}),c=s[e];if(n&&c)c.value=n;else{const[f,b]=parseName(e);if(n){const g=s[e]=createInvoker(n,a);addEventListener(r,f,g,b)}else c&&(removeEventListener(r,f,c,b),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let n;for(;n=r.match(optionsModifierRE);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,t.value),e,5,[n])};return t.value=r,t.attached=getNow(),t}function patchStopImmediatePropagation(r,e){if(isArray$1(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(r,e,t,n,a=!1,s,c,f,b)=>{e==="class"?patchClass(r,n,a):e==="style"?patchStyle(r,t,n):isOn(e)?isModelListener(e)||patchEvent(r,e,t,n,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,n,a))?patchDOMProp(r,e,n,s,c,f,b):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),patchAttr(r,e,n,a))};function shouldSetAsProp(r,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in r&&nativeOnRE.test(e)&&isFunction(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(t)?!1:e in r}const getModelAssigner=r=>{const e=r.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(r,{modifiers:{lazy:e,trim:t,number:n}},a){r[assignKey]=getModelAssigner(a);const s=n||a.props&&a.props.type==="number";addEventListener(r,e?"change":"input",c=>{if(c.target.composing)return;let f=r.value;t&&(f=f.trim()),s&&(f=looseToNumber(f)),r[assignKey](f)}),t&&addEventListener(r,"change",()=>{r.value=r.value.trim()}),e||(addEventListener(r,"compositionstart",onCompositionStart),addEventListener(r,"compositionend",onCompositionEnd),addEventListener(r,"change",onCompositionEnd))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:t,trim:n,number:a}},s){if(r[assignKey]=getModelAssigner(s),r.composing||document.activeElement===r&&r.type!=="range"&&(t||n&&r.value.trim()===e||(a||r.type==="number")&&looseToNumber(r.value)===e))return;const c=e??"";r.value!==c&&(r.value=c)}},vModelCheckbox={deep:!0,created(r,e,t){r[assignKey]=getModelAssigner(t),addEventListener(r,"change",()=>{const n=r._modelValue,a=getValue(r),s=r.checked,c=r[assignKey];if(isArray$1(n)){const f=looseIndexOf(n,a),b=f!==-1;if(s&&!b)c(n.concat(a));else if(!s&&b){const g=[...n];g.splice(f,1),c(g)}}else if(isSet(n)){const f=new Set(n);s?f.add(a):f.delete(a),c(f)}else c(getCheckboxValue(r,s))})},mounted:setChecked,beforeUpdate(r,e,t){r[assignKey]=getModelAssigner(t),setChecked(r,e,t)}};function setChecked(r,{value:e,oldValue:t},n){r._modelValue=e,isArray$1(e)?r.checked=looseIndexOf(e,n.props.value)>-1:isSet(e)?r.checked=e.has(n.props.value):e!==t&&(r.checked=looseEqual(e,getCheckboxValue(r,!0)))}function getValue(r){return"_value"in r?r._value:r.value}function getCheckboxValue(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>systemModifiers.some(t=>r[`${t}Key`]&&!e.includes(t))},withModifiers=(r,e)=>(t,...n)=>{for(let a=0;a<e.length;a++){const s=modifierGuards[e[a]];if(s&&s(t,e))return}return r(t,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(r,e)=>t=>{if(!("key"in t))return;const n=hyphenate(t.key);if(e.some(a=>a===n||keyNames[a]===n))return r(t)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:t}=e;return e.mount=n=>{const a=normalizeContainer(n);if(!a)return;const s=e._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.innerHTML="";const c=t(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),c},e};function normalizeContainer(r){return isString(r)?document.querySelector(r):r}const _imports_0="/logo.png",allColors=[{text:"transparent",colorValue:"transparent",uuid:"4ce66a56"},{text:"Abaddon Black Citadel - Base Layer",colorValue:"#010100",uuid:"34c4f448"},{text:"Administratum Grey Citadel - Base Layer",colorValue:"#9da299",uuid:"97bec853"},{text:"Ahriman Blue Citadel - Base Layer",colorValue:"#1F8C9C",uuid:"5d4443cb"},{text:"Alaitoc Blue Citadel - Base Layer",colorValue:"#2e5689",uuid:"ef62d76b"},{text:"Alien Purple Army Painter",colorValue:"#50317b",uuid:"0fce4a2d"},{text:"Altdorf Guard Blue Citadel - Base Layer",colorValue:"#274b9b",uuid:"f7a42f55"},{text:"Angel Green Army Painter",colorValue:"#0c391d",uuid:"166c5149"},{text:"Arcane Blue P3 Formula",colorValue:"#7acfd9",uuid:"b64ebf22"},{text:"Army Green Army Painter",colorValue:"#6e7645",uuid:"971cdc7e"},{text:"Ash Grey Army Painter",colorValue:"#a2a5a4",uuid:"b482ed46"},{text:"Averland Sunset Citadel - Base Layer",colorValue:"#fbba00",uuid:"d0121320"},{text:"Azure Vallejo - Model",colorValue:"#717cad",uuid:"b8b7d678"},{text:"Babe Blonde Army Painter",colorValue:"#f8dd0d",uuid:"dc9caa26"},{text:"Baharroth Blue Citadel - Edge",colorValue:"#58C1CD",uuid:"e1940e62"},{text:"Balor Brown Citadel - Base Layer",colorValue:"#915e02",uuid:"994757d9"},{text:"Baneblade Brown Citadel - Base Layer",colorValue:"#99826b",uuid:"543506e5"},{text:"Barbarian Flesh Army Painter",colorValue:"#e89c6c",uuid:"fd45c262"},{text:"Bastion Grey P3 Formula",colorValue:"#777965",uuid:"e9a6ff08"},{text:"Battledress Green P3 Formula",colorValue:"#757232",uuid:"0933f511"},{text:"Battlefield Brown P3 Formula",colorValue:"#32251c",uuid:"886bff6c"},{text:"Beast Hide P3 Formula",colorValue:"#b1956b",uuid:"06328030"},{text:"Beasty Brown Vallejo - Game",colorValue:"#55432d",uuid:"a77cc318"},{text:"Beaten Purple P3 Formula",colorValue:"#552a72",uuid:"132d3fdc"},{text:"Beige Red Vallejo - Model",colorValue:"#c79166",uuid:"7fe51828"},{text:"Beige Vallejo - Model",colorValue:"#dbc58e",uuid:"14f9d4dd"},{text:"Bestigor Flesh Citadel - Base Layer",colorValue:"#D38A57",uuid:"1110e165"},{text:"Black Green Vallejo - Model",colorValue:"#19423e",uuid:"68ea3ccf"},{text:"Black Vallejo - Game",colorValue:"#000000",uuid:"e52576e9"},{text:"Bloodstone P3 Formula",colorValue:"#9e4822",uuid:"61c1e24e"},{text:"Bloodtracker Brown P3 Formula",colorValue:"#a66a28",uuid:"b66e2ff9"},{text:"Bloody Red Vallejo - Game",colorValue:"#bf282e",uuid:"fa49073d"},{text:"Blue Green Vallejo - Model",colorValue:"#1a9496",uuid:"cb340deb"},{text:"Blue Grey Pale Vallejo - Model",colorValue:"#9ea7a5",uuid:"cc6e4fbf"},{text:"Blue Horror Citadel - Edge",colorValue:"#A2BAD2",uuid:"15d7f536"},{text:"Blue Vallejo - Model",colorValue:"#043667",uuid:"39f987eb"},{text:"Blue Violet Vallejo - Model",colorValue:"#795c9a",uuid:"11530dbd"},{text:"Bone White Vallejo - Game",colorValue:"#e8be86",uuid:"5dbd0f5c"},{text:"Bootstrap Leather P3 Formula",colorValue:"#956939",uuid:"9ceec961"},{text:"Bright Orange Vallejo - Model",colorValue:"#f26833",uuid:"346a6c29"},{text:"Bronze Fleshtone Vallejo - Game",colorValue:"#db945c",uuid:"0b25b419"},{text:"Buff Vallejo - Model",colorValue:"#d2ca9f",uuid:"d3868889"},{text:"Bugmans Glow Citadel - Base Layer",colorValue:"#8c5144",uuid:"c8d65d54"},{text:"Burnt Umber Vallejo - Model",colorValue:"#665148",uuid:"96ab5f1c"},{text:"Cadian Fleshtone Citadel - Base Layer",colorValue:"#cb7953",uuid:"fcd0e2b4"},{text:"Caledor Sky Citadel - Base Layer",colorValue:"#38689c",uuid:"f88a6148"},{text:"Calgar Blue Citadel - Base Layer",colorValue:"#456eb5",uuid:"a8092306"},{text:"Caliban Green Citadel - Base Layer",colorValue:"#003b1d",uuid:"610207c4"},{text:"Camoflage Green Vallejo - Game",colorValue:"#71753a",uuid:"74a76fe3"},{text:"Carmine Red Vallejo - Model",colorValue:"#b73035",uuid:"971e7e3a"},{text:"Carnal Pink P3 Formula",colorValue:"#fae2ec",uuid:"87ff293a"},{text:"Castellan Green Citadel - Base Layer",colorValue:"#384d20",uuid:"706151ca"},{text:"Cavalry Brown Vallejo - Model",colorValue:"#853f3d",uuid:"c239d289"},{text:"Cayman Green Vallejo - Game",colorValue:"#285648",uuid:"30f515ad"},{text:"Celestra Grey Citadel - Base Layer",colorValue:"#9caeae",uuid:"bd886934"},{text:"Centaur Skin Army Painter",colorValue:"#deaba0",uuid:"a612cddf"},{text:"Ceramite White Citadel - Base Layer",colorValue:"#ffffff",uuid:"588c280b"},{text:"Chaotic Red Army Painter",colorValue:"#6c1e10",uuid:"4cef49b6"},{text:"Charred Brown Vallejo - Game",colorValue:"#39343b",uuid:"1a4fa608"},{text:"Coal Black P3 Formula",colorValue:"#005a61",uuid:"709e768e"},{text:"Cold Grey Vallejo - Game",colorValue:"#54646d",uuid:"324faeac"},{text:"Combat Fatigue Army Painter",colorValue:"#878e5c",uuid:"c7a9a712"},{text:"Commando Green Army Painter",colorValue:"#827b39",uuid:"87e473bc"},{text:"Corpse Pale Army Painter",colorValue:"#edccad",uuid:"843bbc1e"},{text:"Crystal Blue Army Painter",colorValue:"#0083c2",uuid:"abd900c3"},{text:"Cryx Bane Base P3 Formula",colorValue:"#303924",uuid:"951b8062"},{text:"Cryx Bane Highlight P3 Formula",colorValue:"#93907d",uuid:"598d572b"},{text:"Cultist Robe Army Painter",colorValue:"#756e60",uuid:"a191fab7"},{text:"Cygnar Base Blue P3 Formula",colorValue:"#124b9b",uuid:"02299629"},{text:"Cygnar Blue Highlight P3 Formula",colorValue:"#1f75bb",uuid:"43287708"},{text:"Cygnus Yellow P3 Formula",colorValue:"#f3e72e",uuid:"5a4204dd"},{text:"Daemonette Hide Citadel - Base Layer",colorValue:"#696685",uuid:"2da473ef"},{text:"Daemonic Yellow Army Painter",colorValue:"#fada06",uuid:"51b87b30"},{text:"Dark Flesh Vallejo - Model",colorValue:"#d9a262",uuid:"6bfd92fd"},{text:"Dark Fleshtone Vallejo - Game",colorValue:"#4f2b26",uuid:"883c64ca"},{text:"Dark Green Vallejo - Game",colorValue:"#083c2a",uuid:"51fd05ad"},{text:"Dark Prussian Blue Vallejo - Model",colorValue:"#192c43",uuid:"a49f6c88"},{text:"Dark Reaper Citadel - Base Layer",colorValue:"#3B5150",uuid:"5775b3fe"},{text:"Dark Red Vallejo - Model",colorValue:"#a24a46",uuid:"0e8968bd"},{text:"Dark Sea Grey Vallejo - Model",colorValue:"#787d7a",uuid:"a810d6a7"},{text:"Dark Sky Army Painter",colorValue:"#2b4b5f",uuid:"a1d297c7"},{text:"Dark Stone Army Painter",colorValue:"#605752",uuid:"bce6839f"},{text:"Dark Yellow Vallejo - Model",colorValue:"#9d9059",uuid:"179b73e0"},{text:"Dawnstone Citadel - Base Layer",colorValue:"#7b7e74",uuid:"2691d331"},{text:"Dead Flesh Vallejo - Game",colorValue:"#bcb686",uuid:"c3d46fa2"},{text:"Dead White Vallejo - Game",colorValue:"#ffffff",uuid:"c08a3ccc"},{text:"Death Guard Armor Citadel - Base Layer",colorValue:"#848A66",uuid:"4d95f3ef"},{text:"Death World Forest Citadel - Base Layer",colorValue:"#666c2d",uuid:"d5b0ee1f"},{text:"Deathclaw Brown Citadel - Base Layer",colorValue:"#ba6952",uuid:"4b4fc710"},{text:"Dechala Lilac Citadel - Edge",colorValue:"#B69FCC",uuid:"6ded33de"},{text:"Deep Blue Army Painter",colorValue:"#083251",uuid:"ed4e511d"},{text:"Deep Sky Blue Vallejo - Model",colorValue:"#00a6da",uuid:"aec12c36"},{text:"Deep Yellow Vallejo - Model",colorValue:"#ffe30c",uuid:"6fc21585"},{text:"Dirt Spatter Army Painter",colorValue:"#5e3827",uuid:"6d02e876"},{text:"Doombull Brown Citadel - Base Layer",colorValue:"#5e0605",uuid:"0f713d72"},{text:"Dorn Yellow Citadel - Edge",colorValue:"#FFF200",uuid:"ae0811fc"},{text:"Dragon Red Army Painter",colorValue:"#9a1b1e",uuid:"3007bdf5"},{text:"Drake Tooth Army Painter",colorValue:"#cfcbb4",uuid:"bacb72cd"},{text:"Dryad Bark Citadel - Base Layer",colorValue:"#3b342e",uuid:"04cdd5b9"},{text:"Dungeon Grey Army Painter",colorValue:"#686c71",uuid:"6d0f7977"},{text:"Dwarf Skin Vallejo - Game",colorValue:"#cc7c67",uuid:"7ebd66d4"},{text:"Electric Blue Vallejo - Game",colorValue:"#008cbf",uuid:"ae365d50"},{text:"Elemental Bolt Army Painter",colorValue:"#009a82",uuid:"5044f842"},{text:"Elf Green Army Painter",colorValue:"#495122",uuid:"9be91bcf"},{text:"Elfic Flesh Vallejo - Game",colorValue:"#cdc29c",uuid:"7700b812"},{text:"Elysian Green Citadel - Base Layer",colorValue:"#81932e",uuid:"1c591854"},{text:"Emperors Children Citadel - Base Layer",colorValue:"#bd3f75",uuid:"9fb46d3c"},{text:"English Uniform Vallejo - Model",colorValue:"#715833",uuid:"02b4f0aa"},{text:"Eshin Grey Citadel - Base Layer",colorValue:"#535659",uuid:"4f53c697"},{text:"Evil Suns Scarlet Citadel - Base Layer",colorValue:"#c00b0c",uuid:"4938270f"},{text:"Exile Blue P3 Formula",colorValue:"#203367",uuid:"8549c9aa"},{text:"Fenrisian Grey Citadel - Base Layer",colorValue:"#789ebb",uuid:"a7994490"},{text:"Field Blue Vallejo - Model",colorValue:"#436872",uuid:"b2c5560e"},{text:"Field Grey Army Painter",colorValue:"#787c78",uuid:"156ce0cc"},{text:"Filthy Cape Army Painter",colorValue:"#7c7863",uuid:"55136d2c"},{text:"Fire Dragon Bright Citadel - Base Layer",colorValue:"#f1844a",uuid:"8d4f48b9"},{text:"Fire Lizard Army Painter",colorValue:"#d67128",uuid:"6208f430"},{text:"Flash Gitz Yellow Citadel - Base Layer",colorValue:"#ffee00",uuid:"16cedbe8"},{text:"Flat Blue Vallejo - Model",colorValue:"#336991",uuid:"390dce44"},{text:"Flat Earth Vallejo - Model",colorValue:"#87643c",uuid:"bfb14673"},{text:"Flat Flesh Vallejo - Model",colorValue:"#d8a977",uuid:"d724baf0"},{text:"Flat Green Vallejo - Model",colorValue:"#2a6531",uuid:"3fe8d7f6"},{text:"Flat Red Vallejo - Model",colorValue:"#aa3037",uuid:"2a4f68fb"},{text:"Flayed One Flesh Citadel - Base Layer",colorValue:"#f3ca8a",uuid:"e03aba66"},{text:"Foul Green Vallejo - Game",colorValue:"#239378",uuid:"d9f2cf00"},{text:"French Mirage Blue Vallejo - Model",colorValue:"#557880",uuid:"814a345d"},{text:"Fulgrim Pink Citadel - Edge",colorValue:"#F4AFCD",uuid:"8e256119"},{text:"Gauss Blaster Green Citadel - Edge",colorValue:"#84C3AA",uuid:"f276d784"},{text:"Genestealer Purple Citadel - Base Layer",colorValue:"#7c5ca4",uuid:"17895ab7"},{text:"German Camoflage Black Brown Vallejo - Model",colorValue:"#553528",uuid:"a46cde51"},{text:"German Camoflage Medium Brown Vallejo - Model",colorValue:"#722b2f",uuid:"c254217a"},{text:"German Camoflage Pale Brown Vallejo - Model",colorValue:"#82685e",uuid:"eba782f6"},{text:"Ghost Grey Vallejo - Game",colorValue:"#a7c5db",uuid:"4583dc93"},{text:"Glossy Black Vallejo - Model",colorValue:"#010101",uuid:"b6a077f3"},{text:"Gnarls Green P3 Formula",colorValue:"#126232",uuid:"725cd390"},{text:"Goblin Green Army Painter",colorValue:"#348941",uuid:"1f3a213d"},{text:"Goblin Green Vallejo - Game",colorValue:"#23743c",uuid:"5f94d59f"},{text:"Gold Brown Vallejo - Model",colorValue:"#ba8636",uuid:"dedee7b4"},{text:"Gold Yellow Vallejo - Game",colorValue:"#fdb318",uuid:"f7285e26"},{text:"Golden Olive Vallejo - Model",colorValue:"#78923b",uuid:"a8cb07c5"},{text:"Golden Yellow Vallejo - Model",colorValue:"#f7c65e",uuid:"55f38043"},{text:"Gorgon Hide Army Painter",colorValue:"#c7d2e4",uuid:"52e7c30c"},{text:"Gorthor Brown Citadel - Base Layer",colorValue:"#6e4e46",uuid:"26383882"},{text:"Gory Red Vallejo - Game",colorValue:"#810504",uuid:"5616d0d9"},{text:"Greatcoat Grey P3 Formula",colorValue:"#4d5861",uuid:"09c73044"},{text:"Green Grey Vallejo - Model",colorValue:"#827e61",uuid:"d86a4665"},{text:"Greenskin Army Painter",colorValue:"#136232",uuid:"ca85e615"},{text:"Grey Blue Vallejo - Model",colorValue:"#45708d",uuid:"102a016a"},{text:"Grey Green Vallejo - Model",colorValue:"#565a60",uuid:"bedc0045"},{text:"Grey Grey Vallejo - Model",colorValue:"#aecbbb",uuid:"7f545184"},{text:"Griffon Blue Army Painter",colorValue:"#215383",uuid:"1d332ba0"},{text:"Gun Corps Brown P3 Formula",colorValue:"#937d48",uuid:"e8ae7dac"},{text:"Hammerfall Khaki P3 Formula",colorValue:"#c8bf98",uuid:"ece3ed9c"},{text:"Hardened Carapace Army Painter",colorValue:"#4c473f",uuid:"13aede80"},{text:"Heartfire P3 Formula",colorValue:"#f6b046",uuid:"90e37ed3"},{text:"Heavy Blue Grey Vallejo - Game",colorValue:"#9ca7a7",uuid:"451a4414"},{text:"Heavy Blue Vallejo - Game",colorValue:"#29556d",uuid:"77c230fc"},{text:"Heavy Brown Vallejo - Game",colorValue:"#705d41",uuid:"7722d492"},{text:"Heavy Gold Brown Vallejo - Game",colorValue:"#ba8636",uuid:"0c22ad27"},{text:"Heavy Green Vallejo - Game",colorValue:"#566840",uuid:"ba2375ce"},{text:"Heavy Khaki Vallejo - Game",colorValue:"#9d965d",uuid:"05d2d187"},{text:"Heavy Ochre Vallejo - Game",colorValue:"#a87536",uuid:"b0821a5b"},{text:"Heavy Red Vallejo - Game",colorValue:"#943238",uuid:"1da8ea62"},{text:"Heavy Sienna Vallejo - Game",colorValue:"#744642",uuid:"8b86de7a"},{text:"Heavy Skintone Vallejo - Game",colorValue:"#aa7b62",uuid:"9fc4ab68"},{text:"Heavy Violet Vallejo - Game",colorValue:"#4c2e65",uuid:"6f7aff69"},{text:"Heavy Warm Grey Vallejo - Game",colorValue:"#939066",uuid:"cbea00bf"},{text:"Hexed Lichen Vallejo - Game",colorValue:"#34274d",uuid:"ba0446a8"},{text:"Hoeth Blue Citadel - Base Layer",colorValue:"#4f7fb5",uuid:"7bc6490b"},{text:"Hot Orange Vallejo - Game",colorValue:"#e43027",uuid:"be9dcd6c"},{text:"Hull Red Vallejo - Model",colorValue:"#522724",uuid:"2bf643c4"},{text:"Hydra Turquoise Army Painter",colorValue:"#199ba3",uuid:"0cc68b93"},{text:"Ice Storm Army Painter",colorValue:"#639ec9",uuid:"47830ba0"},{text:"Idrian Flesh P3 Formula",colorValue:"#9b5e37",uuid:"406de381"},{text:"Incubi Darkness Citadel - Base Layer",colorValue:"#094345",uuid:"759f51f1"},{text:"Intermediate Green Vallejo - Model",colorValue:"#49944f",uuid:"5d16096e"},{text:"Iosan Green P3 Formula",colorValue:"#22a854",uuid:"aabdf911"},{text:"Iraqi Sand Vallejo - Model",colorValue:"#b89972",uuid:"8f5e415a"},{text:"Ironhull Grey P3 Formula",colorValue:"#8e969b",uuid:"cf479088"},{text:"Jack Bone P3 Formula",colorValue:"#d6d4aa",uuid:"20b99b3f"},{text:"Jokaero Orange Citadel - Base Layer",colorValue:"#e6200f",uuid:"f741976c"},{text:"Jungle Green Army Painter",colorValue:"#88ac2e",uuid:"ac7b953c"},{text:"Kabalite Green Citadel - Base Layer",colorValue:"#008660",uuid:"e0081121"},{text:"Kantor Blue Citadel - Base Layer",colorValue:"#06234f",uuid:"0420b268"},{text:"Karak Stone Citadel - Base Layer",colorValue:"#c1a069",uuid:"c0f1ea57"},{text:"Khador Red Base P3 Formula",colorValue:"#ee2824",uuid:"28c70e2a"},{text:"Khador Red Highlight P3 Formula",colorValue:"#f29042",uuid:"8868b5c3"},{text:"Khaki Vallejo - Game",colorValue:"#8c806d",uuid:"12ee8746"},{text:"Khardic Flesh P3 Formula",colorValue:"#cb7b5b",uuid:"2cf2a671"},{text:"Khorne Red Citadel - Base Layer",colorValue:"#6a0a01",uuid:"424d7aef"},{text:"Kislev Flesh Citadel - Base Layer",colorValue:"#dbad75",uuid:"947e2174"},{text:"Kobold Skin Army Painter",colorValue:"#c9a484",uuid:"b024a6c9"},{text:"Kraken Skin Army Painter",colorValue:"#71c591",uuid:"eb326c6f"},{text:"Krieg Khaki Citadel - Edge",colorValue:"#C0BD81",uuid:"ada33308"},{text:"Leather Brown Army Painter",colorValue:"#764823",uuid:"f836e4ba"},{text:"Leather Brown Vallejo - Game",colorValue:"#7b5d2a",uuid:"fdcdaf38"},{text:"Leather Brown Vallejo - Model",colorValue:"#4a4639",uuid:"b9acfeef"},{text:"Lemon Yellow Vallejo - Model",colorValue:"#fef10e",uuid:"3daa3d9d"},{text:"Light Brown Vallejo - Model",colorValue:"#bf764e",uuid:"0959b110"},{text:"Light Green Vallejo - Model",colorValue:"#00a850",uuid:"c47c9002"},{text:"Light Orange Vallejo - Model",colorValue:"#f68627",uuid:"d9a3bc33"},{text:"Light Sea Grey Vallejo - Model",colorValue:"#97b4b5",uuid:"338c1501"},{text:"Lime Green Vallejo - Model",colorValue:"#6fae4e",uuid:"4643078e"},{text:"Loren Forest Citadel - Base Layer",colorValue:"#5b7426",uuid:"87d28e37"},{text:"Lothern Blue Citadel - Base Layer",colorValue:"#3ba1d1",uuid:"72e1b0c8"},{text:"Luftwaffe Camoflage Green Vallejo - Model",colorValue:"#596b3f",uuid:"d11b1e84"},{text:"Lugganath Orange Citadel - Edge",colorValue:"#F79E86",uuid:"9a2ae2f9"},{text:"Macragge Blue Citadel - Base Layer",colorValue:"#14397a",uuid:"4474ebdf"},{text:"Magenta Vallejo - Model",colorValue:"#a92a56",uuid:"b03b289f"},{text:"Magic Blue Vallejo - Game",colorValue:"#024381",uuid:"09fd11e2"},{text:"Mars Red Army Painter",colorValue:"#b73b37",uuid:"8ce8067f"},{text:"Matt Black Army Painter",colorValue:"#231f20",uuid:"2b6bd01c"},{text:"Matt White Army Painter",colorValue:"#ffffff",uuid:"e1b7283c"},{text:"Mechanicus Standard Grey Citadel - Base Layer",colorValue:"#454e50",uuid:"f056cffd"},{text:"Medium Olive Vallejo - Model",colorValue:"#226b2e",uuid:"19978704"},{text:"Medium Sea Grey Vallejo - Model",colorValue:"#869393",uuid:"154c0c17"},{text:"Mephiston Red Citadel - Base Layer",colorValue:"#9b0e05",uuid:"fb14ad4a"},{text:"Meredius Blue P3 Formula",colorValue:"#00b0b9",uuid:"69e71d5b"},{text:"Middlestone Vallejo - Model",colorValue:"#9c9660",uuid:"6c760c12"},{text:"Midlund Flesh P3 Formula",colorValue:"#f0a983",uuid:"611184d7"},{text:"Moldy Ochre P3 Formula",colorValue:"#ddb43e",uuid:"900537ab"},{text:"Monster Brown Army Painter",colorValue:"#855c2a",uuid:"7c62e0dd"},{text:"Moon Yellow Vallejo - Game",colorValue:"#fff103",uuid:"6e9389b1"},{text:"Moot Green Citadel - Base Layer",colorValue:"#57aa2d",uuid:"f7debd04"},{text:"Morrow White P3 Formula",colorValue:"#FEFBFD",uuid:"60e977dc"},{text:"Mouldy Clothes Army Painter",colorValue:"#447b3a",uuid:"f020606a"},{text:"Mournfang Brown Citadel - Base Layer",colorValue:"#681104",uuid:"bf9db0f6"},{text:"Murderous Magenta P3 Formula",colorValue:"#a81f5e",uuid:"b73e6264"},{text:"Mutation Green Vallejo - Game",colorValue:"#296934",uuid:"538efdbc"},{text:"Mythical Orange Army Painter",colorValue:"#e73d24",uuid:"c44ba0d9"},{text:"Naggaroth Night Citadel - Base Layer",colorValue:"#433656",uuid:"f5584530"},{text:"Necromance Cloak Army Painter",colorValue:"#3c3d37",uuid:"a5c144f1"},{text:"Necrotic Flesh Army Painter",colorValue:"#bfc292",uuid:"0ed04c44"},{text:"Nurgling Green Citadel - Base Layer",colorValue:"#90a15f",uuid:"d5b761bb"},{text:"Ochre Brown Vallejo - Model",colorValue:"#a77237",uuid:"422447f3"},{text:"Ogryn Camoflage Citadel - Base Layer",colorValue:"#a9af42",uuid:"a1768b96"},{text:"Olive Green Vallejo - Model",colorValue:"#6a8b3a",uuid:"b9c879f8"},{text:"Oozing Purple Army Painter",colorValue:"#aa94b4",uuid:"4a0e63ed"},{text:"Orange Brown Vallejo - Model",colorValue:"#b86f44",uuid:"99b1fd03"},{text:"Orange Fire Vallejo - Game",colorValue:"#f1652e",uuid:"cc8fe1e6"},{text:"Orc Blood Army Painter",colorValue:"#925f6e",uuid:"6ee1f800"},{text:"Ordic Olive P3 Formula",colorValue:"#6e7e36",uuid:"5074d13f"},{text:"Oxford Blue Vallejo - Model",colorValue:"#3a465f",uuid:"3d80e136"},{text:"Pale Blue Vallejo - Model",colorValue:"#83b5b2",uuid:"d2954c1b"},{text:"Pale Flesh Vallejo - Game",colorValue:"#f6bdb3",uuid:"e9bf30ad"},{text:"Pale Grey Blue Vallejo - Model",colorValue:"#bacdd0",uuid:"a5419953"},{text:"Pale Sand Vallejo - Model",colorValue:"#d1c49c",uuid:"ac506dec"},{text:"Pale Yellow Vallejo - Game",colorValue:"#d5c179",uuid:"7900103b"},{text:"Pallid Wych Flesh Citadel - Base Layer",colorValue:"#d6d5c4",uuid:"b079e79f"},{text:"Parasite Brown Vallejo - Game",colorValue:"#b1481f",uuid:"2d1c3971"},{text:"Park Green Flat Vallejo - Model",colorValue:"#008c5d",uuid:"0e180c71"},{text:"Pastel Blue Vallejo - Model",colorValue:"#67859b",uuid:"c86df2ea"},{text:"Phoenix Flames Army Painter",colorValue:"#faa61a",uuid:"75eb1f32"},{text:"Pink Horror Citadel - Base Layer",colorValue:"#96325c",uuid:"5d25ccf8"},{text:"Plague Brown Vallejo - Game",colorValue:"#cc9b34",uuid:"d939a0c8"},{text:"Pure Red Army Painter",colorValue:"#cf2127",uuid:"8c10e453"},{text:"Rakarth Flesh Citadel - Base Layer",colorValue:"#aba495",uuid:"02a7f23e"},{text:"Ratskin Flesh Citadel - Base Layer",colorValue:"#AD6B4C",uuid:"ca934661"},{text:"Reflective Green Vallejo - Model",colorValue:"#496244",uuid:"b6b3e1d0"},{text:"Rhinox Hide Citadel - Base Layer",colorValue:"#4e3433",uuid:"e099996c"},{text:"Rosy Flesh Vallejo - Game",colorValue:"#f89e84",uuid:"6539a0ec"},{text:"Royal Blue Vallejo - Model",colorValue:"#41558d",uuid:"83d4b213"},{text:"Royal Purple Vallejo - Game",colorValue:"#23264f",uuid:"4d7e4d01"},{text:"Royal Purple Vallejo - Model",colorValue:"#4b2967",uuid:"0c7c8a29"},{text:"Rucksack Tan P3 Formula",colorValue:"#b4973f",uuid:"ad3f156f"},{text:"Russ Grey Citadel - Base Layer",colorValue:"#55768a",uuid:"6299a01d"},{text:"Saddle Brown Vallejo - Model",colorValue:"#89584f",uuid:"0a5866ad"},{text:"Salmon Rose Vallejo - Model",colorValue:"#f89d87",uuid:"be75c8ef"},{text:"Sand Yellow Vallejo - Model",colorValue:"#d7bf75",uuid:"e87c5be5"},{text:"Sanguine Base P3 Formula",colorValue:"#6c160f",uuid:"ad4bdd39"},{text:"Scaly Hide Army Painter",colorValue:"#859852",uuid:"55c21f72"},{text:"Scarlet Vallejo - Model",colorValue:"#da3630",uuid:"7768dcbd"},{text:"Scorpion Green Vallejo - Game",colorValue:"#48b851",uuid:"3aa8b534"},{text:"Screamer Pink Citadel - Base Layer",colorValue:"#831740",uuid:"cbc7a70b"},{text:"Screaming Skull Citadel - Base Layer",colorValue:"#d9d8a6",uuid:"206b6ca7"},{text:"Scurvy Green Vallejo - Game",colorValue:"#09474e",uuid:"50400af2"},{text:"Silver Grey Vallejo - Model",colorValue:"#d8dfd5",uuid:"cf59980c"},{text:"Skarsnik Green Citadel - Base Layer",colorValue:"#5e9067",uuid:"c6b548ec"},{text:"Skavenblight Dinge Citadel - Base Layer",colorValue:"#4f4840",uuid:"a5369b28"},{text:"Skeleton Bone Army Painter",colorValue:"#d3c89d",uuid:"c5c18c95"},{text:"Skorne Red P3 Formula",colorValue:"#b01f24",uuid:"1281a25f"},{text:"Skrag Brown Citadel - Base Layer",colorValue:"#954b00",uuid:"243fbc19"},{text:"Sky Grey Vallejo - Model",colorValue:"#b3b6b2",uuid:"31ebbe87"},{text:"Slaanesh Grey Citadel - Base Layer",colorValue:"#8E8C97",uuid:"3401d405"},{text:"Sombre Grey Vallejo - Game",colorValue:"#4c5c7d",uuid:"4175831b"},{text:"Sotek Green Citadel - Base Layer",colorValue:"#056976",uuid:"0bd265e6"},{text:"Spaceship Exterior Army Painter",colorValue:"#cdced0",uuid:"1f02fd08"},{text:"Squig Orange Citadel - Base Layer",colorValue:"#b04d3e",uuid:"8e3948b0"},{text:"Steel Grey Vallejo - Game",colorValue:"#64889d",uuid:"968121bb"},{text:"Steel Legion Drab Citadel - Base Layer",colorValue:"#695634",uuid:"2eb6a7e9"},{text:"Stegadon Scale Green Citadel - Base Layer",colorValue:"#004261",uuid:"beb2b74e"},{text:"Stone Grey Vallejo - Model",colorValue:"#959980",uuid:"7a1099ed"},{text:"Stonewall Grey Vallejo - Game",colorValue:"#828e95",uuid:"8887ef43"},{text:"Stormvermin Fur Citadel - Base Layer",colorValue:"#7d736a",uuid:"780c5a71"},{text:"Straken Green Citadel - Base Layer",colorValue:"#6e8611",uuid:"2e36b2ba"},{text:"Sulfuric Yellow P3 Formula",colorValue:"#f0d233",uuid:"b90d5253"},{text:"Sulphide Ochre Army Painter",colorValue:"#c68512",uuid:"9a44bd10"},{text:"Sun Yellow Vallejo - Game",colorValue:"#ffcf07",uuid:"e21c729e"},{text:"Sunset Red Vallejo - Model",colorValue:"#c22c5f",uuid:"1cb6488f"},{text:"Sybarite Green Citadel - Base Layer",colorValue:"#36a062",uuid:"fc5a6cf1"},{text:"Tallarn Sand Citadel - Base Layer",colorValue:"#ab7d00",uuid:"52e7acbc"},{text:"Tan Earth Vallejo - Model",colorValue:"#9c7962",uuid:"8144f1f4"},{text:"Tan Vallejo - Game",colorValue:"#9f4746",uuid:"4b922754"},{text:"Tanned Flesh Army Painter",colorValue:"#bc745e",uuid:"03c52290"},{text:"Tau Light Ochre Citadel - Base Layer",colorValue:"#c26e02",uuid:"1f6a15cf"},{text:"Teclis Blue Citadel - Base Layer",colorValue:"#387bbf",uuid:"f6072c93"},{text:"Temple Guard Blue Citadel - Base Layer",colorValue:"#35998e",uuid:"6fcc48d9"},{text:"Terracota Vallejo - Game",colorValue:"#6b1306",uuid:"a86f98f3"},{text:"Thamar Black P3 Formula",colorValue:"#040707",uuid:"bfb800e2"},{text:"The Fang Citadel - Base Layer",colorValue:"#457479",uuid:"efc3fb13"},{text:"Thornwood Green P3 Formula",colorValue:"#65654b",uuid:"f15e8b9e"},{text:"Thousand Sons Blue Citadel - Base Layer",colorValue:"#18ABCC",uuid:"59e8f366"},{text:"Thunderhawk Blue Citadel - Base Layer",colorValue:"#417074",uuid:"87a80eda"},{text:"Toxic Mist Army Painter",colorValue:"#39c0c5",uuid:"abbd66a4"},{text:"Traitor Green P3 Formula",colorValue:"#809065",uuid:"a6311369"},{text:"Troll Claws Army Painter",colorValue:"#cb8b4e",uuid:"93589b2a"},{text:"Troll Slayer Orange Citadel - Base Layer",colorValue:"#eb641b",uuid:"afdf3448"},{text:"Trollblood Base P3 Formula",colorValue:"#13899b",uuid:"2ca359f6"},{text:"Trollblood Highlight P3 Formula",colorValue:"#bab4a3",uuid:"09780cc7"},{text:"Turquoise Vallejo - Game",colorValue:"#03676f",uuid:"1476bb09"},{text:"Turquoise Vallejo - Model",colorValue:"#008e9c",uuid:"19743a76"},{text:"Tuskgor Fur Citadel - Base Layer",colorValue:"#8e3734",uuid:"02c16f84"},{text:"Ulthuan Grey Citadel - Base Layer",colorValue:"#d2e4df",uuid:"6541024a"},{text:"Ultramarine Blue Army Painter",colorValue:"#0f4e85",uuid:"19e5154c"},{text:"Ultramarine Vallejo - Model",colorValue:"#3b5da7",uuid:"d2e9deb8"},{text:"Underbelly Blue P3 Formula",colorValue:"#c0d4da",uuid:"e236c56e"},{text:"Ungor Flesh Citadel - Base Layer",colorValue:"#dbac63",uuid:"4cc7a2ed"},{text:"Uniform Green Vallejo - Model",colorValue:"#577a38",uuid:"6c42634e"},{text:"Uniform Grey Army Painter",colorValue:"#5e6a73",uuid:"8a5ca6a3"},{text:"USA Olive Drab Vallejo - Model",colorValue:"#3b4947",uuid:"9d953732"},{text:"Ushabti Bone Citadel - Base Layer",colorValue:"#c6c180",uuid:"29c17ae2"},{text:"Vampire Red Army Painter",colorValue:"#981d34",uuid:"ec7bb2e6"},{text:"Venom Wyrm Army Painter",colorValue:"#6a653e",uuid:"ecaad133"},{text:"Verdigris Vallejo - Game",colorValue:"#b3ceca",uuid:"3342c123"},{text:"Viking Blue Army Painter",colorValue:"#00609a",uuid:"1224989e"},{text:"Violet Red Vallejo - Model",colorValue:"#6b2946",uuid:"e115a173"},{text:"Violet Vallejo - Model",colorValue:"#4b2f65",uuid:"72d9e434"},{text:"Voidshield Blue Army Painter",colorValue:"#2ca2d9",uuid:"5d01f14c"},{text:"Waaagh! Flesh Citadel - Base Layer",colorValue:"#275627",uuid:"72d07017"},{text:"Warboss Green Citadel - Base Layer",colorValue:"#3b7d54",uuid:"3b34e712"},{text:"Warlord Purple Vallejo - Game",colorValue:"#7d1a44",uuid:"33b3f920"},{text:"Warpfiend Grey Citadel - Base Layer",colorValue:"#6B6A74",uuid:"d30e041c"},{text:"Warpstone Glow Citadel - Base Layer",colorValue:"#257326",uuid:"839b1779"},{text:"Wasteland Soil Army Painter",colorValue:"#774b58",uuid:"1df07c68"},{text:"Wazdakka Red Citadel - Base Layer",colorValue:"#8d0d01",uuid:"80231d89"},{text:"Werewolf Fur Army Painter",colorValue:"#785e4e",uuid:"a5081206"},{text:"White Scar Citadel - Base Layer",colorValue:"#FFFFFF",uuid:"d58a4e24"},{text:"White Vallejo - Model",colorValue:"#ffffff",uuid:"55b5f296"},{text:"Wild Rider Red Citadel - Base Layer",colorValue:"#e21516",uuid:"c398213a"},{text:"Witch Brew Army Painter",colorValue:"#92963e",uuid:"13d58a77"},{text:"Wizards Orb Army Painter",colorValue:"#00726a",uuid:"9f18d02b"},{text:"Wolf Grey Army Painter",colorValue:"#5b8093",uuid:"aebc64f8"},{text:"Wolf Grey Vallejo - Game",colorValue:"#90a2bc",uuid:"b522fd1f"},{text:"Wurm Green P3 Formula",colorValue:"#8fbe40",uuid:"c61c0cc6"},{text:"Xereus Purple Citadel - Base Layer",colorValue:"#4b205c",uuid:"77971691"},{text:"XV-88 Citadel - Base Layer",colorValue:"#7b4d1c",uuid:"9bdbd496"},{text:"Yellow Olive Vallejo - Model",colorValue:"#26392e",uuid:"29427975"},{text:"Yriel Yellow Citadel - Base Layer",colorValue:"#ffda00",uuid:"0e21969b"},{text:"Zamesi Desert Citadel - Base Layer",colorValue:"#e0a503",uuid:"99892c5f"},{text:"Zandri Dust Citadel - Base Layer",colorValue:"#a89758",uuid:"8dc755fe"}];function isEmpty(r){return r===0?!1:Array.isArray(r)&&r.length===0?!0:!r}function not(r){return(...e)=>!r(...e)}function includes(r,e){return r===void 0&&(r="undefined"),r===null&&(r="null"),r===!1&&(r="false"),r.toString().toLowerCase().indexOf(e.trim())!==-1}function filterOptions(r,e,t,n){return e?r.filter(a=>includes(n(a,t),e)).sort((a,s)=>n(a,t).length-n(s,t).length):r}function stripGroups(r){return r.filter(e=>!e.$isLabel)}function flattenOptions(r,e){return t=>t.reduce((n,a)=>a[r]&&a[r].length?(n.push({$groupLabel:a[e],$isLabel:!0}),n.concat(a[r])):n,[])}function filterGroups(r,e,t,n,a){return s=>s.map(c=>{if(!c[t])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const f=filterOptions(c[t],r,e,a);return f.length?{[n]:c[n],[t]:f}:[]})}const flow=(...r)=>e=>r.reduce((t,n)=>n(t),e),multiselectMixin={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(r,e){return isEmpty(r)?"":e?r[e]:r}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const r=this.search||"",e=r.toLowerCase().trim();let t=this.options.concat();return this.internalSearch?t=this.groupValues?this.filterAndFlat(t,e,this.label):filterOptions(t,e,this.label,this.customLabel):t=this.groupValues?flattenOptions(this.groupValues,this.groupLabel)(t):t,t=this.hideSelected?t.filter(not(this.isSelected)):t,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?t.push({isTag:!0,label:r}):t.unshift({isTag:!0,label:r})),t.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(r=>r[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(r,e,t){return flow(filterGroups(e,t,this.groupValues,this.groupLabel,this.customLabel),flattenOptions(this.groupValues,this.groupLabel))(r)},flatAndStrip(r){return flow(flattenOptions(this.groupValues,this.groupLabel),stripGroups)(r)},updateSearch(r){this.search=r},isExistingOption(r){return this.options?this.optionKeys.indexOf(r)>-1:!1},isSelected(r){const e=this.trackBy?r[this.trackBy]:r;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(r){return!!r.$isDisabled},getOptionLabel(r){if(isEmpty(r))return"";if(r.isTag)return r.label;if(r.$isLabel)return r.$groupLabel;const e=this.customLabel(r,this.label);return isEmpty(e)?"":e},select(r,e){if(r.$isLabel&&this.groupSelect){this.selectGroup(r);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||r.$isDisabled||r.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(r.isTag)this.$emit("tag",r.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(r)){e!=="Tab"&&this.removeElement(r);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([r])):this.$emit("update:modelValue",r),this.$emit("select",r,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(r){const e=this.options.find(t=>t[this.groupLabel]===r.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const t=this.internalValue.filter(n=>e[this.groupValues].indexOf(n)===-1);this.$emit("update:modelValue",t)}else{let t=e[this.groupValues].filter(n=>!(this.isOptionDisabled(n)||this.isSelected(n)));this.max&&t.splice(this.max-this.internalValue.length),this.$emit("select",t,this.id),this.$emit("update:modelValue",this.internalValue.concat(t))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(r){return r[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(r){return r[this.groupValues].every(this.isOptionDisabled)},removeElement(r,e=!0){if(this.disabled||r.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const t=typeof r=="object"?this.valueKeys.indexOf(r[this.trackBy]):this.valueKeys.indexOf(r);if(this.multiple){const n=this.internalValue.slice(0,t).concat(this.internalValue.slice(t+1));this.$emit("update:modelValue",n)}else this.$emit("update:modelValue",null);this.$emit("remove",r,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const r=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>r||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(r-40,this.maxHeight))}}},pointerMixin={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40},onPointerChange:{type:Function,default:null}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(r,e){return{"multiselect__option--highlight":r===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(r,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);return t&&!this.wholeGroupDisabled(t)?["multiselect__option--group",{"multiselect__option--highlight":r===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(t)}]:"multiselect__option--disabled"},addPointerElement({key:r}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],r),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(r){this.pointer=r,this.pointerDirty=!0,this.onPointerChange&&typeof this.onPointerChange=="function"&&this.onPointerChange(this)}}},Multiselect_vue_vue_type_style_index_0_lang="",_export_sfc=(r,e)=>{const t=r.__vccOpts||r;for(const[n,a]of e)t[n]=a;return t},_sfc_main$2={name:"vue-multiselect",mixins:[multiselectMixin,pointerMixin],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:r=>`and ${r} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}},_hoisted_1$2=["tabindex","aria-owns"],_hoisted_2$1={ref:"tags",class:"multiselect__tags"},_hoisted_3$1={class:"multiselect__tags-wrap"},_hoisted_4$1=["textContent"],_hoisted_5$1=["onKeypress","onMousedown"],_hoisted_6$1=["textContent"],_hoisted_7$1={class:"multiselect__spinner"},_hoisted_8$1=["name","id","placeholder","value","disabled","tabindex","aria-controls"],_hoisted_9$1=["id"],_hoisted_10$1={key:0},_hoisted_11$1={class:"multiselect__option"},_hoisted_12$1=["id","role"],_hoisted_13$1=["onClick","onMouseenter","data-select","data-selected","data-deselect"],_hoisted_14$1=["data-select","data-deselect","onMouseenter","onMousedown"],_hoisted_15$1={class:"multiselect__option"},_hoisted_16$1={class:"multiselect__option"};function _sfc_render(r,e,t,n,a,s){return openBlock(),createElementBlock("div",{tabindex:r.searchable?-1:t.tabindex,class:normalizeClass([{"multiselect--active":r.isOpen,"multiselect--disabled":t.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"]),onFocus:e[13]||(e[13]=c=>r.activate()),onBlur:e[14]||(e[14]=c=>r.searchable?!1:r.deactivate()),onKeydown:[e[15]||(e[15]=withKeys(withModifiers(c=>r.pointerForward(),["self","prevent"]),["down"])),e[16]||(e[16]=withKeys(withModifiers(c=>r.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[17]||(e[17]=withKeys(withModifiers(c=>r.addPointerElement(c),["stop","self"]),["enter","tab"])),onKeyup:e[18]||(e[18]=withKeys(c=>r.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+r.id},[renderSlot(r.$slots,"caret",{toggle:r.toggle},()=>[createBaseVNode("div",{onMousedown:e[0]||(e[0]=withModifiers(c=>r.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),renderSlot(r.$slots,"clear",{search:r.search}),createBaseVNode("div",_hoisted_2$1,[renderSlot(r.$slots,"selection",{search:r.search,remove:r.removeElement,values:s.visibleValues,isOpen:r.isOpen},()=>[withDirectives(createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.visibleValues,(c,f)=>renderSlot(r.$slots,"tag",{option:c,search:r.search,remove:r.removeElement},()=>[(openBlock(),createElementBlock("span",{class:"multiselect__tag",key:f},[createBaseVNode("span",{textContent:toDisplayString(r.getOptionLabel(c))},null,8,_hoisted_4$1),createBaseVNode("i",{tabindex:"1",onKeypress:withKeys(withModifiers(b=>r.removeElement(c),["prevent"]),["enter"]),onMousedown:withModifiers(b=>r.removeElement(c),["prevent"]),class:"multiselect__tag-icon"},null,40,_hoisted_5$1)]))])),256))],512),[[vShow,s.visibleValues.length>0]]),r.internalValue&&r.internalValue.length>t.limit?renderSlot(r.$slots,"limit",{key:0},()=>[createBaseVNode("strong",{class:"multiselect__strong",textContent:toDisplayString(t.limitText(r.internalValue.length-t.limit))},null,8,_hoisted_6$1)]):createCommentVNode("",!0)]),createVNode(Transition,{name:"multiselect__loading"},{default:withCtx(()=>[renderSlot(r.$slots,"loading",{},()=>[withDirectives(createBaseVNode("div",_hoisted_7$1,null,512),[[vShow,t.loading]])])]),_:3}),r.searchable?(openBlock(),createElementBlock("input",{key:0,ref:"search",name:t.name,id:r.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:r.placeholder,style:normalizeStyle(s.inputStyle),value:r.search,disabled:t.disabled,tabindex:t.tabindex,onInput:e[1]||(e[1]=c=>r.updateSearch(c.target.value)),onFocus:e[2]||(e[2]=withModifiers(c=>r.activate(),["prevent"])),onBlur:e[3]||(e[3]=withModifiers(c=>r.deactivate(),["prevent"])),onKeyup:e[4]||(e[4]=withKeys(c=>r.deactivate(),["esc"])),onKeydown:[e[5]||(e[5]=withKeys(withModifiers(c=>r.pointerForward(),["prevent"]),["down"])),e[6]||(e[6]=withKeys(withModifiers(c=>r.pointerBackward(),["prevent"]),["up"])),e[8]||(e[8]=withKeys(withModifiers(c=>r.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[7]||(e[7]=withKeys(withModifiers(c=>r.addPointerElement(c),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+r.id},null,44,_hoisted_8$1)):createCommentVNode("",!0),s.isSingleLabelVisible?(openBlock(),createElementBlock("span",{key:1,class:"multiselect__single",onMousedown:e[9]||(e[9]=withModifiers((...c)=>r.toggle&&r.toggle(...c),["prevent"]))},[renderSlot(r.$slots,"singleLabel",{option:s.singleValue},()=>[createTextVNode(toDisplayString(r.currentOptionLabel),1)])],32)):createCommentVNode("",!0),s.isPlaceholderVisible?(openBlock(),createElementBlock("span",{key:2,class:"multiselect__placeholder",onMousedown:e[10]||(e[10]=withModifiers((...c)=>r.toggle&&r.toggle(...c),["prevent"]))},[renderSlot(r.$slots,"placeholder",{},()=>[createTextVNode(toDisplayString(r.placeholder),1)])],32)):createCommentVNode("",!0)],512),createVNode(Transition,{name:"multiselect"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:"multiselect__content-wrapper",onFocus:e[11]||(e[11]=(...c)=>r.activate&&r.activate(...c)),tabindex:"-1",onMousedown:e[12]||(e[12]=withModifiers(()=>{},["prevent"])),style:normalizeStyle({maxHeight:r.optimizedHeight+"px"}),ref:"list"},[createBaseVNode("ul",{class:"multiselect__content",style:normalizeStyle(s.contentStyle),role:"listbox",id:"listbox-"+r.id},[renderSlot(r.$slots,"beforeList"),r.multiple&&r.max===r.internalValue.length?(openBlock(),createElementBlock("li",_hoisted_10$1,[createBaseVNode("span",_hoisted_11$1,[renderSlot(r.$slots,"maxElements",{},()=>[createTextVNode("Maximum of "+toDisplayString(r.max)+" options selected. First remove a selected option to select another.",1)])])])):createCommentVNode("",!0),!r.max||r.internalValue.length<r.max?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(r.filteredOptions,(c,f)=>(openBlock(),createElementBlock("li",{class:"multiselect__element",key:f,id:r.id+"-"+f,role:c&&(c.$isLabel||c.$isDisabled)?null:"option"},[c&&(c.$isLabel||c.$isDisabled)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([r.optionHighlight(f,c),"multiselect__option"]),onClick:withModifiers(b=>r.select(c),["stop"]),onMouseenter:withModifiers(b=>r.pointerSet(f),["self"]),"data-select":c&&c.isTag?r.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[renderSlot(r.$slots,"option",{option:c,search:r.search,index:f},()=>[createBaseVNode("span",null,toDisplayString(r.getOptionLabel(c)),1)])],42,_hoisted_13$1)),c&&(c.$isLabel||c.$isDisabled)?(openBlock(),createElementBlock("span",{key:1,"data-select":r.groupSelect&&s.selectGroupLabelText,"data-deselect":r.groupSelect&&s.deselectGroupLabelText,class:normalizeClass([r.groupHighlight(f,c),"multiselect__option"]),onMouseenter:withModifiers(b=>r.groupSelect&&r.pointerSet(f),["self"]),onMousedown:withModifiers(b=>r.selectGroup(c),["prevent"])},[renderSlot(r.$slots,"option",{option:c,search:r.search,index:f},()=>[createBaseVNode("span",null,toDisplayString(r.getOptionLabel(c)),1)])],42,_hoisted_14$1)):createCommentVNode("",!0)],8,_hoisted_12$1))),128)):createCommentVNode("",!0),withDirectives(createBaseVNode("li",null,[createBaseVNode("span",_hoisted_15$1,[renderSlot(r.$slots,"noResult",{search:r.search},()=>[createTextVNode("No elements found. Consider changing the search query.")])])],512),[[vShow,t.showNoResults&&r.filteredOptions.length===0&&r.search&&!t.loading]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("span",_hoisted_16$1,[renderSlot(r.$slots,"noOptions",{},()=>[createTextVNode("List is empty.")])])],512),[[vShow,t.showNoOptions&&(r.options.length===0||s.hasOptionGroup===!0&&r.filteredOptions.length===0)&&!r.search&&!t.loading]]),renderSlot(r.$slots,"afterList")],12,_hoisted_9$1)],36),[[vShow,r.isOpen]])]),_:3})],42,_hoisted_1$2)}const Multiselect=_export_sfc(_sfc_main$2,[["render",_sfc_render]]),vueMultiselect="",svgs$2=[{layer:"main",path:"/icons/marine_simple/complete_filled.svg"},{layer:"highlight",path:"/icons/marine_simple/highlight_filled.svg"},{layer:"shadow",path:"/icons/marine_simple/shadow_filled.svg"},{layer:"edge",path:"/icons/marine_simple/complete.svg"}],basicScheme$2=({transparent:r,perfectWhite:e},t)=>({edge:{color:e,opacity:t},main:{color:r,opacity:t},highlight:{color:r,opacity:t},shadow:{color:r,opacity:t}}),marineSimple={name:"simple marine",svgs:svgs$2,basicScheme:basicScheme$2},svgs$1=[{layer:"base",path:"/icons/marine_complex/mask_base.svg"},{layer:"armour",path:"/icons/marine_complex/mask_armour.svg"},{layer:"armour highlight",path:"/icons/marine_complex/mask_armour_highlight.svg"},{layer:"armour shadow",path:"/icons/marine_complex/mask_armour_shadow.svg"},{layer:"pauldron",path:"/icons/marine_complex/mask_pauldron.svg"},{layer:"pauldron trim",path:"/icons/marine_complex/mask_pauldron_trim.svg"},{layer:"pauldron highlight",path:"/icons/marine_complex/mask_pauldron_highlight.svg"},{layer:"pauldron trim highlight",path:"/icons/marine_complex/mask_pauldron_trim_highlight.svg"},{layer:"eyes",path:"/icons/marine_complex/mask_eyes.svg"},{layer:"eyes glow",path:"/icons/marine_complex/mask_eyes_glow.svg"},{layer:"helmet details",path:"/icons/marine_complex/mask_helmet_details.svg"},{layer:"aquila",path:"/icons/marine_complex/mask_aquila.svg"},{layer:"aquila highlight",path:"/icons/marine_complex/mask_aquila_highlight.svg"},{layer:"seals",path:"/icons/marine_complex/mask_seals.svg"},{layer:"seals paper",path:"/icons/marine_complex/mask_seals_paper.svg"},{layer:"gun",path:"/icons/marine_complex/mask_gun.svg"},{layer:"edge",path:"/icons/marine_complex/edge.svg"},{layer:"edge highlight",path:"/icons/marine_complex/edge_highlight.svg"}],basicScheme$1=({transparent:r,perfectWhite:e},t)=>({edge:{color:e,opacity:t},"edge highlight":{color:r,opacity:t},armour:{color:r,opacity:t},pauldron:{color:r,opacity:t},"pauldron trim":{color:r,opacity:t},"pauldron highlight":{color:r,opacity:t},"pauldron trim highlight":{color:r,opacity:t},"armour highlight":{color:r,opacity:t},"armour shadow":{color:r,opacity:t},gun:{color:r,opacity:t},aquila:{color:r,opacity:t},"aquila highlight":{color:r,opacity:t},eyes:{color:r,opacity:t},"eyes glow":{color:r,opacity:t},"helmet details":{color:r,opacity:t},seals:{color:r,opacity:t},"seals paper":{color:r,opacity:t},base:{color:r,opacity:t}}),marineComplex={name:"complex marine",svgs:svgs$1,basicScheme:basicScheme$1},svgs=[],basicScheme=(r,e)=>({}),fromImage={name:"from Image",svgs,basicScheme};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var a=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return r[n]}})}),t}function isObject$2(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var isObject_1=isObject$2,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal||freeSelf||Function("return this")(),_root=root$2,root$1=_root,now$1=function(){return root$1.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(r){for(var e=r.length;e--&&reWhitespace.test(r.charAt(e)););return e}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(r){return r&&r.slice(0,trimmedEndIndex(r)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(r){var e=hasOwnProperty.call(r,symToStringTag$1),t=r[symToStringTag$1];try{r[symToStringTag$1]=void 0;var n=!0}catch{}var a=nativeObjectToString$1.call(r);return n&&(e?r[symToStringTag$1]=t:delete r[symToStringTag$1]),a}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$2(r){return nativeObjectToString.call(r)}var _objectToString=objectToString$2,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$1(r){return r==null?r===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(r)?getRawTag(r):objectToString$1(r)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(r){return r!=null&&typeof r=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(r){return typeof r=="symbol"||isObjectLike(r)&&baseGetTag(r)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(r){if(typeof r=="number")return r;if(isSymbol(r))return NAN;if(isObject$1(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=isObject$1(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=baseTrim(r);var t=reIsBinary.test(r);return t||reIsOctal.test(r)?freeParseInt(r.slice(2),t?2:8):reIsBadHex.test(r)?NAN:+r}var toNumber_1=toNumber$1,isObject=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(r,e,t){var n,a,s,c,f,b,g=0,m=!1,l=!1,o=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);e=toNumber(e)||0,isObject(t)&&(m=!!t.leading,l="maxWait"in t,s=l?nativeMax(toNumber(t.maxWait)||0,e):s,o="trailing"in t?!!t.trailing:o);function u(P){var k=n,M=a;return n=a=void 0,g=P,c=r.apply(M,k),c}function d(P){return g=P,f=setTimeout(_,e),m?u(P):c}function y(P){var k=P-b,M=P-g,F=e-k;return l?nativeMin(F,s-M):F}function w(P){var k=P-b,M=P-g;return b===void 0||k>=e||k<0||l&&M>=s}function _(){var P=now();if(w(P))return T(P);f=setTimeout(_,y(P))}function T(P){return f=void 0,o&&n?u(P):(n=a=void 0,c)}function S(){f!==void 0&&clearTimeout(f),g=0,n=b=a=f=void 0}function E(){return f===void 0?c:T(now())}function A(){var P=now(),k=w(P);if(n=arguments,a=this,b=P,k){if(f===void 0)return d(b);if(l)return clearTimeout(f),f=setTimeout(_,e),u(b)}return f===void 0&&(f=setTimeout(_,e)),c}return A.cancel=S,A.flush=E,A}var debounce_1=debounce;const debounce$1=getDefaultExportFromCjs(debounce_1),bitMethods={getBit(r){return this.data[getSlot(r)]&1<<getShift(r)?1:0},setBit(r){this.data[getSlot(r)]|=1<<getShift(r)},clearBit(r){this.data[getSlot(r)]&=~(1<<getShift(r))},toggleBit(r){this.data[getSlot(r)]^=1<<getShift(r)},getBitXY(r,e){return r>=this.width||e>=this.height?0:this.getBit(e*this.width+r)},setBitXY(r,e){this.setBit(e*this.width+r)},clearBitXY(r,e){this.clearBit(e*this.width+r)},toggleBitXY(r,e){this.toggleBit(e*this.width+r)}};function getSlot(r){return r>>3}function getShift(r){return 7-(r&7)}function setBitMethods(r){for(const e in bitMethods)r.prototype[e]=bitMethods[e]}function checkProcessable(r,e={}){let{bitDepth:t,alpha:n,colorModel:a,components:s,channels:c}=e;if(typeof r!="string"||r.length===0)throw new TypeError("processName must be a string");if(t&&(Array.isArray(t)||(t=[t]),!t.includes(this.bitDepth)))throw new TypeError(`The process: ${r} can only be applied if bit depth is in: ${t}`);if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.alpha)))throw new TypeError(`The process: ${r} can only be applied if alpha is in: ${n}`);if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.colorModel)))throw new TypeError(`The process: ${r} can only be applied if color model is in: ${a}`);if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.components))){let f=`The process: ${r} can only be applied if the number of components is in: ${s}`;throw s.length===1&&s[0]===1?new TypeError(`${f}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(f)}if(c&&(Array.isArray(c)||(c=[c]),!c.includes(this.channels)))throw new TypeError(`The process: ${r} can only be applied if the number of channels is in: ${c}`)}function createBlob(r,e){r=r||[],e=e||{},typeof e=="string"&&(e={type:e});try{return new Blob(r,e)}catch(s){if(s.name!=="TypeError")throw s;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,n=new t,a=0;a<r.length;a+=1)n.append(r[a]);return n.getBlob(e.type)}}function dataURLToBlob(r){var e=r.match(/data:([^;]+)/)[1],t=r.replace(/^[^,]+,/,""),n=binaryStringToArrayBuffer(atob(t));return createBlob([n],{type:e})}function canvasToBlob(r,e,t){return typeof r.toBlob=="function"?new Promise(function(n){r.toBlob(n,e,t)}):Promise.resolve(dataURLToBlob(r.toDataURL(e,t)))}function binaryStringToArrayBuffer(r){for(var e=r.length,t=new ArrayBuffer(e),n=new Uint8Array(t),a=-1;++a<e;)n[a]=r.charCodeAt(a);return t}(function(r){if(r.TextEncoder&&r.TextDecoder)return!1;function e(n="utf-8"){if(n!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${n}') is invalid.`)}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(n,a={stream:!1}){if(a.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let s=0;const c=n.length;let f=0,b=Math.max(32,c+(c>>1)+7),g=new Uint8Array(b>>3<<3);for(;s<c;){let m=n.charCodeAt(s++);if(m>=55296&&m<=56319){if(s<c){const l=n.charCodeAt(s);(l&64512)===56320&&(++s,m=((m&1023)<<10)+(l&1023)+65536)}if(m>=55296&&m<=56319)continue}if(f+4>g.length){b+=8,b*=1+s/n.length*2,b=b>>3<<3;const l=new Uint8Array(b);l.set(g),g=l}if(m&4294967168)if(!(m&4294965248))g[f++]=m>>6&31|192;else if(!(m&4294901760))g[f++]=m>>12&15|224,g[f++]=m>>6&63|128;else if(!(m&4292870144))g[f++]=m>>18&7|240,g[f++]=m>>12&63|128,g[f++]=m>>6&63|128;else continue;else{g[f++]=m;continue}g[f++]=m&63|128}return g.slice(0,f)};function t(n="utf-8",a={fatal:!1}){if(n!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${n}') is invalid.`);if(a.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(t.prototype,"fatal",{value:!1}),Object.defineProperty(t.prototype,"ignoreBOM",{value:!1}),t.prototype.decode=function(n,a={stream:!1}){if(a.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const s=new Uint8Array(n);let c=0;const f=s.length,b=[];for(;c<f;){const g=s[c++];if(g===0)break;if(!(g&128))b.push(g);else if((g&224)===192){const m=s[c++]&63;b.push((g&31)<<6|m)}else if((g&240)===224){const m=s[c++]&63,l=s[c++]&63;b.push((g&31)<<12|m<<6|l)}else if((g&248)===240){const m=s[c++]&63,l=s[c++]&63,o=s[c++]&63;let u=(g&7)<<18|m<<12|l<<6|o;u>65535&&(u-=65536,b.push(u>>>10&1023|55296),u=56320|u&1023),b.push(u)}}return String.fromCharCode.apply(null,b)},r.TextEncoder=e,r.TextDecoder=t})(typeof window<"u"?window:typeof self<"u"?self:globalThis);function decode$5(r,e="utf8"){return new TextDecoder(e).decode(r)}const encoder$1=new TextEncoder;function encode$3(r){return encoder$1.encode(r)}const defaultByteLength$1=1024*8,hostBigEndian=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};let IOBuffer$4=class _l{constructor(e=defaultByteLength$1,t={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,s=e.byteLength-a;let c=a;(ArrayBuffer.isView(e)||e instanceof _l)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=typedArrays[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===hostBigEndian&&t!=="uint8"&&t!=="int8"){const f=new Uint8Array(this.buffer.slice(a,a+n));f.reverse();const b=new typedArrays[t](f.buffer);return this.offset+=n,b.reverse(),b}const c=new typedArrays[t](s);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return decode$5(this.readBytes(e))}decodeText(e=1,t="utf-8"){return decode$5(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(encode$3(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};const IOBuffer$5=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer:IOBuffer$4},Symbol.toStringTag,{value:"Module"})),require$$0$4=getAugmentedNamespace(IOBuffer$5);var constants$4={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}};const{IOBuffer:IOBuffer$3}=require$$0$4,constants$3=constants$4,tableLeft=[];for(let r=0;r<=8;r++)tableLeft.push(255<<r);class BMPEncoder extends IOBuffer$3{constructor(e){if(e.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!e.height||!e.width)throw new Error("ImageData width and height are required");super(e.data),this.width=e.width,this.height=e.height,this.bitDepth=e.bitDepth,this.channels=e.channels,this.components=e.components}encode(){this.encoded=new IOBuffer$3,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const e=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(e),this.encoded.toArray()}writePixelArray(){let e=this.encoded;const t=Math.floor((this.bitDepth*this.width+31)/32)*4,n=Math.ceil(this.bitDepth*this.width/8),a=t-n,s=this.bitDepth*this.width%8,c=s===0?0:8-s,f=t*this.height;let b,g,m=0,l=0,o=8;e.mark(),g=this.readUint8();for(let u=this.height-1;u>=0;u--){const d=u===0;e.reset(),e.skip(u*t);for(let y=0;y<n;y++){const w=y===n-1;l<=c&&w?(e.writeByte(g<<l),(c===0||c===l)&&!d&&(b=g,g=this.readByte())):l===0?(b=g,g=this.readUint8(),e.writeByte(b)):(b=g,g=this.readUint8(),e.writeByte(b<<l&tableLeft[l]|g>>o)),w&&(m+=s||0,e.skip(a),l=m%8,o=8-l)}}t>n&&(e.reset(),e.skip(f-1),e.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(e){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(e)}writeBitmapV5Header(){const t=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(constants$3.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(t).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(constants$3.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(constants$3.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}var BMPEncoder_1=BMPEncoder;const Encoder=BMPEncoder_1;var encode$2=function(e){return new Encoder(e).encode()};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(r){let e=r.length;for(;--e>=0;)r[e]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(r,e,t,n,a){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=r&&r.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}const d_code=r=>r<256?_dist_code[r]:_dist_code[256+(r>>>7)],put_short=(r,e)=>{r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255},send_bits=(r,e,t)=>{r.bi_valid>Buf_size-t?(r.bi_buf|=e<<r.bi_valid&65535,put_short(r,r.bi_buf),r.bi_buf=e>>Buf_size-r.bi_valid,r.bi_valid+=t-Buf_size):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)},send_code=(r,e,t)=>{send_bits(r,t[e*2],t[e*2+1])},bi_reverse=(r,e)=>{let t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1},bi_flush=r=>{r.bi_valid===16?(put_short(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},gen_bitlen=(r,e)=>{const t=e.dyn_tree,n=e.max_code,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,b=e.stat_desc.max_length;let g,m,l,o,u,d,y=0;for(o=0;o<=MAX_BITS$1;o++)r.bl_count[o]=0;for(t[r.heap[r.heap_max]*2+1]=0,g=r.heap_max+1;g<HEAP_SIZE$1;g++)m=r.heap[g],o=t[t[m*2+1]*2+1]+1,o>b&&(o=b,y++),t[m*2+1]=o,!(m>n)&&(r.bl_count[o]++,u=0,m>=f&&(u=c[m-f]),d=t[m*2],r.opt_len+=d*(o+u),s&&(r.static_len+=d*(a[m*2+1]+u)));if(y!==0){do{for(o=b-1;r.bl_count[o]===0;)o--;r.bl_count[o]--,r.bl_count[o+1]+=2,r.bl_count[b]--,y-=2}while(y>0);for(o=b;o!==0;o--)for(m=r.bl_count[o];m!==0;)l=r.heap[--g],!(l>n)&&(t[l*2+1]!==o&&(r.opt_len+=(o-t[l*2+1])*t[l*2],t[l*2+1]=o),m--)}},gen_codes=(r,e,t)=>{const n=new Array(MAX_BITS$1+1);let a=0,s,c;for(s=1;s<=MAX_BITS$1;s++)a=a+t[s-1]<<1,n[s]=a;for(c=0;c<=e;c++){let f=r[c*2+1];f!==0&&(r[c*2]=bi_reverse(n[f]++,f))}},tr_static_init=()=>{let r,e,t,n,a;const s=new Array(MAX_BITS$1+1);for(t=0,n=0;n<LENGTH_CODES$1-1;n++)for(base_length[n]=t,r=0;r<1<<extra_lbits[n];r++)_length_code[t++]=n;for(_length_code[t-1]=n,a=0,n=0;n<16;n++)for(base_dist[n]=a,r=0;r<1<<extra_dbits[n];r++)_dist_code[a++]=n;for(a>>=7;n<D_CODES$1;n++)for(base_dist[n]=a<<7,r=0;r<1<<extra_dbits[n]-7;r++)_dist_code[256+a++]=n;for(e=0;e<=MAX_BITS$1;e++)s[e]=0;for(r=0;r<=143;)static_ltree[r*2+1]=8,r++,s[8]++;for(;r<=255;)static_ltree[r*2+1]=9,r++,s[9]++;for(;r<=279;)static_ltree[r*2+1]=7,r++,s[7]++;for(;r<=287;)static_ltree[r*2+1]=8,r++,s[8]++;for(gen_codes(static_ltree,L_CODES$1+1,s),r=0;r<D_CODES$1;r++)static_dtree[r*2+1]=5,static_dtree[r*2]=bi_reverse(r,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=r=>{let e;for(e=0;e<L_CODES$1;e++)r.dyn_ltree[e*2]=0;for(e=0;e<D_CODES$1;e++)r.dyn_dtree[e*2]=0;for(e=0;e<BL_CODES$1;e++)r.bl_tree[e*2]=0;r.dyn_ltree[END_BLOCK*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},bi_windup=r=>{r.bi_valid>8?put_short(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},smaller=(r,e,t,n)=>{const a=e*2,s=t*2;return r[a]<r[s]||r[a]===r[s]&&n[e]<=n[t]},pqdownheap=(r,e,t)=>{const n=r.heap[t];let a=t<<1;for(;a<=r.heap_len&&(a<r.heap_len&&smaller(e,r.heap[a+1],r.heap[a],r.depth)&&a++,!smaller(e,n,r.heap[a],r.depth));)r.heap[t]=r.heap[a],t=a,a<<=1;r.heap[t]=n},compress_block=(r,e,t)=>{let n,a,s=0,c,f;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+s++]&255,n+=(r.pending_buf[r.sym_buf+s++]&255)<<8,a=r.pending_buf[r.sym_buf+s++],n===0?send_code(r,a,e):(c=_length_code[a],send_code(r,c+LITERALS$1+1,e),f=extra_lbits[c],f!==0&&(a-=base_length[c],send_bits(r,a,f)),n--,c=d_code(n),send_code(r,c,t),f=extra_dbits[c],f!==0&&(n-=base_dist[c],send_bits(r,n,f)));while(s<r.sym_next);send_code(r,END_BLOCK,e)},build_tree=(r,e)=>{const t=e.dyn_tree,n=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.elems;let c,f,b=-1,g;for(r.heap_len=0,r.heap_max=HEAP_SIZE$1,c=0;c<s;c++)t[c*2]!==0?(r.heap[++r.heap_len]=b=c,r.depth[c]=0):t[c*2+1]=0;for(;r.heap_len<2;)g=r.heap[++r.heap_len]=b<2?++b:0,t[g*2]=1,r.depth[g]=0,r.opt_len--,a&&(r.static_len-=n[g*2+1]);for(e.max_code=b,c=r.heap_len>>1;c>=1;c--)pqdownheap(r,t,c);g=s;do c=r.heap[1],r.heap[1]=r.heap[r.heap_len--],pqdownheap(r,t,1),f=r.heap[1],r.heap[--r.heap_max]=c,r.heap[--r.heap_max]=f,t[g*2]=t[c*2]+t[f*2],r.depth[g]=(r.depth[c]>=r.depth[f]?r.depth[c]:r.depth[f])+1,t[c*2+1]=t[f*2+1]=g,r.heap[1]=g++,pqdownheap(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],gen_bitlen(r,e),gen_codes(t,b,r.bl_count)},scan_tree=(r,e,t)=>{let n,a=-1,s,c=e[0*2+1],f=0,b=7,g=4;for(c===0&&(b=138,g=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=c,c=e[(n+1)*2+1],!(++f<b&&s===c)&&(f<g?r.bl_tree[s*2]+=f:s!==0?(s!==a&&r.bl_tree[s*2]++,r.bl_tree[REP_3_6*2]++):f<=10?r.bl_tree[REPZ_3_10*2]++:r.bl_tree[REPZ_11_138*2]++,f=0,a=s,c===0?(b=138,g=3):s===c?(b=6,g=3):(b=7,g=4))},send_tree=(r,e,t)=>{let n,a=-1,s,c=e[0*2+1],f=0,b=7,g=4;for(c===0&&(b=138,g=3),n=0;n<=t;n++)if(s=c,c=e[(n+1)*2+1],!(++f<b&&s===c)){if(f<g)do send_code(r,s,r.bl_tree);while(--f!==0);else s!==0?(s!==a&&(send_code(r,s,r.bl_tree),f--),send_code(r,REP_3_6,r.bl_tree),send_bits(r,f-3,2)):f<=10?(send_code(r,REPZ_3_10,r.bl_tree),send_bits(r,f-3,3)):(send_code(r,REPZ_11_138,r.bl_tree),send_bits(r,f-11,7));f=0,a=s,c===0?(b=138,g=3):s===c?(b=6,g=3):(b=7,g=4)}},build_bl_tree=r=>{let e;for(scan_tree(r,r.dyn_ltree,r.l_desc.max_code),scan_tree(r,r.dyn_dtree,r.d_desc.max_code),build_tree(r,r.bl_desc),e=BL_CODES$1-1;e>=3&&r.bl_tree[bl_order[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e},send_all_trees=(r,e,t,n)=>{let a;for(send_bits(r,e-257,5),send_bits(r,t-1,5),send_bits(r,n-4,4),a=0;a<n;a++)send_bits(r,r.bl_tree[bl_order[a]*2+1],3);send_tree(r,r.dyn_ltree,e-1),send_tree(r,r.dyn_dtree,t-1)},detect_data_type=r=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return Z_BINARY;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return Z_TEXT;for(t=32;t<LITERALS$1;t++)if(r.dyn_ltree[t*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=r=>{static_init_done||(tr_static_init(),static_init_done=!0),r.l_desc=new TreeDesc(r.dyn_ltree,static_l_desc),r.d_desc=new TreeDesc(r.dyn_dtree,static_d_desc),r.bl_desc=new TreeDesc(r.bl_tree,static_bl_desc),r.bi_buf=0,r.bi_valid=0,init_block(r)},_tr_stored_block$1=(r,e,t,n)=>{send_bits(r,(STORED_BLOCK<<1)+(n?1:0),3),bi_windup(r),put_short(r,t),put_short(r,~t),t&&r.pending_buf.set(r.window.subarray(e,e+t),r.pending),r.pending+=t},_tr_align$1=r=>{send_bits(r,STATIC_TREES<<1,3),send_code(r,END_BLOCK,static_ltree),bi_flush(r)},_tr_flush_block$1=(r,e,t,n)=>{let a,s,c=0;r.level>0?(r.strm.data_type===Z_UNKNOWN$1&&(r.strm.data_type=detect_data_type(r)),build_tree(r,r.l_desc),build_tree(r,r.d_desc),c=build_bl_tree(r),a=r.opt_len+3+7>>>3,s=r.static_len+3+7>>>3,s<=a&&(a=s)):a=s=t+5,t+4<=a&&e!==-1?_tr_stored_block$1(r,e,t,n):r.strategy===Z_FIXED$1||s===a?(send_bits(r,(STATIC_TREES<<1)+(n?1:0),3),compress_block(r,static_ltree,static_dtree)):(send_bits(r,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(r,r.l_desc.max_code+1,r.d_desc.max_code+1,c+1),compress_block(r,r.dyn_ltree,r.dyn_dtree)),init_block(r),n&&bi_windup(r)},_tr_tally$1=(r,e,t)=>(r.pending_buf[r.sym_buf+r.sym_next++]=e,r.pending_buf[r.sym_buf+r.sym_next++]=e>>8,r.pending_buf[r.sym_buf+r.sym_next++]=t,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(_length_code[t]+LITERALS$1+1)*2]++,r.dyn_dtree[d_code(e)*2]++),r.sym_next===r.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(r,e,t,n)=>{let a=r&65535|0,s=r>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do a=a+e[n++]|0,s=s+a|0;while(--c);a%=65521,s%=65521}return a|s<<16|0};var adler32_1=adler32;const makeTable=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},crcTable$1=new Uint32Array(makeTable()),crc32=(r,e,t,n)=>{const a=crcTable$1,s=n+t;r^=-1;for(let c=n;c<s;c++)r=r>>>8^a[(r^e[c])&255];return r^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(r,e)=>(r.msg=messages[e],e),rank=r=>r*2-(r>4?9:0),zero=r=>{let e=r.length;for(;--e>=0;)r[e]=0},slide_hash=r=>{let e,t,n,a=r.w_size;e=r.hash_size,n=e;do t=r.head[--n],r.head[n]=t>=a?t-a:0;while(--e);e=a,n=e;do t=r.prev[--n],r.prev[n]=t>=a?t-a:0;while(--e)};let HASH_ZLIB=(r,e,t)=>(e<<r.hash_shift^t)&r.hash_mask,HASH=HASH_ZLIB;const flush_pending=r=>{const e=r.state;let t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(r.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},flush_block_only=(r,e)=>{_tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,flush_pending(r.strm)},put_byte=(r,e)=>{r.pending_buf[r.pending++]=e},putShortMSB=(r,e)=>{r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255},read_buf=(r,e,t,n)=>{let a=r.avail_in;return a>n&&(a=n),a===0?0:(r.avail_in-=a,e.set(r.input.subarray(r.next_in,r.next_in+a),t),r.state.wrap===1?r.adler=adler32_1(r.adler,e,a,t):r.state.wrap===2&&(r.adler=crc32_1(r.adler,e,a,t)),r.next_in+=a,r.total_in+=a,a)},longest_match=(r,e)=>{let t=r.max_chain_length,n=r.strstart,a,s,c=r.prev_length,f=r.nice_match;const b=r.strstart>r.w_size-MIN_LOOKAHEAD?r.strstart-(r.w_size-MIN_LOOKAHEAD):0,g=r.window,m=r.w_mask,l=r.prev,o=r.strstart+MAX_MATCH;let u=g[n+c-1],d=g[n+c];r.prev_length>=r.good_match&&(t>>=2),f>r.lookahead&&(f=r.lookahead);do if(a=e,!(g[a+c]!==d||g[a+c-1]!==u||g[a]!==g[n]||g[++a]!==g[n+1])){n+=2,a++;do;while(g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&g[++n]===g[++a]&&n<o);if(s=MAX_MATCH-(o-n),n=o-MAX_MATCH,s>c){if(r.match_start=e,c=s,s>=f)break;u=g[n+c-1],d=g[n+c]}}while((e=l[e&m])>b&&--t!==0);return c<=r.lookahead?c:r.lookahead},fill_window=r=>{const e=r.w_size;let t,n,a;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-MIN_LOOKAHEAD)&&(r.window.set(r.window.subarray(e,e+e-n),0),r.match_start-=e,r.strstart-=e,r.block_start-=e,r.insert>r.strstart&&(r.insert=r.strstart),slide_hash(r),n+=e),r.strm.avail_in===0)break;if(t=read_buf(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=t,r.lookahead+r.insert>=MIN_MATCH)for(a=r.strstart-r.insert,r.ins_h=r.window[a],r.ins_h=HASH(r,r.ins_h,r.window[a+1]);r.insert&&(r.ins_h=HASH(r,r.ins_h,r.window[a+MIN_MATCH-1]),r.prev[a&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=a,a++,r.insert--,!(r.lookahead+r.insert<MIN_MATCH)););}while(r.lookahead<MIN_LOOKAHEAD&&r.strm.avail_in!==0)},deflate_stored=(r,e)=>{let t=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,a,s,c=0,f=r.strm.avail_in;do{if(n=65535,s=r.bi_valid+42>>3,r.strm.avail_out<s||(s=r.strm.avail_out-s,a=r.strstart-r.block_start,n>a+r.strm.avail_in&&(n=a+r.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&e!==Z_FINISH$3||e===Z_NO_FLUSH$2||n!==a+r.strm.avail_in)))break;c=e===Z_FINISH$3&&n===a+r.strm.avail_in?1:0,_tr_stored_block(r,0,0,c),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,flush_pending(r.strm),a&&(a>n&&(a=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+a),r.strm.next_out),r.strm.next_out+=a,r.strm.avail_out-=a,r.strm.total_out+=a,r.block_start+=a,n-=a),n&&(read_buf(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(c===0);return f-=r.strm.avail_in,f&&(f>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=f&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-f,r.strm.next_in),r.strstart),r.strstart+=f,r.insert+=f>r.w_size-r.insert?r.w_size-r.insert:f),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),c?BS_FINISH_DONE:e!==Z_NO_FLUSH$2&&e!==Z_FINISH$3&&r.strm.avail_in===0&&r.strstart===r.block_start?BS_BLOCK_DONE:(s=r.window_size-r.strstart,r.strm.avail_in>s&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,s+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),s>r.strm.avail_in&&(s=r.strm.avail_in),s&&(read_buf(r.strm,r.window,r.strstart,s),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.high_water<r.strstart&&(r.high_water=r.strstart),s=r.bi_valid+42>>3,s=r.pending_buf_size-s>65535?65535:r.pending_buf_size-s,t=s>r.w_size?r.w_size:s,a=r.strstart-r.block_start,(a>=t||(a||e===Z_FINISH$3)&&e!==Z_NO_FLUSH$2&&r.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,c=e===Z_FINISH$3&&r.strm.avail_in===0&&n===a?1:0,_tr_stored_block(r,r.block_start,n,c),r.block_start+=n,flush_pending(r.strm)),c?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(r,e)=>{let t,n;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(t=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,t)),r.match_length>=MIN_MATCH)if(n=_tr_tally(r,r.strstart-r.match_start,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=MIN_MATCH){r.match_length--;do r.strstart++,r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+1]);else n=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(r,e)=>{let t,n,a;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(t=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=MIN_MATCH-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,t),r.match_length<=5&&(r.strategy===Z_FILTERED||r.match_length===MIN_MATCH&&r.strstart-r.match_start>4096)&&(r.match_length=MIN_MATCH-1)),r.prev_length>=MIN_MATCH&&r.match_length<=r.prev_length){a=r.strstart+r.lookahead-MIN_MATCH,n=_tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-MIN_MATCH),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=a&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=MIN_MATCH-1,r.strstart++,n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}else if(r.match_available){if(n=_tr_tally(r,0,r.window[r.strstart-1]),n&&flush_block_only(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return BS_NEED_MORE}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=_tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(r,e)=>{let t,n,a,s;const c=r.window;for(;;){if(r.lookahead<=MAX_MATCH){if(fill_window(r),r.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=MIN_MATCH&&r.strstart>0&&(a=r.strstart-1,n=c[a],n===c[++a]&&n===c[++a]&&n===c[++a])){s=r.strstart+MAX_MATCH;do;while(n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&a<s);r.match_length=MAX_MATCH-(s-a),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=MIN_MATCH?(t=_tr_tally(r,1,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(r,e)=>{let t;for(;;){if(r.lookahead===0&&(fill_window(r),r.lookahead===0)){if(e===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(r.match_length=0,t=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(r,e,t,n,a){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=a}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=r=>{r.window_size=2*r.w_size,zero(r.head),r.max_lazy_match=configuration_table[r.level].max_lazy,r.good_match=configuration_table[r.level].good_length,r.nice_match=configuration_table[r.level].nice_length,r.max_chain_length=configuration_table[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=MIN_MATCH-1,r.match_available=0,r.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.status!==INIT_STATE&&e.status!==GZIP_STATE&&e.status!==EXTRA_STATE&&e.status!==NAME_STATE&&e.status!==COMMENT_STATE&&e.status!==HCRC_STATE&&e.status!==BUSY_STATE&&e.status!==FINISH_STATE?1:0},deflateResetKeep=r=>{if(deflateStateCheck(r))return err(r,Z_STREAM_ERROR$2);r.total_in=r.total_out=0,r.data_type=Z_UNKNOWN;const e=r.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?GZIP_STATE:e.wrap?INIT_STATE:BUSY_STATE,r.adler=e.wrap===2?0:1,e.last_flush=-2,_tr_init(e),Z_OK$3},deflateReset=r=>{const e=deflateResetKeep(r);return e===Z_OK$3&&lm_init(r.state),e},deflateSetHeader=(r,e)=>deflateStateCheck(r)||r.state.wrap!==2?Z_STREAM_ERROR$2:(r.state.gzhead=e,Z_OK$3),deflateInit2=(r,e,t,n,a,s)=>{if(!r)return Z_STREAM_ERROR$2;let c=1;if(e===Z_DEFAULT_COMPRESSION$1&&(e=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),a<1||a>MAX_MEM_LEVEL||t!==Z_DEFLATED$2||n<8||n>15||e<0||e>9||s<0||s>Z_FIXED||n===8&&c!==1)return err(r,Z_STREAM_ERROR$2);n===8&&(n=9);const f=new DeflateState;return r.state=f,f.strm=r,f.status=INIT_STATE,f.wrap=c,f.gzhead=null,f.w_bits=n,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=a+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+MIN_MATCH-1)/MIN_MATCH),f.window=new Uint8Array(f.w_size*2),f.head=new Uint16Array(f.hash_size),f.prev=new Uint16Array(f.w_size),f.lit_bufsize=1<<a+6,f.pending_buf_size=f.lit_bufsize*4,f.pending_buf=new Uint8Array(f.pending_buf_size),f.sym_buf=f.lit_bufsize,f.sym_end=(f.lit_bufsize-1)*3,f.level=e,f.strategy=s,f.method=t,deflateReset(r)},deflateInit=(r,e)=>deflateInit2(r,e,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(r,e)=>{if(deflateStateCheck(r)||e>Z_BLOCK$1||e<0)return r?err(r,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const t=r.state;if(!r.output||r.avail_in!==0&&!r.input||t.status===FINISH_STATE&&e!==Z_FINISH$3)return err(r,r.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(flush_pending(r),r.avail_out===0)return t.last_flush=-1,Z_OK$3}else if(r.avail_in===0&&rank(e)<=rank(n)&&e!==Z_FINISH$3)return err(r,Z_BUF_ERROR$1);if(t.status===FINISH_STATE&&r.avail_in!==0)return err(r,Z_BUF_ERROR$1);if(t.status===INIT_STATE&&t.wrap===0&&(t.status=BUSY_STATE),t.status===INIT_STATE){let a=Z_DEFLATED$2+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Z_HUFFMAN_ONLY||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,a|=s<<6,t.strstart!==0&&(a|=PRESET_DICT),a+=31-a%31,putShortMSB(t,a),t.strstart!==0&&(putShortMSB(t,r.adler>>>16),putShortMSB(t,r.adler&65535)),r.adler=1,t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(t.status===GZIP_STATE){if(r.adler=0,put_byte(t,31),put_byte(t,139),put_byte(t,8),t.gzhead)put_byte(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),put_byte(t,t.gzhead.time&255),put_byte(t,t.gzhead.time>>8&255),put_byte(t,t.gzhead.time>>16&255),put_byte(t,t.gzhead.time>>24&255),put_byte(t,t.level===9?2:t.strategy>=Z_HUFFMAN_ONLY||t.level<2?4:0),put_byte(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(put_byte(t,t.gzhead.extra.length&255),put_byte(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=EXTRA_STATE;else if(put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,t.level===9?2:t.strategy>=Z_HUFFMAN_ONLY||t.level<2?4:0),put_byte(t,OS_CODE),t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(t.status===EXTRA_STATE){if(t.gzhead.extra){let a=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let f=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+f),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=f,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;a=0,s-=f}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=NAME_STATE}if(t.status===NAME_STATE){if(t.gzhead.name){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a)),flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;a=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,put_byte(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=COMMENT_STATE}if(t.status===COMMENT_STATE){if(t.gzhead.comment){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a)),flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;a=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,put_byte(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-a,a))}t.status=HCRC_STATE}if(t.status===HCRC_STATE){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(flush_pending(r),t.pending!==0))return t.last_flush=-1,Z_OK$3;put_byte(t,r.adler&255),put_byte(t,r.adler>>8&255),r.adler=0}if(t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(r.avail_in!==0||t.lookahead!==0||e!==Z_NO_FLUSH$2&&t.status!==FINISH_STATE){let a=t.level===0?deflate_stored(t,e):t.strategy===Z_HUFFMAN_ONLY?deflate_huff(t,e):t.strategy===Z_RLE?deflate_rle(t,e):configuration_table[t.level].func(t,e);if((a===BS_FINISH_STARTED||a===BS_FINISH_DONE)&&(t.status=FINISH_STATE),a===BS_NEED_MORE||a===BS_FINISH_STARTED)return r.avail_out===0&&(t.last_flush=-1),Z_OK$3;if(a===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?_tr_align(t):e!==Z_BLOCK$1&&(_tr_stored_block(t,0,0,!1),e===Z_FULL_FLUSH$1&&(zero(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),flush_pending(r),r.avail_out===0))return t.last_flush=-1,Z_OK$3}return e!==Z_FINISH$3?Z_OK$3:t.wrap<=0?Z_STREAM_END$3:(t.wrap===2?(put_byte(t,r.adler&255),put_byte(t,r.adler>>8&255),put_byte(t,r.adler>>16&255),put_byte(t,r.adler>>24&255),put_byte(t,r.total_in&255),put_byte(t,r.total_in>>8&255),put_byte(t,r.total_in>>16&255),put_byte(t,r.total_in>>24&255)):(putShortMSB(t,r.adler>>>16),putShortMSB(t,r.adler&65535)),flush_pending(r),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=r=>{if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const e=r.state.status;return r.state=null,e===BUSY_STATE?err(r,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(r,e)=>{let t=e.length;if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const n=r.state,a=n.wrap;if(a===2||a===1&&n.status!==INIT_STATE||n.lookahead)return Z_STREAM_ERROR$2;if(a===1&&(r.adler=adler32_1(r.adler,e,t,0)),n.wrap=0,t>=n.w_size){a===0&&(zero(n.head),n.strstart=0,n.block_start=0,n.insert=0);let b=new Uint8Array(n.w_size);b.set(e.subarray(t-n.w_size,t),0),e=b,t=n.w_size}const s=r.avail_in,c=r.next_in,f=r.input;for(r.avail_in=t,r.next_in=0,r.input=e,fill_window(n);n.lookahead>=MIN_MATCH;){let b=n.strstart,g=n.lookahead-(MIN_MATCH-1);do n.ins_h=HASH(n,n.ins_h,n.window[b+MIN_MATCH-1]),n.prev[b&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=b,b++;while(--g);n.strstart=b,n.lookahead=MIN_MATCH-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=MIN_MATCH-1,n.match_available=0,r.next_in=c,r.input=f,r.avail_in=s,n.wrap=a,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var assign=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)_has(t,n)&&(r[n]=t[n])}}return r},flattenChunks=r=>{let e=0;for(let n=0,a=r.length;n<a;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,a=0,s=r.length;n<s;n++){let c=r[n];t.set(c,a),a+=c.length}return t},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let r=0;r<256;r++)_utf8len[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,a,s,c=r.length,f=0;for(a=0;a<c;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<c&&(n=r.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),f+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(f),s=0,a=0;s<f;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<c&&(n=r.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const buf2binstring=(r,e)=>{if(e<65534&&r.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var buf2string=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,a;const s=new Array(t*2);for(a=0,n=0;n<t;){let c=r[n++];if(c<128){s[a++]=c;continue}let f=_utf8len[c];if(f>4){s[a++]=65533,n+=f-1;continue}for(c&=f===2?31:f===3?15:7;f>1&&n<t;)c=c<<6|r[n++]&63,f--;if(f>1){s[a++]=65533;continue}c<65536?s[a++]=c:(c-=65536,s[a++]=55296|c>>10&1023,s[a++]=56320|c&1023)}return buf2binstring(s,a)},utf8border=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+_utf8len[r[t]]>e?t:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(r){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},r||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=deflate_1$2.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Z_OK$2)throw new Error(messages[t]);if(e.header&&deflate_1$2.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=strings.string2buf(e.dictionary):toString$1$1.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=deflate_1$2.deflateSetDictionary(this.strm,n),t!==Z_OK$2)throw new Error(messages[t]);this._dict_set=!0}}Deflate$1.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize;let a,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof r=="string"?t.input=strings.string2buf(r):toString$1$1.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===Z_SYNC_FLUSH||s===Z_FULL_FLUSH)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=deflate_1$2.deflate(t,s),a===Z_STREAM_END$2)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=deflate_1$2.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Z_OK$2;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(r){this.chunks.push(r)};Deflate$1.prototype.onEnd=function(r){r===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function deflate$1(r,e){const t=new Deflate$1(e);if(t.push(r,!0),t.err)throw t.msg||messages[t.err];return t.result}function deflateRaw$1(r,e){return e=e||{},e.raw=!0,deflate$1(r,e)}function gzip$1(r,e){return e=e||{},e.gzip=!0,deflate$1(r,e)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let n,a,s,c,f,b,g,m,l,o,u,d,y,w,_,T,S,E,A,P,k,M,F,O;const D=e.state;n=e.next_in,F=e.input,a=n+(e.avail_in-5),s=e.next_out,O=e.output,c=s-(t-e.avail_out),f=s+(e.avail_out-257),b=D.dmax,g=D.wsize,m=D.whave,l=D.wnext,o=D.window,u=D.hold,d=D.bits,y=D.lencode,w=D.distcode,_=(1<<D.lenbits)-1,T=(1<<D.distbits)-1;e:do{d<15&&(u+=F[n++]<<d,d+=8,u+=F[n++]<<d,d+=8),S=y[u&_];t:for(;;){if(E=S>>>24,u>>>=E,d-=E,E=S>>>16&255,E===0)O[s++]=S&65535;else if(E&16){A=S&65535,E&=15,E&&(d<E&&(u+=F[n++]<<d,d+=8),A+=u&(1<<E)-1,u>>>=E,d-=E),d<15&&(u+=F[n++]<<d,d+=8,u+=F[n++]<<d,d+=8),S=w[u&T];r:for(;;){if(E=S>>>24,u>>>=E,d-=E,E=S>>>16&255,E&16){if(P=S&65535,E&=15,d<E&&(u+=F[n++]<<d,d+=8,d<E&&(u+=F[n++]<<d,d+=8)),P+=u&(1<<E)-1,P>b){e.msg="invalid distance too far back",D.mode=BAD$1;break e}if(u>>>=E,d-=E,E=s-c,P>E){if(E=P-E,E>m&&D.sane){e.msg="invalid distance too far back",D.mode=BAD$1;break e}if(k=0,M=o,l===0){if(k+=g-E,E<A){A-=E;do O[s++]=o[k++];while(--E);k=s-P,M=O}}else if(l<E){if(k+=g+l-E,E-=l,E<A){A-=E;do O[s++]=o[k++];while(--E);if(k=0,l<A){E=l,A-=E;do O[s++]=o[k++];while(--E);k=s-P,M=O}}}else if(k+=l-E,E<A){A-=E;do O[s++]=o[k++];while(--E);k=s-P,M=O}for(;A>2;)O[s++]=M[k++],O[s++]=M[k++],O[s++]=M[k++],A-=3;A&&(O[s++]=M[k++],A>1&&(O[s++]=M[k++]))}else{k=s-P;do O[s++]=O[k++],O[s++]=O[k++],O[s++]=O[k++],A-=3;while(A>2);A&&(O[s++]=O[k++],A>1&&(O[s++]=O[k++]))}}else if(E&64){e.msg="invalid distance code",D.mode=BAD$1;break e}else{S=w[(S&65535)+(u&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){D.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",D.mode=BAD$1;break e}else{S=y[(S&65535)+(u&(1<<E)-1)];continue t}break}}while(n<a&&s<f);A=d>>3,n-=A,d-=A<<3,u&=(1<<d)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<f?257+(f-s):257-(s-f),D.hold=u,D.bits=d};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(r,e,t,n,a,s,c,f)=>{const b=f.bits;let g=0,m=0,l=0,o=0,u=0,d=0,y=0,w=0,_=0,T=0,S,E,A,P,k,M=null,F;const O=new Uint16Array(MAXBITS+1),D=new Uint16Array(MAXBITS+1);let R=null,C,U,N;for(g=0;g<=MAXBITS;g++)O[g]=0;for(m=0;m<n;m++)O[e[t+m]]++;for(u=b,o=MAXBITS;o>=1&&O[o]===0;o--);if(u>o&&(u=o),o===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,f.bits=1,0;for(l=1;l<o&&O[l]===0;l++);for(u<l&&(u=l),w=1,g=1;g<=MAXBITS;g++)if(w<<=1,w-=O[g],w<0)return-1;if(w>0&&(r===CODES$1||o!==1))return-1;for(D[1]=0,g=1;g<MAXBITS;g++)D[g+1]=D[g]+O[g];for(m=0;m<n;m++)e[t+m]!==0&&(c[D[e[t+m]]++]=m);if(r===CODES$1?(M=R=c,F=20):r===LENS$1?(M=lbase,R=lext,F=257):(M=dbase,R=dext,F=0),T=0,m=0,g=l,k=s,d=u,y=0,A=-1,_=1<<u,P=_-1,r===LENS$1&&_>ENOUGH_LENS$1||r===DISTS$1&&_>ENOUGH_DISTS$1)return 1;for(;;){C=g-y,c[m]+1<F?(U=0,N=c[m]):c[m]>=F?(U=R[c[m]-F],N=M[c[m]-F]):(U=32+64,N=0),S=1<<g-y,E=1<<d,l=E;do E-=S,a[k+(T>>y)+E]=C<<24|U<<16|N|0;while(E!==0);for(S=1<<g-1;T&S;)S>>=1;if(S!==0?(T&=S-1,T+=S):T=0,m++,--O[g]===0){if(g===o)break;g=e[t+c[m]]}if(g>u&&(T&P)!==A){for(y===0&&(y=u),k+=l,d=g-y,w=1<<d;d+y<o&&(w-=O[d+y],!(w<=0));)d++,w<<=1;if(_+=1<<d,r===LENS$1&&_>ENOUGH_LENS$1||r===DISTS$1&&_>ENOUGH_DISTS$1)return 1;A=T&P,a[A]=u<<24|d<<16|k-s|0}}return T!==0&&(a[k+T]=g-y<<24|64<<16|0),f.bits=u,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(r)},inflateReset2=(r,e)=>{let t;if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,inflateReset(r))},inflateInit2=(r,e)=>{if(!r)return Z_STREAM_ERROR$1;const t=new InflateState;r.state=t,t.strm=r,t.window=null,t.mode=HEAD;const n=inflateReset2(r,e);return n!==Z_OK$1&&(r.state=null),n},inflateInit=r=>inflateInit2(r,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=r=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(inftrees(LENS,r.lens,0,288,lenfix,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;inftrees(DISTS,r.lens,0,32,distfix,0,r.work,{bits:5}),virgin=!1}r.lencode=lenfix,r.lenbits=9,r.distcode=distfix,r.distbits=5},updatewindow=(r,e,t,n)=>{let a;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(t-n,t-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},inflate$2=(r,e)=>{let t,n,a,s,c,f,b,g,m,l,o,u,d,y,w=0,_,T,S,E,A,P,k,M;const F=new Uint8Array(4);let O,D;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(r)||!r.output||!r.input&&r.avail_in!==0)return Z_STREAM_ERROR$1;t=r.state,t.mode===TYPE&&(t.mode=TYPEDO),c=r.next_out,a=r.output,b=r.avail_out,s=r.next_in,n=r.input,f=r.avail_in,g=t.hold,m=t.bits,l=f,o=b,M=Z_OK$1;e:for(;;)switch(t.mode){case HEAD:if(t.wrap===0){t.mode=TYPEDO;break}for(;m<16;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(t.wrap&2&&g===35615){t.wbits===0&&(t.wbits=15),t.check=0,F[0]=g&255,F[1]=g>>>8&255,t.check=crc32_1(t.check,F,2,0),g=0,m=0,t.mode=FLAGS;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((g&255)<<8)+(g>>8))%31){r.msg="incorrect header check",t.mode=BAD;break}if((g&15)!==Z_DEFLATED){r.msg="unknown compression method",t.mode=BAD;break}if(g>>>=4,m-=4,k=(g&15)+8,t.wbits===0&&(t.wbits=k),k>15||k>t.wbits){r.msg="invalid window size",t.mode=BAD;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=g&512?DICTID:TYPE,g=0,m=0;break;case FLAGS:for(;m<16;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(t.flags=g,(t.flags&255)!==Z_DEFLATED){r.msg="unknown compression method",t.mode=BAD;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=BAD;break}t.head&&(t.head.text=g>>8&1),t.flags&512&&t.wrap&4&&(F[0]=g&255,F[1]=g>>>8&255,t.check=crc32_1(t.check,F,2,0)),g=0,m=0,t.mode=TIME;case TIME:for(;m<32;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.head&&(t.head.time=g),t.flags&512&&t.wrap&4&&(F[0]=g&255,F[1]=g>>>8&255,F[2]=g>>>16&255,F[3]=g>>>24&255,t.check=crc32_1(t.check,F,4,0)),g=0,m=0,t.mode=OS;case OS:for(;m<16;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.head&&(t.head.xflags=g&255,t.head.os=g>>8),t.flags&512&&t.wrap&4&&(F[0]=g&255,F[1]=g>>>8&255,t.check=crc32_1(t.check,F,2,0)),g=0,m=0,t.mode=EXLEN;case EXLEN:if(t.flags&1024){for(;m<16;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.length=g,t.head&&(t.head.extra_len=g),t.flags&512&&t.wrap&4&&(F[0]=g&255,F[1]=g>>>8&255,t.check=crc32_1(t.check,F,2,0)),g=0,m=0}else t.head&&(t.head.extra=null);t.mode=EXTRA;case EXTRA:if(t.flags&1024&&(u=t.length,u>f&&(u=f),u&&(t.head&&(k=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+u),k)),t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,u,s)),f-=u,s+=u,t.length-=u),t.length))break e;t.length=0,t.mode=NAME;case NAME:if(t.flags&2048){if(f===0)break e;u=0;do k=n[s+u++],t.head&&k&&t.length<65536&&(t.head.name+=String.fromCharCode(k));while(k&&u<f);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,u,s)),f-=u,s+=u,k)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=COMMENT;case COMMENT:if(t.flags&4096){if(f===0)break e;u=0;do k=n[s+u++],t.head&&k&&t.length<65536&&(t.head.comment+=String.fromCharCode(k));while(k&&u<f);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,u,s)),f-=u,s+=u,k)break e}else t.head&&(t.head.comment=null);t.mode=HCRC;case HCRC:if(t.flags&512){for(;m<16;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(t.wrap&4&&g!==(t.check&65535)){r.msg="header crc mismatch",t.mode=BAD;break}g=0,m=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=TYPE;break;case DICTID:for(;m<32;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}r.adler=t.check=zswap32(g),g=0,m=0,t.mode=DICT;case DICT:if(t.havedict===0)return r.next_out=c,r.avail_out=b,r.next_in=s,r.avail_in=f,t.hold=g,t.bits=m,Z_NEED_DICT$1;r.adler=t.check=1,t.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(t.last){g>>>=m&7,m-=m&7,t.mode=CHECK;break}for(;m<3;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}switch(t.last=g&1,g>>>=1,m-=1,g&3){case 0:t.mode=STORED;break;case 1:if(fixedtables(t),t.mode=LEN_,e===Z_TREES){g>>>=2,m-=2;break e}break;case 2:t.mode=TABLE;break;case 3:r.msg="invalid block type",t.mode=BAD}g>>>=2,m-=2;break;case STORED:for(g>>>=m&7,m-=m&7;m<32;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if((g&65535)!==(g>>>16^65535)){r.msg="invalid stored block lengths",t.mode=BAD;break}if(t.length=g&65535,g=0,m=0,t.mode=COPY_,e===Z_TREES)break e;case COPY_:t.mode=COPY;case COPY:if(u=t.length,u){if(u>f&&(u=f),u>b&&(u=b),u===0)break e;a.set(n.subarray(s,s+u),c),f-=u,s+=u,b-=u,c+=u,t.length-=u;break}t.mode=TYPE;break;case TABLE:for(;m<14;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(t.nlen=(g&31)+257,g>>>=5,m-=5,t.ndist=(g&31)+1,g>>>=5,m-=5,t.ncode=(g&15)+4,g>>>=4,m-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=BAD;break}t.have=0,t.mode=LENLENS;case LENLENS:for(;t.have<t.ncode;){for(;m<3;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.lens[R[t.have++]]=g&7,g>>>=3,m-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},M=inftrees(CODES,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,M){r.msg="invalid code lengths set",t.mode=BAD;break}t.have=0,t.mode=CODELENS;case CODELENS:for(;t.have<t.nlen+t.ndist;){for(;w=t.lencode[g&(1<<t.lenbits)-1],_=w>>>24,T=w>>>16&255,S=w&65535,!(_<=m);){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(S<16)g>>>=_,m-=_,t.lens[t.have++]=S;else{if(S===16){for(D=_+2;m<D;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(g>>>=_,m-=_,t.have===0){r.msg="invalid bit length repeat",t.mode=BAD;break}k=t.lens[t.have-1],u=3+(g&3),g>>>=2,m-=2}else if(S===17){for(D=_+3;m<D;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}g>>>=_,m-=_,k=0,u=3+(g&7),g>>>=3,m-=3}else{for(D=_+7;m<D;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}g>>>=_,m-=_,k=0,u=11+(g&127),g>>>=7,m-=7}if(t.have+u>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=BAD;break}for(;u--;)t.lens[t.have++]=k}}if(t.mode===BAD)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=BAD;break}if(t.lenbits=9,O={bits:t.lenbits},M=inftrees(LENS,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,M){r.msg="invalid literal/lengths set",t.mode=BAD;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},M=inftrees(DISTS,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,M){r.msg="invalid distances set",t.mode=BAD;break}if(t.mode=LEN_,e===Z_TREES)break e;case LEN_:t.mode=LEN;case LEN:if(f>=6&&b>=258){r.next_out=c,r.avail_out=b,r.next_in=s,r.avail_in=f,t.hold=g,t.bits=m,inffast(r,o),c=r.next_out,a=r.output,b=r.avail_out,s=r.next_in,n=r.input,f=r.avail_in,g=t.hold,m=t.bits,t.mode===TYPE&&(t.back=-1);break}for(t.back=0;w=t.lencode[g&(1<<t.lenbits)-1],_=w>>>24,T=w>>>16&255,S=w&65535,!(_<=m);){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(T&&!(T&240)){for(E=_,A=T,P=S;w=t.lencode[P+((g&(1<<E+A)-1)>>E)],_=w>>>24,T=w>>>16&255,S=w&65535,!(E+_<=m);){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}g>>>=E,m-=E,t.back+=E}if(g>>>=_,m-=_,t.back+=_,t.length=S,T===0){t.mode=LIT;break}if(T&32){t.back=-1,t.mode=TYPE;break}if(T&64){r.msg="invalid literal/length code",t.mode=BAD;break}t.extra=T&15,t.mode=LENEXT;case LENEXT:if(t.extra){for(D=t.extra;m<D;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.length+=g&(1<<t.extra)-1,g>>>=t.extra,m-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=DIST;case DIST:for(;w=t.distcode[g&(1<<t.distbits)-1],_=w>>>24,T=w>>>16&255,S=w&65535,!(_<=m);){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(!(T&240)){for(E=_,A=T,P=S;w=t.distcode[P+((g&(1<<E+A)-1)>>E)],_=w>>>24,T=w>>>16&255,S=w&65535,!(E+_<=m);){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}g>>>=E,m-=E,t.back+=E}if(g>>>=_,m-=_,t.back+=_,T&64){r.msg="invalid distance code",t.mode=BAD;break}t.offset=S,t.extra=T&15,t.mode=DISTEXT;case DISTEXT:if(t.extra){for(D=t.extra;m<D;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}t.offset+=g&(1<<t.extra)-1,g>>>=t.extra,m-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=BAD;break}t.mode=MATCH;case MATCH:if(b===0)break e;if(u=o-b,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=BAD;break}u>t.wnext?(u-=t.wnext,d=t.wsize-u):d=t.wnext-u,u>t.length&&(u=t.length),y=t.window}else y=a,d=c-t.offset,u=t.length;u>b&&(u=b),b-=u,t.length-=u;do a[c++]=y[d++];while(--u);t.length===0&&(t.mode=LEN);break;case LIT:if(b===0)break e;a[c++]=t.length,b--,t.mode=LEN;break;case CHECK:if(t.wrap){for(;m<32;){if(f===0)break e;f--,g|=n[s++]<<m,m+=8}if(o-=b,r.total_out+=o,t.total+=o,t.wrap&4&&o&&(r.adler=t.check=t.flags?crc32_1(t.check,a,o,c-o):adler32_1(t.check,a,o,c-o)),o=b,t.wrap&4&&(t.flags?g:zswap32(g))!==t.check){r.msg="incorrect data check",t.mode=BAD;break}g=0,m=0}t.mode=LENGTH;case LENGTH:if(t.wrap&&t.flags){for(;m<32;){if(f===0)break e;f--,g+=n[s++]<<m,m+=8}if(t.wrap&4&&g!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=BAD;break}g=0,m=0}t.mode=DONE;case DONE:M=Z_STREAM_END$1;break e;case BAD:M=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return r.next_out=c,r.avail_out=b,r.next_in=s,r.avail_in=f,t.hold=g,t.bits=m,(t.wsize||o!==r.avail_out&&t.mode<BAD&&(t.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(r,r.output,r.next_out,o-r.avail_out),l-=r.avail_in,o-=r.avail_out,r.total_in+=l,r.total_out+=o,t.total+=o,t.wrap&4&&o&&(r.adler=t.check=t.flags?crc32_1(t.check,a,o,r.next_out-o):adler32_1(t.check,a,o,r.next_out-o)),r.data_type=t.bits+(t.last?64:0)+(t.mode===TYPE?128:0)+(t.mode===LEN_||t.mode===COPY_?256:0),(l===0&&o===0||e===Z_FINISH$1)&&M===Z_OK$1&&(M=Z_BUF_ERROR),M},inflateEnd=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;let e=r.state;return e.window&&(e.window=null),r.state=null,Z_OK$1},inflateGetHeader=(r,e)=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const t=r.state;return t.wrap&2?(t.head=e,e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(r,e)=>{const t=e.length;let n,a,s;return inflateStateCheck(r)||(n=r.state,n.wrap!==0&&n.mode!==DICT)?Z_STREAM_ERROR$1:n.mode===DICT&&(a=1,a=adler32_1(a,e,t,0),a!==n.check)?Z_DATA_ERROR$1:(s=updatewindow(r,e,t,t),s?(n.mode=MEM,Z_MEM_ERROR$1):(n.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(r){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(t!==Z_OK)throw new Error(messages[t]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString$2.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),t!==Z_OK)))throw new Error(messages[t])}Inflate$1.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,c,f;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=inflate_1$2.inflate(t,c),s===Z_NEED_DICT&&a&&(s=inflate_1$2.inflateSetDictionary(t,a),s===Z_OK?s=inflate_1$2.inflate(t,c):s===Z_DATA_ERROR&&(s=Z_NEED_DICT));t.avail_in>0&&s===Z_STREAM_END&&t.state.wrap>0&&r[t.next_in]!==0;)inflate_1$2.inflateReset(t),s=inflate_1$2.inflate(t,c);switch(s){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(s),this.ended=!0,!1}if(f=t.avail_out,t.next_out&&(t.avail_out===0||s===Z_STREAM_END))if(this.options.to==="string"){let b=strings.utf8border(t.output,t.next_out),g=t.next_out-b,m=strings.buf2string(t.output,b);t.next_out=g,t.avail_out=n-g,g&&t.output.set(t.output.subarray(b,b+g),0),this.onData(m)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Z_OK&&f===0)){if(s===Z_STREAM_END)return s=inflate_1$2.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(r){this.chunks.push(r)};Inflate$1.prototype.onEnd=function(r){r===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function inflate$1(r,e){const t=new Inflate$1(e);if(t.push(r),t.err)throw t.msg||messages[t.err];return t.result}function inflateRaw$1(r,e){return e=e||{},e.raw=!0,inflate$1(r,e)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;crcTable[r]=e}const initialCrc=4294967295;function updateCrc(r,e,t){let n=r;for(let a=0;a<t;a++)n=crcTable[(n^e[a])&255]^n>>>8;return n}function crc(r,e){return(updateCrc(initialCrc,r,e)^initialCrc)>>>0}var ColorType;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.GREYSCALE=0]="GREYSCALE",r[r.TRUECOLOUR=2]="TRUECOLOUR",r[r.INDEXED_COLOUR=3]="INDEXED_COLOUR",r[r.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",r[r.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(r){r[r.UNKNOWN=-1]="UNKNOWN",r[r.NO_INTERLACE=0]="NO_INTERLACE",r[r.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer$4{constructor(e,t={}){super(e);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let e=0;e<pngSignature.length;e++)if(this.readUint8()!==pngSignature[e])throw new Error(`wrong PNG signature. Byte at ${e} should be ${pngSignature[e]}.`)}decodeChunk(){const e=this.readUint32(),t=this.readChars(4),n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case"tEXt":this.decodetEXt(e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);if(this._checkCrc){const a=this.readUint32(),s=e+4,c=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-s-4,s),s);if(c!==a)throw new Error(`CRC mismatch for chunk ${t}. Expected ${a}, found ${c}`)}else this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=checkBitDepth(this.readUint8());const t=this.readUint8();this._colorType=t;let n;switch(t){case ColorType.GREYSCALE:n=1;break;case ColorType.TRUECOLOUR:n=3;break;case ColorType.INDEXED_COLOUR:n=1;break;case ColorType.GREYSCALE_ALPHA:n=2;break;case ColorType.TRUECOLOUR_ALPHA:n=4;break;default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<t;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,e)),this.skip(e)}decodetRNS(e){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const n=this.readByte();this._palette[t].push(n)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t="",n;for(;(n=this.readChar())!==NULL;)t+=n;const a=this.readUint8();if(a!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:inflate_1(s)}}decodetEXt(e){let t="",n;for(;(n=this.readChar())!==NULL;)t+=n;this._png.text[t]=this.readChars(e-t.length-1)}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(e);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(e){const t=this._png.height,n=this._png.channels*this._png.depth/8,a=this._png.width*n,s=new Uint8Array(this._png.height*a);let c=empty,f=0,b,g;for(let m=0;m<t;m++){switch(b=e.subarray(f+1,f+1+a),g=s.subarray(m*a,(m+1)*a),e[f]){case 0:unfilterNone(b,g,a);break;case 1:unfilterSub(b,g,a,n);break;case 2:unfilterUp(b,g,c,a);break;case 3:unfilterAverage(b,g,c,a,n);break;case 4:unfilterPaeth(b,g,c,a,n);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=g,f+=a+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const m=new Uint16Array(s.buffer);if(osIsLittleEndian)for(let l=0;l<m.length;l++)m[l]=swap16(m[l]);this._png.data=m}else this._png.data=s}}function unfilterNone(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function unfilterSub(r,e,t,n){let a=0;for(;a<n;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-n]&255}function unfilterUp(r,e,t,n){let a=0;if(t.length===0)for(;a<n;a++)e[a]=r[a];else for(;a<n;a++)e[a]=r[a]+t[a]&255}function unfilterAverage(r,e,t,n,a){let s=0;if(t.length===0){for(;s<a;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<n;s++)e[s]=r[s]+(e[s-a]+t[s]>>1)&255}}function unfilterPaeth(r,e,t,n,a){let s=0;if(t.length===0){for(;s<a;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=r[s]+t[s]&255;for(;s<n;s++)e[s]=r[s]+paethPredictor(e[s-a],t[s],t[s-a])&255}}function paethPredictor(r,e,t){const n=r+e-t,a=Math.abs(n-r),s=Math.abs(n-e),c=Math.abs(n-t);return a<=s&&a<=c?r:s<=c?e:t}function swap16(r){return(r&255)<<8|r>>8&255}function checkBitDepth(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer$4{constructor(e,t={}){super(),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...t.zlib},this._png=this._checkData(e),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(e){this.writeUint32(e.length),this.writeChars("IDAT"),this.writeBytes(e),this.writeCrc(e.length+4)}encodeData(){const{width:e,height:t,channels:n,depth:a,data:s}=this._png,c=n*e,f=new IOBuffer$4().setBigEndian();let b=0;for(let l=0;l<t;l++)if(f.writeByte(0),a===8)b=writeDataBytes(s,f,c,b);else if(a===16)b=writeDataUint16(s,f,c,b);else throw new Error("unreachable");const g=f.toArray(),m=deflate_1(g,this._zlibOptions);this.encodeIDAT(m)}_checkData(e){const{colorType:t,channels:n,depth:a}=getColorType(e),s={width:checkInteger(e.width,"width"),height:checkInteger(e.height,"height"),channels:n,data:e.data,depth:a,text:{}};this._colorType=t;const c=s.width*s.height*n;if(s.data.length!==c)throw new RangeError(`wrong data size. Found ${s.data.length}, expected ${c}`);return s}writeCrc(e){this.writeUint32(crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-e,e),e))}}function checkInteger(r,e){if(Number.isInteger(r)&&r>0)return r;throw new TypeError(`${e} must be a positive integer`)}function getColorType(r){const{channels:e=4,depth:t=8}=r;if(e!==4&&e!==3&&e!==2&&e!==1)throw new RangeError(`unsupported number of channels: ${e}`);if(t!==8&&t!==16)throw new RangeError(`unsupported bit depth: ${t}`);const n={channels:e,depth:t,colorType:ColorType.UNKNOWN};switch(e){case 4:n.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:n.colorType=ColorType.TRUECOLOUR;break;case 1:n.colorType=ColorType.GREYSCALE;break;case 2:n.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return n}function writeDataBytes(r,e,t,n){for(let a=0;a<t;a++)e.writeByte(r[n++]);return n}function writeDataUint16(r,e,t,n){for(let a=0;a<t;a++)e.writeUint16(r[n++]);return n}var ResolutionUnitSpecifier;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(r,e){return new PngDecoder(r,e).decode()}function encodePng$1(r,e){return new PngEncoder(r,e).encode()}var encoder={exports:{}};(function(r){function e(n){var a=Math.floor,s=new Array(64),c=new Array(64),f=new Array(64),b=new Array(64),g,m,l,o,u=new Array(65535),d=new Array(65535),y=new Array(64),w=new Array(64),_=[],T=0,S=7,E=new Array(64),A=new Array(64),P=new Array(64),k=new Array(256),M=new Array(2048),F,O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(J){for(var ve=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var Oe=a((ve[de]*J+50)/100);Oe<1?Oe=1:Oe>255&&(Oe=255),s[O[de]]=Oe}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ue=0;Ue<64;Ue++){var Ze=a((fe[Ue]*J+50)/100);Ze<1?Ze=1:Ze>255&&(Ze=255),c[O[Ue]]=Ze}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,Ge=0;Ge<8;Ge++)for(var ze=0;ze<8;ze++)f[Le]=1/(s[O[Le]]*$e[Ge]*$e[ze]*8),b[Le]=1/(c[O[Le]]*$e[Ge]*$e[ze]*8),Le++}function he(J,ve){for(var de=0,Oe=0,fe=new Array,Ue=1;Ue<=16;Ue++){for(var Ze=1;Ze<=J[Ue];Ze++)fe[ve[Oe]]=[],fe[ve[Oe]][0]=de,fe[ve[Oe]][1]=Ue,Oe++,de++;de*=2}return fe}function ge(){g=he(D,R),m=he(N,V),l=he(C,U),o=he(j,K)}function Se(){for(var J=1,ve=2,de=1;de<=15;de++){for(var Oe=J;Oe<ve;Oe++)d[32767+Oe]=de,u[32767+Oe]=[],u[32767+Oe][1]=de,u[32767+Oe][0]=Oe;for(var fe=-(ve-1);fe<=-J;fe++)d[32767+fe]=de,u[32767+fe]=[],u[32767+fe][1]=de,u[32767+fe][0]=ve-1+fe;J<<=1,ve<<=1}}function we(){for(var J=0;J<256;J++)M[J]=19595*J,M[J+256>>0]=38470*J,M[J+512>>0]=7471*J+32768,M[J+768>>0]=-11059*J,M[J+1024>>0]=-21709*J,M[J+1280>>0]=32768*J+8421375,M[J+1536>>0]=-27439*J,M[J+1792>>0]=-5329*J}function ne(J){for(var ve=J[0],de=J[1]-1;de>=0;)ve&1<<de&&(T|=1<<S),de--,S--,S<0&&(T==255?(re(255),re(0)):re(T),S=7,T=0)}function re(J){_.push(J)}function oe(J){re(J>>8&255),re(J&255)}function Ee(J,ve){var de,Oe,fe,Ue,Ze,$e,Le,Ge,ze=0,Je,ot=8,Qe=64;for(Je=0;Je<ot;++Je){de=J[ze],Oe=J[ze+1],fe=J[ze+2],Ue=J[ze+3],Ze=J[ze+4],$e=J[ze+5],Le=J[ze+6],Ge=J[ze+7];var at=de+Ge,st=de-Ge,We=Oe+Le,pt=Oe-Le,vt=fe+$e,Y=fe-$e,me=Ue+Ze,_e=Ue-Ze,Pe=at+me,Ye=at-me,et=We+vt,nt=We-vt;J[ze]=Pe+et,J[ze+4]=Pe-et;var Et=(nt+Ye)*.707106781;J[ze+2]=Ye+Et,J[ze+6]=Ye-Et,Pe=_e+Y,et=Y+pt,nt=pt+st;var Pt=(Pe-nt)*.382683433,H=.5411961*Pe+Pt,ue=1.306562965*nt+Pt,xe=et*.707106781,Be=st+xe,le=st-xe;J[ze+5]=le+H,J[ze+3]=le-H,J[ze+1]=Be+ue,J[ze+7]=Be-ue,ze+=8}for(ze=0,Je=0;Je<ot;++Je){de=J[ze],Oe=J[ze+8],fe=J[ze+16],Ue=J[ze+24],Ze=J[ze+32],$e=J[ze+40],Le=J[ze+48],Ge=J[ze+56];var Ve=de+Ge,lt=de-Ge,mt=Oe+Le,kt=Oe-Le,jt=fe+$e,Rr=fe-$e,Ut=Ue+Ze,sr=Ue-Ze,$t=Ve+Ut,Ht=Ve-Ut,Lt=mt+jt,lr=mt-jt;J[ze]=$t+Lt,J[ze+32]=$t-Lt;var Or=(lr+Ht)*.707106781;J[ze+16]=Ht+Or,J[ze+48]=Ht-Or,$t=sr+Rr,Lt=Rr+kt,lr=kt+lt;var rr=($t-lr)*.382683433,Lr=.5411961*$t+rr,wn=1.306562965*lr+rr,It=Lt*.707106781,Pr=lt+It,Kr=lt-It;J[ze+40]=Kr+Lr,J[ze+24]=Kr-Lr,J[ze+8]=Pr+wn,J[ze+56]=Pr-wn,ze++}var dr;for(Je=0;Je<Qe;++Je)dr=J[Je]*ve[Je],y[Je]=dr>0?dr+.5|0:dr-.5|0;return y}function Re(){oe(65504),oe(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),oe(1),oe(1),re(0),re(0)}function De(J){if(J){oe(65505),J[0]===69&&J[1]===120&&J[2]===105&&J[3]===102?oe(J.length+2):(oe(J.length+5+2),re(69),re(120),re(105),re(102),re(0));for(var ve=0;ve<J.length;ve++)re(J[ve])}}function He(J,ve){oe(65472),oe(17),re(8),oe(ve),oe(J),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}function qe(){oe(65499),oe(132),re(0);for(var J=0;J<64;J++)re(s[J]);re(1);for(var ve=0;ve<64;ve++)re(c[ve])}function W(){oe(65476),oe(418),re(0);for(var J=0;J<16;J++)re(D[J+1]);for(var ve=0;ve<=11;ve++)re(R[ve]);re(16);for(var de=0;de<16;de++)re(C[de+1]);for(var Oe=0;Oe<=161;Oe++)re(U[Oe]);re(1);for(var fe=0;fe<16;fe++)re(N[fe+1]);for(var Ue=0;Ue<=11;Ue++)re(V[Ue]);re(17);for(var Ze=0;Ze<16;Ze++)re(j[Ze+1]);for(var $e=0;$e<=161;$e++)re(K[$e])}function X(J){typeof J>"u"||J.constructor!==Array||J.forEach(ve=>{if(typeof ve=="string"){oe(65534);var de=ve.length;oe(de+2);var Oe;for(Oe=0;Oe<de;Oe++)re(ve.charCodeAt(Oe))}})}function te(){oe(65498),oe(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0)}function ie(J,ve,de,Oe,fe){for(var Ue=fe[0],Ze=fe[240],$e,Le=16,Ge=63,ze=64,Je=Ee(J,ve),ot=0;ot<ze;++ot)w[O[ot]]=Je[ot];var Qe=w[0]-de;de=w[0],Qe==0?ne(Oe[0]):($e=32767+Qe,ne(Oe[d[$e]]),ne(u[$e]));for(var at=63;at>0&&w[at]==0;at--);if(at==0)return ne(Ue),de;for(var st=1,We;st<=at;){for(var pt=st;w[st]==0&&st<=at;++st);var vt=st-pt;if(vt>=Le){We=vt>>4;for(var Y=1;Y<=We;++Y)ne(Ze);vt=vt&15}$e=32767+w[st],ne(fe[(vt<<4)+d[$e]]),ne(u[$e]),st++}return at!=Ge&&ne(Ue),de}function ye(){for(var J=String.fromCharCode,ve=0;ve<256;ve++)k[ve]=J(ve)}this.encode=function(J,ve){new Date().getTime(),ve&&be(ve),_=new Array,T=0,S=7,oe(65496),Re(),X(J.comments),De(J.exifBuffer),qe(),He(J.width,J.height),W(),te();var de=0,Oe=0,fe=0;T=0,S=7,this.encode.displayName="_encode_";for(var Ue=J.data,Ze=J.width,$e=J.height,Le=Ze*4,Ge,ze=0,Je,ot,Qe,at,st,We,pt,vt;ze<$e;){for(Ge=0;Ge<Le;){for(at=Le*ze+Ge,st=at,We=-1,pt=0,vt=0;vt<64;vt++)pt=vt>>3,We=(vt&7)*4,st=at+pt*Le+We,ze+pt>=$e&&(st-=Le*(ze+1+pt-$e)),Ge+We>=Le&&(st-=Ge+We-Le+4),Je=Ue[st++],ot=Ue[st++],Qe=Ue[st++],E[vt]=(M[Je]+M[ot+256>>0]+M[Qe+512>>0]>>16)-128,A[vt]=(M[Je+768>>0]+M[ot+1024>>0]+M[Qe+1280>>0]>>16)-128,P[vt]=(M[Je+1280>>0]+M[ot+1536>>0]+M[Qe+1792>>0]>>16)-128;de=ie(E,f,de,g,l),Oe=ie(A,b,Oe,m,o),fe=ie(P,b,fe,m,o),Ge+=32}ze+=8}if(S>=0){var Y=[];Y[1]=S+1,Y[0]=(1<<S+1)-1,ne(Y)}return oe(65497),Buffer.from(_)};function be(J){if(J<=0&&(J=1),J>100&&(J=100),F!=J){var ve=0;J<50?ve=Math.floor(5e3/J):ve=Math.floor(200-J*2),ee(ve),F=J}}function Ae(){var J=new Date().getTime();n||(n=50),ye(),ge(),Se(),we(),be(n),new Date().getTime()-J}Ae()}r.exports=t;function t(n,a){typeof a>"u"&&(a=50);var s=new e(a),c=s.encode(n,a);return{data:c,width:n.width,height:n.height}}})(encoder);var encoderExports=encoder.exports,decoder={exports:{}};(function(r){var e=function(){var a=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),s=4017,c=799,f=3406,b=2276,g=1567,m=3784,l=5793,o=2896;function u(){}function d(A,P){for(var k=0,M=[],F,O,D=16;D>0&&!A[D-1];)D--;M.push({children:[],index:0});var R=M[0],C;for(F=0;F<D;F++){for(O=0;O<A[F];O++){for(R=M.pop(),R.children[R.index]=P[k];R.index>0;){if(M.length===0)throw new Error("Could not recreate Huffman Table");R=M.pop()}for(R.index++,M.push(R);M.length<=F;)M.push(C={children:[],index:0}),R.children[R.index]=C.children,R=C;k++}F+1<D&&(M.push(C={children:[],index:0}),R.children[R.index]=C.children,R=C)}return M[0].children}function y(A,P,k,M,F,O,D,R,C,U){k.precision,k.samplesPerLine,k.scanLines;var N=k.mcusPerLine,V=k.progressive;k.maxH,k.maxV;var j=P,K=0,ee=0;function he(){if(ee>0)return ee--,K>>ee&1;if(K=A[P++],K==255){var $e=A[P++];if($e)throw new Error("unexpected marker: "+(K<<8|$e).toString(16))}return ee=7,K>>>7}function ge($e){for(var Le=$e,Ge;(Ge=he())!==null;){if(Le=Le[Ge],typeof Le=="number")return Le;if(typeof Le!="object")throw new Error("invalid huffman sequence")}return null}function Se($e){for(var Le=0;$e>0;){var Ge=he();if(Ge===null)return;Le=Le<<1|Ge,$e--}return Le}function we($e){var Le=Se($e);return Le>=1<<$e-1?Le:Le+(-1<<$e)+1}function ne($e,Le){var Ge=ge($e.huffmanTableDC),ze=Ge===0?0:we(Ge);Le[0]=$e.pred+=ze;for(var Je=1;Je<64;){var ot=ge($e.huffmanTableAC),Qe=ot&15,at=ot>>4;if(Qe===0){if(at<15)break;Je+=16;continue}Je+=at;var st=a[Je];Le[st]=we(Qe),Je++}}function re($e,Le){var Ge=ge($e.huffmanTableDC),ze=Ge===0?0:we(Ge)<<C;Le[0]=$e.pred+=ze}function oe($e,Le){Le[0]|=he()<<C}var Ee=0;function Re($e,Le){if(Ee>0){Ee--;return}for(var Ge=O,ze=D;Ge<=ze;){var Je=ge($e.huffmanTableAC),ot=Je&15,Qe=Je>>4;if(ot===0){if(Qe<15){Ee=Se(Qe)+(1<<Qe)-1;break}Ge+=16;continue}Ge+=Qe;var at=a[Ge];Le[at]=we(ot)*(1<<C),Ge++}}var De=0,He;function qe($e,Le){for(var Ge=O,ze=D,Je=0;Ge<=ze;){var ot=a[Ge],Qe=Le[ot]<0?-1:1;switch(De){case 0:var at=ge($e.huffmanTableAC),st=at&15,Je=at>>4;if(st===0)Je<15?(Ee=Se(Je)+(1<<Je),De=4):(Je=16,De=1);else{if(st!==1)throw new Error("invalid ACn encoding");He=we(st),De=Je?2:3}continue;case 1:case 2:Le[ot]?Le[ot]+=(he()<<C)*Qe:(Je--,Je===0&&(De=De==2?3:0));break;case 3:Le[ot]?Le[ot]+=(he()<<C)*Qe:(Le[ot]=He<<C,De=0);break;case 4:Le[ot]&&(Le[ot]+=(he()<<C)*Qe);break}Ge++}De===4&&(Ee--,Ee===0&&(De=0))}function W($e,Le,Ge,ze,Je){var ot=Ge/N|0,Qe=Ge%N,at=ot*$e.v+ze,st=Qe*$e.h+Je;$e.blocks[at]===void 0&&U.tolerantDecoding||Le($e,$e.blocks[at][st])}function X($e,Le,Ge){var ze=Ge/$e.blocksPerLine|0,Je=Ge%$e.blocksPerLine;$e.blocks[ze]===void 0&&U.tolerantDecoding||Le($e,$e.blocks[ze][Je])}var te=M.length,ie,ye,be,Ae,J,ve;V?O===0?ve=R===0?re:oe:ve=R===0?Re:qe:ve=ne;var de=0,Oe,fe;te==1?fe=M[0].blocksPerLine*M[0].blocksPerColumn:fe=N*k.mcusPerColumn,F||(F=fe);for(var Ue,Ze;de<fe;){for(ye=0;ye<te;ye++)M[ye].pred=0;if(Ee=0,te==1)for(ie=M[0],J=0;J<F;J++)X(ie,ve,de),de++;else for(J=0;J<F;J++){for(ye=0;ye<te;ye++)for(ie=M[ye],Ue=ie.h,Ze=ie.v,be=0;be<Ze;be++)for(Ae=0;Ae<Ue;Ae++)W(ie,ve,de,be,Ae);if(de++,de===fe)break}if(de===fe)do{if(A[P]===255&&A[P+1]!==0)break;P+=1}while(P<A.length-2);if(ee=0,Oe=A[P]<<8|A[P+1],Oe<65280)throw new Error("marker was not found");if(Oe>=65488&&Oe<=65495)P+=2;else break}return P-j}function w(A,P){var k=[],M=P.blocksPerLine,F=P.blocksPerColumn,O=M<<3,D=new Int32Array(64),R=new Uint8Array(64);function C(Se,we,ne){var re=P.quantizationTable,oe,Ee,Re,De,He,qe,W,X,te,ie=ne,ye;for(ye=0;ye<64;ye++)ie[ye]=Se[ye]*re[ye];for(ye=0;ye<8;++ye){var be=8*ye;if(ie[1+be]==0&&ie[2+be]==0&&ie[3+be]==0&&ie[4+be]==0&&ie[5+be]==0&&ie[6+be]==0&&ie[7+be]==0){te=l*ie[0+be]+512>>10,ie[0+be]=te,ie[1+be]=te,ie[2+be]=te,ie[3+be]=te,ie[4+be]=te,ie[5+be]=te,ie[6+be]=te,ie[7+be]=te;continue}oe=l*ie[0+be]+128>>8,Ee=l*ie[4+be]+128>>8,Re=ie[2+be],De=ie[6+be],He=o*(ie[1+be]-ie[7+be])+128>>8,X=o*(ie[1+be]+ie[7+be])+128>>8,qe=ie[3+be]<<4,W=ie[5+be]<<4,te=oe-Ee+1>>1,oe=oe+Ee+1>>1,Ee=te,te=Re*m+De*g+128>>8,Re=Re*g-De*m+128>>8,De=te,te=He-W+1>>1,He=He+W+1>>1,W=te,te=X+qe+1>>1,qe=X-qe+1>>1,X=te,te=oe-De+1>>1,oe=oe+De+1>>1,De=te,te=Ee-Re+1>>1,Ee=Ee+Re+1>>1,Re=te,te=He*b+X*f+2048>>12,He=He*f-X*b+2048>>12,X=te,te=qe*c+W*s+2048>>12,qe=qe*s-W*c+2048>>12,W=te,ie[0+be]=oe+X,ie[7+be]=oe-X,ie[1+be]=Ee+W,ie[6+be]=Ee-W,ie[2+be]=Re+qe,ie[5+be]=Re-qe,ie[3+be]=De+He,ie[4+be]=De-He}for(ye=0;ye<8;++ye){var Ae=ye;if(ie[8+Ae]==0&&ie[16+Ae]==0&&ie[24+Ae]==0&&ie[32+Ae]==0&&ie[40+Ae]==0&&ie[48+Ae]==0&&ie[56+Ae]==0){te=l*ne[ye+0]+8192>>14,ie[0+Ae]=te,ie[8+Ae]=te,ie[16+Ae]=te,ie[24+Ae]=te,ie[32+Ae]=te,ie[40+Ae]=te,ie[48+Ae]=te,ie[56+Ae]=te;continue}oe=l*ie[0+Ae]+2048>>12,Ee=l*ie[32+Ae]+2048>>12,Re=ie[16+Ae],De=ie[48+Ae],He=o*(ie[8+Ae]-ie[56+Ae])+2048>>12,X=o*(ie[8+Ae]+ie[56+Ae])+2048>>12,qe=ie[24+Ae],W=ie[40+Ae],te=oe-Ee+1>>1,oe=oe+Ee+1>>1,Ee=te,te=Re*m+De*g+2048>>12,Re=Re*g-De*m+2048>>12,De=te,te=He-W+1>>1,He=He+W+1>>1,W=te,te=X+qe+1>>1,qe=X-qe+1>>1,X=te,te=oe-De+1>>1,oe=oe+De+1>>1,De=te,te=Ee-Re+1>>1,Ee=Ee+Re+1>>1,Re=te,te=He*b+X*f+2048>>12,He=He*f-X*b+2048>>12,X=te,te=qe*c+W*s+2048>>12,qe=qe*s-W*c+2048>>12,W=te,ie[0+Ae]=oe+X,ie[56+Ae]=oe-X,ie[8+Ae]=Ee+W,ie[48+Ae]=Ee-W,ie[16+Ae]=Re+qe,ie[40+Ae]=Re-qe,ie[24+Ae]=De+He,ie[32+Ae]=De-He}for(ye=0;ye<64;++ye){var J=128+(ie[ye]+8>>4);we[ye]=J<0?0:J>255?255:J}}E(O*F*8);for(var U,N,V=0;V<F;V++){var j=V<<3;for(U=0;U<8;U++)k.push(new Uint8Array(O));for(var K=0;K<M;K++){C(P.blocks[V][K],R,D);var ee=0,he=K<<3;for(N=0;N<8;N++){var ge=k[j+N];for(U=0;U<8;U++)ge[he+U]=R[ee++]}}}return k}function _(A){return A<0?0:A>255?255:A}u.prototype={load:function(P){var k=new XMLHttpRequest;k.open("GET",P,!0),k.responseType="arraybuffer",k.onload=(function(){var M=new Uint8Array(k.response||k.mozResponseArrayBuffer);this.parse(M),this.onload&&this.onload()}).bind(this),k.send(null)},parse:function(P){var k=this.opts.maxResolutionInMP*1e3*1e3,M=0;P.length;function F(){var Qe=P[M]<<8|P[M+1];return M+=2,Qe}function O(){var Qe=F(),at=P.subarray(M,M+Qe-2);return M+=at.length,at}function D(Qe){var at=1,st=1,We,pt;for(pt in Qe.components)Qe.components.hasOwnProperty(pt)&&(We=Qe.components[pt],at<We.h&&(at=We.h),st<We.v&&(st=We.v));var vt=Math.ceil(Qe.samplesPerLine/8/at),Y=Math.ceil(Qe.scanLines/8/st);for(pt in Qe.components)if(Qe.components.hasOwnProperty(pt)){We=Qe.components[pt];var me=Math.ceil(Math.ceil(Qe.samplesPerLine/8)*We.h/at),_e=Math.ceil(Math.ceil(Qe.scanLines/8)*We.v/st),Pe=vt*We.h,Ye=Y*We.v,et=Ye*Pe,nt=[];E(et*256);for(var Et=0;Et<Ye;Et++){for(var Pt=[],H=0;H<Pe;H++)Pt.push(new Int32Array(64));nt.push(Pt)}We.blocksPerLine=me,We.blocksPerColumn=_e,We.blocks=nt}Qe.maxH=at,Qe.maxV=st,Qe.mcusPerLine=vt,Qe.mcusPerColumn=Y}var R=null,C=null,U,N,V=[],j=[],K=[],ee=[],he=F(),ge=-1;if(this.comments=[],he!=65496)throw new Error("SOI not found");for(he=F();he!=65497;){var Se,we;switch(he){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var ne=O();if(he===65534){var re=String.fromCharCode.apply(null,ne);this.comments.push(re)}he===65504&&ne[0]===74&&ne[1]===70&&ne[2]===73&&ne[3]===70&&ne[4]===0&&(R={version:{major:ne[5],minor:ne[6]},densityUnits:ne[7],xDensity:ne[8]<<8|ne[9],yDensity:ne[10]<<8|ne[11],thumbWidth:ne[12],thumbHeight:ne[13],thumbData:ne.subarray(14,14+3*ne[12]*ne[13])}),he===65505&&ne[0]===69&&ne[1]===120&&ne[2]===105&&ne[3]===102&&ne[4]===0&&(this.exifBuffer=ne.subarray(5,ne.length)),he===65518&&ne[0]===65&&ne[1]===100&&ne[2]===111&&ne[3]===98&&ne[4]===101&&ne[5]===0&&(C={version:ne[6],flags0:ne[7]<<8|ne[8],flags1:ne[9]<<8|ne[10],transformCode:ne[11]});break;case 65499:for(var oe=F(),Ee=oe+M-2;M<Ee;){var Re=P[M++];E(256);var De=new Int32Array(64);if(Re>>4)if(Re>>4===1)for(we=0;we<64;we++){var He=a[we];De[He]=F()}else throw new Error("DQT: invalid table spec");else for(we=0;we<64;we++){var He=a[we];De[He]=P[M++]}V[Re&15]=De}break;case 65472:case 65473:case 65474:F(),U={},U.extended=he===65473,U.progressive=he===65474,U.precision=P[M++],U.scanLines=F(),U.samplesPerLine=F(),U.components={},U.componentsOrder=[];var qe=U.scanLines*U.samplesPerLine;if(qe>k){var W=Math.ceil((qe-k)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${W}MP`)}var X=P[M++],te;for(Se=0;Se<X;Se++){te=P[M];var ie=P[M+1]>>4,ye=P[M+1]&15,be=P[M+2];if(ie<=0||ye<=0)throw new Error("Invalid sampling factor, expected values above 0");U.componentsOrder.push(te),U.components[te]={h:ie,v:ye,quantizationIdx:be},M+=3}D(U),j.push(U);break;case 65476:var Ae=F();for(Se=2;Se<Ae;){var J=P[M++],ve=new Uint8Array(16),de=0;for(we=0;we<16;we++,M++)de+=ve[we]=P[M];E(16+de);var Oe=new Uint8Array(de);for(we=0;we<de;we++,M++)Oe[we]=P[M];Se+=17+de,(J>>4?K:ee)[J&15]=d(ve,Oe)}break;case 65501:F(),N=F();break;case 65500:F(),F();break;case 65498:F();var fe=P[M++],Ue=[],Ze;for(Se=0;Se<fe;Se++){Ze=U.components[P[M++]];var $e=P[M++];Ze.huffmanTableDC=ee[$e>>4],Ze.huffmanTableAC=K[$e&15],Ue.push(Ze)}var Le=P[M++],Ge=P[M++],ze=P[M++],Je=y(P,M,U,Ue,N,Le,Ge,ze>>4,ze&15,this.opts);M+=Je;break;case 65535:P[M]!==255&&M--;break;default:if(P[M-3]==255&&P[M-2]>=192&&P[M-2]<=254){M-=3;break}else if(he===224||he==225){if(ge!==-1)throw new Error(`first unknown JPEG marker at offset ${ge.toString(16)}, second unknown JPEG marker ${he.toString(16)} at offset ${(M-1).toString(16)}`);ge=M-1;const Qe=F();if(P[M+Qe-2]===255){M+=Qe-2;break}}throw new Error("unknown JPEG marker "+he.toString(16))}he=F()}if(j.length!=1)throw new Error("only single frame JPEGs supported");for(var Se=0;Se<j.length;Se++){var ot=j[Se].components;for(var we in ot)ot[we].quantizationTable=V[ot[we].quantizationIdx],delete ot[we].quantizationIdx}this.width=U.samplesPerLine,this.height=U.scanLines,this.jfif=R,this.adobe=C,this.components=[];for(var Se=0;Se<U.componentsOrder.length;Se++){var Ze=U.components[U.componentsOrder[Se]];this.components.push({lines:w(U,Ze),scaleX:Ze.h/U.maxH,scaleY:Ze.v/U.maxV})}},getData:function(P,k){var M=this.width/P,F=this.height/k,O,D,R,C,U,N,V,j,K,ee,he=0,ge,Se,we,ne,re,oe,Ee,Re,De,He,qe,W=P*k*this.components.length;E(W);var X=new Uint8Array(W);switch(this.components.length){case 1:for(O=this.components[0],ee=0;ee<k;ee++)for(U=O.lines[0|ee*O.scaleY*F],K=0;K<P;K++)ge=U[0|K*O.scaleX*M],X[he++]=ge;break;case 2:for(O=this.components[0],D=this.components[1],ee=0;ee<k;ee++)for(U=O.lines[0|ee*O.scaleY*F],N=D.lines[0|ee*D.scaleY*F],K=0;K<P;K++)ge=U[0|K*O.scaleX*M],X[he++]=ge,ge=N[0|K*D.scaleX*M],X[he++]=ge;break;case 3:for(qe=!0,this.adobe&&this.adobe.transformCode?qe=!0:typeof this.opts.colorTransform<"u"&&(qe=!!this.opts.colorTransform),O=this.components[0],D=this.components[1],R=this.components[2],ee=0;ee<k;ee++)for(U=O.lines[0|ee*O.scaleY*F],N=D.lines[0|ee*D.scaleY*F],V=R.lines[0|ee*R.scaleY*F],K=0;K<P;K++)qe?(ge=U[0|K*O.scaleX*M],Se=N[0|K*D.scaleX*M],we=V[0|K*R.scaleX*M],Re=_(ge+1.402*(we-128)),De=_(ge-.3441363*(Se-128)-.71413636*(we-128)),He=_(ge+1.772*(Se-128))):(Re=U[0|K*O.scaleX*M],De=N[0|K*D.scaleX*M],He=V[0|K*R.scaleX*M]),X[he++]=Re,X[he++]=De,X[he++]=He;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(qe=!1,this.adobe&&this.adobe.transformCode?qe=!0:typeof this.opts.colorTransform<"u"&&(qe=!!this.opts.colorTransform),O=this.components[0],D=this.components[1],R=this.components[2],C=this.components[3],ee=0;ee<k;ee++)for(U=O.lines[0|ee*O.scaleY*F],N=D.lines[0|ee*D.scaleY*F],V=R.lines[0|ee*R.scaleY*F],j=C.lines[0|ee*C.scaleY*F],K=0;K<P;K++)qe?(ge=U[0|K*O.scaleX*M],Se=N[0|K*D.scaleX*M],we=V[0|K*R.scaleX*M],ne=j[0|K*C.scaleX*M],re=255-_(ge+1.402*(we-128)),oe=255-_(ge-.3441363*(Se-128)-.71413636*(we-128)),Ee=255-_(ge+1.772*(Se-128))):(re=U[0|K*O.scaleX*M],oe=N[0|K*D.scaleX*M],Ee=V[0|K*R.scaleX*M],ne=j[0|K*C.scaleX*M]),X[he++]=255-re,X[he++]=255-oe,X[he++]=255-Ee,X[he++]=255-ne;break;default:throw new Error("Unsupported color mode")}return X},copyToImageData:function(P,k){var M=P.width,F=P.height,O=P.data,D=this.getData(M,F),R=0,C=0,U,N,V,j,K,ee,he,ge,Se;switch(this.components.length){case 1:for(N=0;N<F;N++)for(U=0;U<M;U++)V=D[R++],O[C++]=V,O[C++]=V,O[C++]=V,k&&(O[C++]=255);break;case 3:for(N=0;N<F;N++)for(U=0;U<M;U++)he=D[R++],ge=D[R++],Se=D[R++],O[C++]=he,O[C++]=ge,O[C++]=Se,k&&(O[C++]=255);break;case 4:for(N=0;N<F;N++)for(U=0;U<M;U++)K=D[R++],ee=D[R++],V=D[R++],j=D[R++],he=255-_(K*(1-j/255)+j),ge=255-_(ee*(1-j/255)+j),Se=255-_(V*(1-j/255)+j),O[C++]=he,O[C++]=ge,O[C++]=Se,k&&(O[C++]=255);break;default:throw new Error("Unsupported color mode")}}};var T=0,S=0;function E(A=0){var P=T+A;if(P>S){var k=Math.ceil((P-S)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${k}MB`)}T=P}return u.resetMaxMemoryUsage=function(A){T=0,S=A},u.getBytesAllocated=function(){return T},u.requestMemoryAllocation=E,u}();r.exports=t;function t(n,a={}){var s={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},c={...s,...a},f=new Uint8Array(n),b=new e;b.opts=c,e.resetMaxMemoryUsage(c.maxMemoryUsageInMB*1024*1024),b.parse(f);var g=c.formatAsRGBA?4:3,m=b.width*b.height*g;try{e.requestMemoryAllocation(m);var l={width:b.width,height:b.height,exifBuffer:b.exifBuffer,data:c.useTArray?new Uint8Array(m):Buffer.alloc(m)};b.comments.length>0&&(l.comments=b.comments)}catch(o){throw o instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+m):o instanceof ReferenceError&&o.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):o}return b.copyToImageData(l,c.formatAsRGBA),l}})(decoder);var decoderExports=decoder.exports,encode$1=encoderExports,decode$4=decoderExports,jpegJs={encode:encode$1,decode:decode$4};let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let r=0;r<chars.length;r++)lookup[chars.charCodeAt(r)]=r;function encode(r){let e,t=r.length,n="";for(e=0;e<t;e+=3)n+=chars[r[e]>>2],n+=chars[(r[e]&3)<<4|r[e+1]>>4],n+=chars[(r[e+1]&15)<<2|r[e+2]>>6],n+=chars[r[e+2]&63];return t%3===2?n=`${n.substring(0,n.length-1)}=`:t%3===1&&(n=`${n.substring(0,n.length-2)}==`),n}function decode$3(r){let e=r.length*.75,t=r.length,n=0,a,s,c,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const b=new Uint8Array(e);for(let g=0;g<t;g+=4)a=lookup[r.charCodeAt(g)],s=lookup[r.charCodeAt(g+1)],c=lookup[r.charCodeAt(g+2)],f=lookup[r.charCodeAt(g+3)],b[n++]=a<<2|s>>4,b[n++]=(s&15)<<4|c>>2,b[n++]=(c&3)<<6|f&63;return b}function toBase64URL(r,e){const t=encode(r);return`data:${e};base64,${t}`}const ImageData$1=self.ImageData,DOMImage=self.Image;function createCanvas(r,e){let t=self.document.createElement("canvas");return t.width=r,t.height=e,t}function fetchBinary(r,{withCredentials:e=!1}={}){return new Promise(function(t,n){let a=new self.XMLHttpRequest;a.open("GET",r,!0),a.responseType="arraybuffer",a.withCredentials=e,a.onload=function(s){this.status!==200?n(s):t(this.response)},a.onerror=n,a.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType$1(r){return r.includes("/")||(r=`image/${r}`),r}function encodeJpeg(r,e={}){const t={width:r.width,height:r.height,data:r.getRGBAData()};return jpegJs.encode(t,e.quality).data}function encodePng(r,e){const t={width:r.width,height:r.height,channels:r.channels,depth:r.bitDepth,data:r.data};return(t.depth===1||t.depth===32)&&(t.depth=8,t.channels=4,t.data=r.getRGBAData()),encodePng$1(t,e)}const exportMethods={save(r,e={}){const{useCanvas:t=!1,encoder:n=void 0}=e;let{format:a}=e;if(!a){const s=/\.(?<format>[a-zA-Z]+)$/.exec(r);s&&(a=s.groups.format.toLowerCase())}if(!a)throw new Error("file format not provided");return new Promise((s,c)=>{let f,b;switch(a.toLowerCase()){case"png":{t?f=this.getCanvas().pngStream():b=encodePng(this,n);break}case"jpg":case"jpeg":t?f=this.getCanvas().jpegStream():b=encodeJpeg(this,n);break;case"bmp":b=encode$2(this,n);break;default:throw new RangeError(`invalid output format: ${a}`)}if(f){let g=createWriteStream();g.on("finish",s),g.on("error",c),f.pipe(g)}else b&&writeFile()})},toDataURL(r="image/png",e={}){typeof r=="object"&&(e=r,r="image/png");const{useCanvas:t=!1,encoder:n=void 0}=e;r=getType$1(r);function a(s,c){const f=s(c,n);return toBase64URL(f,r)}return r==="image/bmp"?a(encode$2,this):r==="image/png"&&!t?a(encodePng,this):r==="image/jpeg"&&!t?a(encodeJpeg,this):this.getCanvas().toDataURL(r)},toBuffer(r={}){const{format:e="png",encoder:t=void 0}=r;switch(e.toLowerCase()){case"png":return encodePng(this,t);case"jpeg":case"jpg":return encodeJpeg(this,t);case"bmp":return encode$2(this,t);default:throw new RangeError(`invalid output format: ${e}`)}},toBase64(r="image/png",e={}){if(e.async)return this.toDataURL(r,e).then(function(t){return t.substring(t.indexOf(",")+1)});{const t=this.toDataURL(r,e);return t.substring(t.indexOf(",")+1)}},toBlob(r="image/png",e=.8){return canvasToBlob(this.getCanvas(),r,e)},getCanvas(){const r=new ImageData$1(this.getRGBAData({clamped:!0}),this.width,this.height);let e=createCanvas(this.width,this.height);return e.getContext("2d").putImageData(r,0,0),e}};function setExportMethods(r){for(const e in exportMethods)r.prototype[e]=exportMethods[e]}var hasOwn$1={exports:{}};const name$1="has-own",version="1.0.1",description="A safer .hasOwnProperty() - hasOwn(name, obj)",main$1="index.js",scripts={test:"make test"},author="Aaron Heckmann <aaron.heckmann+github@gmail.com>",license="MIT",repository={type:"git",url:"git://github.com/aheckmann/has-own.git"},homepage="https://github.com/aheckmann/has-own/",devDependencies={mocha:"^6.2.2"},require$$0$3={name:name$1,version,description,main:main$1,scripts,author,license,repository,homepage,devDependencies};(function(r,e){var t=Object.prototype.hasOwnProperty;r.exports=e=function(a,s){return t.call(s,a)},e.version=require$$0$3.version})(hasOwn$1,hasOwn$1.exports);var hasOwnExports=hasOwn$1.exports;const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(r,e,t={}){let{inPlace:n=!1,returnThis:a=!0,partialArgs:s=[]}=t;return n?Image$1.prototype[r]=function(...c){this.computed=null;let f=e.apply(this,[...s,...c]);return a?this:f}:Image$1.prototype[r]=function(...c){return e.apply(this,[...s,...c])},Image$1}function extendProperty(r,e,t={}){let{partialArgs:n=[]}=t;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(r,this.computed))return this.computed[r];let a=e.apply(this,n);return this.computed[r]=a,a},Object.defineProperty(Image$1.prototype,r,computedPropertyDescriptor$1),Image$1}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(r={}){const{clamped:e}=r;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const t=this.width*this.height*4;let n=e?new Uint8ClampedArray(t):new Uint8Array(t);return this.bitDepth===1?fillDataFromBinary(this,n):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,n):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,n))):this.components===1?fillDataFromGrey(this,n):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,n)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,n)):fillAlpha(this,n),n}function fillDataFromBinary(r,e){for(let t=0;t<r.size;t++){const n=r.getBit(t);e[t*4]=n*255,e[t*4+1]=n*255,e[t*4+2]=n*255}}function fillDataFromGrey32(r,e){const t=r.min[0],a=r.max[0]-t;for(let s=0;s<r.size;s++){const c=Math.floor(255*(r.data[s]-t)/a);e[s*4]=c,e[s*4+1]=c,e[s*4+2]=c}}function fillDataFromRGB32(r,e){const t=Math.min(...r.min),a=Math.max(...r.max)-t;for(let s=0;s<r.size;s++){const c=Math.floor(255*(r.data[s*3]-t)/a),f=Math.floor(255*(r.data[s*3+1]-t)/a),b=Math.floor(255*(r.data[s*3+2]-t)/a);e[s*4]=c,e[s*4+1]=f,e[s*4+2]=b}}function fillDataFromGrey(r,e){for(let t=0;t<r.size;t++)e[t*4]=r.data[t*r.channels]>>>r.bitDepth-8,e[t*4+1]=r.data[t*r.channels]>>>r.bitDepth-8,e[t*4+2]=r.data[t*r.channels]>>>r.bitDepth-8}function fillDataFromRGB(r,e){for(let t=0;t<r.size;t++)e[t*4]=r.data[t*r.channels]>>>r.bitDepth-8,e[t*4+1]=r.data[t*r.channels+1]>>>r.bitDepth-8,e[t*4+2]=r.data[t*r.channels+2]>>>r.bitDepth-8}function copyAlpha(r,e){for(let t=0;t<r.size;t++)e[t*4+3]=r.data[t*r.channels+r.components]>>r.bitDepth-8}function fillAlpha(r,e){for(let t=0;t<r.size;t++)e[t*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(r){const e=kinds[r];if(!e)throw new RangeError(`invalid image kind: ${r}`);return e}const validBitDepth=[1,8,16,32];function verifyKindDefinition(r){const{components:e,alpha:t,bitDepth:n,colorModel:a}=r;if(!Number.isInteger(e)||e<=0)throw new RangeError(`invalid components: ${e}. Must be a positive integer`);if(t!==0&&t!==1&&typeof t!="boolean")throw new TypeError(`invalid alpha: ${t}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(n))throw new RangeError(`invalid bitDepth: ${n}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[a])throw new RangeError(`invalid colorModel: ${a}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(r,e,t){let n=e*r;return t===1&&(n=Math.ceil(n/8)),n}function createPixelArray(r,e,t,n,a,s){const c=n*r;let f;switch(a){case 1:f=new Uint8Array(Math.ceil(c/8));break;case 8:f=new Uint8Array(c);break;case 16:f=new Uint16Array(c);break;case 32:f=new Float32Array(c);break;default:throw new Error(`Cannot create pixel array for bit depth ${a}`)}if(t)for(let b=e;b<f.length;b+=n)f[b]=s;return f}const defaultByteLength=1024*8,charArray=[];let IOBuffer$2=class{constructor(e,t){t=t||{},e===void 0&&(e=defaultByteLength),typeof e=="number"&&(e=new ArrayBuffer(e));let n=e.byteLength;const a=t.offset?t.offset>>>0:0;e.buffer&&(n=e.byteLength-a,e.byteLength!==e.buffer.byteLength?e=e.buffer.slice(e.byteOffset+a,e.byteOffset+e.byteLength):a?e=e.buffer.slice(a):e=e.buffer),this.buffer=e,this.length=n,this.byteLength=n,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=n||defaultByteLength,this._mark=0}available(e){return e===void 0&&(e=1),this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(e){e===void 0&&(e=1),this.offset+=e}seek(e){this.offset=e}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(e){if(e===void 0&&(e=1),!this.available(e)){const t=this._increment+this._increment;this._increment=t;const n=this.length+t,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e){e===void 0&&(e=1);for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t}readInt16(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e){e===void 0&&(e=1),charArray.length=e;for(var t=0;t<e;t++)charArray[t]=this.readChar();return charArray.join("")}writeBoolean(e){this.writeUint8(e?255:0)}writeInt8(e){this.ensureAvailable(1),this._data.setInt8(this.offset++,e)}writeUint8(e){this.ensureAvailable(1),this._data.setUint8(this.offset++,e)}writeByte(e){this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t])}writeInt16(e){this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2}writeUint16(e){this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2}writeInt32(e){this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4}writeUint32(e){this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4}writeFloat32(e){this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4}writeFloat64(e){this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8}writeChar(e){this.writeUint8(e.charCodeAt(0))}writeChars(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}};var IOBuffer_1=IOBuffer$2,src$3={};const tagsById$5={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName$5={};for(var i$2 in tagsById$5)tagsByName$5[tagsById$5[i$2]]=i$2;var standard$1={tagsById:tagsById$5,tagsByName:tagsByName$5};const tagsById$4={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$4={};for(var i$1 in tagsById$4)tagsByName$4[tagsById$4[i$1]]=i$1;var exif$1={tagsById:tagsById$4,tagsByName:tagsByName$4};const tagsById$3={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$3={};for(var i in tagsById$3)tagsByName$3[tagsById$3[i]]=i;var gps$1={tagsById:tagsById$3,tagsByName:tagsByName$3};const tags$1={standard:standard$1,exif:exif$1,gps:gps$1};let IFD$2=class{constructor(e){if(!e)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=e,this._map=null}get(e){if(typeof e=="number")return this.fields.get(e);if(typeof e=="string")return this.fields.get(tags$1[this.kind].tagsByName[e]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const t=tags$1[this.kind].tagsById;for(var e of this.fields.keys())t[e]&&(this._map[t[e]]=this.fields.get(e))}return this._map}};var ifd=IFD$2;const Ifd=ifd,dateTimeRegex$1=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;let TiffIfd$1=class extends Ifd{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var e=new Date,t=dateTimeRegex$1.exec(this.dateTime);return e.setFullYear(t[1],t[2]-1,t[3]),e.setHours(t[4],t[5],t[6]),e}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return alwaysArray$1(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return alwaysArray$1(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}};function alwaysArray$1(r){return typeof r=="number"?[r]:r}var tiffIfd=TiffIfd$1,ifdValue={},types$1=new Map([[1,[1,readByte$1]],[2,[1,readASCII$1]],[3,[2,readShort$1]],[4,[4,readLong$1]],[5,[8,readRational$1]],[6,[1,readSByte$1]],[7,[1,readByte$1]],[8,[2,readSShort$1]],[9,[4,readSLong$1]],[10,[8,readSRational$1]],[11,[4,readFloat$1]],[12,[8,readDouble$1]]]);ifdValue.getByteLength=function(r,e){return types$1.get(r)[0]*e};ifdValue.readData=function(r,e,t){return types$1.get(e)[1](r,t)};function readByte$1(r,e){if(e===1)return r.readUint8();for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=r.readUint8();return t}function readASCII$1(r,e){for(var t=[],n="",a=0;a<e;a++){var s=String.fromCharCode(r.readUint8());s==="\0"?(t.push(n),n=""):n+=s}return t.length===1?t[0]:t}function readShort$1(r,e){if(e===1)return r.readUint16();for(var t=new Uint16Array(e),n=0;n<e;n++)t[n]=r.readUint16();return t}function readLong$1(r,e){if(e===1)return r.readUint32();for(var t=new Uint32Array(e),n=0;n<e;n++)t[n]=r.readUint32();return t}function readRational$1(r,e){if(e===1)return r.readUint32()/r.readUint32();for(var t=new Array(e),n=0;n<e;n++)t[n]=r.readUint32()/r.readUint32();return t}function readSByte$1(r,e){if(e===1)return r.readInt8();for(var t=new Int8Array(e),n=0;n<e;n++)t[n]=r.readInt8();return t}function readSShort$1(r,e){if(e===1)return r.readInt16();for(var t=new Int16Array(e),n=0;n<e;n++)t[n]=r.readInt16();return t}function readSLong$1(r,e){if(e===1)return r.readInt32();for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=r.readInt32();return t}function readSRational$1(r,e){if(e===1)return r.readInt32()/r.readInt32();for(var t=new Array(e),n=0;n<e;n++)t[n]=r.readInt32()/r.readInt32();return t}function readFloat$1(r,e){if(e===1)return r.readFloat32();for(var t=new Float32Array(e),n=0;n<e;n++)t[n]=r.readFloat32();return t}function readDouble$1(r,e){if(e===1)return r.readFloat64();for(var t=new Float64Array(e),n=0;n<e;n++)t[n]=r.readFloat64();return t}const IOBuffer$1=IOBuffer_1,IFD$1=ifd,TiffIFD=tiffIfd,IFDValue=ifdValue,defaultOptions$d={ignoreImageData:!1,onlyFirst:!1};let TIFFDecoder$2=class extends IOBuffer$1{constructor(e,t){super(e,t),this._nextIFD=0}decode(e){e=Object.assign({},defaultOptions$d,e);const t=[];for(this.decodeHeader();this._nextIFD;)if(t.push(this.decodeIFD(e)),e.onlyFirst)return t[0];return t}decodeHeader(){let e=this.readUint16();if(e===18761)this.setLittleEndian();else if(e===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+e.toString(16));if(e=this.readUint16(),e!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(e){this.seek(this._nextIFD);var t;e.kind?t=new IFD$1(e.kind):t=new TiffIFD;const n=this.readUint16();for(var a=0;a<n;a++)this.decodeIFDEntry(t);return e.ignoreImageData||this.decodeImageData(t),this._nextIFD=this.readUint32(),t}decodeIFDEntry(e){const t=this.offset,n=this.readUint16(),a=this.readUint16(),s=this.readUint32();if(a<1||a>12){this.skip(4);return}IFDValue.getByteLength(a,s)>4&&this.seek(this.readUint32());const f=IFDValue.readData(this,a,s);if(e.fields.set(n,f),n===34665||n===34853){let b=this.offset,g;n===34665?g="exif":n===34853&&(g="gps"),this._nextIFD=f,e[g]=this.decodeIFD({kind:g,ignoreImageData:!0}),this.offset=b}this.seek(t),this.skip(12)}decodeImageData(e){const t=e.orientation;switch(t&&t!==1&&unsupported$1("orientation",t),e.type){case 1:case 2:this.readStripData(e);break;default:unsupported$1("image type",e.type);break}}readStripData(e){const t=e.width,n=e.height,a=validateBitDepth(e.bitsPerSample),s=e.sampleFormat;let c=t*n;const f=getDataArray$1(c,1,a,s),b=e.compression,m=e.rowsPerStrip*t,l=e.stripOffsets,o=e.stripByteCounts;for(var u=0,d=0;d<l.length;d++){var y=this.getStripData(b,l[d],o[d]),w=c>m?m:c;c-=w,a===8?u=fill8bit$1(f,y,u,w):a===16?u=fill16bit$1(f,y,u,w,this.isLittleEndian()):a===32&&s===3?u=fillFloat32$1(f,y,u,w,this.isLittleEndian()):unsupported$1("bitDepth",a)}e.data=f}getStripData(e,t,n){switch(e){case 1:return new DataView(this.buffer,t,n);case 2:case 32773:return unsupported$1("Compression",e);default:throw new Error("invalid compression: "+e)}}};var tiffDecoder=TIFFDecoder$2;function getDataArray$1(r,e,t,n){return t===8?new Uint8Array(r*e):t===16?new Uint16Array(r*e):t===32&&n===3?new Float32Array(r*e):unsupported$1("bit depth / sample format",t+" / "+n)}function fill8bit$1(r,e,t,n){for(var a=0;a<n;a++)r[t++]=e.getUint8(a);return t}function fill16bit$1(r,e,t,n,a){for(var s=0;s<n*2;s+=2)r[t++]=e.getUint16(s,a);return t}function fillFloat32$1(r,e,t,n,a){for(var s=0;s<n*4;s+=4)r[t++]=e.getFloat32(s,a);return t}function unsupported$1(r,e){throw new Error("Unsupported "+r+": "+e)}function validateBitDepth(r){if(r.length){const t=r;r=t[0];for(var e=0;e<t.length;e++)t[e]!==r&&unsupported$1("bit depth",t)}return r}const TIFFDecoder$1=tiffDecoder;var decode$2=function(e,t){return new TIFFDecoder$1(e,t).decode(t)};src$3.decode=decode$2;const IOBuffer=IOBuffer_1,tiff=src$3;function decode$1(r){const e=new IOBuffer(r),t={};if(e.setBigEndian(),e.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(e.readUint16()===65505){e.readUint16();const s=e.readBytes(6);if(s[0]===69&&s[1]===120&&s[2]===105&&s[3]===102&&s[4]===0&&s[5]===0){const c=tiff.decode(e,{onlyFirst:!0,ignoreImageData:!0,offset:e.offset});t.exif=c}}return t}var decode_1=decode$1,decode=decode_1,imageType$2={exports:{}},fileType$1={exports:{}};(function(module){const toBytes=r=>[...r].map(e=>e.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(r,e=0){let t=r[e],n=1,a=0;for(;++a<8;)n*=256,t+=r[e+a]*n;return t}const fileType=r=>{if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const e=r instanceof Uint8Array?r:new Uint8Array(r);if(!(e&&e.length>1))return null;const t=(a,s)=>{s=Object.assign({offset:0},s);for(let c=0;c<a.length;c++)if(s.mask){if(a[c]!==(s.mask[c]&e[c+s.offset]))return!1}else if(a[c]!==e[c+s.offset])return!1;return!0},n=(a,s)=>t(toBytes(a),s);if(t([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(t([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(t([71,73,70]))return{ext:"gif",mime:"image/gif"};if(t([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(t([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((t([73,73,42,0])||t([77,77,0,42]))&&t([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(t([73,73,42,0])||t([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(t([66,77]))return{ext:"bmp",mime:"image/bmp"};if(t([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(t([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(t([80,75,3,4])){if(t([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(t(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(n("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(n("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(n("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const a=(b,g=0)=>b.findIndex((m,l,o)=>l>=g&&o[l]===80&&o[l+1]===75&&o[l+2]===3&&o[l+3]===4);let s=0,c=!1,f=null;do{const b=s+30;if(c||(c=t(oxmlContentTypes,{offset:b})||t(oxmlRels,{offset:b})),f||(n("word/",{offset:b})?f={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:n("ppt/",{offset:b})?f={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:n("xl/",{offset:b})&&(f={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),c&&f)return f;s=a(e,b)}while(s>=0);if(f)return f}if(t([80,75])&&(e[2]===3||e[2]===5||e[2]===7)&&(e[3]===4||e[3]===6||e[3]===8))return{ext:"zip",mime:"application/zip"};if(t([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(t([82,97,114,33,26,7])&&(e[6]===0||e[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(t([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(t([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(t([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(t([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(t([51,103,112,53])||t([0,0,0])&&t([102,116,121,112],{offset:4})&&(t([109,112,52,49],{offset:8})||t([109,112,52,50],{offset:8})||t([105,115,111,109],{offset:8})||t([105,115,111,50],{offset:8})||t([109,109,112,52],{offset:8})||t([77,52,86],{offset:8})||t([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(t([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(t([26,69,223,163])){const a=e.subarray(4,4100),s=a.findIndex((c,f,b)=>b[f]===66&&b[f+1]===130);if(s!==-1){const c=s+3,f=b=>[...b].every((g,m)=>a[c+m]===g.charCodeAt(0));if(f("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(f("webm"))return{ext:"webm",mime:"video/webm"}}}if(t([0,0,0,20,102,116,121,112,113,116,32,32])||t([102,114,101,101],{offset:4})||t([102,116,121,112,113,116,32,32],{offset:4})||t([109,100,97,116],{offset:4})||t([109,111,111,118],{offset:4})||t([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(t([82,73,70,70])){if(t([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(t([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(t([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(t([48,38,178,117,142,102,207,17,166,217])){let a=30;do{const s=readUInt64LE(e,a+16);if(t([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:a})){if(t([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:a+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(t([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:a+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}a+=s}while(a+24<=e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(t([0,0,1,186])||t([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(t([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let a=0;a<2&&a<e.length-16;a++){if(t([73,68,51],{offset:a})||t([255,226],{offset:a,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(t([255,228],{offset:a,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(t([255,248],{offset:a,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(t([255,240],{offset:a,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(t([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(t([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(t([79,103,103,83]))return t([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:t([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:t([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:t([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:t([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(t([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(t([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(t([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(t([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(t([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(t([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((e[0]===67||e[0]===70)&&t([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(t([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(t([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(t([119,79,70,70])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(t([119,79,70,50])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(t([76,80],{offset:34})&&(t([0,0,1],{offset:8})||t([1,0,2],{offset:8})||t([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(t([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(t([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(t([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(t([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(t([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(t([37,33]))return{ext:"ps",mime:"application/postscript"};if(t([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(t([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(t([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(t([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(t([77,83,67,70])||t([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(t([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(t([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(t([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(t([31,160])||t([31,157]))return{ext:"Z",mime:"application/x-compress"};if(t([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(t([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(t([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(t([71],{offset:4})&&(t([71],{offset:192})||t([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(t([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(t([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(t([0,0,0,12,106,80,32,32,13,10,135,10])){if(t([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(t([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(t([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(t([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(t([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(t([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(t([102,116,121,112],{offset:4})){if(t([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(t([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(t([104,101,105,99],{offset:8})||t([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(t([104,101,118,99],{offset:8})||t([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return t([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:t([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:t([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:t([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:t([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:t([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:t([212,195,178,161])||t([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const r=new stream.PassThrough,e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{r.fileType=fileType(e)}catch(t){reject(t)}readableStream.unshift(e),stream.pipeline?resolve(stream.pipeline(readableStream,r,()=>{})):resolve(readableStream.pipe(r))})})})(fileType$1);var fileTypeExports=fileType$1.exports;const fileType=fileTypeExports,imageExts=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),imageType=r=>{const e=fileType(r);return imageExts.has(e&&e.ext)?e:null};imageType$2.exports=imageType;imageType$2.exports.default=imageType;Object.defineProperty(imageType,"minimumBytes",{value:fileType.minimumBytes});var imageTypeExports=imageType$2.exports;const imageType$1=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(r){if(r.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const e=r.rowsPerStrip*r.width*r.samplesPerPixel*(r.bitsPerSample/8);return new Array(r.stripOffsets.length).fill(e)}function applyHorizontalDifferencing8Bit(r,e,t){let n=0;for(;n<r.length;){for(let a=t;a<e*t;a+=t)for(let s=0;s<t;s++)r[n+a+s]=r[n+a+s]+r[n+a-(t-s)]&255;n+=e*t}}function applyHorizontalDifferencing16Bit(r,e,t){let n=0;for(;n<r.length;){for(let a=t;a<e*t;a+=t)for(let s=0;s<t;s++)r[n+a+s]=r[n+a+s]+r[n+a-(t-s)]&65535;n+=e*t}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let r in tagsById$2)tagsByName$2[tagsById$2[r]]=Number(r);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let r in tagsById$1)tagsByName$1[tagsById$1[r]]=Number(r);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let r in tagsById)tagsByName[tagsById[r]]=Number(r);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(e){if(!e)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=e,this._hasMap=!1,this._map={}}get(e){if(typeof e=="number")return this.fields.get(e);if(typeof e=="string")return this.fields.get(tags[this.kind].tagsByName[e]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const e=tags[this.kind].tagsById;for(let t of this.fields.keys())e[t]&&(this._map[e[t]]=this.fields.get(t));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(r,e){const t=types.get(r);if(!t)throw new Error(`type not found: ${r}`);return t[0]*e}function readData(r,e,t){const n=types.get(e);if(!n)throw new Error(`type not found: ${e}`);return n[1](r,t)}function readByte(r,e){if(e===1)return r.readUint8();let t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r.readUint8();return t}function readASCII(r,e){let t=[],n="";for(let a=0;a<e;a++){let s=String.fromCharCode(r.readUint8());s==="\0"?(t.push(n),n=""):n+=s}return t.length===1?t[0]:t}function readShort(r,e){if(e===1)return r.readUint16();let t=new Uint16Array(e);for(let n=0;n<e;n++)t[n]=r.readUint16();return t}function readLong(r,e){if(e===1)return r.readUint32();let t=new Uint32Array(e);for(let n=0;n<e;n++)t[n]=r.readUint32();return t}function readRational(r,e){if(e===1)return r.readUint32()/r.readUint32();let t=new Array(e);for(let n=0;n<e;n++)t[n]=r.readUint32()/r.readUint32();return t}function readSByte(r,e){if(e===1)return r.readInt8();let t=new Int8Array(e);for(let n=0;n<e;n++)t[n]=r.readInt8();return t}function readSShort(r,e){if(e===1)return r.readInt16();let t=new Int16Array(e);for(let n=0;n<e;n++)t[n]=r.readInt16();return t}function readSLong(r,e){if(e===1)return r.readInt32();let t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=r.readInt32();return t}function readSRational(r,e){if(e===1)return r.readInt32()/r.readInt32();let t=new Array(e);for(let n=0;n<e;n++)t[n]=r.readInt32()/r.readInt32();return t}function readFloat(r,e){if(e===1)return r.readFloat32();let t=new Float32Array(e);for(let n=0;n<e;n++)t[n]=r.readFloat32();return t}function readDouble(r,e){if(e===1)return r.readFloat64();let t=new Float64Array(e);for(let n=0;n<e;n++)t[n]=r.readFloat64();return t}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let e=0;e<256;e++)stringTable.push([e]);const r=[];for(let e=256;e<4096;e++)stringTable.push(r)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(e){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.outData=new IOBuffer$4(e.byteLength),this.initializeTable()}decode(){let e=0,t=0;for(;(e=this.getNextCode())!==EOI_CODE;)if(e===CLEAR_CODE){if(this.initializeTable(),e=this.getNextCode(),e===EOI_CODE)break;this.writeString(this.stringFromCode(e)),t=e}else if(this.isInTable(e))this.writeString(this.stringFromCode(e)),this.addStringToTable(this.stringFromCode(t).concat(this.stringFromCode(e)[0])),t=e;else{const a=this.stringFromCode(t).concat(this.stringFromCode(t)[0]);this.writeString(a),this.addStringToTable(a),t=e}const n=this.outData.toArray();return new DataView(n.buffer,n.byteOffset,n.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(e){this.outData.writeBytes(e)}stringFromCode(e){return stringTable[e]}isInTable(e){return e<this.tableLength}addStringToTable(e){if(stringTable[this.tableLength++]=e,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const e=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:e}}function decompressLzw(r){return new LzwDecoder(r).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let e=new Date,t=dateTimeRegex.exec(this.dateTime);if(t===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return e.setFullYear(Number(t[1]),Number(t[2])-1,Number(t[3])),e.setHours(Number(t[4]),Number(t[5]),Number(t[6])),e}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const e=this.get("BitsPerSample");return e&&typeof e!="number"?e[0]:e}get alpha(){const e=this.extraSamples;return e?e[0]!==0:!1}get associatedAlpha(){const e=this.extraSamples;return e?e[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const e=2**this.bitsPerSample,t=this.get("ColorMap");if(!t)return;if(t.length!==3*e)throw new Error(`ColorMap size must be ${e}`);const n=[];for(let a=0;a<e;a++)n.push([t[a],t[a+e],t[a+2*e]]);return n}}function alwaysArray(r){return typeof r=="number"?[r]:r}function decompressZlib(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),t=inflate_1(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}const defaultOptions$c={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer$4{constructor(e){super(e),this._nextIFD=0}get isMultiPage(){let e=0;for(this.decodeHeader();this._nextIFD;)if(e++,this.decodeIFD({ignoreImageData:!0},!0),e===2)return!0;if(e===1)return!1;throw unsupported("ifdCount",e)}get pageCount(){let e=0;for(this.decodeHeader();this._nextIFD;)e++,this.decodeIFD({ignoreImageData:!0},!0);if(e>0)return e;throw unsupported("ifdCount",e)}decode(e={}){e=Object.assign({},defaultOptions$c,e);const t=[];for(this.decodeHeader();this._nextIFD;)if(t.push(this.decodeIFD(e,!0)),e.onlyFirst)return[t[0]];return t}decodeHeader(){const e=this.readUint16();if(e===18761)this.setLittleEndian();else if(e===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${e.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(e,t){this.seek(this._nextIFD);let n;if(t)n=new TiffIfd;else{if(!e.kind)throw new Error("kind is missing");n=new IFD(e.kind)}const a=this.readUint16();for(let s=0;s<a;s++)this.decodeIFDEntry(n);if(!e.ignoreImageData){if(!(n instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(n)}return this._nextIFD=this.readUint32(),n}decodeIFDEntry(e){const t=this.offset,n=this.readUint16(),a=this.readUint16(),s=this.readUint32();if(a<1||a>12){this.skip(4);return}getByteLength(a,s)>4&&this.seek(this.readUint32());const f=readData(this,a,s);if(e.fields.set(n,f),n===34665||n===34853){let b=this.offset,g="exif";n===34665?g="exif":n===34853&&(g="gps"),this._nextIFD=f,e[g]=this.decodeIFD({kind:g,ignoreImageData:!0},!1),this.offset=b}this.seek(t),this.skip(12)}decodeImageData(e){const t=e.orientation;if(t&&t!==1)throw unsupported("orientation",t);switch(e.type){case 0:case 1:case 2:case 3:this.readStripData(e);break;default:throw unsupported("image type",e.type)}if(this.applyPredictor(e),this.convertAlpha(e),e.type===0){const n=e.bitsPerSample,a=Math.pow(2,n)-1;for(let s=0;s<e.data.length;s++)e.data[s]=a-e.data[s]}}readStripData(e){const t=e.width,n=e.height,a=e.bitsPerSample,s=e.sampleFormat,c=t*n*e.samplesPerPixel,f=getDataArray(c,a,s),g=e.rowsPerStrip*t*e.samplesPerPixel,m=e.stripOffsets,l=e.stripByteCounts||guessStripByteCounts(e);let o=c,u=0;for(let d=0;d<m.length;d++){let y=new DataView(this.buffer,this.byteOffset+m[d],l[d]),w=o>g?g:o;o-=w;let _=y;switch(e.compression){case 1:break;case 5:{_=decompressLzw(y);break}case 8:{_=decompressZlib(y);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",e.compression)}u=this.fillUncompressed(a,s,f,_,u,w)}e.data=f}fillUncompressed(e,t,n,a,s,c){if(e===8)return fill8bit(n,a,s,c);if(e===16)return fill16bit(n,a,s,c,this.isLittleEndian());if(e===32&&t===3)return fillFloat32(n,a,s,c,this.isLittleEndian());throw unsupported("bitDepth",e)}applyPredictor(e){const t=e.bitsPerSample;switch(e.predictor){case 1:break;case 2:{if(t===8)applyHorizontalDifferencing8Bit(e.data,e.width,e.components);else if(t===16)applyHorizontalDifferencing16Bit(e.data,e.width,e.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${t}`);break}default:throw new Error(`invalid predictor: ${e.predictor}`)}}convertAlpha(e){if(e.alpha&&e.associatedAlpha){const{data:t,components:n,maxSampleValue:a}=e;for(let s=0;s<t.length;s+=n){const c=t[s+n-1];for(let f=0;f<n-1;f++)t[s+f]=Math.round(t[s+f]*a/c)}}}}function getDataArray(r,e,t){if(e===8)return new Uint8Array(r);if(e===16)return new Uint16Array(r);if(e===32&&t===3)return new Float32Array(r);throw unsupported("bit depth / sample format",`${e} / ${t}`)}function fill8bit(r,e,t,n){for(let a=0;a<n;a++)r[t++]=e.getUint8(a);return t}function fill16bit(r,e,t,n,a){for(let s=0;s<n*2;s+=2)r[t++]=e.getUint16(s,a);return t}function fillFloat32(r,e,t,n,a){for(let s=0;s<n*4;s+=4)r[t++]=e.getFloat32(s,a);return t}function unsupported(r,e){return new Error(`Unsupported ${r}: ${e}`)}function decodeTIFF(r,e){return new TIFFDecoder(r).decode(e)}function matchAndCrop(r={}){let{algorithm:e="matchToPrevious",ignoreBorder:t=[0,0]}=r;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let n=e==="matchToPrevious",a=this[0],s=[];s[0]={position:[0,0],image:this[0]};let c=[0,0];for(let o=1;o<this.length;o++){let u=a.getBestMatch(this[o],{border:t});s[o]={position:[u[0]+c[0],u[1]+c[1]],image:this[o]},n&&(c[0]+=u[0],c[1]+=u[1],a=this[o])}let f=0,b=0,g=0,m=0;for(let o=0;o<s.length;o++){let u=s[o];u.position[0]>f&&(f=u.position[0]),u.position[0]<b&&(b=u.position[0]),u.position[1]>g&&(g=u.position[1]),u.position[1]<m&&(m=u.position[1])}b=0-b,m=0-m;for(let o=0;o<s.length;o++){let u=s[o];u.crop=u.image.crop({x:f-u.position[0],y:g-u.position[1],width:a.width-b-f,height:a.height-m-g})}let l=[];for(let o=0;o<s.length;o++)l[o]=s[o].crop;return new Stack(l)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].min;for(let e=1;e<this.length;e++)for(let t=0;t<r.length;t++)r[t]=Math.min(r[t],this[e].min[t]);return r}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].max;for(let e=1;e<this.length;e++)for(let t=0;t<r.length;t++)r[t]=Math.max(r[t],this[e].max[t]);return r}function median$2(r){let e=r.reduce((c,f)=>c+f);if(e===0)throw new Error("unreachable");let t=0,n=0,a=e/2,s;for(;;){if(r[t]>0){if(s!==void 0)return(s+t)/2;if(n+=r[t],n>a)return t;n===a&&(s=t)}t++}}function mean$2(r){let e=0,t=0;for(let n=0;n<r.length;n++)e+=r[n],t+=r[n]*n;return e===0?0:t/e}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let r=this.getHistograms({maxSlots:this[0].maxValue+1}),e=new Array(r.length);for(let t=0;t<r.length;t++){let n=r[t];e[t]=median$2(n)}return e}function histogram(r){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistogram(r);for(let t=1;t<this.length;t++){let n=this[t].getHistogram(r);for(let a=0;a<e.length;a++)e[a]+=n[a]}return e}function histograms(r){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].getHistograms(r),t=e[0].length;for(let n=1;n<this.length;n++){let a=this[n].getHistograms(r);for(let s=0;s<e.length;s++)for(let c=0;c<t;c++)e[s][c]+=a[s][c]}return e}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let r=new Uint32Array(this[0].data.length);for(let n=0;n<this.length;n++){let a=this[n];for(let s=0;s<this[0].data.length;s++)r[s]+=a.data[s]}let e=Image$1.createFrom(this[0]),t=e.data;for(let n=0;n<this[0].data.length;n++)t[n]=r[n]/this.length;return e}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image$1.createFrom(this[0]);r.data.fill(0);for(const e of this)for(let t=0;t<r.data.length;t++)r.data[t]=Math.max(e.data[t],r.data[t]);return r}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image$1.createFrom(this[0]);r.data.fill(r.maxValue);for(const e of this)for(let t=0;t<r.data.length;t++)r.data[t]=Math.min(e.data[t],r.data[t]);return r}function extend$2(r){r.extendMethod("matchAndCrop",matchAndCrop),r.extendMethod("getMin",min$2),r.extendMethod("getMax",max$2),r.extendMethod("getMedian",median$1),r.extendMethod("getHistogram",histogram),r.extendMethod("getHistograms",histograms),r.extendMethod("getAverage",averageImage),r.extendMethod("getAverageImage",averageImage),r.extendMethod("getMaxImage",maxImage),r.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(e){if(Array.isArray(e)){super(e.length);for(let t=0;t<e.length;t++)this[t]=e[t]}else typeof e=="number"?super(e):super();this.computed=null}static load(e){return Promise.all(e.map(Image$1.load)).then(t=>new Stack(t))}static extendMethod(e,t,n={}){let{inPlace:a=!1,returnThis:s=!0,partialArgs:c=[]}=n;return a?Stack.prototype[e]=function(...f){this.computed=null;let b=t.apply(this,[...c,...f]);return s?this:b}:Stack.prototype[e]=function(...f){return t.apply(this,[...c,...f])},Stack}static extendProperty(e,t,n={}){let{partialArgs:a=[]}=n;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(e,this.computed))return this.computed[e];let s=t.apply(this,a);return this.computed[e]=s,s},Object.defineProperty(Stack.prototype,e,computedPropertyDescriptor),Stack}checkProcessable(e,t={}){if(typeof e!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${e} can not be applied on an empty stack`);this[0].checkProcessable(e,t);for(let n=1;n<this.length;n++){if((t.sameSize===void 0||t.sameSize)&&this[0].width!==this[n].width)throw new TypeError(`The process: ${e} can not be applied if width is not identical in all images`);if((t.sameSize===void 0||t.sameSize)&&this[0].height!==this[n].height)throw new TypeError(`The process: ${e} can not be applied if height is not identical in all images`);if((t.sameAlpha===void 0||t.sameAlpha)&&this[0].alpha!==this[n].alpha)throw new TypeError(`The process: ${e} can not be applied if alpha is not identical in all images`);if((t.sameBitDepth===void 0||t.sameBitDepth)&&this[0].bitDepth!==this[n].bitDepth)throw new TypeError(`The process: ${e} can not be applied if bitDepth is not identical in all images`);if((t.sameColorModel===void 0||t.sameColorModel)&&this[0].colorModel!==this[n].colorModel)throw new TypeError(`The process: ${e} can not be applied if colorModel is not identical in all images`);if((t.sameNumberChannels===void 0||t.sameNumberChannels)&&this[0].channels!==this[n].channels)throw new TypeError(`The process: ${e} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(r,e){if(typeof r!="function")throw new TypeError(`${r} is not a function`);let t=new Stack(this.length);for(let n=0;n<this.length;n++)t[n]=r.call(e,this[n],n,this);return t});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(r,e){if(typeof r=="string")return loadURL(r,e);if(r instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(r),void 0,e&&e.ignorePalette));if(r.buffer)return Promise.resolve(loadBinary(r,void 0,e&&e.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(r,e,t){const n=imageType$1(r);if(n)switch(n.mime){case"image/png":return loadPNG(r);case"image/jpeg":return loadJPEG(r);case"image/tiff":return loadTIFF(r,t);default:return loadGeneric(a(n.mime))}return loadGeneric(a("application/octet-stream"));function a(s){return e||toBase64URL(r,s)}}function loadURL(r,e){const t=r.slice(0,64).match(isDataURL);let n;return t!==null?n=Promise.resolve(decode$3(r.slice(t[0].length))):n=fetchBinary(r,e),n.then(a=>{const s=new Uint8Array(a);return loadBinary(s,t?r:void 0,e&&e.ignorePalette)})}function loadPNG(r){const e=decodePng(r);let t=e.channels,n,a=0;return t===2||t===4?(n=t-1,a=1):n=t,e.palette?loadPNGFromPalette(e):new Image$1(e.width,e.height,e.data,{components:n,alpha:a,bitDepth:e.depth})}function loadPNGFromPalette(r){const e=r.width*r.height,t=r.palette[0].length,n=new Uint8Array(e*t),a=8/r.depth,s=r.depth<8?a:1,c=parseInt("1".repeat(r.depth),2),f=t===4;let b=0;for(let g=0;g<e;g++){const m=Math.floor(g/s);let l=r.data[m];r.depth<8&&(l=l>>>r.depth*(a-1-g%a)&c);const o=r.palette[l];n[b++]=o[0],n[b++]=o[1],n[b++]=o[2],f&&(n[b++]=o[3])}return new Image$1(r.width,r.height,n,{components:3,alpha:f,bitDepth:8})}function loadJPEG(r){const e=decode(r);let t;e.exif&&(t=getMetadata(e.exif));const n=jpegJs.decode(r,{useTArray:!0,maxMemoryUsageInMB:1024});let a=new Image$1(n.width,n.height,n.data,{meta:t});if(t&&t.tiff.tags.Orientation){const s=t.tiff.tags.Orientation;s>2&&(a=a.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[s])),[2,4,5,7].includes(s)&&(a=a.flipX())}return a}function loadTIFF(r,e){let t=decodeTIFF(r);return t.length===1?getImageFromIFD(t[0],e):new Stack(t.map(function(n){return getImageFromIFD(n,e)}))}function getMetadata(r){const e={tiff:{fields:r.fields,tags:r.map}};return r.exif&&(e.exif=r.exif),r.gps&&(e.gps=r.gps),e}function getImageFromIFD(r,e){if(!e&&r.type===3){const t=new Uint16Array(3*r.width*r.height),n=r.palette;let a=0;for(let s=0;s<r.data.length;s++){const c=r.data[s],f=n[c];t[a++]=f[0],t[a++]=f[1],t[a++]=f[2]}return new Image$1(r.width,r.height,t,{components:3,alpha:r.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(r)})}else return new Image$1(r.width,r.height,r.data,{components:r.type===2?3:1,alpha:r.alpha,colorModel:r.type===2?RGB$1:GREY$1,bitDepth:r.bitsPerSample.length?r.bitsPerSample[0]:r.bitsPerSample,meta:getMetadata(r)})}function loadGeneric(r,e){return e=e||{},new Promise(function(t,n){let a=new DOMImage;a.onload=function(){let s=a.width,c=a.height,b=createCanvas(s,c).getContext("2d");b.drawImage(a,0,0,s,c);let g=b.getImageData(0,0,s,c).data;t(new Image$1(s,c,g,e))},a.onerror=function(){n(new Error(`Could not load ${r}`))},a.src=r})}const valueMethods={getValueXY(r,e,t){return this.data[(e*this.width+r)*this.channels+t]},setValueXY(r,e,t,n){return this.data[(e*this.width+r)*this.channels+t]=n,this.computed=null,this},getValue(r,e){return this.data[r*this.channels+e]},setValue(r,e,t){return this.data[r*this.channels+e]=t,this.computed=null,this},getPixelXY(r,e){return this.getPixel(e*this.width+r)},setPixelXY(r,e,t){return this.setPixel(e*this.width+r,t)},getPixel(r){const e=new Array(this.channels),t=r*this.channels;for(let n=0;n<this.channels;n++)e[n]=this.data[t+n];return e},setPixel(r,e){const t=r*this.channels;for(let n=0;n<e.length;n++)this.data[t+n]=e[n];return this.computed=null,this}};function setValueMethods(r){for(const e in valueMethods)r.prototype[e]=valueMethods[e]}function getImageParameters(r){return{width:r.width,height:r.height,components:r.components,alpha:r.alpha,colorModel:r.colorModel,bitDepth:r.bitDepth}}function getOutputImage(r,e,t,n={}){const{out:a}=e;if(a===void 0)return n.copy?r.clone():Image$1.createFrom(r,t);{if(!Image$1.isImage(a))throw new TypeError("out must be an Image object");const s=Object.assign(getImageParameters(r),t);for(const c in s)if(a[c]!==s[c])throw new RangeError(`cannot use out. Its ${c} must be "${s[c]}" (found "${a[c]}")`);return a}}function getOutputImageOrInPlace(r,e,t){if(e.inPlace!==void 0&&typeof e.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(e.inPlace){if(e.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return r}return getOutputImage(r,e,null,t)}function abs(r={}){this.checkProcessable("abs",{bitDepth:[32]});const e=getOutputImageOrInPlace(this,r);return absolute(this,e),e}function absolute(r,e){for(let t=0;t<r.data.length;t++)e.data[t]=Math.abs(r.data[t])}function copyAlphaChannel(r,e){if(r.alpha===1&&e.alpha===1)for(let t=0;t<r.size;t++)e.data[t*e.channels+e.components]=r.data[t*r.channels+r.components]}function invert(r={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const e=getOutputImageOrInPlace(this,r);return this.bitDepth===1?invertBinary(this,e):(invertColor(this,e),this!==e&&copyAlphaChannel(this,e)),e}function invertBinary(r,e){for(let t=0;t<r.data.length;t++)e.data[t]=~r.data[t]}function invertColor(r,e){for(let t=0;t<r.data.length;t+=r.channels)for(let n=0;n<r.components;n++)e.data[t+n]=r.maxValue-r.data[t+n]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let r=0;r<this.height;r++){let e=r*this.width*this.channels;for(let t=0;t<Math.floor(this.width/2);t++){let n=t*this.channels+e,a=(this.width-t-1)*this.channels+e;for(let s=0;s<this.channels;s++){let c=this.data[n+s];this.data[n+s]=this.data[a+s],this.data[a+s]=c}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let r=0;r<Math.floor(this.height/2);r++)for(let e=0;e<this.width;e++){let t=e*this.channels+r*this.width*this.channels,n=e*this.channels+(this.height-1-r)*this.channels*this.width;for(let a=0;a<this.channels;a++){let s=this.data[t+a];this.data[t+a]=this.data[n+a],this.data[n+a]=s}}return this}function blurFilter(r={}){const{radius:e=1}=r;if(e<1)throw new Error("radius must be greater than 1");const t=2*e+1,n=new Array(t);for(let a=0;a<t;a++){n[a]=new Array(t);for(let s=0;s<t;s++)n[a][s]=1/(t*t)}return this.convolution(n)}var medianQuickselect_min={exports:{}};(function(r){(function(){function e(a){for(var s=0,c=a.length-1,f=void 0,b=void 0,g=void 0,m=n(s,c);;){if(c<=s)return a[m];if(c==s+1)return a[s]>a[c]&&t(a,s,c),a[m];for(f=n(s,c),a[f]>a[c]&&t(a,f,c),a[s]>a[c]&&t(a,s,c),a[f]>a[s]&&t(a,f,s),t(a,f,s+1),b=s+1,g=c;;){do b++;while(a[s]>a[b]);do g--;while(a[g]>a[s]);if(g<b)break;t(a,b,g)}t(a,s,g),g<=m&&(s=b),g>=m&&(c=g-1)}}var t=function(s,c,f){var b;return b=[s[f],s[c]],s[c]=b[0],s[f]=b[1],b},n=function(s,c){return~~((s+c)/2)};r.exports?r.exports=e:window.median=e})()})(medianQuickselect_min);var medianQuickselect_minExports=medianQuickselect_min.exports;const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(r,e={}){let{channels:t,allowAlpha:n,defaultAlpha:a}=e;return typeof n!="boolean"&&(n=!0),typeof t>"u"?allChannels(r,a):validateChannels(r,t,n)}function allChannels(r,e){let t=e?r.channels:r.components,n=new Array(t);for(let a=0;a<t;a++)n[a]=a;return n}function validateChannels(r,e,t){Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++)e[n]=validateChannel(r,e[n],t);return e}function validateChannel(r,e,t=!0){if(e===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(typeof e=="string"){switch(r.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(e))switch(e){case"r":e=0;break;case"g":e=1;break;case"b":e=2;break}break;case HSL:if("hsl".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"l":e=2;break}break;case HSV:if("hsv".includes(e))switch(e){case"h":e=0;break;case"s":e=1;break;case"v":e=2;break}break;case CMYK$1:if("cmyk".includes(e))switch(e){case"c":e=0;break;case"m":e=1;break;case"y":e=2;break;case"k":e=3;break}break;default:throw new Error(`Unexpected color model: ${r.colorModel}`)}if(e==="a"){if(!r.alpha)throw new Error("validateChannel : the image does not contain alpha channel");e=r.components}if(typeof e=="string")throw new Error(`validateChannel : undefined channel: ${e}`)}if(e>=r.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(!t&&e>=r.components)throw new RangeError("validateChannel : alpha channel may not be selected");return e}function medianFilter(r={}){let{radius:e=1,border:t="copy",channels:n}=r;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),e<1)throw new Error("radius must be greater than 0");n=validateArrayOfChannels(this,n);let a=e,s=e,c=Image$1.createFrom(this),f=(a*2+1)*(s*2+1),b=new Array(f);for(let g=0;g<n.length;g++){let m=n[g];for(let l=s;l<this.height-s;l++)for(let o=a;o<this.width-a;o++){let u=0;for(let y=-s;y<=s;y++)for(let w=-a;w<=a;w++){let _=((l+y)*this.width+o+w)*this.channels+m;b[u++]=this.data[_]}let d=(l*this.width+o)*this.channels+m;c.data[d]=quickSelectMedian(b)}}if(this.alpha&&!n.includes(this.channels))for(let g=this.components;g<this.data.length;g=g+this.channels)c.data[g]=this.data[g];return c.setBorder({size:[a,s],algorithm:t}),c}function gaussianFilter(r={}){let{radius:e=1,sigma:t,channels:n,border:a="copy"}=r;this.checkProcessable("gaussian",{bitDepth:[8,16]});const s=getKernel(e,t);return this.convolution([s,s],{border:a,channels:n,algorithm:"separable"})}function getKernel(r,e){const t=r*2+1,n=new Array(t),a=e||((t-1)*.5-1)*.3+.8,s=-.5/(a*a);let c=0;for(let f=0;f<t;f++){const b=f-r,g=Math.exp(s*b*b);n[f]=g,c+=g}for(let f=0;f<t;f++)n[f]/=c;return n}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={};(function(r){(function(){var e;e=r;var t={release:"0.3.0",date:"2013-03"};e.toString=function(){return"version "+t.release+", released "+t.date};for(var n=0,a=null,s=null,c={init:function(g){if(g!==0&&!(g&g-1))n=g,c._initArray(),c._makeBitReversalTable(),c._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(g,m){c.fft(g,m,1)},ifft1d:function(g,m){var l=1/n;c.fft(g,m,-1);for(var o=0;o<n;o++)g[o]*=l,m[o]*=l},bt1d:function(g,m){c.fft(g,m,-1)},fft2d:function(g,m){for(var l=[],o=[],u=0,d=0;d<n;d++){u=d*n;for(var y=0;y<n;y++)l[y]=g[y+u],o[y]=m[y+u];c.fft1d(l,o);for(var w=0;w<n;w++)g[w+u]=l[w],m[w+u]=o[w]}for(var _=0;_<n;_++){for(var T=0;T<n;T++)u=_+T*n,l[T]=g[u],o[T]=m[u];c.fft1d(l,o);for(var S=0;S<n;S++)u=_+S*n,g[u]=l[S],m[u]=o[S]}},ifft2d:function(g,m){for(var l=[],o=[],u=0,d=0;d<n;d++){u=d*n;for(var y=0;y<n;y++)l[y]=g[y+u],o[y]=m[y+u];c.ifft1d(l,o);for(var w=0;w<n;w++)g[w+u]=l[w],m[w+u]=o[w]}for(var _=0;_<n;_++){for(var T=0;T<n;T++)u=_+T*n,l[T]=g[u],o[T]=m[u];c.ifft1d(l,o);for(var S=0;S<n;S++)u=_+S*n,g[u]=l[S],m[u]=o[S]}},fft:function(g,m,l){for(var o,u,d,y,w,_,T,S,E,A=n>>2,P=0;P<n;P++)y=a[P],P<y&&(w=g[P],g[P]=g[y],g[y]=w,w=m[P],m[P]=m[y],m[y]=w);for(var k=1;k<n;k<<=1){u=0,o=n/(k<<1);for(var M=0;M<k;M++){_=s[u+A],T=l*s[u];for(var F=M;F<n;F+=k<<1)d=F+k,S=_*g[d]+T*m[d],E=_*m[d]-T*g[d],g[d]=g[F]-S,g[F]+=S,m[d]=m[F]-E,m[F]+=E;u+=o}}},_initArray:function(){typeof Uint32Array<"u"?a=new Uint32Array(n):a=[],typeof Float64Array<"u"?s=new Float64Array(n*1.25):s=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var g=0,m=0,l=0;for(a[0]=0;++g<n;){for(l=n>>1;l<=m;)m-=l,l>>=1;m+=l,a[g]=m}},_makeCosSinTable:function(){var g=n>>1,m=n>>2,l=n>>3,o=g+m,u=Math.sin(Math.PI/n),d=2*u*u,y=Math.sqrt(d*(2-d)),w=s[m]=1,_=s[0]=0;u=2*d;for(var T=1;T<l;T++)w-=d,d+=u*w,_+=y,y-=u*_,s[T]=_,s[m-T]=w;l!==0&&(s[l]=Math.sqrt(.5));for(var S=0;S<m;S++)s[g-S]=s[S];for(var E=0;E<o;E++)s[E+g]=-s[E]}},f=["init","fft1d","ifft1d","fft2d","ifft2d"],b=0;b<f.length;b++)e[f[b]]=c[f[b]];return e.bt=c.bt1d,e.fft=c.fft1d,e.ifft=c.ifft1d,e}).call(commonjsGlobal)})(fftlib);var FFT$1=fftlib,FFTUtils$1={DEBUG:!1,ifft2DArray:function(r,e,t){var n=new Array(e*t),a=e/2,s=(t-1)*2;FFT$1.init(a);for(var c={re:new Array(a),im:new Array(a)},f=0;f<t;f++){for(var b=a-1;b>=0;b--)c.re[b]=r[b*2*t+f],c.im[b]=r[(b*2+1)*t+f];FFT$1.bt(c.re,c.im);for(var b=a-1;b>=0;b--)n[b*2*t+f]=c.re[b],n[(b*2+1)*t+f]=c.im[b]}var g=new Array(a*s);FFT$1.init(s);for(var m={re:new Array(s),im:new Array(s)},l=s*a,b=0;b<e;b+=2){m.re[0]=n[b*t],m.im[0]=n[(b+1)*t];for(var f=1;f<t;f++)m.re[f]=n[b*t+f],m.im[f]=n[(b+1)*t+f],m.re[s-f]=n[b*t+f],m.im[s-f]=-n[(b+1)*t+f];FFT$1.bt(m.re,m.im);for(var o=b/2*s,f=s-1;f>=0;f--)g[o+f]=m.re[f]/l}return g},fft2DArray:function(r,e,t,n){Object.assign({},{inplace:!0});var a=t/2+1,s=e*2,c=new Array(s*a);FFT$1.init(t);for(var f={re:new Array(t),im:new Array(t)},b={re:new Array(t),im:new Array(t)},g={re:new Array(t),im:new Array(t)},m,l,o,u,d,y=0;y<e/2;y++){m=y*2*t,f.re=r.slice(m,m+t),m=(y*2+1)*t,f.im=r.slice(m,m+t),FFT$1.fft1d(f.re,f.im),this.reconstructTwoRealFFT(f,b,g),l=y*4*a,o=(y*4+1)*a,u=(y*4+2)*a,d=(y*4+3)*a;for(var w=a-1;w>=0;w--)c[l+w]=b.re[w],c[o+w]=b.im[w],c[u+w]=g.re[w],c[d+w]=g.im[w]}b=null,g=null;var _=new Array(s*a);FFT$1.init(e);for(var T={re:new Array(e),im:new Array(e)},S=a-1;S>=0;S--){for(var y=e-1;y>=0;y--)T.re[y]=c[y*2*a+S],T.im[y]=c[(y*2+1)*a+S],isNaN(T.re[y])&&(T.re[y]=0),isNaN(T.im[y])&&(T.im[y]=0);FFT$1.fft1d(T.re,T.im);for(var y=e-1;y>=0;y--)_[y*2*a+S]=T.re[y],_[(y*2+1)*a+S]=T.im[y]}return _},reconstructTwoRealFFT:function(r,e,t){var n=r.re.length;e.re[0]=r.re[0],e.im[0]=0,t.re[0]=r.im[0],t.im[0]=0;for(var a,s,c,f,b,g=n/2;g>0;g--)b=n-g,a=.5*(r.re[g]-r.re[b]),s=.5*(r.re[g]+r.re[b]),c=.5*(r.im[g]-r.im[b]),f=.5*(r.im[g]+r.im[b]),e.re[g]=s,e.im[g]=c,e.re[b]=s,e.im[b]=-c,t.re[g]=f,t.im[g]=-a,t.re[b]=f,t.im[b]=a},convolute2DI:function(r,e,t,n){for(var a,s,c=0;c<t/2;c++)for(var f=0;f<n;f++)a=r[c*2*n+f]*e[c*2*n+f]-r[(c*2+1)*n+f]*e[(c*2+1)*n+f],s=r[c*2*n+f]*e[(c*2+1)*n+f]+r[(c*2+1)*n+f]*e[c*2*n+f],r[c*2*n+f]=a,r[(c*2+1)*n+f]=s},convolute:function(r,e,t,n,a){for(var s=new Array(n*t),c=0;c<t*n;c++)s[c]=r[c];s=this.fft2DArray(s,t,n);for(var f=e.length,b=e[0].length,g=new Array(n*t),c=0;c<n*t;c++)g[c]=0;for(var m,l,o=Math.floor((f-1)/2),u=Math.floor((b-1)/2),d=0;d<f;d++){m=(d-o+t)%t;for(var y=0;y<b;y++)l=(y-u+n)%n,g[m*n+l]=e[d][y]}g=this.fft2DArray(g,t,n);var w=t*2,_=n/2+1;return this.convolute2DI(s,g,w,_),this.ifft2DArray(s,w,_)},toRadix2:function(r,e,t){var n,a,s,c,f=t,b=e;if(!(t!==0&&!(t&t-1))){for(f=0;t>>++f;);f=1<<f}if(!(e!==0&&!(e&e-1))){for(b=0;e>>++b;);b=1<<b}if(b==e&&f==t)return{data:r,rows:e,cols:t};var g=new Array(b*f),m=Math.floor((b-e)/2)-e,l=Math.floor((f-t)/2)-t;for(n=0;n<b;n++)for(s=n*f,c=(n-m)%e*t,a=0;a<f;a++)g[s+a]=r[c+(a-l)%t];return{data:g,rows:b,cols:f}},crop:function(r,e,t,n,a,s){if(e==n&&t==a)return r;Object.assign({},s);var c=new Array(a*n),f=Math.floor((e-n)/2),b=Math.floor((t-a)/2),g,m,l,o;for(l=0;l<n;l++)for(g=l*a,m=(l+f)*t,o=0;o<a;o++)c[g+o]=r[m+(o+b)];return c}},FFTUtils_1=FFTUtils$1;src$2.FFTUtils=FFTUtils_1;src$2.FFT=fftlib;var FFTUtils=src$2.FFTUtils;function convolutionFFT(r,e,t){var n=matrix2Array(r),a=n.data,s=Object.assign({normalize:!1,divisor:1,rows:n.rows,cols:n.cols},t),c,f;if(s.rows&&s.cols)c=s.rows,f=s.cols;else throw new Error("Invalid number of rows or columns "+c+" "+f);var b=s.divisor,g,m,l=e.length,o=e[0].length;if(s.normalize)for(b=0,g=0;g<l;g++)for(m=0;m<o;m++)b+=e[g][m];if(b===0)throw new RangeError("convolution: The divisor is equal to zero");var u=FFTUtils.toRadix2(a,c,f),d=FFTUtils.convolute(u.data,e,u.rows,u.cols);if(d=FFTUtils.crop(d,u.rows,u.cols,c,f),b!=0&&b!=1)for(g=0;g<d.length;g++)d[g]/=b;return d}function convolutionDirect(r,e,t){var n=matrix2Array(r),a=n.data,s=Object.assign({normalize:!1,divisor:1,rows:n.rows,cols:n.cols},t),c,f;if(s.rows&&s.cols)c=s.rows,f=s.cols;else throw new Error("Invalid number of rows or columns "+c+" "+f);var b=s.divisor,g=e.length,m=e[0].length,l,o,u,d,y,w,_,T,S;if(s.normalize)for(b=0,l=0;l<g;l++)for(o=0;o<m;o++)b+=e[l][o];if(b===0)throw new RangeError("convolution: The divisor is equal to zero");var E=new Array(c*f),A=Math.floor(g/2),P=Math.floor(m/2);for(d=0;d<c;d++)for(u=0;u<f;u++){for(w=0,o=0;o<g;o++)for(l=0;l<m;l++)_=e[g-o-1][m-l-1],T=(d+o-A+c)%c,S=(u+l-P+f)%f,y=T*f+S,w+=a[y]*_;y=d*f+u,E[y]=w/b}return E}function LoG(r,e,t){var n=1e3;t&&t.factor&&(n=t.factor);var a=new Array(e),s,c,f,b;n*=-1;var g=(e-1)/2,m=2*r*r;for(s=0;s<e;s++)for(a[s]=new Array(e),b=(s-g)*(s-g),c=0;c<e;c++)f=-((c-g)*(c-g)+b)/m,a[s][c]=Math.round(n*(1+f)*Math.exp(f));return a}function matrix2Array(r){var e=r,t,n;if(typeof r[0]!="number"){t=r.length,n=r[0].length,e=new Array(t*n);for(var a=0;a<t;a++)for(var s=0;s<n;s++)e[a*n+s]=r[a][s]}else{var c=Math.sqrt(r.length);Number.isInteger(c)&&(t=c,n=c)}return{data:e,rows:t,cols:n}}var src$1={fft:convolutionFFT,direct:convolutionDirect,kernelFactory:{LoG},matrix2Array},_isFinite=Number.isFinite||function(r){return!(typeof r!="number"||r!==r||r===1/0||r===-1/0)},isFinite$1=_isFinite,isInteger=Number.isInteger||function(r){return typeof r=="number"&&isFinite$1(r)&&Math.floor(r)===r};const isInteger$1=getDefaultExportFromCjs(isInteger);function validateKernel(r){let e,t;if(Array.isArray(r))if(Array.isArray(r[0])){if(!(r.length&1)||!(r[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");e=Math.floor(r.length/2),t=Math.floor(r[0].length/2)}else{let n=Math.sqrt(r.length);if(isInteger$1(n))t=e=Math.floor(Math.sqrt(r.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let a=new Array(n);for(let s=0;s<n;s++){a[s]=new Array(n);for(let c=0;c<n;c++)a[s][c]=r[s*n+c]}r=a}else throw new Error(`validateKernel: Invalid Kernel: ${r}`);return{kernel:r,kWidth:t,kHeight:e}}function clamp(r,e){return Math.round(Math.min(Math.max(r,0),e.maxValue))}function directConvolution(r,e,t){if(t===void 0){const s=r.length+e.length-1;t=new Array(s)}fill(t);for(var n=0;n<r.length;n++)for(var a=0;a<e.length;a++)t[n+a]+=r[n]*e[a];return t}function fill(r){for(var e=0;e<r.length;e++)r[e]=0}function FFT(r){if(this.size=r|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=r<<1;for(var e=new Array(this.size*2),t=0;t<e.length;t+=2){const b=Math.PI*t/this.size;e[t]=Math.cos(b),e[t+1]=-Math.sin(b)}this.table=e;for(var n=0,a=1;this.size>a;a<<=1)n++;this._width=n%2===0?n-1:n,this._bitrev=new Array(1<<this._width);for(var s=0;s<this._bitrev.length;s++){this._bitrev[s]=0;for(var c=0;c<this._width;c+=2){var f=this._width-c-2;this._bitrev[s]|=(s>>>c&3)<<f}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function r(e,t){for(var n=t||new Array(e.length>>>1),a=0;a<e.length;a+=2)n[a>>>1]=e[a];return n};FFT.prototype.createComplexArray=function r(){const e=new Array(this._csize);for(var t=0;t<e.length;t++)e[t]=0;return e};FFT.prototype.toComplexArray=function r(e,t){for(var n=t||this.createComplexArray(),a=0;a<n.length;a+=2)n[a]=e[a>>>1],n[a+1]=0;return n};FFT.prototype.completeSpectrum=function r(e){for(var t=this._csize,n=t>>>1,a=2;a<n;a+=2)e[t-a]=e[a],e[t-a+1]=-e[a+1]};FFT.prototype.transform=function r(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function r(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function r(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._out=e,this._data=t,this._inv=1,this._transform4();for(var n=0;n<e.length;n++)e[n]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function r(){var e=this._out,t=this._csize,n=this._width,a=1<<n,s=t/a<<1,c,f,b=this._bitrev;if(s===4)for(c=0,f=0;c<t;c+=s,f++){const y=b[f];this._singleTransform2(c,y,a)}else for(c=0,f=0;c<t;c+=s,f++){const y=b[f];this._singleTransform4(c,y,a)}var g=this._inv?-1:1,m=this.table;for(a>>=2;a>=2;a>>=2){s=t/a<<1;var l=s>>>2;for(c=0;c<t;c+=s)for(var o=c+l,u=c,d=0;u<o;u+=2,d+=a){const y=u,w=y+l,_=w+l,T=_+l,S=e[y],E=e[y+1],A=e[w],P=e[w+1],k=e[_],M=e[_+1],F=e[T],O=e[T+1],D=S,R=E,C=m[d],U=g*m[d+1],N=A*C-P*U,V=A*U+P*C,j=m[2*d],K=g*m[2*d+1],ee=k*j-M*K,he=k*K+M*j,ge=m[3*d],Se=g*m[3*d+1],we=F*ge-O*Se,ne=F*Se+O*ge,re=D+ee,oe=R+he,Ee=D-ee,Re=R-he,De=N+we,He=V+ne,qe=g*(N-we),W=g*(V-ne),X=re+De,te=oe+He,ie=re-De,ye=oe-He,be=Ee+W,Ae=Re-qe,J=Ee-W,ve=Re+qe;e[y]=X,e[y+1]=te,e[w]=be,e[w+1]=Ae,e[_]=ie,e[_+1]=ye,e[T]=J,e[T+1]=ve}}};FFT.prototype._singleTransform2=function r(e,t,n){const a=this._out,s=this._data,c=s[t],f=s[t+1],b=s[t+n],g=s[t+n+1],m=c+b,l=f+g,o=c-b,u=f-g;a[e]=m,a[e+1]=l,a[e+2]=o,a[e+3]=u};FFT.prototype._singleTransform4=function r(e,t,n){const a=this._out,s=this._data,c=this._inv?-1:1,f=n*2,b=n*3,g=s[t],m=s[t+1],l=s[t+n],o=s[t+n+1],u=s[t+f],d=s[t+f+1],y=s[t+b],w=s[t+b+1],_=g+u,T=m+d,S=g-u,E=m-d,A=l+y,P=o+w,k=c*(l-y),M=c*(o-w),F=_+A,O=T+P,D=S+M,R=E-k,C=_-A,U=T-P,N=S-M,V=E+k;a[e]=F,a[e+1]=O,a[e+2]=D,a[e+3]=R,a[e+4]=C,a[e+5]=U,a[e+6]=N,a[e+7]=V};FFT.prototype._realTransform4=function r(){var e=this._out,t=this._csize,n=this._width,a=1<<n,s=t/a<<1,c,f,b=this._bitrev;if(s===4)for(c=0,f=0;c<t;c+=s,f++){const st=b[f];this._singleRealTransform2(c,st>>>1,a>>>1)}else for(c=0,f=0;c<t;c+=s,f++){const st=b[f];this._singleRealTransform4(c,st>>>1,a>>>1)}var g=this._inv?-1:1,m=this.table;for(a>>=2;a>=2;a>>=2){s=t/a<<1;var l=s>>>1,o=l>>>1,u=o>>>1;for(c=0;c<t;c+=s)for(var d=0,y=0;d<=u;d+=2,y+=a){var w=c+d,_=w+o,T=_+o,S=T+o,E=e[w],A=e[w+1],P=e[_],k=e[_+1],M=e[T],F=e[T+1],O=e[S],D=e[S+1],R=E,C=A,U=m[y],N=g*m[y+1],V=P*U-k*N,j=P*N+k*U,K=m[2*y],ee=g*m[2*y+1],he=M*K-F*ee,ge=M*ee+F*K,Se=m[3*y],we=g*m[3*y+1],ne=O*Se-D*we,re=O*we+D*Se,oe=R+he,Ee=C+ge,Re=R-he,De=C-ge,He=V+ne,qe=j+re,W=g*(V-ne),X=g*(j-re),te=oe+He,ie=Ee+qe,ye=Re+X,be=De-W;if(e[w]=te,e[w+1]=ie,e[_]=ye,e[_+1]=be,d===0){var Ae=oe-He,J=Ee-qe;e[T]=Ae,e[T+1]=J;continue}if(d!==u){var ve=Re,de=-De,Oe=oe,fe=-Ee,Ue=-g*X,Ze=-g*W,$e=-g*qe,Le=-g*He,Ge=ve+Ue,ze=de+Ze,Je=Oe+Le,ot=fe-$e,Qe=c+o-d,at=c+l-d;e[Qe]=Ge,e[Qe+1]=ze,e[at]=Je,e[at+1]=ot}}}};FFT.prototype._singleRealTransform2=function r(e,t,n){const a=this._out,s=this._data,c=s[t],f=s[t+n],b=c+f,g=c-f;a[e]=b,a[e+1]=0,a[e+2]=g,a[e+3]=0};FFT.prototype._singleRealTransform4=function r(e,t,n){const a=this._out,s=this._data,c=this._inv?-1:1,f=n*2,b=n*3,g=s[t],m=s[t+n],l=s[t+f],o=s[t+b],u=g+l,d=g-l,y=m+o,w=c*(m-o),_=u+y,T=d,S=-w,E=u-y,A=d,P=w;a[e]=_,a[e+1]=0,a[e+2]=T,a[e+3]=S,a[e+4]=E,a[e+5]=0,a[e+6]=A,a[e+7]=P};function convolutionSeparable(r,e,t,n){const a=new Array(r.length);let s,c,f,b;b=e[1],f=(b.length-1)/2,c=new Array(t+b.length-1),s=new Array(t);for(let g=0;g<n;g++){for(let m=0;m<t;m++)s[m]=r[g*t+m];directConvolution(s,b,c);for(let m=0;m<t;m++)a[g*t+m]=c[f+m]}b=e[0],f=(b.length-1)/2,c=new Array(n+b.length-1),s=new Array(n);for(let g=0;g<t;g++){for(let m=0;m<n;m++)s[m]=a[m*t+g];directConvolution(s,b,c);for(let m=0;m<n;m++)a[m*t+g]=c[f+m]}return a}var matrix$2={};const toString$1=Object.prototype.toString;function isAnyArray$1(r){const e=toString$1.call(r);return e.endsWith("Array]")&&!e.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:isAnyArray$1},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(libEsm);function max$1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,a=e.toIndex,s=a===void 0?r.length:a;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=n||s>r.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var c=r[n],f=n+1;f<s;f++)r[f]>c&&(c=r[f]);return c}function min$1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray$1(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,a=e.toIndex,s=a===void 0?r.length:a;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=n||s>r.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var c=r[n],f=n+1;f<s;f++)r[f]<c&&(c=r[f]);return c}function rescale$1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray$1(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!isAnyArray$1(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=min$1(r),a=max$1(r);if(n===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,c=s===void 0?e.autoMinMax?n:0:s,f=e.max,b=f===void 0?e.autoMinMax?a:1:f;if(c>=b)throw new RangeError("min option must be smaller than max option");for(var g=(b-c)/(a-n),m=0;m<r.length;m++)t[m]=(r[m]-n)*g+c;return t}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);Object.defineProperty(matrix$2,"__esModule",{value:!0});var isAnyArray=require$$0$2,rescale=require$$1;const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(r,e={}){const{maxRows:t=15,maxColumns:n=10,maxNumSize:a=8,padMinus:s="auto"}=e;return`${r.constructor.name} {
${indent}[
${indentData}${inspectData(r,t,n,a,s)}
${indent}]
${indent}rows: ${r.rows}
${indent}columns: ${r.columns}
}`}function inspectData(r,e,t,n,a){const{rows:s,columns:c}=r,f=Math.min(s,e),b=Math.min(c,t),g=[];if(a==="auto"){a=!1;e:for(let m=0;m<f;m++)for(let l=0;l<b;l++)if(r.get(m,l)<0){a=!0;break e}}for(let m=0;m<f;m++){let l=[];for(let o=0;o<b;o++)l.push(formatNumber(r.get(m,o),n,a));g.push(`${l.join(" ")}`)}return b!==c&&(g[g.length-1]+=` ... ${c-t} more columns`),f!==s&&g.push(`... ${s-e} more rows`),g.join(`
${indentData}`)}function formatNumber(r,e,t){return(r>=0&&t?` ${formatNumber2(r,e-1)}`:formatNumber2(r,e)).padEnd(e)}function formatNumber2(r,e){let t=r.toString();if(t.length<=e)return t;let n=r.toFixed(e);if(n.length>e&&(n=r.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let a=r.toExponential(e);return a.length>e&&(a=r.toExponential(Math.max(0,e-(a.length-e)))),a.slice(0)}function installMathOperations(r,e){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)+n);return this},r.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)+n.get(a,s));return this},r.add=function(n,a){return new e(n).add(a)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)-n);return this},r.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)-n.get(a,s));return this},r.sub=function(n,a){return new e(n).sub(a)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)*n);return this},r.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)*n.get(a,s));return this},r.mul=function(n,a){return new e(n).mul(a)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)/n);return this},r.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)/n.get(a,s));return this},r.div=function(n,a){return new e(n).div(a)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)%n);return this},r.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)%n.get(a,s));return this},r.mod=function(n,a){return new e(n).mod(a)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)&n);return this},r.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)&n.get(a,s));return this},r.and=function(n,a){return new e(n).and(a)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)|n);return this},r.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)|n.get(a,s));return this},r.or=function(n,a){return new e(n).or(a)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)^n);return this},r.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)^n.get(a,s));return this},r.xor=function(n,a){return new e(n).xor(a)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)<<n);return this},r.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)<<n.get(a,s));return this},r.leftShift=function(n,a){return new e(n).leftShift(a)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>n.get(a,s));return this},r.signPropagatingRightShift=function(n,a){return new e(n).signPropagatingRightShift(a)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,this.get(a,s)>>>n.get(a,s));return this},r.rightShift=function(n,a){return new e(n).rightShift(a)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,~this.get(n,a));return this},r.not=function(n){return new e(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.abs(this.get(n,a)));return this},r.abs=function(n){return new e(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acos(this.get(n,a)));return this},r.acos=function(n){return new e(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acosh(this.get(n,a)));return this},r.acosh=function(n){return new e(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asin(this.get(n,a)));return this},r.asin=function(n){return new e(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asinh(this.get(n,a)));return this},r.asinh=function(n){return new e(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atan(this.get(n,a)));return this},r.atan=function(n){return new e(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atanh(this.get(n,a)));return this},r.atanh=function(n){return new e(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cbrt(this.get(n,a)));return this},r.cbrt=function(n){return new e(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.ceil(this.get(n,a)));return this},r.ceil=function(n){return new e(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.clz32(this.get(n,a)));return this},r.clz32=function(n){return new e(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cos(this.get(n,a)));return this},r.cos=function(n){return new e(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cosh(this.get(n,a)));return this},r.cosh=function(n){return new e(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.exp(this.get(n,a)));return this},r.exp=function(n){return new e(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.expm1(this.get(n,a)));return this},r.expm1=function(n){return new e(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.floor(this.get(n,a)));return this},r.floor=function(n){return new e(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.fround(this.get(n,a)));return this},r.fround=function(n){return new e(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log(this.get(n,a)));return this},r.log=function(n){return new e(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log1p(this.get(n,a)));return this},r.log1p=function(n){return new e(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log10(this.get(n,a)));return this},r.log10=function(n){return new e(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log2(this.get(n,a)));return this},r.log2=function(n){return new e(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.round(this.get(n,a)));return this},r.round=function(n){return new e(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sign(this.get(n,a)));return this},r.sign=function(n){return new e(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sin(this.get(n,a)));return this},r.sin=function(n){return new e(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sinh(this.get(n,a)));return this},r.sinh=function(n){return new e(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sqrt(this.get(n,a)));return this},r.sqrt=function(n){return new e(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tan(this.get(n,a)));return this},r.tan=function(n){return new e(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tanh(this.get(n,a)));return this},r.tanh=function(n){return new e(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.trunc(this.get(n,a)));return this},r.trunc=function(n){return new e(n).trunc()},r.pow=function(n,a){return new e(n).pow(a)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,Math.pow(this.get(a,s),n));return this},r.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let s=0;s<this.columns;s++)this.set(a,s,Math.pow(this.get(a,s),n.get(a,s)));return this}}function checkRowIndex(r,e,t){let n=t?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function checkColumnIndex(r,e,t){let n=t?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function checkRowVector(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function checkColumnVector(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function checkRowIndices(r,e){if(!isAnyArray.isAnyArray(e))throw new TypeError("row indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(r,e){if(!isAnyArray.isAnyArray(e))throw new TypeError("column indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.columns)throw new RangeError("column indices are out of range")}function checkRange(r,e,t,n,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",e),checkNumber("endRow",t),checkNumber("startColumn",n),checkNumber("endColumn",a),e>t||n>a||e<0||e>=r.rows||t<0||t>=r.rows||n<0||n>=r.columns||a<0||a>=r.columns)throw new RangeError("Submatrix indices are out of range")}function newArray$2(r,e=0){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function checkNumber(r,e){if(typeof e!="number")throw new TypeError(`${r} must be a number`)}function checkNonEmpty(r){if(r.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(r){let e=newArray$2(r.rows);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]+=r.get(t,n);return e}function sumByColumn(r){let e=newArray$2(r.columns);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]+=r.get(t,n);return e}function sumAll(r){let e=0;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e+=r.get(t,n);return e}function productByRow(r){let e=newArray$2(r.rows,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]*=r.get(t,n);return e}function productByColumn(r){let e=newArray$2(r.columns,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]*=r.get(t,n);return e}function productAll(r){let e=1;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e*=r.get(t,n);return e}function varianceByRow(r,e,t){const n=r.rows,a=r.columns,s=[];for(let c=0;c<n;c++){let f=0,b=0,g=0;for(let m=0;m<a;m++)g=r.get(c,m)-t[c],f+=g,b+=g*g;e?s.push((b-f*f/a)/(a-1)):s.push((b-f*f/a)/a)}return s}function varianceByColumn(r,e,t){const n=r.rows,a=r.columns,s=[];for(let c=0;c<a;c++){let f=0,b=0,g=0;for(let m=0;m<n;m++)g=r.get(m,c)-t[c],f+=g,b+=g*g;e?s.push((b-f*f/n)/(n-1)):s.push((b-f*f/n)/n)}return s}function varianceAll(r,e,t){const n=r.rows,a=r.columns,s=n*a;let c=0,f=0,b=0;for(let g=0;g<n;g++)for(let m=0;m<a;m++)b=r.get(g,m)-t,c+=b,f+=b*b;return e?(f-c*c/s)/(s-1):(f-c*c/s)/s}function centerByRow(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[t])}function centerByColumn(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[n])}function centerAll(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e)}function getScaleByRow(r){const e=[];for(let t=0;t<r.rows;t++){let n=0;for(let a=0;a<r.columns;a++)n+=Math.pow(r.get(t,a),2)/(r.columns-1);e.push(Math.sqrt(n))}return e}function scaleByRow(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[t])}function getScaleByColumn(r){const e=[];for(let t=0;t<r.columns;t++){let n=0;for(let a=0;a<r.rows;a++)n+=Math.pow(r.get(a,t),2)/(r.rows-1);e.push(Math.sqrt(n))}return e}function scaleByColumn(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[n])}function getScaleAll(r){const e=r.size-1;let t=0;for(let n=0;n<r.columns;n++)for(let a=0;a<r.rows;a++)t+=Math.pow(r.get(a,n),2)/e;return Math.sqrt(t)}function scaleAll(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e)}let AbstractMatrix$1=class qt{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let s=new Matrix$3(e,t);for(let c=0;c<e;c++)for(let f=0;f<t;f++)s.set(c,f,n[c*t+f]);return s}static rowVector(e){let t=new Matrix$3(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new Matrix$3(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new Matrix$3(e,t)}static ones(e,t){return new Matrix$3(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:a=Math.random}=n;let s=new Matrix$3(e,t);for(let c=0;c<e;c++)for(let f=0;f<t;f++)s.set(c,f,a());return s}static randInt(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:a=0,max:s=1e3,random:c=Math.random}=n;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(a>=s)throw new RangeError("min must be smaller than max");let f=s-a,b=new Matrix$3(e,t);for(let g=0;g<e;g++)for(let m=0;m<t;m++){let l=a+Math.round(c()*f);b.set(g,m,l)}return b}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let a=Math.min(e,t),s=this.zeros(e,t);for(let c=0;c<a;c++)s.set(c,c,n);return s}static diag(e,t,n){let a=e.length;t===void 0&&(t=a),n===void 0&&(n=t);let s=Math.min(a,t,n),c=this.zeros(t,n);for(let f=0;f<s;f++)c.set(f,f,e[f]);return c}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,a=e.columns,s=new Matrix$3(n,a);for(let c=0;c<n;c++)for(let f=0;f<a;f++)s.set(c,f,Math.min(e.get(c,f),t.get(c,f)));return s}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,a=e.columns,s=new this(n,a);for(let c=0;c<n;c++)for(let f=0;f<a;f++)s.set(c,f,Math.max(e.get(c,f),t.get(c,f)));return s}static checkMatrix(e){return qt.isMatrix(e)?e:new Matrix$3(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,a=!0,s=!1;for(;e<this.rows&&a;){for(t=0,s=!1;t<this.columns&&s===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(s=!0,n=t):(a=!1,s=!0);e++}return a}isReducedEchelonForm(){let e=0,t=0,n=-1,a=!0,s=!1;for(;e<this.rows&&a;){for(t=0,s=!1;t<this.columns&&s===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(s=!0,n=t):(a=!1,s=!0);for(let c=t+1;c<this.rows;c++)this.get(e,c)!==0&&(a=!1);e++}return a}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let a=t;for(let s=t;s<e.rows;s++)e.get(s,n)>e.get(a,n)&&(a=s);if(e.get(a,n)===0)n++;else{e.swapRows(t,a);let s=e.get(t,n);for(let c=n;c<e.columns;c++)e.set(t,c,e.get(t,c)/s);for(let c=t+1;c<e.rows;c++){let f=e.get(c,n)/e.get(t,n);e.set(c,n,0);for(let b=n+1;b<e.columns;b++)e.set(c,b,e.get(c,b)-e.get(t,b)*f)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,a=n-1;for(;a>=0;)if(e.maxRow(a)===0)a--;else{let s=0,c=!1;for(;s<n&&c===!1;)e.get(a,s)===1?c=!0:s++;for(let f=0;f<a;f++){let b=e.get(f,s);for(let g=s;g<t;g++){let m=e.get(f,g)-b*e.get(a,g);e.set(f,g,m)}}a--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let a=new Matrix$3(this.rows*t,this.columns*n);for(let s=0;s<t;s++)for(let c=0;c<n;c++)a.setSubMatrix(this,this.rows*s,this.columns*c);return a}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){checkRowIndex(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return Matrix$3.rowVector(this.getRow(e))}setRow(e,t){checkRowIndex(this,e),t=checkRowVector(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){checkRowIndex(this,e),checkRowIndex(this,t);for(let n=0;n<this.columns;n++){let a=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,a)}return this}getColumn(e){checkColumnIndex(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return Matrix$3.columnVector(this.getColumn(e))}setColumn(e,t){checkColumnIndex(this,e),t=checkColumnVector(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){checkColumnIndex(this,e),checkColumnIndex(this,t);for(let n=0;n<this.rows;n++){let a=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,a)}return this}addRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){checkRowIndex(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){checkColumnIndex(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t[n]&&(t[n]=this.get(n,a));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t[a]&&(t[a]=this.get(n,a));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t&&(t=this.get(n,a));return t}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){checkNonEmpty(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>e&&(e=this.get(n,a),t[0]=n,t[1]=a);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t[n]&&(t[n]=this.get(n,a));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t[a]&&(t[a]=this.get(n,a));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t&&(t=this.get(n,a));return t}default:throw new Error(`invalid option: ${e}`)}}minIndex(){checkNonEmpty(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<e&&(e=this.get(n,a),t[0]=n,t[1]=a);return t}maxRow(e){if(checkRowIndex(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){checkRowIndex(this,e),checkNonEmpty(this);let t=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)>t&&(t=this.get(e,a),n[1]=a);return n}minRow(e){if(checkRowIndex(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){checkRowIndex(this,e),checkNonEmpty(this);let t=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)<t&&(t=this.get(e,a),n[1]=a);return n}maxColumn(e){if(checkColumnIndex(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){checkColumnIndex(this,e),checkNonEmpty(this);let t=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)>t&&(t=this.get(a,e),n[0]=a);return n}minColumn(e){if(checkColumnIndex(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){checkColumnIndex(this,e),checkNonEmpty(this);let t=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)<t&&(t=this.get(a,e),n[0]=a);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){qt.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a];return n}mmul(e){e=Matrix$3.checkMatrix(e);let t=this.rows,n=this.columns,a=e.columns,s=new Matrix$3(t,a),c=new Float64Array(n);for(let f=0;f<a;f++){for(let b=0;b<n;b++)c[b]=e.get(b,f);for(let b=0;b<t;b++){let g=0;for(let m=0;m<n;m++)g+=this.get(b,m)*c[m];s.set(b,f,g)}}return s}strassen2x2(e){e=Matrix$3.checkMatrix(e);let t=new Matrix$3(2,2);const n=this.get(0,0),a=e.get(0,0),s=this.get(0,1),c=e.get(0,1),f=this.get(1,0),b=e.get(1,0),g=this.get(1,1),m=e.get(1,1),l=(n+g)*(a+m),o=(f+g)*a,u=n*(c-m),d=g*(b-a),y=(n+s)*m,w=(f-n)*(a+c),_=(s-g)*(b+m),T=l+d-y+_,S=u+y,E=o+d,A=l-o+u+w;return t.set(0,0,T),t.set(0,1,S),t.set(1,0,E),t.set(1,1,A),t}strassen3x3(e){e=Matrix$3.checkMatrix(e);let t=new Matrix$3(3,3);const n=this.get(0,0),a=this.get(0,1),s=this.get(0,2),c=this.get(1,0),f=this.get(1,1),b=this.get(1,2),g=this.get(2,0),m=this.get(2,1),l=this.get(2,2),o=e.get(0,0),u=e.get(0,1),d=e.get(0,2),y=e.get(1,0),w=e.get(1,1),_=e.get(1,2),T=e.get(2,0),S=e.get(2,1),E=e.get(2,2),A=(n+a+s-c-f-m-l)*w,P=(n-c)*(-u+w),k=f*(-o+u+y-w-_-T+E),M=(-n+c+f)*(o-u+w),F=(c+f)*(-o+u),O=n*o,D=(-n+g+m)*(o-d+_),R=(-n+g)*(d-_),C=(g+m)*(-o+d),U=(n+a+s-f-b-g-m)*_,N=m*(-o+d+y-w-_-T+S),V=(-s+m+l)*(w+T-S),j=(s-l)*(w-S),K=s*T,ee=(m+l)*(-T+S),he=(-s+f+b)*(_+T-E),ge=(s-b)*(_-E),Se=(f+b)*(-T+E),we=a*y,ne=b*S,re=c*d,oe=g*u,Ee=l*E,Re=O+K+we,De=A+M+F+O+V+K+ee,He=O+D+C+U+K+he+Se,qe=P+k+M+O+K+he+ge,W=P+M+F+O+ne,X=K+he+ge+Se+re,te=O+D+R+N+V+j+K,ie=V+j+K+ee+oe,ye=O+D+R+C+Ee;return t.set(0,0,Re),t.set(0,1,De),t.set(0,2,He),t.set(1,0,qe),t.set(1,1,W),t.set(1,2,X),t.set(2,0,te),t.set(2,1,ie),t.set(2,2,ye),t}mmulStrassen(e){e=Matrix$3.checkMatrix(e);let t=this.clone(),n=t.rows,a=t.columns,s=e.rows,c=e.columns;a!==s&&console.warn(`Multiplying ${n} x ${a} and ${s} x ${c} matrix: dimensions do not match.`);function f(l,o,u){let d=l.rows,y=l.columns;if(d===o&&y===u)return l;{let w=qt.zeros(o,u);return w=w.setSubMatrix(l,0,0),w}}let b=Math.max(n,s),g=Math.max(a,c);t=f(t,b,g),e=f(e,b,g);function m(l,o,u,d){if(u<=512||d<=512)return l.mmul(o);u%2===1&&d%2===1?(l=f(l,u+1,d+1),o=f(o,u+1,d+1)):u%2===1?(l=f(l,u+1,d),o=f(o,u+1,d)):d%2===1&&(l=f(l,u,d+1),o=f(o,u,d+1));let y=parseInt(l.rows/2,10),w=parseInt(l.columns/2,10),_=l.subMatrix(0,y-1,0,w-1),T=o.subMatrix(0,y-1,0,w-1),S=l.subMatrix(0,y-1,w,l.columns-1),E=o.subMatrix(0,y-1,w,o.columns-1),A=l.subMatrix(y,l.rows-1,0,w-1),P=o.subMatrix(y,o.rows-1,0,w-1),k=l.subMatrix(y,l.rows-1,w,l.columns-1),M=o.subMatrix(y,o.rows-1,w,o.columns-1),F=m(qt.add(_,k),qt.add(T,M),y,w),O=m(qt.add(A,k),T,y,w),D=m(_,qt.sub(E,M),y,w),R=m(k,qt.sub(P,T),y,w),C=m(qt.add(_,S),M,y,w),U=m(qt.sub(A,_),qt.add(T,E),y,w),N=m(qt.sub(S,k),qt.add(P,M),y,w),V=qt.add(F,R);V.sub(C),V.add(N);let j=qt.add(D,C),K=qt.add(O,R),ee=qt.sub(F,O);ee.add(D),ee.add(U);let he=qt.zeros(2*V.rows,2*V.columns);return he=he.setSubMatrix(V,0,0),he=he.setSubMatrix(j,V.rows,0),he=he.setSubMatrix(K,0,V.columns),he=he.setSubMatrix(ee,V.rows,V.columns),he.subMatrix(0,u-1,0,d-1)}return m(t,e,b,g)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let a=new Matrix$3(this.rows,this.columns);for(let s=0;s<this.rows;s++){const c=this.getRow(s);c.length>0&&rescale(c,{min:t,max:n,output:c}),a.setRow(s,c)}return a}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let a=new Matrix$3(this.rows,this.columns);for(let s=0;s<this.columns;s++){const c=this.getColumn(s);c.length&&rescale(c,{min:t,max:n,output:c}),a.setColumn(s,c)}return a}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let a=this.get(t,n),s=this.get(t,this.columns-1-n);this.set(t,n,s),this.set(t,this.columns-1-n,a)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let a=this.get(n,t),s=this.get(this.rows-1-n,t);this.set(n,t,s),this.set(this.rows-1-n,t,a)}return this}kroneckerProduct(e){e=Matrix$3.checkMatrix(e);let t=this.rows,n=this.columns,a=e.rows,s=e.columns,c=new Matrix$3(t*a,n*s);for(let f=0;f<t;f++)for(let b=0;b<n;b++)for(let g=0;g<a;g++)for(let m=0;m<s;m++)c.set(a*f+g,s*b+m,this.get(f,b)*e.get(g,m));return c}kroneckerSum(e){if(e=Matrix$3.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,a=this.kroneckerProduct(Matrix$3.eye(n,n)),s=Matrix$3.eye(t,t).kroneckerProduct(e);return a.add(s)}transpose(){let e=new Matrix$3(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=compareNumbers){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=compareNumbers){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,a){checkRange(this,e,t,n,a);let s=new Matrix$3(t-e+1,a-n+1);for(let c=e;c<=t;c++)for(let f=n;f<=a;f++)s.set(c-e,f-n,this.get(c,f));return s}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let a=new Matrix$3(e.length,n-t+1);for(let s=0;s<e.length;s++)for(let c=t;c<=n;c++){if(e[s]<0||e[s]>=this.rows)throw new RangeError(`Row index out of range: ${e[s]}`);a.set(s,c-t,this.get(e[s],c))}return a}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let a=new Matrix$3(n-t+1,e.length);for(let s=0;s<e.length;s++)for(let c=t;c<=n;c++){if(e[s]<0||e[s]>=this.columns)throw new RangeError(`Column index out of range: ${e[s]}`);a.set(c-t,s,this.get(c,e[s]))}return a}setSubMatrix(e,t,n){if(e=Matrix$3.checkMatrix(e),e.isEmpty())return this;let a=t+e.rows-1,s=n+e.columns-1;checkRange(this,t,a,n,s);for(let c=0;c<e.rows;c++)for(let f=0;f<e.columns;f++)this.set(t+c,n+f,e.get(c,f));return this}selection(e,t){checkRowIndices(this,e),checkColumnIndices(this,t);let n=new Matrix$3(e.length,t.length);for(let a=0;a<e.length;a++){let s=e[a];for(let c=0;c<t.length;c++){let f=t[c];n.set(a,c,this.get(s,f))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new Matrix$3(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)t[n]/=this.columns;return t}case"column":{for(let n=0;n<this.columns;n++)t[n]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:a=this.mean(e)}=t;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!isAnyArray.isAnyArray(a))throw new TypeError("mean must be an array");return varianceByRow(this,n,a)}case"column":{if(!isAnyArray.isAnyArray(a))throw new TypeError("mean must be an array");return varianceByColumn(this,n,a)}case void 0:{if(typeof a!="number")throw new TypeError("mean must be a number");return varianceAll(this,n,a)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":{if(!isAnyArray.isAnyArray(n))throw new TypeError("center must be an array");return centerByRow(this,n),this}case"column":{if(!isAnyArray.isAnyArray(n))throw new TypeError("center must be an array");return centerByColumn(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return centerAll(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":{if(n===void 0)n=getScaleByRow(this);else if(!isAnyArray.isAnyArray(n))throw new TypeError("scale must be an array");return scaleByRow(this,n),this}case"column":{if(n===void 0)n=getScaleByColumn(this);else if(!isAnyArray.isAnyArray(n))throw new TypeError("scale must be an array");return scaleByColumn(this,n),this}case void 0:{if(n===void 0)n=getScaleAll(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return scaleAll(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return inspectMatrixWithOptions(this,e)}};AbstractMatrix$1.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix$1.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(r,e){return r-e}function isArrayOfNumbers(r){return r.every(e=>typeof e=="number")}AbstractMatrix$1.random=AbstractMatrix$1.rand;AbstractMatrix$1.randomInt=AbstractMatrix$1.randInt;AbstractMatrix$1.diagonal=AbstractMatrix$1.diag;AbstractMatrix$1.prototype.diagonal=AbstractMatrix$1.prototype.diag;AbstractMatrix$1.identity=AbstractMatrix$1.eye;AbstractMatrix$1.prototype.negate=AbstractMatrix$1.prototype.neg;AbstractMatrix$1.prototype.tensorProduct=AbstractMatrix$1.prototype.kroneckerProduct;let Matrix$3=class Tl extends AbstractMatrix$1{constructor(e,t){if(super(),Tl.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0)if(this.data=[],Number.isInteger(t)&&t>=0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw new TypeError("nColumns must be a positive integer");else if(isAnyArray.isAnyArray(e)){const n=e;if(e=n.length,t=e?n[0].length:0,typeof t!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let a=0;a<e;a++){if(n[a].length!==t)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(n[a]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[a]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=e,this.columns=t}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return checkRowIndex(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),checkRowIndex(this,e,!0),t=Float64Array.from(checkRowVector(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){checkColumnIndex(this,e);for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let a=0;a<e;a++)n[a]=this.data[t][a];for(let a=e+1;a<this.columns;a++)n[a-1]=this.data[t][a];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){typeof t>"u"&&(t=e,e=this.columns),checkColumnIndex(this,e,!0),t=checkColumnVector(this,t);for(let n=0;n<this.rows;n++){const a=new Float64Array(this.columns+1);let s=0;for(;s<e;s++)a[s]=this.data[n][s];for(a[s++]=t[n];s<this.columns+1;s++)a[s]=this.data[n][s-1];this.data[n]=a}return this.columns+=1,this}};installMathOperations(AbstractMatrix$1,Matrix$3);class BaseView extends AbstractMatrix$1{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}let MatrixColumnView$1=class extends BaseView{constructor(e,t){checkColumnIndex(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}},MatrixColumnSelectionView$1=class extends BaseView{constructor(e,t){checkColumnIndices(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}},MatrixFlipColumnView$1=class extends BaseView{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}},MatrixFlipRowView$1=class extends BaseView{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}},MatrixRowView$1=class extends BaseView{constructor(e,t){checkRowIndex(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}},MatrixRowSelectionView$1=class extends BaseView{constructor(e,t){checkRowIndices(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}},MatrixSelectionView$1=class extends BaseView{constructor(e,t,n){checkRowIndices(e,t),checkColumnIndices(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}},MatrixSubView$1=class extends BaseView{constructor(e,t,n,a,s){checkRange(e,t,n,a,s),super(e,n-t+1,s-a+1),this.startRow=t,this.startColumn=a}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}},MatrixTransposeView$2=class extends BaseView{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}},WrapperMatrix1D$1=class extends AbstractMatrix$1{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let a=this._calculateIndex(e,t);return this.data[a]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}},WrapperMatrix2D$1=class extends AbstractMatrix$1{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}};function wrap$1(r,e){if(isAnyArray.isAnyArray(r))return r[0]&&isAnyArray.isAnyArray(r[0])?new WrapperMatrix2D$1(r):new WrapperMatrix1D$1(r,e);throw new Error("the argument is not an array")}let LuDecomposition$1=class{constructor(e){e=WrapperMatrix2D$1.checkMatrix(e);let t=e.clone(),n=t.rows,a=t.columns,s=new Float64Array(n),c=1,f,b,g,m,l,o,u,d,y;for(f=0;f<n;f++)s[f]=f;for(d=new Float64Array(n),b=0;b<a;b++){for(f=0;f<n;f++)d[f]=t.get(f,b);for(f=0;f<n;f++){for(y=Math.min(f,b),l=0,g=0;g<y;g++)l+=t.get(f,g)*d[g];d[f]-=l,t.set(f,b,d[f])}for(m=b,f=b+1;f<n;f++)Math.abs(d[f])>Math.abs(d[m])&&(m=f);if(m!==b){for(g=0;g<a;g++)o=t.get(m,g),t.set(m,g,t.get(b,g)),t.set(b,g,o);u=s[m],s[m]=s[b],s[b]=u,c=-c}if(b<n&&t.get(b,b)!==0)for(f=b+1;f<n;f++)t.set(f,b,t.get(f,b)/t.get(b,b))}this.LU=t,this.pivotVector=s,this.pivotSign=c}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=Matrix$3.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let a=e.columns,s=e.subMatrixRow(this.pivotVector,0,a-1),c=t.columns,f,b,g;for(g=0;g<c;g++)for(f=g+1;f<c;f++)for(b=0;b<a;b++)s.set(f,b,s.get(f,b)-s.get(g,b)*t.get(f,g));for(g=c-1;g>=0;g--){for(b=0;b<a;b++)s.set(g,b,s.get(g,b)/t.get(g,g));for(f=0;f<g;f++)for(b=0;b<a;b++)s.set(f,b,s.get(f,b)-s.get(g,b)*t.get(f,g))}return s}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let a=0;a<n;a++)t*=e.get(a,a);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,a=new Matrix$3(t,n);for(let s=0;s<t;s++)for(let c=0;c<n;c++)s>c?a.set(s,c,e.get(s,c)):s===c?a.set(s,c,1):a.set(s,c,0);return a}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,a=new Matrix$3(t,n);for(let s=0;s<t;s++)for(let c=0;c<n;c++)s<=c?a.set(s,c,e.get(s,c)):a.set(s,c,0);return a}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function hypotenuse$1(r,e){let t=0;return Math.abs(r)>Math.abs(e)?(t=e/r,Math.abs(r)*Math.sqrt(1+t*t)):e!==0?(t=r/e,Math.abs(e)*Math.sqrt(1+t*t)):0}let QrDecomposition$1=class{constructor(e){e=WrapperMatrix2D$1.checkMatrix(e);let t=e.clone(),n=e.rows,a=e.columns,s=new Float64Array(a),c,f,b,g;for(b=0;b<a;b++){let m=0;for(c=b;c<n;c++)m=hypotenuse$1(m,t.get(c,b));if(m!==0){for(t.get(b,b)<0&&(m=-m),c=b;c<n;c++)t.set(c,b,t.get(c,b)/m);for(t.set(b,b,t.get(b,b)+1),f=b+1;f<a;f++){for(g=0,c=b;c<n;c++)g+=t.get(c,b)*t.get(c,f);for(g=-g/t.get(b,b),c=b;c<n;c++)t.set(c,f,t.get(c,f)+g*t.get(c,b))}}s[b]=-m}this.QR=t,this.Rdiag=s}solve(e){e=Matrix$3.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let a=e.columns,s=e.clone(),c=t.columns,f,b,g,m;for(g=0;g<c;g++)for(b=0;b<a;b++){for(m=0,f=g;f<n;f++)m+=t.get(f,g)*s.get(f,b);for(m=-m/t.get(g,g),f=g;f<n;f++)s.set(f,b,s.get(f,b)+m*t.get(f,g))}for(g=c-1;g>=0;g--){for(b=0;b<a;b++)s.set(g,b,s.get(g,b)/this.Rdiag[g]);for(f=0;f<g;f++)for(b=0;b<a;b++)s.set(f,b,s.get(f,b)-s.get(g,b)*t.get(f,g))}return s.subMatrix(0,c-1,0,a-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new Matrix$3(t,t),a,s;for(a=0;a<t;a++)for(s=0;s<t;s++)a<s?n.set(a,s,e.get(a,s)):a===s?n.set(a,s,this.Rdiag[a]):n.set(a,s,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,a=new Matrix$3(t,n),s,c,f,b;for(f=n-1;f>=0;f--){for(s=0;s<t;s++)a.set(s,f,0);for(a.set(f,f,1),c=f;c<n;c++)if(e.get(f,f)!==0){for(b=0,s=f;s<t;s++)b+=e.get(s,f)*a.get(s,c);for(b=-b/e.get(f,f),s=f;s<t;s++)a.set(s,c,a.get(s,c)+b*e.get(s,f))}}return a}},SingularValueDecomposition$1=class{constructor(e,t={}){if(e=WrapperMatrix2D$1.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,a=e.columns;const{computeLeftSingularVectors:s=!0,computeRightSingularVectors:c=!0,autoTranspose:f=!1}=t;let b=!!s,g=!!c,m=!1,l;if(n<a)if(!f)l=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{l=e.transpose(),n=l.rows,a=l.columns,m=!0;let O=b;b=g,g=O}else l=e.clone();let o=Math.min(n,a),u=Math.min(n+1,a),d=new Float64Array(u),y=new Matrix$3(n,o),w=new Matrix$3(a,a),_=new Float64Array(a),T=new Float64Array(n),S=new Float64Array(u);for(let O=0;O<u;O++)S[O]=O;let E=Math.min(n-1,a),A=Math.max(0,Math.min(a-2,n)),P=Math.max(E,A);for(let O=0;O<P;O++){if(O<E){d[O]=0;for(let D=O;D<n;D++)d[O]=hypotenuse$1(d[O],l.get(D,O));if(d[O]!==0){l.get(O,O)<0&&(d[O]=-d[O]);for(let D=O;D<n;D++)l.set(D,O,l.get(D,O)/d[O]);l.set(O,O,l.get(O,O)+1)}d[O]=-d[O]}for(let D=O+1;D<a;D++){if(O<E&&d[O]!==0){let R=0;for(let C=O;C<n;C++)R+=l.get(C,O)*l.get(C,D);R=-R/l.get(O,O);for(let C=O;C<n;C++)l.set(C,D,l.get(C,D)+R*l.get(C,O))}_[D]=l.get(O,D)}if(b&&O<E)for(let D=O;D<n;D++)y.set(D,O,l.get(D,O));if(O<A){_[O]=0;for(let D=O+1;D<a;D++)_[O]=hypotenuse$1(_[O],_[D]);if(_[O]!==0){_[O+1]<0&&(_[O]=0-_[O]);for(let D=O+1;D<a;D++)_[D]/=_[O];_[O+1]+=1}if(_[O]=-_[O],O+1<n&&_[O]!==0){for(let D=O+1;D<n;D++)T[D]=0;for(let D=O+1;D<n;D++)for(let R=O+1;R<a;R++)T[D]+=_[R]*l.get(D,R);for(let D=O+1;D<a;D++){let R=-_[D]/_[O+1];for(let C=O+1;C<n;C++)l.set(C,D,l.get(C,D)+R*T[C])}}if(g)for(let D=O+1;D<a;D++)w.set(D,O,_[D])}}let k=Math.min(a,n+1);if(E<a&&(d[E]=l.get(E,E)),n<k&&(d[k-1]=0),A+1<k&&(_[A]=l.get(A,k-1)),_[k-1]=0,b){for(let O=E;O<o;O++){for(let D=0;D<n;D++)y.set(D,O,0);y.set(O,O,1)}for(let O=E-1;O>=0;O--)if(d[O]!==0){for(let D=O+1;D<o;D++){let R=0;for(let C=O;C<n;C++)R+=y.get(C,O)*y.get(C,D);R=-R/y.get(O,O);for(let C=O;C<n;C++)y.set(C,D,y.get(C,D)+R*y.get(C,O))}for(let D=O;D<n;D++)y.set(D,O,-y.get(D,O));y.set(O,O,1+y.get(O,O));for(let D=0;D<O-1;D++)y.set(D,O,0)}else{for(let D=0;D<n;D++)y.set(D,O,0);y.set(O,O,1)}}if(g)for(let O=a-1;O>=0;O--){if(O<A&&_[O]!==0)for(let D=O+1;D<a;D++){let R=0;for(let C=O+1;C<a;C++)R+=w.get(C,O)*w.get(C,D);R=-R/w.get(O+1,O);for(let C=O+1;C<a;C++)w.set(C,D,w.get(C,D)+R*w.get(C,O))}for(let D=0;D<a;D++)w.set(D,O,0);w.set(O,O,1)}let M=k-1,F=Number.EPSILON;for(;k>0;){let O,D;for(O=k-2;O>=-1&&O!==-1;O--){const R=Number.MIN_VALUE+F*Math.abs(d[O]+Math.abs(d[O+1]));if(Math.abs(_[O])<=R||Number.isNaN(_[O])){_[O]=0;break}}if(O===k-2)D=4;else{let R;for(R=k-1;R>=O&&R!==O;R--){let C=(R!==k?Math.abs(_[R]):0)+(R!==O+1?Math.abs(_[R-1]):0);if(Math.abs(d[R])<=F*C){d[R]=0;break}}R===O?D=3:R===k-1?D=1:(D=2,O=R)}switch(O++,D){case 1:{let R=_[k-2];_[k-2]=0;for(let C=k-2;C>=O;C--){let U=hypotenuse$1(d[C],R),N=d[C]/U,V=R/U;if(d[C]=U,C!==O&&(R=-V*_[C-1],_[C-1]=N*_[C-1]),g)for(let j=0;j<a;j++)U=N*w.get(j,C)+V*w.get(j,k-1),w.set(j,k-1,-V*w.get(j,C)+N*w.get(j,k-1)),w.set(j,C,U)}break}case 2:{let R=_[O-1];_[O-1]=0;for(let C=O;C<k;C++){let U=hypotenuse$1(d[C],R),N=d[C]/U,V=R/U;if(d[C]=U,R=-V*_[C],_[C]=N*_[C],b)for(let j=0;j<n;j++)U=N*y.get(j,C)+V*y.get(j,O-1),y.set(j,O-1,-V*y.get(j,C)+N*y.get(j,O-1)),y.set(j,C,U)}break}case 3:{const R=Math.max(Math.abs(d[k-1]),Math.abs(d[k-2]),Math.abs(_[k-2]),Math.abs(d[O]),Math.abs(_[O])),C=d[k-1]/R,U=d[k-2]/R,N=_[k-2]/R,V=d[O]/R,j=_[O]/R,K=((U+C)*(U-C)+N*N)/2,ee=C*N*(C*N);let he=0;(K!==0||ee!==0)&&(K<0?he=0-Math.sqrt(K*K+ee):he=Math.sqrt(K*K+ee),he=ee/(K+he));let ge=(V+C)*(V-C)+he,Se=V*j;for(let we=O;we<k-1;we++){let ne=hypotenuse$1(ge,Se);ne===0&&(ne=Number.MIN_VALUE);let re=ge/ne,oe=Se/ne;if(we!==O&&(_[we-1]=ne),ge=re*d[we]+oe*_[we],_[we]=re*_[we]-oe*d[we],Se=oe*d[we+1],d[we+1]=re*d[we+1],g)for(let Ee=0;Ee<a;Ee++)ne=re*w.get(Ee,we)+oe*w.get(Ee,we+1),w.set(Ee,we+1,-oe*w.get(Ee,we)+re*w.get(Ee,we+1)),w.set(Ee,we,ne);if(ne=hypotenuse$1(ge,Se),ne===0&&(ne=Number.MIN_VALUE),re=ge/ne,oe=Se/ne,d[we]=ne,ge=re*_[we]+oe*d[we+1],d[we+1]=-oe*_[we]+re*d[we+1],Se=oe*_[we+1],_[we+1]=re*_[we+1],b&&we<n-1)for(let Ee=0;Ee<n;Ee++)ne=re*y.get(Ee,we)+oe*y.get(Ee,we+1),y.set(Ee,we+1,-oe*y.get(Ee,we)+re*y.get(Ee,we+1)),y.set(Ee,we,ne)}_[k-2]=ge;break}case 4:{if(d[O]<=0&&(d[O]=d[O]<0?-d[O]:0,g))for(let R=0;R<=M;R++)w.set(R,O,-w.get(R,O));for(;O<M&&!(d[O]>=d[O+1]);){let R=d[O];if(d[O]=d[O+1],d[O+1]=R,g&&O<a-1)for(let C=0;C<a;C++)R=w.get(C,O+1),w.set(C,O+1,w.get(C,O)),w.set(C,O,R);if(b&&O<n-1)for(let C=0;C<n;C++)R=y.get(C,O+1),y.set(C,O+1,y.get(C,O)),y.set(C,O,R);O++}k--;break}}}if(m){let O=w;w=y,y=O}this.m=n,this.n=a,this.s=d,this.U=y,this.V=w}solve(e){let t=e,n=this.threshold,a=this.s.length,s=Matrix$3.zeros(a,a);for(let o=0;o<a;o++)Math.abs(this.s[o])<=n?s.set(o,o,0):s.set(o,o,1/this.s[o]);let c=this.U,f=this.rightSingularVectors,b=f.mmul(s),g=f.rows,m=c.rows,l=Matrix$3.zeros(g,m);for(let o=0;o<g;o++)for(let u=0;u<m;u++){let d=0;for(let y=0;y<a;y++)d+=b.get(o,y)*c.get(u,y);l.set(o,u,d)}return l.mmul(t)}solveForDiagonal(e){return this.solve(Matrix$3.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,a=e.columns,s=new Matrix$3(n,this.s.length);for(let m=0;m<n;m++)for(let l=0;l<a;l++)Math.abs(this.s[l])>t&&s.set(m,l,e.get(m,l)/this.s[l]);let c=this.U,f=c.rows,b=c.columns,g=new Matrix$3(n,f);for(let m=0;m<n;m++)for(let l=0;l<f;l++){let o=0;for(let u=0;u<b;u++)o+=s.get(m,u)*c.get(l,u);g.set(m,l,o)}return g}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let a=0,s=n.length;a<s;a++)n[a]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix$3.diag(this.s)}};function inverse$1(r,e=!1){return r=WrapperMatrix2D$1.checkMatrix(r),e?new SingularValueDecomposition$1(r).inverse():solve$1(r,Matrix$3.eye(r.rows))}function solve$1(r,e,t=!1){return r=WrapperMatrix2D$1.checkMatrix(r),e=WrapperMatrix2D$1.checkMatrix(e),t?new SingularValueDecomposition$1(r).solve(e):r.isSquare()?new LuDecomposition$1(r).solve(e):new QrDecomposition$1(r).solve(e)}function determinant$1(r){if(r=Matrix$3.checkMatrix(r),r.isSquare()){if(r.columns===0)return 1;let e,t,n,a;if(r.columns===2)return e=r.get(0,0),t=r.get(0,1),n=r.get(1,0),a=r.get(1,1),e*a-t*n;if(r.columns===3){let s,c,f;return s=new MatrixSelectionView$1(r,[1,2],[1,2]),c=new MatrixSelectionView$1(r,[1,2],[0,2]),f=new MatrixSelectionView$1(r,[1,2],[0,1]),e=r.get(0,0),t=r.get(0,1),n=r.get(0,2),e*determinant$1(s)-t*determinant$1(c)+n*determinant$1(f)}else return new LuDecomposition$1(r).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xrange(r,e){let t=[];for(let n=0;n<r;n++)n!==e&&t.push(n);return t}function dependenciesOneRow(r,e,t,n=1e-9,a=1e-9){if(r>a)return new Array(e.rows+1).fill(0);{let s=e.addRow(t,[0]);for(let c=0;c<s.rows;c++)Math.abs(s.get(c,0))<n&&s.set(c,0,0);return s.to1DArray()}}function linearDependencies$1(r,e={}){const{thresholdValue:t=1e-9,thresholdError:n=1e-9}=e;r=Matrix$3.checkMatrix(r);let a=r.rows,s=new Matrix$3(a,a);for(let c=0;c<a;c++){let f=Matrix$3.columnVector(r.getRow(c)),b=r.subMatrixRow(xrange(a,c)).transpose(),m=new SingularValueDecomposition$1(b).solve(f),l=Matrix$3.sub(f,b.mmul(m)).abs().max();s.setRow(c,dependenciesOneRow(l,m,c,t,n))}return s}function pseudoInverse$1(r,e=Number.EPSILON){if(r=Matrix$3.checkMatrix(r),r.isEmpty())return r.transpose();let t=new SingularValueDecomposition$1(r,{autoTranspose:!0}),n=t.leftSingularVectors,a=t.rightSingularVectors,s=t.diagonal;for(let c=0;c<s.length;c++)Math.abs(s[c])>e?s[c]=1/s[c]:s[c]=0;return a.mmul(Matrix$3.diag(s).mmul(n.transpose()))}function covariance$1(r,e=r,t={}){r=new Matrix$3(r);let n=!1;if(typeof e=="object"&&!Matrix$3.isMatrix(e)&&!isAnyArray.isAnyArray(e)?(t=e,e=r,n=!0):e=new Matrix$3(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0}=t;a&&(r=r.center("column"),n||(e=e.center("column")));const s=r.transpose().mmul(e);for(let c=0;c<s.rows;c++)for(let f=0;f<s.columns;f++)s.set(c,f,s.get(c,f)*(1/(r.rows-1)));return s}function correlation$1(r,e=r,t={}){r=new Matrix$3(r);let n=!1;if(typeof e=="object"&&!Matrix$3.isMatrix(e)&&!isAnyArray.isAnyArray(e)?(t=e,e=r,n=!0):e=new Matrix$3(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0,scale:s=!0}=t;a&&(r.center("column"),n||e.center("column")),s&&(r.scale("column"),n||e.scale("column"));const c=r.standardDeviation("column",{unbiased:!0}),f=n?c:e.standardDeviation("column",{unbiased:!0}),b=r.transpose().mmul(e);for(let g=0;g<b.rows;g++)for(let m=0;m<b.columns;m++)b.set(g,m,b.get(g,m)*(1/(c[g]*f[m]))*(1/(r.rows-1)));return b}let EigenvalueDecomposition$1=class{constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(e=WrapperMatrix2D$1.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let a=e.columns,s=new Matrix$3(a,a),c=new Float64Array(a),f=new Float64Array(a),b=e,g,m,l=!1;if(n?l=!0:l=e.isSymmetric(),l){for(g=0;g<a;g++)for(m=0;m<a;m++)s.set(g,m,b.get(g,m));tred2(a,f,c,s),tql2(a,f,c,s)}else{let o=new Matrix$3(a,a),u=new Float64Array(a);for(m=0;m<a;m++)for(g=0;g<a;g++)o.set(g,m,b.get(g,m));orthes(a,o,u,s),hqr2(a,f,c,s,o)}this.n=a,this.e=f,this.d=c,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,a=new Matrix$3(e,e),s,c;for(s=0;s<e;s++){for(c=0;c<e;c++)a.set(s,c,0);a.set(s,s,n[s]),t[s]>0?a.set(s,s+1,t[s]):t[s]<0&&a.set(s,s-1,t[s])}return a}};function tred2(r,e,t,n){let a,s,c,f,b,g,m,l;for(b=0;b<r;b++)t[b]=n.get(r-1,b);for(f=r-1;f>0;f--){for(l=0,c=0,g=0;g<f;g++)l=l+Math.abs(t[g]);if(l===0)for(e[f]=t[f-1],b=0;b<f;b++)t[b]=n.get(f-1,b),n.set(f,b,0),n.set(b,f,0);else{for(g=0;g<f;g++)t[g]/=l,c+=t[g]*t[g];for(a=t[f-1],s=Math.sqrt(c),a>0&&(s=-s),e[f]=l*s,c=c-a*s,t[f-1]=a-s,b=0;b<f;b++)e[b]=0;for(b=0;b<f;b++){for(a=t[b],n.set(b,f,a),s=e[b]+n.get(b,b)*a,g=b+1;g<=f-1;g++)s+=n.get(g,b)*t[g],e[g]+=n.get(g,b)*a;e[b]=s}for(a=0,b=0;b<f;b++)e[b]/=c,a+=e[b]*t[b];for(m=a/(c+c),b=0;b<f;b++)e[b]-=m*t[b];for(b=0;b<f;b++){for(a=t[b],s=e[b],g=b;g<=f-1;g++)n.set(g,b,n.get(g,b)-(a*e[g]+s*t[g]));t[b]=n.get(f-1,b),n.set(f,b,0)}}t[f]=c}for(f=0;f<r-1;f++){if(n.set(r-1,f,n.get(f,f)),n.set(f,f,1),c=t[f+1],c!==0){for(g=0;g<=f;g++)t[g]=n.get(g,f+1)/c;for(b=0;b<=f;b++){for(s=0,g=0;g<=f;g++)s+=n.get(g,f+1)*n.get(g,b);for(g=0;g<=f;g++)n.set(g,b,n.get(g,b)-s*t[g])}}for(g=0;g<=f;g++)n.set(g,f+1,0)}for(b=0;b<r;b++)t[b]=n.get(r-1,b),n.set(r-1,b,0);n.set(r-1,r-1,1),e[0]=0}function tql2(r,e,t,n){let a,s,c,f,b,g,m,l,o,u,d,y,w,_,T,S;for(c=1;c<r;c++)e[c-1]=e[c];e[r-1]=0;let E=0,A=0,P=Number.EPSILON;for(g=0;g<r;g++){for(A=Math.max(A,Math.abs(t[g])+Math.abs(e[g])),m=g;m<r&&!(Math.abs(e[m])<=P*A);)m++;if(m>g)do{for(a=t[g],l=(t[g+1]-a)/(2*e[g]),o=hypotenuse$1(l,1),l<0&&(o=-o),t[g]=e[g]/(l+o),t[g+1]=e[g]*(l+o),u=t[g+1],s=a-t[g],c=g+2;c<r;c++)t[c]-=s;for(E=E+s,l=t[m],d=1,y=d,w=d,_=e[g+1],T=0,S=0,c=m-1;c>=g;c--)for(w=y,y=d,S=T,a=d*e[c],s=d*l,o=hypotenuse$1(l,e[c]),e[c+1]=T*o,T=e[c]/o,d=l/o,l=d*t[c]-T*a,t[c+1]=s+T*(d*a+T*t[c]),b=0;b<r;b++)s=n.get(b,c+1),n.set(b,c+1,T*n.get(b,c)+d*s),n.set(b,c,d*n.get(b,c)-T*s);l=-T*S*w*_*e[g]/u,e[g]=T*l,t[g]=d*l}while(Math.abs(e[g])>P*A);t[g]=t[g]+E,e[g]=0}for(c=0;c<r-1;c++){for(b=c,l=t[c],f=c+1;f<r;f++)t[f]<l&&(b=f,l=t[f]);if(b!==c)for(t[b]=t[c],t[c]=l,f=0;f<r;f++)l=n.get(f,c),n.set(f,c,n.get(f,b)),n.set(f,b,l)}}function orthes(r,e,t,n){let a=0,s=r-1,c,f,b,g,m,l,o;for(l=a+1;l<=s-1;l++){for(o=0,g=l;g<=s;g++)o=o+Math.abs(e.get(g,l-1));if(o!==0){for(b=0,g=s;g>=l;g--)t[g]=e.get(g,l-1)/o,b+=t[g]*t[g];for(f=Math.sqrt(b),t[l]>0&&(f=-f),b=b-t[l]*f,t[l]=t[l]-f,m=l;m<r;m++){for(c=0,g=s;g>=l;g--)c+=t[g]*e.get(g,m);for(c=c/b,g=l;g<=s;g++)e.set(g,m,e.get(g,m)-c*t[g])}for(g=0;g<=s;g++){for(c=0,m=s;m>=l;m--)c+=t[m]*e.get(g,m);for(c=c/b,m=l;m<=s;m++)e.set(g,m,e.get(g,m)-c*t[m])}t[l]=o*t[l],e.set(l,l-1,o*f)}}for(g=0;g<r;g++)for(m=0;m<r;m++)n.set(g,m,g===m?1:0);for(l=s-1;l>=a+1;l--)if(e.get(l,l-1)!==0){for(g=l+1;g<=s;g++)t[g]=e.get(g,l-1);for(m=l;m<=s;m++){for(f=0,g=l;g<=s;g++)f+=t[g]*n.get(g,m);for(f=f/t[l]/e.get(l,l-1),g=l;g<=s;g++)n.set(g,m,n.get(g,m)+f*t[g])}}}function hqr2(r,e,t,n,a){let s=r-1,c=0,f=r-1,b=Number.EPSILON,g=0,m=0,l=0,o=0,u=0,d=0,y=0,w=0,_,T,S,E,A,P,k,M,F,O,D,R,C,U,N;for(_=0;_<r;_++)for((_<c||_>f)&&(t[_]=a.get(_,_),e[_]=0),T=Math.max(_-1,0);T<r;T++)m=m+Math.abs(a.get(_,T));for(;s>=c;){for(E=s;E>c&&(d=Math.abs(a.get(E-1,E-1))+Math.abs(a.get(E,E)),d===0&&(d=m),!(Math.abs(a.get(E,E-1))<b*d));)E--;if(E===s)a.set(s,s,a.get(s,s)+g),t[s]=a.get(s,s),e[s]=0,s--,w=0;else if(E===s-1){if(k=a.get(s,s-1)*a.get(s-1,s),l=(a.get(s-1,s-1)-a.get(s,s))/2,o=l*l+k,y=Math.sqrt(Math.abs(o)),a.set(s,s,a.get(s,s)+g),a.set(s-1,s-1,a.get(s-1,s-1)+g),M=a.get(s,s),o>=0){for(y=l>=0?l+y:l-y,t[s-1]=M+y,t[s]=t[s-1],y!==0&&(t[s]=M-k/y),e[s-1]=0,e[s]=0,M=a.get(s,s-1),d=Math.abs(M)+Math.abs(y),l=M/d,o=y/d,u=Math.sqrt(l*l+o*o),l=l/u,o=o/u,T=s-1;T<r;T++)y=a.get(s-1,T),a.set(s-1,T,o*y+l*a.get(s,T)),a.set(s,T,o*a.get(s,T)-l*y);for(_=0;_<=s;_++)y=a.get(_,s-1),a.set(_,s-1,o*y+l*a.get(_,s)),a.set(_,s,o*a.get(_,s)-l*y);for(_=c;_<=f;_++)y=n.get(_,s-1),n.set(_,s-1,o*y+l*n.get(_,s)),n.set(_,s,o*n.get(_,s)-l*y)}else t[s-1]=M+l,t[s]=M+l,e[s-1]=y,e[s]=-y;s=s-2,w=0}else{if(M=a.get(s,s),F=0,k=0,E<s&&(F=a.get(s-1,s-1),k=a.get(s,s-1)*a.get(s-1,s)),w===10){for(g+=M,_=c;_<=s;_++)a.set(_,_,a.get(_,_)-M);d=Math.abs(a.get(s,s-1))+Math.abs(a.get(s-1,s-2)),M=F=.75*d,k=-.4375*d*d}if(w===30&&(d=(F-M)/2,d=d*d+k,d>0)){for(d=Math.sqrt(d),F<M&&(d=-d),d=M-k/((F-M)/2+d),_=c;_<=s;_++)a.set(_,_,a.get(_,_)-d);g+=d,M=F=k=.964}for(w=w+1,A=s-2;A>=E&&(y=a.get(A,A),u=M-y,d=F-y,l=(u*d-k)/a.get(A+1,A)+a.get(A,A+1),o=a.get(A+1,A+1)-y-u-d,u=a.get(A+2,A+1),d=Math.abs(l)+Math.abs(o)+Math.abs(u),l=l/d,o=o/d,u=u/d,!(A===E||Math.abs(a.get(A,A-1))*(Math.abs(o)+Math.abs(u))<b*(Math.abs(l)*(Math.abs(a.get(A-1,A-1))+Math.abs(y)+Math.abs(a.get(A+1,A+1))))));)A--;for(_=A+2;_<=s;_++)a.set(_,_-2,0),_>A+2&&a.set(_,_-3,0);for(S=A;S<=s-1&&(U=S!==s-1,S!==A&&(l=a.get(S,S-1),o=a.get(S+1,S-1),u=U?a.get(S+2,S-1):0,M=Math.abs(l)+Math.abs(o)+Math.abs(u),M!==0&&(l=l/M,o=o/M,u=u/M)),M!==0);S++)if(d=Math.sqrt(l*l+o*o+u*u),l<0&&(d=-d),d!==0){for(S!==A?a.set(S,S-1,-d*M):E!==A&&a.set(S,S-1,-a.get(S,S-1)),l=l+d,M=l/d,F=o/d,y=u/d,o=o/l,u=u/l,T=S;T<r;T++)l=a.get(S,T)+o*a.get(S+1,T),U&&(l=l+u*a.get(S+2,T),a.set(S+2,T,a.get(S+2,T)-l*y)),a.set(S,T,a.get(S,T)-l*M),a.set(S+1,T,a.get(S+1,T)-l*F);for(_=0;_<=Math.min(s,S+3);_++)l=M*a.get(_,S)+F*a.get(_,S+1),U&&(l=l+y*a.get(_,S+2),a.set(_,S+2,a.get(_,S+2)-l*u)),a.set(_,S,a.get(_,S)-l),a.set(_,S+1,a.get(_,S+1)-l*o);for(_=c;_<=f;_++)l=M*n.get(_,S)+F*n.get(_,S+1),U&&(l=l+y*n.get(_,S+2),n.set(_,S+2,n.get(_,S+2)-l*u)),n.set(_,S,n.get(_,S)-l),n.set(_,S+1,n.get(_,S+1)-l*o)}}}if(m!==0){for(s=r-1;s>=0;s--)if(l=t[s],o=e[s],o===0)for(E=s,a.set(s,s,1),_=s-1;_>=0;_--){for(k=a.get(_,_)-l,u=0,T=E;T<=s;T++)u=u+a.get(_,T)*a.get(T,s);if(e[_]<0)y=k,d=u;else if(E=_,e[_]===0?a.set(_,s,k!==0?-u/k:-u/(b*m)):(M=a.get(_,_+1),F=a.get(_+1,_),o=(t[_]-l)*(t[_]-l)+e[_]*e[_],P=(M*d-y*u)/o,a.set(_,s,P),a.set(_+1,s,Math.abs(M)>Math.abs(y)?(-u-k*P)/M:(-d-F*P)/y)),P=Math.abs(a.get(_,s)),b*P*P>1)for(T=_;T<=s;T++)a.set(T,s,a.get(T,s)/P)}else if(o<0)for(E=s-1,Math.abs(a.get(s,s-1))>Math.abs(a.get(s-1,s))?(a.set(s-1,s-1,o/a.get(s,s-1)),a.set(s-1,s,-(a.get(s,s)-l)/a.get(s,s-1))):(N=cdiv(0,-a.get(s-1,s),a.get(s-1,s-1)-l,o),a.set(s-1,s-1,N[0]),a.set(s-1,s,N[1])),a.set(s,s-1,0),a.set(s,s,1),_=s-2;_>=0;_--){for(O=0,D=0,T=E;T<=s;T++)O=O+a.get(_,T)*a.get(T,s-1),D=D+a.get(_,T)*a.get(T,s);if(k=a.get(_,_)-l,e[_]<0)y=k,u=O,d=D;else if(E=_,e[_]===0?(N=cdiv(-O,-D,k,o),a.set(_,s-1,N[0]),a.set(_,s,N[1])):(M=a.get(_,_+1),F=a.get(_+1,_),R=(t[_]-l)*(t[_]-l)+e[_]*e[_]-o*o,C=(t[_]-l)*2*o,R===0&&C===0&&(R=b*m*(Math.abs(k)+Math.abs(o)+Math.abs(M)+Math.abs(F)+Math.abs(y))),N=cdiv(M*u-y*O+o*D,M*d-y*D-o*O,R,C),a.set(_,s-1,N[0]),a.set(_,s,N[1]),Math.abs(M)>Math.abs(y)+Math.abs(o)?(a.set(_+1,s-1,(-O-k*a.get(_,s-1)+o*a.get(_,s))/M),a.set(_+1,s,(-D-k*a.get(_,s)-o*a.get(_,s-1))/M)):(N=cdiv(-u-F*a.get(_,s-1),-d-F*a.get(_,s),y,o),a.set(_+1,s-1,N[0]),a.set(_+1,s,N[1]))),P=Math.max(Math.abs(a.get(_,s-1)),Math.abs(a.get(_,s))),b*P*P>1)for(T=_;T<=s;T++)a.set(T,s-1,a.get(T,s-1)/P),a.set(T,s,a.get(T,s)/P)}for(_=0;_<r;_++)if(_<c||_>f)for(T=_;T<r;T++)n.set(_,T,a.get(_,T));for(T=r-1;T>=c;T--)for(_=c;_<=f;_++){for(y=0,S=c;S<=Math.min(T,f);S++)y=y+n.get(_,S)*a.get(S,T);n.set(_,T,y)}}}function cdiv(r,e,t,n){let a,s;return Math.abs(t)>Math.abs(n)?(a=n/t,s=t+a*n,[(r+a*e)/s,(e-a*r)/s]):(a=t/n,s=n+a*t,[(a*r+e)/s,(a*e-r)/s])}let CholeskyDecomposition$1=class{constructor(e){if(e=WrapperMatrix2D$1.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,n=t.rows,a=new Matrix$3(n,n),s=!0,c,f,b;for(f=0;f<n;f++){let g=0;for(b=0;b<f;b++){let m=0;for(c=0;c<b;c++)m+=a.get(b,c)*a.get(f,c);m=(t.get(f,b)-m)/a.get(b,b),a.set(f,b,m),g=g+m*m}for(g=t.get(f,f)-g,s&=g>0,a.set(f,f,Math.sqrt(Math.max(g,0))),b=f+1;b<n;b++)a.set(f,b,0)}this.L=a,this.positiveDefinite=!!s}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=WrapperMatrix2D$1.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let a=e.columns,s=e.clone(),c,f,b;for(b=0;b<n;b++)for(f=0;f<a;f++){for(c=0;c<b;c++)s.set(b,f,s.get(b,f)-s.get(c,f)*t.get(b,c));s.set(b,f,s.get(b,f)/t.get(b,b))}for(b=n-1;b>=0;b--)for(f=0;f<a;f++){for(c=b+1;c<n;c++)s.set(b,f,s.get(b,f)-s.get(c,f)*t.get(c,b));s.set(b,f,s.get(b,f)/t.get(b,b))}return s}get lowerTriangularMatrix(){return this.L}};class nipals{constructor(e,t={}){e=WrapperMatrix2D$1.checkMatrix(e);let{Y:n}=t;const{scaleScores:a=!1,maxIterations:s=1e3,terminationCriteria:c=1e-10}=t;let f;if(n){if(isAnyArray.isAnyArray(n)&&typeof n[0]=="number"?n=Matrix$3.columnVector(n):n=WrapperMatrix2D$1.checkMatrix(n),n.rows!==e.rows)throw new Error("Y should have the same number of rows as X");f=n.getColumnVector(0)}else f=e.getColumnVector(0);let b=1,g,m,l,o;for(let u=0;u<s&&b>c;u++)l=e.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0)),l=l.div(l.norm()),g=e.mmul(l).div(l.transpose().mmul(l).get(0,0)),u>0&&(b=g.clone().sub(o).pow(2).sum()),o=g.clone(),n?(m=n.transpose().mmul(g).div(g.transpose().mmul(g).get(0,0)),m=m.div(m.norm()),f=n.mmul(m).div(m.transpose().mmul(m).get(0,0))):f=g;if(n){let u=e.transpose().mmul(g).div(g.transpose().mmul(g).get(0,0));u=u.div(u.norm());let d=e.clone().sub(g.clone().mmul(u.transpose())),y=f.transpose().mmul(g).div(g.transpose().mmul(g).get(0,0)),w=n.clone().sub(g.clone().mulS(y.get(0,0)).mmul(m.transpose()));this.t=g,this.p=u.transpose(),this.w=l.transpose(),this.q=m,this.u=f,this.s=g.transpose().mmul(g),this.xResidual=d,this.yResidual=w,this.betas=y}else this.w=l.transpose(),this.s=g.transpose().mmul(g).sqrt(),a?this.t=g.clone().div(this.s.get(0,0)):this.t=g,this.xResidual=e.sub(g.mmul(l.transpose()))}}var AbstractMatrix_1=matrix$2.AbstractMatrix=AbstractMatrix$1,CHO$1=matrix$2.CHO=CholeskyDecomposition$1,CholeskyDecomposition_1=matrix$2.CholeskyDecomposition=CholeskyDecomposition$1,EVD$1=matrix$2.EVD=EigenvalueDecomposition$1,EigenvalueDecomposition_1=matrix$2.EigenvalueDecomposition=EigenvalueDecomposition$1,LU$1=matrix$2.LU=LuDecomposition$1,LuDecomposition_1=matrix$2.LuDecomposition=LuDecomposition$1,Matrix_1=matrix$2.Matrix=Matrix$3,MatrixColumnSelectionView_1=matrix$2.MatrixColumnSelectionView=MatrixColumnSelectionView$1,MatrixColumnView_1=matrix$2.MatrixColumnView=MatrixColumnView$1,MatrixFlipColumnView_1=matrix$2.MatrixFlipColumnView=MatrixFlipColumnView$1,MatrixFlipRowView_1=matrix$2.MatrixFlipRowView=MatrixFlipRowView$1,MatrixRowSelectionView_1=matrix$2.MatrixRowSelectionView=MatrixRowSelectionView$1,MatrixRowView_1=matrix$2.MatrixRowView=MatrixRowView$1,MatrixSelectionView_1=matrix$2.MatrixSelectionView=MatrixSelectionView$1,MatrixSubView_1=matrix$2.MatrixSubView=MatrixSubView$1,MatrixTransposeView_1=matrix$2.MatrixTransposeView=MatrixTransposeView$2,NIPALS$1=matrix$2.NIPALS=nipals,Nipals$1=matrix$2.Nipals=nipals,QR$1=matrix$2.QR=QrDecomposition$1,QrDecomposition_1=matrix$2.QrDecomposition=QrDecomposition$1,SVD$1=matrix$2.SVD=SingularValueDecomposition$1,SingularValueDecomposition_1=matrix$2.SingularValueDecomposition=SingularValueDecomposition$1,WrapperMatrix1D_1=matrix$2.WrapperMatrix1D=WrapperMatrix1D$1,WrapperMatrix2D_1=matrix$2.WrapperMatrix2D=WrapperMatrix2D$1,correlation_1=matrix$2.correlation=correlation$1,covariance_1=matrix$2.covariance=covariance$1,_default=matrix$2.default=Matrix$3,determinant_1=matrix$2.determinant=determinant$1,inverse_1=matrix$2.inverse=inverse$1,linearDependencies_1=matrix$2.linearDependencies=linearDependencies$1,pseudoInverse_1=matrix$2.pseudoInverse=pseudoInverse$1,solve_1=matrix$2.solve=solve$1,wrap_1=matrix$2.wrap=wrap$1;const AbstractMatrix=AbstractMatrix_1,CHO=CHO$1,CholeskyDecomposition=CholeskyDecomposition_1,EVD=EVD$1,EigenvalueDecomposition=EigenvalueDecomposition_1,LU=LU$1,LuDecomposition=LuDecomposition_1,Matrix$2=Matrix_1,MatrixColumnSelectionView=MatrixColumnSelectionView_1,MatrixColumnView=MatrixColumnView_1,MatrixFlipColumnView=MatrixFlipColumnView_1,MatrixFlipRowView=MatrixFlipRowView_1,MatrixRowSelectionView=MatrixRowSelectionView_1,MatrixRowView=MatrixRowView_1,MatrixSelectionView=MatrixSelectionView_1,MatrixSubView=MatrixSubView_1,MatrixTransposeView$1=MatrixTransposeView_1,NIPALS=NIPALS$1,Nipals=Nipals$1,QR=QR$1,QrDecomposition=QrDecomposition_1,SVD=SVD$1,SingularValueDecomposition=SingularValueDecomposition_1,WrapperMatrix1D=WrapperMatrix1D_1,WrapperMatrix2D=WrapperMatrix2D_1,correlation=correlation_1,covariance=covariance_1,matrix=_default.Matrix?_default.Matrix:Matrix_1,determinant=determinant_1,inverse=inverse_1,linearDependencies=linearDependencies_1,pseudoInverse=pseudoInverse_1,solve=solve_1,wrap=wrap_1,matrix$1=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix,CHO,CholeskyDecomposition,EVD,EigenvalueDecomposition,LU,LuDecomposition,Matrix:Matrix$2,MatrixColumnSelectionView,MatrixColumnView,MatrixFlipColumnView,MatrixFlipRowView,MatrixRowSelectionView,MatrixRowView,MatrixSelectionView,MatrixSubView,MatrixTransposeView:MatrixTransposeView$1,NIPALS,Nipals,QR,QrDecomposition,SVD,SingularValueDecomposition,WrapperMatrix1D,WrapperMatrix2D,correlation,covariance,default:matrix,determinant,inverse,linearDependencies,pseudoInverse,solve,wrap},Symbol.toStringTag,{value:"Module"}));function getSeparatedKernel(r){const e=new SVD(r,{autoTranspose:!0});if(e.rank!==1)return null;const t=Math.sqrt(e.s[0]),n=e.U.to2DArray().map(s=>s[0]*t),a=e.V.to2DArray().map(s=>s[0]*t);return[n,a]}function convolution(r,e={}){let{channels:t,bitDepth:n,normalize:a=!1,divisor:s=1,border:c="copy",algorithm:f="auto"}=e,b={};n&&(b.bitDepth=n);let g=Image$1.createFrom(this,b);if(t=validateArrayOfChannels(this,t),f!=="separable")({kernel:r}=validateKernel(r));else if(!Array.isArray(r)||r.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(f==="auto"){let E=getSeparatedKernel(r);E!==null?(f="separable",r=E):(r.length>9||r[0].length>9)&&this.width<=4096&&this.height<=4096?f="fft":f="direct"}let m,l;f==="separable"?(m=Math.floor(r[0].length/2),l=Math.floor(r[1].length/2)):(m=Math.floor(r.length/2),l=Math.floor(r[0].length/2));let o=g.isClamped,u=new Array(this.height*this.width),d,y,w,_,T,S;for(_=0;_<t.length;_++){for(T=t[_],w=0;w<this.height;w++)for(y=0;y<this.width;y++)d=w*this.width+y,u[d]=this.data[d*this.channels+T];if(f==="direct")S=src$1.direct(u,r,{rows:this.height,cols:this.width,normalize:a,divisor:s});else if(f==="separable"){if(S=convolutionSeparable(u,r,this.width,this.height),a){s=0;for(let E=0;E<r[0].length;E++)for(let A=0;A<r[1].length;A++)s+=r[0][E]*r[1][A]}if(s!==1)for(let E=0;E<S.length;E++)S[E]/=s}else S=src$1.fft(u,r,{rows:this.height,cols:this.width,normalize:a,divisor:s});for(w=0;w<this.height;w++)for(y=0;y<this.width;y++)d=w*this.width+y,o?g.data[d*this.channels+T]=clamp(S[d],g):g.data[d*this.channels+T]=S[d]}if(this.alpha&&!t.includes(this.channels))for(y=this.components;y<this.data.length;y=y+this.channels)g.data[y]=this.data[y];return c!=="periodic"&&g.setBorder({size:[l,m],algorithm:c}),g}function gradientFilter(r={}){let{direction:e="xy",border:t="copy",kernelX:n,kernelY:a,channels:s,bitDepth:c=this.bitDepth}=r;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),e){case"x":if(!n)throw new Error("kernelX option is missing");return convolution.call(this,n,{channels:s,border:t,bitDepth:c});case"y":if(!a)throw new Error("kernelY option is missing");return convolution.call(this,a,{channels:s,border:t,bitDepth:c});case"xy":{if(!n)throw new Error("kernelX option is missing");if(!a)throw new Error("kernelY option is missing");const f=convolution.call(this,n,{channels:s,border:t,bitDepth:32}),b=convolution.call(this,a,{channels:s,border:t,bitDepth:32});return f.hypotenuse(b,{bitDepth:c,channels:s})}default:throw new Error(`Unknown parameter direction: ${e}`)}}function sobelFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1=newArray;function newArray(r,e){r=r||0;for(var t=new Array(r),n=0;n<r;n++)t[n]=e;return t}const newArray$1=getDefaultExportFromCjs(newArray_1);function level(r={}){let{algorithm:e="range",channels:t,min:n=this.min,max:a=this.max}=r;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),t=validateArrayOfChannels(this,{channels:t}),t.length!==this.channel&&(Array.isArray(n)&&n.length===this.channels&&(n=n.filter((s,c)=>t.includes(c))),Array.isArray(a)&&a.length===this.channels&&(a=a.filter((s,c)=>t.includes(c)))),e){case"range":n<0&&(n=0),a>this.maxValue&&(a=this.maxValue),Array.isArray(n)||(n=newArray$1(t.length,n)),Array.isArray(a)||(a=newArray$1(t.length,a)),processImage(this,n,a,t);break;default:throw new Error(`level: algorithm not implement: ${e}`)}return this}function processImage(r,e,t,n){let a=1e-5,s=new Array(n.length);for(let c=0;c<n.length;c++)e[c]===0&&t[c]===r.maxValue||t[c]===e[c]?s[c]=0:s[c]=(r.maxValue+1-a)/(t[c]-e[c]),e[c]+=(.5-a/2)/s[c];for(let c=0;c<n.length;c++){let f=n[c];if(s[c]!==0)for(let b=0;b<r.data.length;b+=r.channels)r.data[b+f]=Math.min(Math.max(0,(r.data[b+f]-e[c])*s[c]+.5|0),r.maxValue)}}var toString=Object.prototype.toString,isArrayType=function r(e){return toString.call(e).substr(-6,5)==="Array"};const isArray=getDefaultExportFromCjs(isArrayType);function checkNumberArray(r){if(isNaN(r)){if(r instanceof Image$1)return r.data;if(!isArray(r))throw new Error("checkNumberArray: the value should be either a number, array or Image");return r}else{if(r<=0)throw new Error("checkNumberArray: the value must be greater than 0");return r}}function add(r,e={}){let{channels:t}=e;if(this.checkProcessable("add",{bitDepth:[8,16]}),t=validateArrayOfChannels(this,{channels:t}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("add: the data size is different");for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.max(0,Math.min(this.maxValue,this.data[s+a]+r[s+a]>>0))}}else for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.min(this.maxValue,this.data[s+a]+r>>0)}return this}function subtract(r,e={}){let{channels:t}=e;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),t=validateArrayOfChannels(this,{channels:t}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("subtract: the data size is different");for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.max(0,Math.min(this.maxValue,this.data[s+a]-r[s+a]>>0))}}else for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.max(0,this.data[s+a]-r>>0)}return this}function subtractImage(r,e={}){let{channels:t,absolute:n=!1}=e;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==r.width||this.height!==r.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("subtractImage: both images must have the same number of channels");let a=this.clone();t=validateArrayOfChannels(this,{channels:t});for(let s=0;s<t.length;s++){let c=t[s];for(let f=c;f<this.data.length;f+=this.channels){let b=this.data[f]-r.data[f];n?a.data[f]=Math.abs(b):a.data[f]=Math.max(b,0)}}return a}function hypotenuse(r,e={}){let{bitDepth:t=this.bitDepth,channels:n}=e;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==r.width||this.height!==r.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("hypotenuse: both images must have the same number of channels");let a=Image$1.createFrom(this,{bitDepth:t});n=validateArrayOfChannels(this,{channels:n});let s=a.isClamped;for(let c=0;c<n.length;c++){let f=n[c];for(let b=f;b<this.data.length;b+=this.channels){let g=Math.hypot(this.data[b],r.data[b]);s?a.data[b]=Math.min(Math.max(Math.round(g),0),a.maxValue):a.data[b]=g}}return a}function multiply(r,e={}){let{channels:t}=e;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),r<=0)throw new Error("multiply: the value must be greater than 0");if(t=validateArrayOfChannels(this,{channels:t}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("multiply: the data size is different");for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.max(0,Math.min(this.maxValue,this.data[s+a]*r[s+a]>>0))}}else for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.min(this.maxValue,this.data[s+a]*r>>0)}return this}function divide(r,e={}){let{channels:t}=e;if(this.checkProcessable("divide",{bitDepth:[8,16]}),t=validateArrayOfChannels(this,{channels:t}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("divide: the: the data size is different");for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.max(0,Math.min(this.maxValue,this.data[s+a]/r[s+a]>>0))}}else for(let n=0;n<t.length;n++){let a=t[n];for(let s=0;s<this.data.length;s+=this.channels)this.data[s+a]=Math.min(this.maxValue,this.data[s+a]/r>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(e){if(typeof e=="number")return this._predict(e);if(isAnyArray$1(e)){const t=[];for(let n=0;n<e.length;n++)t.push(this._predict(e[n]));return t}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(e,t){if(!isAnyArray$1(e)||!isAnyArray$1(t)||e.length!==t.length)throw new Error("x and y must be arrays of the same length");const n=e.length,a=new Array(n);for(let u=0;u<n;u++)a[u]=this._predict(e[u]);let s=0,c=0,f=0,b=0,g=0,m=0,l=0;for(let u=0;u<n;u++)s+=a[u],c+=t[u],g+=a[u]*a[u],m+=t[u]*t[u],l+=a[u]*t[u],t[u]!==0&&(f+=(t[u]-a[u])*(t[u]-a[u])/t[u]),b+=(t[u]-a[u])*(t[u]-a[u]);const o=(n*l-s*c)/Math.sqrt((n*g-s*s)*(n*m-c*c));return{r:o,r2:o*o,chi2:f,rmsd:Math.sqrt(b/n)}}}const require$$0$1=getAugmentedNamespace(matrix$1);function squaredEuclidean$4(r,e){let t=0;for(let n=0;n<r.length;n++)t+=(r[n]-e[n])*(r[n]-e[n]);return t}function euclidean$2(r,e){return Math.sqrt(squaredEuclidean$4(r,e))}const euclidean$3=Object.freeze(Object.defineProperty({__proto__:null,euclidean:euclidean$2,squaredEuclidean:squaredEuclidean$4},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$3),{squaredEuclidean:squaredEuclidean$3}=require$$0,defaultOptions$b={sigma:1};let GaussianKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$b,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}compute(e,t){const n=squaredEuclidean$3(e,t);return Math.exp(-n/this.divisor)}};var gaussianKernel=GaussianKernel$1;const defaultOptions$a={degree:1,constant:1,scale:1};let PolynomialKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$a,e),this.degree=e.degree,this.constant=e.constant,this.scale=e.scale}compute(e,t){for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return Math.pow(this.scale*n+this.constant,this.degree)}};var polynomialKernel=PolynomialKernel$1;const defaultOptions$9={alpha:.01,constant:-Math.E};let SigmoidKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$9,e),this.alpha=e.alpha,this.constant=e.constant}compute(e,t){for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return Math.tanh(this.alpha*n+this.constant)}};var sigmoidKernel=SigmoidKernel$1;const defaultOptions$8={sigma:1,degree:1};let ANOVAKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$8,e),this.sigma=e.sigma,this.degree=e.degree}compute(e,t){for(var n=0,a=Math.min(e.length,t.length),s=1;s<=a;++s)n+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(e[s-1],s)-Math.pow(t[s-1],s),2)),this.degree);return n}};var anovaKernel=ANOVAKernel$1;const{squaredEuclidean:squaredEuclidean$2}=require$$0,defaultOptions$7={sigma:1};let CauchyKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$7,e),this.sigma=e.sigma}compute(e,t){return 1/(1+squaredEuclidean$2(e,t)/(this.sigma*this.sigma))}};var cauchyKernel=CauchyKernel$1;const{euclidean:euclidean$1}=require$$0,defaultOptions$6={sigma:1};let ExponentialKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$6,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}compute(e,t){const n=euclidean$1(e,t);return Math.exp(-n/this.divisor)}};var exponentialKernel=ExponentialKernel$1;class HistogramIntersectionKernel{compute(e,t){for(var n=Math.min(e.length,t.length),a=0,s=0;s<n;++s)a+=Math.min(e[s],t[s]);return a}}var histogramIntersectionKernel=HistogramIntersectionKernel;const{euclidean}=require$$0,defaultOptions$5={sigma:1};let LaplacianKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$5,e),this.sigma=e.sigma}compute(e,t){const n=euclidean(e,t);return Math.exp(-n/this.sigma)}};var laplacianKernel=LaplacianKernel$1;const{squaredEuclidean:squaredEuclidean$1}=require$$0,defaultOptions$4={constant:1};let MultiquadraticKernel$1=class{constructor(e){e=Object.assign({},defaultOptions$4,e),this.constant=e.constant}compute(e,t){return Math.sqrt(squaredEuclidean$1(e,t)+this.constant*this.constant)}};var multiquadraticKernel=MultiquadraticKernel$1;const{squaredEuclidean}=require$$0,defaultOptions$3={constant:1};class RationalQuadraticKernel{constructor(e){e=Object.assign({},defaultOptions$3,e),this.constant=e.constant}compute(e,t){const n=squaredEuclidean(e,t);return 1-n/(n+this.constant)}}var rationalQuadraticKernel=RationalQuadraticKernel;const{Matrix:Matrix$1,MatrixTransposeView}=require$$0$1,GaussianKernel=gaussianKernel,PolynomialKernel=polynomialKernel,SigmoidKernel=sigmoidKernel,ANOVAKernel=anovaKernel,CauchyKernel=cauchyKernel,ExponentialKernel=exponentialKernel,HistogramKernel=histogramIntersectionKernel,LaplacianKernel=laplacianKernel,MultiquadraticKernel=multiquadraticKernel,RationalKernel=rationalQuadraticKernel,kernelType={gaussian:GaussianKernel,rbf:GaussianKernel,polynomial:PolynomialKernel,poly:PolynomialKernel,anova:ANOVAKernel,cauchy:CauchyKernel,exponential:ExponentialKernel,histogram:HistogramKernel,min:HistogramKernel,laplacian:LaplacianKernel,multiquadratic:MultiquadraticKernel,rational:RationalKernel,sigmoid:SigmoidKernel,mlp:SigmoidKernel};class Kernel{constructor(e,t){if(this.kernelType=e,e!=="linear")if(typeof e=="string"){e=e.toLowerCase();var n=kernelType[e];if(n)this.kernelFunction=new n(t);else throw new Error(`unsupported kernel type: ${e}`)}else if(typeof e=="object"&&typeof e.compute=="function")this.kernelFunction=e;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(e,t){if(e=Matrix$1.checkMatrix(e),t===void 0?t=e:t=Matrix$1.checkMatrix(t),this.kernelType==="linear")return e.mmul(new MatrixTransposeView(t));const n=new Matrix$1(e.rows,t.rows);if(e===t)for(let a=0;a<e.rows;a++)for(let s=a;s<e.rows;s++){const c=this.kernelFunction.compute(e.getRow(a),e.getRow(s));n.set(a,s,c),n.set(s,a,c)}else for(let a=0;a<e.rows;a++)for(let s=0;s<t.rows;s++)n.set(a,s,this.kernelFunction.compute(e.getRow(a),t.getRow(s)));return n}}var kernel=Kernel;const Kernel$1=getDefaultExportFromCjs(kernel),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(e,t,n){if(super(),e===!0)this.alpha=t.alpha,this.inputs=t.inputs,this.kernelType=t.kernelType,this.kernelOptions=t.kernelOptions,this.kernel=new Kernel$1(t.kernelType,t.kernelOptions);else{e=Matrix$2.checkMatrix(e),n=Object.assign({},defaultOptions$2,n);const a=new Kernel$1(n.kernelType,n.kernelOptions),s=a.compute(e),c=e.rows;s.add(Matrix$2.eye(c,c).mul(n.lambda)),this.alpha=solve(s,t),this.inputs=e,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=a}}_predict(e){return this.kernel.compute([e],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(e){if(e.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,e)}}function background$1(r,e,t){const n=new KernelRidgeRegression(r,e,t),a=new Array(this.size);for(let f=0;f<this.width;f++)for(let b=0;b<this.height;b++)a[b*this.width+f]=[f,b];const s=n.predict(a),c=Image$1.createFrom(this);for(let f=0;f<this.size;f++)c.data[f]=Math.min(this.maxValue,Math.max(0,s[f][0]));return c}function dilate(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let n=!0;e:for(const s of e)for(const c of s)if(c!==1){n=!1;break e}let a=this;for(let s=0;s<t;s++)if(this.bitDepth===1)if(n){const c=a.clone();a=dilateOnceBinaryOnlyOnes(a,c,e.length,e[0].length)}else{const c=Image$1.createFrom(a);a=dilateOnceBinary(a,c,e)}else if(n){const c=Image$1.createFrom(a);a=dilateOnceGreyOnlyOnes(a,c,e.length,e[0].length)}else{const c=Image$1.createFrom(a);a=dilateOnceGrey(a,c,e)}return a}function dilateOnceGrey(r,e,t){const n=t.length,a=t[0].length;let s=(n-1)/2,c=(a-1)/2;for(let f=0;f<r.height;f++)for(let b=0;b<r.width;b++){let g=0;for(let m=0;m<a;m++)for(let l=0;l<n;l++){if(t[l][m]!==1)continue;let o=l-s+b,u=m-c+f;if(o<0||u<0||o>=r.width||u>=r.height)continue;const d=r.getValueXY(o,u,0);d>g&&(g=d)}e.setValueXY(b,f,0,g)}return e}function dilateOnceGreyOnlyOnes(r,e,t,n){const a=(t-1)/2,s=(n-1)/2,c=[];for(let f=0;f<r.width;f++)c.push(0);for(let f=0;f<r.height;f++){for(let b=0;b<r.width;b++){let g=0;for(let m=Math.max(0,f-s);m<Math.min(r.height,f+s+1);m++){const l=r.getValueXY(b,m,0);l>g&&(g=l)}c[b]=g}for(let b=0;b<r.width;b++){let g=0;for(let m=Math.max(0,b-a);m<Math.min(r.width,b+a+1);m++)c[m]>g&&(g=c[m]);e.setValueXY(b,f,0,g)}}return e}function dilateOnceBinary(r,e,t){const n=t.length,a=t[0].length;let s=(n-1)/2,c=(a-1)/2;for(let f=0;f<r.height;f++)for(let b=0;b<r.width;b++){let g=0;e:for(let m=0;m<a;m++)for(let l=0;l<n;l++){if(t[l][m]!==1)continue;let o=l-s+b,u=m-c+f;if(u<0||o<0||o>=r.width||u>=r.height)continue;if(r.getBitXY(o,u)===1){g=1;break e}}g===1&&e.setBitXY(b,f)}return e}function dilateOnceBinaryOnlyOnes(r,e,t,n){const a=(t-1)/2,s=(n-1)/2,c=[];for(let f=0;f<r.width;f++)c.push(1);for(let f=0;f<r.height;f++){for(let b=0;b<r.width;b++){c[b]=0;for(let g=Math.max(0,f-s);g<Math.min(r.height,f+s+1);g++)if(r.getBitXY(b,g)===1){c[b]=1;break}}for(let b=0;b<r.width;b++)if(e.getBitXY(b,f)!==1){for(let g=Math.max(0,b-a);g<Math.min(r.width,b+a+1);g++)if(c[g]===1){e.setBitXY(b,f);break}}}return e}function erode(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let n=!0;e:for(const s of e)for(const c of s)if(c!==1){n=!1;break e}let a=this;for(let s=0;s<t;s++)if(this.bitDepth===1)if(n){const c=a.clone();a=erodeOnceBinaryOnlyOnes(a,c,e.length,e[0].length)}else{const c=Image$1.createFrom(a);a=erodeOnceBinary(a,c,e)}else if(n){const c=Image$1.createFrom(a);a=erodeOnceGreyOnlyOnes(a,c,e.length,e[0].length)}else{const c=Image$1.createFrom(a);a=erodeOnceGrey(a,c,e)}return a}function erodeOnceGrey(r,e,t){const n=t.length,a=t[0].length;let s=(n-1)/2,c=(a-1)/2;for(let f=0;f<r.height;f++)for(let b=0;b<r.width;b++){let g=r.maxValue;for(let m=0;m<a;m++)for(let l=0;l<n;l++){if(t[l][m]!==1)continue;let o=l-s+b,u=m-c+f;if(o<0||u<0||o>=r.width||u>=r.height)continue;const d=r.getValueXY(o,u,0);d<g&&(g=d)}e.setValueXY(b,f,0,g)}return e}function erodeOnceGreyOnlyOnes(r,e,t,n){const a=(t-1)/2,s=(n-1)/2,c=[];for(let f=0;f<r.width;f++)c.push(0);for(let f=0;f<r.height;f++){for(let b=0;b<r.width;b++){let g=r.maxValue;for(let m=Math.max(0,f-s);m<Math.min(r.height,f+s+1);m++){const l=r.getValueXY(b,m,0);l<g&&(g=l)}c[b]=g}for(let b=0;b<r.width;b++){let g=r.maxValue;for(let m=Math.max(0,b-a);m<Math.min(r.width,b+a+1);m++)c[m]<g&&(g=c[m]);e.setValueXY(b,f,0,g)}}return e}function erodeOnceBinary(r,e,t){const n=t.length,a=t[0].length;let s=(n-1)/2,c=(a-1)/2;for(let f=0;f<r.height;f++)for(let b=0;b<r.width;b++){let g=1;e:for(let m=0;m<a;m++)for(let l=0;l<n;l++){if(t[l][m]!==1)continue;let o=l-s+b,u=m-c+f;if(u<0||o<0||o>=r.width||u>=r.height)continue;if(r.getBitXY(o,u)===0){g=0;break e}}g===1&&e.setBitXY(b,f)}return e}function erodeOnceBinaryOnlyOnes(r,e,t,n){const a=(t-1)/2,s=(n-1)/2,c=[];for(let f=0;f<r.width;f++)c.push(0);for(let f=0;f<r.height;f++){for(let b=0;b<r.width;b++){c[b]=1;for(let g=Math.max(0,f-s);g<Math.min(r.height,f+s+1);g++)if(r.getBitXY(b,g)===0){c[b]=0;break}}for(let b=0;b<r.width;b++)if(e.getBitXY(b,f)!==0){for(let g=Math.max(0,b-a);g<Math.min(r.width,b+a+1);g++)if(c[g]===0){e.clearBitXY(b,f);break}}}return e}function open(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let n=this;for(let a=0;a<t;a++)n=n.erode({kernel:e}),n=n.dilate({kernel:e});return n}function close(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let n=this;for(let a=0;a<t;a++)n=n.dilate({kernel:e}).erode({kernel:e});return n}function topHat(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),e.length%2===0||e[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let n=this;for(let a=0;a<t;a++)n=n.open({kernel:e}).subtractImage(n,{absolute:!0});return n}function blackHat(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let n=this;for(let a=0;a<t;a++)n=n.close({kernel:e}).subtractImage(n,{absolute:!0});return n}function morphologicalGradient(r={}){let{kernel:e=[[1,1,1],[1,1,1],[1,1,1]],iterations:t=1}=r;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),e.columns%2===0||e.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let n=this;for(let a=0;a<t;a++){let s=n.dilate({kernel:e}),c=n.erode({kernel:e});n=s.subtractImage(c,{absolute:!0})}return n}function order4Points(r){let e=0,t=0,n=0,a=0,s=r[0][0],c=0;for(let g=1;g<r.length;g++)r[g][0]<s&&(s=r[g][0],c=g);let f=r[(c+1)%r.length][0],b=(c+1)%r.length;for(let g=1;g<r.length;g++)r[g][0]<f&&g!==c&&(f=r[g][0],b=g);return r[b][1]<r[c][1]?(e=r[b],a=r[c],c!==(b+1)%4?(t=r[(b+1)%4],n=r[(b+2)%4]):(t=r[(b+2)%4],n=r[(b+3)%4])):(a=r[b],e=r[c],b!==(c+1)%4?(t=r[(c+1)%4],n=r[(c+2)%4]):(t=r[(c+2)%4],n=r[(c+3)%4])),[e,t,n,a]}function distance2Points(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2))}function crossVect(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function dotVect(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function computeWidthAndHeigth(r,e,t,n,a,s){let c=Math.max(distance2Points(r,e),distance2Points(n,t)),f=Math.max(distance2Points(r,n),distance2Points(e,t)),b=0,g=0,m=Math.ceil(a/2),l=Math.ceil(s/2),o=c/f,u=[r[0],r[1],1],d=[e[0],e[1],1],y=[n[0],n[1],1],w=[t[0],t[1],1],_=dotVect(crossVect(u,w),y)/dotVect(crossVect(d,w),y),T=dotVect(crossVect(u,w),d)/dotVect(crossVect(y,w),d),S=[_*d[0]-u[0],_*d[1]-u[1],_*d[2]-u[2]],E=[T*y[0]-u[0],T*y[1]-u[1],T*y[2]-u[2]],A=S[0],P=S[1],k=S[2],M=E[0],F=E[1],O=E[2],D=1/(k*O)*(A*M-(A*O+k*M)*m+k*O*m*m+(P*F-(P*O+k*F)*l+k*O*l*l));D>=0?D=Math.sqrt(D):D=Math.sqrt(-D);let R=new Matrix$2([[D,0,m],[0,D,l],[0,0,1]]),C=R.transpose(),U=inverse(C),N=inverse(R),V=Matrix$2.rowVector(S),j=Matrix$2.rowVector(E),K=Math.sqrt(dotVect(V.mmul(U).mmul(N).to1DArray(),S)/dotVect(j.mmul(U).mmul(N).to1DArray(),E));return K===0||o===0?(b=Math.ceil(c),g=Math.ceil(f)):K<o?(b=Math.ceil(c),g=Math.ceil(b/K)):(g=Math.ceil(f),b=Math.ceil(K*g)),[b,g]}function projectionPoint(r,e,t,n,a,s,c,f,b,g,m,l){let[o,u]=[(t*r+n*e+a)/(b*r+g*e+1),(s*r+c*e+f)/(b*r+g*e+1)];return m.getValueXY(Math.floor(o),Math.floor(u),l)}function warpingFourPoints(r,e={}){let{calculateRatio:t=!0}=e;if(r.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${r.length} elements`);let[n,a,s,c]=r,f=[n,a,s,c],[b,g,m,l]=order4Points(f),o,u;t?[o,u]=computeWidthAndHeigth(b,g,m,l,this.width,this.height):(o=Math.ceil(Math.max(distance2Points(b,g),distance2Points(l,m))),u=Math.ceil(Math.max(distance2Points(b,l),distance2Points(g,m))));let d=Image$1.createFrom(this,{width:o,height:u}),[y,w]=b,[_,T]=g,[S,E]=m,[A,P]=l,[k,M]=[0,0],[F,O]=[0,o-1],[D,R]=[u-1,o-1],[C,U]=[u-1,0],N=new Matrix$2([[k,M,1,0,0,0,-k*y,-M*y],[F,O,1,0,0,0,-F*_,-O*_],[D,R,1,0,0,0,-D*S,-M*S],[C,U,1,0,0,0,-C*A,-U*A],[0,0,0,k,M,1,-k*w,-M*w],[0,0,0,F,O,1,-F*T,-O*T],[0,0,0,D,R,1,-D*E,-R*E],[0,0,0,C,U,1,-C*P,-U*P]]),V=Matrix$2.columnVector([y,_,S,A,w,T,E,P]),K=new SingularValueDecomposition(N).solve(V),[ee,he,ge,Se,we,ne,re,oe]=K.to1DArray(),Ee=new Matrix$2(u,o);for(let Re=0;Re<this.channels;Re++){for(let De=0;De<u;De++)for(let He=0;He<o;He++)Ee.set(De,He,projectionPoint(De,He,ee,he,ge,Se,we,ne,re,oe,this,Re));d.setMatrix(Ee,{channel:Re})}return d}function crop(r={}){let{x:e=0,y:t=0,width:n=this.width-e,height:a=this.height-t}=r;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),e=Math.round(e),t=Math.round(t),n=Math.round(n),a=Math.round(a),e>this.width-1||t>this.height-1)throw new RangeError(`crop: origin (x:${e}, y:${t}) out of range (${this.width-1}; ${this.height-1})`);if(n<=0||a<=0)throw new RangeError(`crop: width and height (width:${n}; height:${a}) must be positive numbers`);if(e<0||t<0)throw new RangeError(`crop: x and y (x:${e}, y:${t}) must be positive numbers`);if(n>this.width-e||a>this.height-t)throw new RangeError(`crop: (x: ${e}, y:${t}, width:${n}, height:${a}) size is out of range`);let s=this;if(this.bitDepth===1){const c=new Image$1(n,a,{kind:"BINARY",parent:this});s=cropBinary(this,c,e,t,n,a)}else{const c=Image$1.createFrom(this,{width:n,height:a,position:[e,t]});s=cropDefault(this,c,e,t,n,a)}return s}function cropDefault(r,e,t,n,a,s){let c=a*r.channels,f=n+s,b=0,g=t*r.channels;for(let m=n;m<f;m++){let l=m*r.width*r.channels+g,o=l+c;for(;l<o;l++)e.data[b++]=r.data[l]}return e}function cropBinary(r,e,t,n,a,s){let c=a*r.channels,f=n+s,b=0,g=t*r.channels;for(let m=n;m<f;m++){let l=m*r.width*r.channels+g,o=l+c;for(;l<o;l++)r.getBit(l)&&e.setBit(b),++b}return e}function cropAlpha(r={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:e=this.maxValue}=r;let t=findLeft(this,e,this.components);if(t===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let n=findTop(this,e,this.components,t),a=findBottom(this,e,this.components,t),s=findRight(this,e,this.components,t,n,a);return this.crop({x:t,y:n,width:s-t+1,height:a-n+1})}function findLeft(r,e,t){for(let n=0;n<r.width;n++)for(let a=0;a<r.height;a++)if(r.getValueXY(n,a,t)>=e)return n;return-1}function findTop(r,e,t,n){for(let a=0;a<r.height;a++)for(let s=n;s<r.width;s++)if(r.getValueXY(s,a,t)>=e)return a;return-1}function findBottom(r,e,t,n){for(let a=r.height-1;a>=0;a--)for(let s=n;s<r.width;s++)if(r.getValueXY(s,a,t)>=e)return a;return-1}function findRight(r,e,t,n,a,s){for(let c=r.width-1;c>=n;c--)for(let f=a;f<=s;f++)if(r.getValueXY(c,f,t)>=e)return c;return-1}function getFactor(r){if(typeof r=="string"){const e=r[r.length-1];r=parseFloat(r),e==="%"&&(r/=100)}return r}function getThreshold$1(r,e){if(!e)throw Error("getThreshold : the maxValue should be specified");if(typeof r=="string"){if(r[r.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(r)/100*e}else{if(typeof r=="number")return r<1?r*e:r;throw Error("getThreshold : the value is not valid")}}function factorDimensions(r,e,t){r=getFactor(r);let n=Math.round(r*e),a=Math.round(r*t);return n<=0&&(n=1),a<=0&&(a=1),{width:n,height:a}}function checkRow(r,e){if(e<0||e>=r.height)throw new RangeError(`row must be included between 0 and ${r.height-1}. Current value: ${e}`)}function checkColumn(r,e){if(e<0||e>=r.width)throw new RangeError(`column must be included between 0 and ${r.width-1}. Current value: ${e}`)}function checkChannel(r,e){if(e<0||e>=r.channels)throw new RangeError(`channel must be included between 0 and ${r.channels-1}. Current value: ${e}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(r){if(typeof r!="string")throw new TypeError("interpolation must be a string");if(r=r.toLowerCase(),!validInterpolations[r])throw new RangeError(`invalid interpolation algorithm: ${r}`);return validInterpolations[r]}function nearestNeighbor(r,e,t){const n=this.width/e,a=this.height/t;if(this.bitDepth>1)for(let s=0;s<e;s++){const c=Math.floor((s+.5)*n);for(let f=0;f<t;f++){const b=Math.floor((f+.5)*a);for(let g=0;g<this.channels;g++)r.setValueXY(s,f,g,this.getValueXY(c,b,g))}}else for(let s=0;s<e;s++){const c=Math.floor((s+.5)*n);for(let f=0;f<t;f++){const b=Math.floor((f+.5)*a);this.getBitXY(c,b)&&r.setBitXY(s,f)}}}function resize(r={}){const{factor:e=1,interpolation:t=validInterpolations.nearestneighbor,preserveAspectRatio:n=!0}=r,a=checkInterpolation(t);let s=r.width,c=r.height;if(s||(c&&n?s=Math.round(c*(this.width/this.height)):s=this.width),c||(n?c=Math.round(s*(this.height/this.width)):c=this.height),{width:s,height:c}=factorDimensions(e,s,c),s===this.width&&c===this.height){const m=this.clone();return m.position=[0,0],m}let f=Math.round((this.width-s)/2),b=Math.round((this.height-c)/2);const g=Image$1.createFrom(this,{width:s,height:c,position:[f,b]});switch(a){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,g,s,c);break;default:throw new Error(`unsupported resize interpolation: ${a}`)}return g}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{colorModel:HSV}),e=0,t=this.data;for(let n=0;n<t.length;n+=this.channels){let a=t[n],s=t[n+1],c=t[n+2],f=Math.min(a,s,c),b=Math.max(a,s,c),g=b-f,m=0,l=b===0?0:g/b,o=b;if(b!==f){switch(b){case a:m=(s-c)/g+(s<c?6:0);break;case s:m=(c-a)/g+2;break;case c:m=(a-s)/g+4;break;default:throw new Error("unreachable")}m/=6}r.data[e++]=m*this.maxValue,r.data[e++]=l*this.maxValue,r.data[e++]=o,this.alpha&&(r.data[e++]=t[n+3])}return r}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{colorModel:HSL}),e=Math.floor(this.maxValue/2),t=0,n=this.data;for(let a=0;a<n.length;a+=this.channels){let s=n[a],c=n[a+1],f=n[a+2],b=Math.max(s,c,f),g=Math.min(s,c,f),m=0,l=0,o=(b+g)/2;if(b!==g){let u=b-g;switch(l=o>e?u/(2-b-g):u/(b+g),b){case s:m=(c-f)/u+(c<f?6:0);break;case c:m=(f-s)/u+2;break;case f:m=(s-c)/u+4;break;default:throw new Error("unreachable")}m/=6}r.data[t++]=m*this.maxValue,r.data[t++]=l*this.maxValue,r.data[t++]=o,this.alpha&&(r.data[t++]=n[a+3])}return r}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{components:4,colorModel:CMYK$1}),e=0,t=this.data;for(let n=0;n<t.length;n+=this.channels){let a=t[n],s=t[n+1],c=t[n+2],f=Math.min(this.maxValue-a,this.maxValue-s,this.maxValue-c),b=(this.maxValue-a-f)/(1-f/this.maxValue),g=(this.maxValue-s-f)/(1-f/this.maxValue),m=(this.maxValue-c-f)/(1-f/this.maxValue);r.data[e++]=Math.round(b),r.data[e++]=Math.round(g),r.data[e++]=Math.round(m),r.data[e++]=Math.round(f),this.alpha&&(r.data[e++]=t[n+3])}return r}function rgba8(){return new Image$1(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(r,e,t){return r*6966+e*23436+t*2366>>15},luma601(r,e,t){return r*9798+e*19235+t*3735>>15},maximum(r,e,t){return Math.max(r,e,t)},minimum(r,e,t){return Math.min(r,e,t)},average(r,e,t){return(r+e+t)/3>>0},minmax(r,e,t){return(Math.max(r,e,t)+Math.min(r,e,t))/2},red(r){return r},green(r,e){return e},blue(r,e,t){return t},cyan(r,e,t,n){let a=methods$1.black(r,e,t,n);return(n.maxValue-r-a)/(1-a/n.maxValue)>>0},magenta(r,e,t,n){let a=methods$1.black(r,e,t,n);return(n.maxValue-e-a)/(1-a/n.maxValue)>>0},yellow(r,e,t,n){let a=methods$1.black(r,e,t,n);return(n.maxValue-t-a)/(1-a/n.maxValue)>>0},black(r,e,t,n){return Math.min(n.maxValue-r,n.maxValue-e,n.maxValue-t)},hue(r,e,t,n){let a=methods$1.min(r,e,t),s=methods$1.max(r,e,t);if(s===a)return 0;let c=0,f=s-a;switch(s){case r:c=(e-t)/f+(e<t?6:0);break;case e:c=(t-r)/f+2;break;case t:c=(r-e)/f+4;break;default:throw new Error("unreachable")}return c/6*n.maxValue>>0},saturation(r,e,t,n){let a=methods$1.min(r,e,t),s=methods$1.max(r,e,t),c=s-a;return s===0?0:c/s*n.maxValue},lightness(r,e,t){let n=methods$1.min(r,e,t);return(methods$1.max(r,e,t)+n)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(r=>{});function grey(r={}){let{algorithm:e="luma709",keepAlpha:t=!1,mergeAlpha:n=!0}=r;if(typeof e!="string"&&typeof e!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(e="red"),t&=this.alpha,n&=this.alpha,t&&(n=!1);let a=getOutputImage(this,r,{components:1,alpha:t,colorModel:GREY$1}),s;if(typeof e=="function")s=e;else if(s=methods$1[e.toLowerCase()],!s)throw new Error(`unsupported grey algorithm: ${e}`);let c=0;for(let f=0;f<this.data.length;f+=this.channels)n?a.data[c++]=clamp(s(this.data[f],this.data[f+1],this.data[f+2],this)*this.data[f+this.components]/this.maxValue,this):(a.data[c++]=clamp(s(this.data[f],this.data[f+1],this.data[f+2],this),this),a.alpha&&(a.data[c++]=this.data[f+this.components]));return a}function huang(r){let e=0;for(let m=0;m<r.length;m++)if(r[m]!==0){e=m;break}let t=r.length-1;for(let m=r.length-1;m>=e;m--)if(r[m]!==0){t=m;break}let n=1/(t-e),a=new Array(r.length),s=0,c=0;for(let m=e;m<r.length;m++)s+=m*r[m],c+=r[m],a[m]=s/c;let f=new Array(r.length);s=c=0;for(let m=t;m>0;m--)s+=m*r[m],c+=r[m],f[m-1]=s/c;let b=-1,g=Number.MAX_VALUE;for(let m=0;m<r.length;m++){let l=0,o;for(let u=0;u<=m;u++)o=1/(1+n*Math.abs(u-a[m])),o<1e-6||o>.999999||(l+=r[u]*(-o*Math.log(o)-(1-o)*Math.log(1-o)));for(let u=m+1;u<r.length;u++)o=1/(1+n*Math.abs(u-f[m])),o<1e-6||o>.999999||(l+=r[u]*(-o*Math.log(o)-(1-o)*Math.log(1-o)));l<g&&(g=l,b=m)}return b}function intermodes(r){let e=r.slice(),t=0;for(;!bimodalTest$1(e);){let a=0,s=0,c=e[0];for(let f=0;f<r.length-1;f++)a=s,s=c,c=e[f+1],e[f]=(a+s+c)/3;if(e[r.length-1]=(s+c)/3,t++,t>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let n=0;for(let a=1;a<r.length-1;a++)e[a-1]<e[a]&&e[a+1]<e[a]&&(n+=a);return Math.floor(n/2)}function bimodalTest$1(r){let e=!1,t=0;for(let n=1;n<r.length-1;n++)if(r[n-1]<r[n]&&r[n+1]<r[n]&&(t++,t>2))return!1;return t===2&&(e=!0),e}function isodata(r){let e,t,n,a,s=0;for(let c=1;c<r.length;c++)if(r[c]>0){s=c+1;break}for(;;){e=0,n=0;for(let c=0;c<s;c++)n=n+r[c],e=e+r[c]*c;a=0,t=0;for(let c=s+1;c<r.length;c++)t+=r[c],a+=r[c]*c;if(n>0&&t>0&&(e/=n,a/=t,s===Math.round((e+a)/2)))break;if(s++,s>r.length-2)throw new Error("Threshold not found")}return s}function li(r,e){let t,n,a,s,c,f,b,g,m,l,o,u;o=.5,l=0;for(let d=0;d<r.length;d++)l+=d*r[d];l/=e,b=l;do{f=b,t=f+.5|0,n=0,s=0;for(let d=0;d<=t;d++)n+=d*r[d],s+=r[d];g=s===0?0:n/s,a=0,c=0;for(let d=t+1;d<r.length;d++)a+=d*r[d],c+=r[d];m=c===0?0:a/c,u=(g-m)/(Math.log(g)-Math.log(m)),u<-Number.EPSILON?b=u-.5|0:b=u+.5|0}while(Math.abs(b-f)>o);return t}function maxEntropy(r,e){let t=new Array(r.length);for(let o=0;o<r.length;o++)t[o]=r[o]/e;let n=new Array(r.length),a=new Array(r.length);n[0]=t[0],a[0]=1-n[0];for(let o=1;o<r.length;o++)n[o]=n[o-1]+t[o],a[o]=1-n[o];let s=0;for(let o=0;o<r.length;o++)if(Math.abs(n[o])>=Number.EPSILON){s=o;break}let c=r.length-1;for(let o=r.length-1;o>=s;o--)if(Math.abs(a[o])>=Number.EPSILON){c=o;break}let f=-1,b,g=Number.MIN_VALUE,m,l;for(let o=s;o<=c;o++){m=0;for(let u=0;u<=o;u++)r[u]!==0&&(m-=t[u]/n[o]*Math.log(t[u]/n[o]));l=0;for(let u=o+1;u<r.length;u++)r[u]!==0&&(l-=t[u]/a[o]*Math.log(t[u]/a[o]));b=m+l,g<b&&(g=b,f=o)}return f}function mean$1(r,e){let t=0;for(let n=0;n<r.length;n++)t+=n*r[n];return Math.floor(t/e)}function minError(r,e){let t,n=-2,a,s,c,f,b,g,m,l,o,u,d,y=0;for(let w=0;w<r.length;w++)y+=w*r[w];for(y/=e,t=y;t!==n;){let w=sumA(r,t),_=sumA(r,r.length-1),T=sumB(r,t),S=sumB(r,r.length-1),E=sumC(r,t),A=sumC(r,r.length-1);if(a=T/w,s=(S-T)/(_-w),c=w/_,f=(_-w)/_,b=E/w-a*a,g=(A-E)/(_-w)-s*s,m=1/b-1/g,l=a/b-s/g,o=a*a/b-s*s/g+Math.log10(b*(f*f)/(g*(c*c))),u=l*l-m*o,u<0)return t;n=t,d=(l+Math.sqrt(u))/m,isNaN(d)?t=n:t=Math.floor(d)}return t}function sumA(r,e){let t=0;for(let n=0;n<=e;n++)t+=r[n];return t}function sumB(r,e){let t=0;for(let n=0;n<=e;n++)t+=n*r[n];return t}function sumC(r,e){let t=0;for(let n=0;n<=e;n++)t+=n*n*r[n];return t}function minimum(r){if(r.length<2)return 0;let e=0,t=-1,n=-1,a=new Array(r.length);for(let s=0;s<r.length;s++)a[s]=r[s],r[s]>0&&(n=s);for(;!bimodalTest(a);)if(a=smoothed(a),e++,e>1e4)return t;return t=minimumBetweenPeeks(a,n),t}function smoothed(r){let e=new Array(r.length);for(let t=1;t<r.length-1;t++)e[t]=(r[t-1]+r[t]+r[t+1])/3;return e[0]=(r[0]+r[1])/3,e[r.length-1]=(r[r.length-2]+r[r.length-1])/3,e}function minimumBetweenPeeks(r,e){let t;for(let n=1;n<e;n++)if(r[n-1]>r[n]&&r[n+1]>=r[n]){t=n;break}return t}function bimodalTest(r){let e=r.length,t=!1,n=0;for(let a=1;a<e-1;a++)if(r[a-1]<r[a]&&r[a+1]<r[a]&&(n++,n>2))return!1;return n===2&&(t=!0),t}function moments(r,e){let t=1,n=0,a=0,s=0,c=0,f,b,g,m,l,o,u=-1,d=r.length,y=new Array(d);for(let w=0;w<d;w++)y[w]=r[w]/e;for(let w=0;w<d;w++)n+=w*y[w],a+=w*w*y[w],s+=w*w*w*y[w];b=t*a-n*n,g=(-a*a+n*s)/b,m=(t*-s+a*n)/b,l=.5*(-m-Math.sqrt(m*m-4*g)),o=.5*(-m+Math.sqrt(m*m-4*g)),f=(o-n)/(o-l);for(let w=0;w<d;w++)if(c+=y[w],c>f){u=w;break}return u}function otsu(r,e){let t=0,n=0,a=0,s=0,c=0;for(let f=0;f<r.length;f++)c+=f*r[f];for(let f=0;f<r.length;f++){n=n+r[f];const b=e-n;if(n===0||b===0)continue;t=t+f*r[f];const g=(c-t)/b,m=n*b*(t/n-g)*(t/n-g);m>=a&&(s=f,a=m)}return s}function percentile(r){let e=-1,t=.5,n=new Array(r.length),a=partialSum(r,r.length-1),s=1;for(let c=0;c<r.length;c++)n[c]=Math.abs(partialSum(r,c)/a-t),n[c]<s&&(s=n[c],e=c);return e}function partialSum(r,e){let t=0;for(let n=0;n<=e;n++)t+=r[n];return t}function renyiEntropy(r,e){let t,n,a,s=new Array(r.length),c=new Array(r.length),f=new Array(r.length),b=0,g=0,m=0,l=0,o=0,u=0,y=1/(1-.5),_=1/(1-2);for(let A=0;A<r.length;A++)s[A]=r[A]/e;c[0]=s[0],f[0]=1-c[0];for(let A=1;A<r.length;A++)c[A]=c[A-1]+s[A],f[A]=1-c[A];n=0;for(let A=0;A<r.length;A++)if(Math.abs(c[A])>=Number.EPSILON){n=A;break}a=r.length-1;for(let A=r.length-1;A>=n;A--)if(Math.abs(f[A])>=Number.EPSILON){a=A;break}for(let A=n;A<=a;A++){let P=0,k=0,M=0;for(let N=0;N<=A;N++)r[N]!==0&&(P-=s[N]/c[A]*Math.log(s[N]/c[A])),k+=Math.sqrt(s[N]/c[A]),M+=s[N]*s[N]/(c[A]*c[A]);let F=0,O=0,D=0;for(let N=A+1;N<r.length;N++)r[N]!==0&&(F-=s[N]/f[A]*Math.log(s[N]/f[A])),O+=Math.sqrt(s[N]/f[A]),D+=s[N]*s[N]/(f[A]*f[A]);let R=P+F,C=y*(k*O>0?Math.log(k*O):0),U=_*(M*D>0?Math.log(M*D):0);R>l&&(l=R,b=A),C>o&&(o=C,g=A),U>u&&(u=U,m=A)}let T=[b,g,m];T.sort((A,P)=>A-P);let S;Math.abs(T[0]-T[1])<=5?Math.abs(T[1]-T[2])<=5?S=[1,2,1]:S=[0,1,3]:Math.abs(T[1]-T[2])<=5?S=[3,1,0]:S=[1,2,1];let E=c[T[2]]-c[T[0]];return t=Math.round(T[0]*(c[T[0]]+.25*E*S[0])+.25*T[1]*E*S[1]+T[2]*(f[T[2]]+.25*E*S[2])),t}function shanbhag(r,e){let t=new Array(r.length);for(let u=0;u<r.length;u++)t[u]=r[u]/e;let n=new Array(r.length),a=new Array(r.length);n[0]=t[0],a[0]=1-n[0];for(let u=1;u<r.length;u++)n[u]=n[u-1]+t[u],a[u]=1-n[u];let s=0;for(let u=0;u<r.length;u++)if(Math.abs(n[u])>=Number.EPSILON){s=u;break}let c=r.length-1;for(let u=r.length-1;u>=s;u--)if(Math.abs(a[u])>=Number.EPSILON){c=u;break}let f=-1,b=Number.MAX_VALUE,g,m,l,o;for(let u=s;u<=c;u++){l=0,g=.5/n[u];for(let d=1;d<=u;d++)l-=t[d]*Math.log(1-g*n[d-1]);l*=g,o=0,g=.5/a[u];for(let d=u+1;d<r.length;d++)o-=t[d]*Math.log(1-g*a[d]);o*=g,m=Math.abs(l-o),m<b&&(b=m,f=u)}return f}function triangle$1(r){let e=0,t=0,n=0,a=0;for(let l=0;l<r.length;l++)if(r[l]>0){e=l;break}e>0&&e--;for(let l=r.length-1;l>0;l--)if(r[l]>0){a=l;break}a<r.length-1&&a++;for(let l=0;l<r.length;l++)r[l]>t&&(n=l,t=r[l]);let s=!1;if(n-e<a-n){s=!0;let l=0,o=r.length-1;for(;l<o;){let u=r[l];r[l]=r[o],r[o]=u,l++,o--}e=r.length-1-a,n=r.length-1-n}if(e===n)return e;let c,f,b;c=r[n],f=e-n,b=Math.sqrt(c*c+f*f),c/=b,f/=b,b=c*e+f*r[e];let g=e,m=0;for(let l=e+1;l<=n;l++){let o=c*l+f*r[l]-b;o>m&&(g=l,m=o)}if(g--,s){let l=0,o=r.length-1;for(;l<o;){let u=r[l];r[l]=r[o],r[o]=u,l++,o--}return r.length-1-g}else return g}function yen(r,e){let t=new Array(r.length);for(let g=0;g<r.length;g++)t[g]=r[g]/e;let n=new Array(r.length);n[0]=t[0];for(let g=1;g<r.length;g++)n[g]=n[g-1]+t[g];let a=new Array(r.length);a[0]=t[0]*t[0];for(let g=1;g<r.length;g++)a[g]=a[g-1]+t[g]*t[g];let s=new Array(r.length);s[r.length-1]=0;for(let g=r.length-2;g>=0;g--)s[g]=s[g+1]+t[g+1]*t[g+1];let c=-1,f=Number.MIN_VALUE,b;for(let g=0;g<r.length;g++)b=-1*(a[g]*s[g]>0?Math.log(a[g]*s[g]):0)+2*(n[g]*(1-n[g])>0?Math.log(n[g]*(1-n[g])):0),b>f&&(f=b,c=g);return c}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(r=>{names[r]=r});function getThreshold(r={}){let{algorithm:e=names.otsu}=r;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let t=methods[e.toLowerCase()];if(t){let n=this.getHistogram();return t(n,this.size)}else throw new Error(`unknown thresholding algorithm: ${e}`)}const THRESHOLD="threshold";function mask(r={}){let{algorithm:e=THRESHOLD,threshold:t=.5,useAlpha:n=!0,invert:a=!1}=r;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),e===THRESHOLD?t=getThreshold$1(t,this.maxValue):t=getThreshold.call(this,r);let s=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),c=0;if(this.alpha&&n)for(let f=0;f<this.data.length;f+=this.channels){let b=this.data[f]+(this.maxValue-this.data[f])*(this.maxValue-this.data[f+1])/this.maxValue;(a&&b<=t||!a&&b>=t)&&s.setBit(c),c++}else for(let f=0;f<this.data.length;f+=this.channels)(a&&this.data[f]<=t||!a&&this.data[f]>=t)&&s.setBit(c),c++;return s}function copyImage(r,e,t,n){let a=r.width,s=r.height,c=e.width,f=r.channels;for(let b=0;b<a;b++)for(let g=0;g<s;g++)for(let m=0;m<f;m++){let l=(g*a+b)*f+m,o=((n+g)*c+t+b)*f+m;e.data[o]=r.data[l]}}function pad(r={}){let{size:e=0,algorithm:t="copy",color:n}=r;if(this.checkProcessable("pad",{bitDepth:[8,16]}),t==="set"){if(n.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let b=0;b<n.length;b++)n[b]===0&&(n[b]=.001)}else n=newArray$1(this.channels,null);Array.isArray(e)||(e=[e,e]);let a=this.width+e[0]*2,s=this.height+e[1]*2,c=this.channels,f=Image$1.createFrom(this,{width:a,height:s});copyImage(this,f,e[0],e[1]);for(let b=e[0];b<a-e[0];b++)for(let g=0;g<c;g++){let m=n[g]||f.data[(e[1]*a+b)*c+g];for(let l=0;l<e[1];l++)f.data[(l*a+b)*c+g]=m;m=n[g]||f.data[((s-e[1]-1)*a+b)*c+g];for(let l=s-e[1];l<s;l++)f.data[(l*a+b)*c+g]=m}for(let b=0;b<s;b++)for(let g=0;g<c;g++){let m=n[g]||f.data[(b*a+e[0])*c+g];for(let l=0;l<e[0];l++)f.data[(b*a+l)*c+g]=m;m=n[g]||f.data[(b*a+a-e[0]-1)*c+g];for(let l=a-e[0];l<a;l++)f.data[(b*a+l)*c+g]=m}return f}function colorDepth(r=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(r))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===r)return this.clone();let e=Image$1.createFrom(this,{bitDepth:r});switch(r){case 8:if(this.bitDepth===1)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=255);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]>>8;break;case 16:if(this.bitDepth===1)for(let t=0;t<this.size;t++)this.getBit(t)&&(e.data[t]=65535);else for(let t=0;t<this.data.length;t++)e.data[t]=this.data[t]<<8|this.data[t];break;default:throw new Error("colorDepth conversion unexpected case")}return e}function rotateFree(r,e={}){const{interpolation:t=validInterpolations.nearestneighbor,width:n=this.width,height:a=this.height}=e;if(typeof r!="number")throw new TypeError("degrees must be a number");const s=checkInterpolation(t),c=r*Math.PI/180,f=Math.floor(Math.abs(n*Math.cos(c))+Math.abs(a*Math.sin(c))),b=Math.floor(Math.abs(a*Math.cos(c))+Math.abs(n*Math.sin(c))),g=Math.cos(-c),m=Math.sin(-c);let l=f/2,o=b/2;f%2===0?(l=l-.5,b%2===0?o=o-.5:o=Math.floor(o)):(l=Math.floor(l),b%2===0?o=o-.5:o=Math.floor(o));const u=Math.floor(n/2-l),d=Math.floor(a/2-o);if(this.bitDepth===1){const y=new Image$1(f,b,{kind:"BINARY",parent:this});switch(s){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,y,u,d,l,o,g,m);case validInterpolations.bilinear:return rotateBinaryBilinear(this,y,u,d,l,o,g,m);default:throw new Error(`unsupported rotate interpolation: ${s}`)}}else{const y=Image$1.createFrom(this,{width:f,height:b});switch(s){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,y,u,d,l,o,g,m);case validInterpolations.bilinear:return rotateBilinear(this,y,u,d,l,o,g,m);default:throw new Error(`unsupported rotate interpolation: ${s}`)}}}function rotateNearestNeighbor(r,e,t,n,a,s,c,f){for(let b=0;b<e.width;b+=1)for(let g=0;g<e.height;g+=1)for(let m=0;m<r.channels;m++){let l=Math.round((b-a)*c-(g-s)*f+a)+t,o=Math.round((g-s)*c+(b-a)*f+s)+n;l<0||l>=r.width||o<0||o>=r.height?r.alpha===1&&m===r.channels-1?e.setValueXY(b,g,m,0):e.setValueXY(b,g,m,r.maxValue):e.setValueXY(b,g,m,r.getValueXY(l,o,m))}return e}function rotateBinaryNearestNeighbor(r,e,t,n,a,s,c,f){for(let b=0;b<e.width;b+=1)for(let g=0;g<e.height;g+=1){let m=Math.round((b-a)*c-(g-s)*f+a)+t,l=Math.round((g-s)*c+(b-a)*f+s)+n;(m<0||m>=r.width||l<0||l>=r.height||r.getBitXY(m,l))&&e.setBitXY(b,g)}return e}function rotateBilinear(r,e,t,n,a,s,c,f){let b=r.width*r.channels;for(let g=0;g<e.height;g++)for(let m=0;m<e.width;m++){let l=(m-a)*c-(g-s)*f+a+t,o=(g-s)*c+(m-a)*f+s+n,u=l|0,d=o|0,y=l-u,w=o-d;for(let _=0;_<r.channels;_++)if(l<0||l>=r.width||o<0||o>=r.height)r.alpha===1&&_===r.channels-1?e.setValueXY(m,g,_,0):e.setValueXY(m,g,_,r.maxValue);else{let T=(d*r.width+u)*r.channels+_,S=r.data[T],E=r.data[T+r.channels],A=r.data[T+b],P=r.data[T+b+r.channels],k=S+y*(E-S)+w*(A-S)+y*w*(S-E-A+P)|0;e.setValueXY(m,g,_,k)}}return e}function rotateBinaryBilinear(r,e,t,n,a,s,c,f){let b=r.width;for(let g=0;g<e.height;g++)for(let m=0;m<e.width;m++){let l=(m-a)*c-(g-s)*f+a+t,o=(g-s)*c+(m-a)*f+s+n,u=l|0,d=o|0,y=l-u,w=o-d;if(l<0||l>=r.width||o<0||o>=r.height)e.setBitXY(m,g);else{let _=d*r.width+u,T=r.getBit(_),S=r.getBit(_+1),E=r.getBit(_+b),A=r.getBit(_+1+b);(T|y&S-T|w&E-T|y&w&T-S-E+A)>0&&e.setBitXY(m,g)}}return e}function rotate$1(r,e){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof r!="number")throw new TypeError("angle must be a number");switch(r<0&&(r=Math.ceil(-r/360)*360+r),r%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,r,e)}}function rotateLeft(){if(this.bitDepth===1){const r=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),e=r.height-1;for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)this.getBitXY(n,t)&&r.setBitXY(t,e-n);return r}else{const r=Image$1.createFrom(this,{width:this.height,height:this.width}),e=r.height-1;for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)for(let a=0;a<this.channels;a++)r.setValueXY(t,e-n,a,this.getValueXY(n,t,a));return r}}function rotateRight(){if(this.bitDepth===1){const r=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),e=r.width-1;for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)this.getBitXY(n,t)&&r.setBitXY(e-t,n);return r}else{const r=Image$1.createFrom(this,{width:this.height,height:this.width}),e=r.width-1;for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)for(let a=0;a<this.channels;a++)r.setValueXY(e-t,n,a,this.getValueXY(n,t,a));return r}}function rotate180(){if(this.bitDepth===1){const r=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),e=r.width-1,t=r.height-1;for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++)this.getBitXY(a,n)&&r.setBitXY(e-a,t-n);return r}else{const r=Image$1.createFrom(this),e=r.width-1,t=r.height-1;for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++)for(let s=0;s<this.channels;s++)r.setValueXY(e-a,t-n,s,this.getValueXY(a,n,s));return r}}function insert(r,e={}){const t=getImageParameters(r);this.checkProcessable("insert",t);let{x:n=0,y:a=0}=e;const s=getOutputImageOrInPlace(this,e,{copy:!0}),c=Math.min(s.height,a+r.height),f=Math.min(s.width,n+r.width);if(s.bitDepth===1)for(let b=a;b<c;b++)for(let g=n;g<f;g++)r.getBitXY(g-n,b-a)?s.setBitXY(g,b):s.clearBitXY(g,b);else for(let b=a;b<c;b++)for(let g=n;g<f;g++)s.setPixelXY(g,b,r.getPixelXY(g-n,b-a));return s}function setBorder(r={}){let{size:e=0,algorithm:t="copy",color:n}=r;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),t==="set"){if(n.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let f=0;f<n.length;f++)n[f]===0&&(n[f]=.001)}else n=newArray$1(this.channels,null);Array.isArray(e)||(e=[e,e]);let a=e[0],s=e[1],c=this.channels;for(let f=a;f<this.width-a;f++)for(let b=0;b<c;b++){let g=n[b]||this.data[(f+this.width*s)*c+b];for(let m=0;m<s;m++)this.data[(m*this.width+f)*c+b]=g;g=n[b]||this.data[(f+this.width*(this.height-s-1))*c+b];for(let m=this.height-s;m<this.height;m++)this.data[(m*this.width+f)*c+b]=g}for(let f=0;f<this.height;f++)for(let b=0;b<c;b++){let g=n[b]||this.data[(f*this.width+a)*c+b];for(let m=0;m<a;m++)this.data[(f*this.width+m)*c+b]=g;g=n[b]||this.data[(f*this.width+this.width-a-1)*c+b];for(let m=this.width-a;m<this.width;m++)this.data[(f*this.width+m)*c+b]=g}return this}function split(r={}){let{preserveAlpha:e=!0}=r;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let t=new Stack,n=this.data;if(this.alpha&&e)for(let a=0;a<this.components;a++){let s=Image$1.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),c=0;for(let f=0;f<n.length;f+=this.channels)s.data[c++]=n[f+a],s.data[c++]=n[f+this.components];t.push(s)}else for(let a=0;a<this.channels;a++){let s=Image$1.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),c=0;for(let f=0;f<n.length;f+=this.channels)s.data[c++]=n[f+a];t.push(s)}return t}function getChannel(r,e={}){let{keepAlpha:t=!1,mergeAlpha:n=!1}=e;t&=this.alpha,n&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),r=validateChannel(this,r);let a=Image$1.createFrom(this,{components:1,alpha:t,colorModel:GREY$1}),s=0;for(let c=0;c<this.data.length;c+=this.channels)n?a.data[s++]=this.data[c+r]*this.data[c+this.components]/this.maxValue:(a.data[s++]=this.data[c+r],t&&(a.data[s++]=this.data[c+this.components]));return a}function combineChannels(r=defaultCombineMethod,e={}){let{mergeAlpha:t=!1,keepAlpha:n=!1}=e;t&=this.alpha,n&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let a=Image$1.createFrom(this,{components:1,alpha:n,colorModel:GREY$1}),s=0;for(let c=0;c<this.size;c++){let f=r(this.getPixel(c));t?a.data[s++]=f*this.data[c*this.channels+this.components]/this.maxValue:(a.data[s++]=f,n&&(a.data[s++]=this.data[c*this.channels+this.components]))}return a}function defaultCombineMethod(r){return(r[0]+r[1]+r[2])/3}function setChannel(r,e){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),e.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),e.width!==this.width||e.height!==this.height)throw new Error("Images must have exactly the same width and height");r=validateChannel(this,r);let t=r;for(let n=0;n<e.data.length;n++)this.data[t]=e.data[n],t+=this.channels;return this}function getSimilarity(r,e={}){let{shift:t=[0,0],average:n,channels:a,defaultAlpha:s,normalize:c,border:f=[0,0]}=e;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(f)||(f=[f,f]),a=validateArrayOfChannels(this,{channels:a,defaultAlpha:s}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");typeof n>"u"&&(n=!0);let b=Math.max(f[0],-t[0]),g=Math.min(this.width-f[0],this.width-t[0]),m=Math.max(f[1],-t[1]),l=Math.min(this.height-f[1],this.height-t[1]),o=newArray$1(a.length,0);for(let u=0;u<a.length;u++){let d=a[u],y=c?this.sum[d]:Math.max(this.sum[d],r.sum[d]),w=c?r.sum[d]:Math.max(this.sum[d],r.sum[d]);if(y!==0&&w!==0)for(let _=b;_<g;_++)for(let T=m;T<l;T++){let S=_*this.multiplierX+T*this.multiplierY+d,E=S+t[0]*this.multiplierX+t[1]*this.multiplierY;o[u]+=Math.min(this.data[S]/y,r.data[E]/w)}}return n?o.reduce((u,d)=>u+d)/o.length:o}function getPixelsGrid(r={}){let{sampling:e=[10,10],painted:t=!1,mask:n}=r;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(e)||(e=[e,e]);const a=e[0],s=e[1],c=[],f=[],b=this.width/a,g=this.height/s;let m=Math.floor(b/2);for(let o=0;o<a;o++){let u=Math.floor(g/2);for(let d=0;d<s;d++){let y=Math.round(m),w=Math.round(u);(!n||n.getBitXY(y,w))&&(c.push([y,w]),f.push(this.getPixelXY(y,w))),u+=g}m+=b}const l={xyS:c,zS:f};return t&&(l.painted=this.rgba8().paintPoints(c)),l}function Matrix(r,e,t){const n=new Array(r);for(let a=0;a<r;a++)n[a]=new Array(e);if(t)for(let a=0;a<r;a++)for(let s=0;s<e;s++)n[a][s]=t;return n.width=r,n.height=e,Object.setPrototypeOf(n,Matrix.prototype),n}Matrix.prototype.localMin=function(r,e){let t=this[r][e],n=[r,e];for(let a=Math.max(0,r-1);a<Math.min(this.length,r+2);a++)for(let s=Math.max(0,e-1);s<Math.min(this[0].length,e+2);s++)this[a][s]<t&&(t=this[a][s],n=[a,s]);return{position:n,value:t}};Matrix.prototype.localMax=function(r,e){let t=this[r][e],n=[r,e];for(let a=Math.max(0,r-1);a<Math.min(this.length,r+2);a++)for(let s=Math.max(0,e-1);s<Math.min(this[0].length,e+2);s++)this[a][s]>t&&(t=this[a][s],n=[a,s]);return{position:n,value:t}};Matrix.prototype.localSearch=function(r,e,t){let n=[];for(let a=Math.max(0,r-1);a<Math.min(this.length,r+2);a++)for(let s=Math.max(0,e-1);s<Math.min(this[0].length,e+2);s++)this[a][s]===t&&n.push([a,s]);return n};function getBestMatch(r,e={}){let{border:t}=e;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");let n=new Matrix(r.width,r.height,-1/0),a=Math.floor(r.width/2),s=Math.floor(r.height/2),c=a,f=s,b=!1;for(;!b;){let g=n.localSearch(a,s,-1/0);for(let l=0;l<g.length;l++){let o=g[l],u=this.getSimilarity(r,{border:t,shift:[c-o[0],f-o[1]]});n[o[0]][o[1]]=u}let m=n.localMax(a,s);m.position[0]!==a||m.position[1]!==s?(a=m.position[0],s=m.position[1]):b=!0}return[a-c,s-f]}function getRow(r,e=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,r),checkChannel(this,e);let t=new Array(this.width),n=0,a=r*this.width*this.channels+e,s=a+this.width*this.channels;for(let c=a;c<s;c+=this.channels)t[n++]=this.data[c];return t}function getColumn(r,e=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,r),checkChannel(this,e);let t=new Array(this.height),n=0,a=this.width*this.channels;for(let s=e+r*this.channels;s<this.data.length;s+=a)t[n++]=this.data[s];return t}function getMatrix(r={}){let{channel:e}=r;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),e===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}let t=new Matrix$2(this.height,this.width);for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++)t.set(n,a,this.getValueXY(a,n,e));return t}function setMatrix(r,e={}){r=new Matrix$2(r);let{channel:t}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),t===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}if(this.width!==r.columns||this.height!==r.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++)this.setValueXY(a,n,t,r.get(n,a));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let r=new Array(this.size),e=0;for(let t=0;t<this.data.length;t+=this.channels){let n=new Array(this.components);for(let a=0;a<this.components;a++)n[a]=this.data[t+a];r[e++]=n}return r}function getIntersection(r){let e=this,t=e.getClosestCommonParent(r),n=e.getRelativePosition(t,{defaultFurther:!0}),a=getRelativePositionForAllPixels(e,n),s=r.getRelativePosition(t,{defaultFurther:!0}),c=getRelativePositionForAllPixels(r,s),f=getCommonSurface(a,c),b={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let g=0;g<f.length;g++){let m=f[g],l=[m[0]-n[0],m[1]-n[1]],o=[m[0]-s[0],m[1]-s[1]],u=e.getBitXY(l[0],l[1]),d=r.getBitXY(o[0],o[1]);u===1&&d===1&&b.commonWhitePixels.push(m)}for(let g=0;g<a.length;g++){let m,l;g!==0&&(m=Math.floor(g/e.width),l=g%e.width),e.getBitXY(m,l)===1&&b.whitePixelsMask1.push(a[g])}for(let g=0;g<c.length;g++){let m=0,l=0;g!==0&&(m=Math.floor(g/r.width),l=g%r.width),r.getBitXY(m,l)===1&&b.whitePixelsMask2.push(c[g])}return b}function getRelativePositionForAllPixels(r,e){let t=[];for(let n=0;n<r.height;n++)for(let a=0;a<r.width;a++){let s=[n,a];t.push([s[0]+e[0],s[1]+e[1]])}return t}function getCommonSurface(r,e){let t=0,n=0,a=[];for(;t<r.length&&n<e.length;)r[t][0]===e[n][0]&&r[t][1]===e[n][1]?(a.push(r[t]),t++,n++):r[t][0]<e[n][0]||r[t][0]===e[n][0]&&r[t][1]<e[n][1]?t++:n++;return a}function getClosestCommonParent(r){let e=getDepth(this),t=getDepth(r),n;if(e>=t?n=getFurthestParent(this,e):n=getFurthestParent(r,t),e===0||t===0)return n;let a=this,s=r;for(;e!==t;)if(e>t){if(a=a.parent,a===null)return n;e=e-1}else{if(s=s.parent,s===null)return n;t=t-1}for(;a!==s&&a!==null&&s!==null;)if(a=a.parent,s=s.parent,a===null||s===null)return n;return a!==s?n:a}function getDepth(r){let e=0,t=r;for(;t.parent!=null;)t=t.parent,e++;return e}function getFurthestParent(r,e){let t=r;for(;e>0;)t=t.parent,e=e-1;return t}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(r,e){r.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),e=Object.assign({},defaultOptions$1,e);const t=r.width,n=r.height,a=r.maxValue,s={sigma:e.gaussianBlur,radius:3},c=r.gaussianFilter(s),f=c.convolution(Gy,convOptions),b=c.convolution(Gx,convOptions),g=b.hypotenuse(f),m=r.constructor,l=new m(t,n,{kind:"GREY",bitDepth:32}),o=new m(t,n,{kind:"GREY",bitDepth:32}),u=new m(t,n,{kind:"GREY"});for(var d=1;d<t-1;d++)for(var y=1;y<n-1;y++){var w=(Math.round(Math.atan2(b.getValueXY(d,y,0),f.getValueXY(d,y,0))*(5/Math.PI))+5)%5;w===0&&(g.getValueXY(d,y,0)<=g.getValueXY(d,y-1,0)||g.getValueXY(d,y,0)<=g.getValueXY(d,y+1,0))||w===1&&(g.getValueXY(d,y,0)<=g.getValueXY(d-1,y+1,0)||g.getValueXY(d,y,0)<=g.getValueXY(d+1,y-1,0))||w===2&&(g.getValueXY(d,y,0)<=g.getValueXY(d-1,y,0)||g.getValueXY(d,y,0)<=g.getValueXY(d+1,y,0))||w===3&&(g.getValueXY(d,y,0)<=g.getValueXY(d-1,y-1,0)||g.getValueXY(d,y,0)<=g.getValueXY(d+1,y+1,0))||l.setValueXY(d,y,0,g.getValueXY(d,y,0))}for(d=0;d<t*n;++d){var _=l.data[d],T=0;_>e.highThreshold&&(T++,u.data[d]=a),_>e.lowThreshold&&T++,o.data[d]=T}var S=[];for(d=1;d<t-1;++d)for(y=1;y<n-1;++y)if(o.getValueXY(d,y,0)===1){e:for(var E=d-1;E<d+2;++E)for(var A=y-1;A<y+2;++A)if(o.getValueXY(E,A,0)===2){S.push([d,y]),u.setValueXY(d,y,0,a);break e}}for(;S.length>0;){var P=[];for(d=0;d<S.length;++d)for(y=-1;y<2;++y)for(E=-1;E<2;++E)if(!(y===0&&E===0)){var k=S[d][0]+y,M=S[d][1]+E;o.getValueXY(k,M,0)===1&&u.getValueXY(k,M,0)===0&&(P.push([k,M]),u.setValueXY(k,M,0,a))}S=P}return u}function cannyEdge(r){return cannyEdgeDetector(this,r)}function extract(r,e={}){let{position:t}=e;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!t&&(t=r.getRelativePosition(this),!t))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let n=Image$1.createFrom(this,{width:r.width,height:r.height,alpha:1,position:t,parent:this});for(let a=0;a<r.width;a++)for(let s=0;s<r.height;s++){for(let c=0;c<this.channels;c++){let f=this.getValueXY(a+t[0],s+t[1],c);n.setValueXY(a,s,c,f)}r.getBitXY(a,s)||n.setValueXY(a,s,this.components,0)}return n}else{let n=Image$1.createFrom(this,{width:r.width,height:r.height,position:t,parent:this});for(let a=0;a<r.height;a++)for(let s=0;s<r.width;s++)r.getBitXY(s,a)&&this.getBitXY(s+t[0],a+t[1])&&n.setBitXY(s,a);return n}}var fastList={exports:{}};(function(r,e){(function(){function t(a,s,c){this.next=c,c&&(c.prev=this),this.prev=s,s&&(s.next=this),this.data=a}function n(){if(!(this instanceof n))return new n;this._head=null,this._tail=null,this.length=0}n.prototype={push:function(a){this._tail=new t(a,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var a=this._tail;return this._tail=a.prev,a.prev&&(a.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),a.data}},unshift:function(a){this._head=new t(a,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var a=this._head;return this._head=a.next,a.next&&(a.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),a.data}},item:function(a){a<0&&(a=this.length+a);for(var s=this._head;a-- >0&&s;)s=s.next;return s?s.data:void 0},slice:function(a,s){if(a||(a=0),s||(s=this.length),s<0&&(s=this.length+s),a<0&&(a=this.length+a),s===a)return[];if(s<a)throw new Error("invalid offset: "+a+","+s+" (length="+this.length+")");for(var c=s-a,f=new Array(c),b=0,g=this._head;a-- >0&&g;)g=g.next;for(;b<c&&g;)f[b++]=g.data,g=g.next;return f},drop:function(){n.call(this)},forEach:function(a,s){for(var c=this._head,f=0,b=this.length;f<b&&c;)a.call(s||this,c.data,f,this),c=c.next,f++},map:function(a,s){var c=new n;return this.forEach(function(f,b,g){c.push(a.call(s||g,f,b,g))}),c},filter:function(a,s){var c=new n;return this.forEach(function(f,b,g){a.call(s||g,f,b,g)&&c.push(f)}),c},reduce:function(a,s,c){var f=0,b=this._head,g=this.length;for(s||(f=1,s=b&&b.data,b=b&&b.next);f<g&&b;)s=a.call(c||this,s,b.data,this),f++,b=b.next;return s}},r.exports=n})()})(fastList);var fastListExports=fastList.exports;const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(r={}){const{x:e=0,y:t=0,inPlace:n=!0}=r,a=n?this:Image$1.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(e,t))return a;const c=new LinkedList;for(c.push(new Node(e,t));c.length>0;){const f=c.shift();a.setBitXY(f.x,f.y);for(let b=f.x+1;b<this.width&&(!a.getBitXY(b,f.y)&&!this.getBitXY(b,f.y));b++)a.setBitXY(b,f.y),f.y+1<this.height&&!this.getBitXY(b,f.y+1)&&c.push(new Node(b,f.y+1)),f.y-1>=0&&!this.getBitXY(b,f.y-1)&&c.push(new Node(b,f.y-1));for(let b=f.x-1;b>=0&&(!a.getBitXY(b,f.y)&&!this.getBitXY(b,f.y));b++)a.setBitXY(b,f.y),f.y+1<this.height&&!this.getBitXY(b,f.y+1)&&c.push(new Node(b,f.y+1)),f.y-1>=0&&!this.getBitXY(b,f.y-1)&&c.push(new Node(b,f.y-1))}return a}function Node(r,e){this.x=r,this.y=e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_extends.apply(this,arguments)}function hsv2rgb(r,e,t){e=e/100,t=t/100;var n=[],a=t*e,s=r/60,c=a*(1-Math.abs(s%2-1)),f=t-a;return s>=0&&s<1?n=[a,c,0]:s>=1&&s<2?n=[c,a,0]:s>=2&&s<3?n=[0,a,c]:r>=3&&s<4?n=[0,c,a]:r>=4&&s<5?n=[c,0,a]:r>=5&&s<=6?n=[a,0,c]:n=[0,0,0],{r:Math.round(255*(n[0]+f)),g:Math.round(255*(n[1]+f)),b:Math.round(255*(n[2]+f))}}function hsl2hsv(r,e,t){return e*=(t<50?t:100-t)/100,{h:r,s:2*e/(t+e)*100,v:t+e}}function hsl2rgb$1(r,e,t){var n=hsl2hsv(r,e,t);return hsv2rgb(n.h,n.s,n.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(r){return named(r)||hex3(r)||hex6(r)||rgb(r)||rgba$1(r)||hsl(r)||hsla(r)}function named(r){var e=colors[r.toLowerCase()];if(e)return{r:e[0],g:e[1],b:e[2],a:100}}function rgb(r){var e=r.match(/rgb\(([^)]+)\)/);if(e){var t=e[1].split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:100}}}function rgba$1(r){var e=r.match(/rgba\(([^)]+)\)/);if(e){var t=e[1].split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:t[3]*100}}}function hex6(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:100}}function hex3(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:100}}function hsl(r){var e=r.match(/hsl\(([^)]+)\)/);if(e){var t=e[1].split(/ *, */),n=parseInt(t[0],10),a=parseInt(t[1],10),s=parseInt(t[2],10),c=hsl2rgb$1(n,a,s);return _extends({},c,{a:100})}}function hsla(r){var e=r.match(/hsla\(([^)]+)\)/);if(e){var t=e[1].split(/ *, */),n=parseInt(t[0],10),a=parseInt(t[1],10),s=parseInt(t[2],10),c=parseInt(parseFloat(t[3])*100,10),f=hsl2rgb$1(n,a,s);return _extends({},f,{a:c})}}function css2array(r){let e=parse(r);return[e.r,e.g,e.b,Math.round(e.a*255/100)]}function hue2rgb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function hsl2rgb(r,e,t){let n,a,s,c,f,b;return e/=100,t/=100,e===0?c=f=b=t*255:(t<=.5?a=t*(e+1):a=t+e-t*e,n=t*2-a,s=r/360,c=hue2rgb(n,a,s+1/3),f=hue2rgb(n,a,s),b=hue2rgb(n,a,s-1/3)),{r:c,g:f,b}}function getDistinctColors(r){let e=new Array(r),t=0;for(let n=0;n<360;n+=360/r){t++;let a=hsl2rgb(n,100,30+t%4*15);e[t-1]=[Math.round(a.r*255),Math.round(a.g*255),Math.round(a.b*255)]}return e}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(r){let{color:e,colors:t,randomColors:n,numberColors:a=50}=r;if(e&&!Array.isArray(e)&&(e=css2array(e)),e)return[e];if(t)return t=t.map(function(s){return Array.isArray(s)?s:css2array(s)}),t;if(n){t=new Array(a);for(let s=0;s<a;s++)t[s]=getRandomColor()}return getDistinctColors(a)}function paintLabels(r,e,t={}){let{color:n="blue",colors:a,font:s="12px Helvetica",rotate:c=0}=t;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(r))throw Error("paintLabels: labels must be an array");if(!Array.isArray(e))throw Error("paintLabels: positions must be an array");if(n&&!Array.isArray(n)&&(n=css2array(n)),a?a=a.map(function(g){return Array.isArray(g)?g:css2array(g)}):a=[n],r.length!==e.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(s)||(s=[s]),Array.isArray(c)||(c=[c]);let b=this.getCanvas().getContext("2d");for(let g=0;g<r.length;g++){b.save();let m=a[g%a.length];b.fillStyle=`rgba(${m[0]},${m[1]},${m[2]},${m[3]/this.maxValue})`,b.font=s[g%s.length];let l=e[g];b.translate(l[0],l[1]),b.rotate(c[g%c.length]/180*Math.PI),b.fillText(r[g],0,0),b.restore()}return this.data=Uint8Array.from(b.getImageData(0,0,this.width,this.height).data),this}function paintMasks(r,e={}){let{alpha:t=255,labels:n=[],labelsPosition:a=[],labelColor:s="blue",labelFont:c="12px Helvetica"}=e;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let f=getColors(Object.assign({},e,{numberColors:r.length}));Array.isArray(r)||(r=[r]);for(let b=0;b<r.length;b++){let g=r[b],m=f[b%f.length];for(let l=0;l<g.width;l++)for(let o=0;o<g.height;o++)if(g.getBitXY(l,o))for(let u=0;u<Math.min(this.components,m.length);u++)if(t===255)this.setValueXY(l+g.position[0],o+g.position[1],u,m[u]);else{let d=this.getValueXY(l+g.position[0],o+g.position[1],u);d=Math.round((d*(255-t)+m[u]*t)/255),this.setValueXY(l+g.position[0],o+g.position[1],u,d)}}if(Array.isArray(n)&&n.length>0){let g=this.getCanvas().getContext("2d");g.fillStyle=s,g.font=c;for(let m=0;m<Math.min(r.length,n.length);m++){let l=a[m]?a[m]:r[m].position;g.fillText(n[m],l[0],l[1])}this.data=Uint8Array.from(g.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(r,e){let t=new Array(r);for(let n=0;n<r;n++)t[n]=new Array(e).fill(0);return t}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(e={}){let{kind:t="cross",shape:n,size:a,width:s,height:c,filled:f=!0}=e;if(a&&(s=a,c=a),n)switch(n.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(s,c,{filled:f});break;case"circle":case"ellipse":this.matrix=ellipse(s,c,{filled:f});break;case"triangle":this.matrix=triangle(s,c,{filled:f});break;default:throw new Error(`Shape: unexpected shape: ${n}`)}else if(t)switch(t.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${t}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let e=this.matrix,t=[];for(let n=0;n<e.length;n++)for(let a=0;a<e[0].length;a++)e[n][a]&&t.push([a-this.halfWidth,n-this.halfHeight]);return t}getMask(){let e=new Image$1(this.width,this.height,{kind:BINARY});for(let t=0;t<this.matrix.length;t++)for(let n=0;n<this.matrix[0].length;n++)this.matrix[t][n]&&e.setBitXY(n,t);return e}}function rectangle(r,e,t){const n=zerosMatrix(e,r);if(t.filled)for(let a=0;a<e;a++)for(let s=0;s<r;s++)n[a][s]=1;else{for(let a of[0,e-1])for(let s=0;s<r;s++)n[a][s]=1;for(let a=0;a<e;a++)for(let s of[0,r-1])n[a][s]=1}return n}function ellipse(r,e,t){const n=zerosMatrix(e,r);let a=1-e%2,s=1-r%2,c=Math.floor((r-1)/2),f=Math.floor((e-1)/2),b=c*c,g=f*f;if(t.filled)for(let m=0;m<=f;m++){let l=Math.floor(Math.sqrt(b-b*m*m/g));for(let o=c-l;o<=c;o++)n[f-m][o]=1,n[f+m+a][o]=1,n[f-m][r-o-1]=1,n[f+m+a][r-o-1]=1}else{for(let m=0;m<=f;m++){let l=Math.floor(Math.sqrt(b-b*m*m/g)),o=c-l;n[f-m][o]=1,n[f+m+a][o]=1,n[f-m][r-o-1]=1,n[f+m+a][r-o-1]=1}for(let m=0;m<=c;m++){let l=Math.floor(Math.sqrt(g-g*m*m/b)),o=f-l;n[o][c-m]=1,n[o][c+m+s]=1,n[e-o-1][c-m]=1,n[e-o-1][c+m+s]=1}}return n}function triangle(r,e,t){if(!t.filled)throw new Error("Non filled triangle is not implemented");const n=zerosMatrix(e,r);for(let a=0;a<e;a++){let s=Math.floor((1-a/e)*r/2);for(let c=s;c<r-s;c++)n[a][c]=1}return n}function paintPoints(r,e={}){let{shape:t}=e;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let n=getColors(Object.assign({},e,{numberColors:r.length})),a=new Shape(t).getPoints(),s=Math.min(this.channels,n[0].length);for(let c=0;c<r.length;c++){let f=n[c%n.length],b=r[c][0],g=r[c][1];for(let m=0;m<a.length;m++){let l=a[m][0],o=a[m][1];if(b+l>=0&&g+o>=0&&b+l<this.width&&g+o<this.height){let u=(b+l+(g+o)*this.width)*this.channels;for(let d=0;d<s;d++)this.data[u+d]=f[d]}}}return this}function paintPolyline(r,e={}){let{color:t=[this.maxValue,0,0],closed:n=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let a=Math.min(this.channels,t.length);for(let s=0;s<r.length-1+n;s++){let c=r[s],f=r[(s+1)%r.length],b=f[0]-c[0],g=f[1]-c[1],m=Math.max(Math.abs(b),Math.abs(g)),l=b/m,o=g/m,u=c[0],d=c[1];for(let y=0;y<=m;y++){let w=Math.round(u),_=Math.round(d);if(w>=0&&_>=0&&w<this.width&&_<this.height)if(this.bitDepth===1)this.setBitXY(w,_);else{let T=(w+_*this.width)*this.channels;for(let S=0;S<a;S++)this.data[T+S]=t[S]}u=u+l,d=d+o}}return this}function paintPolylines(r,e={}){let t=Object.assign({},e);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let n=getColors(Object.assign({},e,{numberColors:r.length}));for(let a=0;a<r.length;a++)t.color=n[a%n.length],this.paintPolyline(r[a],t);return this}function paintPolygon(r,e={}){let{color:t=[this.maxValue,0,0],filled:n=!1}=e;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),e.closed=!0;let a=deleteDouble(r);if(n===!1)return this.paintPolyline(r,e);{let s=Array(this.height);for(let c=0;c<this.height;c++){s[c]=[];for(let f=0;f<this.width;f++)s[c].push(0)}for(let c=0;c<a.length;c++){const f=lineBetweenTwoPoints(a[c],a[(c+1)%a.length]);for(let b=0;b<this.height;b++)for(let g=0;g<this.width;g++)isAtTheRightOfTheLine(g,b,f,this.height)&&(s[b][g]=s[b][g]===0?1:0)}for(let c=0;c<this.height;c++)for(let f=0;f<this.width;f++)if(s[c][f]===1)if(this.bitDepth===1)this.setBitXY(f,c);else{let b=Math.min(this.channels,t.length),g=(f+c*this.width)*this.channels;for(let m=0;m<b;m++)this.data[g+m]=t[m]}return this.paintPolyline(r,e)}}function deleteDouble(r){let e=[];for(let t=0;t<r.length;t++)if(!(r[t][0]===r[(t+1)%r.length][0]&&r[t][1]===r[(t+1)%r.length][1])){if(r[t][0]===r[(t-1+r.length)%r.length][0]&&r[t][1]===r[(t-1+r.length)%r.length][1])continue;if(r[(t+1)%r.length][0]===r[(t-1+r.length)%r.length][0]&&r[(t-1+r.length)%r.length][1]===r[(t+1)%r.length][1])continue;e.push(r[t])}return e}function lineBetweenTwoPoints(r,e){if(r[0]===e[0])return{a:0,b:r[0],vertical:!0};{const t=(e[1]-r[1])/(e[0]-r[0]),n=r[1]-t*r[0];return{a:t,b:n,vertical:!1}}}function isAtTheRightOfTheLine(r,e,t,n){if(t.vertical===!0)return t.b<=r;if(t.a===0)return!1;{const a=(e-t.b)/t.a;return a<r&&a>=0&&a<=n}}function paintPolygons(r,e={}){let t=Object.assign({},e);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let n=getColors(Object.assign({},e,{numberColors:r.length}));for(let a=0;a<r.length;a++)t.color=n[a%n.length],this.paintPolygon(r[a],t);return this}function getHistogram(r={}){let{maxSlots:e=256,channel:t,useAlpha:n=!0}=r;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),t===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}return getChannelHistogram.call(this,t,{useAlpha:n,maxSlots:e})}function getHistograms(r={}){const{maxSlots:e=256,useAlpha:t=!0}=r;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let n=new Array(t?this.components:this.channels);for(let a=0;a<n.length;a++)n[a]=getChannelHistogram.call(this,a,{useAlpha:t,maxSlots:e});return n}function getChannelHistogram(r,e){let{useAlpha:t,maxSlots:n}=e;if(this.bitDepth===1){let b=[0,0];for(let g=0;g<this.height;g++)for(let m=0;m<this.width;m++){let l=this.getBitXY(g,m);l===0?b[0]+=1:l===1&&(b[1]+=1)}return b}let a=Math.log2(n);if(!isInteger$1(a))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let s=0;this.bitDepth>a&&(s=this.bitDepth-a);let c=this.data,f=newArray$1(Math.pow(2,Math.min(this.bitDepth,a)),0);if(t&&this.alpha){let b=this.channels-r-1;for(let g=r;g<c.length;g+=this.channels)f[c[g]>>s]+=c[g+b]/this.maxValue}else for(let b=r;b<c.length;b+=this.channels)f[c[b]>>s]++;return f}function getColorHistogram(r={}){let{useAlpha:e=!0,nbSlots:t=512}=r;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let n=Math.log(t)/Math.log(8);if(n!==Math.floor(n))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let a=this.bitDepth-n,s=this.data,c=newArray$1(Math.pow(8,n),0),f=Math.pow(2,n*2),b=Math.pow(2,n);for(let g=0;g<s.length;g+=this.channels){let m=(s[g]>>a)*f+(s[g+1]>>a)*b+(s[g+2]>>a);e&&this.alpha?c[m]+=s[g+this.channels-1]/this.maxValue:c[m]++}return c}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let r=newArray$1(this.channels,1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let t=0;t<this.channels;t++)this.data[e+t]<r[t]&&(r[t]=this.data[e+t]);return r}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let r=newArray$1(this.channels,-1/0);for(let e=0;e<this.data.length;e+=this.channels)for(let t=0;t<this.channels;t++)this.data[e+t]>r[t]&&(r[t]=this.data[e+t]);return r}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let r=newArray$1(this.channels,0);for(let e=0;e<this.data.length;e+=this.channels)for(let t=0;t<this.channels;t++)r[t]+=this.data[e+t];return r}function getMoment(r=0,e=0){this.checkProcessable("getMoment",{bitDepth:[1]});let t=0;for(let n=0;n<this.width;n++)for(let a=0;a<this.height;a++)this.getBitXY(n,a)===1&&(t+=n**r*a**e);return t}function localMaxima(r={}){let{mask:e,region:t=3,removeClosePoints:n=0,invert:a=!1,maxEquals:s=2}=r,c=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),t*=4;let f=a?0:1,b=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],g=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],m=t<=8?1:2,l=[];for(let o=m;o<c.height-m;o++)for(let u=m;u<c.width-m;u++){if(e&&e.getBitXY(u,o)!==f)continue;let d=0,y=0,w=c.data[u+o*c.width];for(let _=0;_<t;_++)a?c.data[u+b[_]+(o+g[_])*c.width]>w&&d++:c.data[u+b[_]+(o+g[_])*c.width]<w&&d++,c.data[u+b[_]+(o+g[_])*c.width]===w&&y++;d+y===t&&y<=s&&l.push([u,o])}if(n>0)for(let o=0;o<l.length;o++)for(let u=o+1;u<l.length;u++)Math.sqrt(Math.pow(l[o][0]-l[u][0],2)+Math.pow(l[o][1]-l[u][1],2))<n&&(l[o][0]=l[o][0]+l[u][0]>>1,l[o][1]=l[o][1]+l[u][1]>>1,l.splice(u,1),u--);return l}function mean(){let r=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(r.length);for(let t=0;t<r.length;t++){let n=r[t];e[t]=mean$2(n)}return e}function median(){let r=this.getHistograms({maxSlots:this.maxValue+1}),e=new Array(r.length);for(let t=0;t<r.length;t++){let n=r[t];e[t]=median$2(n)}return e}function points(){this.checkProcessable("points",{bitDepth:[1]});const r=[];for(let e=0;e<this.width;e++)for(let t=0;t<this.height;t++)this.getBitXY(e,t)===1&&r.push([e,t]);return r}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const r=[];for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)if(this.getBitXY(t,e)===1)for(r.push([t,e]),this.getBitXY(t+1,e)!==1?(r.push([t+1,e]),r.push([t+1,e+1]),this.getBitXY(t,e+1)!==1&&r.push([t,e+1])):this.getBitXY(t,e+1)!==1&&(r.push([t,e+1]),r.push([t+1,e+1]));t<this.width-2&&this.getBitXY(t+1,e)===1&&this.getBitXY(t+2,e)===1;)t++;return r}function getRelativePosition(r,e={}){if(this===r)return[0,0];let t=[0,0],n=this;for(;n;){if(n===r)return t;n.position&&(t[0]+=n.position[0],t[1]+=n.position[1]),n=n.parent}return e.defaultFurther?t:!1}function countAlphaPixels(r={}){let{alpha:e=1}=r;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let t=0;if(e!==void 0){for(let n=this.components;n<this.data.length;n+=this.channels)this.data[n]===e&&t++;return t}else return this.size}function monotoneChainConvexHull$1(r,e={}){const{sorted:t}=e;t||(r=r.slice().sort(byXThenY));const n=r.length,a=new Array(n*2);let s=0;for(let f=0;f<n;f++){const b=r[f];for(;s>=2&&cw(a[s-2],a[s-1],b)<=0;)s--;a[s++]=b}const c=s+1;for(let f=n-2;f>=0;f--){const b=r[f];for(;s>=c&&cw(a[s-2],a[s-1],b)<=0;)s--;a[s++]=b}return a.slice(0,s-1)}function cw(r,e,t){return(e[1]-r[1])*(t[0]-r[0])-(e[0]-r[0])*(t[1]-r[1])}function byXThenY(r,e){return r[0]===e[0]?r[1]-e[1]:r[0]-e[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(r){for(let e=0;e<r.length;e++)r[e][0]=Math.round(r[e][0]),r[e][1]=Math.round(r[e][1]);return r}function difference(r,e){return[r[0]-e[0],r[1]-e[1]]}function normalize(r){let e=Math.sqrt(r[0]**2+r[1]**2);return[r[0]/e,r[1]/e]}function rotate(r,e,t){t===void 0&&(t=new Array(e.length));let n=Math.cos(r),a=Math.sin(r);for(let s=0;s<t.length;++s)t[s]=[n*e[s][0]-a*e[s][1],a*e[s][0]+n*e[s][1]];return t}function perimeter(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t][0],a=r[t][1],s=r[t===r.length-1?0:t+1][0],c=r[t===r.length-1?0:t+1][1];e+=Math.sqrt((s-n)**2+(c-a)**2)}return e}function surface(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t][0],a=r[t===r.length-1?0:t+1][1],s=r[t===r.length-1?0:t+1][0],c=r[t][1];e+=n*a*.5,e-=s*c*.5}return Math.abs(e)}function minMax(r){let e=1/0,t=1/0,n=-1/0,a=-1/0;for(let s=0;s<r.length;s++)r[s][0]<e&&(e=r[s][0]),r[s][0]>n&&(n=r[s][0]),r[s][1]<t&&(t=r[s][1]),r[s][1]>a&&(a=r[s][1]);return[[e,t],[n,a]]}function moveToZeroZero(r,e){e===void 0&&(e=new Array(r.length).fill(0).map(()=>[]));let t=minMax(r),n=t[0][0],a=t[0][1];for(let s=0;s<r.length;s++)e[s][0]=r[s][0]-n,e[s][1]=r[s][1]-a;return e}function minimalBoundingRectangle(r={}){const{originalPoints:e=monotoneChainConvexHull.call(this)}=r;if(e.length===0)return[];if(e.length===1)return[e[0],e[0],e[0],e[0]];const t=new Array(e.length);let n=1/0,a=0,s;for(let c=0;c<t.length;c++){let f=getAngle$1(e[c],e[(c+1)%t.length]);rotate(-f,e,t);let b=t[c][0],g=t[c][1],m=t[(c+1)%t.length][0],l=t[(c+1)%t.length][1],o=!0,u=0,d=0,y=0;for(let S=0;S<t.length;S++){let E=t[S][0],A=t[S][1],P=(E-b)/(m-b);o===!0?(o=!1,u=P,d=P):(P<u&&(u=P),P>d&&(d=P));let k=(-(m-b)*A+m*g-l*b)/(m-b);Math.abs(k)>Math.abs(y)&&(y=k)}let w=[b+u*(m-b),g],_=[b+d*(m-b),g],T=Math.abs(y*(u-d)*(m-b));T<n&&(a=f,n=T,s=[w,_,[_[0],_[1]-y],[w[0],w[1]-y]])}return rotate(a,s,s),s}function getAngle$1(r,e){let t=difference(e,r),n=normalize(t),a=Math.acos(n[0]);return n[1]<0?-a:a}function extend$1(r){let e={inPlace:!0};r.extendMethod("invert",invert),r.extendMethod("abs",abs),r.extendMethod("level",level,e),r.extendMethod("add",add,e),r.extendMethod("subtract",subtract,e),r.extendMethod("subtractImage",subtractImage),r.extendMethod("multiply",multiply,e),r.extendMethod("divide",divide,e),r.extendMethod("hypotenuse",hypotenuse),r.extendMethod("background",background$1),r.extendMethod("flipX",flipX),r.extendMethod("flipY",flipY),r.extendMethod("blurFilter",blurFilter),r.extendMethod("medianFilter",medianFilter),r.extendMethod("gaussianFilter",gaussianFilter),r.extendMethod("sobelFilter",sobelFilter),r.extendMethod("gradientFilter",gradientFilter),r.extendMethod("scharrFilter",scharrFilter),r.extendMethod("dilate",dilate),r.extendMethod("erode",erode),r.extendMethod("open",open),r.extendMethod("close",close),r.extendMethod("topHat",topHat),r.extendMethod("blackHat",blackHat),r.extendMethod("morphologicalGradient",morphologicalGradient),r.extendMethod("warpingFourPoints",warpingFourPoints),r.extendMethod("crop",crop),r.extendMethod("cropAlpha",cropAlpha),r.extendMethod("resize",resize).extendMethod("scale",resize),r.extendMethod("hsv",hsv),r.extendMethod("hsl",hsl$1),r.extendMethod("cmyk",cmyk),r.extendMethod("rgba8",rgba8),r.extendMethod("grey",grey).extendMethod("gray",grey),r.extendMethod("mask",mask),r.extendMethod("pad",pad),r.extendMethod("colorDepth",colorDepth),r.extendMethod("setBorder",setBorder,e),r.extendMethod("rotate",rotate$1),r.extendMethod("rotateLeft",rotateLeft),r.extendMethod("rotateRight",rotateRight),r.extendMethod("insert",insert),r.extendMethod("getRow",getRow),r.extendMethod("getColumn",getColumn),r.extendMethod("getMatrix",getMatrix),r.extendMethod("setMatrix",setMatrix),r.extendMethod("getPixelsArray",getPixelsArray),r.extendMethod("getIntersection",getIntersection),r.extendMethod("getClosestCommonParent",getClosestCommonParent),r.extendMethod("getThreshold",getThreshold),r.extendMethod("split",split),r.extendMethod("getChannel",getChannel),r.extendMethod("combineChannels",combineChannels),r.extendMethod("setChannel",setChannel),r.extendMethod("getSimilarity",getSimilarity),r.extendMethod("getPixelsGrid",getPixelsGrid),r.extendMethod("getBestMatch",getBestMatch),r.extendMethod("cannyEdge",cannyEdge),r.extendMethod("convolution",convolution),r.extendMethod("extract",extract),r.extendMethod("floodFill",floodFill),r.extendMethod("paintLabels",paintLabels,e),r.extendMethod("paintMasks",paintMasks,e),r.extendMethod("paintPoints",paintPoints,e),r.extendMethod("paintPolyline",paintPolyline,e),r.extendMethod("paintPolylines",paintPolylines,e),r.extendMethod("paintPolygon",paintPolygon,e),r.extendMethod("paintPolygons",paintPolygons,e),r.extendMethod("countAlphaPixels",countAlphaPixels),r.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),r.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),r.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),r.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),r.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),r.extendMethod("getMin",min).extendProperty("min",min),r.extendMethod("getMax",max).extendProperty("max",max),r.extendMethod("getSum",sum).extendProperty("sum",sum),r.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),r.extendMethod("getLocalMaxima",localMaxima),r.extendMethod("getMedian",median).extendProperty("median",median),r.extendMethod("getMean",mean).extendProperty("mean",mean),r.extendMethod("getPoints",points).extendProperty("points",points),r.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),r.extendMethod("getRelativePosition",getRelativePosition)}var quantities={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(commonjsGlobal,function(){function t(H){return typeof H=="string"||H instanceof String}var n=Number.isFinite||window.isFinite;function a(H){return n(H)}function s(H){return H}function c(H){var ue={};return H.filter(function(xe){return ue.hasOwnProperty(xe)?!1:ue[xe]=!0})}function f(H,ue){if(ue.length!==H.length)return!1;for(var xe=0;xe<H.length;xe++)if(ue[xe].compareArray&&!ue[xe].compareArray(H[xe])||ue[xe]!==H[xe])return!1;return!0}function b(H,ue){Object.keys(ue).forEach(function(xe){H[xe]=ue[xe]})}function g(){for(var H=1,ue=0,xe=0;xe<arguments.length;xe++){var Be=arguments[xe];ue=ue+o(Be),H*=Be}return ue!==0?l(H,ue):H}function m(H,ue){if(ue===0)throw new Error("Divide by zero");var xe=Math.pow(10,o(ue)),Be=xe/(xe*ue);return g(H,Be)}function l(H,ue){return Math.round(H*Math.pow(10,ue))/Math.pow(10,ue)}function o(H){if(!isFinite(H))return 0;for(var ue=0;H%1!==0;)H*=10,ue++;return ue}function u(){var H;if(!this)return H=Object.create(u.prototype),u.apply(H,arguments),H;H=Error.apply(this,arguments),this.name="QtyError",this.message=H.message,this.stack=H.stack}u.prototype=Object.create(Error.prototype,{constructor:{value:u}});function d(H,ue){throw new u("Incompatible units: "+H+" and "+ue)}var y={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},w=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],_="<1>",T=[_];function S(H,ue){var xe=ue[1],Be=ue[3]||[],le=ue[4]||[];if(!a(xe))throw new u(H+": Invalid unit definition. 'scalar' must be a number");Be.forEach(function(Ve){if(y[Ve]===void 0)throw new u(H+": Invalid unit definition. Unit "+Ve+" in 'numerator' is not recognized")}),le.forEach(function(Ve){if(y[Ve]===void 0)throw new u(H+": Invalid unit definition. Unit "+Ve+" in 'denominator' is not recognized")})}var E={},A={},P={},k={},M={};for(var F in y)if(y.hasOwnProperty(F)){var O=y[F];if(O[2]==="prefix"){E[F]=O[1];for(var D=0;D<O[0].length;D++)A[O[0][D]]=F}else{S(F,O),P[F]={scalar:O[1],numerator:O[3],denominator:O[4]};for(var R=0;R<O[0].length;R++)k[O[0][R]]=F}M[F]=O[0][0]}function C(H){var ue,xe=[],Be=Object.keys(y);if(typeof H>"u")for(ue=0;ue<Be.length;ue++)["","prefix"].indexOf(y[Be[ue]][2])===-1&&xe.push(Be[ue].substr(1,Be[ue].length-2));else{if(this.getKinds().indexOf(H)===-1)throw new u("Kind not recognized");for(ue=0;ue<Be.length;ue++)y[Be[ue]][2]===H&&xe.push(Be[ue].substr(1,Be[ue].length-2))}return xe.sort(function(le,Ve){return le.toLowerCase()<Ve.toLowerCase()?-1:le.toLowerCase()>Ve.toLowerCase()?1:0})}function U(H){if(!k[H])throw new u("Unit not recognized");return y[k[H]][0]}var N=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function V(){if(this.signature)return this.signature;for(var H=j.call(this),ue=0;ue<H.length;ue++)H[ue]*=Math.pow(20,ue);return H.reduce(function(xe,Be){return xe+Be},0)}function j(){if(!this.isBase())return j.call(this.toBase());for(var H=new Array(N.length),ue=0;ue<H.length;ue++)H[ue]=0;for(var xe,Be,le=0;le<this.numerator.length;le++)(xe=y[this.numerator[le]])&&(Be=N.indexOf(xe[2]),Be>=0&&(H[Be]=H[Be]+1));for(var Ve=0;Ve<this.denominator.length;Ve++)(xe=y[this.denominator[Ve]])&&(Be=N.indexOf(xe[2]),Be>=0&&(H[Be]=H[Be]-1));return H}var K="[+-]",ee="\\d+",he=K+"?"+ee,ge="\\."+ee,Se="(?:"+ee+"(?:"+ge+")?)|(?:"+ge+")",we="[Ee]"+he,ne="(?:"+Se+")(?:"+we+")?",re=K+"?\\s*"+ne,oe="("+re+")?\\s*([^/]*)(?:/(.+))?",Ee=new RegExp("^"+oe+"$"),Re="\\^|\\*{2}",De="[01234]",He=new RegExp("([^ \\*\\d]+?)(?:"+Re+")?(-?"+De+"(?![a-zA-Z]))"),qe=new RegExp("([^ \\*\\d]+?)(?:"+Re+")?("+De+"(?![a-zA-Z]))");function W(H){t(H)||(H=H.toString()),H=H.trim();var ue=Ee.exec(H);if(!ue)throw new u(H+": Quantity not recognized");var xe=ue[1];xe?(xe=xe.replace(/\s/g,""),this.scalar=parseFloat(xe)):this.scalar=1;for(var Be=ue[2],le=ue[3],Ve,lt,mt;ue=He.exec(Be);){if(Ve=parseFloat(ue[2]),isNaN(Ve))throw new u("Unit exponent is not a number");if(Ve===0&&!be.test(ue[1]))throw new u("Unit not recognized");lt=ue[1]+" ",mt="";for(var kt=0;kt<Math.abs(Ve);kt++)mt+=lt;Ve>=0?Be=Be.replace(ue[0],mt):(le=le?le+mt:mt,Be=Be.replace(ue[0],""))}for(;ue=qe.exec(le);){if(Ve=parseFloat(ue[2]),isNaN(Ve))throw new u("Unit exponent is not a number");if(Ve===0&&!be.test(ue[1]))throw new u("Unit not recognized");lt=ue[1]+" ",mt="";for(var jt=0;jt<Ve;jt++)mt+=lt;le=le.replace(ue[0],mt)}Be&&(this.numerator=ve(Be.trim())),le&&(this.denominator=ve(le.trim()))}var X=Object.keys(A).sort(function(H,ue){return ue.length-H.length}).join("|"),te=Object.keys(k).sort(function(H,ue){return ue.length-H.length}).join("|"),ie="\\b|$",ye="("+X+")??("+te+")(?:"+ie+")",be=new RegExp("^\\s*("+ye+"[\\s\\*]*)+$"),Ae=new RegExp(ye,"g"),J={};function ve(H){var ue=J[H];if(ue)return ue;var xe,Be=[];if(!be.test(H))throw new u("Unit not recognized");for(;xe=Ae.exec(H);)Be.push(xe.slice(1));return Be=Be.map(function(le){return A[le[0]]?[A[le[0]],k[le[1]]]:[k[le[1]]]}),Be=Be.reduce(function(le,Ve){return le.concat(Ve)},[]),Be=Be.filter(function(le){return le}),J[H]=Be,Be}function de(H){if(!t(H))throw new u("Argument should be a string");try{return this(H)}catch{return null}}function Oe(H){return H instanceof fe}function fe(H,ue){if(Ue.apply(null,arguments),!Oe(this))return new fe(H,ue);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=T,this.denominator=T,Ze(H)?(this.scalar=H.scalar,this.numerator=H.numerator&&H.numerator.length!==0?H.numerator:T,this.denominator=H.denominator&&H.denominator.length!==0?H.denominator:T):ue?(W.call(this,ue),this.scalar=H):W.call(this,H),this.denominator.join("*").indexOf("temp")>=0)throw new u("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new u("Cannot multiply by temperatures");if(!f(this.denominator,T))throw new u("Cannot divide with temperatures")}if(this.initValue=H,$e.call(this),this.isTemperature()&&this.baseScalar<0)throw new u("Temperatures must not be less than absolute zero")}fe.prototype={constructor:fe};function Ue(H,ue){if(ue){if(!(a(H)&&t(ue)))throw new u("Only number accepted as initialization value when units are explicitly provided")}else if(!(t(H)||a(H)||Oe(H)||Ze(H)))throw new u("Only string, number or quantity accepted as single initialization value")}function Ze(H){return H&&typeof H=="object"&&H.hasOwnProperty("scalar")}function $e(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=V.call(this);else{var H=this.toBase();this.baseScalar=H.scalar,this.signature=H.signature}}var Le={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function Ge(){return c(Object.keys(Le).map(function(H){return Le[H]}))}fe.prototype.kind=function(){return Le[this.signature.toString()]},b(fe.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&f(this.denominator,T)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function ze(H,ue){var xe=H.units(),Be=ue.to(xe),le=fe(Qe(xe));return fe({scalar:H.scalar-Be.scalar,numerator:le.numerator,denominator:le.denominator})}function Je(H,ue){var xe=ue.to(Qe(H.units()));return fe({scalar:H.scalar-xe.scalar,numerator:H.numerator,denominator:H.denominator})}function ot(H,ue){var xe=ue.to(Qe(H.units()));return fe({scalar:H.scalar+xe.scalar,numerator:H.numerator,denominator:H.denominator})}function Qe(H){if(H==="tempK")return"degK";if(H==="tempC")return"degC";if(H==="tempF")return"degF";if(H==="tempR")return"degR";throw new u("Unknown type for temp conversion from: "+H)}function at(H,ue){var xe=st(H),Be=ue.units(),le;if(Be==="degK")le=xe.scalar;else if(Be==="degC")le=xe.scalar;else if(Be==="degF")le=xe.scalar*9/5;else if(Be==="degR")le=xe.scalar*9/5;else throw new u("Unknown type for degree conversion to: "+Be);return fe({scalar:le,numerator:ue.numerator,denominator:ue.denominator})}function st(H){var ue=H.units(),xe;if(ue.match(/(deg)[CFRK]/))xe=H.baseScalar;else if(ue==="tempK")xe=H.scalar;else if(ue==="tempC")xe=H.scalar;else if(ue==="tempF")xe=H.scalar*5/9;else if(ue==="tempR")xe=H.scalar*5/9;else throw new u("Unknown type for temp conversion from: "+ue);return fe({scalar:xe,numerator:["<kelvin>"],denominator:T})}function We(H,ue){var xe=ue.units(),Be;if(xe==="tempK")Be=H.baseScalar;else if(xe==="tempC")Be=H.baseScalar-273.15;else if(xe==="tempF")Be=H.baseScalar*9/5-459.67;else if(xe==="tempR")Be=H.baseScalar*9/5;else throw new u("Unknown type for temp conversion to: "+xe);return fe({scalar:Be,numerator:ue.numerator,denominator:ue.denominator})}function pt(H){var ue=H.units(),xe;if(ue.match(/(deg)[CFRK]/))xe=H.baseScalar;else if(ue==="tempK")xe=H.scalar;else if(ue==="tempC")xe=H.scalar+273.15;else if(ue==="tempF")xe=(H.scalar+459.67)*5/9;else if(ue==="tempR")xe=H.scalar*5/9;else throw new u("Unknown type for temp conversion from: "+ue);return fe({scalar:xe,numerator:["<temp-K>"],denominator:T})}b(fe.prototype,{to:function(H){var ue,xe;if(H==null)return this;if(!t(H))return this.to(H.units());if(ue=this._conversionCache[H],ue)return ue;if(xe=fe(H),xe.units()===this.units())return this;if(!this.isCompatible(xe))this.isInverse(xe)?xe=this.inverse().to(H):d(this.units(),xe.units());else if(xe.isTemperature())xe=We(this,xe);else if(xe.isDegrees())xe=at(this,xe);else{var Be=m(this.baseScalar,xe.baseScalar);xe=fe({scalar:Be,numerator:xe.numerator,denominator:xe.denominator})}return this._conversionCache[H]=xe,xe},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return pt(this);var H=Y[this.units()];return H||(H=me(this.numerator,this.denominator),Y[this.units()]=H),H.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new u("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(H){if(t(H)&&(H=fe(H)),a(H)&&(H=fe(H+" "+this.units())),this.isUnitless()?H.isUnitless()||d(this.units(),H.units()):H=H.to(this.units()),H.scalar===0)throw new u("Divide by zero");var ue=g(Math.round(this.scalar/H.scalar),H.scalar);return fe(ue+this.units())}});function vt(H,ue){var xe=fe(H),Be=fe(ue);if(xe.eq(Be))return s;var le;return xe.isTemperature()?le=function(Ve){return xe.mul(Ve).to(Be).scalar}:le=function(Ve){return Ve*xe.baseScalar/Be.baseScalar},function(lt){var mt,kt,jt;if(Array.isArray(lt)){for(kt=lt.length,jt=[],mt=0;mt<kt;mt++)jt.push(le(lt[mt]));return jt}else return le(lt)}}var Y={};function me(H,ue){for(var xe=[],Be=[],le=1,Ve,lt=0;lt<H.length;lt++)Ve=H[lt],E[Ve]?le=g(le,E[Ve]):P[Ve]&&(le*=P[Ve].scalar,P[Ve].numerator&&xe.push(P[Ve].numerator),P[Ve].denominator&&Be.push(P[Ve].denominator));for(var mt=0;mt<ue.length;mt++)Ve=ue[mt],E[Ve]?le/=E[Ve]:P[Ve]&&(le/=P[Ve].scalar,P[Ve].numerator&&Be.push(P[Ve].numerator),P[Ve].denominator&&xe.push(P[Ve].denominator));return xe=xe.reduce(function(kt,jt){return kt.concat(jt)},[]),Be=Be.reduce(function(kt,jt){return kt.concat(jt)},[]),fe({scalar:le,numerator:xe,denominator:Be})}fe.parse=de,fe.getUnits=C,fe.getAliases=U,fe.mulSafe=g,fe.divSafe=m,fe.getKinds=Ge,fe.swiftConverter=vt,fe.Error=u,b(fe.prototype,{add:function(H){if(t(H)&&(H=fe(H)),this.isCompatible(H)||d(this.units(),H.units()),this.isTemperature()&&H.isTemperature())throw new u("Cannot add two temperatures");return this.isTemperature()?ot(this,H):H.isTemperature()?ot(H,this):fe({scalar:this.scalar+H.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(H){if(t(H)&&(H=fe(H)),this.isCompatible(H)||d(this.units(),H.units()),this.isTemperature()&&H.isTemperature())return ze(this,H);if(this.isTemperature())return Je(this,H);if(H.isTemperature())throw new u("Cannot subtract a temperature from a differential degree unit");return fe({scalar:this.scalar-H.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(H){if(a(H))return fe({scalar:g(this.scalar,H),numerator:this.numerator,denominator:this.denominator});if(t(H)&&(H=fe(H)),(this.isTemperature()||H.isTemperature())&&!(this.isUnitless()||H.isUnitless()))throw new u("Cannot multiply by temperatures");var ue=this,xe=H;ue.isCompatible(xe)&&ue.signature!==400&&(xe=xe.to(ue));var Be=_e(ue.numerator,ue.denominator,xe.numerator,xe.denominator);return fe({scalar:g(ue.scalar,xe.scalar,Be[2]),numerator:Be[0],denominator:Be[1]})},div:function(H){if(a(H)){if(H===0)throw new u("Divide by zero");return fe({scalar:this.scalar/H,numerator:this.numerator,denominator:this.denominator})}else t(H)&&(H=fe(H));if(H.scalar===0)throw new u("Divide by zero");if(H.isTemperature())throw new u("Cannot divide with temperatures");if(this.isTemperature()&&!H.isUnitless())throw new u("Cannot divide with temperatures");var ue=this,xe=H;ue.isCompatible(xe)&&ue.signature!==400&&(xe=xe.to(ue));var Be=_e(ue.numerator,ue.denominator,xe.denominator,xe.numerator);return fe({scalar:g(ue.scalar,Be[2])/xe.scalar,numerator:Be[0],denominator:Be[1]})},inverse:function(){if(this.isTemperature())throw new u("Cannot divide with temperatures");if(this.scalar===0)throw new u("Divide by zero");return fe({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function _e(H,ue,xe,Be){function le($t){return $t!==_}H=H.filter(le),xe=xe.filter(le),ue=ue.filter(le),Be=Be.filter(le);var Ve={};function lt($t,Ht){for(var Lt,lr,Or,rr=0;rr<$t.length;rr++)if(E[$t[rr]]?(Lt=$t[rr+1],lr=$t[rr],Or=E[lr],rr++):(Lt=$t[rr],lr=null,Or=1),Lt&&Lt!==_)if(Ve[Lt]){Ve[Lt][0]+=Ht;var Lr=Ve[Lt][2]?E[Ve[Lt][2]]:1;Ve[Lt][Ht===1?3:4]*=m(Or,Lr)}else Ve[Lt]=[Ht,Lt,lr,1,1]}lt(H,1),lt(ue,-1),lt(xe,1),lt(Be,-1);var mt=[],kt=[],jt=1;for(var Rr in Ve)if(Ve.hasOwnProperty(Rr)){var Ut=Ve[Rr],sr;if(Ut[0]>0)for(sr=0;sr<Ut[0];sr++)mt.push(Ut[2]===null?Ut[1]:[Ut[2],Ut[1]]);else if(Ut[0]<0)for(sr=0;sr<-Ut[0];sr++)kt.push(Ut[2]===null?Ut[1]:[Ut[2],Ut[1]]);jt*=m(Ut[3],Ut[4])}return mt.length===0&&(mt=T),kt.length===0&&(kt=T),mt=mt.reduce(function($t,Ht){return $t.concat(Ht)},[]),kt=kt.reduce(function($t,Ht){return $t.concat(Ht)},[]),[mt,kt,jt]}b(fe.prototype,{eq:function(H){return this.compareTo(H)===0},lt:function(H){return this.compareTo(H)===-1},lte:function(H){return this.eq(H)||this.lt(H)},gt:function(H){return this.compareTo(H)===1},gte:function(H){return this.eq(H)||this.gt(H)},compareTo:function(H){if(t(H))return this.compareTo(fe(H));if(this.isCompatible(H)||d(this.units(),H.units()),this.baseScalar<H.baseScalar)return-1;if(this.baseScalar===H.baseScalar)return 0;if(this.baseScalar>H.baseScalar)return 1},same:function(H){return this.scalar===H.scalar&&this.units()===H.units()}}),b(fe.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(H){return f(H,T)})},isCompatible:function(H){return t(H)?this.isCompatible(fe(H)):Oe(H)&&H.signature!==void 0?this.signature===H.signature:!1},isInverse:function(H){return this.inverse().isCompatible(H)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(H){H!==_&&w.indexOf(H)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function Pe(){}Pe.prototype.get=function(H){return arguments.length>1&&(H=Array.apply(null,arguments)),H.reduce(function(ue,xe,Be){if(ue){var le=ue[xe];return Be===H.length-1?le?le.data:void 0:le}},this)},Pe.prototype.set=function(H,ue){return arguments.length>2&&(H=Array.prototype.slice.call(arguments,0,-1),ue=arguments[arguments.length-1]),H.reduce(function(xe,Be,le){var Ve=xe[Be];return Ve===void 0&&(Ve=xe[Be]={}),le===H.length-1?(Ve.data=ue,ue):Ve},this)};function Ye(H,ue){return(H+" "+ue).trim()}fe.formatter=Ye,b(fe.prototype,{units:function(){if(this._units!==void 0)return this._units;var H=f(this.numerator,T),ue=f(this.denominator,T);if(H&&ue)return this._units="",this._units;var xe=nt(this.numerator),Be=nt(this.denominator);return this._units=xe+(ue?"":"/"+Be),this._units},toString:function(H,ue){var xe;if(a(H))xe=this.units(),ue=H;else if(t(H))xe=H;else if(Oe(H))return this.toPrec(H).toString(ue);var Be=this.to(xe),le=ue!==void 0?l(Be.scalar,ue):Be.scalar;return Be=(le+" "+Be.units()).trim(),Be},format:function(H,ue){arguments.length===1&&typeof H=="function"&&(ue=H,H=void 0),ue=ue||fe.formatter;var xe=this.to(H);return ue.call(this,xe.scalar,xe.units())}});var et=new Pe;function nt(H){var ue=et.get(H);if(ue)return ue;var xe=f(H,T);return xe?ue="1":ue=Pt(Et(H)).join("*"),et.set(H,ue),ue}function Et(H){for(var ue=[],xe,Be,le=0;le<H.length;le++)xe=H[le],Be=H[le+1],E[xe]?(ue.push(M[xe]+M[Be]),le++):ue.push(M[xe]);return ue}function Pt(H){var ue=H.reduce(function(xe,Be){var le=xe[Be];return le||xe.push(le=xe[Be]=[Be,0]),le[1]++,xe},[]);return ue.map(function(xe){return xe[0]+(xe[1]>1?xe[1]:"")})}return fe.version="1.8.0",fe})})(quantities);var quantitiesExports=quantities.exports;const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(r,e=""){let t=e.split(".");for(let n of t){if(r[n]===void 0)return;r=r[n]}return r}var orientation={exports:{}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(r,e,t){var n=r*e,a=SPLITTER*r,s=a-r,c=a-s,f=r-c,b=SPLITTER*e,g=b-e,m=b-g,l=e-m,o=n-c*m,u=o-f*m,d=u-c*l,y=f*l-d;return t?(t[0]=y,t[1]=n,t):[y,n]}var robustSum=linearExpansionSum;function scalarScalar$1(r,e){var t=r+e,n=t-r,a=t-n,s=e-n,c=r-a,f=c+s;return f?[f,t]:[t]}function linearExpansionSum(r,e){var t=r.length|0,n=e.length|0;if(t===1&&n===1)return scalarScalar$1(r[0],e[0]);var a=t+n,s=new Array(a),c=0,f=0,b=0,g=Math.abs,m=r[f],l=g(m),o=e[b],u=g(o),d,y;l<u?(y=m,f+=1,f<t&&(m=r[f],l=g(m))):(y=o,b+=1,b<n&&(o=e[b],u=g(o))),f<t&&l<u||b>=n?(d=m,f+=1,f<t&&(m=r[f],l=g(m))):(d=o,b+=1,b<n&&(o=e[b],u=g(o)));for(var w=d+y,_=w-d,T=y-_,S=T,E=w,A,P,k,M,F;f<t&&b<n;)l<u?(d=m,f+=1,f<t&&(m=r[f],l=g(m))):(d=o,b+=1,b<n&&(o=e[b],u=g(o))),y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A;for(;f<t;)d=m,y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A,f+=1,f<t&&(m=r[f]);for(;b<n;)d=o,y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A,b+=1,b<n&&(o=e[b]);return S&&(s[c++]=S),E&&(s[c++]=E),c||(s[c++]=0),s.length=c,s}var twoSum$1=fastTwoSum;function fastTwoSum(r,e,t){var n=r+e,a=n-r,s=n-a,c=e-a,f=r-s;return t?(t[0]=f+c,t[1]=n,t):[f+c,n]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(r,e){var t=r.length;if(t===1){var n=twoProduct(r[0],e);return n[0]?n:[n[1]]}var a=new Array(2*t),s=[.1,.1],c=[.1,.1],f=0;twoProduct(r[0],e,s),s[0]&&(a[f++]=s[0]);for(var b=1;b<t;++b){twoProduct(r[b],e,c);var g=s[1];twoSum(g,c[0],s),s[0]&&(a[f++]=s[0]);var m=c[1],l=s[1],o=m+l,u=o-m,d=l-u;s[1]=o,d&&(a[f++]=d)}return s[1]&&(a[f++]=s[1]),f===0&&(a[f++]=0),a.length=f,a}var robustDiff=robustSubtract;function scalarScalar(r,e){var t=r+e,n=t-r,a=t-n,s=e-n,c=r-a,f=c+s;return f?[f,t]:[t]}function robustSubtract(r,e){var t=r.length|0,n=e.length|0;if(t===1&&n===1)return scalarScalar(r[0],-e[0]);var a=t+n,s=new Array(a),c=0,f=0,b=0,g=Math.abs,m=r[f],l=g(m),o=-e[b],u=g(o),d,y;l<u?(y=m,f+=1,f<t&&(m=r[f],l=g(m))):(y=o,b+=1,b<n&&(o=-e[b],u=g(o))),f<t&&l<u||b>=n?(d=m,f+=1,f<t&&(m=r[f],l=g(m))):(d=o,b+=1,b<n&&(o=-e[b],u=g(o)));for(var w=d+y,_=w-d,T=y-_,S=T,E=w,A,P,k,M,F;f<t&&b<n;)l<u?(d=m,f+=1,f<t&&(m=r[f],l=g(m))):(d=o,b+=1,b<n&&(o=-e[b],u=g(o))),y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A;for(;f<t;)d=m,y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A,f+=1,f<t&&(m=r[f]);for(;b<n;)d=o,y=S,w=d+y,_=w-d,T=y-_,T&&(s[c++]=T),A=E+w,P=A-E,k=A-P,M=w-P,F=E-k,S=F+M,E=A,b+=1,b<n&&(o=-e[b]);return S&&(s[c++]=S),E&&(s[c++]=E),c||(s[c++]=0),s.length=c,s}(function(r){var e=twoProduct_1,t=robustSum,n=robustScale,a=robustDiff,s=5,c=11102230246251565e-32,f=(3+16*c)*c,b=(7+56*c)*c;function g(S,E,A,P){return function(M,F,O){var D=S(S(E(F[1],O[0]),E(-O[1],F[0])),S(E(M[1],F[0]),E(-F[1],M[0]))),R=S(E(M[1],O[0]),E(-O[1],M[0])),C=P(D,R);return C[C.length-1]}}function m(S,E,A,P){return function(M,F,O,D){var R=S(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),F[2]),S(A(S(E(F[1],D[0]),E(-D[1],F[0])),-O[2]),A(S(E(F[1],O[0]),E(-O[1],F[0])),D[2]))),S(A(S(E(F[1],D[0]),E(-D[1],F[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),D[2])))),C=S(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-O[2]),A(S(E(M[1],O[0]),E(-O[1],M[0])),D[2]))),S(A(S(E(F[1],O[0]),E(-O[1],F[0])),M[2]),S(A(S(E(M[1],O[0]),E(-O[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),O[2])))),U=P(R,C);return U[U.length-1]}}function l(S,E,A,P){return function(M,F,O,D,R){var C=S(S(S(A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),O[2]),S(A(S(E(O[1],R[0]),E(-R[1],O[0])),-D[2]),A(S(E(O[1],D[0]),E(-D[1],O[0])),R[2]))),F[3]),S(A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),F[2]),S(A(S(E(F[1],R[0]),E(-R[1],F[0])),-D[2]),A(S(E(F[1],D[0]),E(-D[1],F[0])),R[2]))),-O[3]),A(S(A(S(E(O[1],R[0]),E(-R[1],O[0])),F[2]),S(A(S(E(F[1],R[0]),E(-R[1],F[0])),-O[2]),A(S(E(F[1],O[0]),E(-O[1],F[0])),R[2]))),D[3]))),S(A(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),F[2]),S(A(S(E(F[1],D[0]),E(-D[1],F[0])),-O[2]),A(S(E(F[1],O[0]),E(-O[1],F[0])),D[2]))),-R[3]),S(A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),F[2]),S(A(S(E(F[1],R[0]),E(-R[1],F[0])),-D[2]),A(S(E(F[1],D[0]),E(-D[1],F[0])),R[2]))),M[3]),A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-D[2]),A(S(E(M[1],D[0]),E(-D[1],M[0])),R[2]))),-F[3])))),S(S(A(S(A(S(E(F[1],R[0]),E(-R[1],F[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),R[2]))),D[3]),S(A(S(A(S(E(F[1],D[0]),E(-D[1],F[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),D[2]))),-R[3]),A(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),F[2]),S(A(S(E(F[1],D[0]),E(-D[1],F[0])),-O[2]),A(S(E(F[1],O[0]),E(-O[1],F[0])),D[2]))),M[3]))),S(A(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-O[2]),A(S(E(M[1],O[0]),E(-O[1],M[0])),D[2]))),-F[3]),S(A(S(A(S(E(F[1],D[0]),E(-D[1],F[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),D[2]))),O[3]),A(S(A(S(E(F[1],O[0]),E(-O[1],F[0])),M[2]),S(A(S(E(M[1],O[0]),E(-O[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),O[2]))),-D[3]))))),U=S(S(S(A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),O[2]),S(A(S(E(O[1],R[0]),E(-R[1],O[0])),-D[2]),A(S(E(O[1],D[0]),E(-D[1],O[0])),R[2]))),M[3]),A(S(A(S(E(D[1],R[0]),E(-R[1],D[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-D[2]),A(S(E(M[1],D[0]),E(-D[1],M[0])),R[2]))),-O[3])),S(A(S(A(S(E(O[1],R[0]),E(-R[1],O[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-O[2]),A(S(E(M[1],O[0]),E(-O[1],M[0])),R[2]))),D[3]),A(S(A(S(E(O[1],D[0]),E(-D[1],O[0])),M[2]),S(A(S(E(M[1],D[0]),E(-D[1],M[0])),-O[2]),A(S(E(M[1],O[0]),E(-O[1],M[0])),D[2]))),-R[3]))),S(S(A(S(A(S(E(O[1],R[0]),E(-R[1],O[0])),F[2]),S(A(S(E(F[1],R[0]),E(-R[1],F[0])),-O[2]),A(S(E(F[1],O[0]),E(-O[1],F[0])),R[2]))),M[3]),A(S(A(S(E(O[1],R[0]),E(-R[1],O[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-O[2]),A(S(E(M[1],O[0]),E(-O[1],M[0])),R[2]))),-F[3])),S(A(S(A(S(E(F[1],R[0]),E(-R[1],F[0])),M[2]),S(A(S(E(M[1],R[0]),E(-R[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),R[2]))),O[3]),A(S(A(S(E(F[1],O[0]),E(-O[1],F[0])),M[2]),S(A(S(E(M[1],O[0]),E(-O[1],M[0])),-F[2]),A(S(E(M[1],F[0]),E(-F[1],M[0])),O[2]))),-R[3])))),N=P(C,U);return N[N.length-1]}}function o(S){var E=S===3?g:S===4?m:l;return E(t,e,n,a)}var u=o(3),d=o(4),y=[function(){return 0},function(){return 0},function(E,A){return A[0]-E[0]},function(E,A,P){var k=(E[1]-P[1])*(A[0]-P[0]),M=(E[0]-P[0])*(A[1]-P[1]),F=k-M,O;if(k>0){if(M<=0)return F;O=k+M}else if(k<0){if(M>=0)return F;O=-(k+M)}else return F;var D=f*O;return F>=D||F<=-D?F:u(E,A,P)},function(E,A,P,k){var M=E[0]-k[0],F=A[0]-k[0],O=P[0]-k[0],D=E[1]-k[1],R=A[1]-k[1],C=P[1]-k[1],U=E[2]-k[2],N=A[2]-k[2],V=P[2]-k[2],j=F*C,K=O*R,ee=O*D,he=M*C,ge=M*R,Se=F*D,we=U*(j-K)+N*(ee-he)+V*(ge-Se),ne=(Math.abs(j)+Math.abs(K))*Math.abs(U)+(Math.abs(ee)+Math.abs(he))*Math.abs(N)+(Math.abs(ge)+Math.abs(Se))*Math.abs(V),re=b*ne;return we>re||-we>re?we:d(E,A,P,k)}];function w(S){var E=y[S.length];return E||(E=y[S.length]=o(S.length)),E.apply(void 0,S)}function _(S,E,A,P,k,M,F){return function(D,R,C,U,N){switch(arguments.length){case 0:case 1:return 0;case 2:return P(D,R);case 3:return k(D,R,C);case 4:return M(D,R,C,U);case 5:return F(D,R,C,U,N)}for(var V=new Array(arguments.length),j=0;j<arguments.length;++j)V[j]=arguments[j];return S(V)}}function T(){for(;y.length<=s;)y.push(o(y.length));r.exports=_.apply(void 0,[w].concat(y));for(var S=0;S<=s;++S)r.exports[S]=y[S]}T()})(orientation);var orientationExports=orientation.exports,robustPnp=robustPointInPolygon,orient=orientationExports;function robustPointInPolygon(r,e){for(var t=e[0],n=e[1],a=r.length,s=1,c=a,f=0,b=a-1;f<c;b=f++){var g=r[f],m=r[b],l=g[1],o=m[1];if(o<l){if(o<n&&n<l){var u=orient(g,m,e);if(u===0)return 0;s^=0<u|0}else if(n===l){var d=r[(f+1)%a],y=d[1];if(l<y){var u=orient(g,m,e);if(u===0)return 0;s^=0<u|0}}}else if(l<o){if(l<n&&n<o){var u=orient(g,m,e);if(u===0)return 0;s^=u<0|0}else if(n===l){var d=r[(f+1)%a],y=d[1];if(y<l){var u=orient(g,m,e);if(u===0)return 0;s^=u<0|0}}}else if(n===l){var w=Math.min(g[0],m[0]),_=Math.max(g[0],m[0]);if(f===0){for(;b>0;){var T=(b+a-1)%a,S=r[T];if(S[1]!==n)break;var E=S[0];w=Math.min(w,E),_=Math.max(_,E),b=T}if(b===0)return w<=t&&t<=_?0:1;c=b+1}for(var A=r[(b+a-1)%a][1];f+1<c;){var S=r[f+1];if(S[1]!==n)break;var E=S[0];w=Math.min(w,E),_=Math.max(_,E),f+=1}if(w<=t&&t<=_)return 0;var P=r[(f+1)%a][1];t<w&&A<n!=P<n&&(s^=1)}}return 2*s-1}const robustPointInPolygon$1=getDefaultExportFromCjs(robustPnp);function feretDiameters(r={}){const{originalPoints:e=monotoneChainConvexHull.call(this)}=r;if(e.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(e.length===1)return{min:1,max:1,minLine:[e[0],e[0]],maxLine:[e[0],e[0]],aspectRatio:1};const t=new Array(e.length);let n=1/0,a=0,s=[];for(let g=0;g<e.length;g++){let m=getAngle(e[g],e[(g+1)%e.length]);rotate(-m,e,t);let l=0,o=[];for(let u=0;u<e.length;u++){let d=Math.abs(t[g][1]-t[u][1]);d>l&&(l=d,o=[],o.push([t[u][0],t[g][1]],[t[u][0],t[u][1]]))}l<n&&(n=l,a=m,s=o)}rotate(a,s,s);let c=0,f=[],b=0;for(let g=0;g<e.length-1;g++)for(let m=g+1;m<e.length;m++){let l=(e[g][0]-e[m][0])**2+(e[g][1]-e[m][1])**2;l>b&&(b=l,c=Math.sqrt(l),f=[e[g],e[m]])}return{min:n,minLine:s,max:c,maxLine:f,aspectRatio:n/c}}function getAngle(r,e){let t=difference(e,r),n=normalize(t),a=Math.acos(n[0]);return n[1]<0?-a:a}class Roi{constructor(e,t){this.map=e,this.id=t,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(e={}){const{scale:t=1,kind:n=""}=e;let a;switch(n){case"contour":a=this.contourMask;break;case"box":a=this.boxMask;break;case"filled":a=this.filledMask;break;case"center":a=this.centerMask;break;case"mbr":a=this.mbrFilledMask;break;case"hull":a=this.convexHullFilledMask;break;case"hullContour":a=this.convexHullMask;break;case"mbrContour":a=this.mbrMask;break;case"feret":a=this.feretMask;break;default:a=this.mask}return t<1&&(a=a.resize({factor:t}),a.parent=this.mask.parent,a.position[0]+=this.minX,a.position[1]+=this.minY),a}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let e=this.borderIDs,t=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let n=this.internalIDs;for(let a=0;a<e.length;a++)n.includes(e[a])||(this.computed.externalIDs.push(e[a]),this.computed.externalLengths.push(t[a]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let e=getBorders(this);this.computed.borderIDs=e.ids,this.computed.borderLengths=e.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let e=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++)this.map.data[t+this.minX+(n+this.minY)*this.map.width]===this.id&&(t>0&&t<this.width-1&&n>0&&n<this.height-1?(this.map.data[t-1+this.minX+(n+this.minY)*this.map.width]!==this.id||this.map.data[t+1+this.minX+(n+this.minY)*this.map.width]!==this.id||this.map.data[t+this.minX+(n-1+this.minY)*this.map.width]!==this.id||this.map.data[t+this.minX+(n+1+this.minY)*this.map.width]!==this.id)&&e.setBitXY(t,n):e.setBitXY(t,n));this.computed.contourMask=e}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let e=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let t=0;t<this.width;t++)e.setBitXY(t,0),e.setBitXY(t,this.height-1);for(let t=0;t<this.height;t++)e.setBitXY(0,t),e.setBitXY(this.width-1,t);this.computed.boxMask=e}return this.computed.boxMask}get mask(){if(!this.computed.mask){let e=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++)this.map.data[t+this.minX+(n+this.minY)*this.map.width]===this.id&&e.setBitXY(t,n);this.computed.mask=e}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let e=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++){let a=t+this.minX+(n+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[a])&&e.setBitXY(t,n)}this.computed.filledMask=e}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let e=new Shape({kind:"smallCross"}).getMask();e.parent=this.map.parent,e.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=e}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const e=[];for(let n=0;n<this.width;n++)for(let a=0;a<this.height;a++)this.map.data[n+this.minX+(a+this.minY)*this.map.width]===this.id&&(n>0&&n<this.width-1&&a>0&&a<this.height-1?(this.map.data[n-1+this.minX+(a+this.minY)*this.map.width]!==this.id||this.map.data[n+1+this.minX+(a+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(a-1+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(a+1+this.minY)*this.map.width]!==this.id)&&(e.push([n,a]),e.push([n+1,a]),e.push([n,a+1]),e.push([n+1,a+1])):(e.push([n,a]),e.push([n+1,a]),e.push([n,a+1]),e.push([n+1,a+1])));const t=monotoneChainConvexHull$1(e);this.computed.convexHull={polyline:t,surface:surface(t),perimeter:perimeter(t)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const e=this.convexHull,t=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(e.polyline,{closed:!0}),this.computed.convexHullMask=t}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const e=this.convexHull,t=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let a=0;a<this.height;a++)robustPointInPolygon$1(e.polyline,[n,a])!==1&&t.setBitXY(n,a);this.computed.convexHullFilledMask=t}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let e=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(e.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:e};else{let t=e[0],n=e[1],a=e[2],s=Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2),c=Math.sqrt((a[0]-n[0])**2+(a[1]-n[1])**2);this.computed.mbr={width:s,height:c,elongation:1-s/c,aspectRatio:s/c,surface:s*c,perimeter:(s+c)*2,rectangle:e}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let e=this.perimeterInfo,t=2-Math.sqrt(2);return e.one+e.two*2+e.three*3+e.four*4-t*(e.two+e.three*2+e.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const e=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});e.paintPolyline(this.feretDiameters.minLine),e.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=e}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let e=round(this.mbr.rectangle);if(e.length>0){const t=minMax(e),n=new Image$1(t[1][0]-t[0][0]+1,t[1][1]-t[0][1]+1,{kind:BINARY,position:[this.minX+t[0][0],this.minY+t[0][1]],parent:this.map.parent});e=moveToZeroZero(e),n.paintPolyline(e,{closed:!0}),this.computed.mbrMask=n}else this.computed.mbrMask=new Image$1(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const e=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),t=this.mask.minimalBoundingRectangle();for(let n=0;n<this.width;n++)for(let a=0;a<this.height;a++)robustPointInPolygon$1(t,[n,a])!==1&&e.setBitXY(n,a);this.computed.mbrFilledMask=e}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let e=[];for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++){let a=(t+this.minY)*this.map.width+n+this.minX;this.map.data[a]===this.id&&e.push([n,t])}this.computed.points=e}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let e=0,t;const n=this.points;for(let a=0;a<n.length;a++)for(let s=a+1;s<n.length;s++){let c=Math.pow(n[a][0]-n[s][0],2)+Math.pow(n[a][1]-n[s][1],2);c>=e&&(e=c,t=[n[a],n[s]])}this.computed.maxLengthPoints=t}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let e=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=e}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let e=this.maxLengthPoints,t=-Math.atan2(e[0][1]-e[1][1],e[0][0]-e[1][0])*180/Math.PI;this.computed.angle=t}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(r){let e=r.map,t=e.data,n=new Set,a=new Map,s=new Set,c=[1,0,-1,0],f=[0,1,0,-1];for(let m=r.minX;m<=r.maxX;m++)for(let l=r.minY;l<=r.maxY;l++){let o=m+l*e.width;if(t[o]===r.id)for(let u=0;u<4;u++){let d=m+c[u],y=l+f[u];if(d>=0&&y>=0&&d<e.width&&y<e.height){let w=d+y*e.width;if(t[w]!==r.id&&!s.has(w)){s.add(w),n.add(t[w]);let _=a.get(t[w]);_?a.set(t[w],++_):a.set(t[w],1)}}}}let b=Array.from(n),g=b.map(function(m){return a.get(m)});return{ids:b,lengths:g}}function getBoxIDs(r){let e=new Set,t=r.map,n=t.data;for(let a of[0,r.height-1])for(let s=0;s<r.width;s++){let c=(a+r.minY)*t.width+s+r.minX;if(s-r.minX>0&&n[c]===r.id&&n[c-1]!==r.id){let f=n[c-1];e.add(f)}if(t.width-s-r.minX>1&&n[c]===r.id&&n[c+1]!==r.id){let f=n[c+1];e.add(f)}}for(let a of[0,r.width-1])for(let s=0;s<r.height;s++){let c=(s+r.minY)*t.width+a+r.minX;if(s-r.minY>0&&n[c]===r.id&&n[c-t.width]!==r.id){let f=n[c-t.width];e.add(f)}if(t.height-s-r.minY>1&&n[c]===r.id&&n[c+t.width]!==r.id){let f=n[c+t.width];e.add(f)}}return Array.from(e)}function getBox(r){let e=0,t=r.map,n=t.data,a=[0];r.height>1&&(a[1]=r.height-1);for(let c of a)for(let f=1;f<r.width-1;f++){let b=(c+r.minY)*t.width+f+r.minX;n[b]===r.id&&e++}let s=[0];r.width>1&&(s[1]=r.width-1);for(let c of s)for(let f=0;f<r.height;f++){let b=(f+r.minY)*t.width+c+r.minX;n[b]===r.id&&e++}return e}function getBorder(r){let e=0,t=r.map,n=t.data;for(let a=1;a<r.width-1;a++)for(let s=1;s<r.height-1;s++){let c=(s+r.minY)*t.width+a+r.minX;n[c]===r.id&&(n[c-1]!==r.id||n[c+1]!==r.id||n[c-t.width]!==r.id||n[c+t.width]!==r.id)&&e++}return e+r.box}function getPerimeterInfo(r){let e=r.map,t=e.data,n=0,a=0,s=0,c=0;for(let f=0;f<r.width;f++)for(let b=0;b<r.height;b++){let g=(b+r.minY)*e.width+f+r.minX;if(t[g]===r.id){let m=0;switch((f===0||r.externalIDs.includes(t[g-1]))&&m++,(f===r.width-1||r.externalIDs.includes(t[g+1]))&&m++,(b===0||r.externalIDs.includes(t[g-e.width]))&&m++,(b===r.height-1||r.externalIDs.includes(t[g+e.width]))&&m++,m){case 1:n++;break;case 2:a++;break;case 3:s++;break;case 4:c++;break}}}return{one:n,two:a,three:s,four:c}}function getExternal(r){let e=0,t=r.map,n=t.data;for(let a=1;a<r.width-1;a++)for(let s=1;s<r.height-1;s++){let c=(s+r.minY)*t.width+a+r.minX;n[c]===r.id&&(r.externalIDs.includes(n[c-1])||r.externalIDs.includes(n[c+1])||r.externalIDs.includes(n[c-t.width])||r.externalIDs.includes(n[c+t.width]))&&e++}return e+r.box}function getHolesInfo(r){let e=0,t=r.map.width,n=r.map.data;for(let a=1;a<r.width-1;a++)for(let s=1;s<r.height-1;s++){let c=(s+r.minY)*t+a+r.minX;r.internalIDs.includes(n[c])&&n[c]!==r.id&&e++}return{number:r.internalIDs.length-1,surface:e}}function getInternalIDs(r){let e=[r.id],t=r.map,n=t.data;if(r.height>2)for(let s=0;s<r.width;s++){let c=r.minY*t.width+s+r.minX;if(e.includes(n[c])){let f=n[c+t.width];!e.includes(f)&&!r.boxIDs.includes(f)&&e.push(f)}}let a=new Array(4);for(let s=1;s<r.width-1;s++)for(let c=1;c<r.height-1;c++){let f=(c+r.minY)*t.width+s+r.minX;if(e.includes(n[f])){a[0]=n[f-1],a[1]=n[f+1],a[2]=n[f-t.width],a[3]=n[f+t.width];for(let b=0;b<4;b++){let g=a[b];!e.includes(g)&&!r.boxIDs.includes(g)&&e.push(g)}}}return e}class RoiLayer{constructor(e,t){this.roiMap=e,this.options=t,this.roi=this.createRoi()}createRoi(){let e=this.roiMap.data,t={};this.roiMap.positive=0,this.roiMap.negative=0;for(let f=0;f<e.length;f++)e[f]&&!t[e[f]]&&(t[e[f]]=!0,e[f]>0?this.roiMap.positive++:this.roiMap.negative++);let n={};for(let f in t)n[f]=new Roi(this.roiMap,f*1);let a=this.roiMap.width,s=this.roiMap.height;for(let f=0;f<s;f++)for(let b=0;b<a;b++){let g=f*a+b;if(e[g]!==0){const m=e[g],l=n[m];b<l.minX&&(l.minX=b),b>l.maxX&&(l.maxX=b),f<l.minY&&(l.minY=f),f>l.maxY&&(l.maxY=f),l.meanX+=b,l.meanY+=f,l.surface++}}let c=[];for(let f in t)n[f].meanX/=n[f].surface,n[f].meanY/=n[f].surface,c.push(n[f]);return c}}function commonBorderLength(r){let e=r.data,t=[1,0,-1,0],n=[0,1,0,-1],a=r.minMax,s=-a.min,c=a.max+s,f=[];for(let g=0;g<=c;g++)f.push(Object.create(null));for(let g=0;g<r.width;g++)for(let m=0;m<r.height;m++){let l=g+m*r.width,o=e[l];if(o!==0){let u=Object.create(null),d=!1;for(let y=0;y<4;y++){let w=g+t[y],_=m+n[y];if(w>=0&&_>=0&&w<r.width&&_<r.height){let T=e[w+_*r.width];o!==T&&(d=!0,T!==0&&u[T]===void 0&&(u[T]=!0,f[T+s][o]?f[T+s][o]++:f[T+s][o]=1))}else d=!0}d&&(f[o+s][o]?f[o+s][o]++:f[o+s][o]=1)}}let b={};for(let g=0;g<f.length;g++)Object.keys(f[g]).length>0&&(b[g-s]=f[g]);return b}function mergeRoi(r={}){const{algorithm:e="commonBorderLength",minCommonBorderLength:t=5,maxCommonBorderLength:n=100,minCommonBorderRatio:a=.3,maxCommonBorderRatio:s=1}=r;let c=function(w,_,T){return w[T]>=t&&w[T]<=n};typeof e=="function"&&(c=e),e.toLowerCase()==="commonborderratio"&&(c=function(w,_,T){let S=Math.min(w[T]/w[_],1);return S>=a&&S<=s});const f=this,b=f.commonBorderLength;let g={},m={};for(let w of Object.keys(b)){let _=b[w],T=Object.keys(_);for(let S of T)if(S!==w&&c(_,w,S)){let E=S;m[S]&&(E=m[S]);let A=w;if(m[w]&&(A=m[w]),Number(E)!==A){let P=Math.min(E,A),k=Math.max(E,A);if(g[P]||(g[P]={}),g[P][k]=!0,m[k]=P,g[k]){for(let M of Object.keys(g[k]))g[P][M]=!0,m[M]=P;delete g[k]}}}}let l=f.minMax,o=-l.min,u=l.max+o,d=new Array(u+1).fill(0);for(let w of Object.keys(m))d[Number(w)+o]=m[w];let y=f.data;for(let w=0;w<y.length;w++){let _=y[w];if(_!==0){let T=d[_+o];T!==0&&(y[w]=T)}}return f.computed={},f}class RoiMap{constructor(e,t){this.parent=e,this.width=e.width,this.height=e.height,this.data=t,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let e=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER;for(let n=0;n<this.data.length;n++)this.data[n]<e&&(e=this.data[n]),this.data[n]>t&&(t=this.data[n]);return{min:e,max:t}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(e={}){return mergeRoi.call(this,e)}mergeRois(e){const t=e[0],n=e.slice(1);for(let a=0;a<this.data.length;a++)n.includes(this.data[a])&&(this.data[a]=t)}rowsInfo(){let e=new Array(this.height),t=0;for(let n=0;n<this.data.length;n+=this.width){let a={row:t,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};e[t++]=a;let s={},c={},f=[],b=this.data[n],g=0;for(let m=n;m<n+this.width;m++){let l=this.data[m];b!==l&&(b=l,f.push(g),g=0),g++,l>0?(a.positivePixel++,s[l]||(s[l]=!0)):l<0?(a.negativePixel++,c[l]||(c[l]=!0)):a.zeroPixel++}f.push(g),a.medianChange=f.sort((m,l)=>m-l)[Math.floor(f.length/2)],a.positiveRoiIDs=Object.keys(s),a.negativeRoiIDs=Object.keys(c),a.positiveRoi=a.positiveRoiIDs.length,a.negativeRoi=a.negativeRoiIDs.length}return e}colsInfo(){let e=new Array(this.width),t=0;for(let n=0;n<this.width;n++){let a={col:t,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};e[t++]=a;let s={},c={},f=[],b=this.data[n],g=0;for(let m=n;m<n+this.data.length;m+=this.width){let l=this.data[m];b!==l&&(b=l,f.push(g),g=0),g++,l>0?(a.positivePixel++,s[l]||(s[l]=!0)):l<0?(a.negativePixel++,c[l]||(c[l]=!0)):a.zeroPixel++}f.push(g),a.medianChange=f.sort((m,l)=>m-l)[Math.floor(f.length/2)],a.positiveRoiIDs=Object.keys(s),a.negativeRoiIDs=Object.keys(c),a.positiveRoi=a.positiveRoiIDs.length,a.negativeRoi=a.negativeRoiIDs.length}return e}}function fromMask(r,e={}){const{allowCorners:t=!1}=e,n=65535;let a=new Int16Array(r.size),s=0,c=0,f=new Uint16Array(n+1),b=new Uint16Array(n+1);for(let m=0;m<r.width;m++)for(let l=0;l<r.height;l++)a[l*r.width+m]===0&&g(m,l);function g(m,l){let o=0,u=0,d=r.getBitXY(m,l),y=d?++s:--c;if(s>32767||c<-32768)throw new Error("Too many regions of interest");for(f[0]=m,b[0]=l;o<=u;){let w=f[o&n],_=b[o&n];if(a[_*r.width+w]=y,w>0&&a[_*r.width+w-1]===0&&r.getBitXY(w-1,_)===d&&(u++,f[u&n]=w-1,b[u&n]=_,a[_*r.width+w-1]=-32768),_>0&&a[(_-1)*r.width+w]===0&&r.getBitXY(w,_-1)===d&&(u++,f[u&n]=w,b[u&n]=_-1,a[(_-1)*r.width+w]=-32768),w<r.width-1&&a[_*r.width+w+1]===0&&r.getBitXY(w+1,_)===d&&(u++,f[u&n]=w+1,b[u&n]=_,a[_*r.width+w+1]=-32768),_<r.height-1&&a[(_+1)*r.width+w]===0&&r.getBitXY(w,_+1)===d&&(u++,f[u&n]=w,b[u&n]=_+1,a[(_+1)*r.width+w]=-32768),t&&(w>0&&_>0&&a[(_-1)*r.width+w-1]===0&&r.getBitXY(w-1,_-1)===d&&(u++,f[u&n]=w-1,b[u&n]=_-1,a[(_-1)*r.width+w-1]=-32768),w<r.width-1&&_>0&&a[(_-1)*r.width+w+1]===0&&r.getBitXY(w+1,_-1)===d&&(u++,f[u&n]=w+1,b[u&n]=_-1,a[(_-1)*r.width+w+1]=-32768),w>0&&_<r.height-1&&a[(_+1)*r.width+w-1]===0&&r.getBitXY(w-1,_+1)===d&&(u++,f[u&n]=w-1,b[u&n]=_+1,a[(_+1)*r.width+w-1]=-32768),w<r.width-1&&_<r.height-1&&a[(_+1)*r.width+w+1]===0&&r.getBitXY(w+1,_+1)===d&&(u++,f[u&n]=w+1,b[u&n]=_+1,a[(_+1)*r.width+w+1]=-32768)),o++,u-o>n)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(r,a)}class DisjointSet{constructor(){this.nodes=new Map}add(e){var t=this.nodes.get(e);return t||(t=new DisjointSetNode(e),this.nodes.set(e,t)),t}union(e,t){const n=this.find(e),a=this.find(t);n!==a&&(n.rank<a.rank?n.parent=a:n.rank>a.rank?a.parent=n:(a.parent=n,n.rank++))}find(e){for(var t=e;t.parent!==null;)t=t.parent;for(var n=e;n.parent!==null;){var a=n;n=n.parent,a.parent=t}return t}connected(e,t){return this.find(e)===this.find(t)}}var DisjointSet_1=DisjointSet;function DisjointSetNode(r){this.value=r,this.parent=null,this.rank=0}const DisjointSet$1=getDefaultExportFromCjs(DisjointSet_1),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(r,e={}){const{allowCorners:t=!1}=e;let n=4;t&&(n=8);let a,s,c;if(n===8)a=direction8X,s=direction8Y,c=neighbours8;else if(n===4)a=direction4X,s=direction4Y,c=neighbours4;else throw new RangeError(`unsupported neighbours count: ${n}`);const f=r.size,b=r.width,g=r.height,m=new Array(f),l=new Uint32Array(f),o=new DisjointSet$1;let u=1;for(let d=0;d<g;d++)for(let y=0;y<b;y++){const w=y+d*b;if(r.getBit(w)){let _=null;for(let T=0;T<c.length;T++){const S=y+a[T],E=d+s[T];if(S>=0&&E>=0&&S<b&&E<g){const A=S+E*b;let P=m[A];P?(c[T]=P,(!_||c[T].value<_.value)&&(_=c[T])):c[T]=null}}if(!_)m[w]=o.add(u++);else{m[w]=_;for(let T=0;T<c.length;T++)c[T]&&c[T]!==_&&o.union(_,c[T])}}}for(let d=0;d<g;d++)for(let y=0;y<b;y++){const w=y+d*b;r.getBit(w)&&(l[w]=o.find(m[w]).value)}return new RoiMap(r,l)}function fromMaxima(r={}){let{allowCorner:e=!0,onlyTop:t=!1,invert:n=!1}=r,a=this;a.checkProcessable("fromMaxima",{components:[1]});const s=1,c=2;let f=0,b=0,g=new Int16Array(a.size),m=new Int8Array(a.size),l=new Float32Array(a.size),o=1048575,u=new Uint16Array(o+1),d=new Uint16Array(o+1),y=0,w=0,_=new Uint16Array(o+1),T=new Uint16Array(o+1),S=0,E=0;for(A(a);y<w;){let M=u[y&o],F=d[y&o];k(M,F,c),y++}return new RoiMap(a,g);function A({maxima:M=!0}){for(let F=1;F<a.height-1;F++)for(let O=1;O<a.width-1;O++){let D=O+F*a.width;if(m[D]===0){let R=M?a.data[D]:-a.data[O+F*a.width];if(a.data[F*a.width+O-1]>R||a.data[F*a.width+O+1]>R||a.data[(F-1)*a.width+O]>R||a.data[(F+1)*a.width+O]>R||e&&(a.data[(F-1)*a.width+O-1]>R||a.data[(F-1)*a.width+O+1]>R||a.data[(F+1)*a.width+O-1]>R||a.data[(F+1)*a.width+O+1]>R))continue;g[D]=M?++f:--b,P(O,F)||(M?--f:++b)}}}function P(M,F){let O=w;S=0,E=1,_[0]=M,T[0]=F;let D=!0;for(;S<E;){let R=_[S&o],C=T[S&o];D&=k(R,C,s),S++}if(!D){for(let R=0;R<E;R++){let C=_[R&o],N=T[R&o]*a.width+C;g[N]=0}w=O}return D}function k(M,F,O){let D=g[F*a.width+M],R=a.data[F*a.width+M];for(let C=F-1;C<=F+1;C++)for(let U=M-1;U<=M+1;U++){let N=C*a.width+U;if(m[N]===0)switch(m[N]=1,l[N]=a.data[N]-R,O){case s:if(l[N]===0){if(U===0||C===0||U===a.width-1||C===a.height-1)return!1;g[N]=D,_[E&o]=U,T[E&o]=C,E++}else{if(l[N]>0)return!1;t||(g[N]=D,u[w&o]=U,d[w&o]=C,w++)}break;case c:l[N]<=0&&(g[N]=D,u[w&o]=U,d[w&o]=C,w++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(r,e={}){let t=new Shape(e),n=new Int16Array(this.size),a=0,s=t.getPoints();for(let c=0;c<r.length;c++){a++;let f=r[c][0],b=r[c][1];for(let g=0;g<s.length;g++){let m=s[g][0],l=s[g][1];f+m>=0&&b+l>=0&&f+m<this.width&&b+l<this.height&&(n[f+m+(b+l)*this.width]=a)}}return new RoiMap(this,n)}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}};(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,s){function c(g,m){if(!a[g]){if(!n[g]){var l=typeof commonjsRequire=="function"&&commonjsRequire;if(!m&&l)return l(g,!0);if(f)return f(g,!0);var o=new Error("Cannot find module '"+g+"'");throw o.code="MODULE_NOT_FOUND",o}var u=a[g]={exports:{}};n[g][0].call(u.exports,function(d){var y=n[g][1][d];return c(y||d)},u,u.exports,t,n,a,s)}return a[g].exports}for(var f=typeof commonjsRequire=="function"&&commonjsRequire,b=0;b<s.length;b++)c(s[b]);return c}({1:[function(t,n,a){var s,c,f,b,g,m=function(o,u){for(var d in u)l.call(u,d)&&(o[d]=u[d]);function y(){this.constructor=o}return y.prototype=u.prototype,o.prototype=new y,o.__super__=u.prototype,o},l={}.hasOwnProperty;s=t("./PriorityQueue/AbstractPriorityQueue"),c=t("./PriorityQueue/ArrayStrategy"),b=t("./PriorityQueue/BinaryHeapStrategy"),f=t("./PriorityQueue/BHeapStrategy"),g=function(o){m(u,o);function u(d){d||(d={}),d.strategy||(d.strategy=b),d.comparator||(d.comparator=function(y,w){return(y||0)-(w||0)}),u.__super__.constructor.call(this,d)}return u}(s),g.ArrayStrategy=c,g.BinaryHeapStrategy=b,g.BHeapStrategy=f,n.exports=g},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,n,a){n.exports=function(){function s(c){var f;if((c!=null?c.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((c!=null?c.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new c.strategy(c),this.length=(c!=null&&(f=c.initialValues)!=null?f.length:void 0)||0}return s.prototype.queue=function(c){this.length++,this.priv.queue(c)},s.prototype.dequeue=function(c){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},s.prototype.peek=function(c){if(!this.length)throw"Empty queue";return this.priv.peek()},s.prototype.clear=function(){return this.length=0,this.priv.clear()},s}()},{}],3:[function(t,n,a){var s;s=function(c,f,b){var g,m,l;for(m=0,g=c.length;m<g;)l=m+g>>>1,b(c[l],f)>=0?m=l+1:g=l;return m},n.exports=function(){function c(f){var b;this.options=f,this.comparator=this.options.comparator,this.data=((b=this.options.initialValues)!=null?b.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return c.prototype.queue=function(f){var b;b=s(this.data,f,this.comparator),this.data.splice(b,0,f)},c.prototype.dequeue=function(){return this.data.pop()},c.prototype.peek=function(){return this.data[this.data.length-1]},c.prototype.clear=function(){this.data.length=0},c}()},{}],4:[function(t,n,a){n.exports=function(){function s(c){var f,b,g,m,l,o,u,d;for(this.comparator=(c!=null?c.comparator:void 0)||function(y,w){return y-w},this.pageSize=(c!=null?c.pageSize:void 0)||512,this.length=0,u=0;1<<u<this.pageSize;)u+=1;if(1<<u!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=u,this._emptyMemoryPageTemplate=f=[],b=0,l=this.pageSize;0<=l?b<l:b>l;0<=l?++b:--b)f.push(null);if(this._memory=[],this._mask=this.pageSize-1,c.initialValues)for(o=c.initialValues,g=0,m=o.length;g<m;g++)d=o[g],this.queue(d)}return s.prototype.queue=function(c){this.length+=1,this._write(this.length,c),this._bubbleUp(this.length,c)},s.prototype.dequeue=function(){var c,f;return c=this._read(1),f=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,f),this._bubbleDown(1,f)),c},s.prototype.peek=function(){return this._read(1)},s.prototype.clear=function(){this.length=0,this._memory.length=0},s.prototype._write=function(c,f){var b;for(b=c>>this._shift;b>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[b][c&this._mask]=f},s.prototype._read=function(c){return this._memory[c>>this._shift][c&this._mask]},s.prototype._bubbleUp=function(c,f){var b,g,m,l;for(b=this.comparator;c>1&&(g=c&this._mask,c<this.pageSize||g>3?m=c&~this._mask|g>>1:g<2?(m=c-this.pageSize>>this._shift,m+=m&~(this._mask>>1),m|=this.pageSize>>1):m=c-2,l=this._read(m),!(b(l,f)<0));)this._write(m,f),this._write(c,l),c=m},s.prototype._bubbleDown=function(c,f){var b,g,m,l,o;for(o=this.comparator;c<this.length;)if(c>this._mask&&!(c&this._mask-1)?b=g=c+2:c&this.pageSize>>1?(b=(c&~this._mask)>>1,b|=c&this._mask>>1,b=b+1<<this._shift,g=b+1):(b=c+(c&this._mask),g=b+1),b!==g&&g<=this.length)if(m=this._read(b),l=this._read(g),o(m,f)<0&&o(m,l)<=0)this._write(b,f),this._write(c,m),c=b;else if(o(l,f)<0)this._write(g,f),this._write(c,l),c=g;else break;else if(b<=this.length)if(m=this._read(b),o(m,f)<0)this._write(b,f),this._write(c,m),c=b;else break;else break},s}()},{}],5:[function(t,n,a){n.exports=function(){function s(c){var f;this.comparator=(c!=null?c.comparator:void 0)||function(b,g){return b-g},this.length=0,this.data=((f=c.initialValues)!=null?f.slice(0):void 0)||[],this._heapify()}return s.prototype._heapify=function(){var c,f,b;if(this.data.length>0)for(c=f=1,b=this.data.length;1<=b?f<b:f>b;c=1<=b?++f:--f)this._bubbleUp(c)},s.prototype.queue=function(c){this.data.push(c),this._bubbleUp(this.data.length-1)},s.prototype.dequeue=function(){var c,f;return f=this.data[0],c=this.data.pop(),this.data.length>0&&(this.data[0]=c,this._bubbleDown(0)),f},s.prototype.peek=function(){return this.data[0]},s.prototype.clear=function(){this.length=0,this.data.length=0},s.prototype._bubbleUp=function(c){for(var f,b;c>0&&(f=c-1>>>1,this.comparator(this.data[c],this.data[f])<0);)b=this.data[f],this.data[f]=this.data[c],this.data[c]=b,c=f},s.prototype._bubbleDown=function(c){var f,b,g,m,l;for(f=this.data.length-1;b=(c<<1)+1,m=b+1,g=c,b<=f&&this.comparator(this.data[b],this.data[g])<0&&(g=b),m<=f&&this.comparator(this.data[m],this.data[g])<0&&(g=m),g!==c;)l=this.data[g],this.data[g]=this.data[c],this.data[c]=l,c=g},s}()},{}]},{},[1])(1)})})(priorityQueue);var priorityQueueExports=priorityQueue.exports;const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(r={}){let{points:e,mask:t,image:n,fillMaxValue:a=this.maxValue,invert:s=!1}=r,c=n||this;c.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),s=!s,e||(e=c.getLocalMaxima({invert:s,mask:t}));let f=s?0:1,b=new Int16Array(c.size),g=c.width,m=c.height,l=new PriorityQueue({comparator:(o,u)=>o[2]-u[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let o=0;o<e.length;o++){let u=e[o][0]+e[o][1]*g;b[u]=o+1;let d=c.data[u];(s&&d<=a||!s&&d>=a)&&l.queue([e[o][0],e[o][1],d])}for(;l.length>0;){let o=l.dequeue(),u=o[0]+o[1]*g;for(let d=0;d<4;d++){let y=o[0]+dxs[d],w=o[1]+dys[d];if(y>=0&&w>=0&&y<g&&w<m){let _=y+w*g;if(!t||t.getBit(_)===f){let T=c.data[_];(s&&T<=a||!s&&T>=a)&&b[_]===0&&(b[_]=b[u],l.queue([o[0]+dxs[d],o[1]+dys[d],T]))}}}}return new RoiMap(c,b)}class RoiManager{constructor(e,t={}){this._image=e,this._options=t,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(e={}){let t=Object.assign({},this._options,e),n=fromMaxima.call(this._image,e);this._layers[t.label]=new RoiLayer(n,t)}fromPoints(e,t={}){let n=Object.assign({},this._options,t),a=fromPoints.call(this._image,e,t);return this._layers[n.label]=new RoiLayer(a,n),this}putMap(e,t={}){let n=new RoiMap(this._image,e),a=Object.assign({},this._options,t);return this._layers[a.label]=new RoiLayer(n,a),this}fromWaterShed(e={}){let t=Object.assign({},this._options,e),n=fromWaterShed.call(this._image,e);this._layers[t.label]=new RoiLayer(n,t)}fromMask(e,t={}){let n=Object.assign({},this._options,t),a=fromMask.call(this._image,e,t);return this._layers[n.label]=new RoiLayer(a,n),this}fromMaskConnectedComponentLabelingAlgorithm(e,t={}){let n=Object.assign({},this._options,t),a=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,e,t);return this._layers[n.label]=new RoiLayer(a,n),this}getMap(e={}){let t=Object.assign({},this._options,e);return this._assertLayerWithLabel(t.label),this._layers[t.label].roiMap}rowsInfo(e={}){return this.getMap(e).rowsInfo()}colsInfo(e={}){return this.getMap(e).rowsInfo()}getRoiIds(e={}){let t=this.getRois(e);if(t){let n=new Array(t.length);for(let a=0;a<t.length;a++)n[a]=t[a].id;return n}throw new Error("ROIs not found")}getRois(e={}){let{label:t=this._options.label,positive:n=!0,negative:a=!0,minSurface:s=0,maxSurface:c=Number.POSITIVE_INFINITY,minWidth:f=0,maxWidth:b=Number.POSITIVE_INFINITY,minHeight:g=0,maxHeight:m=Number.POSITIVE_INFINITY,minRatio:l=0,maxRatio:o=Number.POSITIVE_INFINITY}=e;if(!this._layers[t])throw new Error(`this Roi layer (${t}) does not exist`);const u=this._layers[t].roi,d=[];for(const y of u)(y.id<0&&a||y.id>0&&n)&&y.surface>=s&&y.surface<=c&&y.width>=f&&y.width<=b&&y.height>=g&&y.height<=m&&y.ratio>=l&&y.ratio<=o&&d.push(y);return d}getRoi(e,t={}){const{label:n=this._options.label}=t;if(!this._layers[n])throw new Error(`this Roi layer (${n}) does not exist`);const a=this._layers[n].roi.find(s=>s.id===e);if(!a)throw new Error(`found no Roi with id ${e}`);return a}getMasks(e={}){let t=this.getRois(e),n=new Array(t.length);for(let a=0;a<t.length;a++)n[a]=t[a].getMask(e);return n}getAnalysisMasks(e={}){const{analysisProperty:t}=e;let n=`${t}Mask`,a=this.getRois(e);return a.length===0||!a[0][n]?[]:a.map(s=>s[n])}getData(e={}){let t=Object.assign({},this._options,e);return this._assertLayerWithLabel(t.label),this._layers[t.label].roiMap.data}paint(e={}){let{labelProperty:t,analysisProperty:n}=e;this._painted||(this._painted=this._image.rgba8());let a=this.getMasks(e);if(t){const s=this.getRois(e);e.labels=s.map(g=>deepValue(g,t));const c=Math.max(...e.labels);let f=!1,b=!1;if(t.includes("surface")?f=!0:/(?:perimeter|min|max|external|width|height|length)/.test(t)&&(b=!0),isFinite(c)){let g="";if(e.unit!=="pixel"&&e.pixelSize&&(b||f)){g=f?`${e.unit}^2`:e.unit;let m=f?"m^2":"m",l=f?e.pixelSize**2:e.pixelSize;const o=Qty.swiftConverter(m,g);e.labels=e.labels.map(u=>o(l*u))}c>50?e.labels=e.labels.map(m=>Math.round(m)+g):c>10?e.labels=e.labels.map(m=>m.toFixed(1)+g):e.labels=e.labels.map(m=>m.toFixed(2)+g)}e.labelsPosition=s.map(g=>[g.meanX,g.meanY])}if(this._painted.paintMasks(a,e),n){let s=this.getAnalysisMasks(e);this._painted.paintMasks(s,{color:e.analysisColor,alpha:e.analysisAlpha})}return this._painted}getMask(e={}){let t=new Image$1(this._image.width,this._image.height,{kind:"BINARY"}),n=this.getMasks(e);for(let a=0;a<n.length;a++){let s=n[a];for(let c=0;c<s.width;c++)for(let f=0;f<s.height;f++)s.getBitXY(c,f)&&t.setBitXY(c+s.position[0],f+s.position[1])}return t}resetPainted(e={}){const{image:t}=e;t?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(e={}){const t=this.getMap(e);return t.mergeRoi(e),this.putMap(t.data,e),this}mergeRois(e,t={}){if(!Array.isArray(e)||e.some(a=>!Number.isInteger(a)))throw new Error("Roi ids must be an array of integers");if(e.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(e).size!==e.length)throw new Error("Roi ids must be all different");e.forEach(a=>this.getRoi(a));const n=this.getMap(t);return n.mergeRois(e),this.putMap(n.data,t),this}findCorrespondingRoi(e,t={}){let n=this.getRois(t),a=[];for(let s=0;s<n.length;s++){let c=n[s],f=c.minX,b=c.minY,g=c.points,m=Math.sign(c.id),l=correspondingRoisInformation(f,b,g,e,m);a.push(l)}return a}_assertLayerWithLabel(e){if(!this._layers[e])throw new Error(`no layer with label ${e}`)}}function correspondingRoisInformation(r,e,t,n,a){let s={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let c=0;c<t.length;c++){let f=t[c],b=f[0],g=f[1],m=b+r+(g+e)*n.width,l=n.data[m];(l>0||l<0)&&(s.id.includes(l)?s.surface[s.id.indexOf(l)]+=1:(s.id.push(l),s.surface.push(1)))}for(let c=0;c<s.id.length;c++)Math.sign(s.id[c])===a?s.same+=s.surface[c]:s.opposite+=s.surface[c],s.roiSurfaceCovered[c]=s.surface[c]/t.length;return s.total=s.opposite+s.same,s}const objectToString=Object.prototype.toString;let Image$1=class ao{constructor(e,t,n,a){if(arguments.length===1?(a=e,{width:e,height:t,data:n}=a):n&&!n.length&&(a=n,{data:n}=a),e===void 0&&(e=1),t===void 0&&(t=1),a===void 0&&(a={}),typeof a!="object"||a===null)throw new TypeError("options must be an object");if(!Number.isInteger(e)||e<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(t)||t<=0)throw new RangeError("height must be a positive integer");const{kind:s=RGBA}=a;if(typeof s!="string")throw new TypeError("kind must be a string");const c=getKind(s),f=Object.assign({},a);for(const y in c)f[y]===void 0&&(f[y]=c[y]);verifyKindDefinition(f);const{components:b,bitDepth:g,colorModel:m}=f,l=f.alpha+0,o=e*t,u=b+l,d=g===32?Number.MAX_VALUE:2**g-1;if(n===void 0)n=createPixelArray(o,b,l,u,g,d);else{const y=getTheoreticalPixelArraySize(o,u,g);if(n.length!==y)throw new RangeError(`incorrect data size: ${n.length}. Should be ${y}`)}this.width=e,this.height=t,this.data=n,this.size=o,this.components=b,this.alpha=l,this.bitDepth=g,this.maxValue=d,this.colorModel=m,this.channels=u,this.meta=a.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:a.parent||null}),this.position=a.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(e){return objectToString.call(e)==="[object IJSImage]"}static fromCanvas(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return new ao(n.width,n.height,n.data)}static createFrom(e,t){const n=getImageParameters(e);return Object.assign(n,{parent:e,position:[0,0]},t),new ao(n)}getRoiManager(e){return new RoiManager(this,e)}clone(){const e=this.data.slice();return new ao(this.width,this.height,e,this)}apply(e){for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++){let a=(t*this.width+n)*this.channels;e.call(this,a)}}};setValueMethods(Image$1);setBitMethods(Image$1);setExportMethods(Image$1);Image$1.prototype.checkProcessable=checkProcessable;Image$1.prototype.getRGBAData=getRGBAData;Image$1.load=load;Image$1.extendMethod=extendMethod;Image$1.extendProperty=extendProperty;extend$1(Image$1);var workerTemplate$1={},worker$1=function(){self.window=self;function r(){this._listeners={}}r.prototype.on=function(t,n){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if(typeof n!="function")throw new TypeError("callback argument must be a function");this._listeners[t]=n},r.prototype._send=function(t,n,a){a===void 0?a=[]:Array.isArray(a)||(a=[a]),self.postMessage({id:t,data:n},a)},r.prototype._trigger=function(t,n){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,n)};var e=new r;self.onmessage=function(t){switch(t.data.action){case"exec":t.data.args.unshift(function(n,a){e._send(t.data.id,n,a)}),e._trigger(t.data.event,t.data.args);break;case"ping":e._send(t.data.id,"pong");break;default:throw new Error("unexpected action: "+t.data.action)}}},workerStr=worker$1.toString().split('"CODE";');workerTemplate$1.newWorkerURL=function r(e,t){var n=new Blob(["(",workerStr[0],"importScripts.apply(self, "+JSON.stringify(t)+`);
`,"(",e,")();",workerStr[1],")();"],{type:"application/javascript"});return URL.createObjectURL(n)};var workerTemplate=workerTemplate$1,CORES=navigator.hardwareConcurrency||1;function WorkerManager(r,e){if(typeof r!="string"&&typeof r!="function")throw new TypeError("func argument must be a function");if(e===void 0&&(e={}),typeof e!="object"||e===null)throw new TypeError("options argument must be an object");this._workerCode=r.toString(),e.maxWorkers===void 0||e.maxWorkers==="auto"?this._numWorkers=Math.min(CORES-1,1):e.maxWorkers>0?this._numWorkers=Math.min(e.maxWorkers,CORES):this._numWorkers=CORES,this._workers=new Map,this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var t=e.deps;typeof t=="string"&&(t=[t]),Array.isArray(t)||(t=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(t)}WorkerManager.prototype._init=function(r){for(var e=workerTemplate.newWorkerURL(this._workerCode,r),t=0;t<this._numWorkers;t++){var n=new Worker(e);n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,n.id=t,this._workers.set(n,null)}URL.revokeObjectURL(e)};WorkerManager.prototype._onerror=function(r,e){if(!this._terminated){this._working--,r.running=!1;var t=this._workers.get(r);t&&t[1](e.message),this._workers.set(r,null),this._terminateOnError?this.terminate():this._exec()}};WorkerManager.prototype._onmessage=function(r,e){if(!this._terminated){this._working--,r.running=!1;var t=this._workers.get(r);t&&t[0](e.data.data),this._workers.set(r,null),this._exec()}};WorkerManager.prototype._exec=function(){for(var r of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!r.running)for(var e=0;e<this._waiting.length;e++){var t=this._waiting[e];if(!(typeof t[4]=="number"&&t[4]!==r.id)){this._waiting.splice(e,1),r.postMessage({action:"exec",event:t[0],args:t[1]},t[2]),r.running=!0,r.time=Date.now(),this._workers.set(r,t[3]),this._working++;break}}}};WorkerManager.prototype.terminate=function(){if(!this._terminated){for(var r of this._workers)r[0].terminate(),r[1]&&r[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}};WorkerManager.prototype.postAll=function(r,e){if(this._terminated)throw new Error("Cannot post (terminated)");var t=[];for(var n of this._workers.keys())t.push(this.post(r,e,[],n.id));return Promise.all(t)};WorkerManager.prototype.post=function(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var a=this;return new Promise(function(s,c){if(a._terminated)throw new Error("Cannot post (terminated)");a._waiting.push([r,e,t,[s,c],n]),a._exec()})};var src=WorkerManager;const WorkerManager$1=getDefaultExportFromCjs(src),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(r,e,t){e=Object.assign({},defaultOptions,e);const n=this.manager;return Array.isArray(r)?Promise.all(r.map(function(a){const s=runOnce(n,a,e);return typeof t=="function"&&s.then(t),s})):runOnce(n,r,e)}function runOnce(r,e,t){return r.post("data",[e,t]).then(function(n){for(let a in n)n[a]=new Image$1(n[a]);return n})}function work(){worker.on("data",function(r,e,t){e=new IJS(e);const n={},a=[],s=e.grey(),c=s.sobelFilter();u("sobel",c);const f=c.level().mask({threshold:t.threshold});u("mask",f);const b=c.getRoiManager();b.fromMask(f);const g=b.getMask(t.roi);u("realMask",g);const m=s.getPixelsGrid({sampling:t.sampling,mask:g}),l=e.getBackground(m.xyS,m.zS,t.regression);u("background",l);const o=e.subtract(l);n.result=o,a.push(o.data.buffer),r(n,a);function u(d,y){t.include.includes(d)&&(n[d]=y,a.push(y.data.buffer))}})}const background={run,work};function extend(r){r.extendMethod("background",background)}let Worker$1=class Sl{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(e){if(typeof e!="string")throw new TypeError("worker URL must be a string");this._url=e,this._deps[0]=e}static extendMethod(e,t){let n,a,s={};function c(...f){return n||(this.checkUrl(),a=this.url,n=new WorkerManager$1(t.work,{deps:a}),s.manager=n),t.run.call(s,...f)}c.reset=function(){n&&(n.terminate(),n=new WorkerManager$1(t.work,{deps:a}),s.manager=n)},Sl.prototype[e]=c}};extend(Worker$1);var rgbquant={exports:{}};(function(r){(function(){function e(O){if(O=O||{},this.method=O.method||2,this.colors=O.colors||256,this.initColors=O.initColors||4096,this.initDist=O.initDist||.01,this.distIncr=O.distIncr||.005,this.hueGroups=O.hueGroups||10,this.satGroups=O.satGroups||10,this.lumGroups=O.lumGroups||10,this.minHueCols=O.minHueCols||0,this.hueStats=this.minHueCols?new t(this.hueGroups,this.minHueCols):null,this.boxSize=O.boxSize||[64,64],this.boxPxls=O.boxPxls||2,this.palLocked=!1,this.dithKern=O.dithKern||null,this.dithSerp=O.dithSerp||!1,this.dithDelta=O.dithDelta||0,this.histogram={},this.idxrgb=O.palette?O.palette.slice(0):[],this.idxi32=[],this.i32idx={},this.i32rgb={},this.useCache=O.useCache!==!1,this.cacheFreq=O.cacheFreq||10,this.reIndex=O.reIndex||this.idxrgb.length==0,this.colorDist=O.colorDist=="manhattan"?u:l,this.idxrgb.length>0){var D=this;this.idxrgb.forEach(function(R,C){var U=(-16777216|R[2]<<16|R[1]<<8|R[0])>>>0;D.idxi32[C]=U,D.i32idx[U]=C,D.i32rgb[U]=R})}}e.prototype.sample=function(D,R){if(this.palLocked)throw"Cannot sample additional images, palette already assembled.";var C=P(D,R);switch(this.method){case 1:this.colorStats1D(C.buf32);break;case 2:this.colorStats2D(C.buf32,C.width);break}},e.prototype.reduce=function(D,R,C,U){if(this.palLocked||this.buildPal(),C=C||this.dithKern,U=typeof U<"u"?U:this.dithSerp,R=R||1,C)var N=this.dither(D,C,U);else for(var V=P(D),j=V.buf32,K=j.length,N=new Uint32Array(K),ee=0;ee<K;ee++){var he=j[ee];N[ee]=this.nearestColor(he)}if(R==1)return new Uint8Array(N.buffer);if(R==2){for(var ge=[],K=N.length,ee=0;ee<K;ee++){var he=N[ee];ge[ee]=this.i32idx[he]}return ge}},e.prototype.dither=function(O,D,R){var C={FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]],Jarvis:[[.14583333333333334,1,0],[.10416666666666667,2,0],[.0625,-2,1],[.10416666666666667,-1,1],[.14583333333333334,0,1],[.10416666666666667,1,1],[.0625,2,1],[.020833333333333332,-2,2],[.0625,-1,2],[.10416666666666667,0,2],[.0625,1,2],[.020833333333333332,2,2]],Burkes:[[.25,1,0],[.125,2,0],[.0625,-2,1],[.125,-1,1],[.25,0,1],[.125,1,1],[.0625,2,1]],Sierra:[[.15625,1,0],[.09375,2,0],[.0625,-2,1],[.125,-1,1],[.15625,0,1],[.125,1,1],[.0625,2,1],[.0625,-1,2],[.09375,0,2],[.0625,1,2]],TwoSierra:[[.25,1,0],[.1875,2,0],[.0625,-2,1],[.125,-1,1],[.1875,0,1],[.125,1,1],[.0625,2,1]],SierraLite:[[.5,1,0],[.25,-1,1],[.25,0,1]]};if(!D||!C[D])throw"Unknown dithering kernel: "+D;var U=C[D],N=P(O),V=N.buf32,j=N.width,K=N.height;V.length;for(var ee=R?-1:1,he=0;he<K;he++){R&&(ee=ee*-1);for(var ge=he*j,Se=ee==1?0:j-1,we=ee==1?j:0;Se!==we;Se+=ee){var ne=ge+Se,re=V[ne],oe=re&255,Ee=(re&65280)>>8,Re=(re&16711680)>>16,De=this.nearestColor(re),He=De&255,qe=(De&65280)>>8,W=(De&16711680)>>16;if(V[ne]=255<<24|W<<16|qe<<8|He,this.dithDelta){var X=this.colorDist([oe,Ee,Re],[He,qe,W]);if(X<this.dithDelta)continue}for(var te=oe-He,ie=Ee-qe,ye=Re-W,be=ee==1?0:U.length-1,Ae=ee==1?U.length:0;be!==Ae;be+=ee){var J=U[be][1]*ee,ve=U[be][2],de=ve*j;if(J+Se>=0&&J+Se<j&&ve+he>=0&&ve+he<K){var Oe=U[be][0],fe=ne+(de+J),Ue=V[fe]&255,Ze=(V[fe]&65280)>>8,$e=(V[fe]&16711680)>>16,Le=Math.max(0,Math.min(255,Ue+te*Oe)),Ge=Math.max(0,Math.min(255,Ze+ie*Oe)),ze=Math.max(0,Math.min(255,$e+ye*Oe));V[fe]=255<<24|ze<<16|Ge<<8|Le}}}}return V},e.prototype.buildPal=function(D){if(!(this.palLocked||this.idxrgb.length>0&&this.idxrgb.length<=this.colors)){var R=this.histogram,C=F(R,!0);if(C.length==0)throw"Nothing has been sampled, palette cannot be built.";switch(this.method){case 1:for(var U=this.initColors,N=C[U-1],V=R[N],ee=C.slice(0,U),j=U,K=C.length;j<K&&R[C[j]]==V;)ee.push(C[j++]);this.hueStats&&this.hueStats.inject(ee);break;case 2:var ee=C;break}ee=ee.map(function(he){return+he}),this.reducePal(ee),!D&&this.reIndex&&this.sortPal(),this.useCache&&this.cacheHistogram(ee),this.palLocked=!0}},e.prototype.palette=function(D,R){return this.buildPal(R),D?this.idxrgb:new Uint8Array(new Uint32Array(this.idxi32).buffer)},e.prototype.prunePal=function(D){for(var R,C=0;C<this.idxrgb.length;C++)D[C]||(R=this.idxi32[C],this.idxrgb[C]=null,this.idxi32[C]=null,delete this.i32idx[R]);if(this.reIndex){for(var U=[],N=[],V={},C=0,j=0;C<this.idxrgb.length;C++)this.idxrgb[C]&&(R=this.idxi32[C],U[j]=this.idxrgb[C],V[R]=j,N[j]=R,j++);this.idxrgb=U,this.idxi32=N,this.i32idx=V}},e.prototype.reducePal=function(D){if(this.idxrgb.length>this.colors){for(var R=D.length,C={},U=0,N,V=!1,j=0;j<R;j++)U==this.colors&&!V&&(this.prunePal(C),V=!0),N=this.nearestIndex(D[j]),U<this.colors&&!C[N]&&(C[N]=!0,U++);V||(this.prunePal(C),V=!0)}else{var K=D.map(function(De){return[De&255,(De&65280)>>8,(De&16711680)>>16]}),R=K.length,ee=R,he=this.initDist;if(ee>this.colors){for(;ee>this.colors;){for(var ge=[],j=0;j<R;j++){var Se=K[j];if(D[j],!!Se)for(var we=j+1;we<R;we++){var ne=K[we],re=D[we];if(ne){var oe=this.colorDist(Se,ne);oe<he&&(ge.push([we,ne,re,oe]),delete K[we],ee--)}}}he+=ee>this.colors*3?this.initDist:this.distIncr}if(ee<this.colors){S.call(ge,function(De,He){return He[3]-De[3]});for(var Ee=0;ee<this.colors;)K[ge[Ee][0]]=ge[Ee][1],ee++,Ee++}}for(var R=K.length,j=0;j<R;j++)K[j]&&(this.idxrgb.push(K[j]),this.idxi32.push(D[j]),this.i32idx[D[j]]=this.idxi32.length-1,this.i32rgb[D[j]]=K[j])}},e.prototype.colorStats1D=function(D){for(var R=this.histogram,C,U=D.length,N=0;N<U;N++)C=D[N],(C&4278190080)>>24&&(this.hueStats&&this.hueStats.check(C),C in R?R[C]++:R[C]=1)},e.prototype.colorStats2D=function(D,R){var C=this.boxSize[0],U=this.boxSize[1],N=C*U,V=k(R,D.length/R,C,U),j=this.histogram,K=this;V.forEach(function(ee){var he=Math.max(Math.round(ee.w*ee.h/N)*K.boxPxls,2),ge={},Se;M(ee,R,function(we){Se=D[we],(Se&4278190080)>>24&&(K.hueStats&&K.hueStats.check(Se),Se in j?j[Se]++:Se in ge?++ge[Se]>=he&&(j[Se]=ge[Se]):ge[Se]=1)})}),this.hueStats&&this.hueStats.inject(j)},e.prototype.sortPal=function(){var D=this;this.idxi32.sort(function(R,C){var U=D.i32idx[R],N=D.i32idx[C],V=D.idxrgb[U],j=D.idxrgb[N],K=d(V[0],V[1],V[2]),ee=d(j[0],j[1],j[2]),he=V[0]==V[1]&&V[1]==V[2]?-1:y(K.h,D.hueGroups),ge=j[0]==j[1]&&j[1]==j[2]?-1:y(ee.h,D.hueGroups),Se=ge-he;if(Se)return-Se;var we=+ee.l.toFixed(2)-+K.l.toFixed(2);if(we)return-we;var ne=+ee.s.toFixed(2)-+K.s.toFixed(2);if(ne)return-ne}),this.idxi32.forEach(function(R,C){D.idxrgb[C]=D.i32rgb[R],D.i32idx[R]=C})},e.prototype.nearestColor=function(D){var R=this.nearestIndex(D);return R===null?0:this.idxi32[R]},e.prototype.nearestIndex=function(D){if(!((D&4278190080)>>24))return null;if(this.useCache&&""+D in this.i32idx)return this.i32idx[D];for(var R=1e3,C,U=[D&255,(D&65280)>>8,(D&16711680)>>16],N=this.idxrgb.length,V=0;V<N;V++)if(this.idxrgb[V]){var j=this.colorDist(U,this.idxrgb[V]);j<R&&(R=j,C=V)}return C},e.prototype.cacheHistogram=function(D){for(var R=0,C=D[R];R<D.length&&this.histogram[C]>=this.cacheFreq;C=D[R++])this.i32idx[C]=this.nearestIndex(C)};function t(O,D){this.numGroups=O,this.minCols=D,this.stats={};for(var R=-1;R<O;R++)this.stats[R]={num:0,cols:[]};this.groupsFull=0}t.prototype.check=function(D){this.groupsFull==this.numGroups+1&&(this.check=function(){});var R=D&255,C=(D&65280)>>8,U=(D&16711680)>>16,N=R==C&&C==U?-1:y(d(R,C,U).h,this.numGroups),V=this.stats[N],j=this.minCols;V.num++,!(V.num>j)&&(V.num==j&&this.groupsFull++,V.num<=j&&this.stats[N].cols.push(D))},t.prototype.inject=function(D){for(var R=-1;R<this.numGroups;R++)if(this.stats[R].num<=this.minCols)switch(T(D)){case"Array":this.stats[R].cols.forEach(function(C){D.indexOf(C)==-1&&D.push(C)});break;case"Object":this.stats[R].cols.forEach(function(C){D[C]?D[C]++:D[C]=1});break}};var n=.2126,a=.7152,s=.0722;function c(O,D,R){return Math.sqrt(n*O*O+a*D*D+s*R*R)}var f=255,b=255,g=255,m=Math.sqrt(n*f*f+a*b*b+s*g*g);function l(O,D){var R=D[0]-O[0],C=D[1]-O[1],U=D[2]-O[2];return Math.sqrt(n*R*R+a*C*C+s*U*U)/m}var o=n*f+a*b+s*g;function u(O,D){var R=Math.abs(D[0]-O[0]),C=Math.abs(D[1]-O[1]),U=Math.abs(D[2]-O[2]);return(n*R+a*C+s*U)/o}function d(O,D,R){var C,U,N,V,j,K;if(O/=255,D/=255,R/=255,C=Math.max(O,D,R),U=Math.min(O,D,R),j=(C+U)/2,C==U)N=V=0;else{switch(K=C-U,V=j>.5?K/(2-C-U):K/(C+U),C){case O:N=(D-R)/K+(D<R?6:0);break;case D:N=(R-O)/K+2;break;case R:N=(O-D)/K+4;break}N/=6}return{h:N,s:V,l:c(O,D,R)}}function y(O,D){var R=1/D,C=R/2;if(O>=1-C||O<=C)return 0;for(var U=1;U<D;U++){var N=U*R;if(O>=N-C&&O<=N+C)return U}}function w(O){return O}function _(O){return O}function T(O){return Object.prototype.toString.call(O).slice(8,-1)}var S=A()?Array.prototype.sort:E;function E(O){var D=T(this[0]);if(D=="Number"||D=="String"){for(var R={},C=this.length,U,N=0;N<C;N++)U=this[N],!(R[U]||R[U]===0)&&(R[U]=N);return this.sort(function(V,j){return O(V,j)||R[V]-R[j]})}else{var R=this.map(function(j){return j});return this.sort(function(j,K){return O(j,K)||R.indexOf(j)-R.indexOf(K)})}}function A(){var O="abcdefghijklmnopqrstuvwxyz";return O.split("").sort(function(D,R){return~~(O.indexOf(R)/2.3)-~~(O.indexOf(D)/2.3)}).join("")=="xyzvwtursopqmnklhijfgdeabc"}function P(O,D){var R,C,U,N,V,j;switch(T(O)){case"HTMLImageElement":R=document.createElement("canvas"),R.width=O.naturalWidth,R.height=O.naturalHeight,C=R.getContext("2d"),C.drawImage(O,0,0);case"Canvas":case"HTMLCanvasElement":R=R||O,C=C||R.getContext("2d");case"CanvasRenderingContext2D":C=C||O,R=R||C.canvas,U=C.getImageData(0,0,R.width,R.height);case"ImageData":U=U||O,D=U.width,T(U.data)=="CanvasPixelArray"?N=new Uint8Array(U.data):N=U.data;case"Array":case"CanvasPixelArray":N=N||new Uint8Array(O);case"Uint8Array":case"Uint8ClampedArray":N=N||O,V=new Uint32Array(N.buffer);case"Uint32Array":V=V||O,N=N||new Uint8Array(V.buffer),D=D||V.length,j=V.length/D}return{can:R,ctx:C,imgd:U,buf8:N,buf32:V,width:D,height:j}}function k(O,D,R,C){for(var U=O%R,N=D%C,V=O-U,j=D-N,K=[],ee=0;ee<D;ee+=C)for(var he=0;he<O;he+=R)K.push({x:he,y:ee,w:he==V?U:R,h:ee==j?N:C});return K}function M(O,D,R){var C=O,U=C.y*D+C.x,N=(C.y+C.h-1)*D+(C.x+C.w-1),V=0,j=D-C.w+1,K=U;do R.call(this,K),K+=++V%C.w==0?j:1;while(K<=N)}function F(O,D){var R=[];for(var C in O)R.push(C);return S.call(R,function(U,N){return D?O[N]-O[U]:O[U]-O[N]})}this.RgbQuant=e,r.exports&&(r.exports=e)}).call(commonjsGlobal)})(rgbquant);function iota$1(r){for(var e=new Array(r),t=0;t<r;++t)e[t]=t;return e}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(r){return r!=null&&(isBuffer$1(r)||isSlowBuffer(r)||!!r._isBuffer)};function isBuffer$1(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function isSlowBuffer(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&isBuffer$1(r.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(r,e){return r[0]-e[0]}function order(){var r=this.stride,e=new Array(r.length),t;for(t=0;t<e.length;++t)e[t]=[Math.abs(r[t]),t];e.sort(compare1st);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function compileConstructor(r,e){var t=["View",e,"d",r].join("");e<0&&(t="View_Nil"+r);var n=r==="generic";if(e===-1){var a="function "+t+"(a){this.data=a;};var proto="+t+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+t+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+t+"(a){return new "+t+"(a);}",y=new Function(a);return y()}else if(e===0){var a="function "+t+"(a,d) {this.data = a;this.offset = d};var proto="+t+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+t+"_copy() {return new "+t+"(this.data,this.offset)};proto.pick=function "+t+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+t+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+t+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+t+"(a,b,c,d){return new "+t+"(a,d)}",y=new Function("TrivialArray",a);return y(CACHED_CONSTRUCTORS[r][0])}var a=["'use strict'"],s=iota(e),c=s.map(function(w){return"i"+w}),f="this.offset+"+s.map(function(w){return"this.stride["+w+"]*i"+w}).join("+"),b=s.map(function(w){return"b"+w}).join(","),g=s.map(function(w){return"c"+w}).join(",");a.push("function "+t+"(a,"+b+","+g+",d){this.data=a","this.shape=["+b+"]","this.stride=["+g+"]","this.offset=d|0}","var proto="+t+".prototype","proto.dtype='"+r+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+t+"_size(){return "+s.map(function(w){return"this.shape["+w+"]"}).join("*"),"}})"),e===1?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+t+"_order(){"),e===2?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+t+"_set("+c.join(",")+",v){"),n?a.push("return this.data.set("+f+",v)}"):a.push("return this.data["+f+"]=v}"),a.push("proto.get=function "+t+"_get("+c.join(",")+"){"),n?a.push("return this.data.get("+f+")}"):a.push("return this.data["+f+"]}"),a.push("proto.index=function "+t+"_index(",c.join(),"){return "+f+"}"),a.push("proto.hi=function "+t+"_hi("+c.join(",")+"){return new "+t+"(this.data,"+s.map(function(w){return["(typeof i",w,"!=='number'||i",w,"<0)?this.shape[",w,"]:i",w,"|0"].join("")}).join(",")+","+s.map(function(w){return"this.stride["+w+"]"}).join(",")+",this.offset)}");var m=s.map(function(w){return"a"+w+"=this.shape["+w+"]"}),l=s.map(function(w){return"c"+w+"=this.stride["+w+"]"});a.push("proto.lo=function "+t+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+m.join(",")+","+l.join(","));for(var o=0;o<e;++o)a.push("if(typeof i"+o+"==='number'&&i"+o+">=0){d=i"+o+"|0;b+=c"+o+"*d;a"+o+"-=d}");a.push("return new "+t+"(this.data,"+s.map(function(w){return"a"+w}).join(",")+","+s.map(function(w){return"c"+w}).join(",")+",b)}"),a.push("proto.step=function "+t+"_step("+c.join(",")+"){var "+s.map(function(w){return"a"+w+"=this.shape["+w+"]"}).join(",")+","+s.map(function(w){return"b"+w+"=this.stride["+w+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var o=0;o<e;++o)a.push("if(typeof i"+o+"==='number'){d=i"+o+"|0;if(d<0){c+=b"+o+"*(a"+o+"-1);a"+o+"=ceil(-a"+o+"/d)}else{a"+o+"=ceil(a"+o+"/d)}b"+o+"*=d}");a.push("return new "+t+"(this.data,"+s.map(function(w){return"a"+w}).join(",")+","+s.map(function(w){return"b"+w}).join(",")+",c)}");for(var u=new Array(e),d=new Array(e),o=0;o<e;++o)u[o]="a[i"+o+"]",d[o]="b[i"+o+"]";a.push("proto.transpose=function "+t+"_transpose("+c+"){"+c.map(function(w,_){return w+"=("+w+"===undefined?"+_+":"+w+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+t+"(this.data,"+u.join(",")+","+d.join(",")+",this.offset)}"),a.push("proto.pick=function "+t+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var o=0;o<e;++o)a.push("if(typeof i"+o+"==='number'&&i"+o+">=0){c=(c+this.stride["+o+"]*i"+o+")|0}else{a.push(this.shape["+o+"]);b.push(this.stride["+o+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+t+"(data,shape,stride,offset){return new "+t+"(data,"+s.map(function(w){return"shape["+w+"]"}).join(",")+","+s.map(function(w){return"stride["+w+"]"}).join(",")+",offset)}");var y=new Function("CTOR_LIST","ORDER",a.join(`
`));return y(CACHED_CONSTRUCTORS[r],order)}function arrayDType(r){if(isBuffer(r))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(r)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(r,e,t,n){if(r===void 0){var g=CACHED_CONSTRUCTORS.array[0];return g([])}else typeof r=="number"&&(r=[r]);e===void 0&&(e=[r.length]);var a=e.length;if(t===void 0){t=new Array(a);for(var s=a-1,c=1;s>=0;--s)t[s]=c,c*=e[s]}if(n===void 0){n=0;for(var s=0;s<a;++s)t[s]<0&&(n-=(e[s]-1)*t[s])}for(var f=arrayDType(r),b=CACHED_CONSTRUCTORS[f];b.length<=a+1;)b.push(compileConstructor(f,b.length-1));var g=b[a+1];return g(r,e,t,n)}var ndarray=wrappedNDArrayCtor;const ndarray4=getDefaultExportFromCjs(ndarray);var ort_min={exports:{}};/*!
* ONNX Runtime Web v1.16.3
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(r,e){module.exports=e()})(self,()=>(()=>{var __webpack_modules__={5716:(r,e,t)=>{e.R=void 0;const n=t(6027),a=t(1723);e.R=new class{async init(){}async createSessionHandler(s,c){const f=new n.Session(c);return await f.loadModel(s),new a.OnnxjsSessionHandler(f)}}},2818:(r,e,t)=>{e.c8=e.rX=void 0;const n=t(2235),a=t(5381),s=t(9544),c=t(6640);e.rX=()=>{if((typeof n.env.wasm.initTimeout!="number"||n.env.wasm.initTimeout<0)&&(n.env.wasm.initTimeout=0),typeof n.env.wasm.simd!="boolean"&&(n.env.wasm.simd=!0),typeof n.env.wasm.proxy!="boolean"&&(n.env.wasm.proxy=!1),typeof n.env.wasm.numThreads!="number"||!Number.isInteger(n.env.wasm.numThreads)||n.env.wasm.numThreads<=0){const f=typeof navigator>"u"?(0,a.cpus)().length:navigator.hardwareConcurrency;n.env.wasm.numThreads=Math.min(4,Math.ceil((f||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,s.initializeWebAssemblyInstance)()}async createSessionHandler(f,b){const g=new c.OnnxruntimeWebAssemblySessionHandler;return await g.loadModel(f,b),Promise.resolve(g)}}},1057:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,b,g,m){m===void 0&&(m=g);var l=Object.getOwnPropertyDescriptor(b,g);l&&!("get"in l?!b.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return b[g]}}),Object.defineProperty(f,m,l)}:function(f,b,g,m){m===void 0&&(m=g),f[m]=b[g]}),a=this&&this.__exportStar||function(f,b){for(var g in f)g==="default"||Object.prototype.hasOwnProperty.call(b,g)||n(b,f,g)};Object.defineProperty(e,"__esModule",{value:!0}),a(t(2235),e);const s=t(2235),c=t(8408);{const f=t(5716).R;(0,s.registerBackend)("webgl",f,-10)}{const f=t(2818).c8;(0,s.registerBackend)("cpu",f,10),(0,s.registerBackend)("wasm",f,10),(0,s.registerBackend)("xnnpack",f,9),(0,s.registerBackend)("webnn",f,9)}s.env.versions.web=c.version},4910:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class t{constructor(a){Object.assign(this,a)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(a=>`${this[a]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=n=>new t(n)},6874:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const n=t(5127),a=t(2446),s=t(9240),c=t(7273);var f=n.onnxruntime.experimental.fbs;class b{constructor(m){if(this._attributes=new Map,m!=null){for(const l of m)l instanceof a.onnx.AttributeProto?this._attributes.set(l.name,[b.getValue(l),b.getType(l)]):l instanceof f.Attribute&&this._attributes.set(l.name(),[b.getValue(l),b.getType(l)]);if(this._attributes.size<m.length)throw new Error("duplicated attribute names")}}set(m,l,o){this._attributes.set(m,[o,l])}delete(m){this._attributes.delete(m)}getFloat(m,l){return this.get(m,"float",l)}getInt(m,l){return this.get(m,"int",l)}getString(m,l){return this.get(m,"string",l)}getTensor(m,l){return this.get(m,"tensor",l)}getFloats(m,l){return this.get(m,"floats",l)}getInts(m,l){return this.get(m,"ints",l)}getStrings(m,l){return this.get(m,"strings",l)}getTensors(m,l){return this.get(m,"tensors",l)}get(m,l,o){const u=this._attributes.get(m);if(u===void 0){if(o!==void 0)return o;throw new Error(`required attribute not found: ${m}`)}if(u[1]!==l)throw new Error(`type mismatch: expected ${l} but got ${u[1]}`);return u[0]}static getType(m){const l=m instanceof a.onnx.AttributeProto?m.type:m.type();switch(l){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${a.onnx.AttributeProto.AttributeType[l]}`)}}static getValue(m){const l=m instanceof a.onnx.AttributeProto?m.type:m.type();if(l===a.onnx.AttributeProto.AttributeType.GRAPH||l===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const o=this.getValueNoCheck(m);if(l===a.onnx.AttributeProto.AttributeType.INT&&c.LongUtil.isLong(o))return c.LongUtil.longToNumber(o);if(l===a.onnx.AttributeProto.AttributeType.INTS){const u=o,d=new Array(u.length);for(let y=0;y<u.length;y++){const w=u[y];d[y]=c.LongUtil.longToNumber(w)}return d}if(l===a.onnx.AttributeProto.AttributeType.TENSOR)return m instanceof a.onnx.AttributeProto?s.Tensor.fromProto(o):s.Tensor.fromOrtTensor(o);if(l===a.onnx.AttributeProto.AttributeType.TENSORS){if(m instanceof a.onnx.AttributeProto)return o.map(u=>s.Tensor.fromProto(u));if(m instanceof f.Attribute)return o.map(u=>s.Tensor.fromOrtTensor(u))}if(l===a.onnx.AttributeProto.AttributeType.STRING&&m instanceof a.onnx.AttributeProto){const u=o;return(0,c.decodeUtf8String)(u)}return l===a.onnx.AttributeProto.AttributeType.STRINGS&&m instanceof a.onnx.AttributeProto?o.map(c.decodeUtf8String):o}static getValueNoCheck(m){return m instanceof a.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(m):this.getValueNoCheckFromOrtFormat(m)}static getValueNoCheckFromOnnxFormat(m){switch(m.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return m.f;case a.onnx.AttributeProto.AttributeType.INT:return m.i;case a.onnx.AttributeProto.AttributeType.STRING:return m.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return m.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return m.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return m.floats;case a.onnx.AttributeProto.AttributeType.INTS:return m.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return m.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return m.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return m.graphs;default:throw new Error(`unsupported attribute type: ${a.onnx.AttributeProto.AttributeType[m.type]}`)}}static getValueNoCheckFromOrtFormat(m){switch(m.type()){case f.AttributeType.FLOAT:return m.f();case f.AttributeType.INT:return m.i();case f.AttributeType.STRING:return m.s();case f.AttributeType.TENSOR:return m.t();case f.AttributeType.GRAPH:return m.g();case f.AttributeType.FLOATS:return m.floatsArray();case f.AttributeType.INTS:{const l=[];for(let o=0;o<m.intsLength();o++)l.push(m.ints(o));return l}case f.AttributeType.STRINGS:{const l=[];for(let o=0;o<m.stringsLength();o++)l.push(m.strings(o));return l}case f.AttributeType.TENSORS:{const l=[];for(let o=0;o<m.tensorsLength();o++)l.push(m.tensors(o));return l}default:throw new Error(`unsupported attribute type: ${f.AttributeType[m.type()]}`)}}}e.Attribute=b},1975:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const n=t(4418),a=new Map;async function s(c){const f=e.backend;if(f[c]!==void 0&&function(b){const g=b;return"initialize"in g&&typeof g.initialize=="function"&&"createSessionHandler"in g&&typeof g.createSessionHandler=="function"&&"dispose"in g&&typeof g.dispose=="function"}(f[c])){const b=f[c];let g=b.initialize();if(typeof g=="object"&&"then"in g&&(g=await g),g)return a.set(c,b),b}}e.backend={webgl:new n.WebGLBackend},e.resolveBackend=async function c(f){if(!f)return c(["webgl"]);{const b=typeof f=="string"?[f]:f;for(const g of b){const m=a.get(g);if(m)return m;const l=await s(g);if(l)return l}}throw new Error("no available backend to use")}},4418:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const n=t(2235),a=t(1315),s=t(2171),c=t(3389);e.WebGLBackend=class{get contextId(){return n.env.webgl.contextId}set contextId(f){n.env.webgl.contextId=f}get matmulMaxBatchSize(){return n.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(f){n.env.webgl.matmulMaxBatchSize=f}get textureCacheMode(){return n.env.webgl.textureCacheMode}set textureCacheMode(f){n.env.webgl.textureCacheMode=f}get pack(){return n.env.webgl.pack}set pack(f){n.env.webgl.pack=f}get async(){return n.env.webgl.async}set async(f){n.env.webgl.async=f}initialize(){try{return this.glContext=(0,c.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),a.Logger.setWithEnv(n.env),a.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(f){return a.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${f}`),!1}}createSessionHandler(f){return new s.WebGLSessionHandler(this,f)}dispose(){this.glContext.dispose()}}},6859:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const n=t(7273),a=t(1997),s=t(6757),c=t(7618),f=t(432);class b extends a.GlslLib{constructor(m){super(m)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new a.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new a.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const m=this.context.outputTextureLayout;return m.isPacked?this.getPackedOutputSamplingSnippet(m):this.getUnpackedOutputSamplingSnippet(m)}getPackedOutputSamplingSnippet(m){const l=m.unpackedShape,o=[m.width,m.height],u={},d="getOutputCoords";switch(l.length){case 0:u[d]=this.getOutputScalarCoords();break;case 1:u[d]=this.getOutputPacked1DCoords(l,o);break;case 2:u[d]=this.getOutputPacked2DCoords(l,o);break;case 3:u[d]=this.getOutputPacked3DCoords(l,o);break;default:u[d]=this.getOutputPackedNDCoords(l,o)}const y=`
      void setOutput(vec4 val) {
        ${(0,s.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return u.floatTextureSetRGBA=new a.GlslLibRoutine(y),u}getUnpackedOutputSamplingSnippet(m){const l=m.unpackedShape,o=[m.width,m.height],u={},d="getOutputCoords";switch(l.length){case 0:u[d]=this.getOutputScalarCoords();break;case 1:u[d]=this.getOutputUnpacked1DCoords(l,o);break;case 2:u[d]=this.getOutputUnpacked2DCoords(l,o);break;case 3:u[d]=this.getOutputUnpacked3DCoords(l,o);break;case 4:u[d]=this.getOutputUnpacked4DCoords(l,o);break;case 5:u[d]=this.getOutputUnpacked5DCoords(l,o);break;case 6:u[d]=this.getOutputUnpacked6DCoords(l,o);break;default:throw new Error(`Unsupported output dimensionality: ${l.length}`)}const y=`
        void setOutput(float val) {
          ${(0,s.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return u.floatTextureSetR=new a.GlslLibRoutine(y),u}getOutputScalarCoords(){return new a.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(m,l){const o=l;let u="";return o[0]===1?(u=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${o[1]}.0);
          }
        `,new a.GlslLibRoutine(u)):o[1]===1?(u=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${o[0]}.0);
          }
        `,new a.GlslLibRoutine(u)):(u=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${o[0]}, ${o[1]}));
          return 2 * (resTexRC.y * ${o[0]} + resTexRC.x);
        }
      `,new a.GlslLibRoutine(u))}getOutputPacked2DCoords(m,l){let o="";if(n.ArrayUtil.arraysEqual(m,l))return o=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${l[0]}, ${l[1]}));
        }
      `,new a.GlslLibRoutine(o);const u=l,d=Math.ceil(m[1]/2);return o=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${u[0]}, ${u[1]}));

          int index = resTexRC.y * ${u[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${d}) * 2;
          int c = 2 * (index / ${d});

          return ivec2(r, c);
        }
      `,new a.GlslLibRoutine(o)}getOutputPacked3DCoords(m,l){const o=[l[0],l[1]],u=Math.ceil(m[2]/2),d=u*Math.ceil(m[1]/2),y=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          int b = index / ${d};
          index -= b * ${d};

          // reverse r and c order for packed texture
          int r = imod(index, ${u}) * 2;
          int c = 2 * (index / ${u});

          return ivec3(b, r, c);
        }
      `;return new a.GlslLibRoutine(y)}getOutputPackedNDCoords(m,l){const o=[l[0],l[1]],u=Math.ceil(m[m.length-1]/2),d=u*Math.ceil(m[m.length-2]/2);let y=d,w="",_="b, r, c";for(let S=2;S<m.length-1;S++)y*=m[m.length-S-1],w=`
      int b${S} = index / ${y};
      index -= b${S} * ${y};
    `+w,_=`b${S}, `+_;const T=`
      ivec${m.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${o[0]}, ${o[1]}));
        int index = resTexRC.y * ${o[0]} + resTexRC.x;

        ${w}

        int b = index / ${d};
        index -= b * ${d};

        // reverse r and c order for packed texture
        int r = imod(index, ${u}) * 2;
        int c = 2 * (index / ${u});

        return ivec${m.length}(${_});
      }
    `;return new a.GlslLibRoutine(T)}getOutputUnpacked1DCoords(m,l){const o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          return resTexRC.y * ${l[0]} + resTexRC.x;
        }
      `;return new a.GlslLibRoutine(o)}getOutputUnpacked2DCoords(m,l){const o=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          int r = index / ${m[1]};
          int c = index - r * ${m[1]};
          return ivec2(r, c);
        }
      `;return new a.GlslLibRoutine(o)}getOutputUnpacked3DCoords(m,l){let o="";const u=m.length;let d=null;u<2&&(d=[]),d=new Array(u-1),d[u-2]=m[u-1];for(let _=u-3;_>=0;--_)d[_]=d[_+1]*m[_+1];const y=["r","c","d"],w=d.map((_,T)=>`int ${y[T]} = index / ${_}; ${T===d.length-1?`int ${y[T+1]} = index - ${y[T]} * ${_}`:`index -= ${y[T]} * ${_}`};`).join("");return o=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${w}
          return ivec3(r, c, d);
        }
      `,new a.GlslLibRoutine(o)}getOutputUnpacked4DCoords(m,l){let o="";const u=m.length;let d=null;u<2&&(d=[]),d=new Array(u-1),d[u-2]=m[u-1];for(let _=u-3;_>=0;--_)d[_]=d[_+1]*m[_+1];const y=["r","c","d","d2"],w=d.map((_,T)=>`int ${y[T]} = index / ${_}; ${T===d.length-1?`int ${y[T+1]} = index - ${y[T]} * ${_}`:`index -= ${y[T]} * ${_}`};`).join("");return o=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${w}
          return ivec4(r, c, d, d2);
        }
      `,new a.GlslLibRoutine(o)}getOutputUnpacked5DCoords(m,l){let o="";const u=m.length;let d=null;u<2&&(d=[]),d=new Array(u-1),d[u-2]=m[u-1];for(let _=u-3;_>=0;--_)d[_]=d[_+1]*m[_+1];const y=["r","c","d","d2","d3"],w=d.map((_,T)=>`int ${y[T]} = index / ${_}; ${T===d.length-1?`int ${y[T+1]} = index - ${y[T]} * ${_}`:`index -= ${y[T]} * ${_}`};`).join("");return o=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${w}
          return ivec5(r, c, d, d2, d3);
        }
      `,new a.GlslLibRoutine(o)}getOutputUnpacked6DCoords(m,l){let o="";const u=m.length;let d=null;u<2&&(d=[]),d=new Array(u-1),d[u-2]=m[u-1];for(let _=u-3;_>=0;--_)d[_]=d[_+1]*m[_+1];const y=["r","c","d","d2","d3","d4"],w=d.map((_,T)=>`int ${y[T]} = index / ${_}; ${T===d.length-1?`int ${y[T+1]} = index - ${y[T]} * ${_}`:`index -= ${y[T]} * ${_}`};`).join("");return o=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${l[0]}, ${l[1]}));
         int index = resTexRC.y * ${l[0]} + resTexRC.x;
         ${w}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new a.GlslLibRoutine(o)}getCommonUtilFuncs(){const m={};let l="uvFromFlat";m[l]=new a.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),l="packedUVfrom1D",m[l]=new a.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="packedUVfrom2D",m[l]=new a.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="packedUVfrom3D",m[l]=new a.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="sampleTexture";const o=(0,s.getGlsl)(this.context.glContext.version);return m[l]=new a.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${o.texture2D}(textureSampler, uv).r;
        }`),m}getInputsSamplingSnippets(){const m={},l=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((o,u)=>{const d=this.context.inputTextureLayouts[u],y=(0,f.generateShaderFuncNameFromInputSamplerName)(o);d.isPacked?m[y]=this.getPackedSamplerFromInput(y,o,d):m[y]=this.getUnpackedSamplerFromInput(y,o,d);const w=(0,f.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(o);d.unpackedShape.length<=l.unpackedShape.length&&(d.isPacked?m[w]=this.getPackedSamplerAtOutputCoords(w,d,l,o):m[w]=this.getUnpackedSamplerAtOutputCoords(w,d,l,o))}),m}getPackedSamplerAtOutputCoords(m,l,o,u){const d=l.unpackedShape,y=o.unpackedShape,w=u,_=(0,f.generateShaderFuncNameFromInputSamplerName)(w),T=d.length,S=y.length,E=n.BroadcastUtil.getBroadcastDims(d,y),A=(0,f.getCoordsDataType)(S),P=S-T;let k;const M=(0,f.getGlChannels)();k=T===0?"":S<2&&E.length>=1?"coords = 0;":E.map(U=>`coords.${M[U+P]} = 0;`).join(`
`);let F="";F=S<2&&T>0?"coords":d.map((U,N)=>`coords.${M[N+P]}`).join(", ");let O="return outputValue;";const D=n.ShapeUtil.size(d)===1,R=n.ShapeUtil.size(y)===1;if(T!==1||D||R){if(D&&!R)O=S===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(E.length){const U=T-2,N=T-1;E.indexOf(U)>-1&&E.indexOf(N)>-1?O="return vec4(outputValue.x);":E.indexOf(U)>-1?O="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":E.indexOf(N)>-1&&(O="return vec4(outputValue.xx, outputValue.zz);")}}else O=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const C=`
      vec4 ${m}() {
        ${A} coords = getOutputCoords();
        
        int lastDim = coords.${M[S-1]};
        coords.${M[S-1]} = coords.${M[S-2]};
        coords.${M[S-2]} = lastDim;
      
        ${k}
        vec4 outputValue = ${_}(${F});
        ${O}
      }
    `;return new a.GlslLibRoutine(C,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(m,l,o,u){const d=[o.width,o.height],y=[l.width,l.height],w=l.unpackedShape.length,_=o.unpackedShape.length,T=l.unpackedShape,S=o.unpackedShape,E=(0,f.generateShaderFuncNameFromInputSamplerName)(u);if(w===_&&n.ArrayUtil.arraysEqual(y,d)){const R=`
          float ${m}() {
            return sampleTexture(${u}, TexCoords);
          }
        `;return new a.GlslLibRoutine(R,["coordinates.sampleTexture"])}const A=(0,f.getCoordsDataType)(_),P=n.BroadcastUtil.getBroadcastDims(T,S),k=_-w;let M;const F=(0,f.getGlChannels)();M=w===0?"":_<2&&P.length>=1?"coords = 0;":P.map(R=>`coords.${F[R+k]} = 0;`).join(`
`);let O="";O=_<2&&w>0?"coords":l.unpackedShape.map((R,C)=>`coords.${F[C+k]}`).join(", ");const D=`
        float ${m}() {
          ${A} coords = getOutputCoords();
          ${M}
          return ${E}(${O});
        }
      `;return new a.GlslLibRoutine(D,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(m,l,o){switch(o.unpackedShape.length){case 0:return this.getPackedSamplerScalar(m,l);case 1:return this.getPackedSampler1D(m,l,o);case 2:return this.getPackedSampler2D(m,l,o);case 3:return this.getPackedSampler3D(m,l,o);default:return this.getPackedSamplerND(m,l,o)}}getUnpackedSamplerFromInput(m,l,o){const u=o.unpackedShape;switch(u.length){case 0:return this.getUnpackedSamplerScalar(m,l,o);case 1:return this.getUnpackedSampler1D(m,l,o);case 2:return this.getUnpackedSampler2D(m,l,o);case 3:return this.getUnpackedSampler3D(m,l,o);case 4:return this.getUnpackedSampler4D(m,l,o);case 5:return this.getUnpackedSampler5D(m,l,o);case 6:return this.getUnpackedSampler6D(m,l,o);default:throw new Error(`Unsupported dimension ${u.length}-D`)}}getPackedSamplerScalar(m,l){const o=`
          vec4 ${m}() {
            return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${l}, halfCR);
          }
        `;return new a.GlslLibRoutine(o)}getPackedSampler1D(m,l,o){const u=[o.width,o.height],d=[u[1],u[0]],y=(0,s.getGlsl)(this.context.glContext.version),w=`vec4 ${m}(int index) {
      vec2 uv = packedUVfrom1D(
      ${d[0]}, ${d[1]}, index);
      return ${y.texture2D}(${l}, uv);
    }`;return new a.GlslLibRoutine(w,["coordinates.packedUVfrom1D"])}getPackedSampler2D(m,l,o){const u=o.unpackedShape,d=[o.width,o.height],y=(0,s.getGlsl)(this.context.glContext.version),w=d[0],_=d[1];if(d!=null&&n.ArrayUtil.arraysEqual(u,d)){const A=`vec4 ${m}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${_}.0, ${w}.0);
        return ${y.texture2D}(${l}, uv);
      }`;return new a.GlslLibRoutine(A)}const T=d,S=Math.ceil(u[1]/2),E=`vec4 ${m}(int row, int col) {
      vec2 uv = packedUVfrom2D(${T[1]}, ${T[0]}, ${S}, row, col);
      return ${y.texture2D}(${l}, uv);
    }`;return new a.GlslLibRoutine(E,["coordinates.packedUVfrom2D"])}getPackedSampler3D(m,l,o){const u=o.unpackedShape,d=[o.width,o.height],y=[d[0],d[1]],w=(0,s.getGlsl)(this.context.glContext.version);if(u[0]===1){const A=u.slice(1),P=[1,2],k=(0,f.squeezeInputShape)(u,A),M=["b","row","col"],F=JSON.parse(JSON.stringify(o));F.unpackedShape=k;const O=this.getPackedSamplerFromInput(m,l,F),D=`${O.routineBody}
      vec4 ${m}(int b, int row, int col) {
        return ${m}(${(0,f.getSqueezedParams)(M,P)});
      } `;return new a.GlslLibRoutine(D,O.dependencies)}const _=y[0],T=y[1],S=Math.ceil(u[2]/2),E=`vec4 ${m}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${T}, ${_}, ${S*Math.ceil(u[1]/2)}, ${S}, b, row, col);
      return ${w.texture2D}(${l}, uv);}`;return new a.GlslLibRoutine(E,["coordinates.packedUVfrom3D"])}getPackedSamplerND(m,l,o){const u=o.unpackedShape,d=u.length,y=[o.width,o.height],w=(0,s.getGlsl)(this.context.glContext.version),_=[y[0],y[1]],T=_[1],S=_[0],E=Math.ceil(u[d-1]/2);let A=E*Math.ceil(u[d-2]/2),P="int b, int row, int col",k=`b * ${A} + (row / 2) * ${E} + (col / 2)`;for(let F=2;F<d-1;F++)P=`int b${F}, `+P,A*=u[d-F-1],k=`b${F} * ${A} + `+k;const M=`vec4 ${m}(${P}) {
      int index = ${k};
      int texR = index / ${S};
      int texC = index - texR * ${S};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${S}, ${T});
      return ${w.texture2D}(${l}, uv);
    }`;return new a.GlslLibRoutine(M)}getUnpackedSamplerScalar(m,l,o){const[u,d]=[o.width,o.height];if(u===1&&d===1){const w=`
          float ${m}() {
            return sampleTexture(${l}, halfCR);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture"])}const y=`
        float ${m}() {
          int offset_${l} = coordsToOffset(TexCoords, ${u}, ${d});
          vec2 uv = uvFromFlat(${u}, ${d}, offset_${l});
          return sampleTexture(${l}, uv);
        }
      `;return new a.GlslLibRoutine(y,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(m,l,o){const u=o.width,d=o.height;if(d===1&&u===1){const w=`
        float ${m}(int index) {
          return sampleTexture(${l}, halfCR);
        }
      `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture"])}if(d===1){const w=`
          float ${m}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${u}.0, 0.5);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture"])}if(u===1){const w=`
          float ${m}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${d}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture"])}const y=`
        float ${m}(int index) {
          vec2 uv = uvFromFlat(${u}, ${d}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new a.GlslLibRoutine(y,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(m,l,o){const u=o.unpackedShape,d=[o.height,o.width];if(d!=null&&n.ArrayUtil.arraysEqual(u,d)){const A=`
          float ${m}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${d[1]}.0, ${d[0]}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(A,["coordinates.sampleTexture"])}const{newShape:y,keptDims:w}=(0,c.squeezeShape)(u),_=y;if(_.length<u.length){const A=(0,f.squeezeInputShape)(u,_),P=JSON.parse(JSON.stringify(o));P.unpackedShape=A;const k=["col","row"],M=`
          ${this.getUnpackedSamplerFromInput(m,l,P).routineBody}
          float ${m}(int row, int col) {
            return ${m}(${(0,f.getSqueezedParams)(k,w)});
          }
        `;return new a.GlslLibRoutine(M,["coordinates.sampleTexture"])}const T=d[1],S=d[0];if(S===1){const A=`
          float ${m}(int row, int col) {
            int offset_${l} = coordsToOffset(TexCoords, ${T}, ${S});
            float index = dot(vec3(row, col, offset_${l}), vec3(${u[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${T}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(A,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(T===1){const A=`
          float ${m}(int row, int col) {
            int offset_${l} = coordsToOffset(TexCoords, ${T}, ${S});
            float index = dot(vec3(row, col, offset_${l}), vec3(${u[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${S}.0, 0.5);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(A,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const E=`
        float ${m}(int row, int col) {
          int index = col * ${u[1]} + row;
          vec2 uv = uvFromFlat(${T}, ${S}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new a.GlslLibRoutine(E,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(m,l,o){const u=o.unpackedShape,d=u[1]*u[2],y=u[2],{newShape:w,keptDims:_}=(0,c.squeezeShape)(u),T=w;if(T.length<u.length){const E=(0,f.squeezeInputShape)(u,T),A=["batch","col","row"],P=JSON.parse(JSON.stringify(o));P.unpackedShape=E;const k=this.getUnpackedSamplerFromInput(m,l,P),M=_.reverse(),F=`
          ${k.routineBody}
          float ${m}(int batch, int row, int col) {
            return ${m}(${(0,f.getSqueezedParams)(A,M)});
          }
        `;return new a.GlslLibRoutine(F,k.dependencies)}const S=`
          float ${m}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${d} + col * ${y} + row;
            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
            return sampleTexture(${l}, uv);
          }
      `;return new a.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(m,l,o){const u=o.unpackedShape,d=u[3],y=u[2]*d,w=`
        float ${m}(int row, int col, int depth, int depth2) {
          int index = row * ${u[1]*y} + col * ${y} +
              depth2 * ${d} + depth;
          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new a.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(m,l,o){const u=o.unpackedShape,d=u[4],y=u[3]*d,w=u[2]*y,_=u[1]*w,{newShape:T,keptDims:S}=(0,c.squeezeShape)(u);if(T.length<u.length){const A=(0,f.squeezeInputShape)(u,T),P=["row","col","depth","depth2","depth3"],k=JSON.parse(JSON.stringify(o));k.unpackedShape=A;const M=`
          ${this.getUnpackedSamplerFromInput(m,l,k).routineBody}
          float ${m}(int row, int col, int depth, int depth2, int depth3) {
            return ${m}(${(0,f.getSqueezedParams)(P,S)});
          }
        `;return new a.GlslLibRoutine(M,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const E=`
        float ${m}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${_} + col * ${w} + depth * ${y} +
          depth3 * ${d} + depth2;
          vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new a.GlslLibRoutine(E,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(m,l,o){const u=o.unpackedShape,d=u[5],y=u[4]*d,w=u[3]*y,_=u[2]*w,T=u[1]*_,{newShape:S,keptDims:E}=(0,c.squeezeShape)(u);if(S.length<u.length){const P=(0,f.squeezeInputShape)(u,S),k=["row","col","depth","depth2","depth3","depth4"],M=JSON.parse(JSON.stringify(o));M.unpackedShape=P;const F=`
            ${this.getUnpackedSamplerFromInput(m,l,M).routineBody}
            float ${m}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${m}(${(0,f.getSqueezedParams)(k,E)});
            }
          `;return new a.GlslLibRoutine(F,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const A=`
          float ${m}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${T} + col * ${_} + depth * ${w} +
            depth2 * ${y} + depth3 * ${d} + depth4;
            vec2 uv = uvFromFlat(${o.width}, ${o.height}, index);
            return sampleTexture(${l}, uv);
          }
        `;return new a.GlslLibRoutine(A,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const m=this.context.outputTextureLayout,l=m.shape.length,o=m.strides,u=m.width,d=m.height,y=[];for(let _=0;_<l-1;++_)y.push(`
        c[${_}] = offset / ${o[_]};`),y.push(`
        offset -= c[${_}] * ${o[_]};`);y.push(`
        c[${l-1}] = offset;`);const w=`
      void toVec(vec2 texCoords, out int c[${l}]) {
        int offset = coordsToOffset(texCoords, ${u}, ${d});
        ${y.join("")}
      }
      void toVec(int offset, out int c[${l}]) {
        ${y.join("")}
      }
    `;return{toVec:new a.GlslLibRoutine(w,["coordinates.coordsToOffset"])}}valueFrom(){const m={};return this.context.programInfo.inputNames.forEach((l,o)=>{const u=this.context.inputTextureLayouts[o],d=(u.unpackedShape.length>0?u.unpackedShape:u.shape).length;let y=`_${l}`;m[y]=new a.GlslLibRoutine(this.getValueFromSingle(l,d,u.width,u.height,!1),[`shapeUtils.indicesToOffset${y}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),y+="_T",m[y]=new a.GlslLibRoutine(this.getValueFromSingle(l,d,u.width,u.height,!0),[`shapeUtils.indicesToOffset${y}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),m}getValueFromSingle(m,l,o,u,d){let y=`_${m}`;return d&&(y+="_T"),`
        float ${y}(int m[${l}]) {
          int offset = indicesToOffset${y}(m);
          vec2 coords = offsetToCoords(offset, ${o}, ${u});
          float value = getColorAsFloat(${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${m}, coords));
          return value;
        }
        `}getPackedValueFrom(m,l,o,u,d){let y=`_${m}_Pack`;return d&&(y+="_T"),`
        vec4 ${y}(int m[${l}]) {
          int offset = indicesToOffset_${m}(m);
          vec2 coords = offsetToCoords(offset, ${o}, ${u});
          return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${m}, coords);
        }
        `}}e.CoordsGlslLib=b},1997:(r,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(t=e.FunctionType||(e.FunctionType={}))[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional",e.GlslContext=class{constructor(n,a,s,c){this.glContext=n,this.programInfo=a,this.inputTextureLayouts=s,this.outputTextureLayout=c}},e.GlslLib=class{constructor(n){this.context=n}},e.GlslLibRoutine=class{constructor(n,a){this.routineBody=n,this.dependencies=a}},e.GlslLibRoutineNode=class{constructor(n,a,s){this.name=n,this.dependencies=s||[],a&&(this.routineBody=a)}addDependency(n){n&&this.dependencies.push(n)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(n){if(!n||n.length===0)return[];if(n.length===1)return n;const a=new Set,s=new Set,c=new Array;return this.createOrderedNodes(n,a,s,c),c}static createOrderedNodes(n,a,s,c){for(let f=0;f<n.length;++f)this.dfsTraverse(n[f],a,s,c)}static dfsTraverse(n,a,s,c){if(!n||s.has(n.name))return;if(a.has(n.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");a.add(n.name);const f=n.dependencies;if(f&&f.length>0)for(let b=0;b<f.length;++b)this.dfsTraverse(f[b],a,s,c);c.push(n),s.add(n.name),a.delete(n.name)}}},1371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const n=t(1997);class a extends n.GlslLib{constructor(c){super(c)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new n.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new n.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const c=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new n.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${c}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const c=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new n.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${c}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const c=new ArrayBuffer(4),f=new Uint32Array(c),b=new Uint8Array(c);if(f[0]=3735928559,b[0]===239)return!0;if(b[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=a},2691:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const n=t(1997),a=t(6757);class s extends n.GlslLib{constructor(f){super(f)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const f=(0,a.getGlsl)(this.context.glContext.version);return{setFragColor:new n.GlslLibRoutine(`
        void setFragColor(float value) {
            ${f.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new n.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=s},3878:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const t=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(n){const a={};let s;for(;(s=t.exec(n))!==null;){const c=s[3].split(",").map(f=>{const b=f.trim().split(" ");return b&&b.length===2?{type:b[0],name:b[1]}:null}).filter(f=>f!==null);a[s[2]]={params:c,body:s[4]}}for(const c in a){const f="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",c),b=new RegExp(f,"gm");for(;(s=b.exec(n))!==null;){const g=s[1],m=s[2],l=s[3].split(","),o=g?`${g} ${m};`:"";let u=a[c].body,d="";a[c].params.forEach((w,_)=>{w&&(d+=`${w.type} ${w.name} = ${l[_]};
`)}),u=`${d}
 ${u}`,u=u.replace("return",`${m} = `);const y=`
      ${o}
      {
        ${u}
      }
      `;n=n.replace(s[0],y)}}return n.replace(t,"")}},8897:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const n=t(1997),a=t(3878),s=t(1248),c=t(6757);e.GlslPreprocessor=class{constructor(f,b,g,m){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new n.GlslContext(f,b,g,m),Object.keys(s.glslRegistry).forEach(o=>{const u=new s.glslRegistry[o](this.context);this.libs[o]=u});const l=this.glslLibRoutineDependencyGraph;for(const o in this.libs){const u=this.libs[o].getFunctions();for(const d in u){const y=o+"."+d;let w;l[y]?(w=l[y],w.routineBody=u[d].routineBody):(w=new n.GlslLibRoutineNode(y,u[d].routineBody),l[y]=w);const _=u[d].dependencies;if(_)for(let T=0;T<_.length;++T)if(l[_[T]])w.addDependency(l[_[T]]);else{const S=new n.GlslLibRoutineNode(_[T]);l[_[T]]=S,w.addDependency(S)}}}}preprocess(){const f=this.context.programInfo;let b=f.shaderSource;return this.context.programInfo.hasMain||(b=`${b}
      ${(0,c.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),b=(0,a.replaceInlines)(b),`${(0,c.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(f.inputNames,f.variables)}
    ${this.getImports(b)}
    ${b}`}getImports(f){const b=this.selectGlslLibRoutinesToBeIncluded(f);if(b.length===0)return"";let g="";for(let m=0;m<b.length;++m){if(!b[m].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${b[m].name}`);g+=b[m].routineBody+`
`}return g}selectGlslLibRoutinesToBeIncluded(f){const b=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(g=>{const m=g.split(".")[1];f.indexOf(m)!==-1&&b.push(this.glslLibRoutineDependencyGraph[g])}),n.TopologicalSortGlslRoutines.returnOrderedNodes(b)}getUniforms(f,b){const g=[];if(f)for(const m of f)g.push(`uniform sampler2D ${m};`);if(b)for(const m of b)g.push(`uniform ${m.type} ${m.name}${m.arrayLength?`[${m.arrayLength}]`:""};`);return g.join(`
`)}}},1248:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const n=t(6859),a=t(1371),s=t(2691),c=t(9183),f=t(9314);e.glslRegistry={encoding:a.EncodingGlslLib,fragcolor:s.FragColorGlslLib,vec:f.VecGlslLib,shapeUtils:c.ShapeUtilsGlslLib,coordinates:n.CoordsGlslLib}},9183:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const n=t(1997);class a extends n.GlslLib{constructor(c){super(c)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const c=this.context.outputTextureLayout.shape.length,f={};return this.context.programInfo.inputNames.forEach((b,g)=>{const m=this.context.inputTextureLayouts[g].unpackedShape;if(m.length<=c){const l=m.length,o=c-l,u=`bcastIndices_${b}`;let d="";for(let w=0;w<l;++w)d+=`
          realIndices[${w}] = int( mod(float(bcastedIndices[${o+w}]), ${m[w]}.0) );
          `;const y=`
        void ${u} (int bcastedIndices[${c}], out int realIndices[${l}]) {
          ${d}
        }
        `;f[u]=new n.GlslLibRoutine(y)}}),f}bcastMatmulIndex(){const c=this.context.outputTextureLayout.shape.length,f={};return this.context.programInfo.inputNames.forEach((b,g)=>{const m=this.context.inputTextureLayouts[g].shape;if(!(m.length<2||m.length>c)){const l=m.length,o=c-l,u=`bcastMatmulIndices_${b}`;let d="";for(let w=0;w<l-2;++w)d+=`
          realIndices[${w}] = int( mod(float(bcastedIndices[${o+w}]), ${m[w]}.0) );
          `;const y=`
        void ${u}(int bcastedIndices[${c}], out int realIndices[${l}]) {
          ${d}
          realIndices[${l-1}] = bcastedIndices[${c-1}];
          realIndices[${l-2}] = bcastedIndices[${c-2}];
        }
        `;f[u]=new n.GlslLibRoutine(y)}}),f}indicesToOffset(){const c={};return this.context.programInfo.inputNames.forEach((f,b)=>{const g=this.context.inputTextureLayouts[b].shape,m=this.context.inputTextureLayouts[b].strides,l=g.length;let o=`indicesToOffset_${f}`;c[o]=new n.GlslLibRoutine(a.indexToOffsetSingle(o,l,m)),o=`indicesToOffset_${f}_T`,c[o]=new n.GlslLibRoutine(a.indexToOffsetSingle(o,l,m.slice().reverse()))}),c}static indexToOffsetSingle(c,f,b){let g="";for(let m=f-1;m>=0;--m)g+=`
        offset += indices[${m}] * ${b[m]};
        `;return`
      int ${c}(int indices[${f}]) {
        int offset = 0;
        ${g}
        return offset;
      }
      `}offsetToIndices(){const c={};return this.context.programInfo.inputNames.forEach((f,b)=>{const g=this.context.inputTextureLayouts[b].shape,m=this.context.inputTextureLayouts[b].strides,l=g.length;let o=`offsetToIndices_${f}`;c[o]=new n.GlslLibRoutine(a.offsetToIndicesSingle(o,l,m)),o=`offsetToIndices_${f}_T`,c[o]=new n.GlslLibRoutine(a.offsetToIndicesSingle(o,l,m.slice().reverse()))}),c}static offsetToIndicesSingle(c,f,b){const g=[];for(let m=0;m<f-1;++m)g.push(`
      indices[${m}] = offset / ${b[m]};`),g.push(`
        offset -= indices[${m}] * ${b[m]};`);return g.push(`
      indices[${f-1}] = offset;`),`
      void ${c}(int offset, out int indices[${f}]) {
        ${g.join("")}
      }
      `}incrementIndices(){const c={};return this.context.programInfo.inputNames.forEach((f,b)=>{const g=this.context.inputTextureLayouts[b].shape,m=g.length,l=`incrementIndices_${f}`;let o="";for(let d=0;d<m;++d)o+=`
        shape[${d}] = ${g[d]};`;const u=`
        void ${l}(int axis, out int indices[${m}]) {
          int shape[${m}];
          ${o};
          for(int i = ${m} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;c[l]=new n.GlslLibRoutine(u)}),c}}e.ShapeUtilsGlslLib=a},6757:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const t={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},n={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function a(s){return s===1?t:n}e.getGlsl=a,e.getVertexShaderSource=function(s){const c=a(s);return`${c.version}
      precision highp float;
      ${c.attribute} vec3 position;
      ${c.attribute} vec2 textureCoord;

      ${c.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(s){const c=a(s);return`${c.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${c.varyingFrag} vec2 TexCoords;
    ${c.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(s,c){return`
  void main() {
    int indices[${c}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${a(s).output} = result;
  }
  `}},9314:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const n=t(1997);class a extends n.GlslLib{constructor(c){super(c)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const c=this.context.outputTextureLayout.shape.length,f={add:"+=",sub:"-=",mul:"*=",div:"/="},b={};for(const g in f){const m=`${g}Vec`;let l="";for(let u=0;u<c;++u)l+=`
          dest[${u}] ${f[g]} src[${u}];
          `;const o=`
        void ${m}(int src[${c}], out int dest[${c}]) {
          ${l}
        }
        `;b[m]=new n.GlslLibRoutine(o)}return b}copyVec(){const c=this.context.outputTextureLayout.shape.length;let f="";for(let g=0;g<c;++g)f+=`
        dest[${g}] = src[${g}];
        `;const b=`
      void copyVec(int src[${c}], out int dest[${c}]) {
        ${f}
      }
      `;return{copyVec:new n.GlslLibRoutine(b)}}setVecItem(){const c=this.context.outputTextureLayout.shape.length;let f=`
        if(index < 0)
            index =${c} + index;
        if (index == 0)
            m[0] = value;
        `;for(let g=1;g<c-1;++g)f+=`
        else if (index == ${g})
            m[${g}] = value;
            `;f+=`
        else
            m[${c-1}] = value;
        `;const b=`
      void setVecItem(out int m[${c}], int index, int value) {
        ${f}
      }
        `;return{setVecItem:new n.GlslLibRoutine(b)}}getVecItem(){const c=this.context.outputTextureLayout.shape.length;let f=`
        if(index < 0)
            index = ${c} + index;
        if (index == 0)
            return m[0];
      `;for(let g=1;g<c-1;++g)f+=`
        else if (index == ${g})
            return m[${g}];
      `;f+=`
        else
            return m[${c-1}];
        `;const b=`
      int getVecItem(int m[${c}], int index) {
        ${f}
      }
    `;return{getVecItem:new n.GlslLibRoutine(b)}}}e.VecGlslLib=a},7860:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const n=t(1315),a=t(9240),s=t(7273),c=t(9),f=t(7379),b=t(2488),g=t(540),m=t(3314),l=t(5639);e.WebGLInferenceHandler=class{constructor(o){this.session=o,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(o,u){return(0,m.calculateTextureWidthAndHeight)(this.session.layoutStrategy,o,u)}executeProgram(o,u){if(u.length<o.inputNames.length)throw new Error(`Input size mustn't be less than ${o.inputNames.length}.`);if(o.inputNames.length!==o.inputTypes.length)throw new Error("input names size does not match input types");const d=[];for(let E=0;E<o.inputNames.length;++E)d[E]=this.getOrCreateTextureData(u[E],o.inputTypes[E]);const y=((E,A)=>{const P=A.map(M=>`${M.unpackedShape.join(",")};${M.width}x${M.height}`).join("_");let k=E.name;return E.cacheHint&&(k+="["+E.cacheHint+"]"),k+=":"+P,k})(o,d);let w=this.session.programManager.getArtifact(y);const _=w?w.programInfo:typeof o.get=="function"?o.get():o,T=(0,m.createTextureLayoutFromTextureType)(this.session.layoutStrategy,_.output.dims,_.output.textureType),S=this.createTextureData(T,_.output.type);return w||(w=this.session.programManager.build(_,d,S),this.session.programManager.setArtifact(y,w)),this.runProgram(w,d,S),S}run(o,u){return this.executeProgram(o,u).tensor}runProgram(o,u,d){for(let y=0;y<u.length;++y)if(!!u[y].isPacked!=(o.programInfo.inputTypes[y]===l.TextureType.packed))throw new Error(`input[${y}] property packed inconsistent`);if(!!d.isPacked!=(o.programInfo.output.textureType===l.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(o,u,d)}getOrCreateTextureData(o,u){let d=this.getTextureData(o.dataId,u===l.TextureType.packed);if(!d&&(d=this.getTextureData(o.dataId,u!==l.TextureType.packed),d))return u===l.TextureType.packed?this.pack(d):this.unpack(d);if(!d){const y=(0,m.createTextureLayoutFromTextureType)(this.session.layoutStrategy,o.dims,u);if(u===l.TextureType.packedLastDimension){const T=o.dims;if(T.length===4){const S=[T[0],Math.ceil(T[1]*T[2]*T[3]/4)],E=(0,m.createTextureLayoutFromTextureType)(this.session.layoutStrategy,S,u);let A=o.numberData;if(T[1]*T[2]*T[3]%4!=0){const P=T[0],k=T[1]*T[2]*T[3],M=Math.ceil(k*1/4)*4;A=new Float32Array(P*M);for(let F=0;F<P;++F){const O=F*k,D=F*M+F%1*k;A.set(o.numberData.subarray(O,O+k),D)}}return this.createTextureData(E,o.type,A,o,1)}}if(u===l.TextureType.packed){const w=(0,m.createTextureLayoutFromShape)(this.session.layoutStrategy,o.dims,1,[],{reverseWH:!0}),_=this.createTextureData(w,o.type,o.numberData,o,1);d=this.pack(_)}else d=this.createTextureData(y,o.type,o.numberData,o,1)}return d}createTextureDataFromLayoutBindTensor(o,u,d,y){return this.createTextureData(o,u,d,y,1)}createTextureData(o,u,d,y,w){n.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(o)}]`);const _=this.session.textureManager.createTextureFromLayout(u,o,d,w);return this.createTextureDataFromTexture(o,u,_,y)}reshapeUnpacked(o,u){const d=this.getOrCreateTextureData(o,l.TextureType.unpacked),y={channels:d.channels,height:d.height,width:d.width,shape:u.length!==0?u:[1],strides:s.ShapeUtil.computeStrides(u),unpackedShape:u};return this.createTextureDataFromTexture(y,o.type,d.texture).tensor}reshapePacked(o,u){const d=this.getOrCreateTextureData(o,l.TextureType.packed);if((0,f.isReshapeCheap)(o.dims,u)){const S={channels:d.channels,height:d.height,width:d.width,shape:u.length!==0?u:[1],strides:s.ShapeUtil.computeStrides(u),unpackedShape:u,isPacked:!0};return this.createTextureDataFromTexture(S,o.type,d.texture).tensor}const y=(0,f.processDims3D)(o.dims),w=(0,f.processDims3D)(u),_=this.reshapePacked(o,y),T=this.run((0,f.createPackedReshape3DProgramInfoLoader)(this,_,w),[_]);return this.reshapePacked(T,u)}cast(o,u){const d=this.getOrCreateTextureData(o,l.TextureType.unpacked);return this.createTextureDataFromTexture(d,u,d.texture).tensor}createTextureDataFromTexture(o,u,d,y,w){const _=Object.assign(Object.assign({},o),{tensor:y||new a.Tensor(o.unpackedShape,u,T=>this.readTexture(_),async T=>this.readTextureAsync(_),void 0,w),texture:d});return this.setTextureData(_.tensor.dataId,_,o.isPacked),_}getTextureData(o,u=!1){return this.session.isInitializer(o)?this.session.getTextureData(o,u):u?this.packedTextureDataCache.get(o):this.unpackedTextureDataCache.get(o)}setTextureData(o,u,d=!1){this.session.isInitializer(o)?this.session.setTextureData(o,u,d):(d?this.packedTextureDataCache:this.unpackedTextureDataCache).set(o,u)}isTextureLayoutCached(o,u=!1){return!!this.getTextureData(o.dataId,u)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(o=>this.session.textureManager.releaseTexture(o)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(o=>this.session.textureManager.releaseTexture(o)),this.unpackedTextureDataCache=new Map}readTexture(o){return o.isPacked?this.readTexture(this.unpack(o)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(o,o.tensor.type,o.channels):this.session.textureManager.readUint8TextureAsFloat((0,b.encodeAsUint8)(this,o))}async readTextureAsync(o){return o.isPacked?this.readTextureAsync(this.unpack(o)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(o,o.tensor.type,o.channels):this.session.textureManager.readUint8TextureAsFloat((0,b.encodeAsUint8)(this,o))}pack(o){return this.executeProgram((0,c.createPackProgramInfoLoader)(this,o.tensor),[o.tensor])}unpack(o){return this.executeProgram((0,g.createUnpackProgramInfoLoader)(this,o.tensor),[o.tensor])}}},4110:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(he,ge,Se,we){we===void 0&&(we=Se);var ne=Object.getOwnPropertyDescriptor(ge,Se);ne&&!("get"in ne?!ge.__esModule:ne.writable||ne.configurable)||(ne={enumerable:!0,get:function(){return ge[Se]}}),Object.defineProperty(he,we,ne)}:function(he,ge,Se,we){we===void 0&&(we=Se),he[we]=ge[Se]}),a=this&&this.__setModuleDefault||(Object.create?function(he,ge){Object.defineProperty(he,"default",{enumerable:!0,value:ge})}:function(he,ge){he.default=ge}),s=this&&this.__importStar||function(he){if(he&&he.__esModule)return he;var ge={};if(he!=null)for(var Se in he)Se!=="default"&&Object.prototype.hasOwnProperty.call(he,Se)&&n(ge,he,Se);return a(ge,he),ge};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const c=t(8817),f=s(t(5194)),b=t(4752),g=t(6668),m=t(9754),l=t(5042),o=t(6742),u=t(4125),d=t(6149),y=t(5378),w=t(6981),_=t(7413),T=t(7006),S=t(8276),E=t(5565),A=t(2834),P=t(1010),k=t(8126),M=t(2801),F=t(565),O=t(2444),D=t(815),R=t(564),C=t(5416),U=t(1240),N=t(5944),V=t(5707),j=s(t(9087)),K=t(7862),ee=t(3980);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",j.abs],["Acos","","7+",j.acos],["Add","","7+",f.add],["And","","7+",f.and],["Asin","","7+",j.asin],["Atan","","7+",j.atan],["AveragePool","","7+",A.averagePool,A.parseAveragePoolAttributes],["BatchNormalization","","7+",c.batchNormalization,c.parseBatchNormalizationAttributes],["Cast","","6+",b.cast,b.parseCastAttributes],["Ceil","","6+",j.ceil],["Clip","","6-10",j.clip,j.parseClipAttributes],["Clip","","11+",j.clipV11],["Concat","","4+",g.concat,g.parseConcatAttributes],["Conv","","1+",m.conv,m.parseConvAttributes],["ConvTranspose","","1+",l.convTranspose,l.parseConvTransposeAttributes],["Cos","","7+",j.cos],["Div","","7+",f.div],["Dropout","","7+",j.identity],["DepthToSpace","","1+",o.depthToSpace,o.parseDepthToSpaceAttributes],["Equal","","7+",f.equal],["Elu","","6+",j.elu,j.parseEluAttributes],["Exp","","6+",j.exp],["Flatten","","1+",u.flatten,u.parseFlattenAttributes],["Floor","","6+",j.floor],["FusedConv","com.microsoft","1+",m.conv,m.parseConvAttributes],["Gather","","1+",d.gather,d.parseGatherAttributes],["Gemm","","7-10",y.gemm,y.parseGemmAttributesV7],["Gemm","","11+",y.gemm,y.parseGemmAttributesV11],["GlobalAveragePool","","1+",A.globalAveragePool,A.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",A.globalMaxPool],["Greater","","7+",f.greater],["Identity","","1+",j.identity],["ImageScaler","","1+",w.imageScaler,w.parseImageScalerAttributes],["InstanceNormalization","","6+",_.instanceNormalization,_.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",j.leakyRelu,j.parseLeakyReluAttributes],["Less","","7+",f.less],["LRN","","1+",T.lrn,T.parseLrnAttributes],["Log","","6+",j.log],["MatMul","","1+",S.matMul,S.parseMatMulAttributes],["MaxPool","","1+",A.maxPool,A.parseMaxPoolAttributes],["Mul","","7+",f.mul],["Neg","","6+",j.neg],["Not","","1+",j.not],["Or","","7+",f.or],["Pad","","2-10",E.padV2,E.parsePadAttributesV2],["Pad","","11+",E.padV11,E.parsePadAttributesV11],["Pow","","7+",f.pow],["PRelu","","7+",f.pRelu],["ReduceLogSum","","1+",P.reduceLogSum,P.parseReduceAttributes],["ReduceMax","","1+",P.reduceMax,P.parseReduceAttributes],["ReduceMean","","1+",P.reduceMean,P.parseReduceAttributes],["ReduceMin","","1+",P.reduceMin,P.parseReduceAttributes],["ReduceProd","","1+",P.reduceProd,P.parseReduceAttributes],["ReduceSum","","1-12",P.reduceSum,P.parseReduceAttributes],["ReduceSumSquare","","1+",P.reduceLogSumSquare,P.parseReduceAttributes],["Relu","","6+",j.relu],["Reshape","","5+",k.reshape],["Resize","","10",M.resize,M.parseResizeAttributesV10],["Resize","","11+",M.resize,M.parseResizeAttributesV11],["Shape","","1+",F.shape],["Sigmoid","","6+",j.sigmoid],["Sin","","7+",j.sin],["Slice","","10+",O.sliceV10],["Slice","","1-9",O.slice,O.parseSliceAttributes],["Softmax","","1-12",D.softmax,D.parseSoftmaxAttributes],["Softmax","","13+",D.softmaxV13,D.parseSoftmaxAttributesV13],["Split","","2-12",R.split,R.parseSplitAttributes],["Sqrt","","6+",j.sqrt],["Squeeze","","1-12",C.squeeze,C.parseSqueezeAttributes],["Squeeze","","13+",C.squeezeV13],["Sub","","7+",f.sub],["Sum","","6+",U.sum],["Tan","","7+",j.tan],["Tanh","","6+",j.tanh],["Tile","","6+",N.tile],["Transpose","","1+",V.transpose,V.parseTransposeAttributes],["Upsample","","7-8",ee.upsample,ee.parseUpsampleAttributesV7],["Upsample","","9",ee.upsample,ee.parseUpsampleAttributesV9],["Unsqueeze","","1-12",K.unsqueeze,K.parseUnsqueezeAttributes],["Unsqueeze","","13+",K.unsqueezeV13],["Xor","","7+",f.xor]]},8817:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const n=t(4910),a=t(6757),s=t(5639),c={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.batchNormalization=(g,m,l)=>(b(m),[g.run(Object.assign(Object.assign({},c),{cacheHint:l.cacheKey,get:()=>f(g,m,l)}),m)]),e.parseBatchNormalizationAttributes=g=>{const m=g.attributes.getFloat("epsilon",1e-5),l=g.attributes.getFloat("momentum",.9),o=g.attributes.getInt("spatial",1);return(0,n.createAttributeWithCacheKey)({epsilon:m,momentum:l,spatial:o})};const f=(g,m,l)=>{const o=(0,a.getGlsl)(g.session.backend.glContext.version),u=m[0].dims.length,[d,y]=g.calculateTextureWidthAndHeight(m[1].dims,s.TextureType.unpacked),w=`
  float process(int[${u}] indices) {
    vec2 position = offsetToCoords(indices[1], ${d}, ${y});
    float scale = getColorAsFloat(${o.texture2D}(Scale, position));
    float mean = getColorAsFloat(${o.texture2D}(Mean, position));
    float variance = getColorAsFloat(${o.texture2D}(Variance, position));
    float b = getColorAsFloat(${o.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${l.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},c),{output:{dims:m[0].dims,type:m[0].type,textureType:s.TextureType.unpacked},shaderSource:w})},b=g=>{if(!g||g.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const m=g[0],l=g[1],o=g[2],u=g[3],d=g[4];if(m.dims.length<3||l.dims.length!==1||o.dims.length!==1||u.dims.length!==1||d.dims.length!==1)throw new Error("invalid input shape.");if(l.dims[0]!==m.dims[1]||o.dims[0]!==m.dims[1]||u.dims[0]!==m.dims[1]||d.dims[0]!==m.dims[1])throw new Error("invalid input shape.");if(m.type!=="float32"&&m.type!=="float64"||l.type!=="float32"&&l.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||u.type!=="float32"&&u.type!=="float64"||d.type!=="float32"&&d.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const n=t(7273),a=t(1997),s=t(6757),c=t(5639);function f(){const A="add_";return{body:`
  float ${A}(float a, float b) {
    return a + b;
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:A,type:a.FunctionType.ValueBased}}function b(){const A="div_";return{body:`
  float ${A}(float a, float b) {
    return a / b;
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:A,type:a.FunctionType.ValueBased}}function g(){const A="mul_";return{body:`
  float ${A}(float a, float b) {
    return a * b;
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:A,type:a.FunctionType.ValueBased}}function m(){const A="sub_";return{body:`
  float ${A}(float a, float b) {
    return a - b;
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:A,type:a.FunctionType.ValueBased}}function l(){const A="equal_";return{body:`
  float ${A}(float a, float b) {
    return float(a == b);
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:A,type:a.FunctionType.ValueBased}}function o(){const A="greater_";return{body:`
  float ${A}(float a, float b) {
    return float(a > b);
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:A,type:a.FunctionType.ValueBased}}function u(){const A="less_";return{body:`
  float ${A}(float a, float b) {
    return float(a < b);
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:A,type:a.FunctionType.ValueBased}}function d(){const A="and_";return{body:`
  float ${A}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:A,type:a.FunctionType.ValueBased}}function y(){const A="or_";return{body:`
  float ${A}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:A,type:a.FunctionType.ValueBased}}function w(){const A="xor_";return{body:`
  float ${A}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:A,type:a.FunctionType.ValueBased}}function _(){return function(A){const P=`${A}_`;return{body:`
  float ${P}(float a, float b) {
    return ${A}(a, b);
  }
  vec4 ${P}(vec4 v1, vec4 v2) {
    return ${A}(v1, v2);
  }
  `,name:P,type:a.FunctionType.ValueBased}}("pow")}function T(){const A="prelu_";return{body:`
  float ${A}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${A}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:A,type:a.FunctionType.ValueBased}}e.glslAdd=f,e.glslDiv=b,e.glslMul=g,e.glslSub=m,e.glslEqual=l,e.glslGreater=o,e.glslLess=u,e.glslAnd=d,e.glslOr=y,e.glslXor=w,e.glslPow=_,e.glslPRelu=T;const S=(A,P,k,M=P[0].type,F)=>{const O=A.session.pack?c.TextureType.packed:c.TextureType.unpacked;return{name:k.name,inputNames:["A","B"],inputTypes:[O,O],cacheHint:F,get:()=>E(A,P,k,M)}},E=(A,P,k,M=P[0].type)=>{const F=A.session.pack?c.TextureType.packed:c.TextureType.unpacked,O=!n.ShapeUtil.areEqual(P[0].dims,P[1].dims);let D=P[0].dims;const R=A.session.pack;if(O){const N=n.BroadcastUtil.calcShape(P[0].dims,P[1].dims,!1);if(!N)throw new Error("Can't perform binary op on the given tensors");D=N;const V=D.length,j=P[0].dims.length!==0?P[0].dims.length:1,K=P[1].dims.length!==0?P[1].dims.length:1,ee=P[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",he=P[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",ge=(0,s.getGlsl)(A.session.backend.glContext.version),Se=R?`
      ${k.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${k.name}(a, b);
        ${ge.output} = result;
      }`:`
      ${k.body}
      float process(int indices[${V}]) {
        int aindices[${j}];
        int bindices[${K}];
        ${ee}
        ${he}
        return ${k.name}(_A(aindices), _B(bindices));
      }`;return{name:k.name,inputNames:["A","B"],inputTypes:[F,F],output:{dims:D,type:M,textureType:F},shaderSource:Se,hasMain:R}}const C=(0,s.getGlsl)(A.session.backend.glContext.version),U=`
    ${k.body}
    void main() {
      vec4 v1 = ${C.texture2D}(A, TexCoords);
      vec4 v2 = ${C.texture2D}(B, TexCoords);
      vec4 result = ${k.name}(v1, v2);
      ${C.output} = result;
    }
    `;return{name:k.name,inputNames:["A","B"],inputTypes:[F,F],output:{dims:P[0].dims,type:M,textureType:F},shaderSource:U,hasMain:!0}};e.add=(A,P)=>[A.run(S(A,P,f()),P)],e.and=(A,P)=>[A.run(S(A,P,d(),"bool"),P)],e.div=(A,P)=>[A.run(S(A,P,b()),P)],e.equal=(A,P)=>[A.run(S(A,P,l(),"bool"),P)],e.greater=(A,P)=>[A.run(S(A,P,o(),"bool"),P)],e.less=(A,P)=>[A.run(S(A,P,u(),"bool"),P)],e.mul=(A,P)=>[A.run(S(A,P,g()),P)],e.or=(A,P)=>[A.run(S(A,P,y(),"bool"),P)],e.pow=(A,P)=>[A.run(S(A,P,_()),P)],e.pRelu=(A,P)=>[A.run(S(A,P,T()),P)],e.sub=(A,P)=>[A.run(S(A,P,m()),P)],e.xor=(A,P)=>[A.run(S(A,P,w(),"bool"),P)]},4752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const n=t(7273);e.cast=(s,c,f)=>(a(c),[s.cast(c[0],f)]),e.parseCastAttributes=s=>n.ProtoUtil.tensorDataTypeFromProto(s.attributes.getInt("to"));const a=s=>{if(!s||s.length!==1)throw new Error("Cast requires 1 input.");if(s[0].type==="string")throw new Error("Invalid input type.")}},4595:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const n=t(6757),a=t(5639),s=t(432),c=t(5614);e.createPackedConcatProgramInfoLoader=(b,g,m)=>{const l=(o=g.length,u=m.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:o},(d,y)=>`X${y}`),inputTypes:Array(o).fill(a.TextureType.packed),cacheHint:u});var o,u;return Object.assign(Object.assign({},l),{get:()=>((d,y,w,_)=>{const T=w[0].dims.slice();if(_>=T.length||_<-1*T.length)throw new Error("axis specified for concat doesn't match input dimensionality");_<0&&(_=T.length+_);const S=T.slice(0);for(let ee=1;ee<w.length;ee++){const he=w[ee].dims.slice();for(let ge=0;ge<T.length;ge++)if(ge===_)S[_]+=he[ge];else if(T[ge]!==he[ge])throw new Error("non concat dimensions must match")}const E=S.length,A=(0,c.getChannels)("coords",E),P=(0,s.getCoordsDataType)(E),k=(0,c.unpackFromChannel)(),M=w.map(ee=>ee.dims),F=(0,s.getGlChannels)(E),O=new Array(M.length-1);O[0]=M[0][_];for(let ee=1;ee<O.length;ee++)O[ee]=O[ee-1]+M[ee][_];const D=F[_],R=F.slice(-2),C=F.join();let U=`if (${D} < ${O[0]}) {
        return getChannel(
            getX0(${C}), vec2(${R.join()}));
        }`;for(let ee=1;ee<O.length;ee++){const he=O[ee-1];U+=`
            if (${D} < ${O[ee]}  && ${D} >= ${O[ee-1]}) {
              return getChannel(
                getX${ee}(${f(F,D,he)}),
                vec2(${f(R,D,he)}));
            }`}const N=O.length,V=O[O.length-1];U+=`
            return getChannel(
              getX${N}(${f(F,D,V)}),
              vec2(${f(R,D,V)}));`;const j=(0,n.getGlsl)(d.session.backend.glContext.version),K=`
          ${k}
          float getValue(${F.map(ee=>"int "+ee)}) {
            ${U}
          }

          void main() {
            ${P} coords = getOutputCoords();
            int lastDim = coords.${F[E-1]};
            coords.${F[E-1]} = coords.${F[E-2]};
            coords.${F[E-2]} = lastDim;

            vec4 result = vec4(getValue(${A}), 0., 0., 0.);

            ${A[E-1]} = ${A[E-1]} + 1;
            if (${A[E-1]} < ${S[E-1]}) {
              result.g = getValue(${A});
            }

            ${A[E-2]} = ${A[E-2]} + 1;
            if (${A[E-2]} < ${S[E-2]}) {
              result.a = getValue(${A});
            }

            ${A[E-1]} = ${A[E-1]} - 1;
            if (${A[E-2]} < ${S[E-2]} &&
                ${A[E-1]} < ${S[E-1]}) {
              result.b = getValue(${A});
            }
            ${j.output} = result;
          }
        `;return Object.assign(Object.assign({},y),{output:{dims:S,type:w[0].type,textureType:a.TextureType.packed},shaderSource:K,hasMain:!0})})(b,l,g,m.axis)})};const f=(b,g,m)=>{const l=b.indexOf(g);return b.map((o,u)=>u===l?`${o} - ${m}`:o).join()}},6668:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const n=t(4910),a=t(5639),s=t(4595);e.concat=(o,u,d)=>(l(u),o.session.pack&&u[0].dims.length>1?[o.run((0,s.createPackedConcatProgramInfoLoader)(o,u,d),u)]:[o.run(c(o,u,d),u)]);const c=(o,u,d)=>{const y=(w=u.length,_=d.cacheKey,{name:"Concat",inputNames:Array.from({length:w},(T,S)=>`X${S}`),inputTypes:Array(w).fill(a.TextureType.unpacked),cacheHint:_});var w,_;return Object.assign(Object.assign({},y),{get:()=>((T,S,E,A)=>{const P=E[0].dims.slice();if(A>=P.length||A<-1*P.length)throw new Error("axis specified for concat doesn't match input dimensionality");A<0&&(A=P.length+A);const k=P.slice(0);for(let C=1;C<E.length;C++){const U=E[C].dims.slice();for(let N=0;N<P.length;N++)if(N===A)k[A]+=U[N];else if(P[N]!==U[N])throw new Error("non concat dimensions must match")}const M=k.length,F=new Array(E.length);let O=0;for(let C=0;C<F.length;++C)O+=E[C].dims[A],F[C]=O;let D="";D=E.length<5?f(F):b(F);const R=`
        ${g(E.length,M)}
        ${m(F)}
        ${D}
        float process(int indices[${M}]) {
          int textureIndex = getTextureWhereDataResides (indices[${A}]);

          if(textureIndex != 0) {
            indices[${A}] = indices[${A}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},S),{output:{dims:k,type:E[0].type,textureType:a.TextureType.unpacked},shaderSource:R})})(0,y,u,d.axis)})},f=o=>`int getTextureWhereDataResides(int index) {
      ${o.map((u,d)=>`if(index<${u}) {return ${d};}
`).join("")}
    }`,b=o=>f(o),g=(o,u)=>{const d=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${u}]) {`];for(let y=0;y<o;++y)y===0?d.push(`	if (textureIndex == ${y}) { return _X${y}(indices); }`):y===o-1?d.push(`	else { return _X${y}(indices); }`):d.push(`	else if (textureIndex == ${y}) { return _X${y}(indices); }`);return d.push("	}"),d.join(`
`)},m=o=>{const u=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let d=0;d<o.length;++d)d===0?u.push(`	if (index == ${d}) { return ${o[d]}; }`):d===o.length-1?u.push(`	else { return ${o[d]}; }`):u.push(`	else if (index == ${d}) { return ${o[d]}; }`);return u.push("	}"),u.join(`
`)};e.parseConcatAttributes=o=>(0,n.createAttributeWithCacheKey)({axis:o.attributes.getInt("axis")});const l=o=>{if(!o||o.length<1)throw new Error("too few inputs");const u=o[0].type,d=o[0].dims.length;if(u==="string")throw new Error("string tensor is not supported yet");for(const y of o){if(y.type!==u)throw new Error("input tensors should be one type");if(y.dims.length!==d)throw new Error("input tensors should have the same shape")}}},7825:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const n=t(1315),a=t(6757),s=t(5639),c=t(9754),f=t(2150);e.createUnpackedGroupedConvProgramInfoLoader=(b,g,m)=>{const l=(o=g.length>2,u=m.cacheKey,{name:"GroupedConv",inputNames:o?["X","W","Bias"]:["X","W"],inputTypes:o?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:u});var o,u;return Object.assign(Object.assign({},l),{get:()=>((d,y,w,_)=>{const T=y.length>2?"value += getBias(output_channel);":"",S=y[0].dims.slice(),E=y[1].dims.slice(),A=E[0]/_.group;n.Logger.verbose("GroupedConv",`autpPad:${_.autoPad}, dilations:${_.dilations}, group:${_.group}, kernelShape:${_.kernelShape}, pads:${_.pads}, strides:${_.strides}`);const P=(0,c.calculateOutputShape)(S,E,_.dilations,_.pads,_.strides),k=(0,a.getGlsl)(d.session.backend.glContext.version),{activationFunction:M,applyActivation:F}=(0,f.getActivationSnippet)(_),O=`
  const ivec2 strides = ivec2(${_.strides[0]}, ${_.strides[1]});
  const ivec2 pads = ivec2(${_.pads[0]}, ${_.pads[1]});
  ${M}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${A};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${E[1]}; wInChannel++) {
      int input_channel = group_id * ${E[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${E[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${_.dilations[0]};

        if (xHeight < 0 || xHeight >= ${S[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${E[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${_.dilations[1]};
          if (xWidth < 0 || xWidth >= ${S[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${T}
    ${F}
    ${k.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},w),{output:{dims:P,type:y[0].type,textureType:s.TextureType.unpacked},shaderSource:O,hasMain:!0})})(b,g,l,m)})}},7708:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const n=t(9754),a=t(5950),s=t(5632);e.conv2DPackedPointwise=(c,f,b)=>{const g=f[0].dims,m=f[1].dims,l=(0,n.calculateOutputShape)(g,m,b.dilations,b.pads,b.strides),o=c.reshapePacked(f[0],[g[1],g[2]*g[3]]),u=c.reshapePacked(f[1],[m[0],m[1]]),d=f.length>2?[u,o,f[2]]:[u,o],y=c.run((0,s.createPackedMatmulProgramInfoLoader)(c,d,b),d);return c.reshapePacked(y,l)},e.conv2DPacked=(c,f,b)=>{const g=f[0].dims,m=f[1].dims,l=(0,n.calculateOutputShape)(g,m,b.dilations,b.pads,b.strides),o=c.run((0,a.createPackedIm2ColProgramInfoLoader)(c,f[0],f[1],l,b),[f[0]]),u=c.reshapePacked(f[1],[m[0],m[1]*m[2]*m[3]]),d=f.length===3?[u,o,f[2]]:[u,o],y=c.run((0,s.createPackedMatmulProgramInfoLoader)(c,d,b),d);return c.reshapePacked(y,l)}},5042:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const n=t(4910),a=t(6757),s=t(5639),c=t(2150),f=(u,d,y,w,_,T)=>(u-1)*d+y+(w-1)*_+1-T,b=(u,d,y,w,_)=>{const T=Math.floor(u/2);d==="SAME_UPPER"?(y[w]=T,y[_]=u-T):d==="SAME_LOWER"&&(y[w]=u-T,y[_]=T)};e.convTranspose=(u,d,y)=>(o(d,y),g(u,d,y));const g=(u,d,y)=>{const w=l(y,d);return[m(u,d,w)]},m=(u,d,y)=>u.run(((w,_,T)=>{const S=(E=_.length>2,A=T.cacheKey,{name:"ConvTranspose",inputNames:E?["X","W","B"]:["X","W"],inputTypes:E?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:A});var E,A;return Object.assign(Object.assign({},S),{get:()=>((P,k,M,F)=>{const O=k.length>2?"getB(output_channel)":"0.0",D=k[0].dims,R=k[1].dims,C=R[1],U=R[0]/F.group,N=[k[0].dims[0],k[1].dims[1]*F.group,...F.outputShape],V=(0,a.getGlsl)(P.session.backend.glContext.version),{activationFunction:j,applyActivation:K}=(0,c.getActivationSnippet)(F),ee=`
  const ivec2 strides = ivec2(${F.strides[0]}, ${F.strides[1]});
  const ivec2 pads = ivec2(${F.pads[0]}, ${F.pads[1]});
  ${j}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${C};
    int wOutChannel = output_channel - group_id * ${C};

    float value = ${O};
    for (int inChannelOffset = 0; inChannelOffset < ${U}; inChannelOffset++) {
      int input_channel = group_id * ${U} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${R[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${R[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${F.dilations[0]}, wHOff * ${F.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${D[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${D[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${K}
    ${V.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},M),{output:{dims:N,type:k[0].type,textureType:s.TextureType.unpacked},shaderSource:ee,hasMain:!0})})(w,_,S,T)})})(u,d,y),d),l=(u,d)=>{const y=u.kernelShape.slice();if(u.kernelShape.length===0)for(let S=2;S<d[1].dims.length;++S)y.push(d[1].dims[S]);const w=u.pads.slice(),_=u.outputShape.slice();((S,E,A,P,k,M,F,O)=>{const D=S.length-2,R=O.length===0;for(let C=0;C<D;++C){const U=R?S[C+2]*M[C]:O[C],N=f(S[C+2],M[C],k[C],E[C],A[C],U);b(N,P,k,C,C+D),R&&O.push(M[C]*(S[C+2]-1)+F[C]+(E[C]-1)*A[C]+1-k[C]-k[C+D])}})(d[0].dims,y,u.dilations,u.autoPad,w,u.strides,u.outputPadding,_);const T=Object.assign({},u);return Object.assign(T,{kernelShape:y,pads:w,outputShape:_,cacheKey:u.cacheKey}),T};e.parseConvTransposeAttributes=u=>{const d=u.attributes,y=(0,c.parseInternalActivationAttributes)(d),w=d.getString("auto_pad","NOTSET"),_=d.getInts("dilations",[1,1]),T=d.getInt("group",1),S=d.getInts("kernel_shape",[]),E=d.getInts("output_padding",[0,0]),A=d.getInts("output_shape",[]),P=d.getInts("pads",[0,0,0,0]),k=d.getInts("strides",[1,1]);return(0,n.createAttributeWithCacheKey)(Object.assign({autoPad:w,dilations:_,group:T,kernelShape:S,outputPadding:E,outputShape:A,pads:P,strides:k},y))};const o=(u,d)=>{if(!u||u.length!==2&&u.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(u[0].dims.length!==4||u[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(u[0].dims[1]!==u[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const y=u[1].dims[1]*d.group;if(u.length===3&&(u[2].dims.length!==1||u[2].dims[0]!==y))throw new Error("invalid bias");const w=u[0].dims.length-2;if(d.dilations.length!==w)throw new Error(`dilations should be ${w}D`);if(d.strides.length!==w)throw new Error(`strides should be ${w}D`);if(d.pads.length!==2*w)throw new Error(`pads should be ${2*w}D`);if(d.outputPadding.length!==w)throw new Error(`output_padding should be ${w}D`);if(d.kernelShape.length!==0&&d.kernelShape.length!==u[1].dims.length-2)throw new Error("invalid kernel shape");if(d.outputShape.length!==0&&d.outputShape.length!==u[0].dims.length-2)throw new Error("invalid output shape");if(u[0].type!=="float32"||u[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(u.length===3&&u[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const n=t(4910),a=t(7273),s=t(7825),c=t(7708),f=t(3281),b=t(2150),g=t(1625),m=t(8276);e.calculateOutputShape=(w,_,T,S,E)=>{const A=w[0],P=w.slice(2),k=P.length,M=_[0],F=_.slice(2).map((D,R)=>D+(D-1)*(T[R]-1)),O=P.map((D,R)=>D+S[R]+S[R+k]).map((D,R)=>Math.floor((D-F[R]+E[R])/E[R]));return[A,M].concat(...O)},e.conv=(w,_,T)=>(y(_,T),l(w,_,T));const l=(w,_,T)=>{const S=d(T,_),E=w.session.pack,A=S.kernelShape[0]===1&&S.kernelShape[1]===1;return S.group>1?[w.run((0,s.createUnpackedGroupedConvProgramInfoLoader)(w,_,S),_)]:A&&E?[o(w,_,S)]:E&&_[0].dims.length===4&&_[0].dims[0]===1&&!A?[(0,c.conv2DPacked)(w,_,S)]:[u(w,_,S)]},o=(w,_,T)=>{const S=_[0].dims,E=_[1].dims,A=(0,e.calculateOutputShape)(S,E,T.dilations,T.pads,T.strides),P=w.reshapeUnpacked(_[0],[S[1],S[2]*S[3]]),k=w.reshapeUnpacked(_[1],[E[0],E[1]]),M=_.length>2?[k,P,_[2]]:[k,P],F=w.run((0,m.createMatmulProgramInfoLoader)(M,T),M);return w.reshapeUnpacked(F,A)},u=(w,_,T)=>{const S=_[0].dims,E=_[1].dims,A=(0,e.calculateOutputShape)(S,E,T.dilations,T.pads,T.strides),P=w.run((0,g.createIm2ColProgramInfoLoader)(w,_[0],_[1],A,T),[_[0]]),k=_.length===3?[P,_[1],_[2]]:[P,_[1]];return w.run((0,f.createDotProductProgramInfoLoader)(w,_,A,T),k)},d=(w,_)=>{const T=w.kernelShape.slice();if(w.kernelShape.length===0)for(let A=2;A<_[1].dims.length;++A)T.push(_[1].dims[A]);const S=w.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(_[0].dims,w.strides,w.dilations,T,S,w.autoPad);const E=Object.assign({},w);return Object.assign(E,{kernelShape:T,pads:S,cacheKey:w.cacheKey}),E};e.parseConvAttributes=w=>{const _=w.attributes,T=(0,b.parseInternalActivationAttributes)(_),S=_.getString("auto_pad","NOTSET"),E=_.getInts("dilations",[1,1]),A=_.getInt("group",1),P=_.getInts("kernel_shape",[]),k=_.getInts("pads",[0,0,0,0]),M=_.getInts("strides",[1,1]);return(0,n.createAttributeWithCacheKey)(Object.assign({autoPad:S,dilations:E,group:A,kernelShape:P,pads:k,strides:M},T))};const y=(w,_)=>{if(!w||w.length!==2&&w.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(w[0].dims.length!==4||w[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(w[0].dims[1]!==w[1].dims[1]*_.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(w.length===3&&(w[2].dims.length!==1||w[1].dims[0]!==w[2].dims[0]))throw new Error("invalid bias");const T=w[0].dims.length-2;if(_.dilations.length!==T)throw new Error(`dilations should be ${T}D`);if(_.strides.length!==T)throw new Error(`strides should be ${T}D`);if(_.pads.length!==2*T)throw new Error(`pads should be ${2*T}D`);if(_.kernelShape.length!==0&&_.kernelShape.length!==w[1].dims.length-2)throw new Error("invalid kernel shape");if(w[0].type!=="float32"||w[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(w.length===3&&w[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const n=t(5707);e.depthToSpace=(s,c,f)=>{a(c);const b=f.blocksize,g=b*b,m=f.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],l=f.mode==="DCR"?[c[0].dims[0],b,b,c[0].dims[1]/g,c[0].dims[2],c[0].dims[3]]:[c[0].dims[0],c[0].dims[1]/g,b,b,c[0].dims[2],c[0].dims[3]],o=s.reshapeUnpacked(c[0],l),u={perm:m,cacheKey:`${m}`},[d]=(0,n.transpose)(s,[o],u),y=[c[0].dims[0],c[0].dims[1]/g,c[0].dims[2]*b,c[0].dims[3]*b];return[s.reshapeUnpacked(d,y)]},e.parseDepthToSpaceAttributes=s=>{const c=s.attributes.getInt("blocksize");if(c<1)throw new Error(`blocksize must be >= 1, but got : ${c} for DepthToSpace`);const f=s.attributes.getString("mode","DCR");if(f!=="DCR"&&f!=="CRD")throw new Error(`unrecognized mode: ${f} for DepthToSpace`);return{mode:f,blocksize:c}};const a=s=>{if(s.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${s.length}`);if(s[0].type==="string"||s[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const n=t(7273),a=t(6757),s=t(5639),c=t(2150),f=t(1625);e.createDotProductProgramInfoLoader=(b,g,m,l)=>{const o=((u,d)=>({name:"ConvDotProduct",inputNames:u?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:u?[s.TextureType.unpacked,s.TextureType.packedLastDimension,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.packedLastDimension],cacheKey:d.activationCacheKey}))(g.length>2,l);return Object.assign(Object.assign({},o),{get:()=>((u,d,y,w,_)=>{const T=y[0].dims,S=y[1].dims,E=[S[0],Math.ceil(T[1]*S[2]*S[3]/4)],A=(0,f.calculateIm2ColDims)(T,S,w),[P,k]=u.calculateTextureWidthAndHeight(E,s.TextureType.packedLastDimension),M=n.ShapeUtil.computeStrides(A),[F,O]=u.calculateTextureWidthAndHeight(A,s.TextureType.packedLastDimension),D=w.length,R=y.length<3?"0.0":"_B(b)",C=Math.ceil(T[1]*S[2]*S[3]/4),{activationFunction:U,applyActivation:N}=(0,c.getActivationSnippet)(_),V=(0,a.getGlsl)(u.session.backend.glContext.version),j=`
${U}
float process(int indices[${D}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${M[0]} + im2col[1] * ${M[1]} + im2col[2] * ${M[2]};
  int kernelOffset = indices[1] * ${E[1]};
  float value = ${R};
  for (int i = 0; i < ${C}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${F}, ${O});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${P}, ${k});
    value += dot(${V.texture2D}(Im2Col, im2colCoords), ${V.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${N}
  return value;
}`;return Object.assign(Object.assign({},d),{output:{dims:w,type:y[0].type,textureType:s.TextureType.unpacked},shaderSource:j})})(b,o,g,m,l)})}},4125:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const n=t(7273);e.flatten=(s,c,f)=>{a(c,f);const b=n.ShapeUtil.flattenShape(c[0].dims,f);return[s.reshapeUnpacked(c[0],b)]},e.parseFlattenAttributes=s=>s.attributes.getInt("axis",1);const a=(s,c)=>{if(!s||s.length!==1)throw new Error("Flatten requires 1 input.");const f=s[0].dims.length;if(f===0)throw new Error("scalar tensor is not supported.");if(c<-f||c>f)throw new Error("Invalid axis");if(s[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const n=t(7273),a=t(9087);e.getActivationSnippet=function(s){let c;switch(s.activation){case"Relu":c=(0,a.glslRelu)();break;case"Sigmoid":c=(0,a.glslSigmoid)();break;case"Clip":c=(0,a.glslClip)(s.clipMin,s.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const f=c.name;return{activationFunction:c.body,applyActivation:`value = ${f}_(value);`}},e.parseInternalActivationAttributes=s=>{const c=s.getString("activation","");if(c==="Clip"){const[f,b]=s.getFloats("activation_params",[n.MIN_CLIP,n.MAX_CLIP]);return{activation:c,clipMax:b,clipMin:f,activationCacheKey:`${c}:${f},${b}`}}return{activation:c,activationCacheKey:c}}},6149:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const n=t(4910),a=t(6145),s=t(7273),c=t(5639);e.gather=(m,l,o)=>(g(l,o.axis),[m.run(b(m,l,o),l)]),e.parseGatherAttributes=m=>(0,n.createAttributeWithCacheKey)({axis:m.attributes.getInt("axis",0)});const f={name:"Gather",inputNames:["A","B"],inputTypes:[c.TextureType.unpacked,c.TextureType.unpacked]},b=(m,l,o)=>{const u=Object.assign(Object.assign({},f),{cacheHint:o.cacheKey});return Object.assign(Object.assign({},u),{get:()=>((d,y,w,_)=>{const T=w[0].dims.slice(),S=w[1].dims.slice(),E=new Array(T.length+S.length-1);_=s.ShapeUtil.normalizeAxis(_,T.length);const A=[];for(let k=0;k<E.length;k++)k<_?(E[k]=T[k],A.push(`inputIdx[${k}] = outputIdx[${k}];`)):k<_+S.length?(E[k]=S[k-_],A.push(`indexDataIdx[${k-_}] = outputIdx[${k}];`)):(E[k]=T[k-S.length+1],A.push(`inputIdx[${k-S.length+1}] = outputIdx[${k}];`));const P=`
      float process(int outputIdx[${E.length||1}]) {
        int inputIdx[${T.length}];
        int indexDataIdx[${S.length||1}];
        indexDataIdx[0] = 0;
        ${A.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${_}] = idx < 0 ? idx + ${T[_]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},y),{output:{dims:E,type:w[0].type,textureType:c.TextureType.unpacked},shaderSource:P})})(0,u,l,o.axis)})},g=(m,l)=>{if(!m||m.length!==2)throw new Error("Gather requires 2 inputs.");const o=m[0].dims.length;if(o<1)throw new Error("Invalid input shape.");if(l<-o||l>o-1)throw new Error("Invalid axis.");if(a.NUMBER_TYPES.indexOf(m[0].type)===-1)throw new Error("Invaid input type.");if(m[1].type!=="int32"&&m[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const n=t(4910),a=t(7273),s=t(5639);e.gemm=(m,l,o)=>(g(l,o),[m.run(f(l,o),l)]);const c=(m,l)=>{const o=m.attributes.getInt("transA",0)!==0,u=m.attributes.getInt("transB",0)!==0,d=m.attributes.getFloat("alpha",1),y=m.attributes.getFloat("beta",1);return(0,n.createAttributeWithCacheKey)({transA:o,transB:u,alpha:d,beta:y,isOptionalC:l})};e.parseGemmAttributesV7=m=>c(m,!1),e.parseGemmAttributesV11=m=>c(m,!0);const f=(m,l)=>{const o={name:"Gemm",inputNames:m.length===3?["A","B","C"]:["A","B"],inputTypes:m.length===3?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],key:l.cacheKey};return Object.assign(Object.assign({},o),{get:()=>b(o,m,l)})},b=(m,l,o)=>{const u=l[0].dims.slice(),d=l[1].dims.slice(),[y,w]=a.GemmUtil.getShapeOfGemmResult(u,o.transA,d,o.transB,l.length===3?l[2].dims:void 0),_=[y,w];if(!_)throw new Error("Can't use gemm on the given tensors");let T=u[u.length-1],S="";o.transA&&(T=u[0]),o.transA&&o.transB?S="value += _A_T(a) * _B_T(b);":o.transA&&!o.transB?S="value += _A_T(a) * _B(b);":!o.transA&&o.transB?S="value += _A(a) * _B_T(b);":o.transA||o.transB||(S="value += _A(a) * _B(b);");const E=_.length,A=`
      float process(int indices[${E}]) {
          int a[${E}];
          int b[${E}];
          ${l.length===3?`int c[${l[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${l.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${T}; ++k) {
              a[${E-1}] = k;
              b[${E-2}] = k;
              ${S}
          }

          value = value * alpha;
          ${l.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},m),{output:{dims:_,type:l[0].type,textureType:s.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:o.alpha},{name:"beta",type:"float",data:o.beta}],shaderSource:A})},g=(m,l)=>{if(!m)throw new Error("Input is missing");if(l.isOptionalC&&(m.length<2||m.length>3))throw new Error("Invaid input shape.");if(!l.isOptionalC&&m.length!==3)throw new Error("Gemm requires 3 inputs");if(m.length===3&&m[2].dims.length!==1&&m[2].dims.length!==2)throw new Error("Invalid input shape of C");if(m[0].type!=="float32"&&m[0].type!=="float64"||m[1].type!=="float32"&&m[1].type!=="float64"||m.length===3&&m[2].type!=="float32"&&m[2].type!=="float64")throw new Error("Invalid input type.");if(m[0].type!==m[1].type||m.length===3&&m[0].type!==m[2].type)throw new Error("Input types are mismatched")}},5950:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const n=t(6757),a=t(5639),s=t(5614);e.createPackedIm2ColProgramInfoLoader=(c,f,b,g,m)=>{const l=(o=m.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[a.TextureType.packed],cacheHint:o});var o;return Object.assign(Object.assign({},l),{get:()=>((u,d,y,w,_,T)=>{const S=y.dims,E=w.dims,A=_.length,P=[E[1]*E[2]*E[3],_[2]*_[3]],k=E[2]*E[3],M=(0,s.unpackFromChannel)(),F=(0,n.getGlsl)(u.session.backend.glContext.version);let O="";for(let R=0;R<=1;R++)for(let C=0;C<=1;C++)O+=`
            blockIndex = rc.x + ${C};
            pos = rc.y + ${R};

            if(blockIndex < ${P[1]} && pos < ${P[0]}) {
              offsetY = int(blockIndex / (${_[A-1]})) * ${T.strides[0]} -
                ${T.pads[0]};
              d0 = offsetY + ${T.dilations[0]} * (imod(pos, ${k}) / ${E[2]});

              if(d0 < ${S[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${_[A-1]}) * ${T.strides[1]} -
                  ${T.pads[1]};
                d1 = offsetX + ${T.dilations[1]} * imod(imod(pos, ${k}), ${E[2]});

                if(d1 < ${S[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${k}.);
                    innerDims = vec2(d0, d1);
                    result[${2*R+C}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const D=`
      ${M}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${O}
          ${F.output} = result;
      }
            `;return Object.assign(Object.assign({},d),{output:{dims:P,type:y.type,textureType:a.TextureType.packed},shaderSource:D,hasMain:!0})})(c,l,f,b,g,m)})}},1625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const n=t(5639);e.createIm2ColProgramInfoLoader=(a,s,c,f,b)=>{const g=(m=b.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[n.TextureType.unpacked],cacheHint:m});var m;return Object.assign(Object.assign({},g),{get:()=>((l,o,u,d,y,w)=>{const _=u.dims,T=d.dims,S=y.length,E=(0,e.calculateIm2ColDims)(_,T,y,4),A=`
        const int XC = ${_[1]};
        const int XH = ${_[2]};
        const int XW = ${_[3]};
        const int KH = ${w.kernelShape[0]};
        const int KW = ${w.kernelShape[1]};
        const int dilationH = ${w.dilations[0]};
        const int dilationW = ${w.dilations[1]};
        const int strideH = ${w.strides[0]};
        const int strideW = ${w.strides[1]};
        const int padH = ${w.pads[0]};
        const int padW = ${w.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${S}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${_.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},o),{output:{dims:E,type:u.type,textureType:n.TextureType.packedLastDimension},shaderSource:A})})(0,g,s,c,f,b)})},e.calculateIm2ColDims=(a,s,c,f=4)=>[c[0],c[2],c[3],Math.ceil(a[1]*s[2]*s[3]/f)]},6981:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const n=t(4910),a=t(5639);e.imageScaler=(g,m,l)=>(b(m),[g.run(c(g,m,l),m)]),e.parseImageScalerAttributes=g=>{const m=g.attributes.getFloat("scale"),l=g.attributes.getFloats("bias");return(0,n.createAttributeWithCacheKey)({scale:m,bias:l})};const s={name:"ImageScaler",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},c=(g,m,l)=>{const o=Object.assign(Object.assign({},s),{cacheHint:l.cacheKey});return Object.assign(Object.assign({},o),{get:()=>((u,d,y,w)=>{const _=y[0].dims.slice(),T=_.length,S=`
      ${f(w.bias.length)}
      float process(int indices[${T}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},d),{output:{dims:_,type:y[0].type,textureType:a.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:w.bias.length,data:w.bias},{name:"scale",type:"float",data:w.scale}],shaderSource:S})})(0,o,m,l)})},f=g=>{const m=[`float getBias(float bias[${g}], int channel) {`];for(let l=0;l<g;++l)l===0?m.push(`	if (channel == ${l}) { return bias[${l}]; }`):l===g-1?m.push(`	else { return bias[${l}]; }`):m.push(`	else if (channel == ${l}) { return bias[${l}]; }`);return m.push("	}"),m.join(`
`)},b=g=>{if(!g||g.length!==1)throw new Error("ImageScaler requires 1 input.");if(g[0].dims.length!==4)throw new Error("Invalid input shape.");if(g[0].type!=="float32"&&g[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const n=t(6757),a=t(5639);e.instanceNormalization=(m,l,o)=>{g(l);const u=m.run(c(l[0]),l);return[m.run(b(m,l[0],o,u.dims),[l[0],u,l[1],l[2]])]},e.parseInstanceNormalizationAttributes=m=>m.attributes.getFloat("epsilon",1e-5);const s={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},c=m=>Object.assign(Object.assign({},s),{get:()=>((l,o)=>{const u=o.dims.slice(),d=u[1],y=u[2]*u[3],w=[u[0],d],_=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${u[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${u[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${y});
        temp = 0.0;
        for(int a2=0; a2<${u[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${u[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${y});

        return v;
      }`;return Object.assign(Object.assign({},l),{output:{dims:w,type:o.type,textureType:a.TextureType.packedLastDimension},shaderSource:_})})(s,m)}),f={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[a.TextureType.unpacked,a.TextureType.packedLastDimension,a.TextureType.unpacked,a.TextureType.unpacked]},b=(m,l,o,u)=>{const d=Object.assign(Object.assign({},f),{cacheHint:`${o}`});return Object.assign(Object.assign({},d),{get:()=>((y,w,_,T,S)=>{const E=(0,n.getGlsl)(y.session.backend.glContext.version),[A,P]=y.calculateTextureWidthAndHeight(S,a.TextureType.packedLastDimension),[k,M]=[A/4,P],F=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${k}, ${M});
        return ${E.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},w),{output:{dims:_.dims,type:_.type,textureType:a.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:T}],shaderSource:F})})(m,d,l,o,u)})},g=m=>{if(!m||m.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const l=m[0],o=m[1],u=m[2];if(l.dims.length<3||o.dims.length!==1||u.dims.length!==1)throw new Error("Invalid input shape.");if(o.dims[0]!==l.dims[1]||u.dims[0]!==l.dims[1])throw new Error("Input shapes are mismatched.");if(l.type!=="float32"&&l.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||u.type!=="float32"&&u.type!=="float64")throw new Error("Invalid input type.");if(m[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createLrnProgramInfoLoader=e.parseLrnAttributes=e.lrn=void 0;const n=t(4910),a=t(5639);e.lrn=(b,g,m)=>(f(g),[b.run(c(g,m),g)]),e.parseLrnAttributes=b=>{const g=b.attributes.getFloat("alpha",1e-4),m=b.attributes.getFloat("beta",.75),l=b.attributes.getFloat("bias",1),o=b.attributes.getInt("size");return(0,n.createAttributeWithCacheKey)({alpha:g,beta:m,bias:l,size:o})};const s={name:"LRN",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};function c(b,g){return Object.assign(Object.assign({},s),{cacheHint:g.cacheKey,get:()=>function(m,l){const o=m[0].dims[1],u=m[0].dims.length,d=-Math.floor((l.size-1)/2),y=Math.ceil((l.size-1)/2),w=`float(${l.alpha}) / float(${l.size})`,_=`
    float process(int indices[${u}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${d}; i <= ${y}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${o}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${l.bias}) + ${w} * square_sum, float(${l.beta}));
    }`;return Object.assign(Object.assign({},s),{cacheHint:l.cacheKey,output:{dims:m[0].dims,type:m[0].type,textureType:a.TextureType.unpacked},shaderSource:_})}(b,g)})}e.createLrnProgramInfoLoader=c;const f=b=>{if(!b||b.length!==1)throw new Error("LRN requires 1 input.");if(b[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(b[0].type!=="float32")throw new Error("input should be float type")}},5632:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const n=t(7273),a=t(6757),s=t(5639),c=t(432),f=t(2150),b=t(8276);e.createPackedMatmulProgramInfoLoader=(g,m,l)=>{const o=(u=m.length>2,d=l.activationCacheKey,{name:"MatMul (packed)",inputNames:u?["A","B","Bias"]:["A","B"],inputTypes:u?[s.TextureType.packed,s.TextureType.packed,s.TextureType.packed]:[s.TextureType.packed,s.TextureType.packed],cacheHint:d});var u,d;return Object.assign(Object.assign({},o),{get:()=>((y,w,_,T)=>{const S=_.length>2,E=S?"value += getBiasForMatmul();":"",A=_[0].dims,P=_[1].dims,k=n.BroadcastUtil.calcShape(A,P,!0),M=!n.ShapeUtil.areEqual(_[0].dims,_[1].dims);if(!k)throw new Error("Can't use matmul on the given tensors");const F=A[A.length-1],O=Math.ceil(F/2),D=A.length,R=P.length,C=(0,a.getGlsl)(y.session.backend.glContext.version),U=(0,c.getCoordsDataType)(k.length),N=k.length,V=(0,c.getGlChannels)(),{activationFunction:j,applyActivation:K}=(0,f.getActivationSnippet)(T),ee=S?`${(0,b.getBiasForMatmul)(U,V,_[2].dims,k,!0)}`:"",he=M?`${function(ne,re,oe,Ee){let Re=[],De=[];const He=oe[0].dims,qe=oe[1].dims,W=He.length,X=qe.length,te=Ee.length,ie=te-W,ye=te-X;Re=He.map((Oe,fe)=>`coords.${re[fe+ie]}`),Re[W-1]="i*2",Re.join(", "),De=qe.map((Oe,fe)=>`coords.${re[fe+ye]}`),De[X-2]="i*2",De.join(", ");const be=n.BroadcastUtil.getBroadcastDims(He,Ee),Ae=n.BroadcastUtil.getBroadcastDims(qe,Ee),J=be.map(Oe=>`coords.${re[Oe+ie]} = 0;`).join(`
`),ve=Ae.map(Oe=>`coords.${re[Oe+ye]} = 0;`).join(`
`),de=`int lastDim = coords.${re[te-1]};
  coords.${re[te-1]} = coords.${re[te-2]};
  coords.${re[te-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${ne} coords = getOutputCoords();
  ${de}
  ${J}
  vec4 outputValue = getA(${Re});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${ne} coords = getOutputCoords();
  ${de}
  ${ve}
  vec4 outputValue = getB(${De});
  return outputValue;
}`}(U,V,_,k)}`:"",ge=M?"getAAtOutCoordsMatmul(i)":`getA(${function(ne,re){let oe="";for(let Ee=0;Ee<re-2;Ee++)oe+=`rc.${ne[Ee]}, `;return oe+=`rc.${ne[re-2]}, i*2`,oe}(V,D)})`,Se=M?"getBAtOutCoordsMatmul(i)":`getB(${function(ne,re){let oe="";for(let Ee=0;Ee<re-2;Ee++)oe+=`rc.${ne[Ee]}, `;return oe+=`i*2, rc.${ne[re-1]}`,oe}(V,R)})`,we=`
            ${he}
            ${ee}
            ${j}
            void main() {
              ${M?"":`${U} rc =
          getOutputCoords(); int lastDim = rc.${V[N-1]}; rc.${V[N-1]} =
          rc.${V[N-2]}; rc.${V[N-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${O}; i++) {
                vec4 a = ${ge};
                vec4 b = ${Se};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${E}
              ${K}
              ${C.output} = value;
            }`;return Object.assign(Object.assign({},w),{output:{dims:k,type:_[0].type,textureType:s.TextureType.packed},shaderSource:we,hasMain:!0})})(g,o,m,l)})}},8276:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const n=t(7273),a=t(5639),s=t(432),c=t(2150),f=t(5632);e.matMul=(o,u,d)=>(m(u),o.session.pack?[o.run((0,f.createPackedMatmulProgramInfoLoader)(o,u,d),u)]:[o.run(g(u,d),u)]),e.parseMatMulAttributes=o=>(0,c.parseInternalActivationAttributes)(o.attributes);const b=(o,u)=>({name:"MatMul",inputNames:o?["A","B","Bias"]:["A","B"],inputTypes:o?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:u});function g(o,u){const d=b(o.length>2,u.activationCacheKey);return Object.assign(Object.assign({},d),{get:()=>function(y,w,_){const T=w[0].dims,S=w[1].dims,E=n.BroadcastUtil.calcShape(T,S,!0);if(!E)throw new Error("Can't use matmul on the given tensors");const A=(0,s.getCoordsDataType)(E.length),P=(0,s.getGlChannels)(),{activationFunction:k,applyActivation:M}=(0,c.getActivationSnippet)(_),F=w.length>2,O=F?"value += getBiasForMatmul();":"",D=F?`${l(A,P,w[2].dims,E,!1)}`:"",R=E.length,C=T.length,U=S.length,N=`
    ${k}
    ${D}
    float process(int indices[${R}]) {
        int a[${C}];
        int b[${U}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${T[T.length-1]}; ++k) {
            a[${C-1}] = k;
            b[${U-2}] = k;
            value += _A(a) * _B(b);
        }
        ${O}
        ${M}
        return value;
    }`;return Object.assign(Object.assign({},y),{output:{dims:E,type:w[0].type,textureType:a.TextureType.unpacked},shaderSource:N})}(d,o,u)})}e.createMatmulProgramInfoLoader=g;const m=o=>{if(!o||o.length!==2)throw new Error("MatMul requires 2 inputs.");if(o[0].dims[o[0].dims.length-1]!==o[1].dims[o[1].dims.length-2])throw new Error("shared dimension does not match.");if(o[0].type!=="float32"&&o[0].type!=="float64"||o[1].type!=="float32"&&o[1].type!=="float64")throw new Error("inputs should be float type");if(o[0].type!==o[1].type)throw new Error("inputs types should match")};function l(o,u,d,y,w){let _="";const T=d.length,S=y.length,E=S-T;_=S<2&&T>0?"coords":d.map((k,M)=>`coords.${u[M+E]}`).join(", ");const A=n.BroadcastUtil.getBroadcastDims(d,y).map(k=>`coords.${u[k+E]} = 0;`).join(`
`);let P="vec4(outputValue.xx, outputValue.yy)";return n.ShapeUtil.size(d)===1&&(P="vec4(outputValue.x)"),w?`
vec4 getBiasForMatmul() {
  ${o} coords = getOutputCoords();
  ${A}
  vec4 outputValue = getBias(${_});
  return ${P};
}`:`
float getBiasForMatmul() {
  ${o} coords = getOutputCoords();
  ${A}
  return getBias(coords.x);
}`}e.getBiasForMatmul=l},9:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const n=t(6757),a=t(5639),s=t(432),c=t(5614),f={name:"pack",inputNames:["A"],inputTypes:[a.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(b,g)=>Object.assign(Object.assign({},f),{get:()=>((m,l)=>{const o=(0,n.getGlsl)(m.session.backend.glContext.version),u=l.dims,d=u.length,y=l.dims.length,w=(0,s.getCoordsDataType)(y),_=(0,c.getChannels)("rc",y),T=(S=y,E=_,A=u[u.length-2],P=u[u.length-1],S===0||S===1?"":`
    int r = ${E[S-2]};
    int c = ${E[S-1]};
    int rp1 = ${E[S-2]} + 1;
    int cp1 = ${E[S-1]} + 1;
    bool rEdge = rp1 >= ${P};
    bool cEdge = cp1 >= ${A};
    `);var S,E,A,P;let k;k=d===0?[1,1]:d===1?[u[0],1]:[u[y-1],u[y-2]];const M=function(D,R,C){if(D===0)return"false";if(D===1)return`rc > ${R[0]}`;let U="";for(let N=D-2;N<D;N++)U+=`${C[N]} >= ${R[N-D+2]}`,N<D-1&&(U+="||");return U}(y,k,_),F=function(D,R){const C=D.length;if(C===0)return"getA(), 0, 0, 0";if(C===1)return`getA(rc),
            rc + 1 >= ${D[0]} ? 0. : getA(rc + 1),
            0, 0`;let U="";if(C>2)for(let N=0;N<C-2;++N)U+=`${R[N]},`;return`getA(${U}r, c),
          rEdge ? 0. : getA(${U}rp1, c),
          cEdge ? 0. : getA(${U}r, cp1),
          rEdge || cEdge ? 0. : getA(${U}rp1, cp1)`}(u,_),O=`
        void main() {
          ${w} rc = getOutputCoords();

          if(${M}) {
            ${o.output} = vec4(0);
          } else {
            ${T}

            ${o.output} = vec4(${F});
          }
        }
      `;return Object.assign(Object.assign({},f),{hasMain:!0,output:{dims:l.dims,type:l.type,textureType:a.TextureType.packed},shaderSource:O})})(b,g)})},5614:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const n=t(432);function a(s,c){return(0,n.getGlChannels)(c).map(f=>`${s}.${f}`)}e.getVecChannels=a,e.getChannels=function(s,c){return c===1?[s]:a(s,c)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const n=t(4910),a=t(7273),s=t(6757),c=t(5639),f={name:"Pad",inputNames:["A"],inputTypes:[c.TextureType.unpacked]};e.padV2=(w,_,T)=>(m(_),[w.run(Object.assign(Object.assign({},f),{cacheHint:T.cacheKey,get:()=>g(w,_[0],T)}),_)]),e.parsePadAttributesV2=w=>{const _=w.attributes.getString("mode","constant"),T=w.attributes.getFloat("value",0),S=w.attributes.getInts("pads");return(0,n.createAttributeWithCacheKey)({mode:_,value:T,pads:S})},e.padV11=(w,_,T)=>{l(_);const S=b(w,_,T);return(0,e.padV2)(w,[_[0]],S)},e.parsePadAttributesV11=w=>w.attributes.getString("mode","constant");const b=(w,_,T)=>{if(!w.session.isInitializer(_[1].dataId)||_.length>=3&&!w.session.isInitializer(_[2].dataId))throw new Error("dynamic pad attributes are not allowed");const S=Array.from(_[1].integerData),E=_.length>=3?_[2].floatData[0]:0;return(0,n.createAttributeWithCacheKey)({mode:T,pads:S,value:E})},g=(w,_,T)=>{const S=a.ShapeUtil.padShape(_.dims.slice(),T.pads),E=S.length,A=`
      ${o(w,_,T)}
      float process(int[${E}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[c.TextureType.unpacked],output:{dims:S,type:_.type,textureType:c.TextureType.unpacked},shaderSource:A}},m=w=>{if(!w||w.length!==1)throw new Error("Pad requires 1 input");if(w[0].type!=="float32"&&w[0].type!=="float64")throw new Error("Invalid input type.")},l=w=>{if(!w||w.length!==2&&w.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(w[1].type!=="int32")throw new Error("Invalid input type.");if(w.length>=3&&w[2].type==="string")throw new Error("Invalid input type.")},o=(w,_,T)=>{const S=(0,s.getGlsl)(w.session.backend.glContext.version),[E,A]=w.calculateTextureWidthAndHeight(_.dims,c.TextureType.unpacked),P=a.ShapeUtil.computeStrides(_.dims);switch(T.mode){case"constant":return u(S,_.dims,P,E,A,T.pads,T.value);case"reflect":return d(S,_.dims,P,E,A,T.pads);case"edge":return y(S,_.dims,P,E,A,T.pads);default:throw new Error("Invalid mode")}},u=(w,_,T,S,E,A,P)=>{const k=_.length;let M="";for(let F=k-1;F>=0;--F)M+=`
        k = m[${F}] - ${A[F]};
        if (k < 0)  return constant;
        if (k >= ${_[F]}) return constant;
        offset += k * ${T[F]};
        `;return`
      float padA(int m[${k}]) {
        const float constant = float(${P});
        int offset = 0;
        int k = 0;
        ${M}
        vec2 coords = offsetToCoords(offset, ${S}, ${E});
        float value = getColorAsFloat(${w.texture2D}(A, coords));
        return value;
      }
      `},d=(w,_,T,S,E,A)=>{const P=_.length;let k="";for(let M=P-1;M>=0;--M)k+=`
        k = m[${M}] - ${A[M]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(_[M]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${_[M]}) { k = _2n_1 - k; }
        }
        offset += k * ${T[M]};
        `;return`
      float padA(int m[${P}]) {
        int offset = 0;
        int k = 0;
        ${k}
        vec2 coords = offsetToCoords(offset, ${S}, ${E});
        float value = getColorAsFloat(${w.texture2D}(A, coords));
        return value;
      }
      `},y=(w,_,T,S,E,A)=>{const P=_.length;let k="";for(let M=P-1;M>=0;--M)k+=`
        k = m[${M}] - ${A[M]};
        if (k < 0)  k = 0;
        if (k >= ${_[M]}) k = ${_[M]-1};
        offset += k * ${T[M]};
      `;return`
      float padA(int m[${P}]) {
        int offset = 0;
        int k = 0;
        ${k}
        vec2 coords = offsetToCoords(offset, ${S}, ${E});
        float value = getColorAsFloat(${w.texture2D}(A, coords));
        return value;
      }
      `}},2834:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const n=t(4910),a=t(7273),s=t(5639);e.averagePool=(y,w,_)=>{l(w);const T={name:"AveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:_.cacheKey};return[y.run(Object.assign(Object.assign({},T),{get:()=>c(w,T,!1,_)}),w)]},e.parseAveragePoolAttributes=y=>{const w=y.attributes.getString("auto_pad","NOTSET"),_=y.attributes.getInt("ceil_mode",0),T=y.attributes.getInt("count_include_pad",0)!==0,S=y.attributes.getInts("kernel_shape"),E=y.attributes.getInts("strides",[]),A=y.attributes.getInts("pads",[]);if(_!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,n.createAttributeWithCacheKey)({autoPad:w,ceilMode:_,countIncludePad:T,kernelShape:S,strides:E,pads:A})};const c=(y,w,_,T)=>{const[S,E]=b(y,T,_),A=a.ShapeUtil.size(S.kernelShape);let P="";S.countIncludePad?P+=`value /= float(${A});`:P+=`value /= float(${A} - pad);`;const k=`
        ${o(y[0].dims,S,"value += _X(x);",P,"0.0")}
      `;return Object.assign(Object.assign({},w),{output:{dims:E,type:y[0].type,textureType:s.TextureType.unpacked},shaderSource:k})};e.globalAveragePool=(y,w,_)=>{l(w);const T={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:`${_.countIncludePad}`};return[y.run(Object.assign(Object.assign({},T),{get:()=>c(w,T,!0,_)}),w)]},e.parseGlobalAveragePoolAttributes=y=>{const w=y.attributes.getInt("count_include_pad",0)!==0;return(0,n.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:w,kernelShape:[],strides:[],pads:[]})},e.maxPool=(y,w,_)=>{l(w);const T={name:"MaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:_.cacheKey};return[y.run(Object.assign(Object.assign({},T),{get:()=>f(w,T,!1,_)}),w)]},e.parseMaxPoolAttributes=y=>{const w=y.attributes.getString("auto_pad","NOTSET"),_=y.attributes.getInt("ceil_mode",0),T=y.attributes.getInts("kernel_shape"),S=y.attributes.getInts("strides",[]),E=y.attributes.getInts("pads",[]),A=y.attributes.getInt("storage_order",0),P=y.attributes.getInts("dilations",[]);if(A!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(_!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,n.createAttributeWithCacheKey)({autoPad:w,ceilMode:_,countIncludePad:!1,kernelShape:T,strides:S,pads:E,storageOrder:A,dilations:P})};const f=(y,w,_,T)=>{const[S,E]=b(y,T,_),A=`
      ${o(y[0].dims,S,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},w),{output:{dims:E,type:y[0].type,textureType:s.TextureType.unpacked},shaderSource:A})},b=(y,w,_)=>{const T=y[0].dims.slice(),S=Object.hasOwnProperty.call(w,"dilations"),E=w.kernelShape.slice(),A=w.strides.slice(),P=S?w.dilations.slice():[],k=w.pads.slice();a.PoolConvUtil.adjustPoolAttributes(_,T,E,A,P,k);const M=a.PoolConvUtil.computePoolOutputShape(_,T,A,P,E,k,w.autoPad),F=Object.assign({},w);return S?Object.assign(F,{kernelShape:E,strides:A,pads:k,dilations:P,cacheKey:w.cacheKey}):Object.assign(F,{kernelShape:E,strides:A,pads:k,cacheKey:w.cacheKey}),[F,M]},g={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},m={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.globalMaxPool=(y,w)=>(l(w),[y.run(Object.assign(Object.assign({},m),{get:()=>f(w,m,!0,g)}),w)]);const l=y=>{if(!y||y.length!==1)throw new Error("Pool ops requires 1 input.");if(y[0].type!=="float32"&&y[0].type!=="float64")throw new Error("Invalid input type.")},o=(y,w,_,T,S)=>{const E=y.length;if(w.kernelShape.length<=2){const A=w.kernelShape[w.kernelShape.length-1],P=w.strides[w.strides.length-1],k=w.pads[w.pads.length/2-1],M=w.pads[w.pads.length-1],F=y[E-1];let O="",D="",R="";if(O=k+M!==0?`
          for (int i = 0; i < ${A}; i++) {
            x[${E} - 1] = indices[${E} - 1] * ${P} - ${k} + i;
            if (x[${E} - 1] < 0 || x[${E} - 1] >= ${F}) {
              pad++;
              continue;
            }
            ${_}
          }`:`
          for (int i = 0; i < ${A}; i++) {
            x[${E} - 1] = indices[${E} - 1] * ${P} - ${k} + i;
            ${_}
          }`,w.kernelShape.length===2){const C=w.kernelShape[w.kernelShape.length-2],U=w.strides[w.strides.length-2],N=w.pads[w.pads.length/2-2],V=w.pads[w.pads.length-2],j=y[E-2];D=N+V!==0?`
            for (int j = 0; j < ${C}; j++) {
              x[${E} - 2] = indices[${E} - 2] * ${U} - ${N} + j;
              if (x[${E} - 2] < 0 || x[${E} - 2] >= ${j}) {
                pad+= ${A};
                continue;
              }
          `:`
            for (int j = 0; j < ${C}; j++) {
              x[${E} - 2] = indices[${E} - 2] * ${U} - ${N} + j;
            `,R=`
          }
        `}return`
        float process(int indices[${E}]) {
          int x[${E}];
          copyVec(indices, x);

          float value = ${S};
          int pad = 0;
          ${D}
          ${O}
          ${R}
          ${T}
          return value;
        }
      `}{const A=a.ShapeUtil.size(w.kernelShape),P=a.ShapeUtil.computeStrides(w.kernelShape),k=P.length,M=w.pads.length,F=d(k),O=u(y,"inputDims"),D=u(w.pads,"pads"),R=u(P,"kernelStrides"),C=u(w.strides,"strides");let U="";return U=w.pads.reduce((N,V)=>N+V)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${_}
          }`:`
          }
          ${_}
        `,`
        ${F}
        float process(int indices[${E}]) {
          int x[${E}];
          copyVec(indices, x);
          int offset[${k}];
          int pads[${M}];
          int inputDims[${E}];
          int kernelStrides[${k}];
          int strides[${k}];
          ${D}
          ${O}
          ${C}
          ${R}

          float value = ${S};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${A}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${E} - ${k}; j < ${E}; j++) {
              x[j] = indices[j] * strides[j - ${E} + ${k}]
                + offset[j - ${E} + ${k}] - pads[j - 2];
              ${U}
          }
          ${T}

          return value;
        }
      `}},u=(y,w)=>{let _="";for(let T=0;T<y.length;T++)_+=`
      ${w}[${T}] = ${y[T]};
    `;return _},d=y=>`
  void offsetToIndices(int offset, int[${y}] strides, out int[${y}] indices) {
    if (${y} == 0) {
      return;
    }
    for (int i = 0; i < ${y} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${y} - 1] = offset;
  }`},1010:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const n=t(4910),a=t(6145),s=t(7273),c=t(5639),f=(m,l,o,u,d)=>{g(l);const y={name:u,inputNames:["A"],inputTypes:[c.TextureType.unpacked]};return[m.run(Object.assign(Object.assign({},y),{cacheHint:o.cacheKey,get:()=>b(m,l,o,u,d,y)}),l)]};e.parseReduceAttributes=m=>{const l=m.attributes.getInts("axes",[]),o=m.attributes.getInt("keepdims",1)===1;return(0,n.createAttributeWithCacheKey)({axes:l,keepDims:o})};const b=(m,l,o,u,d,y)=>{const w=[],_=l[0].dims.length||1,T=[],S=s.ShapeUtil.normalizeAxes(o.axes,l[0].dims.length),E=d(l,S);let A=E[1];for(let k=0;k<l[0].dims.length;k++)S.indexOf(k)>=0||S.length===0?(o.keepDims&&w.push(1),A=`
          for(int j${k} = 0; j${k} < ${l[0].dims[k]}; j${k}++) {
            inputIdx[${k}] = j${k};
            ${A}
          }`):(T.push(`inputIdx[${k}] = outputIdx[${w.length}];`),w.push(l[0].dims[k]));const P=`
      float process(int outputIdx[${w.length||1}]) {
        float value;                 // final result
        int inputIdx[${_}];      // addressing input data
        ${T.join(`
`)}
        ${E[0]}       // init ops for reduce max/min
        ${A}
        ${E[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},y),{output:{dims:w,type:l[0].type,textureType:c.TextureType.unpacked},shaderSource:P})},g=m=>{if(!m||m.length!==1)throw new Error("Reduce op requires 1 input.");if(a.NUMBER_TYPES.indexOf(m[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(m,l,o)=>f(m,l,o,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(m,l,o)=>f(m,l,o,"ReduceMean",(u,d)=>{let y=1;for(let w=0;w<u[0].dims.length;w++)(d.indexOf(w)>=0||d.length===0)&&(y*=u[0].dims[w]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${y}.;`]}),e.reduceMax=(m,l,o)=>f(m,l,o,"ReduceMax",(u,d)=>{const y=[];for(let w=0;w<u[0].dims.length;w++)(d.indexOf(w)>=0||d.length===0)&&y.push(`inputIdx[${w}] = 0;`);return[`${y.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(m,l,o)=>f(m,l,o,"ReduceMin",(u,d)=>{const y=[];for(let w=0;w<u[0].dims.length;w++)(d.indexOf(w)>=0||d.length===0)&&y.push(`inputIdx[${w}] = 0;`);return[`${y.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(m,l,o)=>f(m,l,o,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(m,l,o)=>f(m,l,o,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(m,l,o)=>f(m,l,o,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const n=t(7273),a=t(6757),s=t(5639),c=t(5614);e.createPackedReshape3DProgramInfoLoader=(f,b,g)=>{const m=(l=>({name:"Reshape (packed)",inputTypes:[s.TextureType.packed],inputNames:["A"],cacheHint:`${l}`}))(g);return Object.assign(Object.assign({},m),{get:()=>((l,o,u,d)=>{const y=o.dims,w=d;let _="";for(let E=0;E<4;E++){let A="";switch(E){case 0:A="outputCoords = rc;";break;case 1:A="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:A="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:A="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}_+=`
        ${A}
        ${E>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${E}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${E>0?"}":""}
      `}const T=(0,a.getGlsl)(l.session.backend.glContext.version),S=`
      ${function(E){const A=n.ShapeUtil.computeStrides(E),P=["b","r","c"],k="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${A.map((M,F)=>`int ${P[F]} = ${k} / ${M}; ${F===A.length-1?`int ${P[F+1]} = ${k} - ${P[F]} * ${M}`:`index -= ${P[F]} * ${M}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(y)}
      ${function(E){const A=n.ShapeUtil.computeStrides(E);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${A[0]} + coords.z * ${A[1]} + coords.y;
  }
`}(w)}
      ${(0,c.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${w[2]};
        int cols = ${w[1]};

        ${_}
        ${T.output} = result;
      }
    `;return Object.assign(Object.assign({},u),{output:{dims:w,type:o.type,textureType:s.TextureType.packed},shaderSource:S,hasMain:!0})})(f,b,m,g)})},e.processDims3D=function(f){if(f.length===0)return[1,1,1];let b=1;for(let g=0;g<f.length-2;++g)b*=f[g];return[b,f.length>1?f[f.length-2]:1,f[f.length-1]]},e.isReshapeCheap=function(f,b){let g=!1;return g=f.length===0||b.length===0||(f.length<2||b.length<2?f[f.length-1]===b[b.length-1]:f[f.length-1]===b[b.length-1]&&f[f.length-2]===b[b.length-2]),g}},8126:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const n=t(7273);e.reshape=(a,s)=>{const c=n.ShapeUtil.calculateReshapedDims(s[0].dims,s[1].integerData);return a.session.pack?[a.reshapePacked(s[0],c)]:[a.reshapeUnpacked(s[0],c)]}},2801:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const n=t(6757),a=t(5639),s=t(432),c=t(5614),f=t(3980),b={name:"Resize",inputNames:["A"],inputTypes:[a.TextureType.packed]};e.resize=(u,d,y)=>((0,f.validateInputs)(d,y),[u.run(Object.assign(Object.assign({},b),{cacheHint:y.cacheKey,get:()=>g(u,d,y)}),d)]),e.parseResizeAttributesV10=u=>(0,f.parseUpsampleAttributes)(u,10),e.parseResizeAttributesV11=u=>(0,f.parseUpsampleAttributes)(u,11);const g=(u,d,y)=>{const w=(0,n.getGlsl)(u.session.backend.glContext.version),[_,T]=m(d,y);if(_.every(U=>U===1)&&y.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},b),{output:{dims:T,type:d[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${w.texture2D}(X, TexCoords);
                    ${w.output} = v;
                }`});const S=T.length;if(S<2)throw new Error(`output dimension should be at least 2, but got ${S}`);const E=T[S-2],A=T[S-1],P=d[0].dims;if(S!==P.length)throw new Error(`output dimension should match input ${P.length}, but got ${S}`);const k=P[S-2],M=P[S-1],F=_[S-2],O=_[S-1];let D="";if(y.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${y.mode}'`);switch(y.coordinateTransformMode){case"asymmetric":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${A}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${E}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${A}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${E}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":D=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${A}.0 - 1.0, ${E}.0 - 1.0, ${A}.0 - 1.0,
                            ${E}.0 - 1.0);
                        vec4 original = vec4(${M}.0 - 1.0, ${k}.0 - 1.0, ${M}.0 - 1.0,
                            ${k}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${y.coordinateTransformMode}'`)}const R=(0,s.getCoordsDataType)(S),C=`
            const vec2 inputWH = vec2(${k}.0, ${M}.0);
            const vec4 scaleWHWH = vec4(float(${F}), float(${O}), float(${F}), float(${O}));
            ${(0,c.unpackFromChannel)()}
            ${D}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${R} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${E-1};
                bool hasNextCol = rc.z < ${A-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${w.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},b),{output:{dims:T,type:d[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:C})},m=(u,d)=>{const y=u[0].dims;let w,_=d.scales;if(_.length===0){const S=u[d.scalesInputIdx];if(S&&S.size!==0){if(u[d.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");_=l(S,d.mode,d.isResize)}else{const E=u[d.sizesInputIdx];if(!E||E.size===0)throw new Error("Either scales or sizes MUST be provided as input.");w=Array.from(E.integerData),_=o(w,y,d.mode,d.isResize)}}else if(u[d.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const T=w||y.map((S,E)=>Math.floor(S*_[E]));return[_,T]},l=(u,d,y)=>{const w=Array.from(u.floatData);return(0,f.scalesValidation)(w,d,y),w},o=(u,d,y,w)=>{const _=d.length,T=new Array(_);for(let S=0,E=_;S<E;S++)if(d[S]===0){if(u[S]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");T[S]=1}else T[S]=u[S]/d[S];return(0,f.scalesValidation)(T,y,w),T}},565:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const n=t(9240);e.shape=(s,c)=>(a(c),[new n.Tensor([c[0].dims.length],"int32",void 0,void 0,new Int32Array(c[0].dims))]);const a=s=>{if(!s||s.length!==1)throw new Error("Shape requires 1 input.")}},2444:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const n=t(4910),a=t(6145),s=t(7273),c=t(5639),f={name:"Slice",inputNames:["A"],inputTypes:[c.TextureType.unpacked]};e.slice=(o,u,d)=>(g(u),[o.run(Object.assign(Object.assign({},f),{cacheHint:d.cacheKey,get:()=>b(o,u[0],d)}),u)]),e.parseSliceAttributes=o=>{const u=o.attributes.getInts("starts"),d=o.attributes.getInts("ends"),y=o.attributes.getInts("axes",[]);return(0,n.createAttributeWithCacheKey)({starts:u,ends:d,axes:y})};const b=(o,u,d)=>{const y=d.axes.length===0?u.dims.slice(0).map((P,k)=>k):d.axes,w=s.ShapeUtil.normalizeAxes(y,u.dims.length),_=d.starts.map((P,k)=>P>u.dims[w[k]]-1?u.dims[w[k]]:s.ShapeUtil.normalizeAxis(P,u.dims[w[k]])),T=d.ends.map((P,k)=>P>u.dims[w[k]]-1?u.dims[w[k]]:s.ShapeUtil.normalizeAxis(P,u.dims[w[k]])),S=u.dims.slice(),E=[];for(let P=0;P<w.length;P++)S[w[P]]=T[P]-_[P],_[P]>0&&E.push(`outputIdx[${w[P]}] += ${_[P]};`);const A=`
      float process(int outputIdx[${S.length}]) {
        ${E.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},f),{output:{dims:S,type:u.type,textureType:c.TextureType.unpacked},shaderSource:A})},g=o=>{if(!o||o.length!==1)throw new Error("Slice requires 1 input.");if(a.NUMBER_TYPES.indexOf(o[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(o,u)=>{l(u);const d=m(o,u);return[o.run(Object.assign(Object.assign({},f),{cacheHint:d.cacheKey,get:()=>b(o,u[0],d)}),[u[0]])]};const m=(o,u)=>{if(!o.session.isInitializer(u[1].dataId)||!o.session.isInitializer(u[2].dataId)||u.length>=4&&!o.session.isInitializer(u[3].dataId)||u.length>=5&&!o.session.isInitializer(u[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(u.length>=5&&u[4].integerData.some(_=>_!==1))throw new Error("currently non-1 steps is not supported for Slice");const d=Array.from(u[1].integerData),y=Array.from(u[2].integerData),w=u.length>=4?Array.from(u[3].integerData):[];return{starts:d,ends:y,axes:w,cacheKey:`${w};${d};${y}`}},l=o=>{if(!o||o.length<3||o.length>5)throw new Error("Invalid input number.");if(o[1].type!=="int32"||o[1].dims.length!==1)throw new Error("Invalid input type.");if(o[2].type!=="int32"||o[2].dims.length!==1)throw new Error("Invalid input type.");if(o.length>=4&&(o[3].type!=="int32"||o[3].dims.length!==1))throw new Error("Invalid input type.");if(o.length>=5&&(o[4].type!=="int32"||o[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const n=t(4910),a=t(7273),s=t(6757),c=t(5639),f=t(5707),b={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[c.TextureType.unpacked]},g={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[c.TextureType.unpacked,c.TextureType.unpacked]},m={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[c.TextureType.unpacked,c.TextureType.unpacked,c.TextureType.unpacked]};e.softmax=(w,_,T)=>{y(_);const S=_[0].dims.slice(),E=a.ShapeUtil.normalizeAxis(T.axis,S.length),A=a.ShapeUtil.sizeToDimension(S,E),P=a.ShapeUtil.sizeFromDimension(S,E);return l(w,_,T,A,P)},e.parseSoftmaxAttributes=w=>(0,n.createAttributeWithCacheKey)({axis:w.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=w=>(0,n.createAttributeWithCacheKey)({axis:w.attributes.getInt("axis",-1)}),e.softmaxV13=(w,_,T)=>{y(_);const S=_[0].dims.slice(),E=a.ShapeUtil.normalizeAxis(T.axis,S.length),A=S.length,P=E!==A-1,k=[];let M,F=[],O=[];P&&(F=Array.from({length:A}).map((U,N)=>N),F[E]=A-1,F[A-1]=E,F.map(U=>k.push(S[U])),M=(0,n.createAttributeWithCacheKey)({perm:F}),O=(0,f.transpose)(w,_,M));const D=P?a.ShapeUtil.sizeToDimension(k,A-1):a.ShapeUtil.sizeToDimension(S,A-1),R=P?a.ShapeUtil.sizeFromDimension(k,A-1):a.ShapeUtil.sizeFromDimension(S,A-1),C=l(w,P?O:_,T,D,R);return P?(0,f.transpose)(w,C,M):C};const l=(w,_,T,S,E)=>{const A=o(w,_[0],S,E,[S]),P=w.run(Object.assign(Object.assign({},b),{cacheHint:T.cacheKey,get:()=>A}),_),k=u(w,_[0],S,E,A.output.dims,[S]),M=w.run(Object.assign(Object.assign({},g),{cacheHint:T.cacheKey,get:()=>k}),[_[0],P]),F=d(w,_[0],S,E,A.output.dims,k.output.dims);return[w.run(Object.assign(Object.assign({},m),{cacheHint:T.cacheKey,get:()=>F}),[_[0],P,M])]},o=(w,_,T,S,E)=>{const[A,P]=w.calculateTextureWidthAndHeight(_.dims,c.TextureType.unpacked),k=E.length;if(T<1||S<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(E.length!==1)throw new Error("Dimensionality of the output should be 1");if(E[0]!==T)throw new Error("Shape of the output should be equal to logical row count");const M=(0,s.getGlsl)(w.session.backend.glContext.version),F=`
      float process(int[${k}] indices) {
        int logical_row_start_offset = indices[0] * ${S};

        float max = getColorAsFloat(${M.texture2D}(A, offsetToCoords(logical_row_start_offset, ${A},
        ${P} )));
        for(int i=1; i<${S}; ++i)
        {
          float current = getColorAsFloat(${M.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${A}, ${P})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},b),{output:{dims:E,type:_.type,textureType:c.TextureType.unpacked},shaderSource:F})},u=(w,_,T,S,E,A)=>{const[P,k]=w.calculateTextureWidthAndHeight(_.dims,c.TextureType.unpacked),M=A.length;if(T<1||S<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(A.length!==1)throw new Error("Dimensionality of the output should be 1");if(A[0]!==T)throw new Error("Shape of the output should be equal to logical row count");if(E.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(E[0]!==T)throw new Error("Shape of the intermediate results should be equal to logical row count");const F=`
      float process(int[${M}] indices) {
        int logical_row_start_offset = indices[0] * ${S};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${S}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,s.getGlsl)(w.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${P}, ${k}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},g),{output:{dims:A,type:_.type,textureType:c.TextureType.unpacked},shaderSource:F})},d=(w,_,T,S,E,A)=>{const[P,k]=w.calculateTextureWidthAndHeight(_.dims,c.TextureType.unpacked),M=_.dims.length;if(T<1||S<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(E.length!==1||A.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(E[0]!==T||A[0]!==T)throw new Error("Shape of the intermediate results should be equal to logical row count");const F=`
      float process(int[${M}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${P}, ${k});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${S};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},m),{output:{dims:_.dims,type:_.type,textureType:c.TextureType.unpacked},shaderSource:F})},y=w=>{if(!w||w.length!==1)throw new Error("Softmax requires 1 input.");if(w[0].type!=="float32"&&w[0].type!=="float64")throw new Error("Invalid input type")}},564:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const n=t(4910),a=t(7273),s=t(5639),c={name:"Split",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.split=(m,l,o)=>{g(l);const u=a.ShapeUtil.normalizeAxis(o.axis,l[0].dims.length),d=f(m,l,u,o),y=[];for(let w=0;w<d;++w)y.push(m.run(Object.assign(Object.assign({},c),{cacheHint:`${o.cacheKey};${w}`,get:()=>b(m,l[0],o,u,w)}),l));return y},e.parseSplitAttributes=m=>{const l=m.attributes.getInt("axis",0),o=m.attributes.getInts("split",[]),u=m.outputs.length;return(0,n.createAttributeWithCacheKey)({axis:l,split:o,numOutputs:u})};const f=(m,l,o,u)=>{const[,d]=a.SplitUtil.splitShape(l[0].dims,o,u.split,u.numOutputs);return d.length},b=(m,l,o,u,d)=>{const[y,w]=a.SplitUtil.splitShape(l.dims,u,o.split,o.numOutputs),_=w[d],T=y[d],S=`
      float process(int indices[${T.length}]) {
        indices[${u}] += ${_};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},c),{cacheHint:`${o.cacheKey}:${d}`,output:{dims:T,type:l.type,textureType:s.TextureType.unpacked},shaderSource:S})},g=m=>{if(!m||m.length!==1)throw new Error("Split requires one input.");if(m[0].type!=="int8"&&m[0].type!=="uint8"&&m[0].type!=="int16"&&m[0].type!=="uint16"&&m[0].type!=="int32"&&m[0].type!=="uint32"&&m[0].type!=="float32"&&m[0].type!=="float64"&&m[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const n=t(7273);e.squeeze=(c,f,b)=>{a(f);const g=n.ShapeUtil.squeezeShape(f[0].dims,b);return[c.reshapeUnpacked(f[0],g)]},e.squeezeV13=(c,f)=>(s(f),(0,e.squeeze)(c,[f[0]],Array.from(f[1].integerData))),e.parseSqueezeAttributes=c=>c.attributes.getInts("axes");const a=c=>{if(!c||c.length!==1)throw new Error("Squeeze requires 1 input.");if(c[0].type==="string")throw new Error("invalid input tensor types.")},s=c=>{if(!c||c.length!==2)throw new Error("Squeeze requires 2 inputs.");if(c[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const n=t(6757),a=t(5639);e.sum=(f,b)=>{c(b);const g={name:"Sum",inputNames:b.map((m,l)=>`X${l}`),inputTypes:new Array(b.length).fill(a.TextureType.unpacked)};return[f.run(Object.assign(Object.assign({},g),{get:()=>s(f,b,g)}),b)]};const s=(f,b,g)=>{const m=(0,n.getGlsl)(f.session.backend.glContext.version),l=b[0].dims.slice(),o=`
      void main() {
        vec4 result = ${b.map((u,d)=>`${m.texture2D}(X${d},TexCoords)`).join(" + ")};
        ${m.output} = result;
      }
    `;return Object.assign(Object.assign({},g),{output:{dims:l,type:b[0].type,textureType:a.TextureType.unpacked},hasMain:!0,shaderSource:o})},c=f=>{if(!f||f.length===0)throw new Error("Sum requires inputs.");const b=f[0].dims.length;for(let g=1;g<f.length;g++){if(b!==f[g].dims.length)throw new Error("Input shapes are mismatched.");for(let m=0;m<b;m++)if(f[0].dims[m]!==f[g].dims[m])throw new Error("Input shapes are not matched.")}if(f[0].type!=="float32"&&f[0].type!=="float64")throw new Error("Invalid input type.");for(let g=1;g<f.length;g++)if(f[0].type!==f[g].type)throw new Error("Input types are not matched.")}},5944:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const n=t(6145),a=t(5639);e.tile=(f,b)=>{c(b);const g={name:"Tile",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};return[f.run(Object.assign(Object.assign({},g),{get:()=>s(f,b,g)}),b)]};const s=(f,b,g)=>{const m=b[0].dims.slice(),l=new Array(m.length),o=[];for(let y=0;y<m.length;y++)l[y]=m[y]*b[1].numberData[y],o.push(`inputIdx[${y}] = int(mod(float(outputIdx[${y}]), ${m[y]}.));`);const u=l.length,d=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${u}];
        ${o.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},g),{output:{dims:l,type:b[0].type,textureType:a.TextureType.unpacked},shaderSource:d})},c=f=>{if(!f||f.length!==2)throw new Error("Tile requires 2 input.");if(f[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(f[1].dims[0]!==f[0].dims.length)throw new Error("Invalid input shape.");if(n.NUMBER_TYPES.indexOf(f[0].type)===-1)throw new Error("Invalid input type.");if(f[1].type!=="int32"&&f[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const n=t(4910),a=t(7273),s=t(5639),c={name:"Transpose",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.transpose=(o,u,d)=>(l(u),[o.run(Object.assign(Object.assign({},c),{cacheHint:d.cacheKey,get:()=>f(o,u[0],d.perm)}),u)]),e.parseTransposeAttributes=o=>(0,n.createAttributeWithCacheKey)({perm:o.attributes.getInts("perm",[])});const f=(o,u,d)=>{const y=u.dims;d=b(y,d);const w=g(y,d),_=y.length,T=`
      ${m("perm",d,_)}
      float process(int indices[${_}]) {
        int a[${_}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},c),{output:{dims:w,type:u.type,textureType:s.TextureType.unpacked},shaderSource:T})},b=(o,u)=>(u&&u.length!==o.length&&(u=[...o.keys()].reverse()),u),g=(o,u)=>(u=b(o,u),a.ShapeUtil.sortBasedOnPerm(o,u)),m=(o,u,d)=>{const y=[];y.push(`void ${o}(out int a[${d}], int src[${d}]) {`);for(let w=0;w<d;++w)y.push(`	a[${u[w]}]=src[${w}];`);return y.push("	}"),y.join(`
`)},l=o=>{if(!o||o.length!==1)throw new Error("Transpose requires 1 input.");if(o[0].type!=="float32"&&o[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const n=t(6757),a=t(5639);e.encodeAsUint8=(s,c)=>{const f=c.shape,b=(0,n.getGlsl)(s.session.backend.glContext.version),g=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${b.texture2D}(X,TexCoords).r;
      ${b.output} = encodeAsUint8(value);
    }`,m={name:"Uint8Encode",inputTypes:[a.TextureType.unpacked],inputNames:["X"],output:{dims:f,type:c.tensor.type,textureType:a.TextureType.downloadUint8AsFloat},shaderSource:g,hasMain:!0};return s.executeProgram(m,[c.tensor])}},9087:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const n=t(4910),a=t(7273),s=t(1997),c=t(6757),f=t(5639);function b(){return C("abs")}function g(){return C("acos")}function m(){return C("asin")}function l(){return C("atan")}function o(){return C("ceil")}function u(){return C("cos")}function d(V){const j="elu";return{body:`
  const float alpha = float(${V});

  float ${j}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${j}_(vec4 v) {
    return vec4(${j}_(v.x), ${j}_(v.y), ${j}_(v.z), ${j}_(v.w));
  }
  `,name:j,type:s.FunctionType.ValueBased}}function y(){return C("exp")}function w(){return C("floor")}function _(V,j){const K="clip";return{body:`
  const float min = float(${V});
  const float max = float(${j});

  float ${K}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${K}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:K,type:s.FunctionType.ValueBased}}function T(){const V="indentity";return{body:`
  float ${V}_(float a) {
    return a;
  }
  vec4 ${V}_(vec4 v) {
    return v;
  }
  `,name:V,type:s.FunctionType.ValueBased}}function S(V){const j="leakyRelu";return{body:`
  const float alpha = float(${V});

  float ${j}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${j}_(vec4 v) {
    return vec4(${j}_(v.x), ${j}_(v.y), ${j}_(v.z), ${j}_(v.w));
  }
  `,name:j,type:s.FunctionType.ValueBased}}function E(){return C("log")}function A(){const V="neg";return{body:`
  float ${V}_(float a) {
    return -a;
  }
  vec4 ${V}_(vec4 v) {
    return -v;
  }
  `,name:V,type:s.FunctionType.ValueBased}}function P(){const V="not";return{body:`
  float ${V}_(float a) {
    return float( ! bool(a) );
  }
  bool ${V}_(bool a) {
    return !a;
  }
  vec4 ${V}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${V}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:V,type:s.FunctionType.ValueBased}}function k(){return C("sin")}function M(){const V="relu";return{body:`
  float ${V}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${V}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:V,type:s.FunctionType.ValueBased}}function F(){const V="sigmoid";return{body:`
  float ${V}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${V}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:V,type:s.FunctionType.ValueBased}}function O(){return C("sqrt")}function D(){return C("tan")}function R(){const V="tanh";return{body:`
  float ${V}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${V}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:V,type:s.FunctionType.ValueBased}}function C(V){return{body:`
  float ${V}_(float a) {
    return ${V}(a);
  }
  vec4 ${V}_(vec4 v) {
    return ${V}(v);
  }
  `,name:V,type:s.FunctionType.ValueBased}}e.glslAbs=b,e.glslAcos=g,e.glslAsin=m,e.glslAtan=l,e.glslCeil=o,e.glslCos=u,e.glslElu=d,e.glslExp=y,e.glslFloor=w,e.glslClip=_,e.glslIdentity=T,e.glslLeakyRelu=S,e.glslLog=E,e.glslNeg=A,e.glslNot=P,e.glslSin=k,e.glslRelu=M,e.glslSigmoid=F,e.glslSqrt=O,e.glslTan=D,e.glslTanh=R;const U=(V,j,K,ee)=>{const he=V.session.pack?f.TextureType.packed:f.TextureType.unpacked,ge={name:K.name,inputTypes:[he],inputNames:["A"],cacheHint:ee};return Object.assign(Object.assign({},ge),{get:()=>((Se,we,ne,re)=>{const oe=Se.session.pack?f.TextureType.packed:f.TextureType.unpacked,Ee=(0,c.getGlsl)(Se.session.backend.glContext.version);return Object.assign(Object.assign({},we),{output:{dims:ne.dims,type:ne.type,textureType:oe},shaderSource:`
     ${re.body}
     void main() {
       vec4 v = ${Ee.texture2D}(A, TexCoords);
       v = ${re.name}_(v);
       ${Ee.output} = v;
     }
     `,hasMain:!0})})(V,ge,j,K)})};e.abs=(V,j)=>[V.run(U(V,j[0],b()),j)],e.acos=(V,j)=>[V.run(U(V,j[0],g()),j)],e.asin=(V,j)=>[V.run(U(V,j[0],m()),j)],e.atan=(V,j)=>[V.run(U(V,j[0],l()),j)],e.clip=(V,j,K)=>[V.run(U(V,j[0],_(K.min,K.max),K.cacheKey),j)],e.parseClipAttributes=V=>(0,n.createAttributeWithCacheKey)({min:V.attributes.getFloat("min",a.MIN_CLIP),max:V.attributes.getFloat("max",a.MAX_CLIP)}),e.clipV11=(V,j)=>{const K=N(V,j);return(0,e.clip)(V,[j[0]],K)};const N=(V,j)=>{if(j.length>=3&&(!V.session.isInitializer(j[1].dataId)||!V.session.isInitializer(j[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const K=j.length>=3?j[1].numberData[0]:a.MIN_CLIP,ee=j.length>=3?j[2].numberData[0]:a.MAX_CLIP;return(0,n.createAttributeWithCacheKey)({min:K,max:ee})};e.ceil=(V,j)=>[V.run(U(V,j[0],o()),j)],e.cos=(V,j)=>[V.run(U(V,j[0],u()),j)],e.elu=(V,j,K)=>[V.run(U(V,j[0],d(K.alpha),K.cacheKey),j)],e.parseEluAttributes=V=>(0,n.createAttributeWithCacheKey)({alpha:V.attributes.getFloat("alpha",1)}),e.exp=(V,j)=>[V.run(U(V,j[0],y()),j)],e.floor=(V,j)=>[V.run(U(V,j[0],w()),j)],e.identity=(V,j)=>[V.run(U(V,j[0],T()),j)],e.leakyRelu=(V,j,K)=>[V.run(U(V,j[0],S(K.alpha),K.cacheKey),j)],e.parseLeakyReluAttributes=V=>(0,n.createAttributeWithCacheKey)({alpha:V.attributes.getFloat("alpha",.01)}),e.log=(V,j)=>[V.run(U(V,j[0],E()),j)],e.neg=(V,j)=>[V.run(U(V,j[0],A()),j)],e.not=(V,j)=>[V.run(U(V,j[0],P()),j)],e.relu=(V,j)=>[V.run(U(V,j[0],M()),j)],e.sigmoid=(V,j)=>[V.run(U(V,j[0],F()),j)],e.sin=(V,j)=>[V.run(U(V,j[0],k()),j)],e.sqrt=(V,j)=>[V.run(U(V,j[0],O()),j)],e.tan=(V,j)=>[V.run(U(V,j[0],D()),j)],e.tanh=(V,j)=>[V.run(U(V,j[0],R()),j)]},540:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const n=t(6757),a=t(5639),s=t(432),c=t(5614),f={name:"unpack",inputNames:["A"],inputTypes:[a.TextureType.packed]};e.createUnpackProgramInfo=(b,g)=>{const m=g.dims.length,l=(0,c.getChannels)("rc",m),o=l.slice(-2),u=(0,s.getCoordsDataType)(m),d=(0,c.unpackFromChannel)(),y=g.dims.length===0?"":function(T,S){if(T===1)return"rc";let E="";for(let A=0;A<T;A++)E+=S[A],A<T-1&&(E+=",");return E}(m,l),w=m<=1?"rc":`vec2(${o.join(",")})`,_=`
    ${d}
    void main() {
      ${u} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${y});

       ${(0,n.getGlsl)(b.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${w}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},f),{hasMain:!0,output:{dims:g.dims,type:g.type,textureType:a.TextureType.unpacked},shaderSource:_})},e.createUnpackProgramInfoLoader=(b,g)=>Object.assign(Object.assign({},f),{get:()=>(0,e.createUnpackProgramInfo)(b,g)})},7862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const n=t(7273);e.unsqueeze=(c,f,b)=>{a(f);const g=n.ShapeUtil.unsqueezeShape(f[0].dims,b);return[c.reshapeUnpacked(f[0],g)]},e.unsqueezeV13=(c,f)=>(s(f),(0,e.unsqueeze)(c,[f[0]],Array.from(f[1].integerData))),e.parseUnsqueezeAttributes=c=>c.attributes.getInts("axes");const a=c=>{if(!c||c.length!==1)throw new Error("Unsqueeze requires 1 input.");if(c[0].type==="string")throw new Error("invalid input tensor types.")},s=c=>{if(!c||c.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(c[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const n=t(4910),a=t(6757),s=t(5639),c={name:"Upsample",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.upsample=(b,g,m)=>((0,e.validateInputs)(g,m),[b.run(Object.assign(Object.assign({},c),{cacheHint:m.cacheKey,get:()=>f(b,g,m)}),g)]),e.parseUpsampleAttributesV7=b=>(0,e.parseUpsampleAttributes)(b,7),e.parseUpsampleAttributesV9=b=>(0,e.parseUpsampleAttributes)(b,9),e.parseUpsampleAttributes=(b,g)=>{const m=g>=10,l=b.attributes.getString("mode","nearest");if(l!=="nearest"&&l!=="linear"&&(g<11||l!=="cubic"))throw new Error(`unrecognized mode: ${l}`);let o=[];g<9&&(o=b.attributes.getFloats("scales"),(0,e.scalesValidation)(o,l,m));const u=b.attributes.getFloat("extrapolation_value",0),d=g>10?b.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(d)===-1)throw new Error(`coordinate_transform_mode '${d}' is not supported`);const y=d==="tf_crop_and_resize",w=y,_=l==="nearest"&&g>=11?b.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(_)===-1)throw new Error(`nearest_mode '${_}' is not supported`);const T=b.attributes.getFloat("cubic_coeff_a",-.75),S=b.attributes.getInt("exclude_outside",0)!==0;if(S&&l!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const E=g<11||l==="nearest"&&d==="asymmetric"&&_==="floor";let A=0,P=0,k=0;return g>10?b.inputs.length>2?(A=1,P=2,k=3):(P=1,k=2):g===9&&(P=1),(0,n.createAttributeWithCacheKey)({opset:g,isResize:m,mode:l,scales:o,extrapolationValue:u,coordinateTransformMode:d,useExtrapolation:w,needRoiInput:y,nearestMode:_,cubicCoefficientA:T,excludeOutside:S,useNearest2xOptimization:E,roiInputIdx:A,scalesInputIdx:P,sizesInputIdx:k})};const f=(b,g,m)=>{const l=(0,a.getGlsl)(b.session.backend.glContext.version),[o,u]=b.calculateTextureWidthAndHeight(g[0].dims,s.TextureType.unpacked),d=g[0].dims.map((k,M)=>Math.floor(k*m.scales[M])),[y,w]=b.calculateTextureWidthAndHeight(d,s.TextureType.unpacked),_=d.length,T=new Array(_),S=new Array(_);let E=`
      int output_pitches[${_}];
      int input_pitches[${_}];
      `;for(let k=_-1;k>=0;k--)T[k]=k===_-1?1:T[k+1]*d[k+1],S[k]=k===_-1?1:S[k+1]*g[0].dims[k+1],E+=`
        output_pitches[${k}] = ${T[k]};
        input_pitches[${k}] = ${S[k]};
        `;const A=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${o}, ${u});
        float value = getColorAsFloat(${l.texture2D}(X, coords));
        return value;
      }
      `,P=m.mode==="nearest"?`
    ${A}
    float process(int indices[${_}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${y}, ${w});

      ${E}

      int d, m;
      for (int dim = 0; dim < ${_}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:_===4?`
    ${A}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${y}, ${w});

      ${E}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${g[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${A}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${y}, ${w});

      ${E}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${g[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},c),{output:{dims:d,type:g[0].type,textureType:s.TextureType.unpacked},shaderSource:P,variables:[{name:"scales",type:"int",arrayLength:m.scales.length,data:m.scales.map(k=>Math.ceil(k))}]})};e.validateInputs=(b,g)=>{if(!b||g.opset<9&&b.length!==1||g.opset>=9&&g.opset<11&&b.length!==2||g.opset>=11&&b.length<2)throw new Error("invalid inputs.");if(g.scales.length>0&&b[0].dims.length!==g.scales.length)throw new Error("Invalid input shape.");if(b[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(b,g,m)=>{if(m){for(const l of b)if(l<=0)throw new Error("Scale value should be greater than 0.")}else for(const l of b)if(l<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(g!=="linear"&&g!=="cubic"||b.length===2||b.length===4&&b[0]===1&&b[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${m?"Resize":"Upsample"} opeartor.`)}},2757:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const n=t(2235),a=t(1315),s=t(8897),c=t(6757);e.ProgramManager=class{constructor(f,b,g){this.profiler=f,this.glContext=b,this.textureLayoutStrategy=g,this.repo=new Map,this.attributesBound=!1}getArtifact(f){return this.repo.get(f)}setArtifact(f,b){this.repo.set(f,b)}run(f,b,g){var m;this.profiler.event("op",`ProgramManager.run ${(m=f.programInfo.name)!==null&&m!==void 0?m:"unknown kernel"}`,()=>{var l;const o=this.glContext.gl,u=f.program;o.useProgram(u);try{this.bindOutput(g),this.attributesBound||this.bindAttributes(f.attribLocations),this.bindUniforms(f.uniformLocations,(l=f.programInfo.variables)!==null&&l!==void 0?l:[],b)}catch(d){throw a.Logger.error("ProgramManager",f.programInfo.shaderSource),d}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(f=>this.glContext.deleteProgram(f.program))}build(f,b,g){return this.profiler.event("backend","ProgramManager.build",()=>{const m=new s.GlslPreprocessor(this.glContext,f,b,g),l=m.preprocess(),o=this.compile(l);return{programInfo:f,program:o,uniformLocations:this.getUniformLocations(o,m.context.programInfo.inputNames,m.context.programInfo.variables),attribLocations:this.getAttribLocations(o)}})}compile(f){if(!this.vertexShader){a.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const m=(0,c.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(m,this.glContext.gl.VERTEX_SHADER)}n.env.debug&&a.Logger.verbose("ProrgramManager",`FragShader:
${f}
`);const b=this.glContext.compileShader(f,this.glContext.gl.FRAGMENT_SHADER),g=this.glContext.createProgram(this.vertexShader,b);return this.glContext.deleteShader(b),g}bindOutput(f){const b=f.width,g=f.height;a.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${b}/${g}, shape=${f.shape}, type=${f.tensor.type}`),this.glContext.attachFramebuffer(f.texture,b,g)}bindAttributes(f){const b=f.position,g=f.textureCoord;this.glContext.setVertexAttributes(b,g),this.attributesBound=!0}bindUniforms(f,b,g){var m;const l=this.glContext.gl;let o=0;for(const{name:u,type:d,location:y,arrayLength:w}of f){const _=(m=b.find(T=>T.name===u))===null||m===void 0?void 0:m.data;if(d!=="sampler2D"&&!_)throw new Error(`variable '${u}' does not have data defined in program info`);switch(d){case"sampler2D":this.bindTexture(g[o],y,o),o++;break;case"float":w?l.uniform1fv(y,_):l.uniform1f(y,_);break;case"int":w?l.uniform1iv(y,_):l.uniform1i(y,_);break;default:throw new Error(`Uniform not implemented: ${d}`)}}}bindTexture(f,b,g){this.glContext.bindTextureToUniform(f.texture,g,b)}getAttribLocations(f){return{position:this.getAttribLocation(f,"position"),textureCoord:this.getAttribLocation(f,"textureCoord")}}getUniformLocations(f,b,g){const m=[];if(b)for(const l of b)m.push({name:l,type:"sampler2D",location:this.getUniformLocation(f,l)});if(g)for(const l of g)m.push(Object.assign(Object.assign({},l),{location:this.getUniformLocation(f,l.name)}));return m}getUniformLocation(f,b){const g=this.glContext.gl.getUniformLocation(f,b);if(g===null)throw new Error(`Uniform ${b} not found.`);return g}getAttribLocation(f,b){return this.glContext.gl.getAttribLocation(f,b)}}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const n=t(1315),a=t(5881),s=t(7860),c=t(4110),f=t(2757),b=t(7618),g=t(5243);e.WebGLSessionHandler=class{constructor(m,l){this.backend=m,this.context=l,this.layoutStrategy=new b.PreferLogicalStrategy(m.glContext.maxTextureSize),this.programManager=new f.ProgramManager(this.context.profiler,m.glContext,this.layoutStrategy),this.textureManager=new g.TextureManager(m.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:m.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=m.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new s.WebGLInferenceHandler(this)}onGraphInitialized(m){const l=m.getValues().filter(o=>o.from===-1&&o.tensor).map(o=>o.tensor.dataId);this.initializers=new Set(l)}isInitializer(m){return!!this.initializers&&this.initializers.has(m)}addInitializer(m){this.initializers.add(m)}getTextureData(m,l){return l?this.packedTextureDataCache.get(m):this.unpackedTextureDataCache.get(m)}setTextureData(m,l,o=!1){n.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),o?this.packedTextureDataCache.set(m,l):this.unpackedTextureDataCache.set(m,l)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(m=>this.textureManager.releaseTexture(m,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(m=>this.textureManager.releaseTexture(m,!0)),this.unpackedTextureDataCache=new Map}resolve(m,l,o){const u=(0,a.resolveOperator)(m,l,c.WEBGL_OP_RESOLVE_RULES);return{impl:u.opImpl,context:u.opInit?u.opInit(m,o):m}}}},9622:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const n=t(1315);e.RedFloat32DataEncoder=class{constructor(a,s=1){if(s===1)this.internalFormat=a.R32F,this.format=a.RED,this.textureType=a.FLOAT,this.channelSize=s;else{if(s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=a.RGBA32F,this.format=a.RGBA,this.textureType=a.FLOAT,this.channelSize=s}}encode(a,s){let c,f;return a.constructor!==Float32Array&&(n.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),f=new Float32Array(a)),s*this.channelSize>a.length?(n.Logger.warning("Encoder","Source data too small. Allocating larger array"),f=a,c=this.allocate(s*this.channelSize),f.forEach((b,g)=>c[g]=b)):(f=a,c=f),c}allocate(a){return new Float32Array(4*a)}decode(a,s){return this.channelSize===1?a.filter((c,f)=>f%4==0).subarray(0,s):a.subarray(0,s)}},e.RGBAFloatDataEncoder=class{constructor(a,s=1,c){if(s!==1&&s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=a.RGBA,this.format=a.RGBA,this.channelSize=s,this.textureType=c||a.FLOAT}encode(a,s){let c=a;return this.channelSize===1&&(n.Logger.verbose("Encoder","Exploding into a larger array"),c=this.allocate(s),a.forEach((f,b)=>c[4*b]=f)),c}allocate(a){return new Float32Array(4*a)}decode(a,s){return this.channelSize===1?a.filter((c,f)=>f%4==0).subarray(0,s):a.subarray(0,s)}},e.Uint8DataEncoder=class{constructor(a,s=1){if(this.channelSize=4,s===1)this.internalFormat=a.ALPHA,this.format=a.ALPHA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=s;else{if(s!==4)throw new Error(`Invalid number of channels: ${s}`);this.internalFormat=a.RGBA,this.format=a.RGBA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=s}}encode(a,s){return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}allocate(a){return new Uint8Array(a*this.channelSize)}decode(a,s){if(a instanceof Uint8Array)return a.subarray(0,s);throw new Error(`Invalid array type: ${a.constructor}`)}}},7618:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const n=t(1315),a=t(7273);function s(m,l){const o=[],u=[],d=l!=null&&Array.isArray(l)&&l.length===0,y=l==null||d?null:c(l,m).sort();let w=0;for(let _=0;_<m.length;++_){if(y!=null){if(y[w]===_&&m[_]!==1)throw new Error(`Can't squeeze axis ${_} since its dim '${m[_]}' is not 1`);(y[w]==null||y[w]>_)&&m[_]===1&&(o.push(m[_]),u.push(_)),y[w]<=_&&w++}m[_]!==1&&(o.push(m[_]),u.push(_))}return{newShape:o,keptDims:u}}function c(m,l){const o=l.length;return m=m==null?l.map((u,d)=>d):[].concat(m),(0,a.assert)(m.every(u=>u>=-o&&u<o),()=>`All values in axis param must be in range [-${o}, ${o}) but got axis ${m}`),(0,a.assert)(m.every(f),()=>`All values in axis param must be integers but got axis ${m}`),m.map(u=>u<0?o+u:u)}function f(m){return m%1==0}function b(m){if(m.length===0)return 1;let l=m[0];for(let o=1;o<m.length;o++)l*=m[o];return l}function g(m){const l=Math.ceil(Math.sqrt(m));return[l,Math.ceil(m/l)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(m){this.maxTextureSize=m}computeTextureWH(m,l){if(m.length===0)return[1,1];const o=this.maxTextureSize;if(l&&l.breakAxis!==void 0){const y=l.breakAxis>=m.length?1:m.slice(l.breakAxis).reduce((_,T)=>_*T),w=l.breakAxis<=0?1:m.slice(0,l.breakAxis).reduce((_,T)=>_*T);if(!(y>o||w>o))return[y,w];n.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${m}, breakAxis:${l.breakAxis}`)}const u=m.reduce((y,w)=>y*w);let d=Math.floor(Math.sqrt(u));for(;d<o&&d<u&&u%d!=0;d++);if(d>=o||u%d!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${m}`);return[d,u/d]}},e.PreferLogicalStrategy=class{constructor(m){this.maxTextureSize=m}computeTextureWH(m,l){const o=this.computeTexture(m,l);return l&&l.isPacked&&(o[0]/=2,o[1]/=2),l&&l.reverseWH?[o[1],o[0]]:o}computeTexture(m,l){const o=l&&l.isPacked;if(m.length===0)return o?[2,2]:[1,1];let u=this.maxTextureSize;if(l&&l.breakAxis!==void 0){const w=l.breakAxis>=m.length?1:m.slice(l.breakAxis).reduce((T,S)=>T*S),_=l.breakAxis<=0?1:m.slice(0,l.breakAxis).reduce((T,S)=>T*S);if(!(w>u||_>u))return[w,_];n.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${m}, breakAxis:${l.breakAxis}`)}let d=m.slice(0);o&&(u*=2,d=d.map((w,_)=>_>=d.length-2?d[_]%2==0?d[_]:d[_]+1:d[_]),d.length===1&&(d=[2,d[0]])),d.length!==2&&(d=s(d).newShape);const y=b(d);return d.length<=1&&y<=u?[1,y]:d.length===2&&d[0]<=u&&d[1]<=u?d:d.length===3&&d[0]*d[1]<=u&&d[2]<=u?[d[0]*d[1],d[2]]:d.length===3&&d[0]<=u&&d[1]*d[2]<=u?[d[0],d[1]*d[2]]:d.length===4&&d[0]*d[1]*d[2]<=u&&d[3]<=u?[d[0]*d[1]*d[2],d[3]]:d.length===4&&d[0]<=u&&d[1]*d[2]*d[3]<=u?[d[0],d[1]*d[2]*d[3]]:o?g(y/4).map(w=>2*w):g(y)}},e.squeezeShape=s,e.parseAxisParam=c,e.isInt=f,e.sizeFromShape=b,e.getRowsCols=function(m){if(m.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[m.length>1?m[m.length-2]:1,m[m.length-1]]},e.sizeToSquarishShape=g,e.getBatchDim=function(m,l=2){return b(m.slice(0,m.length-l))}},3314:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const n=t(7273),a=t(5639);e.createTextureLayoutFromTextureType=(s,c,f)=>{const b=f===a.TextureType.unpacked||f===a.TextureType.unpackedReversed?1:4,g=f===a.TextureType.packed,m=f===a.TextureType.unpackedReversed||f===a.TextureType.packed,l=f===a.TextureType.packedLastDimension?c.length-1:void 0,o=f===a.TextureType.packedLastDimension?c.map((u,d)=>d===c.length-1?4*u:u):void 0;return(0,e.createTextureLayoutFromShape)(s,c,b,o,{isPacked:g,reverseWH:m,breakAxis:l})},e.calculateTextureWidthAndHeight=(s,c,f)=>{const b=(0,e.createTextureLayoutFromTextureType)(s,c,f);return[b.width,b.height]},e.createTextureLayoutFromShape=(s,c,f=1,b,g)=>{const m=!(!g||!g.isPacked),[l,o]=s.computeTextureWH(m&&b||c,g),u=c.length;let d=c.slice(0);if(u===0&&(d=[1]),f===1)b=c;else if(m){if(f!==4)throw new Error("a packed texture must be 4-channel");b=c,u>0&&(d[u-1]=Math.ceil(d[u-1]/2)),u>1&&(d[u-2]=Math.ceil(d[u-2]/2))}else if(!b)throw new Error("Unpacked shape is needed when using channels > 1");return{width:l,height:o,channels:f,isPacked:m,shape:d,strides:n.ShapeUtil.computeStrides(d),unpackedShape:b,reversedWH:g&&g.reverseWH}}},5243:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const n=t(1315);e.TextureManager=class{constructor(a,s,c,f){this.glContext=a,this.layoutStrategy=s,this.profiler=c,this.config=f,this.pendingRead=new Map,f.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(a,s,c,f){const b=this.toEncoderType(a),g=this.glContext.getEncoder(b,s.channels||1,f);if(s.isPacked&&f===1)throw new Error("not implemented");const m=s.width,l=s.height;let o,u;if(this.config.reuseTextures){o=`${m}x${l}_${g.format}_${g.internalFormat}_${g.textureType}`,u=this.inUseTextures.get(o),u||(u=[],this.inUseTextures.set(o,u));const y=this.idleTextures.get(o);if(y&&y.length>0){const w=y.pop();return u.push(w),f===1&&this.glContext.updateTexture(w,m,l,g,this.toTextureData(a,c)),w}}n.Logger.verbose("TextureManager",`Creating new texture of size ${s.width}x${s.height}`);const d=this.glContext.allocateTexture(m,l,g,this.toTextureData(a,c));return this.config.reuseTextures&&(u.push(d),this.textureLookup.set(d,o)),d}readTexture(a,s,c){return c||(c=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const f=a.shape.reduce((g,m)=>g*m)*c,b=this.glContext.readTexture(a.texture,a.width,a.height,f,this.toEncoderType(s),c);return this.toTensorData(s,b)})}async readTextureAsync(a,s,c){const f=a.tensor.dataId;if(c||(c=1),this.pendingRead.has(f)){const b=this.pendingRead.get(f);return new Promise(g=>b==null?void 0:b.push(g))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(f,[]);const b=a.shape.reduce((o,u)=>o*u)*c;await this.glContext.createAndWaitForFence();const g=this.glContext.readTexture(a.texture,a.width,a.height,b,this.toEncoderType(s),c),m=this.toTensorData(s,g),l=this.pendingRead.get(f);return this.pendingRead.delete(f),l==null||l.forEach(o=>o(m)),m})}readUint8TextureAsFloat(a){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const s=a.shape.reduce((f,b)=>f*b),c=this.glContext.readTexture(a.texture,a.width,a.height,4*s,"byte",4);return new Float32Array(c.buffer,c.byteOffset,s)})}releaseTexture(a,s){let c;if(this.config.reuseTextures&&(c=this.textureLookup.get(a.texture),c)){s&&this.textureLookup.delete(c);const f=this.inUseTextures.get(c);if(f){const b=f.indexOf(a.texture);if(b!==-1){f.splice(b,1);let g=this.idleTextures.get(c);g||(g=[],this.idleTextures.set(c,g)),g.push(a.texture)}}}c&&!s||(n.Logger.verbose("TextureManager",`Deleting texture of size ${a.width}x${a.height}`),this.glContext.deleteTexture(a.texture))}toTensorData(a,s){switch(a){case"int16":return s instanceof Int16Array?s:Int16Array.from(s);case"int32":return s instanceof Int32Array?s:Int32Array.from(s);case"int8":return s instanceof Int8Array?s:Int8Array.from(s);case"uint16":return s instanceof Uint16Array?s:Uint16Array.from(s);case"uint32":return s instanceof Uint32Array?s:Uint32Array.from(s);case"uint8":case"bool":return s instanceof Uint8Array?s:Uint8Array.from(s);case"float32":return s instanceof Float32Array?s:Float32Array.from(s);case"float64":return s instanceof Float64Array?s:Float64Array.from(s);default:throw new Error(`TensorData type ${a} is not supported`)}}toTextureData(a,s){if(s)return s instanceof Float32Array?s:new Float32Array(s)}toEncoderType(a){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(r,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(t=e.TextureType||(e.TextureType={}))[t.unpacked=0]="unpacked",t[t.unpackedReversed=1]="unpackedReversed",t[t.packed=2]="packed",t[t.downloadUint8AsFloat=3]="downloadUint8AsFloat",t[t.packedLastDimension=4]="packedLastDimension"},432:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const n=t(7273);e.getPackedShape=function(a){const s=a.length;return a.slice(0,s-1).concat(a[s-1]/4)},e.repeatedTry=async function(a,s=f=>0,c){return new Promise((f,b)=>{let g=0;const m=()=>{if(a())return void f();g++;const l=s(g);c!=null&&g>=c?b():setTimeout(m,l)};m()})},e.generateShaderFuncNameFromInputSamplerName=function(a){return(0,n.assert)(a!==void 0&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(a){return(0,n.assert)(a!==void 0&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(a,s){let c=JSON.parse(JSON.stringify(a));return c=s,c},e.getSqueezedParams=function(a,s){return s.map(c=>a[c]).join(", ")},e.getCoordsDataType=function(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error(`GPU for rank ${a} is not yet supported`)},e.getGlChannels=function(a=6){return["x","y","z","w","u","v"].slice(0,a)}},3389:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const n=t(1315),a=t(3524),s={};function c(f,b){let g;const m={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!b||b==="webgl2")&&(g=f.getContext("webgl2",m),g))try{return new a.WebGLContext(g,2)}catch(l){n.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${l}`)}if((!b||b==="webgl")&&(g=f.getContext("webgl",m)||f.getContext("experimental-webgl",m),g))try{return new a.WebGLContext(g,1)}catch(l){n.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${l}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function f(b){let g;if(b&&b!=="webgl2"||!("webgl2"in s)?b&&b!=="webgl"||!("webgl"in s)||(g=s.webgl):g=s.webgl2,!g)try{g=c(function(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),b)}catch{g=c(function(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");const o=document.createElement("canvas");return o.width=1,o.height=1,o}(),b)}b=b||g.version===1?"webgl":"webgl2";const m=g.gl;return s[b]=g,m.isContextLost()?(delete s[b],f(b)):(m.disable(m.DEPTH_TEST),m.disable(m.STENCIL_TEST),m.disable(m.BLEND),m.disable(m.DITHER),m.disable(m.POLYGON_OFFSET_FILL),m.disable(m.SAMPLE_COVERAGE),m.enable(m.SCISSOR_TEST),m.enable(m.CULL_FACE),m.cullFace(m.BACK),g)},e.createNewWebGLContext=c},3524:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(m,l,o,u){u===void 0&&(u=o);var d=Object.getOwnPropertyDescriptor(l,o);d&&!("get"in d?!l.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return l[o]}}),Object.defineProperty(m,u,d)}:function(m,l,o,u){u===void 0&&(u=o),m[u]=l[o]}),a=this&&this.__setModuleDefault||(Object.create?function(m,l){Object.defineProperty(m,"default",{enumerable:!0,value:l})}:function(m,l){m.default=l}),s=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var l={};if(m!=null)for(var o in m)o!=="default"&&Object.prototype.hasOwnProperty.call(m,o)&&n(l,m,o);return a(l,m),l};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const c=t(2235),f=s(t(9622)),b=t(432);function g(m){let l=0;for(;l<m.length&&m[l]();++l);return l-1}e.linearSearchLastTrue=g,e.WebGLContext=class{constructor(m,l){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=m,this.version=l,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(m,l,o,u){const d=this.gl,y=d.createTexture();d.bindTexture(d.TEXTURE_2D,y),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);const w=u?o.encode(u,m*l):null;return d.texImage2D(d.TEXTURE_2D,0,o.internalFormat,m,l,0,o.format,o.textureType,w),this.checkError(),y}updateTexture(m,l,o,u,d){const y=this.gl;y.bindTexture(y.TEXTURE_2D,m);const w=u.encode(d,l*o);y.texSubImage2D(y.TEXTURE_2D,0,0,0,l,o,u.format,u.textureType,w),this.checkError()}attachFramebuffer(m,l,o){const u=this.gl;u.bindTexture(u.TEXTURE_2D,m),u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,m,0),this.checkError(),u.viewport(0,0,l,o),u.scissor(0,0,l,o)}readTexture(m,l,o,u,d,y){const w=this.gl;y||(y=1),this.frameBufferBound||this.attachFramebuffer(m,l,o);const _=this.getEncoder(d,y),T=_.allocate(l*o);return w.bindTexture(w.TEXTURE_2D,m),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,m,0),w.readPixels(0,0,l,o,w.RGBA,_.textureType,T),this.checkError(),_.decode(T,u)}isFramebufferReady(){return!0}getActiveTexture(){const m=this.gl;return"TEXTURE"+(m.getParameter(this.gl.ACTIVE_TEXTURE)-m.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(m,l){const o=this.gl;o.vertexAttribPointer(m,3,o.FLOAT,!1,20,0),o.enableVertexAttribArray(m),l!==-1&&(o.vertexAttribPointer(l,2,o.FLOAT,!1,20,12),o.enableVertexAttribArray(l)),this.checkError()}createProgram(m,l){const o=this.gl,u=o.createProgram();return o.attachShader(u,m),o.attachShader(u,l),o.linkProgram(u),u}compileShader(m,l){const o=this.gl,u=o.createShader(l);if(!u)throw new Error(`createShader() returned null with type ${l}`);if(o.shaderSource(u,m),o.compileShader(u),o.getShaderParameter(u,o.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${o.getShaderInfoLog(u)}
Shader source:
${m}`);return u}deleteShader(m){this.gl.deleteShader(m)}bindTextureToUniform(m,l,o){const u=this.gl;u.activeTexture(u.TEXTURE0+l),this.checkError(),u.bindTexture(u.TEXTURE_2D,m),this.checkError(),u.uniform1i(o,l),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(c.env.debug){const m=this.gl,l=m.getError();let o="";switch(l){case m.NO_ERROR:return;case m.INVALID_ENUM:o="INVALID_ENUM";break;case m.INVALID_VALUE:o="INVALID_VALUE";break;case m.INVALID_OPERATION:o="INVALID_OPERATION";break;case m.INVALID_FRAMEBUFFER_OPERATION:o="INVALID_FRAMEBUFFER_OPERATION";break;case m.OUT_OF_MEMORY:o="OUT_OF_MEMORY";break;case m.CONTEXT_LOST_WEBGL:o="CONTEXT_LOST_WEBGL";break;default:o=`Unknown WebGL Error: ${l.toString(16)}`}throw new Error(o)}}deleteTexture(m){this.gl.deleteTexture(m)}deleteProgram(m){this.gl.deleteProgram(m)}getEncoder(m,l,o=0){if(this.version===2)return new f.RedFloat32DataEncoder(this.gl,l);switch(m){case"float":return o===1||this.isRenderFloat32Supported?new f.RGBAFloatDataEncoder(this.gl,l):new f.RGBAFloatDataEncoder(this.gl,l,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new f.Uint8DataEncoder(this.gl,l);default:throw new Error(`Invalid dataType: ${m}`)}}clearActiveTextures(){const m=this.gl;for(let l=0;l<this.maxTextureImageUnits;++l)m.activeTexture(m.TEXTURE0+l),m.bindTexture(m.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,null),m.deleteFramebuffer(this.framebuffer),m.bindBuffer(m.ARRAY_BUFFER,null),m.deleteBuffer(this.vertexbuffer),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null),m.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const m=this.gl,l=m.createBuffer();if(!l)throw new Error("createBuffer() returned null");const o=this.createDefaultGeometry();return m.bindBuffer(m.ARRAY_BUFFER,l),m.bufferData(m.ARRAY_BUFFER,o,m.STATIC_DRAW),this.checkError(),l}createFramebuffer(){const m=this.gl.createFramebuffer();if(!m)throw new Error("createFramebuffer returned null");return m}queryVitalParameters(){const m=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=m.getParameter(m.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=m.getParameter(m.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const m=this.gl,l=m.createTexture();m.bindTexture(m.TEXTURE_2D,l);const o=this.version===2?m.RGBA32F:m.RGBA;m.texImage2D(m.TEXTURE_2D,0,o,1,1,0,m.RGBA,m.FLOAT,null);const u=m.createFramebuffer();m.bindFramebuffer(m.FRAMEBUFFER,u),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l,0);const d=m.checkFramebufferStatus(m.FRAMEBUFFER)===m.FRAMEBUFFER_COMPLETE;return m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null),m.deleteTexture(l),m.deleteFramebuffer(u),d}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const m=this.gl;let l,o,u,d,y;try{l=m.createTexture(),o=m.createFramebuffer(),m.bindTexture(m.TEXTURE_2D,l);const w=this.version===2?m.RGBA32F:m.RGBA;return m.texImage2D(m.TEXTURE_2D,0,w,1,1,0,m.RGBA,m.FLOAT,null),m.bindFramebuffer(m.FRAMEBUFFER,o),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l,0),m.enable(m.BLEND),u=m.createShader(m.VERTEX_SHADER),!!u&&(m.shaderSource(u,"void main(){}"),m.compileShader(u),d=m.createShader(m.FRAGMENT_SHADER),!!d&&(m.shaderSource(d,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),m.compileShader(d),y=m.createProgram(),!!y&&(m.attachShader(y,u),m.attachShader(y,d),m.linkProgram(y),m.useProgram(y),m.drawArrays(m.POINTS,0,1),m.getError()===m.NO_ERROR)))}finally{m.disable(m.BLEND),y&&m.deleteProgram(y),u&&m.deleteShader(u),d&&m.deleteShader(d),o&&(m.bindFramebuffer(m.FRAMEBUFFER,null),m.deleteFramebuffer(o)),l&&(m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(l))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const m=this.gl,l=this.disjointTimerQueryWebgl2Extension,o=m.createQuery();return m.beginQuery(l.TIME_ELAPSED_EXT,o),o}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const m=this.gl,l=this.disjointTimerQueryWebgl2Extension;m.endQuery(l.TIME_ELAPSED_EXT)}}isTimerResultAvailable(m){let l=!1,o=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const u=this.gl,d=this.disjointTimerQueryWebgl2Extension;l=u.getQueryParameter(m,u.QUERY_RESULT_AVAILABLE),o=u.getParameter(d.GPU_DISJOINT_EXT)}return l&&!o}getTimerResult(m){let l=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const o=this.gl;l=o.getQueryParameter(m,o.QUERY_RESULT),o.deleteQuery(m)}return l/1e6}async waitForQueryAndGetTime(m){return await(0,b.repeatedTry)(()=>this.isTimerResultAvailable(m)),this.getTimerResult(m)}async createAndWaitForFence(){const m=this.createFence(this.gl);return this.pollFence(m)}createFence(m){let l;const o=m,u=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);return m.flush(),l=u===null?()=>!0:()=>{const d=o.clientWaitSync(u,0,0);return d===o.ALREADY_SIGNALED||d===o.CONDITION_SATISFIED},{query:u,isFencePassed:l}}async pollFence(m){return new Promise(l=>{this.addItemToPoll(()=>m.isFencePassed(),()=>l())})}pollItems(){const m=g(this.itemsToPoll.map(l=>l.isDoneFn));for(let l=0;l<=m;++l){const{resolveFn:o}=this.itemsToPoll[l];o()}this.itemsToPoll=this.itemsToPoll.slice(m+1)}async addItemToPoll(m,l){this.itemsToPoll.push({isDoneFn:m,resolveFn:l}),this.itemsToPoll.length>1||await(0,b.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const n=t(1315);class a{constructor(c,f){this.op=c,this.node=f}}e.ExecutionPlan=class{constructor(s,c,f){this.graph=s,this.profiler=f,this.initialize(c)}initialize(s){this.profiler.event("session","ExecutionPlan.initialize",()=>{const c=this.graph.getNodes();if(c.length!==s.length)throw new Error("The size of nodes and OPs do not match.");this._ops=s.map((f,b)=>new a(f,c[b])),this.reset(),this._starter=[],this._ops.forEach((f,b)=>{let g=!0;for(const m of f.node.inputs)if(!this._values[m]&&this.graph.getInputIndices().indexOf(m)===-1){g=!1;break}g&&this._starter.push(b)})})}reset(){this._values=this.graph.getValues().map(s=>s.tensor)}async execute(s,c){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const f=s.createInferenceHandler(),b=this.graph.getInputIndices();if(c.length!==b.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${c.length} expected: ${b.length}`);c.forEach((d,y)=>{const w=b[y];this._values[w]=d});const g=this._starter.slice(0),m=this.graph.getValues(),l=this.graph.getNodes();let o=0;for(;o<g.length;){const d=g[o++],y=this._ops[d],w=y.node.inputs.map(E=>this._values[E]);if(w.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${y.node}`);const _=w;n.Logger.verbose("ExecPlan",`Runing op:${y.node.name} (${_.map((E,A)=>`'${y.node.inputs[A]}': ${E.type}[${E.dims.join(",")}]`).join(", ")})`);const T=await this.profiler.event("node",y.node.name,async()=>y.op.impl(f,_,y.op.context));if(T.length!==y.node.outputs.length)throw new Error("the size of output does not match model definition.");T.forEach((E,A)=>{const P=y.node.outputs[A];if(this._values[P])throw new Error(`output [${P}] already has value: op:${y.node.name}`);this._values[P]=E});const S=new Set;T.forEach((E,A)=>{const P=y.node.outputs[A];for(const k of m[P].to){const M=l[k];let F=!0;for(const O of M.inputs)if(!this._values[O]){F=!1;break}F&&S.add(k)}}),g.push(...S)}const u=[];for(let d=0;d<this.graph.getOutputIndices().length;d++){const y=this.graph.getOutputIndices()[d],w=this._values[y];if(w===void 0)throw new Error(`required output [${y}] does not have value`);y===0?await w.getData():w.data,u.push(w)}return n.Logger.verbose("ExecPlan","disposing of inferenceHandler"),f.dispose(),u})}}},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const n=t(6874),a=t(5127),s=t(2446),c=t(9240),f=t(7273);var b=a.onnxruntime.experimental.fbs;e.Graph={from:(o,u)=>new l(o,u)};class g{constructor(u){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,u&&(this.type=f.ProtoUtil.tensorValueTypeFromProto(u.type.tensorType))}get from(){return this._from}get to(){return this._to}}class m{constructor(u,d){u instanceof s.onnx.NodeProto?(this.name=u.name,this.opType=u.opType,this.attributes=new n.Attribute(u.attribute)):u instanceof b.Node&&(this.name=d??u.name(),this.opType=u.opType(),this.attributes=new n.Attribute(f.ProtoUtil.tensorAttributesFromORTFormat(u))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class l{constructor(u,d){if(!u)throw new TypeError("graph is empty");this.buildGraph(u),this.transformGraph(d),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(u){if(u instanceof s.onnx.GraphProto)this.buildGraphFromOnnxFormat(u);else{if(!(u instanceof b.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(u)}}buildGraphFromOnnxFormat(u){const d=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const y=new Map;if(!u.input)throw new Error("missing information in graph: input");const w=[];for(const _ of u.input){if(d.has(_.name))throw new Error(`duplicated input name: ${_.name}`);const T=this._allData.push(new g(_))-1;d.set(_.name,T),w.push(_.name)}if(!u.initializer)throw new Error("missing information in graph: initializer");for(const _ of u.initializer){let T=d.get(_.name);if(T===void 0){const S=new g;S.type={shape:{dims:f.ProtoUtil.tensorDimsFromProto(_.dims)},tensorType:f.ProtoUtil.tensorDataTypeFromProto(_.dataType)},T=this._allData.push(S)-1,d.set(_.name,T)}this._allData[T]._from=-1,this._allData[T].tensor=c.Tensor.fromProto(_)}for(let _=0;_<this._allData.length;_++)this._allData[_].tensor||(this._allInputIndices.push(_),this._allInputNames.push(w[_]));if(!u.output)throw new Error("missing information in graph: output");for(const _ of u.output){if(d.has(_.name))throw new Error(`duplicated output name: ${_.name}`);const T=this._allData.push(new g(_))-1;d.set(_.name,T),this._allOutputIndices.push(T),this._allOutputNames.push(_.name)}if(!u.node)throw new Error("missing information in graph: node");for(const _ of u.node){if(!_.name)for(let S=0;;S++){const E=`unnamed_${_.opType}_${S}`;if(!y.has(E)){_.name=E;break}}if(y.has(_.name))throw new Error(`duplicated node name: ${_.name}`);const T=this._nodes.push(new m(_))-1;y.set(_.name,T)}for(let _=0;_<this._nodes.length;_++){const T=this._nodes[_],S=u.node[_];if(!S.output)throw new Error(`missing output for node: ${S.name}`);for(const E of S.output){let A=d.get(E);if(A===void 0&&(A=this._allData.push(new g)-1,d.set(E,A)),T.outputs.push(A),this._allData[A]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${A}`);if(this._allData[A]._from=_,S.opType==="Constant"){if(!S.attribute||S.attribute.length!==1||!S.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!S.output||S.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");T.outputs.pop(),T.executeNode=!1,this._allData[A]._from=-1,this._allData[A].tensor=c.Tensor.fromProto(S.attribute[0].t)}}}for(let _=0;_<this._nodes.length;_++){const T=this._nodes[_],S=u.node[_];if(!S.input)throw new Error(`missing input for node: ${S.name}`);for(const E of S.input){const A=d.get(E);if(A===void 0){if(E===""&&(S.input.length===3||S.input.length===4)&&S.opType==="Resize")continue;throw new Error(`unrecognized input '${E}' for node: ${S.name}`)}T.inputs.push(A),this._allData[A]._to.push(_)}}return!0}buildGraphFromOrtFormat(u){var d,y,w;const _=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const T=new Map,S=[];for(let E=0;E<u.inputsLength();E++){const A=u.inputs(E);if(_.has(A))throw new Error(`duplicated input name: ${A}`);for(let P=0;P<u.nodeArgsLength();P++)if(((d=u.nodeArgs(P))===null||d===void 0?void 0:d.name())===A){const k=new g;if(((w=(y=u.nodeArgs(P))===null||y===void 0?void 0:y.type())===null||w===void 0?void 0:w.valueType())!==b.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const M=u.nodeArgs(P).type().value(new b.TensorTypeAndShape),F=f.ProtoUtil.tensorDataTypeFromProto(M.elemType()),O=M.shape(),D=[];for(let C=0;C<O.dimLength();C++)D.push(f.LongUtil.longToNumber(O.dim(C).value().dimValue()));k.type={shape:{dims:D},tensorType:F};const R=this._allData.push(k)-1;_.set(A,R),S.push(A)}}for(let E=0;E<u.initializersLength();E++){const A=u.initializers(E);let P=_.get(A.name());if(P===void 0){const k=new g,M=f.ProtoUtil.tensorDimsFromORTFormat(A),F=f.ProtoUtil.tensorDataTypeFromProto(A.dataType());k.type={shape:{dims:M},tensorType:F},P=this._allData.push(k)-1,_.set(A.name(),P)}this._allData[P]._from=-1,this._allData[P].tensor=c.Tensor.fromOrtTensor(A)}for(let E=0;E<this._allData.length;E++)this._allData[E].tensor||(this._allInputIndices.push(E),this._allInputNames.push(S[E]));for(let E=0;E<u.outputsLength();E++){const A=u.outputs(E);if(_.has(A))throw new Error(`duplicated output name: ${A}`);const P=this._allData.push(new g)-1;_.set(A,P),this._allOutputIndices.push(P),this._allOutputNames.push(A)}if(!u.nodes)throw new Error("missing information in graph: node");for(let E=0;E<u.nodesLength();E++){const A=u.nodes(E);let P=A.name();if(!P)for(let M=0;P=`unnamed_${A.opType()}_${M}`,T.has(P);M++);if(T.has(P))throw new Error(`duplicated node name: ${P}`);const k=this._nodes.push(new m(A,P))-1;T.set(P,k)}for(let E=0;E<this._nodes.length;E++){const A=this._nodes[E],P=u.nodes(E);if(P==null)throw new Error(`No node exists at index ${E}`);if((P==null?void 0:P.outputsLength())===0)throw new Error(`missing output for node: ${P.name}`);for(let k=0;k<(P==null?void 0:P.outputsLength());k++){const M=P==null?void 0:P.outputs(k);let F=_.get(M);if(F===void 0&&(F=this._allData.push(new g)-1,_.set(M,F)),A.outputs.push(F),this._allData[F]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${F}`);if(this._allData[F]._from=E,P.opType()==="Constant"){if(P.attributesLength()!==1||!P.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(P.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");A.outputs.pop(),A.executeNode=!1,this._allData[F]._from=-1,this._allData[F].tensor=c.Tensor.fromOrtTensor(P.attributes(0).t())}}}for(let E=0;E<this._nodes.length;E++){const A=this._nodes[E],P=u.nodes(E);if(P.inputsLength()===0)throw new Error(`missing input for node: ${P.name}`);for(let k=0;k<P.inputsLength();k++){const M=P.inputs(k),F=_.get(M);if(F===void 0)throw new Error(`unrecognized input '${M}' for node: ${P.name()}`);A.inputs.push(F),this._allData[F]._to.push(E)}}}checkIsAcyclic(){const u=new Set;this._allInputIndices.forEach(w=>{this._allData[w]._to.forEach(_=>{u.add(_)})});const d=Array.from(u),y=new Array(this._nodes.length).fill("white");for(;d.length>0;){const w=d.pop();y[w]==="gray"?y[w]="black":(d.push(w),y[w]="gray",this._nodes[w].outputs.forEach(_=>{const T=this._allData[_];if(T.tensor!==void 0)throw new Error("node outputs should not be initialized");if(T._from!==w)throw new Error("from property of the Value object doesn't match index of Node being processed");T._to.forEach(S=>{if(y[S]==="gray")throw new Error("model graph is cyclic");y[S]==="white"&&d.push(S)})}))}}transformGraph(u){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),u&&u.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let u=0;const d=new Array(this._nodes.length,0);let y=0;for(let w=0;w<this._nodes.length;w++)d[w]=y,this._nodes[w].executeNode?(y!==w&&(this._nodes[y]=this._nodes[w]),y++):this._nodes[w].outputs.forEach(_=>{this._allData[_]._from=-2});this._nodes.splice(y,this._nodes.length-y);for(let w=0;w<this._allData.length;w++){const _=this._allData[w];_._from!==void 0&&_._from!==-1&&_._from!==-2&&(_._from=d[_._from]);for(let T=0;T<_._to.length;T++){if(!(_._to[T]>=0))throw new Error("Trying to update a removed node");_._to[T]=d[_._to[T]]}}u=0;for(let w=0;w<this._allData.length;w++)if(this._allData[w].from!==-2||this._allOutputIndices.indexOf(w+u)!==-1){if(u>0){let _=-1;this._allData[w].from!==void 0&&this._allData[w].from!==-1?(_=this._nodes[this._allData[w].from].outputs.indexOf(w+u),_!==-1&&(this._nodes[this._allData[w].from].outputs[_]=w)):(_=this._allInputIndices.indexOf(w+u),_!==-1&&(this._allInputIndices[_]=w)),this._allData[w].to.forEach(T=>{_=this._nodes[T].inputs.indexOf(w+u),_!==-1&&(this._nodes[T].inputs[_]=w)}),this._allData[w].to.length===0&&(_=this._allOutputIndices.indexOf(w+u),_!==-1&&(this._allOutputIndices[_]=w))}}else u++,this._allData.splice(w,1),w--}deleteNode(u){const d=this._nodes[u];if(d.outputs.length>1){for(let S=1;S<d.outputs.length;S++)if(this._allData[d.outputs[S]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}d.executeNode=!1;const y=d.inputs[0],w=d.outputs[0],_=this._allData[w].to;for(let S=0;S<d.inputs.length;S++){const E=this._allData[d.inputs[S]].to.indexOf(u);if(E===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[d.inputs[S]].to.splice(E,1)}this._allData[w]._to=[];const T=this._allOutputIndices.indexOf(w);if(T!==-1&&(this._allOutputIndices[T]=y),_&&_.length>0)for(const S of _){const E=this._nodes[S].inputs.indexOf(w);if(E===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[S].inputs[E]=y,this._allData[y].to.push(S)}}removeAllDropoutNodes(){let u=0;for(const d of this._nodes){if(d.opType==="Dropout"){if(d.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(d.outputs.length!==1&&d.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(d.outputs.length===2&&this._allData[d.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(u)}u++}}removeAllIdentityNodes(){let u=0;for(const d of this._nodes)d.opType==="Identity"&&this.deleteNode(u),u++}isActivation(u){switch(u.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const u of this._nodes)if(u.opType==="Conv"){const d=this._allData[u.outputs[0]]._to;if(d.length===1&&this.isActivation(this._nodes[d[0]])){const y=this._nodes[d[0]];if(y.opType==="Clip")if(y.inputs.length===1)try{u.attributes.set("activation_params","floats",[y.attributes.getFloat("min"),y.attributes.getFloat("max")])}catch{u.attributes.set("activation_params","floats",[f.MIN_CLIP,f.MAX_CLIP])}else{if(!(y.inputs.length>=3&&this._allData[y.inputs[1]].tensor!==void 0&&this._allData[y.inputs[2]].tensor!==void 0))continue;u.attributes.set("activation_params","floats",[this._allData[y.inputs[1]].tensor.floatData[0],this._allData[y.inputs[2]].tensor.floatData[0]])}u.attributes.set("activation","string",y.opType),this.deleteNode(d[0])}}}}},1315:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const t={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},n={none:new class{log(m,l,o){}},console:new class{log(m,l,o){console.log(`${this.color(m)} ${o?"\x1B[35m"+o+"\x1B[0m ":""}${l}`)}color(m){switch(m){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${m}`)}}}},a={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let s={"":a};function c(m,l,o,u){if(l===void 0)return d=m,{verbose:c.verbose.bind(null,d),info:c.info.bind(null,d),warning:c.warning.bind(null,d),error:c.error.bind(null,d),fatal:c.fatal.bind(null,d)};if(o===void 0)f(m,l);else if(typeof o=="number"&&u===void 0)f(m,l);else if(typeof o=="string"&&u===void 0)f(m,o,0,l);else{if(typeof o!="string"||typeof u!="number")throw new TypeError("input is valid");f(m,o,0,l)}var d}function f(m,l,o,u){const d=s[u||""]||s[""];t[m]<t[d.minimalSeverity]||(d.logDateTime&&(l=`${new Date().toISOString()}|${l}`),d.logSourceLocation,n[d.provider].log(m,l,u))}(function(m){function l(u){s={},o("",u||{})}function o(u,d){if(u==="*")l(d);else{const y=s[u]||a;s[u]={provider:d.provider||y.provider,minimalSeverity:d.minimalSeverity||y.minimalSeverity,logDateTime:d.logDateTime===void 0?y.logDateTime:d.logDateTime,logSourceLocation:d.logSourceLocation===void 0?y.logSourceLocation:d.logSourceLocation}}}m.verbose=function(u,d){m("verbose",u,d)},m.info=function(u,d){m("info",u,d)},m.warning=function(u,d){m("warning",u,d)},m.error=function(u,d){m("error",u,d)},m.fatal=function(u,d){m("fatal",u,d)},m.reset=l,m.set=o,m.setWithEnv=function(u){const d={};u.logLevel&&(d.minimalSeverity=u.logLevel),o("",d)}})(c||(c={})),e.Logger=c;class b{constructor(l,o,u,d,y,w){this.category=l,this.name=o,this.startTime=u,this.endCallback=d,this.timer=y,this.ctx=w}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class g{constructor(l,o,u,d){this.category=l,this.name=o,this.startTime=u,this.endTime=d}}e.Profiler=class{static create(m){return m===void 0?new this:new this(m.maxNumberEvents,m.flushBatchSize,m.flushIntervalInMilliseconds)}constructor(m,l,o){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=m===void 0?1e4:m,this._flushBatchSize=l===void 0?10:l,this._flushIntervalInMilliseconds=o===void 0?5e3:o}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(m,l,o,u){const d=this._started?this.begin(m,l,u):void 0;let y=!1;const w=o();if(w&&typeof w.then=="function")return y=!0,new Promise((_,T)=>{w.then(async S=>{d&&await d.end(),_(S)},async S=>{d&&await d.end(),T(S)})});if(!y&&d){const _=d.end();if(_&&typeof _.then=="function")return new Promise((T,S)=>{_.then(()=>{T(w)},E=>{S(E)})})}return w}begin(m,l,o){if(!this._started)throw new Error("profiler is not started yet");if(o===void 0){const u=(0,e.now)();return this.flush(u),new b(m,l,u,d=>this.endSync(d))}{const u=o.beginTimer();return new b(m,l,0,async d=>this.end(d),u,o)}}async end(m){const l=await m.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(m.category,m.name,m.startTime,l)),this.flush(l))}endSync(m){const l=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(m.category,m.name,m.startTime,l)),this.flush(l))}logOneEvent(m){e.Logger.verbose(`Profiler.${m.category}`,`${(m.endTime-m.startTime).toFixed(2)}ms on event '${m.name}' at ${m.endTime.toFixed(2)}`)}flush(m){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||m-this._flushTime>=this._flushIntervalInMilliseconds){for(const l=this._flushPointer;this._flushPointer<l+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const n=t(5686),a=t(4662),s=t(5127),c=t(2446),f=t(7273);var b=s.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(g,m,l){if(!l)try{return void this.loadFromOnnxFormat(g,m)}catch(o){if(l!==void 0)throw o}this.loadFromOrtFormat(g,m)}loadFromOnnxFormat(g,m){const l=c.onnx.ModelProto.decode(g);if(f.LongUtil.longToNumber(l.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=l.opsetImport.map(o=>({domain:o.domain,version:f.LongUtil.longToNumber(o.version)})),this._graph=a.Graph.from(l.graph,m)}loadFromOrtFormat(g,m){const l=new n.flatbuffers.ByteBuffer(g),o=b.InferenceSession.getRootAsInferenceSession(l).model();if(f.LongUtil.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let u=0;u<o.opsetImportLength();u++){const d=o.opsetImport(u);this._opsets.push({domain:d==null?void 0:d.domain(),version:f.LongUtil.longToNumber(d.version())})}this._graph=a.Graph.from(o.graph(),m)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},5881:(r,e)=>{function t(n,a){if(a.endsWith("+")){const s=Number.parseInt(a.substring(0,a.length-1),10);return!isNaN(s)&&s<=n}if(a.split("-").length===2){const s=a.split("-"),c=Number.parseInt(s[0],10),f=Number.parseInt(s[1],10);return!isNaN(c)&&!isNaN(f)&&c<=n&&n<=f}return Number.parseInt(a,10)===n}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(n,a,s){for(const c of s){const f=c[0],b=c[1],g=c[2],m=c[3],l=c[4];if(n.opType===f){for(const o of a)if((o.domain===b||o.domain==="ai.onnx"&&b==="")&&t(o.version,g))return{opImpl:m,opInit:l}}}throw new TypeError(`cannot resolve operator '${n.opType}' with opsets: ${a.map(c=>`${c.domain||"ai.onnx"} v${c.version}`).join(", ")}`)}},5127:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const n=t(5686);var a,s;a=e.onnxruntime||(e.onnxruntime={}),function(c){(function(f){f[f.UNDEFINED=0]="UNDEFINED",f[f.FLOAT=1]="FLOAT",f[f.INT=2]="INT",f[f.STRING=3]="STRING",f[f.TENSOR=4]="TENSOR",f[f.GRAPH=5]="GRAPH",f[f.FLOATS=6]="FLOATS",f[f.INTS=7]="INTS",f[f.STRINGS=8]="STRINGS",f[f.TENSORS=9]="TENSORS",f[f.GRAPHS=10]="GRAPHS",f[f.SPARSE_TENSOR=11]="SPARSE_TENSOR",f[f.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(c.AttributeType||(c.AttributeType={}))}((s=a.experimental||(a.experimental={})).fbs||(s.fbs={})),function(c){(function(f){(function(b){(function(g){g[g.UNKNOWN=0]="UNKNOWN",g[g.VALUE=1]="VALUE",g[g.PARAM=2]="PARAM"})(b.DimensionValueType||(b.DimensionValueType={}))})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){(function(g){g[g.UNDEFINED=0]="UNDEFINED",g[g.FLOAT=1]="FLOAT",g[g.UINT8=2]="UINT8",g[g.INT8=3]="INT8",g[g.UINT16=4]="UINT16",g[g.INT16=5]="INT16",g[g.INT32=6]="INT32",g[g.INT64=7]="INT64",g[g.STRING=8]="STRING",g[g.BOOL=9]="BOOL",g[g.FLOAT16=10]="FLOAT16",g[g.DOUBLE=11]="DOUBLE",g[g.UINT32=12]="UINT32",g[g.UINT64=13]="UINT64",g[g.COMPLEX64=14]="COMPLEX64",g[g.COMPLEX128=15]="COMPLEX128",g[g.BFLOAT16=16]="BFLOAT16",g[g.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",g[g.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",g[g.FLOAT8E5M2=19]="FLOAT8E5M2",g[g.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(b.TensorDataType||(b.TensorDataType={}))})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){(function(g){g[g.Primitive=0]="Primitive",g[g.Fused=1]="Fused"})(b.NodeType||(b.NodeType={}))})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){(function(g){g[g.NONE=0]="NONE",g[g.tensor_type=1]="tensor_type",g[g.sequence_type=2]="sequence_type",g[g.map_type=3]="map_type"})(b.TypeInfoValue||(b.TypeInfoValue={}))})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsShape(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsShape(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}dim(l,o){let u=this.bb.__offset(this.bb_pos,4);return u?(o||new c.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}dimLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}static startShape(l){l.startObject(1)}static addDim(l,o){l.addFieldOffset(0,o,0)}static createDimVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startDimVector(l,o){l.startVector(4,o,4)}static endShape(l){return l.endObject()}static createShape(l,o){return g.startShape(l),g.addDim(l,o),g.endShape(l)}}b.Shape=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsDimension(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsDimension(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}value(l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new c.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}denotation(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,l):null}static startDimension(l){l.startObject(2)}static addValue(l,o){l.addFieldOffset(0,o,0)}static addDenotation(l,o){l.addFieldOffset(1,o,0)}static endDimension(l){return l.endObject()}static createDimension(l,o,u){return g.startDimension(l),g.addValue(l,o),g.addDenotation(l,u),g.endDimension(l)}}b.Dimension=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsDimensionValue(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsDimensionValue(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}dimType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt8(this.bb_pos+l):c.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}dimParam(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,l):null}static startDimensionValue(l){l.startObject(3)}static addDimType(l,o){l.addFieldInt8(0,o,c.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(l,o){l.addFieldInt64(1,o,l.createLong(0,0))}static addDimParam(l,o){l.addFieldOffset(2,o,0)}static endDimensionValue(l){return l.endObject()}static createDimensionValue(l,o,u,d){return g.startDimensionValue(l),g.addDimType(l,o),g.addDimValue(l,u),g.addDimParam(l,d),g.endDimensionValue(l)}}b.DimensionValue=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsTensorTypeAndShape(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTensorTypeAndShape(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}elemType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt32(this.bb_pos+l):c.experimental.fbs.TensorDataType.UNDEFINED}shape(l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new c.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startTensorTypeAndShape(l){l.startObject(2)}static addElemType(l,o){l.addFieldInt32(0,o,c.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(l,o){l.addFieldOffset(1,o,0)}static endTensorTypeAndShape(l){return l.endObject()}static createTensorTypeAndShape(l,o,u){return g.startTensorTypeAndShape(l),g.addElemType(l,o),g.addShape(l,u),g.endTensorTypeAndShape(l)}}b.TensorTypeAndShape=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsMapType(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsMapType(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}keyType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt32(this.bb_pos+l):c.experimental.fbs.TensorDataType.UNDEFINED}valueType(l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new c.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startMapType(l){l.startObject(2)}static addKeyType(l,o){l.addFieldInt32(0,o,c.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(l,o){l.addFieldOffset(1,o,0)}static endMapType(l){return l.endObject()}static createMapType(l,o,u){return g.startMapType(l),g.addKeyType(l,o),g.addValueType(l,u),g.endMapType(l)}}b.MapType=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsSequenceType(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSequenceType(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}elemType(l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new c.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSequenceType(l){l.startObject(1)}static addElemType(l,o){l.addFieldOffset(0,o,0)}static endSequenceType(l){return l.endObject()}static createSequenceType(l,o){return g.startSequenceType(l),g.addElemType(l,o),g.endSequenceType(l)}}b.SequenceType=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(f.fbs||(f.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(b,g){return this.bb_pos=b,this.bb=g,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(b,g,m,l){return b.prep(4,12),b.writeInt32(l),b.writeInt32(m),b.writeInt32(g),b.offset()}}})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsNodeEdge(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsNodeEdge(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}nodeIndex(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb_pos+l):0}inputEdges(l,o){let u=this.bb.__offset(this.bb_pos,6);return u?(o||new c.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+u)+12*l,this.bb):null}inputEdgesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}outputEdges(l,o){let u=this.bb.__offset(this.bb_pos,8);return u?(o||new c.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+u)+12*l,this.bb):null}outputEdgesLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}static startNodeEdge(l){l.startObject(3)}static addNodeIndex(l,o){l.addFieldInt32(0,o,0)}static addInputEdges(l,o){l.addFieldOffset(1,o,0)}static startInputEdgesVector(l,o){l.startVector(12,o,4)}static addOutputEdges(l,o){l.addFieldOffset(2,o,0)}static startOutputEdgesVector(l,o){l.startVector(12,o,4)}static endNodeEdge(l){return l.endObject()}static createNodeEdge(l,o,u,d){return g.startNodeEdge(l),g.addNodeIndex(l,o),g.addInputEdges(l,u),g.addOutputEdges(l,d),g.endNodeEdge(l)}}b.NodeEdge=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsNode(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsNode(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}name(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}docString(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,l):null}domain(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,l):null}sinceVersion(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readInt32(this.bb_pos+l):0}index(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint32(this.bb_pos+l):0}opType(l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,l):null}type(){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.readInt32(this.bb_pos+l):c.experimental.fbs.NodeType.Primitive}executionProviderType(l){let o=this.bb.__offset(this.bb_pos,18);return o?this.bb.__string(this.bb_pos+o,l):null}inputs(l,o){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}inputsLength(){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__vector_len(this.bb_pos+l):0}outputs(l,o){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}outputsLength(){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__vector_len(this.bb_pos+l):0}attributes(l,o){let u=this.bb.__offset(this.bb_pos,24);return u?(o||new c.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}attributesLength(){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__vector_len(this.bb_pos+l):0}inputArgCounts(l){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+4*l):0}inputArgCountsLength(){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.__vector_len(this.bb_pos+l):0}inputArgCountsArray(){let l=this.bb.__offset(this.bb_pos,26);return l?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}implicitInputs(l,o){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}implicitInputsLength(){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__vector_len(this.bb_pos+l):0}static startNode(l){l.startObject(13)}static addName(l,o){l.addFieldOffset(0,o,0)}static addDocString(l,o){l.addFieldOffset(1,o,0)}static addDomain(l,o){l.addFieldOffset(2,o,0)}static addSinceVersion(l,o){l.addFieldInt32(3,o,0)}static addIndex(l,o){l.addFieldInt32(4,o,0)}static addOpType(l,o){l.addFieldOffset(5,o,0)}static addType(l,o){l.addFieldInt32(6,o,c.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(l,o){l.addFieldOffset(7,o,0)}static addInputs(l,o){l.addFieldOffset(8,o,0)}static createInputsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startInputsVector(l,o){l.startVector(4,o,4)}static addOutputs(l,o){l.addFieldOffset(9,o,0)}static createOutputsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startOutputsVector(l,o){l.startVector(4,o,4)}static addAttributes(l,o){l.addFieldOffset(10,o,0)}static createAttributesVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startAttributesVector(l,o){l.startVector(4,o,4)}static addInputArgCounts(l,o){l.addFieldOffset(11,o,0)}static createInputArgCountsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addInt32(o[u]);return l.endVector()}static startInputArgCountsVector(l,o){l.startVector(4,o,4)}static addImplicitInputs(l,o){l.addFieldOffset(12,o,0)}static createImplicitInputsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startImplicitInputsVector(l,o){l.startVector(4,o,4)}static endNode(l){return l.endObject()}static createNode(l,o,u,d,y,w,_,T,S,E,A,P,k,M){return g.startNode(l),g.addName(l,o),g.addDocString(l,u),g.addDomain(l,d),g.addSinceVersion(l,y),g.addIndex(l,w),g.addOpType(l,_),g.addType(l,T),g.addExecutionProviderType(l,S),g.addInputs(l,E),g.addOutputs(l,A),g.addAttributes(l,P),g.addInputArgCounts(l,k),g.addImplicitInputs(l,M),g.endNode(l)}}b.Node=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsValueInfo(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsValueInfo(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}name(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}docString(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,l):null}type(l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new c.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startValueInfo(l){l.startObject(3)}static addName(l,o){l.addFieldOffset(0,o,0)}static addDocString(l,o){l.addFieldOffset(1,o,0)}static addType(l,o){l.addFieldOffset(2,o,0)}static endValueInfo(l){return l.endObject()}static createValueInfo(l,o,u,d){return g.startValueInfo(l),g.addName(l,o),g.addDocString(l,u),g.addType(l,d),g.endValueInfo(l)}}b.ValueInfo=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsTypeInfo(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTypeInfo(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}denotation(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}valueType(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint8(this.bb_pos+l):c.experimental.fbs.TypeInfoValue.NONE}value(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(l,this.bb_pos+o):null}static startTypeInfo(l){l.startObject(3)}static addDenotation(l,o){l.addFieldOffset(0,o,0)}static addValueType(l,o){l.addFieldInt8(1,o,c.experimental.fbs.TypeInfoValue.NONE)}static addValue(l,o){l.addFieldOffset(2,o,0)}static endTypeInfo(l){return l.endObject()}static createTypeInfo(l,o,u,d){return g.startTypeInfo(l),g.addDenotation(l,o),g.addValueType(l,u),g.addValue(l,d),g.endTypeInfo(l)}}b.TypeInfo=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsOperatorSetId(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsOperatorSetId(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}domain(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}version(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}static startOperatorSetId(l){l.startObject(2)}static addDomain(l,o){l.addFieldOffset(0,o,0)}static addVersion(l,o){l.addFieldInt64(1,o,l.createLong(0,0))}static endOperatorSetId(l){return l.endObject()}static createOperatorSetId(l,o,u){return g.startOperatorSetId(l),g.addDomain(l,o),g.addVersion(l,u),g.endOperatorSetId(l)}}b.OperatorSetId=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsTensor(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTensor(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}name(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}docString(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,l):null}dims(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*l):this.bb.createLong(0,0)}dimsLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}dataType(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readInt32(this.bb_pos+l):c.experimental.fbs.TensorDataType.UNDEFINED}rawData(l){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb.__vector(this.bb_pos+o)+l):0}rawDataLength(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__vector_len(this.bb_pos+l):0}rawDataArray(){let l=this.bb.__offset(this.bb_pos,12);return l?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}stringData(l,o){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}stringDataLength(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__vector_len(this.bb_pos+l):0}static startTensor(l){l.startObject(6)}static addName(l,o){l.addFieldOffset(0,o,0)}static addDocString(l,o){l.addFieldOffset(1,o,0)}static addDims(l,o){l.addFieldOffset(2,o,0)}static createDimsVector(l,o){l.startVector(8,o.length,8);for(let u=o.length-1;u>=0;u--)l.addInt64(o[u]);return l.endVector()}static startDimsVector(l,o){l.startVector(8,o,8)}static addDataType(l,o){l.addFieldInt32(3,o,c.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(l,o){l.addFieldOffset(4,o,0)}static createRawDataVector(l,o){l.startVector(1,o.length,1);for(let u=o.length-1;u>=0;u--)l.addInt8(o[u]);return l.endVector()}static startRawDataVector(l,o){l.startVector(1,o,1)}static addStringData(l,o){l.addFieldOffset(5,o,0)}static createStringDataVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startStringDataVector(l,o){l.startVector(4,o,4)}static endTensor(l){return l.endObject()}static createTensor(l,o,u,d,y,w,_){return g.startTensor(l),g.addName(l,o),g.addDocString(l,u),g.addDims(l,d),g.addDataType(l,y),g.addRawData(l,w),g.addStringData(l,_),g.endTensor(l)}}b.Tensor=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsSparseTensor(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSparseTensor(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}values(l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new c.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indices(l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new c.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}dims(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*l):this.bb.createLong(0,0)}dimsLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}static startSparseTensor(l){l.startObject(3)}static addValues(l,o){l.addFieldOffset(0,o,0)}static addIndices(l,o){l.addFieldOffset(1,o,0)}static addDims(l,o){l.addFieldOffset(2,o,0)}static createDimsVector(l,o){l.startVector(8,o.length,8);for(let u=o.length-1;u>=0;u--)l.addInt64(o[u]);return l.endVector()}static startDimsVector(l,o){l.startVector(8,o,8)}static endSparseTensor(l){return l.endObject()}static createSparseTensor(l,o,u,d){return g.startSparseTensor(l),g.addValues(l,o),g.addIndices(l,u),g.addDims(l,d),g.endSparseTensor(l)}}b.SparseTensor=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsAttribute(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsAttribute(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}name(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}docString(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,l):null}type(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt32(this.bb_pos+l):c.experimental.fbs.AttributeType.UNDEFINED}f(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readFloat32(this.bb_pos+l):0}i(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}s(l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb_pos+o,l):null}t(l){let o=this.bb.__offset(this.bb_pos,16);return o?(l||new c.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}g(l){let o=this.bb.__offset(this.bb_pos,18);return o?(l||new c.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}floats(l){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.readFloat32(this.bb.__vector(this.bb_pos+o)+4*l):0}floatsLength(){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__vector_len(this.bb_pos+l):0}floatsArray(){let l=this.bb.__offset(this.bb_pos,20);return l?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}ints(l){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+8*l):this.bb.createLong(0,0)}intsLength(){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__vector_len(this.bb_pos+l):0}strings(l,o){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}stringsLength(){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__vector_len(this.bb_pos+l):0}tensors(l,o){let u=this.bb.__offset(this.bb_pos,26);return u?(o||new c.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}tensorsLength(){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.__vector_len(this.bb_pos+l):0}graphs(l,o){let u=this.bb.__offset(this.bb_pos,28);return u?(o||new c.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}graphsLength(){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__vector_len(this.bb_pos+l):0}static startAttribute(l){l.startObject(13)}static addName(l,o){l.addFieldOffset(0,o,0)}static addDocString(l,o){l.addFieldOffset(1,o,0)}static addType(l,o){l.addFieldInt32(2,o,c.experimental.fbs.AttributeType.UNDEFINED)}static addF(l,o){l.addFieldFloat32(3,o,0)}static addI(l,o){l.addFieldInt64(4,o,l.createLong(0,0))}static addS(l,o){l.addFieldOffset(5,o,0)}static addT(l,o){l.addFieldOffset(6,o,0)}static addG(l,o){l.addFieldOffset(7,o,0)}static addFloats(l,o){l.addFieldOffset(8,o,0)}static createFloatsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addFloat32(o[u]);return l.endVector()}static startFloatsVector(l,o){l.startVector(4,o,4)}static addInts(l,o){l.addFieldOffset(9,o,0)}static createIntsVector(l,o){l.startVector(8,o.length,8);for(let u=o.length-1;u>=0;u--)l.addInt64(o[u]);return l.endVector()}static startIntsVector(l,o){l.startVector(8,o,8)}static addStrings(l,o){l.addFieldOffset(10,o,0)}static createStringsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startStringsVector(l,o){l.startVector(4,o,4)}static addTensors(l,o){l.addFieldOffset(11,o,0)}static createTensorsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startTensorsVector(l,o){l.startVector(4,o,4)}static addGraphs(l,o){l.addFieldOffset(12,o,0)}static createGraphsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startGraphsVector(l,o){l.startVector(4,o,4)}static endAttribute(l){return l.endObject()}static createAttribute(l,o,u,d,y,w,_,T,S,E,A,P,k,M){return g.startAttribute(l),g.addName(l,o),g.addDocString(l,u),g.addType(l,d),g.addF(l,y),g.addI(l,w),g.addS(l,_),g.addT(l,T),g.addG(l,S),g.addFloats(l,E),g.addInts(l,A),g.addStrings(l,P),g.addTensors(l,k),g.addGraphs(l,M),g.endAttribute(l)}}b.Attribute=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsGraph(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsGraph(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}initializers(l,o){let u=this.bb.__offset(this.bb_pos,4);return u?(o||new c.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}initializersLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}nodeArgs(l,o){let u=this.bb.__offset(this.bb_pos,6);return u?(o||new c.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}nodeArgsLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}nodes(l,o){let u=this.bb.__offset(this.bb_pos,8);return u?(o||new c.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}nodesLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}maxNodeIndex(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readUint32(this.bb_pos+l):0}nodeEdges(l,o){let u=this.bb.__offset(this.bb_pos,12);return u?(o||new c.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}nodeEdgesLength(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__vector_len(this.bb_pos+l):0}inputs(l,o){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}inputsLength(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__vector_len(this.bb_pos+l):0}outputs(l,o){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__string(this.bb.__vector(this.bb_pos+u)+4*l,o):null}outputsLength(){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__vector_len(this.bb_pos+l):0}sparseInitializers(l,o){let u=this.bb.__offset(this.bb_pos,18);return u?(o||new c.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}sparseInitializersLength(){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__vector_len(this.bb_pos+l):0}static startGraph(l){l.startObject(8)}static addInitializers(l,o){l.addFieldOffset(0,o,0)}static createInitializersVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startInitializersVector(l,o){l.startVector(4,o,4)}static addNodeArgs(l,o){l.addFieldOffset(1,o,0)}static createNodeArgsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startNodeArgsVector(l,o){l.startVector(4,o,4)}static addNodes(l,o){l.addFieldOffset(2,o,0)}static createNodesVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startNodesVector(l,o){l.startVector(4,o,4)}static addMaxNodeIndex(l,o){l.addFieldInt32(3,o,0)}static addNodeEdges(l,o){l.addFieldOffset(4,o,0)}static createNodeEdgesVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startNodeEdgesVector(l,o){l.startVector(4,o,4)}static addInputs(l,o){l.addFieldOffset(5,o,0)}static createInputsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startInputsVector(l,o){l.startVector(4,o,4)}static addOutputs(l,o){l.addFieldOffset(6,o,0)}static createOutputsVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startOutputsVector(l,o){l.startVector(4,o,4)}static addSparseInitializers(l,o){l.addFieldOffset(7,o,0)}static createSparseInitializersVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startSparseInitializersVector(l,o){l.startVector(4,o,4)}static endGraph(l){return l.endObject()}static createGraph(l,o,u,d,y,w,_,T,S){return g.startGraph(l),g.addInitializers(l,o),g.addNodeArgs(l,u),g.addNodes(l,d),g.addMaxNodeIndex(l,y),g.addNodeEdges(l,w),g.addInputs(l,_),g.addOutputs(l,T),g.addSparseInitializers(l,S),g.endGraph(l)}}b.Graph=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsModel(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsModel(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}irVersion(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}opsetImport(l,o){let u=this.bb.__offset(this.bb_pos,6);return u?(o||new c.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}opsetImportLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}producerName(l){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__string(this.bb_pos+o,l):null}producerVersion(l){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__string(this.bb_pos+o,l):null}domain(l){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__string(this.bb_pos+o,l):null}modelVersion(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}docString(l){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb_pos+o,l):null}graph(l){let o=this.bb.__offset(this.bb_pos,18);return o?(l||new c.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}graphDocString(l){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb_pos+o,l):null}static startModel(l){l.startObject(9)}static addIrVersion(l,o){l.addFieldInt64(0,o,l.createLong(0,0))}static addOpsetImport(l,o){l.addFieldOffset(1,o,0)}static createOpsetImportVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startOpsetImportVector(l,o){l.startVector(4,o,4)}static addProducerName(l,o){l.addFieldOffset(2,o,0)}static addProducerVersion(l,o){l.addFieldOffset(3,o,0)}static addDomain(l,o){l.addFieldOffset(4,o,0)}static addModelVersion(l,o){l.addFieldInt64(5,o,l.createLong(0,0))}static addDocString(l,o){l.addFieldOffset(6,o,0)}static addGraph(l,o){l.addFieldOffset(7,o,0)}static addGraphDocString(l,o){l.addFieldOffset(8,o,0)}static endModel(l){return l.endObject()}static createModel(l,o,u,d,y,w,_,T,S,E){return g.startModel(l),g.addIrVersion(l,o),g.addOpsetImport(l,u),g.addProducerName(l,d),g.addProducerVersion(l,y),g.addDomain(l,w),g.addModelVersion(l,_),g.addDocString(l,T),g.addGraph(l,S),g.addGraphDocString(l,E),g.endModel(l)}}b.Model=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsKernelCreateInfos(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsKernelCreateInfos(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}nodeIndices(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint32(this.bb.__vector(this.bb_pos+o)+4*l):0}nodeIndicesLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}nodeIndicesArray(){let l=this.bb.__offset(this.bb_pos,4);return l?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}kernelDefHashes(l){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readUint64(this.bb.__vector(this.bb_pos+o)+8*l):this.bb.createLong(0,0)}kernelDefHashesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}static startKernelCreateInfos(l){l.startObject(2)}static addNodeIndices(l,o){l.addFieldOffset(0,o,0)}static createNodeIndicesVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addInt32(o[u]);return l.endVector()}static startNodeIndicesVector(l,o){l.startVector(4,o,4)}static addKernelDefHashes(l,o){l.addFieldOffset(1,o,0)}static createKernelDefHashesVector(l,o){l.startVector(8,o.length,8);for(let u=o.length-1;u>=0;u--)l.addInt64(o[u]);return l.endVector()}static startKernelDefHashesVector(l,o){l.startVector(8,o,8)}static endKernelCreateInfos(l){return l.endObject()}static createKernelCreateInfos(l,o,u){return g.startKernelCreateInfos(l),g.addNodeIndices(l,o),g.addKernelDefHashes(l,u),g.endKernelCreateInfos(l)}}b.KernelCreateInfos=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsSubGraphSessionState(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSubGraphSessionState(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}graphId(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}sessionState(l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new c.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startSubGraphSessionState(l){l.startObject(2)}static addGraphId(l,o){l.addFieldOffset(0,o,0)}static addSessionState(l,o){l.addFieldOffset(1,o,0)}static endSubGraphSessionState(l){let o=l.endObject();return l.requiredField(o,4),o}static createSubGraphSessionState(l,o,u){return g.startSubGraphSessionState(l),g.addGraphId(l,o),g.addSessionState(l,u),g.endSubGraphSessionState(l)}}b.SubGraphSessionState=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsSessionState(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSessionState(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}kernels(l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new c.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}subGraphSessionStates(l,o){let u=this.bb.__offset(this.bb_pos,6);return u?(o||new c.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+4*l),this.bb):null}subGraphSessionStatesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}static startSessionState(l){l.startObject(2)}static addKernels(l,o){l.addFieldOffset(0,o,0)}static addSubGraphSessionStates(l,o){l.addFieldOffset(1,o,0)}static createSubGraphSessionStatesVector(l,o){l.startVector(4,o.length,4);for(let u=o.length-1;u>=0;u--)l.addOffset(o[u]);return l.endVector()}static startSubGraphSessionStatesVector(l,o){l.startVector(4,o,4)}static endSessionState(l){return l.endObject()}static createSessionState(l,o,u){return g.startSessionState(l),g.addKernels(l,o),g.addSubGraphSessionStates(l,u),g.endSessionState(l)}}b.SessionState=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(c){(function(f){(function(b){class g{constructor(){this.bb=null,this.bb_pos=0}__init(l,o){return this.bb_pos=l,this.bb=o,this}static getRootAsInferenceSession(l,o){return(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsInferenceSession(l,o){return l.setPosition(l.position()+n.flatbuffers.SIZE_PREFIX_LENGTH),(o||new g).__init(l.readInt32(l.position())+l.position(),l)}static bufferHasIdentifier(l){return l.__has_identifier("ORTM")}ortVersion(l){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,l):null}model(l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new c.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}sessionState(l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new c.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startInferenceSession(l){l.startObject(3)}static addOrtVersion(l,o){l.addFieldOffset(0,o,0)}static addModel(l,o){l.addFieldOffset(1,o,0)}static addSessionState(l,o){l.addFieldOffset(2,o,0)}static endInferenceSession(l){return l.endObject()}static finishInferenceSessionBuffer(l,o){l.finish(o,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(l,o){l.finish(o,"ORTM",!0)}static createInferenceSession(l,o,u,d){return g.startInferenceSession(l),g.addOrtVersion(l,o),g.addModel(l,u),g.addSessionState(l,d),g.endInferenceSession(l)}}b.InferenceSession=g})(f.fbs||(f.fbs={}))})(c.experimental||(c.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},1723:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const n=t(2235),a=t(9240);e.OnnxjsSessionHandler=class{constructor(s){this.session=s,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(s,c,f){const b=new Map;for(const l in s)if(Object.hasOwnProperty.call(s,l)){const o=s[l];b.set(l,new a.Tensor(o.dims,o.type,void 0,void 0,o.data))}const g=await this.session.run(b),m={};return g.forEach((l,o)=>{m[o]=new n.Tensor(l.type,l.data,l.dims)}),m}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const n=t(7067),a=t(1296),s=t(1975),c=t(6496),f=t(1315),b=t(1745);e.Session=class{constructor(g={}){this._initialized=!1,this.backendHint=g.backendHint,this.profiler=f.Profiler.create(g.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(g,m,l){await this.profiler.event("session","Session.loadModel",async()=>{const o=await(0,s.resolveBackend)(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new b.Model,typeof g=="string"){const u=g.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){const d=await(0,a.promisify)(n.readFile)(g);this.initialize(d,u)}else{const d=await fetch(g),y=await d.arrayBuffer();this.initialize(new Uint8Array(y),u)}}else if(ArrayBuffer.isView(g))this.initialize(g);else{const u=new Uint8Array(g,m||0,l||g.byteLength);this.initialize(u)}})}initialize(g,m){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const l=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(g,l,m),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new c.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(g){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const m=this.normalizeAndValidateInputs(g),l=await this._executionPlan.execute(this.sessionHandler,m);return this.createOutput(l)})}normalizeAndValidateInputs(g){const m=this._model.graph.getInputNames();if(Array.isArray(g)){if(g.length!==m.length)throw new Error(`incorrect input array length: expected ${m.length} but got ${g.length}`)}else{if(g.size!==m.length)throw new Error(`incorrect input map size: expected ${m.length} but got ${g.size}`);const l=new Array(g.size);let o=0;for(let u=0;u<m.length;++u){const d=g.get(m[u]);if(!d)throw new Error(`missing input tensor for: '${name}'`);l[o++]=d}g=l}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,g,!1);else{const l=this._model.graph.getInputIndices(),o=this._model.graph.getValues(),u=new Array(l.length);for(let d=0;d<l.length;++d){const y=o[l[d]];u[d]=y.type.shape.dims,this.context.graphInputTypes.push(y.type.tensorType),this.context.graphInputDims.push(g[d].dims)}this.validateInputTensorDims(u,g,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,g),g}validateInputTensorTypes(g,m){for(let l=0;l<m.length;l++){const o=g[l],u=m[l].type;if(o!==u)throw new Error(`input tensor[${l}] check failed: expected type '${o}' but got ${u}`)}}validateInputTensorDims(g,m,l){for(let o=0;o<m.length;o++){const u=g[o],d=m[o].dims;if(!this.compareTensorDims(u,d,l))throw new Error(`input tensor[${o}] check failed: expected shape '[${u.join(",")}]' but got [${d.join(",")}]`)}}compareTensorDims(g,m,l){if(g.length!==m.length)return!1;for(let o=0;o<g.length;++o)if(g[o]!==m[o]&&(!l||g[o]!==0))return!1;return!0}createOutput(g){const m=this._model.graph.getOutputNames();if(g.length!==m.length)throw new Error("expected number of outputs do not match number of generated outputs");const l=new Map;for(let o=0;o<m.length;++o)l.set(m[o],g[o]);return l}initializeOps(g){const m=g.getNodes();this._ops=new Array(m.length);for(let l=0;l<m.length;l++)this._ops[l]=this.sessionHandler.resolve(m[l],this._model.opsets,g)}}},9240:function(r,e,t){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const a=t(3442),s=n(t(1583)),c=t(5127),f=t(2446),b=t(7273);var g=c.onnxruntime.experimental.fbs;class m{get data(){if(this.cache===void 0){const w=this.dataProvider(this.dataId);if(w.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=w}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(w){return this.data[b.ShapeUtil.indicesToOffset(w,this.strides)]}set(w,_){this.data[b.ShapeUtil.indicesToOffset(w,this.strides)]=_}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=b.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(w,_,T,S,E,A=a.Guid.create()){this.dims=w,this.type=_,this.dataProvider=T,this.asyncDataProvider=S,this.cache=E,this.dataId=A,this.size=b.ShapeUtil.validateDimsAndCalcSize(w);const P=this.size,k=T===void 0&&S===void 0&&E===void 0;if(E!==void 0&&E.length!==P)throw new RangeError("Input dims doesn't match data length.");if(_==="string"){if(!(E===void 0||Array.isArray(E)&&E.every(M=>typeof M=="string")))throw new TypeError("cache should be a string array");k&&(this.cache=new Array(P))}else{if(E!==void 0){const M=o(_);if(!(E instanceof M))throw new TypeError(`cache should be type ${M.name}`)}if(k){const M=new ArrayBuffer(P*function(F){switch(F){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${F}`)}}(_));this.cache=function(F,O){return new(o(O))(F)}(M,_)}}}static fromProto(w){if(!w)throw new Error("cannot construct Value from an empty tensor");const _=b.ProtoUtil.tensorDataTypeFromProto(w.dataType),T=b.ProtoUtil.tensorDimsFromProto(w.dims),S=new m(T,_);if(_==="string")w.stringData.forEach((E,A)=>{S.data[A]=(0,b.decodeUtf8String)(E)});else if(w.rawData&&typeof w.rawData.byteLength=="number"&&w.rawData.byteLength>0){const E=S.data,A=new DataView(w.rawData.buffer,w.rawData.byteOffset,w.rawData.byteLength),P=l(w.dataType),k=w.rawData.byteLength/P;if(w.rawData.byteLength%P!=0)throw new Error("invalid buffer length");if(E.length!==k)throw new Error("buffer length mismatch");for(let M=0;M<k;M++){const F=d(A,w.dataType,M*P);E[M]=F}}else{let E;switch(w.dataType){case f.onnx.TensorProto.DataType.FLOAT:E=w.floatData;break;case f.onnx.TensorProto.DataType.INT32:case f.onnx.TensorProto.DataType.INT16:case f.onnx.TensorProto.DataType.UINT16:case f.onnx.TensorProto.DataType.INT8:case f.onnx.TensorProto.DataType.UINT8:case f.onnx.TensorProto.DataType.BOOL:E=w.int32Data;break;case f.onnx.TensorProto.DataType.INT64:E=w.int64Data;break;case f.onnx.TensorProto.DataType.DOUBLE:E=w.doubleData;break;case f.onnx.TensorProto.DataType.UINT32:case f.onnx.TensorProto.DataType.UINT64:E=w.uint64Data;break;default:throw new Error("unspecific error")}if(E==null)throw new Error("failed to populate data from a tensorproto value");const A=S.data;if(A.length!==E.length)throw new Error("array length mismatch");for(let P=0;P<E.length;P++){const k=E[P];s.default.isLong(k)?A[P]=u(k,w.dataType):A[P]=k}}return S}static fromData(w,_,T){return new m(_,T,void 0,void 0,w)}static fromOrtTensor(w){if(!w)throw new Error("cannot construct Value from an empty tensor");const _=b.ProtoUtil.tensorDimsFromORTFormat(w),T=b.ProtoUtil.tensorDataTypeFromProto(w.dataType()),S=new m(_,T);if(T==="string")for(let E=0;E<w.stringDataLength();E++)S.data[E]=w.stringData(E);else if(w.rawDataArray()&&typeof w.rawDataLength()=="number"&&w.rawDataLength()>0){const E=S.data,A=new DataView(w.rawDataArray().buffer,w.rawDataArray().byteOffset,w.rawDataLength()),P=l(w.dataType()),k=w.rawDataLength()/P;if(w.rawDataLength()%P!=0)throw new Error("invalid buffer length");if(E.length!==k)throw new Error("buffer length mismatch");for(let M=0;M<k;M++){const F=d(A,w.dataType(),M*P);E[M]=F}}return S}}function l(y){switch(y){case f.onnx.TensorProto.DataType.UINT8:case f.onnx.TensorProto.DataType.INT8:case f.onnx.TensorProto.DataType.BOOL:return 1;case f.onnx.TensorProto.DataType.UINT16:case f.onnx.TensorProto.DataType.INT16:return 2;case f.onnx.TensorProto.DataType.FLOAT:case f.onnx.TensorProto.DataType.INT32:case f.onnx.TensorProto.DataType.UINT32:return 4;case f.onnx.TensorProto.DataType.INT64:case f.onnx.TensorProto.DataType.DOUBLE:case f.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${f.onnx.TensorProto.DataType[y]}`)}}function o(y){switch(y){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function u(y,w){if(w===f.onnx.TensorProto.DataType.INT64||w===g.TensorDataType.INT64){if(y.greaterThanOrEqual(2147483648)||y.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(w!==f.onnx.TensorProto.DataType.UINT32&&w!==g.TensorDataType.UINT32&&w!==f.onnx.TensorProto.DataType.UINT64&&w!==g.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${f.onnx.TensorProto.DataType[w]}`);if(y.greaterThanOrEqual(4294967296)||y.lessThan(0))throw new TypeError("uint64 is not supported")}return y.toNumber()}function d(y,w,_){switch(w){case f.onnx.TensorProto.DataType.BOOL:case f.onnx.TensorProto.DataType.UINT8:return y.getUint8(_);case f.onnx.TensorProto.DataType.INT8:return y.getInt8(_);case f.onnx.TensorProto.DataType.UINT16:return y.getUint16(_,!0);case f.onnx.TensorProto.DataType.INT16:return y.getInt16(_,!0);case f.onnx.TensorProto.DataType.FLOAT:return y.getFloat32(_,!0);case f.onnx.TensorProto.DataType.INT32:return y.getInt32(_,!0);case f.onnx.TensorProto.DataType.UINT32:return y.getUint32(_,!0);case f.onnx.TensorProto.DataType.INT64:return u(s.default.fromBits(y.getUint32(_,!0),y.getUint32(_+4,!0),!1),w);case f.onnx.TensorProto.DataType.DOUBLE:return y.getFloat64(_,!0);case f.onnx.TensorProto.DataType.UINT64:return u(s.default.fromBits(y.getUint32(_,!0),y.getUint32(_+4,!0),!0),w);default:throw new Error(`cannot read from DataView for type ${f.onnx.TensorProto.DataType[w]}`)}}e.Tensor=m},7273:function(r,e,t){var n=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const a=t(5686),s=n(t(1583)),c=t(2446),f=t(9240);e.checkInputsShape=function(w,..._){if(!w||w.length!==_.length)return!1;for(let T=0;T<w.length;T++)if(!w[T].dims||w[T].dims.length!==_[T])return!1;return!0},e.assert=function(w,_){if(!w)throw new Error(typeof _=="string"?_:_())},e.ArrayUtil=class{static arraysEqual(w,_){if(w.length!==_.length)return!1;for(let T=0;T<w.length;T++)if(w[T]!==_[T])return!1;return!0}};class b{static preprocessInputShapes(_,T){return[_.length===1?[1,_[0]]:_,T.length===1?[T[0],1]:T]}static postprocessOutputShape(_,T,S){T===1&&_.splice(_.length-2,1),S===1&&_.pop()}static calcMatMulShape(_,T){return _[1]!==T[0]?void 0:[_[0],T[1]]}}e.MatMulUtil=b;class g{static calcShape(_,T,S=!1){const E=_.length,A=T.length;if(E===0)return T;if(A===0)return _;const P=Math.max(_.length,T.length),k=new Array(P);if(S){if(E<2||A<2)return;const M=b.calcMatMulShape([_[E-2],_[E-1]],[T[A-2],T[A-1]]);if(M===void 0)return;[k[P-2],k[P-1]]=M}for(let M=S?3:1;M<=P;M++){const F=E-M<0?1:_[E-M],O=A-M<0?1:T[A-M];if(F!==O&&F>1&&O>1)return;k[P-M]=Math.max(F,O)}return k}static index(_,T){const S=new Array(T.length);return g.fillIndex(_,T,S),S}static fillIndex(_,T,S){const E=_.length-T.length;for(let A=0;A<T.length;A++)S[A]=_[E+A]%T[A]}static calc(_,T,S,E,A){const P=g.calcShape(_.dims,T.dims);if(P){if(E&&!o.areEqual(P,_.dims))return;const k=o.size(P),M=E?_:new f.Tensor(P,A||_.type);if(P.length===0)M.set([],S(_.get([]),T.get([])));else{const F=new Array(P.length),O=new Array(_.dims.length),D=new Array(T.dims.length);let R,C=0,U=0,N=!1,V=!1;_.dims.length===0&&(C=_.get([]),N=!0),T.dims.length===0&&(U=T.get([]),V=!0);for(let j=0;j<k;j++){R=j;for(let K=P.length-1;K>=0;K--)F[K]=R%P[K],R=Math.floor(R/P[K]);N||(g.fillIndex(F,_.dims,O),C=_.get(O)),V||(g.fillIndex(F,T.dims,D),U=T.get(D)),M.set(F,S(C,U))}}return M}}static isValidBroadcast(_,T){const S=_.length,E=T.length;if(S>E)return!1;for(let A=1;A<=S;A++)if(_[S-A]!==1&&_[S-A]!==T[E-A])return!1;return!0}static getBroadcastDims(_,T){const S=_.length,E=[];for(let A=0;A<S;A++){const P=S-1-A,k=_[P]||1;(T[T.length-1-A]||1)>1&&k===1&&E.unshift(P)}return E}}e.BroadcastUtil=g,e.arrayCopyHelper=function(w,_,T,S,E){if(S<0||S>=_.length)throw new Error("sourceIndex out of bounds");if(T<0||T>=w.length)throw new Error("targetIndex out of bounds");if(S+E>_.length)throw new Error("source indices to be copied are outside bounds");if(T+E>w.length)throw new Error("target array is too small to hold result");for(let A=0;A<E;A++)w[T+A]=_[S+A]},e.GemmUtil=class{static getShapeOfGemmResult(w,_,T,S,E){if(w.length!==2||T.length!==2)throw new Error("shape need to be of size 2");let A,P,k;_?(A=w[1],P=w[0]):(A=w[0],P=w[1]);let M=-1;if(S?(k=T[0],M=1):(k=T[1],M=0),T[M]!==P)throw new Error("dimension mismatch");if(A<=0||k<=0||P<=0)throw new Error("invalid shape specified");if(E&&!g.isValidBroadcast(E,[A,k]))throw new Error("gemm: invalid bias shape for broadcast");return[A,k,P]}};class m{static tensorDataTypeFromProto(_){switch(_){case c.onnx.TensorProto.DataType.INT8:return"int8";case c.onnx.TensorProto.DataType.UINT8:return"uint8";case c.onnx.TensorProto.DataType.BOOL:return"bool";case c.onnx.TensorProto.DataType.INT16:return"int16";case c.onnx.TensorProto.DataType.UINT16:return"uint16";case c.onnx.TensorProto.DataType.INT32:return"int32";case c.onnx.TensorProto.DataType.UINT32:return"uint32";case c.onnx.TensorProto.DataType.FLOAT:return"float32";case c.onnx.TensorProto.DataType.DOUBLE:return"float64";case c.onnx.TensorProto.DataType.STRING:return"string";case c.onnx.TensorProto.DataType.INT64:return"int32";case c.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${c.onnx.TensorProto.DataType[_]}`)}}static tensorDataTypeStringToEnum(_){switch(_){case"int8":return c.onnx.TensorProto.DataType.INT8;case"uint8":return c.onnx.TensorProto.DataType.UINT8;case"bool":return c.onnx.TensorProto.DataType.BOOL;case"int16":return c.onnx.TensorProto.DataType.INT16;case"uint16":return c.onnx.TensorProto.DataType.UINT16;case"int32":return c.onnx.TensorProto.DataType.INT32;case"uint32":return c.onnx.TensorProto.DataType.UINT32;case"float32":return c.onnx.TensorProto.DataType.FLOAT;case"float64":return c.onnx.TensorProto.DataType.DOUBLE;case"string":return c.onnx.TensorProto.DataType.STRING;case"int64":return c.onnx.TensorProto.DataType.INT64;case"uint64":return c.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${_}`)}}static tensorDimsFromProto(_){return _.map(T=>s.default.isLong(T)?T.toNumber():T)}static tensorValueTypeFromProto(_){return{tensorType:m.tensorDataTypeFromProto(_.elemType),shape:{dims:m.tensorDimsFromProto(_.shape.dim.map(T=>T.dimValue))}}}static tensorDimsFromORTFormat(_){const T=[];for(let S=0;S<_.dimsLength();S++)T.push(l.longToNumber(_.dims(S)));return T}static tensorAttributesFromORTFormat(_){const T=[];for(let S=0;S<_.attributesLength();S++)T.push(_.attributes(S));return T}}e.ProtoUtil=m;class l{static longToNumber(_,T){return s.default.isLong(_)?_.toNumber():_ instanceof a.flatbuffers.Long?s.default.fromValue({low:_.low,high:_.high,unsigned:T!=null&&T}).toNumber():_}static isLong(_){return s.default.isLong(_)||_ instanceof a.flatbuffers.Long}}e.LongUtil=l;class o{static size(_){return o.getSizeFromDimensionRange(_,0,_.length)}static sizeFromDimension(_,T){if(T<0||T>_.length)throw new Error(`invalid dimension of ${T} for sizeFromDimension as Tensor has ${_.length} dimensions.`);return o.getSizeFromDimensionRange(_,T,_.length)}static sizeToDimension(_,T){if(T<0||T>_.length)throw new Error(`invalid dimension of ${T} for sizeToDimension as Tensor has ${_.length} dimensions.`);return o.getSizeFromDimensionRange(_,0,T)}static getSizeFromDimensionRange(_,T,S){let E=1;for(let A=T;A<S;A++){if(_[A]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");E*=_[A]}return E}static computeStrides(_){const T=_.length;if(T===0)return[];if(T===1)return[1];const S=new Array(T);S[T-1]=1,S[T-2]=_[T-1];for(let E=T-3;E>=0;--E)S[E]=S[E+1]*_[E+1];return S}static transpose(_){return _.slice().reverse()}static indicesToOffset(_,T,S){S===void 0&&(S=_.length);let E=0;for(let A=0;A<S;++A)E+=T[A]*_[A];return E}static offsetToIndices(_,T){const S=T.length;if(S===0)return[];if(S===1)return[_*T[0]];const E=new Array(T.length);for(let A=0;A<E.length-1;++A)E[A]=Math.floor(_/T[A]),_-=E[A]*T[A];return E[E.length-1]=_,E}static normalizeAxis(_,T){if(_<-T&&_>=T)throw new Error("unsupported axis for this operation.");return _<0?_+T:_}static normalizeAxes(_,T){return _.map(S=>this.normalizeAxis(S,T))}static incrementIndex(_,T,S){if(T.length===0||_.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(S===void 0)S=T.length;else if(S<=0||S>T.length)throw new Error("Incorrect axis to increment on");for(let E=S-1;E>=0&&(_[E]++,!(_[E]<T[E]));--E)_[E]=0}static calculateReshapedDims(_,T){if(T.length===0){if(_.length===0||o.size(_)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const S=T.length,E=new Array(S);let A=-1,P=1;for(let M=0;M<S;M++){if(T[M]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(T[M]===-1){if(A!==-1)throw new Error("at most one dimension in shape hints can be -1");A=M}else{if(T[M]===0){if(M>=_.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");E[M]=_[M]}else E[M]=T[M];P*=E[M]}}const k=o.size(_);if(A!==-1){if(k%P!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${_}] Output shape: [${T}]`);E[A]=k/P}else if(P!==k)throw new Error("reshapedDims and originalDims don't have matching sizes");return E}static sortBasedOnPerm(_,T){return T?T.map(S=>_[S]):_.slice().reverse()}static padShape(_,T){const S=_.length;return _.map((E,A)=>E+T[A]+T[A+S])}static areEqual(_,T){return _.length===T.length&&_.every((S,E)=>S===T[E])}static validateDimsAndCalcSize(_){if(_.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let T=1;for(const S of _){if(!Number.isInteger(S))throw new TypeError(`Invalid shape: ${S} is not an integer`);if(S<0||S>2147483647)throw new TypeError(`Invalid shape: length ${S} is not allowed`);T*=S}return T}static flattenShape(_,T){T<0&&(T+=_.length);const S=_.reduce((A,P)=>A*P,1),E=_.slice(T).reduce((A,P)=>A*P,1);return[S/E,E]}static squeezeShape(_,T){const S=new Array;T=o.normalizeAxes(T,_.length);for(let E=0;E<_.length;E++){const A=T.indexOf(E)>=0;if(A&&_[E]!==1)throw new Error("squeeze an axis of size different than 1");(T.length===0&&_[E]>1||T.length>0&&!A)&&S.push(_[E])}return S}static unsqueezeShape(_,T){const S=new Array(_.length+T.length);S.fill(0);for(let A=0;A<T.length;A++){const P=o.normalizeAxis(T[A],S.length);if(P>=S.length)throw new Error("'axes' has an out of range axis");if(S[P]!==0)throw new Error("'axes' has a duplicate axis");S[P]=1}let E=0;for(let A=0;A<S.length;A++)S[A]===0&&(S[A]=_[E++]);if(E!==_.length)throw new Error("the unsqueezed dimension could not be established");return S}}e.ShapeUtil=o,e.MathUtil=class{static sqr(w,_,T,S,E){if(S<0||S>=_.length)throw new Error("sourceIndex out of bounds");if(T<0||T>=w.length)throw new Error("targetIndex out of bounds");if(S+E>_.length)throw new Error("source indices to be copied are outside bounds");if(T+E>w.length)throw new Error("target array is too small to hold result");for(let A=0;A<E;A++)w[T+A]+=Math.pow(_[S+A],2)}static axpy(w,_,T,S,E,A){if(S<0||S>=_.length)throw new Error("sourceIndex out of bounds");if(T<0||T>=w.length)throw new Error("targetIndex out of bounds");if(S+E>_.length)throw new Error("source indices to be copied are outside bounds");if(T+E>w.length)throw new Error("target array is too small to hold result");for(let P=0;P<E;P++)w[T+P]+=A*_[S+P]}static powx(w,_,T,S,E,A){if(S<0||S>=_.length)throw new Error("sourceIndex out of bounds");if(T<0||T>=w.length)throw new Error("targetIndex out of bounds");if(S+E>_.length)throw new Error("source indices to be copied are outside bounds");if(T+E>w.length)throw new Error("target array is too small to hold result");for(let P=0;P<E;P++)w[T+P]=Math.pow(_[S+P],A)}static mul(w,_,T,S,E){if(S<0||S>=_.length)throw new Error("sourceIndex out of bounds");if(T<0||T>=w.length)throw new Error("targetIndex out of bounds");if(S+E>_.length)throw new Error("source indices to be copied are outside bounds");if(T+E>w.length)throw new Error("target array is too small to hold result");for(let A=0;A<E;A++)w[T+A]=_[S+A]*w[T+A]}};class u{static splitShape(_,T,S,E){if(S.length===0){if(!E)throw new Error("need to know number of outputs when the 'split' attribute is not specified");u.determineSplit(_[T],E,S)}const A=[],P=[0];for(let k=0;k<S.length;++k){k!==0&&P.push(P[k-1]+S[k-1]);const M=_.slice();M[T]=S[k],A.push(M)}return[A,P]}static determineSplit(_,T,S){if(_%T!=0)throw new Error("cannot split tensor to equal sized parts");for(let E=0;E<T;++E)S.push(_/T)}}e.SplitUtil=u;class d{static calcReduce(_,T,S,E,A){const P=_.dims.slice(0);T.length===0&&P.forEach((C,U)=>T.push(U));const k=d.calcReduceShape(P,T,!0),M=o.size(k),F=new f.Tensor(k,_.type),O=o.computeStrides(k),D=o.computeStrides(P),R=new Array(P.length);for(let C=0;C<M;C++){const U=o.offsetToIndices(C,O);g.fillIndex(U,P,R),F.set(U,d.calcReduceByAxis(_.numberData,T,P,0,o.indicesToOffset(R,D),E,A))}return S?F:new f.Tensor(d.calcReduceShape(P,T,S),F.type,void 0,void 0,F.data,F.dataId)}static calcReduceByAxis(_,T,S,E,A,P,k){let M=0;if(E>=T.length)return P(_[A]);const F=T[E],O=F>=S.length?1:o.size(S.slice(F+1));for(let D=0;D<S[F];D++)M=D===0?d.calcReduceByAxis(_,T,S,E+1,A,P,k):k(M,d.calcReduceByAxis(_,T,S,E+1,A,P,k)),A+=O;return M}static calcReduceShape(_,T,S){const E=_.slice();for(let A=0;A<T.length;A++)E[T[A]]=S?1:0;return E.filter(A=>A!==0)}}e.ReduceUtil=d;class y{static adjustPoolAttributes(_,T,S,E,A,P){if(!_&&S.length!==T.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(_)for(let k=0;k<T.length-2;k++)k>=S.length?S.push(T[k+2]):S[k]=T[k+2];for(let k=0;k<S.length;k++)if(k<E.length){if(E[k]<0)throw new Error("strides should be greater than or equal to 1")}else E.push(1);for(let k=0;k<S.length;k++)if(k<A.length){if(A[k]<0)throw new Error("dilations should be greater than or equal to 1")}else A.push(1);for(let k=0;k<2*S.length;k++)if(k<P.length){if(P[k]<0)throw new Error("pad should be greater than or equal to 1")}else P.push(0);for(let k=0;k<S.length;k++){if(S[k]<=0)throw new Error("kernel shapes need to be greater than 0");if(P[k]>=S[k]||P[k+S.length]>=S[k])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(_,T,S,E,A,P){if(P){if(A.length!==2*(_.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(T.length!==_.length-2)throw new Error("length of strides should be the length of data dimensions");if(E.length!==_.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let k=0;k<_.length-2;k++)y.adjustPadAndReturnShape(_[k+2],T[k],S[k],E[k],A,k,k+_.length-2,P)}}static computePoolOutputShape(_,T,S,E,A,P,k){if(T.length<=0)throw new Error("input shape must be of size greater than 0");const M=[T[0],T[1]];return y.computeShapeHelper(_,T,M,S,E,A,P,k),M}static computeConvOutputShape(_,T,S,E,A,P,k){if(_.length<=0||T.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const M=[_[0],T[0]];return y.computeShapeHelper(!1,_,M,S,E,A,P,k),M}static computeShapeHelper(_,T,S,E,A,P,k,M){if(_)for(let F=0;F<T.length-2;F++)S.push(1);else for(let F=0;F<T.length-2;F++)S.push(y.adjustPadAndReturnShape(T[F+2],E[F],A[F],P[F],k,F,F+T.length-2,M))}static adjustPadAndReturnShape(_,T,S,E,A,P,k,M){const F=S*(E-1)+1;if(!M||M==="NOTSET")return Math.floor((_+A[P]+A[k]-F)/T+1);switch(M){case"VALID":return A[P]=0,A[k]=0,Math.floor((_-F)/T+1);case"SAME_LOWER":case"SAME_UPPER":if(S!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const O=((_+T-1)/T-1)*T+E-_;return A[P]=Math.floor(M==="SAME_LOWER"?(O+1)/2:O/2),A[k]=O-A[P],Math.floor((_+O-E)/T+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=y,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(w){return new TextDecoder().decode(w)}},8408:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.16.3"},9544:function(r,e,t){var n,a=this&&this.__createBinding||(Object.create?function(O,D,R,C){C===void 0&&(C=R);var U=Object.getOwnPropertyDescriptor(D,R);U&&!("get"in U?!D.__esModule:U.writable||U.configurable)||(U={enumerable:!0,get:function(){return D[R]}}),Object.defineProperty(O,C,U)}:function(O,D,R,C){C===void 0&&(C=R),O[C]=D[R]}),s=this&&this.__setModuleDefault||(Object.create?function(O,D){Object.defineProperty(O,"default",{enumerable:!0,value:D})}:function(O,D){O.default=D}),c=this&&this.__importStar||function(O){if(O&&O.__esModule)return O;var D={};if(O!=null)for(var R in O)R!=="default"&&Object.prototype.hasOwnProperty.call(O,R)&&a(D,O,R);return s(D,O),D};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initializeRuntime=e.initializeWebAssemblyInstance=void 0;const f=t(2235),b=c(t(1259)),g=t(263),m=()=>!!f.env.wasm.proxy&&typeof document<"u";let l,o,u,d=!1,y=!1,w=!1;const _=[],T=[],S=[],E=[],A=[],P=[],k=()=>{if(d||!y||w||!l)throw new Error("worker not ready")},M=O=>{switch(O.data.type){case"init-wasm":d=!1,O.data.err?(w=!0,o[1](O.data.err)):(y=!0,o[0]());break;case"init-ort":O.data.err?u[1](O.data.err):u[0]();break;case"create_allocate":O.data.err?_.shift()[1](O.data.err):_.shift()[0](O.data.out);break;case"create_finalize":O.data.err?T.shift()[1](O.data.err):T.shift()[0](O.data.out);break;case"create":O.data.err?S.shift()[1](O.data.err):S.shift()[0](O.data.out);break;case"release":O.data.err?E.shift()[1](O.data.err):E.shift()[0]();break;case"run":O.data.err?A.shift()[1](O.data.err):A.shift()[0](O.data.out);break;case"end-profiling":O.data.err?P.shift()[1](O.data.err):P.shift()[0]()}},F=typeof document<"u"?(n=document==null?void 0:document.currentScript)===null||n===void 0?void 0:n.src:void 0;e.initializeWebAssemblyInstance=async()=>{if(m()){if(y)return;if(d)throw new Error("multiple calls to 'initWasm()' detected.");if(w)throw new Error("previous call to 'initWasm()' failed.");return d=!0,f.env.wasm.wasmPaths===void 0&&F&&F.indexOf("blob:")!==0&&(f.env.wasm.wasmPaths=F.substr(0,+F.lastIndexOf("/")+1)),new Promise((O,D)=>{l==null||l.terminate(),l=t(8050).Z(),l.onmessage=M,o=[O,D];const R={type:"init-wasm",in:f.env.wasm};l.postMessage(R)})}return(0,g.initializeWebAssembly)(f.env.wasm)},e.initializeRuntime=async O=>{if(m())return k(),new Promise((D,R)=>{u=[D,R];const C={type:"init-ort",in:O};l.postMessage(C)});await b.initRuntime(O)},e.createSessionAllocate=async O=>m()?(k(),new Promise((D,R)=>{_.push([D,R]);const C={type:"create_allocate",in:{model:O}};l.postMessage(C,[O.buffer])})):b.createSessionAllocate(O),e.createSessionFinalize=async(O,D)=>m()?(k(),new Promise((R,C)=>{T.push([R,C]);const U={type:"create_finalize",in:{modeldata:O,options:D}};l.postMessage(U)})):b.createSessionFinalize(O,D),e.createSession=async(O,D)=>m()?(k(),new Promise((R,C)=>{S.push([R,C]);const U={type:"create",in:{model:O,options:D}};l.postMessage(U,[O.buffer])})):b.createSession(O,D),e.releaseSession=async O=>{if(m())return k(),new Promise((D,R)=>{E.push([D,R]);const C={type:"release",in:O};l.postMessage(C)});b.releaseSession(O)},e.run=async(O,D,R,C,U)=>m()?(k(),new Promise((N,V)=>{A.push([N,V]);const j={type:"run",in:{sessionId:O,inputIndices:D,inputs:R,outputIndices:C,options:U}};l.postMessage(j,b.extractTransferableBuffers(R))})):b.run(O,D,R,C,U),e.endProfiling=async O=>{if(m())return k(),new Promise((D,R)=>{P.push([D,R]);const C={type:"end-profiling",in:O};l.postMessage(C)});b.endProfiling(O)}},7918:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const n=t(263),a=t(1497);e.setRunOptions=s=>{const c=(0,n.getInstance)();let f=0;const b=[],g=s||{};try{if((s==null?void 0:s.logSeverityLevel)===void 0)g.logSeverityLevel=2;else if(typeof s.logSeverityLevel!="number"||!Number.isInteger(s.logSeverityLevel)||s.logSeverityLevel<0||s.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${s.logSeverityLevel}`);if((s==null?void 0:s.logVerbosityLevel)===void 0)g.logVerbosityLevel=0;else if(typeof s.logVerbosityLevel!="number"||!Number.isInteger(s.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${s.logVerbosityLevel}`);(s==null?void 0:s.terminate)===void 0&&(g.terminate=!1);let m=0;return(s==null?void 0:s.tag)!==void 0&&(m=(0,a.allocWasmString)(s.tag,b)),f=c._OrtCreateRunOptions(g.logSeverityLevel,g.logVerbosityLevel,!!g.terminate,m),f===0&&(0,a.checkLastError)("Can't create run options."),(s==null?void 0:s.extra)!==void 0&&(0,a.iterateExtraOptions)(s.extra,"",new WeakSet,(l,o)=>{const u=(0,a.allocWasmString)(l,b),d=(0,a.allocWasmString)(o,b);c._OrtAddRunConfigEntry(f,u,d)!==0&&(0,a.checkLastError)(`Can't set a run config entry: ${l} - ${o}.`)}),[f,b]}catch(m){throw f!==0&&c._OrtReleaseRunOptions(f),b.forEach(l=>c._free(l)),m}}},6640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const n=t(2806),a=t(2235),s=t(2850),c=t(9544);let f;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(b){const g=await fetch(b);if(g.status!==200)throw new Error(`failed to load model: ${b}`);const m=await g.arrayBuffer();return(0,c.createSessionAllocate)(new Uint8Array(m))}async loadModel(b,g){if(f||(await(0,c.initializeRuntime)(a.env),f=!0),typeof b=="string")if(typeof process<"u"&&process.versions&&process.versions.node){const m=await(0,s.promisify)(n.readFile)(b);[this.sessionId,this.inputNames,this.outputNames]=await(0,c.createSession)(m,g)}else{const m=await this.createSessionAllocate(b);[this.sessionId,this.inputNames,this.outputNames]=await(0,c.createSessionFinalize)(m,g)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,c.createSession)(b,g)}async dispose(){return(0,c.releaseSession)(this.sessionId)}async run(b,g,m){const l=[],o=[];Object.entries(b).forEach(w=>{const _=w[0],T=w[1],S=this.inputNames.indexOf(_);if(S===-1)throw new Error(`invalid input '${_}'`);l.push(T),o.push(S)});const u=[];Object.entries(g).forEach(w=>{const _=w[0],T=this.outputNames.indexOf(_);if(T===-1)throw new Error(`invalid output '${_}'`);u.push(T)});const d=await(0,c.run)(this.sessionId,o,l.map(w=>[w.type,w.dims,w.data]),u,m),y={};for(let w=0;w<d.length;w++)y[this.outputNames[u[w]]]=new a.Tensor(d[w][0],d[w][2],d[w][1]);return y}startProfiling(){}endProfiling(){(0,c.endProfiling)(this.sessionId)}}},7622:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const n=t(263),a=t(1497);e.setSessionOptions=s=>{var c,f,b,g;const m=(0,n.getInstance)();let l=0;const o=[],u=s||{};(d=>{d.extra||(d.extra={}),d.extra.session||(d.extra.session={});const y=d.extra.session;y.use_ort_model_bytes_directly||(y.use_ort_model_bytes_directly="1"),d.executionProviders&&d.executionProviders.some(w=>(typeof w=="string"?w:w.name)==="webgpu")&&(d.enableMemPattern=!1)})(u);try{const d=(E=>{switch(E){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${E}`)}})((c=u.graphOptimizationLevel)!==null&&c!==void 0?c:"all"),y=(E=>{switch(E){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${E}`)}})((f=u.executionMode)!==null&&f!==void 0?f:"sequential"),w=typeof u.logId=="string"?(0,a.allocWasmString)(u.logId,o):0,_=(b=u.logSeverityLevel)!==null&&b!==void 0?b:2;if(!Number.isInteger(_)||_<0||_>4)throw new Error(`log serverity level is not valid: ${_}`);const T=(g=u.logVerbosityLevel)!==null&&g!==void 0?g:0;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log verbosity level is not valid: ${T}`);const S=typeof u.optimizedModelFilePath=="string"?(0,a.allocWasmString)(u.optimizedModelFilePath,o):0;return l=m._OrtCreateSessionOptions(d,!!u.enableCpuMemArena,!!u.enableMemPattern,y,!!u.enableProfiling,0,w,_,T,S),l===0&&(0,a.checkLastError)("Can't create session options."),u.executionProviders&&((E,A,P)=>{for(const k of A){let M=typeof k=="string"?k:k.name;switch(M){case"xnnpack":M="XNNPACK";break;case"webnn":if(M="WEBNN",typeof k!="string"){const O=k;if(O!=null&&O.deviceType){const D=(0,a.allocWasmString)("deviceType",P),R=(0,a.allocWasmString)(O.deviceType,P);(0,n.getInstance)()._OrtAddSessionConfigEntry(E,D,R)!==0&&(0,a.checkLastError)(`Can't set a session config entry: 'deviceType' - ${O.deviceType}.`)}if(O!=null&&O.powerPreference){const D=(0,a.allocWasmString)("powerPreference",P),R=(0,a.allocWasmString)(O.powerPreference,P);(0,n.getInstance)()._OrtAddSessionConfigEntry(E,D,R)!==0&&(0,a.checkLastError)(`Can't set a session config entry: 'powerPreference' - ${O.powerPreference}.`)}}break;case"webgpu":M="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${M}`)}const F=(0,a.allocWasmString)(M,P);(0,n.getInstance)()._OrtAppendExecutionProvider(E,F)!==0&&(0,a.checkLastError)(`Can't append execution provider: ${M}.`)}})(l,u.executionProviders,o),u.extra!==void 0&&(0,a.iterateExtraOptions)(u.extra,"",new WeakSet,(E,A)=>{const P=(0,a.allocWasmString)(E,o),k=(0,a.allocWasmString)(A,o);m._OrtAddSessionConfigEntry(l,P,k)!==0&&(0,a.checkLastError)(`Can't set a session config entry: ${E} - ${A}.`)}),[l,o]}catch(d){throw l!==0&&m._OrtReleaseSessionOptions(l),o.forEach(y=>m._free(y)),d}}},7917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.logLevelStringToEnum=e.tensorTypeToTypedArrayConstructor=e.getTensorElementSize=e.tensorDataTypeEnumToString=e.tensorDataTypeStringToEnum=void 0,e.tensorDataTypeStringToEnum=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},e.tensorDataTypeEnumToString=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},e.getTensorElementSize=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],e.tensorTypeToTypedArrayConstructor=t=>{switch(t){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},e.logLevelStringToEnum=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}}},1259:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initRuntime=void 0;const n=t(7918),a=t(7622),s=t(7917),c=t(263),f=t(1497);e.initRuntime=async g=>{var m,l;m=g.wasm.numThreads,l=(0,s.logLevelStringToEnum)(g.logLevel),(0,c.getInstance)()._OrtInit(m,l)!==0&&(0,f.checkLastError)("Can't initialize onnxruntime.")};const b=new Map;e.createSessionAllocate=g=>{const m=(0,c.getInstance)(),l=m._malloc(g.byteLength);if(l===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${g.byteLength}.`);return m.HEAPU8.set(g,l),[l,g.byteLength]},e.createSessionFinalize=(g,m)=>{const l=(0,c.getInstance)();let o=0,u=0,d=[];const y=[],w=[];try{[u,d]=(0,a.setSessionOptions)(m),o=l._OrtCreateSession(g[0],g[1],u),o===0&&(0,f.checkLastError)("Can't create a session.");const[_,T]=(A=>{const P=(0,c.getInstance)(),k=P.stackSave();try{const M=P.stackAlloc(8);return P._OrtGetInputOutputCount(A,M,M+4)!==0&&(0,f.checkLastError)("Can't get session input/output count."),[P.HEAP32[M/4],P.HEAP32[M/4+1]]}finally{P.stackRestore(k)}})(o),S=[],E=[];for(let A=0;A<_;A++){const P=l._OrtGetInputName(o,A);P===0&&(0,f.checkLastError)("Can't get an input name."),y.push(P),S.push(l.UTF8ToString(P))}for(let A=0;A<T;A++){const P=l._OrtGetOutputName(o,A);P===0&&(0,f.checkLastError)("Can't get an output name."),w.push(P),E.push(l.UTF8ToString(P))}return b.set(o,[o,y,w]),[o,S,E]}catch(_){throw y.forEach(T=>l._OrtFree(T)),w.forEach(T=>l._OrtFree(T)),o!==0&&l._OrtReleaseSession(o),_}finally{l._free(g[0]),u!==0&&l._OrtReleaseSessionOptions(u),d.forEach(_=>l._free(_))}},e.createSession=(g,m)=>{const l=(0,e.createSessionAllocate)(g);return(0,e.createSessionFinalize)(l,m)},e.releaseSession=g=>{const m=(0,c.getInstance)(),l=b.get(g);if(!l)throw new Error(`cannot release session. invalid session id: ${g}`);const[o,u,d]=l;u.forEach(y=>m._OrtFree(y)),d.forEach(y=>m._OrtFree(y)),m._OrtReleaseSession(o),b.delete(g)},e.run=async(g,m,l,o,u)=>{const d=(0,c.getInstance)(),y=b.get(g);if(!y)throw new Error(`cannot run inference. invalid session id: ${g}`);const[w,_,T]=y,S=m.length,E=o.length;let A=0,P=[];const k=[],M=[];try{[A,P]=(0,n.setRunOptions)(u);for(let U=0;U<S;U++){const N=l[U][0],V=l[U][1],j=l[U][2];let K,ee;if(Array.isArray(j)){ee=4*j.length,K=d._malloc(ee),M.push(K);let Se=K/4;for(let we=0;we<j.length;we++){if(typeof j[we]!="string")throw new TypeError(`tensor data at index ${we} is not a string`);d.HEAPU32[Se++]=(0,f.allocWasmString)(j[we],M)}}else ee=j.byteLength,K=d._malloc(ee),M.push(K),d.HEAPU8.set(new Uint8Array(j.buffer,j.byteOffset,ee),K);const he=d.stackSave(),ge=d.stackAlloc(4*V.length);try{let Se=ge/4;V.forEach(ne=>d.HEAP32[Se++]=ne);const we=d._OrtCreateTensor((0,s.tensorDataTypeStringToEnum)(N),K,ee,ge,V.length);we===0&&(0,f.checkLastError)(`Can't create tensor for input[${U}].`),k.push(we)}finally{d.stackRestore(he)}}const F=d.stackSave(),O=d.stackAlloc(4*S),D=d.stackAlloc(4*S),R=d.stackAlloc(4*E),C=d.stackAlloc(4*E);try{let U=O/4,N=D/4,V=R/4,j=C/4;for(let ge=0;ge<S;ge++)d.HEAPU32[U++]=k[ge],d.HEAPU32[N++]=_[m[ge]];for(let ge=0;ge<E;ge++)d.HEAPU32[V++]=0,d.HEAPU32[j++]=T[o[ge]];let K=d._OrtRun(w,D,O,S,C,E,R,A);const ee=d.jsepRunPromise;ee&&ee.then!==void 0&&(K=await ee);const he=[];K!==0&&(0,f.checkLastError)("failed to call OrtRun().");for(let ge=0;ge<E;ge++){const Se=d.HEAPU32[R/4+ge],we=d.stackSave(),ne=d.stackAlloc(16);let re,oe=0;try{K=d._OrtGetTensorData(Se,ne,ne+4,ne+8,ne+12),K!==0&&(0,f.checkLastError)(`Can't access output tensor data on index ${ge}.`);let Ee=ne/4;const Re=d.HEAPU32[Ee++];oe=d.HEAPU32[Ee++];const De=d.HEAPU32[Ee++],He=d.HEAPU32[Ee++],qe=[];for(let X=0;X<He;X++)qe.push(d.HEAPU32[De/4+X]);d._OrtFree(De);const W=qe.length===0?1:qe.reduce((X,te)=>X*te);if(re=(0,s.tensorDataTypeEnumToString)(Re),re==="string"){const X=[];let te=oe/4;for(let ie=0;ie<W;ie++){const ye=d.HEAPU32[te++],be=ie===W-1?void 0:d.HEAPU32[te]-ye;X.push(d.UTF8ToString(ye,be))}he.push([re,qe,X])}else{const X=new((0,s.tensorTypeToTypedArrayConstructor)(re))(W);new Uint8Array(X.buffer,X.byteOffset,X.byteLength).set(d.HEAPU8.subarray(oe,oe+X.byteLength)),he.push([re,qe,X])}}finally{d.stackRestore(we),re==="string"&&oe&&d._free(oe),d._OrtReleaseTensor(Se)}}return he}finally{d.stackRestore(F)}}finally{k.forEach(F=>d._OrtReleaseTensor(F)),M.forEach(F=>d._free(F)),A!==0&&d._OrtReleaseRunOptions(A),P.forEach(F=>d._free(F))}},e.endProfiling=g=>{const m=(0,c.getInstance)(),l=b.get(g);if(!l)throw new Error("invalid session id");const o=l[0],u=m._OrtEndProfiling(o);u===0&&(0,f.checkLastError)("Can't get an profile file name."),m._OrtFree(u)},e.extractTransferableBuffers=g=>{const m=[];for(const l of g){const o=l[2];!Array.isArray(o)&&o.buffer&&m.push(o.buffer)}return m}},263:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(u,d,y,w){w===void 0&&(w=y);var _=Object.getOwnPropertyDescriptor(d,y);_&&!("get"in _?!d.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return d[y]}}),Object.defineProperty(u,w,_)}:function(u,d,y,w){w===void 0&&(w=y),u[w]=d[y]}),a=this&&this.__setModuleDefault||(Object.create?function(u,d){Object.defineProperty(u,"default",{enumerable:!0,value:d})}:function(u,d){u.default=d}),s=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var y in u)y!=="default"&&Object.prototype.hasOwnProperty.call(u,y)&&n(d,u,y);return a(d,u),d};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const c=s(t(6449)),f=t(932),b=t(3474);let g,m=!1,l=!1,o=!1;e.initializeWebAssembly=async u=>{if(m)return Promise.resolve();if(l)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(o)throw new Error("previous call to 'initializeWebAssembly()' failed.");l=!0;const d=u.initTimeout,y=u.numThreads,w=u.simd,_=y>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),T=w&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),S=u.wasmPaths,E=typeof S=="string"?S:void 0,A=((F,O)=>O?F?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":F?"ort-wasm-simd.wasm":"ort-wasm.wasm")(T,_),P=typeof S=="object"?S[A]:void 0;let k=!1;const M=[];if(d>0&&M.push(new Promise(F=>{setTimeout(()=>{k=!0,F()},d)})),M.push(new Promise((F,O)=>{const D=_?b:f,R={locateFile:(C,U)=>_&&C.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([t(4154)],{type:"text/javascript"})):C.endsWith(".wasm")?P||(E??U)+A:U+C};if(_)if(typeof Blob>"u")R.mainScriptUrlOrBlob=c.join(__dirname,"ort-wasm-threaded.js");else{const C=`var ortWasmThreaded=(function(){var _scriptDir;return ${D.toString()}})();`;R.mainScriptUrlOrBlob=new Blob([C],{type:"text/javascript"})}D(R).then(C=>{l=!1,m=!0,g=C,F()},C=>{l=!1,o=!0,O(C)})})),await Promise.race(M),k)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},e.getInstance=()=>{if(m&&g)return g;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var u;!m||l||o||(l=!0,(u=g.PThread)===null||u===void 0||u.terminateAllThreads(),g=void 0,l=!1,m=!1,o=!0)}},1497:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.checkLastError=e.iterateExtraOptions=e.allocWasmString=void 0;const n=t(263);e.allocWasmString=(a,s)=>{const c=(0,n.getInstance)(),f=c.lengthBytesUTF8(a)+1,b=c._malloc(f);return c.stringToUTF8(a,b,f),s.push(b),b},e.iterateExtraOptions=(a,s,c,f)=>{if(typeof a=="object"&&a!==null){if(c.has(a))throw new Error("Circular reference in options");c.add(a)}Object.entries(a).forEach(([b,g])=>{const m=s?s+b:b;if(typeof g=="object")(0,e.iterateExtraOptions)(g,m+".",c,f);else if(typeof g=="string"||typeof g=="number")f(m,g.toString());else{if(typeof g!="boolean")throw new Error("Can't handle extra config type: "+typeof g);f(m,g?"1":"0")}})},e.checkLastError=a=>{const s=(0,n.getInstance)(),c=s.stackSave();try{const f=s.stackAlloc(8);s._OrtGetLastError(f,f+4);const b=s.HEAP32[f/4],g=s.HEAPU32[f/4+1],m=g?s.UTF8ToString(g):"";throw new Error(`${a} ERROR_CODE: ${b}, ERROR_MESSAGE: ${m}`)}finally{s.stackRestore(c)}}},8050:(r,e,t)=>{t.d(e,{Z:()=>s});var n=t(6614),a=t.n(n);function s(){return a()('/*!\n* ONNX Runtime Web v1.16.3\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const n=r(263),a=r(497);t.setRunOptions=e=>{const t=(0,n.getInstance)();let r=0;const o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);let n=0;return void 0!==(null==e?void 0:e.tag)&&(n=(0,a.allocWasmString)(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,n),0===r&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,((e,n)=>{const i=(0,a.allocWasmString)(e,o),s=(0,a.allocWasmString)(n,o);0!==t._OrtAddRunConfigEntry(r,i,s)&&(0,a.checkLastError)(`Can\'t set a run config entry: ${e} - ${n}.`)})),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),o.forEach((e=>t._free(e))),e}}},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const n=r(263),a=r(497);t.setSessionOptions=e=>{var t,r,o,i;const s=(0,n.getInstance)();let u=0;const c=[],l=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(l);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=l.graphOptimizationLevel)&&void 0!==t?t:"all"),f=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(r=l.executionMode)&&void 0!==r?r:"sequential"),d="string"==typeof l.logId?(0,a.allocWasmString)(l.logId,c):0,p=null!==(o=l.logSeverityLevel)&&void 0!==o?o:2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);const g=null!==(i=l.logVerbosityLevel)&&void 0!==i?i:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof l.optimizedModelFilePath?(0,a.allocWasmString)(l.optimizedModelFilePath,c):0;return u=s._OrtCreateSessionOptions(e,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,d,p,g,h),0===u&&(0,a.checkLastError)("Can\'t create session options."),l.executionProviders&&((e,t,r)=>{for(const o of t){let t="string"==typeof o?o:o.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webnn":if(t="WEBNN","string"!=typeof o){const t=o;if(null==t?void 0:t.deviceType){const o=(0,a.allocWasmString)("deviceType",r),i=(0,a.allocWasmString)(t.deviceType,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'deviceType\' - ${t.deviceType}.`)}if(null==t?void 0:t.powerPreference){const o=(0,a.allocWasmString)("powerPreference",r),i=(0,a.allocWasmString)(t.powerPreference,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'powerPreference\' - ${t.powerPreference}.`)}}break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}const i=(0,a.allocWasmString)(t,r);0!==(0,n.getInstance)()._OrtAppendExecutionProvider(e,i)&&(0,a.checkLastError)(`Can\'t append execution provider: ${t}.`)}})(u,l.executionProviders,c),void 0!==l.extra&&(0,a.iterateExtraOptions)(l.extra,"",new WeakSet,((e,t)=>{const r=(0,a.allocWasmString)(e,c),n=(0,a.allocWasmString)(t,c);0!==s._OrtAddSessionConfigEntry(u,r,n)&&(0,a.checkLastError)(`Can\'t set a session config entry: ${e} - ${t}.`)})),[u,c]}catch(e){throw 0!==u&&s._OrtReleaseSessionOptions(u),c.forEach((e=>s._free(e))),e}}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;const n=r(918),a=r(622),o=r(917),i=r(263),s=r(497);t.initRuntime=async e=>{var t,r;t=e.wasm.numThreads,r=(0,o.logLevelStringToEnum)(e.logLevel),0!==(0,i.getInstance)()._OrtInit(t,r)&&(0,s.checkLastError)("Can\'t initialize onnxruntime.")};const u=new Map;t.createSessionAllocate=e=>{const t=(0,i.getInstance)(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{const r=(0,i.getInstance)();let n=0,o=0,c=[];const l=[],f=[];try{[o,c]=(0,a.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],o),0===n&&(0,s.checkLastError)("Can\'t create a session.");const[d,p]=(e=>{const t=(0,i.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,s.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}})(n),g=[],h=[];for(let e=0;e<d;e++){const t=r._OrtGetInputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an input name."),l.push(t),g.push(r.UTF8ToString(t))}for(let e=0;e<p;e++){const t=r._OrtGetOutputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an output name."),f.push(t),h.push(r.UTF8ToString(t))}return u.set(n,[n,l,f]),[n,g,h]}catch(e){throw l.forEach((e=>r._OrtFree(e))),f.forEach((e=>r._OrtFree(e))),0!==n&&r._OrtReleaseSession(n),e}finally{r._free(e[0]),0!==o&&r._OrtReleaseSessionOptions(o),c.forEach((e=>r._free(e)))}},t.createSession=(e,r)=>{const n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);const[n,a,o]=r;a.forEach((e=>t._OrtFree(e))),o.forEach((e=>t._OrtFree(e))),t._OrtReleaseSession(n),u.delete(e)},t.run=async(e,t,r,a,c)=>{const l=(0,i.getInstance)(),f=u.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);const[d,p,g]=f,h=t.length,m=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,n.setRunOptions)(c);for(let e=0;e<h;e++){const t=r[e][0],n=r[e][1],a=r[e][2];let i,u;if(Array.isArray(a)){u=4*a.length,i=l._malloc(u),w.push(i);let e=i/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,s.allocWasmString)(a[t],w)}}else u=a.byteLength,i=l._malloc(u),w.push(i),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),i);const c=l.stackSave(),f=l.stackAlloc(4*n.length);try{let r=f/4;n.forEach((e=>l.HEAP32[r++]=e));const a=l._OrtCreateTensor((0,o.tensorDataTypeStringToEnum)(t),i,u,f,n.length);0===a&&(0,s.checkLastError)(`Can\'t create tensor for input[${e}].`),b.push(a)}finally{l.stackRestore(c)}}const e=l.stackSave(),i=l.stackAlloc(4*h),u=l.stackAlloc(4*h),f=l.stackAlloc(4*m),_=l.stackAlloc(4*m);try{let e=i/4,r=u/4,n=f/4,c=_/4;for(let n=0;n<h;n++)l.HEAPU32[e++]=b[n],l.HEAPU32[r++]=p[t[n]];for(let e=0;e<m;e++)l.HEAPU32[n++]=0,l.HEAPU32[c++]=g[a[e]];let v=l._OrtRun(d,u,i,h,_,m,f,y);const w=l.jsepRunPromise;w&&void 0!==w.then&&(v=await w);const O=[];0!==v&&(0,s.checkLastError)("failed to call OrtRun().");for(let e=0;e<m;e++){const t=l.HEAPU32[f/4+e],r=l.stackSave(),n=l.stackAlloc(16);let a,i=0;try{v=l._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==v&&(0,s.checkLastError)(`Can\'t access output tensor data on index ${e}.`);let r=n/4;const u=l.HEAPU32[r++];i=l.HEAPU32[r++];const c=l.HEAPU32[r++],f=l.HEAPU32[r++],d=[];for(let e=0;e<f;e++)d.push(l.HEAPU32[c/4+e]);l._OrtFree(c);const p=0===d.length?1:d.reduce(((e,t)=>e*t));if(a=(0,o.tensorDataTypeEnumToString)(u),"string"===a){const e=[];let t=i/4;for(let r=0;r<p;r++){const n=l.HEAPU32[t++],a=r===p-1?void 0:l.HEAPU32[t]-n;e.push(l.UTF8ToString(n,a))}O.push([a,d,e])}else{const e=new((0,o.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(i,i+e.byteLength)),O.push([a,d,e])}}finally{l.stackRestore(r),"string"===a&&i&&l._free(i),l._OrtReleaseTensor(t)}}return O}finally{l.stackRestore(e)}}finally{b.forEach((e=>l._OrtReleaseTensor(e))),w.forEach((e=>l._free(e))),0!==y&&l._OrtReleaseRunOptions(y),v.forEach((e=>l._free(e)))}},t.endProfiling=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error("invalid session id");const n=r[0],a=t._OrtEndProfiling(n);0===a&&(0,s.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const r of e){const e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(r(449)),s=r(932),u=r(474);let c,l=!1,f=!1,d=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(d)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,n=e.numThreads,a=e.simd,o=n>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),p=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g=e.wasmPaths,h="string"==typeof g?g:void 0,m=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(p,o),y="object"==typeof g?g[m]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const n=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([r(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=h?h:t)+m:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join(__dirname,"ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${n.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}n(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,d=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||d||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,d=!0)}},497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;const n=r(263);t.allocWasmString=(e,t)=>{const r=(0,n.getInstance)(),a=r.lengthBytesUTF8(e)+1,o=r._malloc(a);return r.stringToUTF8(e,o,a),t.push(o),o},t.iterateExtraOptions=(e,r,n,a)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach((([e,o])=>{const i=r?r+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",n,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))},t.checkLastError=e=>{const t=(0,n.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);const n=t.HEAP32[r/4],a=t.HEAPU32[r/4+1],o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}},474:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return k.buffer!=x.buffer&&Y(),x}function n(){return k.buffer!=x.buffer&&Y(),I}function a(){return k.buffer!=x.buffer&&Y(),U}function o(){return k.buffer!=x.buffer&&Y(),L}function i(){return k.buffer!=x.buffer&&Y(),W}var s,u,c=e;c.ready=new Promise(((e,t)=>{s=e,u=t}));var l,f,d,p=Object.assign({},c),g="./this.program",h=(e,t)=>{throw t},m="object"==typeof window,y="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=c.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(e){return c.locateFile?c.locateFile(e,w):w+e}if(v){var O=r(384),S=r(908);let t;w=y?S.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFileSync(e,t?void 0:"utf8")),d=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!c.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=r(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(m||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));v&&"undefined"==typeof performance&&(global.performance=r(953).performance);var E=console.log.bind(console),A=console.error.bind(console);v&&(E=(...e)=>O.writeSync(1,e.join(" ")+"\\n"),A=(...e)=>O.writeSync(2,e.join(" ")+"\\n"));var T,M=c.print||E,R=c.printErr||A;Object.assign(c,p),p=null,c.thisProgram&&(g=c.thisProgram),c.quit&&(h=c.quit),c.wasmBinary&&(T=c.wasmBinary);var F=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&te("no native wasm support detected");var k,C,P,D,x,I,U,L,W,H=!1;function Y(){var e=k.buffer;c.HEAP8=x=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=U=new Int32Array(e),c.HEAPU8=I=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=L=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=W=new Float64Array(e)}var j=c.INITIAL_MEMORY||16777216;if(5242880<=j||te("INITIAL_MEMORY should be larger than STACK_SIZE, was "+j+"! (STACK_SIZE=5242880)"),b)k=c.wasmMemory;else if(c.wasmMemory)k=c.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:j/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw R("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&R("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),j=k.buffer.byteLength;var z,G=[],N=[],B=[],$=0;function q(){return F||0<$}var V,J,X=0,K=null,Z=null;function Q(){X++,c.monitorRunDependencies&&c.monitorRunDependencies(X)}function ee(){if(X--,c.monitorRunDependencies&&c.monitorRunDependencies(X),0==X&&(null!==K&&(clearInterval(K),K=null),Z)){var e=Z;Z=null,e()}}function te(e){throw c.onAbort&&c.onAbort(e),R(e="Aborted("+e+")"),H=!0,D=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function re(e){return e.startsWith("data:application/octet-stream;base64,")}function ne(e){if(e==V&&T)return new Uint8Array(T);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,r){return function(e){if(!T&&(m||y)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>ne(e)));if(f)return new Promise(((t,r)=>{f(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>ne(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{R("failed to asynchronously prepare wasm: "+e),te(e)}))}function oe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function ie(e){e.terminate(),e.onmessage=()=>{}}function se(e){(e=ge.Fa[e])||te(),ge.fb(e)}function ue(e){var t=ge.Za();if(!t)return 6;ge.Ia.push(t),ge.Fa[e.Ha]=t,t.Ha=e.Ha;var r={cmd:"run",start_routine:e.gb,arg:e.Ya,pthread_ptr:e.Ha};return v&&t.unref(),t.postMessage(r,e.mb),0}re(V="ort-wasm-threaded.wasm")||(V=_(V));var ce="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,le=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ce)return ce.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},fe=(e,t)=>(e>>>=0)?le(n(),e,t):"";function de(e){if(b)return qe(1,1,e);D=e,q()||(ge.hb(),c.onExit&&c.onExit(e),H=!0),h(e,new oe(e))}var pe=e=>{if(D=e,b)throw me(e),"unwind";de(e)},ge={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?ge.ab():ge.$a()},$a:function(){G.unshift((()=>{Q(),ge.bb((()=>ee()))}))},ab:function(){ge.receiveObjectTransfer=ge.eb,ge.threadInitTLS=ge.Sa,ge.setExitStatus=ge.Ra,F=!1},Ra:function(e){D=e},rb:["$terminateWorker"],hb:function(){for(var e of ge.Ia)ie(e);for(e of ge.La)ie(e);ge.La=[],ge.Ia=[],ge.Fa=[]},fb:function(e){var t=e.Ha;delete ge.Fa[t],ge.La.push(e),ge.Ia.splice(ge.Ia.indexOf(e),1),e.Ha=0,yt(t)},eb:function(){},Sa:function(){ge.Ta.forEach((e=>e()))},cb:e=>new Promise((t=>{e.onmessage=r=>{var n=(r=r.data).cmd;if(r.targetThread&&r.targetThread!=dt()){var a=ge.Fa[r.qb];a?a.postMessage(r,r.transferList):R(\'Internal error! Worker sent a message "\'+n+\'" to target pthread \'+r.targetThread+", but that thread no longer exists!")}else"checkMailbox"===n?He():"spawnThread"===n?ue(r):"cleanupThread"===n?se(r.thread):"killThread"===n?(r=r.thread,n=ge.Fa[r],delete ge.Fa[r],ie(n),yt(r),ge.Ia.splice(ge.Ia.indexOf(n),1),n.Ha=0):"cancelThread"===n?ge.Fa[r.thread].postMessage({cmd:"cancel"}):"loaded"===n?(e.loaded=!0,t(e)):"alert"===n?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===n?c[r.handler](...r.args):n&&R("worker sent an unknown command "+n)},e.onerror=e=>{throw R("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var r,n=[];for(r of["onExit","onAbort","print","printErr"])c.hasOwnProperty(r)&&n.push(r);e.postMessage({cmd:"load",handlers:n,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:P})})),bb:function(e){e()},Xa:function(){var e=_("ort-wasm-threaded.worker.js");e=new Worker(e),ge.La.push(e)},Za:function(){return 0==ge.La.length&&(ge.Xa(),ge.cb(ge.La[0])),ge.La.pop()}};c.PThread=ge;var he=e=>{for(;0<e.length;)e.shift()(c)};function me(e){if(b)return qe(2,0,e);pe(e)}c.establishStackSpace=function(){var e=dt(),t=a()[e+52>>2>>>0];e=a()[e+56>>2>>>0],_t(t,t-e),St(t)};var ye=[];function ve(e){this.Oa=e-24,this.Wa=function(e){o()[this.Oa+4>>2>>>0]=e},this.Va=function(e){o()[this.Oa+8>>2>>>0]=e},this.Pa=function(e,t){this.Ua(),this.Wa(e),this.Va(t)},this.Ua=function(){o()[this.Oa+16>>2>>>0]=0}}function be(e,t,r,n){return b?qe(3,1,e,t,r,n):we(e,t,r,n)}function we(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,"undefined"==typeof SharedArrayBuffer)return R("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?be(e,t,r,n):(e={gb:r,Ha:e,Ya:n,mb:a},b?(e.ob="spawnThread",postMessage(e,a),0):ue(e))}function _e(e,t,r){return b?qe(4,1,e,t,r):0}function Oe(e,t){if(b)return qe(5,1,e,t)}c.invokeEntryPoint=function(e,t){var r=ye[e];r||(e>=ye.length&&(ye.length=e+1),ye[e]=r=z.get(e)),e=r(t),q()?ge.Ra(e):vt(e)};var Se=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},Ee=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Ae=(e,t,r)=>Ee(e,n(),t,r);function Te(e,t){if(b)return qe(6,1,e,t)}function Me(e,t,r){if(b)return qe(7,1,e,t,r)}function Re(e,t,r){return b?qe(8,1,e,t,r):0}function Fe(e,t){if(b)return qe(9,1,e,t)}function ke(e,t,r){if(b)return qe(10,1,e,t,r)}function Ce(e,t,r,n){if(b)return qe(11,1,e,t,r,n)}function Pe(e,t,r,n){if(b)return qe(12,1,e,t,r,n)}function De(e,t,r,n){if(b)return qe(13,1,e,t,r,n)}function xe(e){if(b)return qe(14,1,e)}function Ie(e,t){if(b)return qe(15,1,e,t)}function Ue(e,t,r){if(b)return qe(16,1,e,t,r)}var Le=e=>{if(!H)try{if(e(),!q())try{b?vt(D):pe(D)}catch(e){e instanceof oe||"unwind"==e||h(1,e)}}catch(e){e instanceof oe||"unwind"==e||h(1,e)}};function We(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(a(),e>>2,e).value.then(He),e+=128,Atomics.store(a(),e>>2,1))}function He(){var e=dt();e&&(We(e),Le((()=>bt())))}c.__emscripten_thread_mailbox_await=We,c.checkMailbox=He;var Ye=e=>0==e%4&&(0!=e%100||0==e%400),je=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Ge(e,t,r,n,a,o,i,s){return b?qe(17,1,e,t,r,n,a,o,i,s):-52}function Ne(e,t,r,n,a,o,i){if(b)return qe(18,1,e,t,r,n,a,o,i)}var Be=e=>{var t=Se(e)+1,r=pt(t);return r&&Ae(e,r,t),r},$e=e=>{var t=Ot();return e=e(),St(t),e};function qe(e,t){var r=arguments.length-2,n=arguments;return $e((()=>{for(var a=Et(8*r),o=a>>3,s=0;s<r;s++){var u=n[2+s];i()[o+s>>>0]=u}return mt(e,r,a,t)}))}var Ve,Je=[],Xe={},Ke=()=>{if(!Ve){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);Ve=r}return Ve};function Ze(e,r){if(b)return qe(19,1,e,r);e>>>=0,r>>>=0;var n=0;return Ke().forEach((function(a,i){var s=r+n;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,n+=a.length+1})),0}function Qe(e,t){if(b)return qe(20,1,e,t);e>>>=0,t>>>=0;var r=Ke();o()[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),o()[t>>2>>>0]=n,0}function et(e){return b?qe(21,1,e):52}function tt(e,t,r,n){return b?qe(22,1,e,t,r,n):52}function rt(e,t,r,n,a){return b?qe(23,1,e,t,r,n,a):70}var nt=[null,[],[]];function at(e,t,r,a){if(b)return qe(24,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var i=0,s=0;s<r;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=n()[u+l>>>0],d=nt[e];0===f||10===f?((1===e?M:R)(le(d,0)),d.length=0):d.push(f)}i+=c}return o()[a>>2>>>0]=i,0}var ot=e=>(ot=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(v)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}te("initRandomDevice")})())(e),it=[31,29,31,30,31,30,31,31,30,31,30,31],st=[31,28,31,30,31,30,31,31,30,31,30,31],ut=(e,r)=>{t().set(e,r>>>0)};function ct(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Ja;for(e=new Date(new Date(e.Ka+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Ye(e.getFullYear())?it:st)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),r=u(r),0>=s(t,e)?0>=s(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0,n>>>=0;var l=a()[n+40>>2>>>0];for(var f in n={kb:a()[n>>2>>>0],jb:a()[n+4>>2>>>0],Ma:a()[n+8>>2>>>0],Qa:a()[n+12>>2>>>0],Na:a()[n+16>>2>>>0],Ka:a()[n+20>>2>>>0],Ga:a()[n+24>>2>>>0],Ja:a()[n+28>>2>>>0],sb:a()[n+32>>2>>>0],ib:a()[n+36>>2>>>0],lb:l?fe(l):""},r=fe(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(f,"g"),l[f]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(f in l={"%a":e=>d[e.Ga].substring(0,3),"%A":e=>d[e.Ga],"%b":e=>p[e.Na].substring(0,3),"%B":e=>p[e.Na],"%C":e=>i((e.Ka+1900)/100|0,2),"%d":e=>i(e.Qa,2),"%e":e=>o(e.Qa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>i(e.Ma,2),"%I":e=>(0==(e=e.Ma)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.Na-1;t+=(Ye(e.Ka+1900)?it:st)[r++]);return i(e.Qa+t,3)},"%m":e=>i(e.Na+1,2),"%M":e=>i(e.jb,2),"%n":()=>"\\n","%p":e=>0<=e.Ma&&12>e.Ma?"AM":"PM","%S":e=>i(e.kb,2),"%t":()=>"\\t","%u":e=>e.Ga||7,"%U":e=>i(Math.floor((e.Ja+7-e.Ga)/7),2),"%V":e=>{var t=Math.floor((e.Ja+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ja-2)%7&&t++,t)53==t&&(4==(r=(e.Ga+371-e.Ja)%7)||3==r&&Ye(e.Ka)||(t=1));else{t=52;var r=(e.Ga+7-e.Ja-1)%7;(4==r||5==r&&Ye(e.Ka%400-1))&&t++}return i(t,2)},"%w":e=>e.Ga,"%W":e=>i(Math.floor((e.Ja+7-(e.Ga+6)%7)/7),2),"%y":e=>(e.Ka+1900).toString().substring(2),"%Y":e=>e.Ka+1900,"%z":e=>{var t=0<=(e=e.ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.lb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),l)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),l[f](n)));return f=function(e){var t=Array(Se(e)+1);return Ee(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),f.length>t?0:(ut(f,e),f.length-1)}ge.Pa();var lt=[null,de,me,be,_e,Oe,Te,Me,Re,Fe,ke,Ce,Pe,De,xe,Ie,Ue,Ge,Ne,Ze,Qe,et,tt,rt,at],ft={b:function(e,t,r){throw new ve(e>>>=0).Pa(t>>>0,r>>>0),e},N:function(e){gt(e>>>0,!y,1,!m,131072,!1),ge.Sa()},k:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):se(e)},I:we,h:_e,T:Oe,E:Te,G:Me,U:Re,R:Fe,J:ke,Q:Ce,o:Pe,F:De,C:xe,S:Ie,D:Ue,q:()=>!0,A:function(e,t){(e>>>=0)==t>>>0?setTimeout((()=>He())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ge.Fa[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:We,p:function(e){v&&ge.Fa[e>>>0].ref()},t:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getUTCSeconds(),a()[r+4>>2>>>0]=e.getUTCMinutes(),a()[r+8>>2>>>0]=e.getUTCHours(),a()[r+12>>2>>>0]=e.getUTCDate(),a()[r+16>>2>>>0]=e.getUTCMonth(),a()[r+20>>2>>>0]=e.getUTCFullYear()-1900,a()[r+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[r+28>>2>>>0]=e},u:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getSeconds(),a()[r+4>>2>>>0]=e.getMinutes(),a()[r+8>>2>>>0]=e.getHours(),a()[r+12>>2>>>0]=e.getDate(),a()[r+16>>2>>>0]=e.getMonth(),a()[r+20>>2>>>0]=e.getFullYear()-1900,a()[r+24>>2>>>0]=e.getDay(),t=(Ye(e.getFullYear())?je:ze)[e.getMonth()]+e.getDate()-1|0,a()[r+28>>2>>>0]=t,a()[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),a()[r+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),r=a()[e+32>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>r?a()[e+32>>2>>>0]=Number(o!=i&&s==n):0<r!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),a()[e+24>>2>>>0]=t.getDay(),r=(Ye(t.getFullYear())?je:ze)[t.getMonth()]+t.getDate()-1|0,a()[e+28>>2>>>0]=r,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,wt((J=e,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),e>>>0},r:Ge,s:Ne,z:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}e>>>=0,t>>>=0,r>>>=0;var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=n(s),t=n(u),e=Be(e),t=Be(t),c<i?(o()[r>>2>>>0]=e,o()[r+4>>2>>>0]=t):(o()[r>>2>>>0]=t,o()[r+4>>2>>>0]=e)},c:()=>{te("")},l:function(){},i:function(){return Date.now()},V:()=>{throw $+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?r(993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,r,n){for(ge.pb=t>>>0,Je.length=r,t=n>>>0>>3,n=0;n<r;n++)Je[n]=i()[t+n>>>0];return lt[e].apply(null,Je)},y:function(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var a=t*(1+.2/r);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a);e:{o=o.min.call(o,4294901760,a+(65536-a%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(o),Y();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},O:Ze,P:Qe,j:pe,g:et,n:tt,w:rt,m:at,x:function(e,t){return e>>>=0,t>>>=0,ot(n().subarray(e>>>0,e+t>>>0)),0},a:k||c.wasmMemory,H:ct,d:function(e,t,r,n){return ct(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e,t){return e=e.exports,C=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),ge.Ta.push(C.sa),z=C.ta,N.unshift(C.W),P=t,ee(),e}var t={a:ft};if(Q(),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){R("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var r=V;return T||"function"!=typeof WebAssembly.instantiateStreaming||re(r)||r.startsWith("file://")||v||"function"!=typeof fetch?ae(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return R("wasm streaming compile failed: "+n),R("falling back to ArrayBuffer instantiation"),ae(r,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(u)}(),c._OrtInit=(e,t)=>(c._OrtInit=C.X)(e,t),c._OrtGetLastError=(e,t)=>(c._OrtGetLastError=C.Y)(e,t),c._OrtCreateSessionOptions=(e,t,r,n,a,o,i,s,u,l)=>(c._OrtCreateSessionOptions=C.Z)(e,t,r,n,a,o,i,s,u,l),c._OrtAppendExecutionProvider=(e,t)=>(c._OrtAppendExecutionProvider=C._)(e,t),c._OrtAddSessionConfigEntry=(e,t,r)=>(c._OrtAddSessionConfigEntry=C.$)(e,t,r),c._OrtReleaseSessionOptions=e=>(c._OrtReleaseSessionOptions=C.aa)(e),c._OrtCreateSession=(e,t,r)=>(c._OrtCreateSession=C.ba)(e,t,r),c._OrtReleaseSession=e=>(c._OrtReleaseSession=C.ca)(e),c._OrtGetInputOutputCount=(e,t,r)=>(c._OrtGetInputOutputCount=C.da)(e,t,r),c._OrtGetInputName=(e,t)=>(c._OrtGetInputName=C.ea)(e,t),c._OrtGetOutputName=(e,t)=>(c._OrtGetOutputName=C.fa)(e,t),c._OrtFree=e=>(c._OrtFree=C.ga)(e),c._OrtCreateTensor=(e,t,r,n,a)=>(c._OrtCreateTensor=C.ha)(e,t,r,n,a),c._OrtGetTensorData=(e,t,r,n,a)=>(c._OrtGetTensorData=C.ia)(e,t,r,n,a),c._OrtReleaseTensor=e=>(c._OrtReleaseTensor=C.ja)(e),c._OrtCreateRunOptions=(e,t,r,n)=>(c._OrtCreateRunOptions=C.ka)(e,t,r,n),c._OrtAddRunConfigEntry=(e,t,r)=>(c._OrtAddRunConfigEntry=C.la)(e,t,r),c._OrtReleaseRunOptions=e=>(c._OrtReleaseRunOptions=C.ma)(e),c._OrtRun=(e,t,r,n,a,o,i,s)=>(c._OrtRun=C.na)(e,t,r,n,a,o,i,s),c._OrtEndProfiling=e=>(c._OrtEndProfiling=C.oa)(e);var dt=c._pthread_self=()=>(dt=c._pthread_self=C.pa)(),pt=c._malloc=e=>(pt=c._malloc=C.qa)(e);c._free=e=>(c._free=C.ra)(e),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=C.sa)();var gt=c.__emscripten_thread_init=(e,t,r,n,a,o)=>(gt=c.__emscripten_thread_init=C.ua)(e,t,r,n,a,o);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=C.va)();var ht,mt=(e,t,r,n)=>(mt=C.wa)(e,t,r,n),yt=e=>(yt=C.xa)(e),vt=c.__emscripten_thread_exit=e=>(vt=c.__emscripten_thread_exit=C.ya)(e),bt=c.__emscripten_check_mailbox=()=>(bt=c.__emscripten_check_mailbox=C.za)(),wt=e=>(wt=C.Aa)(e),_t=(e,t)=>(_t=C.Ba)(e,t),Ot=()=>(Ot=C.Ca)(),St=e=>(St=C.Da)(e),Et=e=>(Et=C.Ea)(e);function At(){function e(){if(!ht&&(ht=!0,c.calledRun=!0,!H)&&(b||he(N),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!b)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();B.unshift(e)}he(B)}}if(!(0<X))if(b)s(c),b||he(N),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)G.unshift(c.preRun.shift());he(G),0<X||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=q,c.wasmMemory=k,c.stackAlloc=Et,c.stackSave=Ot,c.stackRestore=St,c.UTF8ToString=fe,c.stringToUTF8=Ae,c.lengthBytesUTF8=Se,c.ExitStatus=oe,c.PThread=ge,Z=function e(){ht||At(),ht||(Z=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return At(),e.ready});e.exports=n},932:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,n,a=e;a.ready=new Promise(((e,r)=>{t=e,n=r}));var o,i,s,u=Object.assign({},a),c="./this.program",l=(e,t)=>{throw t},f="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(p){var h=r(384),m=r(908);g=d?m.dirname(g)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFileSync(e,t?void 0:"utf8")),s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!a.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t},a.inspect=()=>"[Emscripten Module object]"}else(f||d)&&(d?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),_scriptDir&&(g=_scriptDir),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var y,v=a.print||console.log.bind(console),b=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.thisProgram&&(c=a.thisProgram),a.quit&&(l=a.quit),a.wasmBinary&&(y=a.wasmBinary);var w=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&W("no native wasm support detected");var _,O,S,E,A,T,M=!1;function R(){var e=_.buffer;a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=E=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=T=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var F=[],k=[],C=[];function P(){var e=a.preRun.shift();F.unshift(e)}var D,x,I=0,U=null,L=null;function W(e){throw a.onAbort&&a.onAbort(e),b(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(D="ort-wasm.wasm")){var Y=D;D=a.locateFile?a.locateFile(Y,g):g+Y}function j(e){if(e==D&&y)return new Uint8Array(y);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}function z(e,t,r){return function(e){if(!y&&(f||d)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>j(e)));if(i)return new Promise(((t,r)=>{i(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>j(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{b("failed to asynchronously prepare wasm: "+e),W(e)}))}function G(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var N=e=>{for(;0<e.length;)e.shift()(a)};function B(e){this.qa=e-24,this.va=function(e){T[this.qa+4>>2>>>0]=e},this.ua=function(e){T[this.qa+8>>2>>>0]=e},this.sa=function(e,t){this.ta(),this.va(e),this.ua(t)},this.ta=function(){T[this.qa+16>>2>>>0]=0}}var $,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,V=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&q)return q.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},J=(e,t)=>(e>>>=0)?V(E,e,t):"",X=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},K=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Z=e=>0==e%4&&(0!=e%100||0==e%400),Q=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=e=>{var t=X(e)+1,r=le(t);return r&&K(e,E,r,t),r},re={},ne=()=>{if(!$){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in re)void 0===re[e]?delete t[e]:t[e]=re[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);$=r}return $},ae=[null,[],[]],oe=e=>(oe=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(p)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}W("initRandomDevice")})())(e),ie=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t,r,n){function a(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.ma;for(e=new Date(new Date(e.na+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Z(e.getFullYear())?ie:se)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0;var c=A[40+(n>>>=0)>>2>>>0];for(var l in n={ya:A[n>>2>>>0],xa:A[n+4>>2>>>0],oa:A[n+8>>2>>>0],ra:A[n+12>>2>>>0],pa:A[n+16>>2>>>0],na:A[n+20>>2>>>0],ha:A[n+24>>2>>>0],ma:A[n+28>>2>>>0],Aa:A[n+32>>2>>>0],wa:A[n+36>>2>>>0],za:c?J(c):""},r=J(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":e=>f[e.ha].substring(0,3),"%A":e=>f[e.ha],"%b":e=>d[e.pa].substring(0,3),"%B":e=>d[e.pa],"%C":e=>o((e.na+1900)/100|0,2),"%d":e=>o(e.ra,2),"%e":e=>a(e.ra,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.oa,2),"%I":e=>(0==(e=e.oa)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.pa-1;t+=(Z(e.na+1900)?ie:se)[r++]);return o(e.ra+t,3)},"%m":e=>o(e.pa+1,2),"%M":e=>o(e.xa,2),"%n":()=>"\\n","%p":e=>0<=e.oa&&12>e.oa?"AM":"PM","%S":e=>o(e.ya,2),"%t":()=>"\\t","%u":e=>e.ha||7,"%U":e=>o(Math.floor((e.ma+7-e.ha)/7),2),"%V":e=>{var t=Math.floor((e.ma+7-(e.ha+6)%7)/7);if(2>=(e.ha+371-e.ma-2)%7&&t++,t)53==t&&(4==(r=(e.ha+371-e.ma)%7)||3==r&&Z(e.na)||(t=1));else{t=52;var r=(e.ha+7-e.ma-1)%7;(4==r||5==r&&Z(e.na%400-1))&&t++}return o(t,2)},"%w":e=>e.ha,"%W":e=>o(Math.floor((e.ma+7-(e.ha+6)%7)/7),2),"%y":e=>(e.na+1900).toString().substring(2),"%Y":e=>e.na+1900,"%z":e=>{var t=0<=(e=e.wa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.za,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),c)r.includes(l)&&(r=r.replace(new RegExp(l,"g"),c[l](n)));return l=function(e){var t=Array(X(e)+1);return K(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var ce={a:function(e,t,r){throw new B(e>>>=0).sa(t>>>0,r>>>0),e},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getUTCSeconds(),A[r+4>>2>>>0]=e.getUTCMinutes(),A[r+8>>2>>>0]=e.getUTCHours(),A[r+12>>2>>>0]=e.getUTCDate(),A[r+16>>2>>>0]=e.getUTCMonth(),A[r+20>>2>>>0]=e.getUTCFullYear()-1900,A[r+24>>2>>>0]=e.getUTCDay(),A[r+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getSeconds(),A[r+4>>2>>>0]=e.getMinutes(),A[r+8>>2>>>0]=e.getHours(),A[r+12>>2>>>0]=e.getDate(),A[r+16>>2>>>0]=e.getMonth(),A[r+20>>2>>>0]=e.getFullYear()-1900,A[r+24>>2>>>0]=e.getDay(),A[r+28>>2>>>0]=(Z(e.getFullYear())?Q:ee)[e.getMonth()]+e.getDate()-1|0,A[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[r+32>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){e>>>=0;var t=new Date(A[e+20>>2>>>0]+1900,A[e+16>>2>>>0],A[e+12>>2>>>0],A[e+8>>2>>>0],A[e+4>>2>>>0],A[e>>2>>>0],0),r=A[e+32>>2>>>0],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>r?A[e+32>>2>>>0]=Number(a!=o&&i==n):0<r!=(i==n)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<r?i:a)-n))),A[e+24>>2>>>0]=t.getDay(),A[e+28>>2>>>0]=(Z(t.getFullYear())?Q:ee)[t.getMonth()]+t.getDate()-1|0,A[e>>2>>>0]=t.getSeconds(),A[e+4>>2>>>0]=t.getMinutes(),A[e+8>>2>>>0]=t.getHours(),A[e+12>>2>>>0]=t.getDate(),A[e+16>>2>>>0]=t.getMonth(),A[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,de((x=e,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)),e>>>0},l:function(){return-52},m:function(){},u:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}r>>>=0;var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();T[e>>>0>>2>>>0]=60*Math.max(a,s),A[t>>>0>>2>>>0]=Number(a!=s),e=n(o),t=n(i),e=te(e),t=te(t),s<a?(T[r>>2>>>0]=e,T[r+4>>2>>>0]=t):(T[r>>2>>>0]=t,T[r+4>>2>>>0]=e)},d:()=>{W("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(e,t,r){return t>>>=0,E.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0)},t:function(e){e>>>=0;var t=E.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math;n=Math.max(e,n);e:{a=a.min.call(a,4294901760,n+(65536-n%65536)%65536)-_.buffer.byteLength+65535>>>16;try{_.grow(a),R();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){e>>>=0,t>>>=0;var r=0;return ne().forEach((function(n,a){var o=t+r;for(a=T[e+4*a>>2>>>0]=o,o=0;o<n.length;++o)S[a++>>0>>>0]=n.charCodeAt(o);S[a>>0>>>0]=0,r+=n.length+1})),0},E:function(e,t){e>>>=0,t>>>=0;var r=ne();T[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),T[t>>2>>>0]=n,0},s:e=>{w||(a.onExit&&a.onExit(e),M=!0),l(e,new G(e))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var a=0,o=0;o<r;o++){var i=T[t>>2>>>0],s=T[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=E[i+u>>>0],l=ae[e];0===c||10===c?((1===e?v:b)(V(l,0)),l.length=0):l.push(c)}a+=s}return T[n>>2>>>0]=a,0},r:function(e,t){return e>>>=0,oe(E.subarray(e>>>0,e+(t>>>0)>>>0)),0},C:ue,c:function(e,t,r,n){return ue(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e){if(e=e.exports,O=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),_=O.L,R(),k.unshift(O.M),I--,a.monitorRunDependencies&&a.monitorRunDependencies(I),0==I&&(null!==U&&(clearInterval(U),U=null),L)){var t=L;L=null,t()}return e}var t={a:ce};if(I++,a.monitorRunDependencies&&a.monitorRunDependencies(I),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var r=D;return y||"function"!=typeof WebAssembly.instantiateStreaming||H(r)||r.startsWith("file://")||p||"function"!=typeof fetch?z(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return b("wasm streaming compile failed: "+n),b("falling back to ArrayBuffer instantiation"),z(r,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}(),a._OrtInit=(e,t)=>(a._OrtInit=O.N)(e,t),a._OrtGetLastError=(e,t)=>(a._OrtGetLastError=O.O)(e,t),a._OrtCreateSessionOptions=(e,t,r,n,o,i,s,u,c,l)=>(a._OrtCreateSessionOptions=O.P)(e,t,r,n,o,i,s,u,c,l),a._OrtAppendExecutionProvider=(e,t)=>(a._OrtAppendExecutionProvider=O.Q)(e,t),a._OrtAddSessionConfigEntry=(e,t,r)=>(a._OrtAddSessionConfigEntry=O.R)(e,t,r),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=O.S)(e),a._OrtCreateSession=(e,t,r)=>(a._OrtCreateSession=O.T)(e,t,r),a._OrtReleaseSession=e=>(a._OrtReleaseSession=O.U)(e),a._OrtGetInputOutputCount=(e,t,r)=>(a._OrtGetInputOutputCount=O.V)(e,t,r),a._OrtGetInputName=(e,t)=>(a._OrtGetInputName=O.W)(e,t),a._OrtGetOutputName=(e,t)=>(a._OrtGetOutputName=O.X)(e,t),a._OrtFree=e=>(a._OrtFree=O.Y)(e),a._OrtCreateTensor=(e,t,r,n,o)=>(a._OrtCreateTensor=O.Z)(e,t,r,n,o),a._OrtGetTensorData=(e,t,r,n,o)=>(a._OrtGetTensorData=O._)(e,t,r,n,o),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=O.$)(e),a._OrtCreateRunOptions=(e,t,r,n)=>(a._OrtCreateRunOptions=O.aa)(e,t,r,n),a._OrtAddRunConfigEntry=(e,t,r)=>(a._OrtAddRunConfigEntry=O.ba)(e,t,r),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=O.ca)(e),a._OrtRun=(e,t,r,n,o,i,s,u)=>(a._OrtRun=O.da)(e,t,r,n,o,i,s,u),a._OrtEndProfiling=e=>(a._OrtEndProfiling=O.ea)(e);var le=a._malloc=e=>(le=a._malloc=O.fa)(e);a._free=e=>(a._free=O.ga)(e);var fe,de=e=>(de=O.ia)(e),pe=()=>(pe=O.ja)(),ge=e=>(ge=O.ka)(e),he=e=>(he=O.la)(e);function me(){function e(){if(!fe&&(fe=!0,a.calledRun=!0,!M)){if(N(k),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var e=a.postRun.shift();C.unshift(e)}N(C)}}if(!(0<I)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)P();N(F),0<I||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e())}}if(a.stackAlloc=he,a.stackSave=pe,a.stackRestore=ge,a.UTF8ToString=J,a.stringToUTF8=(e,t,r)=>K(e,E,t,r),a.lengthBytesUTF8=X,L=function e(){fe||me(),fe||(L=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return me(),e.ready});e.exports=n},154:e=>{"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";const e=r(259),t=r(263);self.onmessage=r=>{switch(r.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(r.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(r.data.in).then((()=>postMessage({type:"init-ort"})),(e=>postMessage({type:"init-ort",err:e}))),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=r.data.in,n=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:n})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:n}=r.data.in,a=(0,e.createSessionFinalize)(t,n);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:n}=r.data.in,a=(0,e.createSession)(t,n);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=r.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:n,inputs:a,outputIndices:o,options:i}=r.data.in;(0,e.run)(t,n,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=r.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:r=>{r.exports=function(e,t,n,a){var s=self||window;try{try{var c;try{c=new s.Blob([e])}catch{(c=new(s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder)).append(e),c=c.getBlob()}var f=s.URL||s.webkitURL,b=f.createObjectURL(c),g=new s[t](b,n);return f.revokeObjectURL(b),g}catch{return new s[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch{if(!a)throw Error("Inline worker is not supported");return new s[t](a,n)}}},2446:(r,e,t)=>{var n,a,s,c=t(2100),f=c.Reader,b=c.Writer,g=c.util,m=c.roots.default||(c.roots.default={});m.onnx=((s={}).Version=(n={},(a=Object.create(n))[n[0]="_START_VERSION"]=0,a[n[1]="IR_VERSION_2017_10_10"]=1,a[n[2]="IR_VERSION_2017_10_30"]=2,a[n[3]="IR_VERSION_2017_11_3"]=3,a[n[4]="IR_VERSION_2019_1_22"]=4,a[n[5]="IR_VERSION_2019_3_18"]=5,a[n[6]="IR_VERSION_2019_9_19"]=6,a[n[7]="IR_VERSION_2020_5_8"]=7,a[n[8]="IR_VERSION_2021_7_30"]=8,a[n[9]="IR_VERSION"]=9,a),s.AttributeProto=function(){function l(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.name="",l.prototype.refAttrName="",l.prototype.docString="",l.prototype.type=0,l.prototype.f=0,l.prototype.i=g.Long?g.Long.fromBits(0,0,!1):0,l.prototype.s=g.newBuffer([]),l.prototype.t=null,l.prototype.g=null,l.prototype.sparseTensor=null,l.prototype.tp=null,l.prototype.floats=g.emptyArray,l.prototype.ints=g.emptyArray,l.prototype.strings=g.emptyArray,l.prototype.tensors=g.emptyArray,l.prototype.graphs=g.emptyArray,l.prototype.sparseTensors=g.emptyArray,l.prototype.typeProtos=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(10).string(o.name),o.f!=null&&Object.hasOwnProperty.call(o,"f")&&u.uint32(21).float(o.f),o.i!=null&&Object.hasOwnProperty.call(o,"i")&&u.uint32(24).int64(o.i),o.s!=null&&Object.hasOwnProperty.call(o,"s")&&u.uint32(34).bytes(o.s),o.t!=null&&Object.hasOwnProperty.call(o,"t")&&m.onnx.TensorProto.encode(o.t,u.uint32(42).fork()).ldelim(),o.g!=null&&Object.hasOwnProperty.call(o,"g")&&m.onnx.GraphProto.encode(o.g,u.uint32(50).fork()).ldelim(),o.floats!=null&&o.floats.length){u.uint32(58).fork();for(var d=0;d<o.floats.length;++d)u.float(o.floats[d]);u.ldelim()}if(o.ints!=null&&o.ints.length){for(u.uint32(66).fork(),d=0;d<o.ints.length;++d)u.int64(o.ints[d]);u.ldelim()}if(o.strings!=null&&o.strings.length)for(d=0;d<o.strings.length;++d)u.uint32(74).bytes(o.strings[d]);if(o.tensors!=null&&o.tensors.length)for(d=0;d<o.tensors.length;++d)m.onnx.TensorProto.encode(o.tensors[d],u.uint32(82).fork()).ldelim();if(o.graphs!=null&&o.graphs.length)for(d=0;d<o.graphs.length;++d)m.onnx.GraphProto.encode(o.graphs[d],u.uint32(90).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(106).string(o.docString),o.tp!=null&&Object.hasOwnProperty.call(o,"tp")&&m.onnx.TypeProto.encode(o.tp,u.uint32(114).fork()).ldelim(),o.typeProtos!=null&&o.typeProtos.length)for(d=0;d<o.typeProtos.length;++d)m.onnx.TypeProto.encode(o.typeProtos[d],u.uint32(122).fork()).ldelim();if(o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.uint32(160).int32(o.type),o.refAttrName!=null&&Object.hasOwnProperty.call(o,"refAttrName")&&u.uint32(170).string(o.refAttrName),o.sparseTensor!=null&&Object.hasOwnProperty.call(o,"sparseTensor")&&m.onnx.SparseTensorProto.encode(o.sparseTensor,u.uint32(178).fork()).ldelim(),o.sparseTensors!=null&&o.sparseTensors.length)for(d=0;d<o.sparseTensors.length;++d)m.onnx.SparseTensorProto.encode(o.sparseTensors[d],u.uint32(186).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.AttributeProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.name=o.string();break;case 21:y.refAttrName=o.string();break;case 13:y.docString=o.string();break;case 20:y.type=o.int32();break;case 2:y.f=o.float();break;case 3:y.i=o.int64();break;case 4:y.s=o.bytes();break;case 5:y.t=m.onnx.TensorProto.decode(o,o.uint32());break;case 6:y.g=m.onnx.GraphProto.decode(o,o.uint32());break;case 22:y.sparseTensor=m.onnx.SparseTensorProto.decode(o,o.uint32());break;case 14:y.tp=m.onnx.TypeProto.decode(o,o.uint32());break;case 7:if(y.floats&&y.floats.length||(y.floats=[]),(7&w)==2)for(var _=o.uint32()+o.pos;o.pos<_;)y.floats.push(o.float());else y.floats.push(o.float());break;case 8:if(y.ints&&y.ints.length||(y.ints=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.ints.push(o.int64());else y.ints.push(o.int64());break;case 9:y.strings&&y.strings.length||(y.strings=[]),y.strings.push(o.bytes());break;case 10:y.tensors&&y.tensors.length||(y.tensors=[]),y.tensors.push(m.onnx.TensorProto.decode(o,o.uint32()));break;case 11:y.graphs&&y.graphs.length||(y.graphs=[]),y.graphs.push(m.onnx.GraphProto.decode(o,o.uint32()));break;case 23:y.sparseTensors&&y.sparseTensors.length||(y.sparseTensors=[]),y.sparseTensors.push(m.onnx.SparseTensorProto.decode(o,o.uint32()));break;case 15:y.typeProtos&&y.typeProtos.length||(y.typeProtos=[]),y.typeProtos.push(m.onnx.TypeProto.decode(o,o.uint32()));break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&!g.isString(o.refAttrName))return"refAttrName: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString))return"docString: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(o.f!=null&&o.hasOwnProperty("f")&&typeof o.f!="number")return"f: number expected";if(o.i!=null&&o.hasOwnProperty("i")&&!(g.isInteger(o.i)||o.i&&g.isInteger(o.i.low)&&g.isInteger(o.i.high)))return"i: integer|Long expected";if(o.s!=null&&o.hasOwnProperty("s")&&!(o.s&&typeof o.s.length=="number"||g.isString(o.s)))return"s: buffer expected";if(o.t!=null&&o.hasOwnProperty("t")&&(d=m.onnx.TensorProto.verify(o.t)))return"t."+d;if(o.g!=null&&o.hasOwnProperty("g")&&(d=m.onnx.GraphProto.verify(o.g)))return"g."+d;if(o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")&&(d=m.onnx.SparseTensorProto.verify(o.sparseTensor)))return"sparseTensor."+d;if(o.tp!=null&&o.hasOwnProperty("tp")&&(d=m.onnx.TypeProto.verify(o.tp)))return"tp."+d;if(o.floats!=null&&o.hasOwnProperty("floats")){if(!Array.isArray(o.floats))return"floats: array expected";for(var u=0;u<o.floats.length;++u)if(typeof o.floats[u]!="number")return"floats: number[] expected"}if(o.ints!=null&&o.hasOwnProperty("ints")){if(!Array.isArray(o.ints))return"ints: array expected";for(u=0;u<o.ints.length;++u)if(!(g.isInteger(o.ints[u])||o.ints[u]&&g.isInteger(o.ints[u].low)&&g.isInteger(o.ints[u].high)))return"ints: integer|Long[] expected"}if(o.strings!=null&&o.hasOwnProperty("strings")){if(!Array.isArray(o.strings))return"strings: array expected";for(u=0;u<o.strings.length;++u)if(!(o.strings[u]&&typeof o.strings[u].length=="number"||g.isString(o.strings[u])))return"strings: buffer[] expected"}if(o.tensors!=null&&o.hasOwnProperty("tensors")){if(!Array.isArray(o.tensors))return"tensors: array expected";for(u=0;u<o.tensors.length;++u)if(d=m.onnx.TensorProto.verify(o.tensors[u]))return"tensors."+d}if(o.graphs!=null&&o.hasOwnProperty("graphs")){if(!Array.isArray(o.graphs))return"graphs: array expected";for(u=0;u<o.graphs.length;++u)if(d=m.onnx.GraphProto.verify(o.graphs[u]))return"graphs."+d}if(o.sparseTensors!=null&&o.hasOwnProperty("sparseTensors")){if(!Array.isArray(o.sparseTensors))return"sparseTensors: array expected";for(u=0;u<o.sparseTensors.length;++u)if(d=m.onnx.SparseTensorProto.verify(o.sparseTensors[u]))return"sparseTensors."+d}if(o.typeProtos!=null&&o.hasOwnProperty("typeProtos")){if(!Array.isArray(o.typeProtos))return"typeProtos: array expected";for(u=0;u<o.typeProtos.length;++u){var d;if(d=m.onnx.TypeProto.verify(o.typeProtos[u]))return"typeProtos."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.AttributeProto)return o;var u=new m.onnx.AttributeProto;switch(o.name!=null&&(u.name=String(o.name)),o.refAttrName!=null&&(u.refAttrName=String(o.refAttrName)),o.docString!=null&&(u.docString=String(o.docString)),o.type){default:if(typeof o.type=="number"){u.type=o.type;break}break;case"UNDEFINED":case 0:u.type=0;break;case"FLOAT":case 1:u.type=1;break;case"INT":case 2:u.type=2;break;case"STRING":case 3:u.type=3;break;case"TENSOR":case 4:u.type=4;break;case"GRAPH":case 5:u.type=5;break;case"SPARSE_TENSOR":case 11:u.type=11;break;case"TYPE_PROTO":case 13:u.type=13;break;case"FLOATS":case 6:u.type=6;break;case"INTS":case 7:u.type=7;break;case"STRINGS":case 8:u.type=8;break;case"TENSORS":case 9:u.type=9;break;case"GRAPHS":case 10:u.type=10;break;case"SPARSE_TENSORS":case 12:u.type=12;break;case"TYPE_PROTOS":case 14:u.type=14}if(o.f!=null&&(u.f=Number(o.f)),o.i!=null&&(g.Long?(u.i=g.Long.fromValue(o.i)).unsigned=!1:typeof o.i=="string"?u.i=parseInt(o.i,10):typeof o.i=="number"?u.i=o.i:typeof o.i=="object"&&(u.i=new g.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber())),o.s!=null&&(typeof o.s=="string"?g.base64.decode(o.s,u.s=g.newBuffer(g.base64.length(o.s)),0):o.s.length>=0&&(u.s=o.s)),o.t!=null){if(typeof o.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");u.t=m.onnx.TensorProto.fromObject(o.t)}if(o.g!=null){if(typeof o.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");u.g=m.onnx.GraphProto.fromObject(o.g)}if(o.sparseTensor!=null){if(typeof o.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");u.sparseTensor=m.onnx.SparseTensorProto.fromObject(o.sparseTensor)}if(o.tp!=null){if(typeof o.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");u.tp=m.onnx.TypeProto.fromObject(o.tp)}if(o.floats){if(!Array.isArray(o.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");u.floats=[];for(var d=0;d<o.floats.length;++d)u.floats[d]=Number(o.floats[d])}if(o.ints){if(!Array.isArray(o.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(u.ints=[],d=0;d<o.ints.length;++d)g.Long?(u.ints[d]=g.Long.fromValue(o.ints[d])).unsigned=!1:typeof o.ints[d]=="string"?u.ints[d]=parseInt(o.ints[d],10):typeof o.ints[d]=="number"?u.ints[d]=o.ints[d]:typeof o.ints[d]=="object"&&(u.ints[d]=new g.LongBits(o.ints[d].low>>>0,o.ints[d].high>>>0).toNumber())}if(o.strings){if(!Array.isArray(o.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(u.strings=[],d=0;d<o.strings.length;++d)typeof o.strings[d]=="string"?g.base64.decode(o.strings[d],u.strings[d]=g.newBuffer(g.base64.length(o.strings[d])),0):o.strings[d].length>=0&&(u.strings[d]=o.strings[d])}if(o.tensors){if(!Array.isArray(o.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(u.tensors=[],d=0;d<o.tensors.length;++d){if(typeof o.tensors[d]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");u.tensors[d]=m.onnx.TensorProto.fromObject(o.tensors[d])}}if(o.graphs){if(!Array.isArray(o.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(u.graphs=[],d=0;d<o.graphs.length;++d){if(typeof o.graphs[d]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");u.graphs[d]=m.onnx.GraphProto.fromObject(o.graphs[d])}}if(o.sparseTensors){if(!Array.isArray(o.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(u.sparseTensors=[],d=0;d<o.sparseTensors.length;++d){if(typeof o.sparseTensors[d]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");u.sparseTensors[d]=m.onnx.SparseTensorProto.fromObject(o.sparseTensors[d])}}if(o.typeProtos){if(!Array.isArray(o.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(u.typeProtos=[],d=0;d<o.typeProtos.length;++d){if(typeof o.typeProtos[d]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");u.typeProtos[d]=m.onnx.TypeProto.fromObject(o.typeProtos[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.floats=[],d.ints=[],d.strings=[],d.tensors=[],d.graphs=[],d.typeProtos=[],d.sparseTensors=[]),u.defaults){if(d.name="",d.f=0,g.Long){var y=new g.Long(0,0,!1);d.i=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else d.i=u.longs===String?"0":0;u.bytes===String?d.s="":(d.s=[],u.bytes!==Array&&(d.s=g.newBuffer(d.s))),d.t=null,d.g=null,d.docString="",d.tp=null,d.type=u.enums===String?"UNDEFINED":0,d.refAttrName="",d.sparseTensor=null}if(o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.f!=null&&o.hasOwnProperty("f")&&(d.f=u.json&&!isFinite(o.f)?String(o.f):o.f),o.i!=null&&o.hasOwnProperty("i")&&(typeof o.i=="number"?d.i=u.longs===String?String(o.i):o.i:d.i=u.longs===String?g.Long.prototype.toString.call(o.i):u.longs===Number?new g.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber():o.i),o.s!=null&&o.hasOwnProperty("s")&&(d.s=u.bytes===String?g.base64.encode(o.s,0,o.s.length):u.bytes===Array?Array.prototype.slice.call(o.s):o.s),o.t!=null&&o.hasOwnProperty("t")&&(d.t=m.onnx.TensorProto.toObject(o.t,u)),o.g!=null&&o.hasOwnProperty("g")&&(d.g=m.onnx.GraphProto.toObject(o.g,u)),o.floats&&o.floats.length){d.floats=[];for(var w=0;w<o.floats.length;++w)d.floats[w]=u.json&&!isFinite(o.floats[w])?String(o.floats[w]):o.floats[w]}if(o.ints&&o.ints.length)for(d.ints=[],w=0;w<o.ints.length;++w)typeof o.ints[w]=="number"?d.ints[w]=u.longs===String?String(o.ints[w]):o.ints[w]:d.ints[w]=u.longs===String?g.Long.prototype.toString.call(o.ints[w]):u.longs===Number?new g.LongBits(o.ints[w].low>>>0,o.ints[w].high>>>0).toNumber():o.ints[w];if(o.strings&&o.strings.length)for(d.strings=[],w=0;w<o.strings.length;++w)d.strings[w]=u.bytes===String?g.base64.encode(o.strings[w],0,o.strings[w].length):u.bytes===Array?Array.prototype.slice.call(o.strings[w]):o.strings[w];if(o.tensors&&o.tensors.length)for(d.tensors=[],w=0;w<o.tensors.length;++w)d.tensors[w]=m.onnx.TensorProto.toObject(o.tensors[w],u);if(o.graphs&&o.graphs.length)for(d.graphs=[],w=0;w<o.graphs.length;++w)d.graphs[w]=m.onnx.GraphProto.toObject(o.graphs[w],u);if(o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.tp!=null&&o.hasOwnProperty("tp")&&(d.tp=m.onnx.TypeProto.toObject(o.tp,u)),o.typeProtos&&o.typeProtos.length)for(d.typeProtos=[],w=0;w<o.typeProtos.length;++w)d.typeProtos[w]=m.onnx.TypeProto.toObject(o.typeProtos[w],u);if(o.type!=null&&o.hasOwnProperty("type")&&(d.type=u.enums===String?m.onnx.AttributeProto.AttributeType[o.type]===void 0?o.type:m.onnx.AttributeProto.AttributeType[o.type]:o.type),o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&(d.refAttrName=o.refAttrName),o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")&&(d.sparseTensor=m.onnx.SparseTensorProto.toObject(o.sparseTensor,u)),o.sparseTensors&&o.sparseTensors.length)for(d.sparseTensors=[],w=0;w<o.sparseTensors.length;++w)d.sparseTensors[w]=m.onnx.SparseTensorProto.toObject(o.sparseTensors[w],u);return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.AttributeProto"},l.AttributeType=function(){var o={},u=Object.create(o);return u[o[0]="UNDEFINED"]=0,u[o[1]="FLOAT"]=1,u[o[2]="INT"]=2,u[o[3]="STRING"]=3,u[o[4]="TENSOR"]=4,u[o[5]="GRAPH"]=5,u[o[11]="SPARSE_TENSOR"]=11,u[o[13]="TYPE_PROTO"]=13,u[o[6]="FLOATS"]=6,u[o[7]="INTS"]=7,u[o[8]="STRINGS"]=8,u[o[9]="TENSORS"]=9,u[o[10]="GRAPHS"]=10,u[o[12]="SPARSE_TENSORS"]=12,u[o[14]="TYPE_PROTOS"]=14,u}(),l}(),s.ValueInfoProto=function(){function l(o){if(o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.name="",l.prototype.type=null,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,u){return u||(u=b.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(10).string(o.name),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&m.onnx.TypeProto.encode(o.type,u.uint32(18).fork()).ldelim(),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(26).string(o.docString),u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.ValueInfoProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.name=o.string();break;case 2:y.type=m.onnx.TypeProto.decode(o,o.uint32());break;case 3:y.docString=o.string();break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.type!=null&&o.hasOwnProperty("type")){var u=m.onnx.TypeProto.verify(o.type);if(u)return"type."+u}return o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof m.onnx.ValueInfoProto)return o;var u=new m.onnx.ValueInfoProto;if(o.name!=null&&(u.name=String(o.name)),o.type!=null){if(typeof o.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");u.type=m.onnx.TypeProto.fromObject(o.type)}return o.docString!=null&&(u.docString=String(o.docString)),u},l.toObject=function(o,u){u||(u={});var d={};return u.defaults&&(d.name="",d.type=null,d.docString=""),o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.type!=null&&o.hasOwnProperty("type")&&(d.type=m.onnx.TypeProto.toObject(o.type,u)),o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ValueInfoProto"},l}(),s.NodeProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.input=g.emptyArray,l.prototype.output=g.emptyArray,l.prototype.name="",l.prototype.opType="",l.prototype.domain="",l.prototype.attribute=g.emptyArray,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.input!=null&&o.input.length)for(var d=0;d<o.input.length;++d)u.uint32(10).string(o.input[d]);if(o.output!=null&&o.output.length)for(d=0;d<o.output.length;++d)u.uint32(18).string(o.output[d]);if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(26).string(o.name),o.opType!=null&&Object.hasOwnProperty.call(o,"opType")&&u.uint32(34).string(o.opType),o.attribute!=null&&o.attribute.length)for(d=0;d<o.attribute.length;++d)m.onnx.AttributeProto.encode(o.attribute[d],u.uint32(42).fork()).ldelim();return o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(50).string(o.docString),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&u.uint32(58).string(o.domain),u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.NodeProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.input&&y.input.length||(y.input=[]),y.input.push(o.string());break;case 2:y.output&&y.output.length||(y.output=[]),y.output.push(o.string());break;case 3:y.name=o.string();break;case 4:y.opType=o.string();break;case 7:y.domain=o.string();break;case 5:y.attribute&&y.attribute.length||(y.attribute=[]),y.attribute.push(m.onnx.AttributeProto.decode(o,o.uint32()));break;case 6:y.docString=o.string();break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var u=0;u<o.input.length;++u)if(!g.isString(o.input[u]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(u=0;u<o.output.length;++u)if(!g.isString(o.output[u]))return"output: string[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.opType!=null&&o.hasOwnProperty("opType")&&!g.isString(o.opType))return"opType: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!g.isString(o.domain))return"domain: string expected";if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(u=0;u<o.attribute.length;++u){var d=m.onnx.AttributeProto.verify(o.attribute[u]);if(d)return"attribute."+d}}return o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof m.onnx.NodeProto)return o;var u=new m.onnx.NodeProto;if(o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.NodeProto.input: array expected");u.input=[];for(var d=0;d<o.input.length;++d)u.input[d]=String(o.input[d])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.NodeProto.output: array expected");for(u.output=[],d=0;d<o.output.length;++d)u.output[d]=String(o.output[d])}if(o.name!=null&&(u.name=String(o.name)),o.opType!=null&&(u.opType=String(o.opType)),o.domain!=null&&(u.domain=String(o.domain)),o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(u.attribute=[],d=0;d<o.attribute.length;++d){if(typeof o.attribute[d]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");u.attribute[d]=m.onnx.AttributeProto.fromObject(o.attribute[d])}}return o.docString!=null&&(u.docString=String(o.docString)),u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.input=[],d.output=[],d.attribute=[]),u.defaults&&(d.name="",d.opType="",d.docString="",d.domain=""),o.input&&o.input.length){d.input=[];for(var y=0;y<o.input.length;++y)d.input[y]=o.input[y]}if(o.output&&o.output.length)for(d.output=[],y=0;y<o.output.length;++y)d.output[y]=o.output[y];if(o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.opType!=null&&o.hasOwnProperty("opType")&&(d.opType=o.opType),o.attribute&&o.attribute.length)for(d.attribute=[],y=0;y<o.attribute.length;++y)d.attribute[y]=m.onnx.AttributeProto.toObject(o.attribute[y],u);return o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.domain!=null&&o.hasOwnProperty("domain")&&(d.domain=o.domain),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.NodeProto"},l}(),s.TrainingInfoProto=function(){function l(o){if(this.initializationBinding=[],this.updateBinding=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.initialization=null,l.prototype.algorithm=null,l.prototype.initializationBinding=g.emptyArray,l.prototype.updateBinding=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.initialization!=null&&Object.hasOwnProperty.call(o,"initialization")&&m.onnx.GraphProto.encode(o.initialization,u.uint32(10).fork()).ldelim(),o.algorithm!=null&&Object.hasOwnProperty.call(o,"algorithm")&&m.onnx.GraphProto.encode(o.algorithm,u.uint32(18).fork()).ldelim(),o.initializationBinding!=null&&o.initializationBinding.length)for(var d=0;d<o.initializationBinding.length;++d)m.onnx.StringStringEntryProto.encode(o.initializationBinding[d],u.uint32(26).fork()).ldelim();if(o.updateBinding!=null&&o.updateBinding.length)for(d=0;d<o.updateBinding.length;++d)m.onnx.StringStringEntryProto.encode(o.updateBinding[d],u.uint32(34).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.TrainingInfoProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.initialization=m.onnx.GraphProto.decode(o,o.uint32());break;case 2:y.algorithm=m.onnx.GraphProto.decode(o,o.uint32());break;case 3:y.initializationBinding&&y.initializationBinding.length||(y.initializationBinding=[]),y.initializationBinding.push(m.onnx.StringStringEntryProto.decode(o,o.uint32()));break;case 4:y.updateBinding&&y.updateBinding.length||(y.updateBinding=[]),y.updateBinding.push(m.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.initialization!=null&&o.hasOwnProperty("initialization")&&(d=m.onnx.GraphProto.verify(o.initialization)))return"initialization."+d;if(o.algorithm!=null&&o.hasOwnProperty("algorithm")&&(d=m.onnx.GraphProto.verify(o.algorithm)))return"algorithm."+d;if(o.initializationBinding!=null&&o.hasOwnProperty("initializationBinding")){if(!Array.isArray(o.initializationBinding))return"initializationBinding: array expected";for(var u=0;u<o.initializationBinding.length;++u)if(d=m.onnx.StringStringEntryProto.verify(o.initializationBinding[u]))return"initializationBinding."+d}if(o.updateBinding!=null&&o.hasOwnProperty("updateBinding")){if(!Array.isArray(o.updateBinding))return"updateBinding: array expected";for(u=0;u<o.updateBinding.length;++u){var d;if(d=m.onnx.StringStringEntryProto.verify(o.updateBinding[u]))return"updateBinding."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.TrainingInfoProto)return o;var u=new m.onnx.TrainingInfoProto;if(o.initialization!=null){if(typeof o.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");u.initialization=m.onnx.GraphProto.fromObject(o.initialization)}if(o.algorithm!=null){if(typeof o.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");u.algorithm=m.onnx.GraphProto.fromObject(o.algorithm)}if(o.initializationBinding){if(!Array.isArray(o.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");u.initializationBinding=[];for(var d=0;d<o.initializationBinding.length;++d){if(typeof o.initializationBinding[d]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");u.initializationBinding[d]=m.onnx.StringStringEntryProto.fromObject(o.initializationBinding[d])}}if(o.updateBinding){if(!Array.isArray(o.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(u.updateBinding=[],d=0;d<o.updateBinding.length;++d){if(typeof o.updateBinding[d]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");u.updateBinding[d]=m.onnx.StringStringEntryProto.fromObject(o.updateBinding[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.initializationBinding=[],d.updateBinding=[]),u.defaults&&(d.initialization=null,d.algorithm=null),o.initialization!=null&&o.hasOwnProperty("initialization")&&(d.initialization=m.onnx.GraphProto.toObject(o.initialization,u)),o.algorithm!=null&&o.hasOwnProperty("algorithm")&&(d.algorithm=m.onnx.GraphProto.toObject(o.algorithm,u)),o.initializationBinding&&o.initializationBinding.length){d.initializationBinding=[];for(var y=0;y<o.initializationBinding.length;++y)d.initializationBinding[y]=m.onnx.StringStringEntryProto.toObject(o.initializationBinding[y],u)}if(o.updateBinding&&o.updateBinding.length)for(d.updateBinding=[],y=0;y<o.updateBinding.length;++y)d.updateBinding[y]=m.onnx.StringStringEntryProto.toObject(o.updateBinding[y],u);return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TrainingInfoProto"},l}(),s.ModelProto=function(){function l(o){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.irVersion=g.Long?g.Long.fromBits(0,0,!1):0,l.prototype.opsetImport=g.emptyArray,l.prototype.producerName="",l.prototype.producerVersion="",l.prototype.domain="",l.prototype.modelVersion=g.Long?g.Long.fromBits(0,0,!1):0,l.prototype.docString="",l.prototype.graph=null,l.prototype.metadataProps=g.emptyArray,l.prototype.trainingInfo=g.emptyArray,l.prototype.functions=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.irVersion!=null&&Object.hasOwnProperty.call(o,"irVersion")&&u.uint32(8).int64(o.irVersion),o.producerName!=null&&Object.hasOwnProperty.call(o,"producerName")&&u.uint32(18).string(o.producerName),o.producerVersion!=null&&Object.hasOwnProperty.call(o,"producerVersion")&&u.uint32(26).string(o.producerVersion),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&u.uint32(34).string(o.domain),o.modelVersion!=null&&Object.hasOwnProperty.call(o,"modelVersion")&&u.uint32(40).int64(o.modelVersion),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(50).string(o.docString),o.graph!=null&&Object.hasOwnProperty.call(o,"graph")&&m.onnx.GraphProto.encode(o.graph,u.uint32(58).fork()).ldelim(),o.opsetImport!=null&&o.opsetImport.length)for(var d=0;d<o.opsetImport.length;++d)m.onnx.OperatorSetIdProto.encode(o.opsetImport[d],u.uint32(66).fork()).ldelim();if(o.metadataProps!=null&&o.metadataProps.length)for(d=0;d<o.metadataProps.length;++d)m.onnx.StringStringEntryProto.encode(o.metadataProps[d],u.uint32(114).fork()).ldelim();if(o.trainingInfo!=null&&o.trainingInfo.length)for(d=0;d<o.trainingInfo.length;++d)m.onnx.TrainingInfoProto.encode(o.trainingInfo[d],u.uint32(162).fork()).ldelim();if(o.functions!=null&&o.functions.length)for(d=0;d<o.functions.length;++d)m.onnx.FunctionProto.encode(o.functions[d],u.uint32(202).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.ModelProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.irVersion=o.int64();break;case 8:y.opsetImport&&y.opsetImport.length||(y.opsetImport=[]),y.opsetImport.push(m.onnx.OperatorSetIdProto.decode(o,o.uint32()));break;case 2:y.producerName=o.string();break;case 3:y.producerVersion=o.string();break;case 4:y.domain=o.string();break;case 5:y.modelVersion=o.int64();break;case 6:y.docString=o.string();break;case 7:y.graph=m.onnx.GraphProto.decode(o,o.uint32());break;case 14:y.metadataProps&&y.metadataProps.length||(y.metadataProps=[]),y.metadataProps.push(m.onnx.StringStringEntryProto.decode(o,o.uint32()));break;case 20:y.trainingInfo&&y.trainingInfo.length||(y.trainingInfo=[]),y.trainingInfo.push(m.onnx.TrainingInfoProto.decode(o,o.uint32()));break;case 25:y.functions&&y.functions.length||(y.functions=[]),y.functions.push(m.onnx.FunctionProto.decode(o,o.uint32()));break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&!(g.isInteger(o.irVersion)||o.irVersion&&g.isInteger(o.irVersion.low)&&g.isInteger(o.irVersion.high)))return"irVersion: integer|Long expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var u=0;u<o.opsetImport.length;++u)if(d=m.onnx.OperatorSetIdProto.verify(o.opsetImport[u]))return"opsetImport."+d}if(o.producerName!=null&&o.hasOwnProperty("producerName")&&!g.isString(o.producerName))return"producerName: string expected";if(o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&!g.isString(o.producerVersion))return"producerVersion: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!g.isString(o.domain))return"domain: string expected";if(o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&!(g.isInteger(o.modelVersion)||o.modelVersion&&g.isInteger(o.modelVersion.low)&&g.isInteger(o.modelVersion.high)))return"modelVersion: integer|Long expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString))return"docString: string expected";if(o.graph!=null&&o.hasOwnProperty("graph")&&(d=m.onnx.GraphProto.verify(o.graph)))return"graph."+d;if(o.metadataProps!=null&&o.hasOwnProperty("metadataProps")){if(!Array.isArray(o.metadataProps))return"metadataProps: array expected";for(u=0;u<o.metadataProps.length;++u)if(d=m.onnx.StringStringEntryProto.verify(o.metadataProps[u]))return"metadataProps."+d}if(o.trainingInfo!=null&&o.hasOwnProperty("trainingInfo")){if(!Array.isArray(o.trainingInfo))return"trainingInfo: array expected";for(u=0;u<o.trainingInfo.length;++u)if(d=m.onnx.TrainingInfoProto.verify(o.trainingInfo[u]))return"trainingInfo."+d}if(o.functions!=null&&o.hasOwnProperty("functions")){if(!Array.isArray(o.functions))return"functions: array expected";for(u=0;u<o.functions.length;++u){var d;if(d=m.onnx.FunctionProto.verify(o.functions[u]))return"functions."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.ModelProto)return o;var u=new m.onnx.ModelProto;if(o.irVersion!=null&&(g.Long?(u.irVersion=g.Long.fromValue(o.irVersion)).unsigned=!1:typeof o.irVersion=="string"?u.irVersion=parseInt(o.irVersion,10):typeof o.irVersion=="number"?u.irVersion=o.irVersion:typeof o.irVersion=="object"&&(u.irVersion=new g.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber())),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");u.opsetImport=[];for(var d=0;d<o.opsetImport.length;++d){if(typeof o.opsetImport[d]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");u.opsetImport[d]=m.onnx.OperatorSetIdProto.fromObject(o.opsetImport[d])}}if(o.producerName!=null&&(u.producerName=String(o.producerName)),o.producerVersion!=null&&(u.producerVersion=String(o.producerVersion)),o.domain!=null&&(u.domain=String(o.domain)),o.modelVersion!=null&&(g.Long?(u.modelVersion=g.Long.fromValue(o.modelVersion)).unsigned=!1:typeof o.modelVersion=="string"?u.modelVersion=parseInt(o.modelVersion,10):typeof o.modelVersion=="number"?u.modelVersion=o.modelVersion:typeof o.modelVersion=="object"&&(u.modelVersion=new g.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber())),o.docString!=null&&(u.docString=String(o.docString)),o.graph!=null){if(typeof o.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");u.graph=m.onnx.GraphProto.fromObject(o.graph)}if(o.metadataProps){if(!Array.isArray(o.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(u.metadataProps=[],d=0;d<o.metadataProps.length;++d){if(typeof o.metadataProps[d]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");u.metadataProps[d]=m.onnx.StringStringEntryProto.fromObject(o.metadataProps[d])}}if(o.trainingInfo){if(!Array.isArray(o.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(u.trainingInfo=[],d=0;d<o.trainingInfo.length;++d){if(typeof o.trainingInfo[d]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");u.trainingInfo[d]=m.onnx.TrainingInfoProto.fromObject(o.trainingInfo[d])}}if(o.functions){if(!Array.isArray(o.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(u.functions=[],d=0;d<o.functions.length;++d){if(typeof o.functions[d]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");u.functions[d]=m.onnx.FunctionProto.fromObject(o.functions[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.opsetImport=[],d.metadataProps=[],d.trainingInfo=[],d.functions=[]),u.defaults){if(g.Long){var y=new g.Long(0,0,!1);d.irVersion=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else d.irVersion=u.longs===String?"0":0;d.producerName="",d.producerVersion="",d.domain="",g.Long?(y=new g.Long(0,0,!1),d.modelVersion=u.longs===String?y.toString():u.longs===Number?y.toNumber():y):d.modelVersion=u.longs===String?"0":0,d.docString="",d.graph=null}if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&(typeof o.irVersion=="number"?d.irVersion=u.longs===String?String(o.irVersion):o.irVersion:d.irVersion=u.longs===String?g.Long.prototype.toString.call(o.irVersion):u.longs===Number?new g.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber():o.irVersion),o.producerName!=null&&o.hasOwnProperty("producerName")&&(d.producerName=o.producerName),o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&(d.producerVersion=o.producerVersion),o.domain!=null&&o.hasOwnProperty("domain")&&(d.domain=o.domain),o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&(typeof o.modelVersion=="number"?d.modelVersion=u.longs===String?String(o.modelVersion):o.modelVersion:d.modelVersion=u.longs===String?g.Long.prototype.toString.call(o.modelVersion):u.longs===Number?new g.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber():o.modelVersion),o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.graph!=null&&o.hasOwnProperty("graph")&&(d.graph=m.onnx.GraphProto.toObject(o.graph,u)),o.opsetImport&&o.opsetImport.length){d.opsetImport=[];for(var w=0;w<o.opsetImport.length;++w)d.opsetImport[w]=m.onnx.OperatorSetIdProto.toObject(o.opsetImport[w],u)}if(o.metadataProps&&o.metadataProps.length)for(d.metadataProps=[],w=0;w<o.metadataProps.length;++w)d.metadataProps[w]=m.onnx.StringStringEntryProto.toObject(o.metadataProps[w],u);if(o.trainingInfo&&o.trainingInfo.length)for(d.trainingInfo=[],w=0;w<o.trainingInfo.length;++w)d.trainingInfo[w]=m.onnx.TrainingInfoProto.toObject(o.trainingInfo[w],u);if(o.functions&&o.functions.length)for(d.functions=[],w=0;w<o.functions.length;++w)d.functions[w]=m.onnx.FunctionProto.toObject(o.functions[w],u);return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ModelProto"},l}(),s.StringStringEntryProto=function(){function l(o){if(o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.key="",l.prototype.value="",l.create=function(o){return new l(o)},l.encode=function(o,u){return u||(u=b.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&u.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&u.uint32(18).string(o.value),u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.StringStringEntryProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.key=o.string();break;case 2:y.value=o.string();break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.key!=null&&o.hasOwnProperty("key")&&!g.isString(o.key)?"key: string expected":o.value!=null&&o.hasOwnProperty("value")&&!g.isString(o.value)?"value: string expected":null},l.fromObject=function(o){if(o instanceof m.onnx.StringStringEntryProto)return o;var u=new m.onnx.StringStringEntryProto;return o.key!=null&&(u.key=String(o.key)),o.value!=null&&(u.value=String(o.value)),u},l.toObject=function(o,u){u||(u={});var d={};return u.defaults&&(d.key="",d.value=""),o.key!=null&&o.hasOwnProperty("key")&&(d.key=o.key),o.value!=null&&o.hasOwnProperty("value")&&(d.value=o.value),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.StringStringEntryProto"},l}(),s.TensorAnnotation=function(){function l(o){if(this.quantParameterTensorNames=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.tensorName="",l.prototype.quantParameterTensorNames=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.tensorName!=null&&Object.hasOwnProperty.call(o,"tensorName")&&u.uint32(10).string(o.tensorName),o.quantParameterTensorNames!=null&&o.quantParameterTensorNames.length)for(var d=0;d<o.quantParameterTensorNames.length;++d)m.onnx.StringStringEntryProto.encode(o.quantParameterTensorNames[d],u.uint32(18).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.TensorAnnotation;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.tensorName=o.string();break;case 2:y.quantParameterTensorNames&&y.quantParameterTensorNames.length||(y.quantParameterTensorNames=[]),y.quantParameterTensorNames.push(m.onnx.StringStringEntryProto.decode(o,o.uint32()));break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.tensorName!=null&&o.hasOwnProperty("tensorName")&&!g.isString(o.tensorName))return"tensorName: string expected";if(o.quantParameterTensorNames!=null&&o.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(o.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var u=0;u<o.quantParameterTensorNames.length;++u){var d=m.onnx.StringStringEntryProto.verify(o.quantParameterTensorNames[u]);if(d)return"quantParameterTensorNames."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.TensorAnnotation)return o;var u=new m.onnx.TensorAnnotation;if(o.tensorName!=null&&(u.tensorName=String(o.tensorName)),o.quantParameterTensorNames){if(!Array.isArray(o.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");u.quantParameterTensorNames=[];for(var d=0;d<o.quantParameterTensorNames.length;++d){if(typeof o.quantParameterTensorNames[d]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");u.quantParameterTensorNames[d]=m.onnx.StringStringEntryProto.fromObject(o.quantParameterTensorNames[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.quantParameterTensorNames=[]),u.defaults&&(d.tensorName=""),o.tensorName!=null&&o.hasOwnProperty("tensorName")&&(d.tensorName=o.tensorName),o.quantParameterTensorNames&&o.quantParameterTensorNames.length){d.quantParameterTensorNames=[];for(var y=0;y<o.quantParameterTensorNames.length;++y)d.quantParameterTensorNames[y]=m.onnx.StringStringEntryProto.toObject(o.quantParameterTensorNames[y],u)}return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorAnnotation"},l}(),s.GraphProto=function(){function l(o){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.node=g.emptyArray,l.prototype.name="",l.prototype.initializer=g.emptyArray,l.prototype.sparseInitializer=g.emptyArray,l.prototype.docString="",l.prototype.input=g.emptyArray,l.prototype.output=g.emptyArray,l.prototype.valueInfo=g.emptyArray,l.prototype.quantizationAnnotation=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.node!=null&&o.node.length)for(var d=0;d<o.node.length;++d)m.onnx.NodeProto.encode(o.node[d],u.uint32(10).fork()).ldelim();if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(18).string(o.name),o.initializer!=null&&o.initializer.length)for(d=0;d<o.initializer.length;++d)m.onnx.TensorProto.encode(o.initializer[d],u.uint32(42).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(82).string(o.docString),o.input!=null&&o.input.length)for(d=0;d<o.input.length;++d)m.onnx.ValueInfoProto.encode(o.input[d],u.uint32(90).fork()).ldelim();if(o.output!=null&&o.output.length)for(d=0;d<o.output.length;++d)m.onnx.ValueInfoProto.encode(o.output[d],u.uint32(98).fork()).ldelim();if(o.valueInfo!=null&&o.valueInfo.length)for(d=0;d<o.valueInfo.length;++d)m.onnx.ValueInfoProto.encode(o.valueInfo[d],u.uint32(106).fork()).ldelim();if(o.quantizationAnnotation!=null&&o.quantizationAnnotation.length)for(d=0;d<o.quantizationAnnotation.length;++d)m.onnx.TensorAnnotation.encode(o.quantizationAnnotation[d],u.uint32(114).fork()).ldelim();if(o.sparseInitializer!=null&&o.sparseInitializer.length)for(d=0;d<o.sparseInitializer.length;++d)m.onnx.SparseTensorProto.encode(o.sparseInitializer[d],u.uint32(122).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.GraphProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.node&&y.node.length||(y.node=[]),y.node.push(m.onnx.NodeProto.decode(o,o.uint32()));break;case 2:y.name=o.string();break;case 5:y.initializer&&y.initializer.length||(y.initializer=[]),y.initializer.push(m.onnx.TensorProto.decode(o,o.uint32()));break;case 15:y.sparseInitializer&&y.sparseInitializer.length||(y.sparseInitializer=[]),y.sparseInitializer.push(m.onnx.SparseTensorProto.decode(o,o.uint32()));break;case 10:y.docString=o.string();break;case 11:y.input&&y.input.length||(y.input=[]),y.input.push(m.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 12:y.output&&y.output.length||(y.output=[]),y.output.push(m.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 13:y.valueInfo&&y.valueInfo.length||(y.valueInfo=[]),y.valueInfo.push(m.onnx.ValueInfoProto.decode(o,o.uint32()));break;case 14:y.quantizationAnnotation&&y.quantizationAnnotation.length||(y.quantizationAnnotation=[]),y.quantizationAnnotation.push(m.onnx.TensorAnnotation.decode(o,o.uint32()));break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var u=0;u<o.node.length;++u)if(d=m.onnx.NodeProto.verify(o.node[u]))return"node."+d}if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.initializer!=null&&o.hasOwnProperty("initializer")){if(!Array.isArray(o.initializer))return"initializer: array expected";for(u=0;u<o.initializer.length;++u)if(d=m.onnx.TensorProto.verify(o.initializer[u]))return"initializer."+d}if(o.sparseInitializer!=null&&o.hasOwnProperty("sparseInitializer")){if(!Array.isArray(o.sparseInitializer))return"sparseInitializer: array expected";for(u=0;u<o.sparseInitializer.length;++u)if(d=m.onnx.SparseTensorProto.verify(o.sparseInitializer[u]))return"sparseInitializer."+d}if(o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString))return"docString: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(u=0;u<o.input.length;++u)if(d=m.onnx.ValueInfoProto.verify(o.input[u]))return"input."+d}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(u=0;u<o.output.length;++u)if(d=m.onnx.ValueInfoProto.verify(o.output[u]))return"output."+d}if(o.valueInfo!=null&&o.hasOwnProperty("valueInfo")){if(!Array.isArray(o.valueInfo))return"valueInfo: array expected";for(u=0;u<o.valueInfo.length;++u)if(d=m.onnx.ValueInfoProto.verify(o.valueInfo[u]))return"valueInfo."+d}if(o.quantizationAnnotation!=null&&o.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(o.quantizationAnnotation))return"quantizationAnnotation: array expected";for(u=0;u<o.quantizationAnnotation.length;++u){var d;if(d=m.onnx.TensorAnnotation.verify(o.quantizationAnnotation[u]))return"quantizationAnnotation."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.GraphProto)return o;var u=new m.onnx.GraphProto;if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.GraphProto.node: array expected");u.node=[];for(var d=0;d<o.node.length;++d){if(typeof o.node[d]!="object")throw TypeError(".onnx.GraphProto.node: object expected");u.node[d]=m.onnx.NodeProto.fromObject(o.node[d])}}if(o.name!=null&&(u.name=String(o.name)),o.initializer){if(!Array.isArray(o.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(u.initializer=[],d=0;d<o.initializer.length;++d){if(typeof o.initializer[d]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");u.initializer[d]=m.onnx.TensorProto.fromObject(o.initializer[d])}}if(o.sparseInitializer){if(!Array.isArray(o.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(u.sparseInitializer=[],d=0;d<o.sparseInitializer.length;++d){if(typeof o.sparseInitializer[d]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");u.sparseInitializer[d]=m.onnx.SparseTensorProto.fromObject(o.sparseInitializer[d])}}if(o.docString!=null&&(u.docString=String(o.docString)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.GraphProto.input: array expected");for(u.input=[],d=0;d<o.input.length;++d){if(typeof o.input[d]!="object")throw TypeError(".onnx.GraphProto.input: object expected");u.input[d]=m.onnx.ValueInfoProto.fromObject(o.input[d])}}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.GraphProto.output: array expected");for(u.output=[],d=0;d<o.output.length;++d){if(typeof o.output[d]!="object")throw TypeError(".onnx.GraphProto.output: object expected");u.output[d]=m.onnx.ValueInfoProto.fromObject(o.output[d])}}if(o.valueInfo){if(!Array.isArray(o.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(u.valueInfo=[],d=0;d<o.valueInfo.length;++d){if(typeof o.valueInfo[d]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");u.valueInfo[d]=m.onnx.ValueInfoProto.fromObject(o.valueInfo[d])}}if(o.quantizationAnnotation){if(!Array.isArray(o.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(u.quantizationAnnotation=[],d=0;d<o.quantizationAnnotation.length;++d){if(typeof o.quantizationAnnotation[d]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");u.quantizationAnnotation[d]=m.onnx.TensorAnnotation.fromObject(o.quantizationAnnotation[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.node=[],d.initializer=[],d.input=[],d.output=[],d.valueInfo=[],d.quantizationAnnotation=[],d.sparseInitializer=[]),u.defaults&&(d.name="",d.docString=""),o.node&&o.node.length){d.node=[];for(var y=0;y<o.node.length;++y)d.node[y]=m.onnx.NodeProto.toObject(o.node[y],u)}if(o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.initializer&&o.initializer.length)for(d.initializer=[],y=0;y<o.initializer.length;++y)d.initializer[y]=m.onnx.TensorProto.toObject(o.initializer[y],u);if(o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.input&&o.input.length)for(d.input=[],y=0;y<o.input.length;++y)d.input[y]=m.onnx.ValueInfoProto.toObject(o.input[y],u);if(o.output&&o.output.length)for(d.output=[],y=0;y<o.output.length;++y)d.output[y]=m.onnx.ValueInfoProto.toObject(o.output[y],u);if(o.valueInfo&&o.valueInfo.length)for(d.valueInfo=[],y=0;y<o.valueInfo.length;++y)d.valueInfo[y]=m.onnx.ValueInfoProto.toObject(o.valueInfo[y],u);if(o.quantizationAnnotation&&o.quantizationAnnotation.length)for(d.quantizationAnnotation=[],y=0;y<o.quantizationAnnotation.length;++y)d.quantizationAnnotation[y]=m.onnx.TensorAnnotation.toObject(o.quantizationAnnotation[y],u);if(o.sparseInitializer&&o.sparseInitializer.length)for(d.sparseInitializer=[],y=0;y<o.sparseInitializer.length;++y)d.sparseInitializer[y]=m.onnx.SparseTensorProto.toObject(o.sparseInitializer[y],u);return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.GraphProto"},l}(),s.TensorProto=function(){function l(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.dims=g.emptyArray,l.prototype.dataType=0,l.prototype.segment=null,l.prototype.floatData=g.emptyArray,l.prototype.int32Data=g.emptyArray,l.prototype.stringData=g.emptyArray,l.prototype.int64Data=g.emptyArray,l.prototype.name="",l.prototype.docString="",l.prototype.rawData=g.newBuffer([]),l.prototype.externalData=g.emptyArray,l.prototype.dataLocation=0,l.prototype.doubleData=g.emptyArray,l.prototype.uint64Data=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.dims!=null&&o.dims.length){u.uint32(10).fork();for(var d=0;d<o.dims.length;++d)u.int64(o.dims[d]);u.ldelim()}if(o.dataType!=null&&Object.hasOwnProperty.call(o,"dataType")&&u.uint32(16).int32(o.dataType),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&m.onnx.TensorProto.Segment.encode(o.segment,u.uint32(26).fork()).ldelim(),o.floatData!=null&&o.floatData.length){for(u.uint32(34).fork(),d=0;d<o.floatData.length;++d)u.float(o.floatData[d]);u.ldelim()}if(o.int32Data!=null&&o.int32Data.length){for(u.uint32(42).fork(),d=0;d<o.int32Data.length;++d)u.int32(o.int32Data[d]);u.ldelim()}if(o.stringData!=null&&o.stringData.length)for(d=0;d<o.stringData.length;++d)u.uint32(50).bytes(o.stringData[d]);if(o.int64Data!=null&&o.int64Data.length){for(u.uint32(58).fork(),d=0;d<o.int64Data.length;++d)u.int64(o.int64Data[d]);u.ldelim()}if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(66).string(o.name),o.rawData!=null&&Object.hasOwnProperty.call(o,"rawData")&&u.uint32(74).bytes(o.rawData),o.doubleData!=null&&o.doubleData.length){for(u.uint32(82).fork(),d=0;d<o.doubleData.length;++d)u.double(o.doubleData[d]);u.ldelim()}if(o.uint64Data!=null&&o.uint64Data.length){for(u.uint32(90).fork(),d=0;d<o.uint64Data.length;++d)u.uint64(o.uint64Data[d]);u.ldelim()}if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(98).string(o.docString),o.externalData!=null&&o.externalData.length)for(d=0;d<o.externalData.length;++d)m.onnx.StringStringEntryProto.encode(o.externalData[d],u.uint32(106).fork()).ldelim();return o.dataLocation!=null&&Object.hasOwnProperty.call(o,"dataLocation")&&u.uint32(112).int32(o.dataLocation),u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.TensorProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:if(y.dims&&y.dims.length||(y.dims=[]),(7&w)==2)for(var _=o.uint32()+o.pos;o.pos<_;)y.dims.push(o.int64());else y.dims.push(o.int64());break;case 2:y.dataType=o.int32();break;case 3:y.segment=m.onnx.TensorProto.Segment.decode(o,o.uint32());break;case 4:if(y.floatData&&y.floatData.length||(y.floatData=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.floatData.push(o.float());else y.floatData.push(o.float());break;case 5:if(y.int32Data&&y.int32Data.length||(y.int32Data=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.int32Data.push(o.int32());else y.int32Data.push(o.int32());break;case 6:y.stringData&&y.stringData.length||(y.stringData=[]),y.stringData.push(o.bytes());break;case 7:if(y.int64Data&&y.int64Data.length||(y.int64Data=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.int64Data.push(o.int64());else y.int64Data.push(o.int64());break;case 8:y.name=o.string();break;case 12:y.docString=o.string();break;case 9:y.rawData=o.bytes();break;case 13:y.externalData&&y.externalData.length||(y.externalData=[]),y.externalData.push(m.onnx.StringStringEntryProto.decode(o,o.uint32()));break;case 14:y.dataLocation=o.int32();break;case 10:if(y.doubleData&&y.doubleData.length||(y.doubleData=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.doubleData.push(o.double());else y.doubleData.push(o.double());break;case 11:if(y.uint64Data&&y.uint64Data.length||(y.uint64Data=[]),(7&w)==2)for(_=o.uint32()+o.pos;o.pos<_;)y.uint64Data.push(o.uint64());else y.uint64Data.push(o.uint64());break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var u=0;u<o.dims.length;++u)if(!(g.isInteger(o.dims[u])||o.dims[u]&&g.isInteger(o.dims[u].low)&&g.isInteger(o.dims[u].high)))return"dims: integer|Long[] expected"}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&!g.isInteger(o.dataType))return"dataType: integer expected";if(o.segment!=null&&o.hasOwnProperty("segment")&&(d=m.onnx.TensorProto.Segment.verify(o.segment)))return"segment."+d;if(o.floatData!=null&&o.hasOwnProperty("floatData")){if(!Array.isArray(o.floatData))return"floatData: array expected";for(u=0;u<o.floatData.length;++u)if(typeof o.floatData[u]!="number")return"floatData: number[] expected"}if(o.int32Data!=null&&o.hasOwnProperty("int32Data")){if(!Array.isArray(o.int32Data))return"int32Data: array expected";for(u=0;u<o.int32Data.length;++u)if(!g.isInteger(o.int32Data[u]))return"int32Data: integer[] expected"}if(o.stringData!=null&&o.hasOwnProperty("stringData")){if(!Array.isArray(o.stringData))return"stringData: array expected";for(u=0;u<o.stringData.length;++u)if(!(o.stringData[u]&&typeof o.stringData[u].length=="number"||g.isString(o.stringData[u])))return"stringData: buffer[] expected"}if(o.int64Data!=null&&o.hasOwnProperty("int64Data")){if(!Array.isArray(o.int64Data))return"int64Data: array expected";for(u=0;u<o.int64Data.length;++u)if(!(g.isInteger(o.int64Data[u])||o.int64Data[u]&&g.isInteger(o.int64Data[u].low)&&g.isInteger(o.int64Data[u].high)))return"int64Data: integer|Long[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString))return"docString: string expected";if(o.rawData!=null&&o.hasOwnProperty("rawData")&&!(o.rawData&&typeof o.rawData.length=="number"||g.isString(o.rawData)))return"rawData: buffer expected";if(o.externalData!=null&&o.hasOwnProperty("externalData")){if(!Array.isArray(o.externalData))return"externalData: array expected";for(u=0;u<o.externalData.length;++u){var d;if(d=m.onnx.StringStringEntryProto.verify(o.externalData[u]))return"externalData."+d}}if(o.dataLocation!=null&&o.hasOwnProperty("dataLocation"))switch(o.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(o.doubleData!=null&&o.hasOwnProperty("doubleData")){if(!Array.isArray(o.doubleData))return"doubleData: array expected";for(u=0;u<o.doubleData.length;++u)if(typeof o.doubleData[u]!="number")return"doubleData: number[] expected"}if(o.uint64Data!=null&&o.hasOwnProperty("uint64Data")){if(!Array.isArray(o.uint64Data))return"uint64Data: array expected";for(u=0;u<o.uint64Data.length;++u)if(!(g.isInteger(o.uint64Data[u])||o.uint64Data[u]&&g.isInteger(o.uint64Data[u].low)&&g.isInteger(o.uint64Data[u].high)))return"uint64Data: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof m.onnx.TensorProto)return o;var u=new m.onnx.TensorProto;if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.TensorProto.dims: array expected");u.dims=[];for(var d=0;d<o.dims.length;++d)g.Long?(u.dims[d]=g.Long.fromValue(o.dims[d])).unsigned=!1:typeof o.dims[d]=="string"?u.dims[d]=parseInt(o.dims[d],10):typeof o.dims[d]=="number"?u.dims[d]=o.dims[d]:typeof o.dims[d]=="object"&&(u.dims[d]=new g.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber())}if(o.dataType!=null&&(u.dataType=0|o.dataType),o.segment!=null){if(typeof o.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");u.segment=m.onnx.TensorProto.Segment.fromObject(o.segment)}if(o.floatData){if(!Array.isArray(o.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(u.floatData=[],d=0;d<o.floatData.length;++d)u.floatData[d]=Number(o.floatData[d])}if(o.int32Data){if(!Array.isArray(o.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(u.int32Data=[],d=0;d<o.int32Data.length;++d)u.int32Data[d]=0|o.int32Data[d]}if(o.stringData){if(!Array.isArray(o.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(u.stringData=[],d=0;d<o.stringData.length;++d)typeof o.stringData[d]=="string"?g.base64.decode(o.stringData[d],u.stringData[d]=g.newBuffer(g.base64.length(o.stringData[d])),0):o.stringData[d].length>=0&&(u.stringData[d]=o.stringData[d])}if(o.int64Data){if(!Array.isArray(o.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(u.int64Data=[],d=0;d<o.int64Data.length;++d)g.Long?(u.int64Data[d]=g.Long.fromValue(o.int64Data[d])).unsigned=!1:typeof o.int64Data[d]=="string"?u.int64Data[d]=parseInt(o.int64Data[d],10):typeof o.int64Data[d]=="number"?u.int64Data[d]=o.int64Data[d]:typeof o.int64Data[d]=="object"&&(u.int64Data[d]=new g.LongBits(o.int64Data[d].low>>>0,o.int64Data[d].high>>>0).toNumber())}if(o.name!=null&&(u.name=String(o.name)),o.docString!=null&&(u.docString=String(o.docString)),o.rawData!=null&&(typeof o.rawData=="string"?g.base64.decode(o.rawData,u.rawData=g.newBuffer(g.base64.length(o.rawData)),0):o.rawData.length>=0&&(u.rawData=o.rawData)),o.externalData){if(!Array.isArray(o.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(u.externalData=[],d=0;d<o.externalData.length;++d){if(typeof o.externalData[d]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");u.externalData[d]=m.onnx.StringStringEntryProto.fromObject(o.externalData[d])}}switch(o.dataLocation){default:if(typeof o.dataLocation=="number"){u.dataLocation=o.dataLocation;break}break;case"DEFAULT":case 0:u.dataLocation=0;break;case"EXTERNAL":case 1:u.dataLocation=1}if(o.doubleData){if(!Array.isArray(o.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(u.doubleData=[],d=0;d<o.doubleData.length;++d)u.doubleData[d]=Number(o.doubleData[d])}if(o.uint64Data){if(!Array.isArray(o.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(u.uint64Data=[],d=0;d<o.uint64Data.length;++d)g.Long?(u.uint64Data[d]=g.Long.fromValue(o.uint64Data[d])).unsigned=!0:typeof o.uint64Data[d]=="string"?u.uint64Data[d]=parseInt(o.uint64Data[d],10):typeof o.uint64Data[d]=="number"?u.uint64Data[d]=o.uint64Data[d]:typeof o.uint64Data[d]=="object"&&(u.uint64Data[d]=new g.LongBits(o.uint64Data[d].low>>>0,o.uint64Data[d].high>>>0).toNumber(!0))}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dims=[],d.floatData=[],d.int32Data=[],d.stringData=[],d.int64Data=[],d.doubleData=[],d.uint64Data=[],d.externalData=[]),u.defaults&&(d.dataType=0,d.segment=null,d.name="",u.bytes===String?d.rawData="":(d.rawData=[],u.bytes!==Array&&(d.rawData=g.newBuffer(d.rawData))),d.docString="",d.dataLocation=u.enums===String?"DEFAULT":0),o.dims&&o.dims.length){d.dims=[];for(var y=0;y<o.dims.length;++y)typeof o.dims[y]=="number"?d.dims[y]=u.longs===String?String(o.dims[y]):o.dims[y]:d.dims[y]=u.longs===String?g.Long.prototype.toString.call(o.dims[y]):u.longs===Number?new g.LongBits(o.dims[y].low>>>0,o.dims[y].high>>>0).toNumber():o.dims[y]}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&(d.dataType=o.dataType),o.segment!=null&&o.hasOwnProperty("segment")&&(d.segment=m.onnx.TensorProto.Segment.toObject(o.segment,u)),o.floatData&&o.floatData.length)for(d.floatData=[],y=0;y<o.floatData.length;++y)d.floatData[y]=u.json&&!isFinite(o.floatData[y])?String(o.floatData[y]):o.floatData[y];if(o.int32Data&&o.int32Data.length)for(d.int32Data=[],y=0;y<o.int32Data.length;++y)d.int32Data[y]=o.int32Data[y];if(o.stringData&&o.stringData.length)for(d.stringData=[],y=0;y<o.stringData.length;++y)d.stringData[y]=u.bytes===String?g.base64.encode(o.stringData[y],0,o.stringData[y].length):u.bytes===Array?Array.prototype.slice.call(o.stringData[y]):o.stringData[y];if(o.int64Data&&o.int64Data.length)for(d.int64Data=[],y=0;y<o.int64Data.length;++y)typeof o.int64Data[y]=="number"?d.int64Data[y]=u.longs===String?String(o.int64Data[y]):o.int64Data[y]:d.int64Data[y]=u.longs===String?g.Long.prototype.toString.call(o.int64Data[y]):u.longs===Number?new g.LongBits(o.int64Data[y].low>>>0,o.int64Data[y].high>>>0).toNumber():o.int64Data[y];if(o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.rawData!=null&&o.hasOwnProperty("rawData")&&(d.rawData=u.bytes===String?g.base64.encode(o.rawData,0,o.rawData.length):u.bytes===Array?Array.prototype.slice.call(o.rawData):o.rawData),o.doubleData&&o.doubleData.length)for(d.doubleData=[],y=0;y<o.doubleData.length;++y)d.doubleData[y]=u.json&&!isFinite(o.doubleData[y])?String(o.doubleData[y]):o.doubleData[y];if(o.uint64Data&&o.uint64Data.length)for(d.uint64Data=[],y=0;y<o.uint64Data.length;++y)typeof o.uint64Data[y]=="number"?d.uint64Data[y]=u.longs===String?String(o.uint64Data[y]):o.uint64Data[y]:d.uint64Data[y]=u.longs===String?g.Long.prototype.toString.call(o.uint64Data[y]):u.longs===Number?new g.LongBits(o.uint64Data[y].low>>>0,o.uint64Data[y].high>>>0).toNumber(!0):o.uint64Data[y];if(o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.externalData&&o.externalData.length)for(d.externalData=[],y=0;y<o.externalData.length;++y)d.externalData[y]=m.onnx.StringStringEntryProto.toObject(o.externalData[y],u);return o.dataLocation!=null&&o.hasOwnProperty("dataLocation")&&(d.dataLocation=u.enums===String?m.onnx.TensorProto.DataLocation[o.dataLocation]===void 0?o.dataLocation:m.onnx.TensorProto.DataLocation[o.dataLocation]:o.dataLocation),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorProto"},l.DataType=function(){var o={},u=Object.create(o);return u[o[0]="UNDEFINED"]=0,u[o[1]="FLOAT"]=1,u[o[2]="UINT8"]=2,u[o[3]="INT8"]=3,u[o[4]="UINT16"]=4,u[o[5]="INT16"]=5,u[o[6]="INT32"]=6,u[o[7]="INT64"]=7,u[o[8]="STRING"]=8,u[o[9]="BOOL"]=9,u[o[10]="FLOAT16"]=10,u[o[11]="DOUBLE"]=11,u[o[12]="UINT32"]=12,u[o[13]="UINT64"]=13,u[o[14]="COMPLEX64"]=14,u[o[15]="COMPLEX128"]=15,u[o[16]="BFLOAT16"]=16,u[o[17]="FLOAT8E4M3FN"]=17,u[o[18]="FLOAT8E4M3FNUZ"]=18,u[o[19]="FLOAT8E5M2"]=19,u[o[20]="FLOAT8E5M2FNUZ"]=20,u}(),l.Segment=function(){function o(u){if(u)for(var d=Object.keys(u),y=0;y<d.length;++y)u[d[y]]!=null&&(this[d[y]]=u[d[y]])}return o.prototype.begin=g.Long?g.Long.fromBits(0,0,!1):0,o.prototype.end=g.Long?g.Long.fromBits(0,0,!1):0,o.create=function(u){return new o(u)},o.encode=function(u,d){return d||(d=b.create()),u.begin!=null&&Object.hasOwnProperty.call(u,"begin")&&d.uint32(8).int64(u.begin),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&d.uint32(16).int64(u.end),d},o.encodeDelimited=function(u,d){return this.encode(u,d).ldelim()},o.decode=function(u,d){u instanceof f||(u=f.create(u));for(var y=d===void 0?u.len:u.pos+d,w=new m.onnx.TensorProto.Segment;u.pos<y;){var _=u.uint32();switch(_>>>3){case 1:w.begin=u.int64();break;case 2:w.end=u.int64();break;default:u.skipType(7&_)}}return w},o.decodeDelimited=function(u){return u instanceof f||(u=new f(u)),this.decode(u,u.uint32())},o.verify=function(u){return typeof u!="object"||u===null?"object expected":u.begin!=null&&u.hasOwnProperty("begin")&&!(g.isInteger(u.begin)||u.begin&&g.isInteger(u.begin.low)&&g.isInteger(u.begin.high))?"begin: integer|Long expected":u.end!=null&&u.hasOwnProperty("end")&&!(g.isInteger(u.end)||u.end&&g.isInteger(u.end.low)&&g.isInteger(u.end.high))?"end: integer|Long expected":null},o.fromObject=function(u){if(u instanceof m.onnx.TensorProto.Segment)return u;var d=new m.onnx.TensorProto.Segment;return u.begin!=null&&(g.Long?(d.begin=g.Long.fromValue(u.begin)).unsigned=!1:typeof u.begin=="string"?d.begin=parseInt(u.begin,10):typeof u.begin=="number"?d.begin=u.begin:typeof u.begin=="object"&&(d.begin=new g.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber())),u.end!=null&&(g.Long?(d.end=g.Long.fromValue(u.end)).unsigned=!1:typeof u.end=="string"?d.end=parseInt(u.end,10):typeof u.end=="number"?d.end=u.end:typeof u.end=="object"&&(d.end=new g.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber())),d},o.toObject=function(u,d){d||(d={});var y={};if(d.defaults){if(g.Long){var w=new g.Long(0,0,!1);y.begin=d.longs===String?w.toString():d.longs===Number?w.toNumber():w}else y.begin=d.longs===String?"0":0;g.Long?(w=new g.Long(0,0,!1),y.end=d.longs===String?w.toString():d.longs===Number?w.toNumber():w):y.end=d.longs===String?"0":0}return u.begin!=null&&u.hasOwnProperty("begin")&&(typeof u.begin=="number"?y.begin=d.longs===String?String(u.begin):u.begin:y.begin=d.longs===String?g.Long.prototype.toString.call(u.begin):d.longs===Number?new g.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber():u.begin),u.end!=null&&u.hasOwnProperty("end")&&(typeof u.end=="number"?y.end=d.longs===String?String(u.end):u.end:y.end=d.longs===String?g.Long.prototype.toString.call(u.end):d.longs===Number?new g.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber():u.end),y},o.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},o.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TensorProto.Segment"},o}(),l.DataLocation=function(){var o={},u=Object.create(o);return u[o[0]="DEFAULT"]=0,u[o[1]="EXTERNAL"]=1,u}(),l}(),s.SparseTensorProto=function(){function l(o){if(this.dims=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.values=null,l.prototype.indices=null,l.prototype.dims=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.values!=null&&Object.hasOwnProperty.call(o,"values")&&m.onnx.TensorProto.encode(o.values,u.uint32(10).fork()).ldelim(),o.indices!=null&&Object.hasOwnProperty.call(o,"indices")&&m.onnx.TensorProto.encode(o.indices,u.uint32(18).fork()).ldelim(),o.dims!=null&&o.dims.length){u.uint32(26).fork();for(var d=0;d<o.dims.length;++d)u.int64(o.dims[d]);u.ldelim()}return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.SparseTensorProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.values=m.onnx.TensorProto.decode(o,o.uint32());break;case 2:y.indices=m.onnx.TensorProto.decode(o,o.uint32());break;case 3:if(y.dims&&y.dims.length||(y.dims=[]),(7&w)==2)for(var _=o.uint32()+o.pos;o.pos<_;)y.dims.push(o.int64());else y.dims.push(o.int64());break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";var u;if(o.values!=null&&o.hasOwnProperty("values")&&(u=m.onnx.TensorProto.verify(o.values)))return"values."+u;if(o.indices!=null&&o.hasOwnProperty("indices")&&(u=m.onnx.TensorProto.verify(o.indices)))return"indices."+u;if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var d=0;d<o.dims.length;++d)if(!(g.isInteger(o.dims[d])||o.dims[d]&&g.isInteger(o.dims[d].low)&&g.isInteger(o.dims[d].high)))return"dims: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof m.onnx.SparseTensorProto)return o;var u=new m.onnx.SparseTensorProto;if(o.values!=null){if(typeof o.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");u.values=m.onnx.TensorProto.fromObject(o.values)}if(o.indices!=null){if(typeof o.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");u.indices=m.onnx.TensorProto.fromObject(o.indices)}if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");u.dims=[];for(var d=0;d<o.dims.length;++d)g.Long?(u.dims[d]=g.Long.fromValue(o.dims[d])).unsigned=!1:typeof o.dims[d]=="string"?u.dims[d]=parseInt(o.dims[d],10):typeof o.dims[d]=="number"?u.dims[d]=o.dims[d]:typeof o.dims[d]=="object"&&(u.dims[d]=new g.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber())}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dims=[]),u.defaults&&(d.values=null,d.indices=null),o.values!=null&&o.hasOwnProperty("values")&&(d.values=m.onnx.TensorProto.toObject(o.values,u)),o.indices!=null&&o.hasOwnProperty("indices")&&(d.indices=m.onnx.TensorProto.toObject(o.indices,u)),o.dims&&o.dims.length){d.dims=[];for(var y=0;y<o.dims.length;++y)typeof o.dims[y]=="number"?d.dims[y]=u.longs===String?String(o.dims[y]):o.dims[y]:d.dims[y]=u.longs===String?g.Long.prototype.toString.call(o.dims[y]):u.longs===Number?new g.LongBits(o.dims[y].low>>>0,o.dims[y].high>>>0).toNumber():o.dims[y]}return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.SparseTensorProto"},l}(),s.TensorShapeProto=function(){function l(o){if(this.dim=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.dim=g.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.dim!=null&&o.dim.length)for(var d=0;d<o.dim.length;++d)m.onnx.TensorShapeProto.Dimension.encode(o.dim[d],u.uint32(10).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.TensorShapeProto;o.pos<d;){var w=o.uint32();w>>>3==1?(y.dim&&y.dim.length||(y.dim=[]),y.dim.push(m.onnx.TensorShapeProto.Dimension.decode(o,o.uint32()))):o.skipType(7&w)}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dim!=null&&o.hasOwnProperty("dim")){if(!Array.isArray(o.dim))return"dim: array expected";for(var u=0;u<o.dim.length;++u){var d=m.onnx.TensorShapeProto.Dimension.verify(o.dim[u]);if(d)return"dim."+d}}return null},l.fromObject=function(o){if(o instanceof m.onnx.TensorShapeProto)return o;var u=new m.onnx.TensorShapeProto;if(o.dim){if(!Array.isArray(o.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");u.dim=[];for(var d=0;d<o.dim.length;++d){if(typeof o.dim[d]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");u.dim[d]=m.onnx.TensorShapeProto.Dimension.fromObject(o.dim[d])}}return u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dim=[]),o.dim&&o.dim.length){d.dim=[];for(var y=0;y<o.dim.length;++y)d.dim[y]=m.onnx.TensorShapeProto.Dimension.toObject(o.dim[y],u)}return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorShapeProto"},l.Dimension=function(){function o(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}var u;return o.prototype.dimValue=null,o.prototype.dimParam=null,o.prototype.denotation="",Object.defineProperty(o.prototype,"value",{get:g.oneOfGetter(u=["dimValue","dimParam"]),set:g.oneOfSetter(u)}),o.create=function(d){return new o(d)},o.encode=function(d,y){return y||(y=b.create()),d.dimValue!=null&&Object.hasOwnProperty.call(d,"dimValue")&&y.uint32(8).int64(d.dimValue),d.dimParam!=null&&Object.hasOwnProperty.call(d,"dimParam")&&y.uint32(18).string(d.dimParam),d.denotation!=null&&Object.hasOwnProperty.call(d,"denotation")&&y.uint32(26).string(d.denotation),y},o.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},o.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TensorShapeProto.Dimension;d.pos<w;){var T=d.uint32();switch(T>>>3){case 1:_.dimValue=d.int64();break;case 2:_.dimParam=d.string();break;case 3:_.denotation=d.string();break;default:d.skipType(7&T)}}return _},o.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},o.verify=function(d){if(typeof d!="object"||d===null)return"object expected";var y={};if(d.dimValue!=null&&d.hasOwnProperty("dimValue")&&(y.value=1,!(g.isInteger(d.dimValue)||d.dimValue&&g.isInteger(d.dimValue.low)&&g.isInteger(d.dimValue.high))))return"dimValue: integer|Long expected";if(d.dimParam!=null&&d.hasOwnProperty("dimParam")){if(y.value===1)return"value: multiple values";if(y.value=1,!g.isString(d.dimParam))return"dimParam: string expected"}return d.denotation!=null&&d.hasOwnProperty("denotation")&&!g.isString(d.denotation)?"denotation: string expected":null},o.fromObject=function(d){if(d instanceof m.onnx.TensorShapeProto.Dimension)return d;var y=new m.onnx.TensorShapeProto.Dimension;return d.dimValue!=null&&(g.Long?(y.dimValue=g.Long.fromValue(d.dimValue)).unsigned=!1:typeof d.dimValue=="string"?y.dimValue=parseInt(d.dimValue,10):typeof d.dimValue=="number"?y.dimValue=d.dimValue:typeof d.dimValue=="object"&&(y.dimValue=new g.LongBits(d.dimValue.low>>>0,d.dimValue.high>>>0).toNumber())),d.dimParam!=null&&(y.dimParam=String(d.dimParam)),d.denotation!=null&&(y.denotation=String(d.denotation)),y},o.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.denotation=""),d.dimValue!=null&&d.hasOwnProperty("dimValue")&&(typeof d.dimValue=="number"?w.dimValue=y.longs===String?String(d.dimValue):d.dimValue:w.dimValue=y.longs===String?g.Long.prototype.toString.call(d.dimValue):y.longs===Number?new g.LongBits(d.dimValue.low>>>0,d.dimValue.high>>>0).toNumber():d.dimValue,y.oneofs&&(w.value="dimValue")),d.dimParam!=null&&d.hasOwnProperty("dimParam")&&(w.dimParam=d.dimParam,y.oneofs&&(w.value="dimParam")),d.denotation!=null&&d.hasOwnProperty("denotation")&&(w.denotation=d.denotation),w},o.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},o.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TensorShapeProto.Dimension"},o}(),l}(),s.TypeProto=function(){function l(u){if(u)for(var d=Object.keys(u),y=0;y<d.length;++y)u[d[y]]!=null&&(this[d[y]]=u[d[y]])}var o;return l.prototype.tensorType=null,l.prototype.sequenceType=null,l.prototype.mapType=null,l.prototype.optionalType=null,l.prototype.sparseTensorType=null,l.prototype.denotation="",Object.defineProperty(l.prototype,"value",{get:g.oneOfGetter(o=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:g.oneOfSetter(o)}),l.create=function(u){return new l(u)},l.encode=function(u,d){return d||(d=b.create()),u.tensorType!=null&&Object.hasOwnProperty.call(u,"tensorType")&&m.onnx.TypeProto.Tensor.encode(u.tensorType,d.uint32(10).fork()).ldelim(),u.sequenceType!=null&&Object.hasOwnProperty.call(u,"sequenceType")&&m.onnx.TypeProto.Sequence.encode(u.sequenceType,d.uint32(34).fork()).ldelim(),u.mapType!=null&&Object.hasOwnProperty.call(u,"mapType")&&m.onnx.TypeProto.Map.encode(u.mapType,d.uint32(42).fork()).ldelim(),u.denotation!=null&&Object.hasOwnProperty.call(u,"denotation")&&d.uint32(50).string(u.denotation),u.sparseTensorType!=null&&Object.hasOwnProperty.call(u,"sparseTensorType")&&m.onnx.TypeProto.SparseTensor.encode(u.sparseTensorType,d.uint32(66).fork()).ldelim(),u.optionalType!=null&&Object.hasOwnProperty.call(u,"optionalType")&&m.onnx.TypeProto.Optional.encode(u.optionalType,d.uint32(74).fork()).ldelim(),d},l.encodeDelimited=function(u,d){return this.encode(u,d).ldelim()},l.decode=function(u,d){u instanceof f||(u=f.create(u));for(var y=d===void 0?u.len:u.pos+d,w=new m.onnx.TypeProto;u.pos<y;){var _=u.uint32();switch(_>>>3){case 1:w.tensorType=m.onnx.TypeProto.Tensor.decode(u,u.uint32());break;case 4:w.sequenceType=m.onnx.TypeProto.Sequence.decode(u,u.uint32());break;case 5:w.mapType=m.onnx.TypeProto.Map.decode(u,u.uint32());break;case 9:w.optionalType=m.onnx.TypeProto.Optional.decode(u,u.uint32());break;case 8:w.sparseTensorType=m.onnx.TypeProto.SparseTensor.decode(u,u.uint32());break;case 6:w.denotation=u.string();break;default:u.skipType(7&_)}}return w},l.decodeDelimited=function(u){return u instanceof f||(u=new f(u)),this.decode(u,u.uint32())},l.verify=function(u){if(typeof u!="object"||u===null)return"object expected";var d={};if(u.tensorType!=null&&u.hasOwnProperty("tensorType")&&(d.value=1,y=m.onnx.TypeProto.Tensor.verify(u.tensorType)))return"tensorType."+y;if(u.sequenceType!=null&&u.hasOwnProperty("sequenceType")){if(d.value===1)return"value: multiple values";if(d.value=1,y=m.onnx.TypeProto.Sequence.verify(u.sequenceType))return"sequenceType."+y}if(u.mapType!=null&&u.hasOwnProperty("mapType")){if(d.value===1)return"value: multiple values";if(d.value=1,y=m.onnx.TypeProto.Map.verify(u.mapType))return"mapType."+y}if(u.optionalType!=null&&u.hasOwnProperty("optionalType")){if(d.value===1)return"value: multiple values";if(d.value=1,y=m.onnx.TypeProto.Optional.verify(u.optionalType))return"optionalType."+y}if(u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")){if(d.value===1)return"value: multiple values";var y;if(d.value=1,y=m.onnx.TypeProto.SparseTensor.verify(u.sparseTensorType))return"sparseTensorType."+y}return u.denotation!=null&&u.hasOwnProperty("denotation")&&!g.isString(u.denotation)?"denotation: string expected":null},l.fromObject=function(u){if(u instanceof m.onnx.TypeProto)return u;var d=new m.onnx.TypeProto;if(u.tensorType!=null){if(typeof u.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");d.tensorType=m.onnx.TypeProto.Tensor.fromObject(u.tensorType)}if(u.sequenceType!=null){if(typeof u.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");d.sequenceType=m.onnx.TypeProto.Sequence.fromObject(u.sequenceType)}if(u.mapType!=null){if(typeof u.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");d.mapType=m.onnx.TypeProto.Map.fromObject(u.mapType)}if(u.optionalType!=null){if(typeof u.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");d.optionalType=m.onnx.TypeProto.Optional.fromObject(u.optionalType)}if(u.sparseTensorType!=null){if(typeof u.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");d.sparseTensorType=m.onnx.TypeProto.SparseTensor.fromObject(u.sparseTensorType)}return u.denotation!=null&&(d.denotation=String(u.denotation)),d},l.toObject=function(u,d){d||(d={});var y={};return d.defaults&&(y.denotation=""),u.tensorType!=null&&u.hasOwnProperty("tensorType")&&(y.tensorType=m.onnx.TypeProto.Tensor.toObject(u.tensorType,d),d.oneofs&&(y.value="tensorType")),u.sequenceType!=null&&u.hasOwnProperty("sequenceType")&&(y.sequenceType=m.onnx.TypeProto.Sequence.toObject(u.sequenceType,d),d.oneofs&&(y.value="sequenceType")),u.mapType!=null&&u.hasOwnProperty("mapType")&&(y.mapType=m.onnx.TypeProto.Map.toObject(u.mapType,d),d.oneofs&&(y.value="mapType")),u.denotation!=null&&u.hasOwnProperty("denotation")&&(y.denotation=u.denotation),u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")&&(y.sparseTensorType=m.onnx.TypeProto.SparseTensor.toObject(u.sparseTensorType,d),d.oneofs&&(y.value="sparseTensorType")),u.optionalType!=null&&u.hasOwnProperty("optionalType")&&(y.optionalType=m.onnx.TypeProto.Optional.toObject(u.optionalType,d),d.oneofs&&(y.value="optionalType")),y},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TypeProto"},l.Tensor=function(){function u(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(d){return new u(d)},u.encode=function(d,y){return y||(y=b.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&y.uint32(8).int32(d.elemType),d.shape!=null&&Object.hasOwnProperty.call(d,"shape")&&m.onnx.TensorShapeProto.encode(d.shape,y.uint32(18).fork()).ldelim(),y},u.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},u.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TypeProto.Tensor;d.pos<w;){var T=d.uint32();switch(T>>>3){case 1:_.elemType=d.int32();break;case 2:_.shape=m.onnx.TensorShapeProto.decode(d,d.uint32());break;default:d.skipType(7&T)}}return _},u.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")&&!g.isInteger(d.elemType))return"elemType: integer expected";if(d.shape!=null&&d.hasOwnProperty("shape")){var y=m.onnx.TensorShapeProto.verify(d.shape);if(y)return"shape."+y}return null},u.fromObject=function(d){if(d instanceof m.onnx.TypeProto.Tensor)return d;var y=new m.onnx.TypeProto.Tensor;if(d.elemType!=null&&(y.elemType=0|d.elemType),d.shape!=null){if(typeof d.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");y.shape=m.onnx.TensorShapeProto.fromObject(d.shape)}return y},u.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.elemType=0,w.shape=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=d.elemType),d.shape!=null&&d.hasOwnProperty("shape")&&(w.shape=m.onnx.TensorShapeProto.toObject(d.shape,y)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Tensor"},u}(),l.Sequence=function(){function u(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}return u.prototype.elemType=null,u.create=function(d){return new u(d)},u.encode=function(d,y){return y||(y=b.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&m.onnx.TypeProto.encode(d.elemType,y.uint32(10).fork()).ldelim(),y},u.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},u.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TypeProto.Sequence;d.pos<w;){var T=d.uint32();T>>>3==1?_.elemType=m.onnx.TypeProto.decode(d,d.uint32()):d.skipType(7&T)}return _},u.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")){var y=m.onnx.TypeProto.verify(d.elemType);if(y)return"elemType."+y}return null},u.fromObject=function(d){if(d instanceof m.onnx.TypeProto.Sequence)return d;var y=new m.onnx.TypeProto.Sequence;if(d.elemType!=null){if(typeof d.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");y.elemType=m.onnx.TypeProto.fromObject(d.elemType)}return y},u.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.elemType=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=m.onnx.TypeProto.toObject(d.elemType,y)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Sequence"},u}(),l.Map=function(){function u(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}return u.prototype.keyType=0,u.prototype.valueType=null,u.create=function(d){return new u(d)},u.encode=function(d,y){return y||(y=b.create()),d.keyType!=null&&Object.hasOwnProperty.call(d,"keyType")&&y.uint32(8).int32(d.keyType),d.valueType!=null&&Object.hasOwnProperty.call(d,"valueType")&&m.onnx.TypeProto.encode(d.valueType,y.uint32(18).fork()).ldelim(),y},u.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},u.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TypeProto.Map;d.pos<w;){var T=d.uint32();switch(T>>>3){case 1:_.keyType=d.int32();break;case 2:_.valueType=m.onnx.TypeProto.decode(d,d.uint32());break;default:d.skipType(7&T)}}return _},u.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.keyType!=null&&d.hasOwnProperty("keyType")&&!g.isInteger(d.keyType))return"keyType: integer expected";if(d.valueType!=null&&d.hasOwnProperty("valueType")){var y=m.onnx.TypeProto.verify(d.valueType);if(y)return"valueType."+y}return null},u.fromObject=function(d){if(d instanceof m.onnx.TypeProto.Map)return d;var y=new m.onnx.TypeProto.Map;if(d.keyType!=null&&(y.keyType=0|d.keyType),d.valueType!=null){if(typeof d.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");y.valueType=m.onnx.TypeProto.fromObject(d.valueType)}return y},u.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.keyType=0,w.valueType=null),d.keyType!=null&&d.hasOwnProperty("keyType")&&(w.keyType=d.keyType),d.valueType!=null&&d.hasOwnProperty("valueType")&&(w.valueType=m.onnx.TypeProto.toObject(d.valueType,y)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Map"},u}(),l.Optional=function(){function u(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}return u.prototype.elemType=null,u.create=function(d){return new u(d)},u.encode=function(d,y){return y||(y=b.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&m.onnx.TypeProto.encode(d.elemType,y.uint32(10).fork()).ldelim(),y},u.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},u.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TypeProto.Optional;d.pos<w;){var T=d.uint32();T>>>3==1?_.elemType=m.onnx.TypeProto.decode(d,d.uint32()):d.skipType(7&T)}return _},u.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")){var y=m.onnx.TypeProto.verify(d.elemType);if(y)return"elemType."+y}return null},u.fromObject=function(d){if(d instanceof m.onnx.TypeProto.Optional)return d;var y=new m.onnx.TypeProto.Optional;if(d.elemType!=null){if(typeof d.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");y.elemType=m.onnx.TypeProto.fromObject(d.elemType)}return y},u.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.elemType=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=m.onnx.TypeProto.toObject(d.elemType,y)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Optional"},u}(),l.SparseTensor=function(){function u(d){if(d)for(var y=Object.keys(d),w=0;w<y.length;++w)d[y[w]]!=null&&(this[y[w]]=d[y[w]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(d){return new u(d)},u.encode=function(d,y){return y||(y=b.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&y.uint32(8).int32(d.elemType),d.shape!=null&&Object.hasOwnProperty.call(d,"shape")&&m.onnx.TensorShapeProto.encode(d.shape,y.uint32(18).fork()).ldelim(),y},u.encodeDelimited=function(d,y){return this.encode(d,y).ldelim()},u.decode=function(d,y){d instanceof f||(d=f.create(d));for(var w=y===void 0?d.len:d.pos+y,_=new m.onnx.TypeProto.SparseTensor;d.pos<w;){var T=d.uint32();switch(T>>>3){case 1:_.elemType=d.int32();break;case 2:_.shape=m.onnx.TensorShapeProto.decode(d,d.uint32());break;default:d.skipType(7&T)}}return _},u.decodeDelimited=function(d){return d instanceof f||(d=new f(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")&&!g.isInteger(d.elemType))return"elemType: integer expected";if(d.shape!=null&&d.hasOwnProperty("shape")){var y=m.onnx.TensorShapeProto.verify(d.shape);if(y)return"shape."+y}return null},u.fromObject=function(d){if(d instanceof m.onnx.TypeProto.SparseTensor)return d;var y=new m.onnx.TypeProto.SparseTensor;if(d.elemType!=null&&(y.elemType=0|d.elemType),d.shape!=null){if(typeof d.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");y.shape=m.onnx.TensorShapeProto.fromObject(d.shape)}return y},u.toObject=function(d,y){y||(y={});var w={};return y.defaults&&(w.elemType=0,w.shape=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=d.elemType),d.shape!=null&&d.hasOwnProperty("shape")&&(w.shape=m.onnx.TensorShapeProto.toObject(d.shape,y)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.SparseTensor"},u}(),l}(),s.OperatorSetIdProto=function(){function l(o){if(o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.domain="",l.prototype.version=g.Long?g.Long.fromBits(0,0,!1):0,l.create=function(o){return new l(o)},l.encode=function(o,u){return u||(u=b.create()),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&u.uint32(10).string(o.domain),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&u.uint32(16).int64(o.version),u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.OperatorSetIdProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.domain=o.string();break;case 2:y.version=o.int64();break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.domain!=null&&o.hasOwnProperty("domain")&&!g.isString(o.domain)?"domain: string expected":o.version!=null&&o.hasOwnProperty("version")&&!(g.isInteger(o.version)||o.version&&g.isInteger(o.version.low)&&g.isInteger(o.version.high))?"version: integer|Long expected":null},l.fromObject=function(o){if(o instanceof m.onnx.OperatorSetIdProto)return o;var u=new m.onnx.OperatorSetIdProto;return o.domain!=null&&(u.domain=String(o.domain)),o.version!=null&&(g.Long?(u.version=g.Long.fromValue(o.version)).unsigned=!1:typeof o.version=="string"?u.version=parseInt(o.version,10):typeof o.version=="number"?u.version=o.version:typeof o.version=="object"&&(u.version=new g.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber())),u},l.toObject=function(o,u){u||(u={});var d={};if(u.defaults)if(d.domain="",g.Long){var y=new g.Long(0,0,!1);d.version=u.longs===String?y.toString():u.longs===Number?y.toNumber():y}else d.version=u.longs===String?"0":0;return o.domain!=null&&o.hasOwnProperty("domain")&&(d.domain=o.domain),o.version!=null&&o.hasOwnProperty("version")&&(typeof o.version=="number"?d.version=u.longs===String?String(o.version):o.version:d.version=u.longs===String?g.Long.prototype.toString.call(o.version):u.longs===Number?new g.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber():o.version),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.OperatorSetIdProto"},l}(),s.OperatorStatus=function(){var l={},o=Object.create(l);return o[l[0]="EXPERIMENTAL"]=0,o[l[1]="STABLE"]=1,o}(),s.FunctionProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],o)for(var u=Object.keys(o),d=0;d<u.length;++d)o[u[d]]!=null&&(this[u[d]]=o[u[d]])}return l.prototype.name="",l.prototype.input=g.emptyArray,l.prototype.output=g.emptyArray,l.prototype.attribute=g.emptyArray,l.prototype.attributeProto=g.emptyArray,l.prototype.node=g.emptyArray,l.prototype.docString="",l.prototype.opsetImport=g.emptyArray,l.prototype.domain="",l.create=function(o){return new l(o)},l.encode=function(o,u){if(u||(u=b.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&u.uint32(10).string(o.name),o.input!=null&&o.input.length)for(var d=0;d<o.input.length;++d)u.uint32(34).string(o.input[d]);if(o.output!=null&&o.output.length)for(d=0;d<o.output.length;++d)u.uint32(42).string(o.output[d]);if(o.attribute!=null&&o.attribute.length)for(d=0;d<o.attribute.length;++d)u.uint32(50).string(o.attribute[d]);if(o.node!=null&&o.node.length)for(d=0;d<o.node.length;++d)m.onnx.NodeProto.encode(o.node[d],u.uint32(58).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&u.uint32(66).string(o.docString),o.opsetImport!=null&&o.opsetImport.length)for(d=0;d<o.opsetImport.length;++d)m.onnx.OperatorSetIdProto.encode(o.opsetImport[d],u.uint32(74).fork()).ldelim();if(o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&u.uint32(82).string(o.domain),o.attributeProto!=null&&o.attributeProto.length)for(d=0;d<o.attributeProto.length;++d)m.onnx.AttributeProto.encode(o.attributeProto[d],u.uint32(90).fork()).ldelim();return u},l.encodeDelimited=function(o,u){return this.encode(o,u).ldelim()},l.decode=function(o,u){o instanceof f||(o=f.create(o));for(var d=u===void 0?o.len:o.pos+u,y=new m.onnx.FunctionProto;o.pos<d;){var w=o.uint32();switch(w>>>3){case 1:y.name=o.string();break;case 4:y.input&&y.input.length||(y.input=[]),y.input.push(o.string());break;case 5:y.output&&y.output.length||(y.output=[]),y.output.push(o.string());break;case 6:y.attribute&&y.attribute.length||(y.attribute=[]),y.attribute.push(o.string());break;case 11:y.attributeProto&&y.attributeProto.length||(y.attributeProto=[]),y.attributeProto.push(m.onnx.AttributeProto.decode(o,o.uint32()));break;case 7:y.node&&y.node.length||(y.node=[]),y.node.push(m.onnx.NodeProto.decode(o,o.uint32()));break;case 8:y.docString=o.string();break;case 9:y.opsetImport&&y.opsetImport.length||(y.opsetImport=[]),y.opsetImport.push(m.onnx.OperatorSetIdProto.decode(o,o.uint32()));break;case 10:y.domain=o.string();break;default:o.skipType(7&w)}}return y},l.decodeDelimited=function(o){return o instanceof f||(o=new f(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!g.isString(o.name))return"name: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var u=0;u<o.input.length;++u)if(!g.isString(o.input[u]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(u=0;u<o.output.length;++u)if(!g.isString(o.output[u]))return"output: string[] expected"}if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(u=0;u<o.attribute.length;++u)if(!g.isString(o.attribute[u]))return"attribute: string[] expected"}if(o.attributeProto!=null&&o.hasOwnProperty("attributeProto")){if(!Array.isArray(o.attributeProto))return"attributeProto: array expected";for(u=0;u<o.attributeProto.length;++u)if(d=m.onnx.AttributeProto.verify(o.attributeProto[u]))return"attributeProto."+d}if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(u=0;u<o.node.length;++u)if(d=m.onnx.NodeProto.verify(o.node[u]))return"node."+d}if(o.docString!=null&&o.hasOwnProperty("docString")&&!g.isString(o.docString))return"docString: string expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(u=0;u<o.opsetImport.length;++u){var d;if(d=m.onnx.OperatorSetIdProto.verify(o.opsetImport[u]))return"opsetImport."+d}}return o.domain!=null&&o.hasOwnProperty("domain")&&!g.isString(o.domain)?"domain: string expected":null},l.fromObject=function(o){if(o instanceof m.onnx.FunctionProto)return o;var u=new m.onnx.FunctionProto;if(o.name!=null&&(u.name=String(o.name)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.FunctionProto.input: array expected");u.input=[];for(var d=0;d<o.input.length;++d)u.input[d]=String(o.input[d])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(u.output=[],d=0;d<o.output.length;++d)u.output[d]=String(o.output[d])}if(o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(u.attribute=[],d=0;d<o.attribute.length;++d)u.attribute[d]=String(o.attribute[d])}if(o.attributeProto){if(!Array.isArray(o.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(u.attributeProto=[],d=0;d<o.attributeProto.length;++d){if(typeof o.attributeProto[d]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");u.attributeProto[d]=m.onnx.AttributeProto.fromObject(o.attributeProto[d])}}if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(u.node=[],d=0;d<o.node.length;++d){if(typeof o.node[d]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");u.node[d]=m.onnx.NodeProto.fromObject(o.node[d])}}if(o.docString!=null&&(u.docString=String(o.docString)),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(u.opsetImport=[],d=0;d<o.opsetImport.length;++d){if(typeof o.opsetImport[d]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");u.opsetImport[d]=m.onnx.OperatorSetIdProto.fromObject(o.opsetImport[d])}}return o.domain!=null&&(u.domain=String(o.domain)),u},l.toObject=function(o,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.input=[],d.output=[],d.attribute=[],d.node=[],d.opsetImport=[],d.attributeProto=[]),u.defaults&&(d.name="",d.docString="",d.domain=""),o.name!=null&&o.hasOwnProperty("name")&&(d.name=o.name),o.input&&o.input.length){d.input=[];for(var y=0;y<o.input.length;++y)d.input[y]=o.input[y]}if(o.output&&o.output.length)for(d.output=[],y=0;y<o.output.length;++y)d.output[y]=o.output[y];if(o.attribute&&o.attribute.length)for(d.attribute=[],y=0;y<o.attribute.length;++y)d.attribute[y]=o.attribute[y];if(o.node&&o.node.length)for(d.node=[],y=0;y<o.node.length;++y)d.node[y]=m.onnx.NodeProto.toObject(o.node[y],u);if(o.docString!=null&&o.hasOwnProperty("docString")&&(d.docString=o.docString),o.opsetImport&&o.opsetImport.length)for(d.opsetImport=[],y=0;y<o.opsetImport.length;++y)d.opsetImport[y]=m.onnx.OperatorSetIdProto.toObject(o.opsetImport[y],u);if(o.domain!=null&&o.hasOwnProperty("domain")&&(d.domain=o.domain),o.attributeProto&&o.attributeProto.length)for(d.attributeProto=[],y=0;y<o.attributeProto.length;++y)d.attributeProto[y]=m.onnx.AttributeProto.toObject(o.attributeProto[y],u);return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.FunctionProto"},l}(),s),r.exports=m},3474:(r,e,t)=>{var n,a=(n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(n=n||__filename),function(s={}){function c(){return K.buffer!=Se.buffer&&Re(),Se}function f(){return K.buffer!=Se.buffer&&Re(),we}function b(){return K.buffer!=Se.buffer&&Re(),ne}function g(){return K.buffer!=Se.buffer&&Re(),re}function m(){return K.buffer!=Se.buffer&&Re(),oe}var l,o,u=s;u.ready=new Promise((L,q)=>{l=L,o=q});var d,y,w,_=Object.assign({},u),T="./this.program",S=(L,q)=>{throw q},E=typeof window=="object",A=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",k=u.ENVIRONMENT_IS_PTHREAD||!1,M="";function F(L){return u.locateFile?u.locateFile(L,M):M+L}if(P){var O=t(1384),D=t(908);let L;M=A?D.dirname(M)+"/":__dirname+"/",d=(q,ae)=>(q=q.startsWith("file://")?new URL(q):D.normalize(q),O.readFileSync(q,ae?void 0:"utf8")),w=q=>((q=d(q,!0)).buffer||(q=new Uint8Array(q)),q),y=(q,ae,Te,ke=!0)=>{q=q.startsWith("file://")?new URL(q):D.normalize(q),O.readFile(q,ke?void 0:"utf8",(Ke,it)=>{Ke?Te(Ke):ae(ke?it.buffer:it)})},!u.thisProgram&&1<process.argv.length&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),S=(q,ae)=>{throw process.exitCode=q,ae},u.inspect=()=>"[Emscripten Module object]";try{L=t(9925)}catch(q){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),q}commonjsGlobal.Worker=L.Worker}else(E||A)&&(A?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),n&&(M=n),M=M.indexOf("blob:")!==0?M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):"",P||(d=L=>{var q=new XMLHttpRequest;return q.open("GET",L,!1),q.send(null),q.responseText},A&&(w=L=>{var q=new XMLHttpRequest;return q.open("GET",L,!1),q.responseType="arraybuffer",q.send(null),new Uint8Array(q.response)}),y=(L,q,ae)=>{var Te=new XMLHttpRequest;Te.open("GET",L,!0),Te.responseType="arraybuffer",Te.onload=()=>{Te.status==200||Te.status==0&&Te.response?q(Te.response):ae()},Te.onerror=ae,Te.send(null)}));P&&typeof performance>"u"&&(commonjsGlobal.performance=t(6953).performance);var R=console.log.bind(console),C=console.error.bind(console);P&&(R=(...L)=>O.writeSync(1,L.join(" ")+`
`),C=(...L)=>O.writeSync(2,L.join(" ")+`
`));var U,N=u.print||R,V=u.printErr||C;Object.assign(u,_),_=null,u.thisProgram&&(T=u.thisProgram),u.quit&&(S=u.quit),u.wasmBinary&&(U=u.wasmBinary);var j=u.noExitRuntime||!0;typeof WebAssembly!="object"&&Oe("no native wasm support detected");var K,ee,he,ge,Se,we,ne,re,oe,Ee=!1;function Re(){var L=K.buffer;u.HEAP8=Se=new Int8Array(L),u.HEAP16=new Int16Array(L),u.HEAP32=ne=new Int32Array(L),u.HEAPU8=we=new Uint8Array(L),u.HEAPU16=new Uint16Array(L),u.HEAPU32=re=new Uint32Array(L),u.HEAPF32=new Float32Array(L),u.HEAPF64=oe=new Float64Array(L)}var De=u.INITIAL_MEMORY||16777216;if(5242880<=De||Oe("INITIAL_MEMORY should be larger than STACK_SIZE, was "+De+"! (STACK_SIZE=5242880)"),k)K=u.wasmMemory;else if(u.wasmMemory)K=u.wasmMemory;else if(!((K=new WebAssembly.Memory({initial:De/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw V("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&V("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Re(),De=K.buffer.byteLength;var He,qe=[],W=[],X=[],te=0;function ie(){return j||0<te}var ye,be,Ae=0,J=null;function ve(){Ae++,u.monitorRunDependencies&&u.monitorRunDependencies(Ae)}function de(){if(Ae--,u.monitorRunDependencies&&u.monitorRunDependencies(Ae),Ae==0&&J){var L=J;J=null,L()}}function Oe(L){throw u.onAbort&&u.onAbort(L),V(L="Aborted("+L+")"),Ee=!0,ge=1,L=new WebAssembly.RuntimeError(L+". Build with -sASSERTIONS for more info."),o(L),L}function fe(L){return L.startsWith("data:application/octet-stream;base64,")}function Ue(L){if(L==ye&&U)return new Uint8Array(U);if(w)return w(L);throw"both async and sync fetching of the wasm failed"}function Ze(L,q,ae){return function(Te){if(!U&&(E||A)){if(typeof fetch=="function"&&!Te.startsWith("file://"))return fetch(Te,{credentials:"same-origin"}).then(ke=>{if(!ke.ok)throw"failed to load wasm binary file at '"+Te+"'";return ke.arrayBuffer()}).catch(()=>Ue(Te));if(y)return new Promise((ke,Ke)=>{y(Te,it=>ke(new Uint8Array(it)),Ke)})}return Promise.resolve().then(()=>Ue(Te))}(L).then(Te=>WebAssembly.instantiate(Te,q)).then(Te=>Te).then(ae,Te=>{V("failed to asynchronously prepare wasm: "+Te),Oe(Te)})}function $e(L){this.name="ExitStatus",this.message=`Program terminated with exit(${L})`,this.status=L}function Le(L){L.terminate(),L.onmessage=()=>{}}function Ge(L){(L=We.Fa[L])||Oe(),We.fb(L)}function ze(L){var q=We.Za();if(!q)return 6;We.Ia.push(q),We.Fa[L.Ha]=q,q.Ha=L.Ha;var ae={cmd:"run",start_routine:L.gb,arg:L.Ya,pthread_ptr:L.Ha};return P&&q.unref(),q.postMessage(ae,L.mb),0}fe(ye="ort-wasm-threaded.wasm")||(ye=F(ye));var Je=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ot=(L,q,ae)=>{var Te=(q>>>=0)+ae;for(ae=q;L[ae]&&!(ae>=Te);)++ae;if(16<ae-q&&L.buffer&&Je)return Je.decode(L.buffer instanceof SharedArrayBuffer?L.slice(q,ae):L.subarray(q,ae));for(Te="";q<ae;){var ke=L[q++];if(128&ke){var Ke=63&L[q++];if((224&ke)==192)Te+=String.fromCharCode((31&ke)<<6|Ke);else{var it=63&L[q++];65536>(ke=(240&ke)==224?(15&ke)<<12|Ke<<6|it:(7&ke)<<18|Ke<<12|it<<6|63&L[q++])?Te+=String.fromCharCode(ke):(ke-=65536,Te+=String.fromCharCode(55296|ke>>10,56320|1023&ke))}}else Te+=String.fromCharCode(ke)}return Te},Qe=(L,q)=>(L>>>=0)?ot(f(),L,q):"";function at(L){if(k)return It(1,1,L);ge=L,ie()||(We.hb(),u.onExit&&u.onExit(L),Ee=!0),S(L,new $e(L))}var st=L=>{if(ge=L,k)throw vt(L),"unwind";at(L)},We={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){k?We.ab():We.$a()},$a:function(){qe.unshift(()=>{ve(),We.bb(()=>de())})},ab:function(){We.receiveObjectTransfer=We.eb,We.threadInitTLS=We.Sa,We.setExitStatus=We.Ra,j=!1},Ra:function(L){ge=L},rb:["$terminateWorker"],hb:function(){for(var L of We.Ia)Le(L);for(L of We.La)Le(L);We.La=[],We.Ia=[],We.Fa=[]},fb:function(L){var q=L.Ha;delete We.Fa[q],We.La.push(L),We.Ia.splice(We.Ia.indexOf(L),1),L.Ha=0,_n(q)},eb:function(){},Sa:function(){We.Ta.forEach(L=>L())},cb:L=>new Promise(q=>{L.onmessage=ke=>{var Ke=(ke=ke.data).cmd;if(ke.targetThread&&ke.targetThread!=sn()){var it=We.Fa[ke.qb];it?it.postMessage(ke,ke.transferList):V('Internal error! Worker sent a message "'+Ke+'" to target pthread '+ke.targetThread+", but that thread no longer exists!")}else Ke==="checkMailbox"?$t():Ke==="spawnThread"?ze(ke):Ke==="cleanupThread"?Ge(ke.thread):Ke==="killThread"?(ke=ke.thread,Ke=We.Fa[ke],delete We.Fa[ke],Le(Ke),_n(ke),We.Ia.splice(We.Ia.indexOf(Ke),1),Ke.Ha=0):Ke==="cancelThread"?We.Fa[ke.thread].postMessage({cmd:"cancel"}):Ke==="loaded"?(L.loaded=!0,q(L)):Ke==="alert"?alert("Thread "+ke.threadId+": "+ke.text):ke.target==="setimmediate"?L.postMessage(ke):Ke==="callHandler"?u[ke.handler](...ke.args):Ke&&V("worker sent an unknown command "+Ke)},L.onerror=ke=>{throw V("worker sent an error! "+ke.filename+":"+ke.lineno+": "+ke.message),ke},P&&(L.on("message",function(ke){L.onmessage({data:ke})}),L.on("error",function(ke){L.onerror(ke)}));var ae,Te=[];for(ae of["onExit","onAbort","print","printErr"])u.hasOwnProperty(ae)&&Te.push(ae);L.postMessage({cmd:"load",handlers:Te,urlOrBlob:u.mainScriptUrlOrBlob||n,wasmMemory:K,wasmModule:he})}),bb:function(L){L()},Xa:function(){var L=F("ort-wasm-threaded.worker.js");L=new Worker(L),We.La.push(L)},Za:function(){return We.La.length==0&&(We.Xa(),We.cb(We.La[0])),We.La.pop()}};u.PThread=We;var pt=L=>{for(;0<L.length;)L.shift()(u)};function vt(L){if(k)return It(2,0,L);st(L)}u.establishStackSpace=function(){var L=sn(),q=b()[L+52>>2>>>0];L=b()[L+56>>2>>>0],Tn(q,q-L),kr(q)};var Y=[];function me(L){this.Oa=L-24,this.Wa=function(q){g()[this.Oa+4>>2>>>0]=q},this.Va=function(q){g()[this.Oa+8>>2>>>0]=q},this.Pa=function(q,ae){this.Ua(),this.Wa(q),this.Va(ae)},this.Ua=function(){g()[this.Oa+16>>2>>>0]=0}}function _e(L,q,ae,Te){return k?It(3,1,L,q,ae,Te):Pe(L,q,ae,Te)}function Pe(L,q,ae,Te){if(L>>>=0,q>>>=0,ae>>>=0,Te>>>=0,typeof SharedArrayBuffer>"u")return V("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var ke=[];return k&&ke.length===0?_e(L,q,ae,Te):(L={gb:ae,Ha:L,Ya:Te,mb:ke},k?(L.ob="spawnThread",postMessage(L,ke),0):ze(L))}function Ye(L,q,ae){return k?It(4,1,L,q,ae):0}function et(L,q){if(k)return It(5,1,L,q)}u.invokeEntryPoint=function(L,q){var ae=Y[L];ae||(L>=Y.length&&(Y.length=L+1),Y[L]=ae=He.get(L)),L=ae(q),ie()?We.Ra(L):un(L)};var nt=L=>{for(var q=0,ae=0;ae<L.length;++ae){var Te=L.charCodeAt(ae);127>=Te?q++:2047>=Te?q+=2:55296<=Te&&57343>=Te?(q+=4,++ae):q+=3}return q},Et=(L,q,ae,Te)=>{if(!(0<Te))return 0;var ke=ae>>>=0;Te=ae+Te-1;for(var Ke=0;Ke<L.length;++Ke){var it=L.charCodeAt(Ke);if(55296<=it&&57343>=it&&(it=65536+((1023&it)<<10)|1023&L.charCodeAt(++Ke)),127>=it){if(ae>=Te)break;q[ae++>>>0]=it}else{if(2047>=it){if(ae+1>=Te)break;q[ae++>>>0]=192|it>>6}else{if(65535>=it){if(ae+2>=Te)break;q[ae++>>>0]=224|it>>12}else{if(ae+3>=Te)break;q[ae++>>>0]=240|it>>18,q[ae++>>>0]=128|it>>12&63}q[ae++>>>0]=128|it>>6&63}q[ae++>>>0]=128|63&it}}return q[ae>>>0]=0,ae-ke},Pt=(L,q,ae)=>Et(L,f(),q,ae);function H(L,q){if(k)return It(6,1,L,q)}function ue(L,q,ae){if(k)return It(7,1,L,q,ae)}function xe(L,q,ae){return k?It(8,1,L,q,ae):0}function Be(L,q){if(k)return It(9,1,L,q)}function le(L,q,ae){if(k)return It(10,1,L,q,ae)}function Ve(L,q,ae,Te){if(k)return It(11,1,L,q,ae,Te)}function lt(L,q,ae,Te){if(k)return It(12,1,L,q,ae,Te)}function mt(L,q,ae,Te){if(k)return It(13,1,L,q,ae,Te)}function kt(L){if(k)return It(14,1,L)}function jt(L,q){if(k)return It(15,1,L,q)}function Rr(L,q,ae){if(k)return It(16,1,L,q,ae)}var Ut=L=>{if(!Ee)try{if(L(),!ie())try{k?un(ge):st(ge)}catch(q){q instanceof $e||q=="unwind"||S(1,q)}}catch(q){q instanceof $e||q=="unwind"||S(1,q)}};function sr(L){L>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(b(),L>>2,L).value.then($t),L+=128,Atomics.store(b(),L>>2,1))}function $t(){var L=sn();L&&(sr(L),Ut(()=>bi()))}u.__emscripten_thread_mailbox_await=sr,u.checkMailbox=$t;var Ht=L=>L%4==0&&(L%100!=0||L%400==0),Lt=[0,31,60,91,121,152,182,213,244,274,305,335],lr=[0,31,59,90,120,151,181,212,243,273,304,334];function Or(L,q,ae,Te,ke,Ke,it,Ft){return k?It(17,1,L,q,ae,Te,ke,Ke,it,Ft):-52}function rr(L,q,ae,Te,ke,Ke,it){if(k)return It(18,1,L,q,ae,Te,ke,Ke,it)}var Lr=L=>{var q=nt(L)+1,ae=ln(q);return ae&&Pt(L,ae,q),ae},wn=L=>{var q=cn();return L=L(),kr(q),L};function It(L,q){var ae=arguments.length-2,Te=arguments;return wn(()=>{for(var ke=Sn(8*ae),Ke=ke>>3,it=0;it<ae;it++){var Ft=Te[2+it];m()[Ke+it>>>0]=Ft}return Hn(L,ae,ke,q)})}var Pr,Kr=[],dr={},ci=()=>{if(!Pr){var L,q={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:T||"./this.program"};for(L in dr)dr[L]===void 0?delete q[L]:q[L]=dr[L];var ae=[];for(L in q)ae.push(`${L}=${q[L]}`);Pr=ae}return Pr};function hi(L,q){if(k)return It(19,1,L,q);L>>>=0,q>>>=0;var ae=0;return ci().forEach(function(Te,ke){var Ke=q+ae;for(ke=g()[L+4*ke>>2>>>0]=Ke,Ke=0;Ke<Te.length;++Ke)c()[ke++>>0>>>0]=Te.charCodeAt(Ke);c()[ke>>0>>>0]=0,ae+=Te.length+1}),0}function fi(L,q){if(k)return It(20,1,L,q);L>>>=0,q>>>=0;var ae=ci();g()[L>>2>>>0]=ae.length;var Te=0;return ae.forEach(function(ke){Te+=ke.length+1}),g()[q>>2>>>0]=Te,0}function Bn(L){return k?It(21,1,L):52}function Ln(L,q,ae,Te){return k?It(22,1,L,q,ae,Te):52}function Vn(L,q,ae,Te,ke){return k?It(23,1,L,q,ae,Te,ke):70}var so=[null,[],[]];function di(L,q,ae,Te){if(k)return It(24,1,L,q,ae,Te);q>>>=0,ae>>>=0,Te>>>=0;for(var ke=0,Ke=0;Ke<ae;Ke++){var it=g()[q>>2>>>0],Ft=g()[q+4>>2>>>0];q+=8;for(var nr=0;nr<Ft;nr++){var Zt=f()[it+nr>>>0],Qt=so[L];Zt===0||Zt===10?((L===1?N:V)(ot(Qt,0)),Qt.length=0):Qt.push(Zt)}ke+=Ft}return g()[Te>>2>>>0]=ke,0}var pi=L=>(pi=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return Te=>(Te.set(crypto.getRandomValues(new Uint8Array(Te.byteLength))),Te);if(P)try{var q=t(760);if(q.randomFillSync)return Te=>q.randomFillSync(Te);var ae=q.randomBytes;return Te=>(Te.set(ae(Te.byteLength)),Te)}catch{}Oe("initRandomDevice")})())(L),gi=[31,29,31,30,31,30,31,31,30,31,30,31],jn=[31,28,31,30,31,30,31,31,30,31,30,31],mi=(L,q)=>{c().set(L,q>>>0)};function Un(L,q,ae,Te){function ke(Me,Tt,Nt){for(Me=typeof Me=="number"?Me.toString():Me||"";Me.length<Tt;)Me=Nt[0]+Me;return Me}function Ke(Me,Tt){return ke(Me,Tt,"0")}function it(Me,Tt){function Nt(wi){return 0>wi?-1:0<wi?1:0}var Vr;return(Vr=Nt(Me.getFullYear()-Tt.getFullYear()))===0&&(Vr=Nt(Me.getMonth()-Tt.getMonth()))===0&&(Vr=Nt(Me.getDate()-Tt.getDate())),Vr}function Ft(Me){switch(Me.getDay()){case 0:return new Date(Me.getFullYear()-1,11,29);case 1:return Me;case 2:return new Date(Me.getFullYear(),0,3);case 3:return new Date(Me.getFullYear(),0,2);case 4:return new Date(Me.getFullYear(),0,1);case 5:return new Date(Me.getFullYear()-1,11,31);case 6:return new Date(Me.getFullYear()-1,11,30)}}function nr(Me){var Tt=Me.Ja;for(Me=new Date(new Date(Me.Ka+1900,0,1).getTime());0<Tt;){var Nt=Me.getMonth(),Vr=(Ht(Me.getFullYear())?gi:jn)[Nt];if(!(Tt>Vr-Me.getDate())){Me.setDate(Me.getDate()+Tt);break}Tt-=Vr-Me.getDate()+1,Me.setDate(1),11>Nt?Me.setMonth(Nt+1):(Me.setMonth(0),Me.setFullYear(Me.getFullYear()+1))}return Nt=new Date(Me.getFullYear()+1,0,4),Tt=Ft(new Date(Me.getFullYear(),0,4)),Nt=Ft(Nt),0>=it(Tt,Me)?0>=it(Nt,Me)?Me.getFullYear()+1:Me.getFullYear():Me.getFullYear()-1}L>>>=0,q>>>=0,ae>>>=0,Te>>>=0;var Zt=b()[Te+40>>2>>>0];for(var Qt in Te={kb:b()[Te>>2>>>0],jb:b()[Te+4>>2>>>0],Ma:b()[Te+8>>2>>>0],Qa:b()[Te+12>>2>>>0],Na:b()[Te+16>>2>>>0],Ka:b()[Te+20>>2>>>0],Ga:b()[Te+24>>2>>>0],Ja:b()[Te+28>>2>>>0],sb:b()[Te+32>>2>>>0],ib:b()[Te+36>>2>>>0],lb:Zt?Qe(Zt):""},ae=Qe(ae),Zt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ae=ae.replace(new RegExp(Qt,"g"),Zt[Qt]);var yi="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),xi="January February March April May June July August September October November December".split(" ");for(Qt in Zt={"%a":Me=>yi[Me.Ga].substring(0,3),"%A":Me=>yi[Me.Ga],"%b":Me=>xi[Me.Na].substring(0,3),"%B":Me=>xi[Me.Na],"%C":Me=>Ke((Me.Ka+1900)/100|0,2),"%d":Me=>Ke(Me.Qa,2),"%e":Me=>ke(Me.Qa,2," "),"%g":Me=>nr(Me).toString().substring(2),"%G":Me=>nr(Me),"%H":Me=>Ke(Me.Ma,2),"%I":Me=>((Me=Me.Ma)==0?Me=12:12<Me&&(Me-=12),Ke(Me,2)),"%j":Me=>{for(var Tt=0,Nt=0;Nt<=Me.Na-1;Tt+=(Ht(Me.Ka+1900)?gi:jn)[Nt++]);return Ke(Me.Qa+Tt,3)},"%m":Me=>Ke(Me.Na+1,2),"%M":Me=>Ke(Me.jb,2),"%n":()=>`
`,"%p":Me=>0<=Me.Ma&&12>Me.Ma?"AM":"PM","%S":Me=>Ke(Me.kb,2),"%t":()=>"	","%u":Me=>Me.Ga||7,"%U":Me=>Ke(Math.floor((Me.Ja+7-Me.Ga)/7),2),"%V":Me=>{var Tt=Math.floor((Me.Ja+7-(Me.Ga+6)%7)/7);if(2>=(Me.Ga+371-Me.Ja-2)%7&&Tt++,Tt)Tt==53&&((Nt=(Me.Ga+371-Me.Ja)%7)==4||Nt==3&&Ht(Me.Ka)||(Tt=1));else{Tt=52;var Nt=(Me.Ga+7-Me.Ja-1)%7;(Nt==4||Nt==5&&Ht(Me.Ka%400-1))&&Tt++}return Ke(Tt,2)},"%w":Me=>Me.Ga,"%W":Me=>Ke(Math.floor((Me.Ja+7-(Me.Ga+6)%7)/7),2),"%y":Me=>(Me.Ka+1900).toString().substring(2),"%Y":Me=>Me.Ka+1900,"%z":Me=>{var Tt=0<=(Me=Me.ib);return Me=Math.abs(Me)/60,(Tt?"+":"-")+("0000"+(Me/60*100+Me%60)).slice(-4)},"%Z":Me=>Me.lb,"%%":()=>"%"},ae=ae.replace(/%%/g,"\0\0"),Zt)ae.includes(Qt)&&(ae=ae.replace(new RegExp(Qt,"g"),Zt[Qt](Te)));return Qt=function(Me){var Tt=Array(nt(Me)+1);return Et(Me,Tt,0,Tt.length),Tt}(ae=ae.replace(/\0\0/g,"%")),Qt.length>q?0:(mi(Qt,L),Qt.length-1)}We.Pa();var zn=[null,at,vt,_e,Ye,et,H,ue,xe,Be,le,Ve,lt,mt,kt,jt,Rr,Or,rr,hi,fi,Bn,Ln,Vn,di],lo={b:function(L,q,ae){throw new me(L>>>=0).Pa(q>>>0,ae>>>0),L},N:function(L){Gn(L>>>0,!A,1,!E,131072,!1),We.Sa()},k:function(L){L>>>=0,k?postMessage({cmd:"cleanupThread",thread:L}):Ge(L)},I:Pe,h:Ye,T:et,E:H,G:ue,U:xe,R:Be,J:le,Q:Ve,o:lt,F:mt,C:kt,S:jt,D:Rr,q:()=>!0,A:function(L,q){(L>>>=0)==q>>>0?setTimeout(()=>$t()):k?postMessage({targetThread:L,cmd:"checkMailbox"}):(L=We.Fa[L])&&L.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:sr,p:function(L){P&&We.Fa[L>>>0].ref()},t:function(L,q,ae){L=q+2097152>>>0<4194305-!!L?(L>>>0)+4294967296*q:NaN,ae>>>=0,L=new Date(1e3*L),b()[ae>>2>>>0]=L.getUTCSeconds(),b()[ae+4>>2>>>0]=L.getUTCMinutes(),b()[ae+8>>2>>>0]=L.getUTCHours(),b()[ae+12>>2>>>0]=L.getUTCDate(),b()[ae+16>>2>>>0]=L.getUTCMonth(),b()[ae+20>>2>>>0]=L.getUTCFullYear()-1900,b()[ae+24>>2>>>0]=L.getUTCDay(),L=(L.getTime()-Date.UTC(L.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,b()[ae+28>>2>>>0]=L},u:function(L,q,ae){L=q+2097152>>>0<4194305-!!L?(L>>>0)+4294967296*q:NaN,ae>>>=0,L=new Date(1e3*L),b()[ae>>2>>>0]=L.getSeconds(),b()[ae+4>>2>>>0]=L.getMinutes(),b()[ae+8>>2>>>0]=L.getHours(),b()[ae+12>>2>>>0]=L.getDate(),b()[ae+16>>2>>>0]=L.getMonth(),b()[ae+20>>2>>>0]=L.getFullYear()-1900,b()[ae+24>>2>>>0]=L.getDay(),q=(Ht(L.getFullYear())?Lt:lr)[L.getMonth()]+L.getDate()-1|0,b()[ae+28>>2>>>0]=q,b()[ae+36>>2>>>0]=-60*L.getTimezoneOffset(),q=new Date(L.getFullYear(),6,1).getTimezoneOffset();var Te=new Date(L.getFullYear(),0,1).getTimezoneOffset();L=0|(q!=Te&&L.getTimezoneOffset()==Math.min(Te,q)),b()[ae+32>>2>>>0]=L},v:function(L){L>>>=0;var q=new Date(b()[L+20>>2>>>0]+1900,b()[L+16>>2>>>0],b()[L+12>>2>>>0],b()[L+8>>2>>>0],b()[L+4>>2>>>0],b()[L>>2>>>0],0),ae=b()[L+32>>2>>>0],Te=q.getTimezoneOffset(),ke=new Date(q.getFullYear(),6,1).getTimezoneOffset(),Ke=new Date(q.getFullYear(),0,1).getTimezoneOffset(),it=Math.min(Ke,ke);return 0>ae?b()[L+32>>2>>>0]=+(ke!=Ke&&it==Te):0<ae!=(it==Te)&&(ke=Math.max(Ke,ke),q.setTime(q.getTime()+6e4*((0<ae?it:ke)-Te))),b()[L+24>>2>>>0]=q.getDay(),ae=(Ht(q.getFullYear())?Lt:lr)[q.getMonth()]+q.getDate()-1|0,b()[L+28>>2>>>0]=ae,b()[L>>2>>>0]=q.getSeconds(),b()[L+4>>2>>>0]=q.getMinutes(),b()[L+8>>2>>>0]=q.getHours(),b()[L+12>>2>>>0]=q.getDate(),b()[L+16>>2>>>0]=q.getMonth(),b()[L+20>>2>>>0]=q.getYear(),L=q.getTime()/1e3,Zn((be=L,1<=+Math.abs(be)?0<be?+Math.floor(be/4294967296)>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)),L>>>0},r:Or,s:rr,z:function(L,q,ae){function Te(Zt){return(Zt=Zt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Zt[1]:"GMT"}L>>>=0,q>>>=0,ae>>>=0;var ke=new Date().getFullYear(),Ke=new Date(ke,0,1),it=new Date(ke,6,1);ke=Ke.getTimezoneOffset();var Ft=it.getTimezoneOffset(),nr=Math.max(ke,Ft);g()[L>>2>>>0]=60*nr,b()[q>>2>>>0]=+(ke!=Ft),L=Te(Ke),q=Te(it),L=Lr(L),q=Lr(q),Ft<ke?(g()[ae>>2>>>0]=L,g()[ae+4>>2>>>0]=q):(g()[ae>>2>>>0]=q,g()[ae+4>>2>>>0]=L)},c:()=>{Oe("")},l:function(){},i:function(){return Date.now()},V:()=>{throw te+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return P?t(3993).cpus().length:navigator.hardwareConcurrency},K:function(L,q,ae,Te){for(We.pb=q>>>0,Kr.length=ae,q=Te>>>0>>3,Te=0;Te<ae;Te++)Kr[Te]=m()[q+Te>>>0];return zn[L].apply(null,Kr)},y:function(L){L>>>=0;var q=f().length;if(L<=q||4294901760<L)return!1;for(var ae=1;4>=ae;ae*=2){var Te=q*(1+.2/ae);Te=Math.min(Te,L+100663296);var ke=Math;Te=Math.max(L,Te);e:{ke=ke.min.call(ke,4294901760,Te+(65536-Te%65536)%65536)-K.buffer.byteLength+65535>>>16;try{K.grow(ke),Re();var Ke=1;break e}catch{}Ke=void 0}if(Ke)return!0}return!1},O:hi,P:fi,j:st,g:Bn,n:Ln,w:Vn,m:di,x:function(L,q){return L>>>=0,q>>>=0,pi(f().subarray(L>>>0,L+q>>>0)),0},a:K||u.wasmMemory,H:Un,d:function(L,q,ae,Te){return Un(L>>>0,q>>>0,ae>>>0,Te>>>0)}};(function(){function L(ae,Te){return ae=ae.exports,ee=ae=function(ke){var Ke=Ft=>()=>Ft()>>>0,it=Ft=>nr=>Ft(nr)>>>0;return(ke=Object.assign({},ke)).__errno_location=Ke(ke.__errno_location),ke.pthread_self=Ke(ke.pthread_self),ke.malloc=it(ke.malloc),ke.stackSave=Ke(ke.stackSave),ke.stackAlloc=it(ke.stackAlloc),ke}(ae),We.Ta.push(ee.sa),He=ee.ta,W.unshift(ee.W),he=Te,de(),ae}var q={a:lo};if(ve(),u.instantiateWasm)try{return u.instantiateWasm(q,L)}catch(ae){V("Module.instantiateWasm callback failed with error: "+ae),o(ae)}(function(ae,Te){var ke=ye;return U||typeof WebAssembly.instantiateStreaming!="function"||fe(ke)||ke.startsWith("file://")||P||typeof fetch!="function"?Ze(ke,ae,Te):fetch(ke,{credentials:"same-origin"}).then(Ke=>WebAssembly.instantiateStreaming(Ke,ae).then(Te,function(it){return V("wasm streaming compile failed: "+it),V("falling back to ArrayBuffer instantiation"),Ze(ke,ae,Te)}))})(q,function(ae){L(ae.instance,ae.module)}).catch(o)})(),u._OrtInit=(L,q)=>(u._OrtInit=ee.X)(L,q),u._OrtGetLastError=(L,q)=>(u._OrtGetLastError=ee.Y)(L,q),u._OrtCreateSessionOptions=(L,q,ae,Te,ke,Ke,it,Ft,nr,Zt)=>(u._OrtCreateSessionOptions=ee.Z)(L,q,ae,Te,ke,Ke,it,Ft,nr,Zt),u._OrtAppendExecutionProvider=(L,q)=>(u._OrtAppendExecutionProvider=ee._)(L,q),u._OrtAddSessionConfigEntry=(L,q,ae)=>(u._OrtAddSessionConfigEntry=ee.$)(L,q,ae),u._OrtReleaseSessionOptions=L=>(u._OrtReleaseSessionOptions=ee.aa)(L),u._OrtCreateSession=(L,q,ae)=>(u._OrtCreateSession=ee.ba)(L,q,ae),u._OrtReleaseSession=L=>(u._OrtReleaseSession=ee.ca)(L),u._OrtGetInputOutputCount=(L,q,ae)=>(u._OrtGetInputOutputCount=ee.da)(L,q,ae),u._OrtGetInputName=(L,q)=>(u._OrtGetInputName=ee.ea)(L,q),u._OrtGetOutputName=(L,q)=>(u._OrtGetOutputName=ee.fa)(L,q),u._OrtFree=L=>(u._OrtFree=ee.ga)(L),u._OrtCreateTensor=(L,q,ae,Te,ke)=>(u._OrtCreateTensor=ee.ha)(L,q,ae,Te,ke),u._OrtGetTensorData=(L,q,ae,Te,ke)=>(u._OrtGetTensorData=ee.ia)(L,q,ae,Te,ke),u._OrtReleaseTensor=L=>(u._OrtReleaseTensor=ee.ja)(L),u._OrtCreateRunOptions=(L,q,ae,Te)=>(u._OrtCreateRunOptions=ee.ka)(L,q,ae,Te),u._OrtAddRunConfigEntry=(L,q,ae)=>(u._OrtAddRunConfigEntry=ee.la)(L,q,ae),u._OrtReleaseRunOptions=L=>(u._OrtReleaseRunOptions=ee.ma)(L),u._OrtRun=(L,q,ae,Te,ke,Ke,it,Ft)=>(u._OrtRun=ee.na)(L,q,ae,Te,ke,Ke,it,Ft),u._OrtEndProfiling=L=>(u._OrtEndProfiling=ee.oa)(L);var sn=u._pthread_self=()=>(sn=u._pthread_self=ee.pa)(),ln=u._malloc=L=>(ln=u._malloc=ee.qa)(L);u._free=L=>(u._free=ee.ra)(L),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=ee.sa)();var Gn=u.__emscripten_thread_init=(L,q,ae,Te,ke,Ke)=>(Gn=u.__emscripten_thread_init=ee.ua)(L,q,ae,Te,ke,Ke);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=ee.va)();var vn,Hn=(L,q,ae,Te)=>(Hn=ee.wa)(L,q,ae,Te),_n=L=>(_n=ee.xa)(L),un=u.__emscripten_thread_exit=L=>(un=u.__emscripten_thread_exit=ee.ya)(L),bi=u.__emscripten_check_mailbox=()=>(bi=u.__emscripten_check_mailbox=ee.za)(),Zn=L=>(Zn=ee.Aa)(L),Tn=(L,q)=>(Tn=ee.Ba)(L,q),cn=()=>(cn=ee.Ca)(),kr=L=>(kr=ee.Da)(L),Sn=L=>(Sn=ee.Ea)(L);function Wn(){function L(){if(!vn&&(vn=!0,u.calledRun=!0,!Ee)&&(k||pt(W),l(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!k)){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var q=u.postRun.shift();X.unshift(q)}pt(X)}}if(!(0<Ae))if(k)l(u),k||pt(W),startWorker(u);else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)qe.unshift(u.preRun.shift());pt(qe),0<Ae||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),L()},1)):L())}}if(u.keepRuntimeAlive=ie,u.wasmMemory=K,u.stackAlloc=Sn,u.stackSave=cn,u.stackRestore=kr,u.UTF8ToString=Qe,u.stringToUTF8=Pt,u.lengthBytesUTF8=nt,u.ExitStatus=$e,u.PThread=We,J=function L(){vn||Wn(),vn||(J=L)},u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Wn(),s.ready});r.exports=a},932:(r,e,t)=>{var n,a=(n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(n=n||__filename),function(s={}){var c,f,b=s;b.ready=new Promise((Y,me)=>{c=Y,f=me});var g,m,l,o=Object.assign({},b),u="./this.program",d=(Y,me)=>{throw me},y=typeof window=="object",w=typeof importScripts=="function",_=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T="";if(_){var S=t(1384),E=t(908);T=w?E.dirname(T)+"/":__dirname+"/",g=(Y,me)=>(Y=Y.startsWith("file://")?new URL(Y):E.normalize(Y),S.readFileSync(Y,me?void 0:"utf8")),l=Y=>((Y=g(Y,!0)).buffer||(Y=new Uint8Array(Y)),Y),m=(Y,me,_e,Pe=!0)=>{Y=Y.startsWith("file://")?new URL(Y):E.normalize(Y),S.readFile(Y,Pe?void 0:"utf8",(Ye,et)=>{Ye?_e(Ye):me(Pe?et.buffer:et)})},!b.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),d=(Y,me)=>{throw process.exitCode=Y,me},b.inspect=()=>"[Emscripten Module object]"}else(y||w)&&(w?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),n&&(T=n),T=T.indexOf("blob:")!==0?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",g=Y=>{var me=new XMLHttpRequest;return me.open("GET",Y,!1),me.send(null),me.responseText},w&&(l=Y=>{var me=new XMLHttpRequest;return me.open("GET",Y,!1),me.responseType="arraybuffer",me.send(null),new Uint8Array(me.response)}),m=(Y,me,_e)=>{var Pe=new XMLHttpRequest;Pe.open("GET",Y,!0),Pe.responseType="arraybuffer",Pe.onload=()=>{Pe.status==200||Pe.status==0&&Pe.response?me(Pe.response):_e()},Pe.onerror=_e,Pe.send(null)});var A,P=b.print||console.log.bind(console),k=b.printErr||console.error.bind(console);Object.assign(b,o),o=null,b.thisProgram&&(u=b.thisProgram),b.quit&&(d=b.quit),b.wasmBinary&&(A=b.wasmBinary);var M=b.noExitRuntime||!0;typeof WebAssembly!="object"&&re("no native wasm support detected");var F,O,D,R,C,U,N=!1;function V(){var Y=F.buffer;b.HEAP8=D=new Int8Array(Y),b.HEAP16=new Int16Array(Y),b.HEAP32=C=new Int32Array(Y),b.HEAPU8=R=new Uint8Array(Y),b.HEAPU16=new Uint16Array(Y),b.HEAPU32=U=new Uint32Array(Y),b.HEAPF32=new Float32Array(Y),b.HEAPF64=new Float64Array(Y)}var j=[],K=[],ee=[];function he(){var Y=b.preRun.shift();j.unshift(Y)}var ge,Se,we=0,ne=null;function re(Y){throw b.onAbort&&b.onAbort(Y),k(Y="Aborted("+Y+")"),N=!0,Y=new WebAssembly.RuntimeError(Y+". Build with -sASSERTIONS for more info."),f(Y),Y}function oe(Y){return Y.startsWith("data:application/octet-stream;base64,")}if(!oe(ge="ort-wasm.wasm")){var Ee=ge;ge=b.locateFile?b.locateFile(Ee,T):T+Ee}function Re(Y){if(Y==ge&&A)return new Uint8Array(A);if(l)return l(Y);throw"both async and sync fetching of the wasm failed"}function De(Y,me,_e){return function(Pe){if(!A&&(y||w)){if(typeof fetch=="function"&&!Pe.startsWith("file://"))return fetch(Pe,{credentials:"same-origin"}).then(Ye=>{if(!Ye.ok)throw"failed to load wasm binary file at '"+Pe+"'";return Ye.arrayBuffer()}).catch(()=>Re(Pe));if(m)return new Promise((Ye,et)=>{m(Pe,nt=>Ye(new Uint8Array(nt)),et)})}return Promise.resolve().then(()=>Re(Pe))}(Y).then(Pe=>WebAssembly.instantiate(Pe,me)).then(Pe=>Pe).then(_e,Pe=>{k("failed to asynchronously prepare wasm: "+Pe),re(Pe)})}function He(Y){this.name="ExitStatus",this.message=`Program terminated with exit(${Y})`,this.status=Y}var qe=Y=>{for(;0<Y.length;)Y.shift()(b)};function W(Y){this.qa=Y-24,this.va=function(me){U[this.qa+4>>2>>>0]=me},this.ua=function(me){U[this.qa+8>>2>>>0]=me},this.sa=function(me,_e){this.ta(),this.va(me),this.ua(_e)},this.ta=function(){U[this.qa+16>>2>>>0]=0}}var X,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ie=(Y,me,_e)=>{var Pe=(me>>>=0)+_e;for(_e=me;Y[_e]&&!(_e>=Pe);)++_e;if(16<_e-me&&Y.buffer&&te)return te.decode(Y.subarray(me,_e));for(Pe="";me<_e;){var Ye=Y[me++];if(128&Ye){var et=63&Y[me++];if((224&Ye)==192)Pe+=String.fromCharCode((31&Ye)<<6|et);else{var nt=63&Y[me++];65536>(Ye=(240&Ye)==224?(15&Ye)<<12|et<<6|nt:(7&Ye)<<18|et<<12|nt<<6|63&Y[me++])?Pe+=String.fromCharCode(Ye):(Ye-=65536,Pe+=String.fromCharCode(55296|Ye>>10,56320|1023&Ye))}}else Pe+=String.fromCharCode(Ye)}return Pe},ye=(Y,me)=>(Y>>>=0)?ie(R,Y,me):"",be=Y=>{for(var me=0,_e=0;_e<Y.length;++_e){var Pe=Y.charCodeAt(_e);127>=Pe?me++:2047>=Pe?me+=2:55296<=Pe&&57343>=Pe?(me+=4,++_e):me+=3}return me},Ae=(Y,me,_e,Pe)=>{if(!(0<Pe))return 0;var Ye=_e>>>=0;Pe=_e+Pe-1;for(var et=0;et<Y.length;++et){var nt=Y.charCodeAt(et);if(55296<=nt&&57343>=nt&&(nt=65536+((1023&nt)<<10)|1023&Y.charCodeAt(++et)),127>=nt){if(_e>=Pe)break;me[_e++>>>0]=nt}else{if(2047>=nt){if(_e+1>=Pe)break;me[_e++>>>0]=192|nt>>6}else{if(65535>=nt){if(_e+2>=Pe)break;me[_e++>>>0]=224|nt>>12}else{if(_e+3>=Pe)break;me[_e++>>>0]=240|nt>>18,me[_e++>>>0]=128|nt>>12&63}me[_e++>>>0]=128|nt>>6&63}me[_e++>>>0]=128|63&nt}}return me[_e>>>0]=0,_e-Ye},J=Y=>Y%4==0&&(Y%100!=0||Y%400==0),ve=[0,31,60,91,121,152,182,213,244,274,305,335],de=[0,31,59,90,120,151,181,212,243,273,304,334],Oe=Y=>{var me=be(Y)+1,_e=ot(me);return _e&&Ae(Y,R,_e,me),_e},fe={},Ue=()=>{if(!X){var Y,me={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(Y in fe)fe[Y]===void 0?delete me[Y]:me[Y]=fe[Y];var _e=[];for(Y in me)_e.push(`${Y}=${me[Y]}`);X=_e}return X},Ze=[null,[],[]],$e=Y=>($e=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return Pe=>crypto.getRandomValues(Pe);if(_)try{var me=t(760);if(me.randomFillSync)return Pe=>me.randomFillSync(Pe);var _e=me.randomBytes;return Pe=>(Pe.set(_e(Pe.byteLength)),Pe)}catch{}re("initRandomDevice")})())(Y),Le=[31,29,31,30,31,30,31,31,30,31,30,31],Ge=[31,28,31,30,31,30,31,31,30,31,30,31];function ze(Y,me,_e,Pe){function Ye(le,Ve,lt){for(le=typeof le=="number"?le.toString():le||"";le.length<Ve;)le=lt[0]+le;return le}function et(le,Ve){return Ye(le,Ve,"0")}function nt(le,Ve){function lt(kt){return 0>kt?-1:0<kt?1:0}var mt;return(mt=lt(le.getFullYear()-Ve.getFullYear()))===0&&(mt=lt(le.getMonth()-Ve.getMonth()))===0&&(mt=lt(le.getDate()-Ve.getDate())),mt}function Et(le){switch(le.getDay()){case 0:return new Date(le.getFullYear()-1,11,29);case 1:return le;case 2:return new Date(le.getFullYear(),0,3);case 3:return new Date(le.getFullYear(),0,2);case 4:return new Date(le.getFullYear(),0,1);case 5:return new Date(le.getFullYear()-1,11,31);case 6:return new Date(le.getFullYear()-1,11,30)}}function Pt(le){var Ve=le.ma;for(le=new Date(new Date(le.na+1900,0,1).getTime());0<Ve;){var lt=le.getMonth(),mt=(J(le.getFullYear())?Le:Ge)[lt];if(!(Ve>mt-le.getDate())){le.setDate(le.getDate()+Ve);break}Ve-=mt-le.getDate()+1,le.setDate(1),11>lt?le.setMonth(lt+1):(le.setMonth(0),le.setFullYear(le.getFullYear()+1))}return lt=new Date(le.getFullYear()+1,0,4),Ve=Et(new Date(le.getFullYear(),0,4)),lt=Et(lt),0>=nt(Ve,le)?0>=nt(lt,le)?le.getFullYear()+1:le.getFullYear():le.getFullYear()-1}Y>>>=0,me>>>=0,_e>>>=0;var H=C[40+(Pe>>>=0)>>2>>>0];for(var ue in Pe={ya:C[Pe>>2>>>0],xa:C[Pe+4>>2>>>0],oa:C[Pe+8>>2>>>0],ra:C[Pe+12>>2>>>0],pa:C[Pe+16>>2>>>0],na:C[Pe+20>>2>>>0],ha:C[Pe+24>>2>>>0],ma:C[Pe+28>>2>>>0],Aa:C[Pe+32>>2>>>0],wa:C[Pe+36>>2>>>0],za:H?ye(H):""},_e=ye(_e),H={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})_e=_e.replace(new RegExp(ue,"g"),H[ue]);var xe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Be="January February March April May June July August September October November December".split(" ");for(ue in H={"%a":le=>xe[le.ha].substring(0,3),"%A":le=>xe[le.ha],"%b":le=>Be[le.pa].substring(0,3),"%B":le=>Be[le.pa],"%C":le=>et((le.na+1900)/100|0,2),"%d":le=>et(le.ra,2),"%e":le=>Ye(le.ra,2," "),"%g":le=>Pt(le).toString().substring(2),"%G":le=>Pt(le),"%H":le=>et(le.oa,2),"%I":le=>((le=le.oa)==0?le=12:12<le&&(le-=12),et(le,2)),"%j":le=>{for(var Ve=0,lt=0;lt<=le.pa-1;Ve+=(J(le.na+1900)?Le:Ge)[lt++]);return et(le.ra+Ve,3)},"%m":le=>et(le.pa+1,2),"%M":le=>et(le.xa,2),"%n":()=>`
`,"%p":le=>0<=le.oa&&12>le.oa?"AM":"PM","%S":le=>et(le.ya,2),"%t":()=>"	","%u":le=>le.ha||7,"%U":le=>et(Math.floor((le.ma+7-le.ha)/7),2),"%V":le=>{var Ve=Math.floor((le.ma+7-(le.ha+6)%7)/7);if(2>=(le.ha+371-le.ma-2)%7&&Ve++,Ve)Ve==53&&((lt=(le.ha+371-le.ma)%7)==4||lt==3&&J(le.na)||(Ve=1));else{Ve=52;var lt=(le.ha+7-le.ma-1)%7;(lt==4||lt==5&&J(le.na%400-1))&&Ve++}return et(Ve,2)},"%w":le=>le.ha,"%W":le=>et(Math.floor((le.ma+7-(le.ha+6)%7)/7),2),"%y":le=>(le.na+1900).toString().substring(2),"%Y":le=>le.na+1900,"%z":le=>{var Ve=0<=(le=le.wa);return le=Math.abs(le)/60,(Ve?"+":"-")+("0000"+(le/60*100+le%60)).slice(-4)},"%Z":le=>le.za,"%%":()=>"%"},_e=_e.replace(/%%/g,"\0\0"),H)_e.includes(ue)&&(_e=_e.replace(new RegExp(ue,"g"),H[ue](Pe)));return ue=function(le){var Ve=Array(be(le)+1);return Ae(le,Ve,0,Ve.length),Ve}(_e=_e.replace(/\0\0/g,"%")),ue.length>me?0:(D.set(ue,Y>>>0),ue.length-1)}var Je={a:function(Y,me,_e){throw new W(Y>>>=0).sa(me>>>0,_e>>>0),Y},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(Y,me,_e){Y=me+2097152>>>0<4194305-!!Y?(Y>>>0)+4294967296*me:NaN,_e>>>=0,Y=new Date(1e3*Y),C[_e>>2>>>0]=Y.getUTCSeconds(),C[_e+4>>2>>>0]=Y.getUTCMinutes(),C[_e+8>>2>>>0]=Y.getUTCHours(),C[_e+12>>2>>>0]=Y.getUTCDate(),C[_e+16>>2>>>0]=Y.getUTCMonth(),C[_e+20>>2>>>0]=Y.getUTCFullYear()-1900,C[_e+24>>2>>>0]=Y.getUTCDay(),C[_e+28>>2>>>0]=(Y.getTime()-Date.UTC(Y.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(Y,me,_e){Y=me+2097152>>>0<4194305-!!Y?(Y>>>0)+4294967296*me:NaN,_e>>>=0,Y=new Date(1e3*Y),C[_e>>2>>>0]=Y.getSeconds(),C[_e+4>>2>>>0]=Y.getMinutes(),C[_e+8>>2>>>0]=Y.getHours(),C[_e+12>>2>>>0]=Y.getDate(),C[_e+16>>2>>>0]=Y.getMonth(),C[_e+20>>2>>>0]=Y.getFullYear()-1900,C[_e+24>>2>>>0]=Y.getDay(),C[_e+28>>2>>>0]=(J(Y.getFullYear())?ve:de)[Y.getMonth()]+Y.getDate()-1|0,C[_e+36>>2>>>0]=-60*Y.getTimezoneOffset(),me=new Date(Y.getFullYear(),6,1).getTimezoneOffset();var Pe=new Date(Y.getFullYear(),0,1).getTimezoneOffset();C[_e+32>>2>>>0]=0|(me!=Pe&&Y.getTimezoneOffset()==Math.min(Pe,me))},p:function(Y){Y>>>=0;var me=new Date(C[Y+20>>2>>>0]+1900,C[Y+16>>2>>>0],C[Y+12>>2>>>0],C[Y+8>>2>>>0],C[Y+4>>2>>>0],C[Y>>2>>>0],0),_e=C[Y+32>>2>>>0],Pe=me.getTimezoneOffset(),Ye=new Date(me.getFullYear(),6,1).getTimezoneOffset(),et=new Date(me.getFullYear(),0,1).getTimezoneOffset(),nt=Math.min(et,Ye);return 0>_e?C[Y+32>>2>>>0]=+(Ye!=et&&nt==Pe):0<_e!=(nt==Pe)&&(Ye=Math.max(et,Ye),me.setTime(me.getTime()+6e4*((0<_e?nt:Ye)-Pe))),C[Y+24>>2>>>0]=me.getDay(),C[Y+28>>2>>>0]=(J(me.getFullYear())?ve:de)[me.getMonth()]+me.getDate()-1|0,C[Y>>2>>>0]=me.getSeconds(),C[Y+4>>2>>>0]=me.getMinutes(),C[Y+8>>2>>>0]=me.getHours(),C[Y+12>>2>>>0]=me.getDate(),C[Y+16>>2>>>0]=me.getMonth(),C[Y+20>>2>>>0]=me.getYear(),Y=me.getTime()/1e3,at((Se=Y,1<=+Math.abs(Se)?0<Se?+Math.floor(Se/4294967296)>>>0:~~+Math.ceil((Se-+(~~Se>>>0))/4294967296)>>>0:0)),Y>>>0},l:function(){return-52},m:function(){},u:function(Y,me,_e){function Pe(Pt){return(Pt=Pt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Pt[1]:"GMT"}_e>>>=0;var Ye=new Date().getFullYear(),et=new Date(Ye,0,1),nt=new Date(Ye,6,1);Ye=et.getTimezoneOffset();var Et=nt.getTimezoneOffset();U[Y>>>0>>2>>>0]=60*Math.max(Ye,Et),C[me>>>0>>2>>>0]=+(Ye!=Et),Y=Pe(et),me=Pe(nt),Y=Oe(Y),me=Oe(me),Et<Ye?(U[_e>>2>>>0]=Y,U[_e+4>>2>>>0]=me):(U[_e>>2>>>0]=me,U[_e+4>>2>>>0]=Y)},d:()=>{re("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(Y,me,_e){return me>>>=0,R.copyWithin(Y>>>0>>>0,me>>>0,me+(_e>>>0)>>>0)},t:function(Y){Y>>>=0;var me=R.length;if(4294901760<Y)return!1;for(var _e=1;4>=_e;_e*=2){var Pe=me*(1+.2/_e);Pe=Math.min(Pe,Y+100663296);var Ye=Math;Pe=Math.max(Y,Pe);e:{Ye=Ye.min.call(Ye,4294901760,Pe+(65536-Pe%65536)%65536)-F.buffer.byteLength+65535>>>16;try{F.grow(Ye),V();var et=1;break e}catch{}et=void 0}if(et)return!0}return!1},D:function(Y,me){Y>>>=0,me>>>=0;var _e=0;return Ue().forEach(function(Pe,Ye){var et=me+_e;for(Ye=U[Y+4*Ye>>2>>>0]=et,et=0;et<Pe.length;++et)D[Ye++>>0>>>0]=Pe.charCodeAt(et);D[Ye>>0>>>0]=0,_e+=Pe.length+1}),0},E:function(Y,me){Y>>>=0,me>>>=0;var _e=Ue();U[Y>>2>>>0]=_e.length;var Pe=0;return _e.forEach(function(Ye){Pe+=Ye.length+1}),U[me>>2>>>0]=Pe,0},s:Y=>{M||(b.onExit&&b.onExit(Y),N=!0),d(Y,new He(Y))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(Y,me,_e,Pe){me>>>=0,_e>>>=0,Pe>>>=0;for(var Ye=0,et=0;et<_e;et++){var nt=U[me>>2>>>0],Et=U[me+4>>2>>>0];me+=8;for(var Pt=0;Pt<Et;Pt++){var H=R[nt+Pt>>>0],ue=Ze[Y];H===0||H===10?((Y===1?P:k)(ie(ue,0)),ue.length=0):ue.push(H)}Ye+=Et}return U[Pe>>2>>>0]=Ye,0},r:function(Y,me){return Y>>>=0,$e(R.subarray(Y>>>0,Y+(me>>>0)>>>0)),0},C:ze,c:function(Y,me,_e,Pe){return ze(Y>>>0,me>>>0,_e>>>0,Pe>>>0)}};(function(){function Y(_e){if(_e=_e.exports,O=_e=function(Ye){var et=Et=>()=>Et()>>>0,nt=Et=>Pt=>Et(Pt)>>>0;return(Ye=Object.assign({},Ye)).__errno_location=et(Ye.__errno_location),Ye.malloc=nt(Ye.malloc),Ye.stackSave=et(Ye.stackSave),Ye.stackAlloc=nt(Ye.stackAlloc),Ye}(_e),F=O.L,V(),K.unshift(O.M),we--,b.monitorRunDependencies&&b.monitorRunDependencies(we),we==0&&ne){var Pe=ne;ne=null,Pe()}return _e}var me={a:Je};if(we++,b.monitorRunDependencies&&b.monitorRunDependencies(we),b.instantiateWasm)try{return b.instantiateWasm(me,Y)}catch(_e){k("Module.instantiateWasm callback failed with error: "+_e),f(_e)}(function(_e,Pe){var Ye=ge;return A||typeof WebAssembly.instantiateStreaming!="function"||oe(Ye)||Ye.startsWith("file://")||_||typeof fetch!="function"?De(Ye,_e,Pe):fetch(Ye,{credentials:"same-origin"}).then(et=>WebAssembly.instantiateStreaming(et,_e).then(Pe,function(nt){return k("wasm streaming compile failed: "+nt),k("falling back to ArrayBuffer instantiation"),De(Ye,_e,Pe)}))})(me,function(_e){Y(_e.instance)}).catch(f)})(),b._OrtInit=(Y,me)=>(b._OrtInit=O.N)(Y,me),b._OrtGetLastError=(Y,me)=>(b._OrtGetLastError=O.O)(Y,me),b._OrtCreateSessionOptions=(Y,me,_e,Pe,Ye,et,nt,Et,Pt,H)=>(b._OrtCreateSessionOptions=O.P)(Y,me,_e,Pe,Ye,et,nt,Et,Pt,H),b._OrtAppendExecutionProvider=(Y,me)=>(b._OrtAppendExecutionProvider=O.Q)(Y,me),b._OrtAddSessionConfigEntry=(Y,me,_e)=>(b._OrtAddSessionConfigEntry=O.R)(Y,me,_e),b._OrtReleaseSessionOptions=Y=>(b._OrtReleaseSessionOptions=O.S)(Y),b._OrtCreateSession=(Y,me,_e)=>(b._OrtCreateSession=O.T)(Y,me,_e),b._OrtReleaseSession=Y=>(b._OrtReleaseSession=O.U)(Y),b._OrtGetInputOutputCount=(Y,me,_e)=>(b._OrtGetInputOutputCount=O.V)(Y,me,_e),b._OrtGetInputName=(Y,me)=>(b._OrtGetInputName=O.W)(Y,me),b._OrtGetOutputName=(Y,me)=>(b._OrtGetOutputName=O.X)(Y,me),b._OrtFree=Y=>(b._OrtFree=O.Y)(Y),b._OrtCreateTensor=(Y,me,_e,Pe,Ye)=>(b._OrtCreateTensor=O.Z)(Y,me,_e,Pe,Ye),b._OrtGetTensorData=(Y,me,_e,Pe,Ye)=>(b._OrtGetTensorData=O._)(Y,me,_e,Pe,Ye),b._OrtReleaseTensor=Y=>(b._OrtReleaseTensor=O.$)(Y),b._OrtCreateRunOptions=(Y,me,_e,Pe)=>(b._OrtCreateRunOptions=O.aa)(Y,me,_e,Pe),b._OrtAddRunConfigEntry=(Y,me,_e)=>(b._OrtAddRunConfigEntry=O.ba)(Y,me,_e),b._OrtReleaseRunOptions=Y=>(b._OrtReleaseRunOptions=O.ca)(Y),b._OrtRun=(Y,me,_e,Pe,Ye,et,nt,Et)=>(b._OrtRun=O.da)(Y,me,_e,Pe,Ye,et,nt,Et),b._OrtEndProfiling=Y=>(b._OrtEndProfiling=O.ea)(Y);var ot=b._malloc=Y=>(ot=b._malloc=O.fa)(Y);b._free=Y=>(b._free=O.ga)(Y);var Qe,at=Y=>(at=O.ia)(Y),st=()=>(st=O.ja)(),We=Y=>(We=O.ka)(Y),pt=Y=>(pt=O.la)(Y);function vt(){function Y(){if(!Qe&&(Qe=!0,b.calledRun=!0,!N)){if(qe(K),c(b),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for(typeof b.postRun=="function"&&(b.postRun=[b.postRun]);b.postRun.length;){var me=b.postRun.shift();ee.unshift(me)}qe(ee)}}if(!(0<we)){if(b.preRun)for(typeof b.preRun=="function"&&(b.preRun=[b.preRun]);b.preRun.length;)he();qe(j),0<we||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),Y()},1)):Y())}}if(b.stackAlloc=pt,b.stackSave=st,b.stackRestore=We,b.UTF8ToString=ye,b.stringToUTF8=(Y,me,_e)=>Ae(Y,R,me,_e),b.lengthBytesUTF8=be,ne=function Y(){Qe||vt(),Qe||(ne=Y)},b.preInit)for(typeof b.preInit=="function"&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return vt(),s.ready});r.exports=a},4537:r=>{r.exports=function(e,t){for(var n=new Array(arguments.length-1),a=0,s=2,c=!0;s<arguments.length;)n[a++]=arguments[s++];return new Promise(function(f,b){n[a]=function(g){if(c)if(c=!1,g)b(g);else{for(var m=new Array(arguments.length-1),l=0;l<m.length;)m[l++]=arguments[l];f.apply(null,m)}};try{e.apply(t||null,n)}catch(g){c&&(c=!1,b(g))}})}},7419:(r,e)=>{var t=e;t.length=function(f){var b=f.length;if(!b)return 0;for(var g=0;--b%4>1&&f.charAt(b)==="=";)++g;return Math.ceil(3*f.length)/4-g};for(var n=new Array(64),a=new Array(123),s=0;s<64;)a[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;t.encode=function(f,b,g){for(var m,l=null,o=[],u=0,d=0;b<g;){var y=f[b++];switch(d){case 0:o[u++]=n[y>>2],m=(3&y)<<4,d=1;break;case 1:o[u++]=n[m|y>>4],m=(15&y)<<2,d=2;break;case 2:o[u++]=n[m|y>>6],o[u++]=n[63&y],d=0}u>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,o)),u=0)}return d&&(o[u++]=n[m],o[u++]=61,d===1&&(o[u++]=61)),l?(u&&l.push(String.fromCharCode.apply(String,o.slice(0,u))),l.join("")):String.fromCharCode.apply(String,o.slice(0,u))};var c="invalid encoding";t.decode=function(f,b,g){for(var m,l=g,o=0,u=0;u<f.length;){var d=f.charCodeAt(u++);if(d===61&&o>1)break;if((d=a[d])===void 0)throw Error(c);switch(o){case 0:m=d,o=1;break;case 1:b[g++]=m<<2|(48&d)>>4,m=d,o=2;break;case 2:b[g++]=(15&m)<<4|(60&d)>>2,m=d,o=3;break;case 3:b[g++]=(3&m)<<6|d,o=0}}if(o===1)throw Error(c);return g-l},t.test=function(f){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(f)}},9211:r=>{function e(){this._listeners={}}r.exports=e,e.prototype.on=function(t,n,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:a||this}),this},e.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],s=0;s<a.length;)a[s].fn===n?a.splice(s,1):++s;return this},e.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var a=[],s=1;s<arguments.length;)a.push(arguments[s++]);for(s=0;s<n.length;)n[s].fn.apply(n[s++].ctx,a)}return this}},945:r=>{function e(c){return typeof Float32Array<"u"?function(){var f=new Float32Array([-0]),b=new Uint8Array(f.buffer),g=b[3]===128;function m(d,y,w){f[0]=d,y[w]=b[0],y[w+1]=b[1],y[w+2]=b[2],y[w+3]=b[3]}function l(d,y,w){f[0]=d,y[w]=b[3],y[w+1]=b[2],y[w+2]=b[1],y[w+3]=b[0]}function o(d,y){return b[0]=d[y],b[1]=d[y+1],b[2]=d[y+2],b[3]=d[y+3],f[0]}function u(d,y){return b[3]=d[y],b[2]=d[y+1],b[1]=d[y+2],b[0]=d[y+3],f[0]}c.writeFloatLE=g?m:l,c.writeFloatBE=g?l:m,c.readFloatLE=g?o:u,c.readFloatBE=g?u:o}():function(){function f(g,m,l,o){var u=m<0?1:0;if(u&&(m=-m),m===0)g(1/m>0?0:2147483648,l,o);else if(isNaN(m))g(2143289344,l,o);else if(m>34028234663852886e22)g((u<<31|2139095040)>>>0,l,o);else if(m<11754943508222875e-54)g((u<<31|Math.round(m/1401298464324817e-60))>>>0,l,o);else{var d=Math.floor(Math.log(m)/Math.LN2);g((u<<31|d+127<<23|8388607&Math.round(m*Math.pow(2,-d)*8388608))>>>0,l,o)}}function b(g,m,l){var o=g(m,l),u=2*(o>>31)+1,d=o>>>23&255,y=8388607&o;return d===255?y?NaN:u*(1/0):d===0?1401298464324817e-60*u*y:u*Math.pow(2,d-150)*(y+8388608)}c.writeFloatLE=f.bind(null,t),c.writeFloatBE=f.bind(null,n),c.readFloatLE=b.bind(null,a),c.readFloatBE=b.bind(null,s)}(),typeof Float64Array<"u"?function(){var f=new Float64Array([-0]),b=new Uint8Array(f.buffer),g=b[7]===128;function m(d,y,w){f[0]=d,y[w]=b[0],y[w+1]=b[1],y[w+2]=b[2],y[w+3]=b[3],y[w+4]=b[4],y[w+5]=b[5],y[w+6]=b[6],y[w+7]=b[7]}function l(d,y,w){f[0]=d,y[w]=b[7],y[w+1]=b[6],y[w+2]=b[5],y[w+3]=b[4],y[w+4]=b[3],y[w+5]=b[2],y[w+6]=b[1],y[w+7]=b[0]}function o(d,y){return b[0]=d[y],b[1]=d[y+1],b[2]=d[y+2],b[3]=d[y+3],b[4]=d[y+4],b[5]=d[y+5],b[6]=d[y+6],b[7]=d[y+7],f[0]}function u(d,y){return b[7]=d[y],b[6]=d[y+1],b[5]=d[y+2],b[4]=d[y+3],b[3]=d[y+4],b[2]=d[y+5],b[1]=d[y+6],b[0]=d[y+7],f[0]}c.writeDoubleLE=g?m:l,c.writeDoubleBE=g?l:m,c.readDoubleLE=g?o:u,c.readDoubleBE=g?u:o}():function(){function f(g,m,l,o,u,d){var y=o<0?1:0;if(y&&(o=-o),o===0)g(0,u,d+m),g(1/o>0?0:2147483648,u,d+l);else if(isNaN(o))g(0,u,d+m),g(2146959360,u,d+l);else if(o>17976931348623157e292)g(0,u,d+m),g((y<<31|2146435072)>>>0,u,d+l);else{var w;if(o<22250738585072014e-324)g((w=o/5e-324)>>>0,u,d+m),g((y<<31|w/4294967296)>>>0,u,d+l);else{var _=Math.floor(Math.log(o)/Math.LN2);_===1024&&(_=1023),g(4503599627370496*(w=o*Math.pow(2,-_))>>>0,u,d+m),g((y<<31|_+1023<<20|1048576*w&1048575)>>>0,u,d+l)}}}function b(g,m,l,o,u){var d=g(o,u+m),y=g(o,u+l),w=2*(y>>31)+1,_=y>>>20&2047,T=4294967296*(1048575&y)+d;return _===2047?T?NaN:w*(1/0):_===0?5e-324*w*T:w*Math.pow(2,_-1075)*(T+4503599627370496)}c.writeDoubleLE=f.bind(null,t,0,4),c.writeDoubleBE=f.bind(null,n,4,0),c.readDoubleLE=b.bind(null,a,0,4),c.readDoubleBE=b.bind(null,s,4,0)}(),c}function t(c,f,b){f[b]=255&c,f[b+1]=c>>>8&255,f[b+2]=c>>>16&255,f[b+3]=c>>>24}function n(c,f,b){f[b]=c>>>24,f[b+1]=c>>>16&255,f[b+2]=c>>>8&255,f[b+3]=255&c}function a(c,f){return(c[f]|c[f+1]<<8|c[f+2]<<16|c[f+3]<<24)>>>0}function s(c,f){return(c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3])>>>0}r.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}module.exports=inquire},6662:r=>{r.exports=function(e,t,n){var a=n||8192,s=a>>>1,c=null,f=a;return function(b){if(b<1||b>s)return e(b);f+b>a&&(c=e(a),f=0);var g=t.call(c,f,f+=b);return 7&f&&(f=1+(7|f)),g}}},4997:(r,e)=>{var t=e;t.length=function(n){for(var a=0,s=0,c=0;c<n.length;++c)(s=n.charCodeAt(c))<128?a+=1:s<2048?a+=2:(64512&s)==55296&&(64512&n.charCodeAt(c+1))==56320?(++c,a+=4):a+=3;return a},t.read=function(n,a,s){if(s-a<1)return"";for(var c,f=null,b=[],g=0;a<s;)(c=n[a++])<128?b[g++]=c:c>191&&c<224?b[g++]=(31&c)<<6|63&n[a++]:c>239&&c<365?(c=((7&c)<<18|(63&n[a++])<<12|(63&n[a++])<<6|63&n[a++])-65536,b[g++]=55296+(c>>10),b[g++]=56320+(1023&c)):b[g++]=(15&c)<<12|(63&n[a++])<<6|63&n[a++],g>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,b)),g=0);return f?(g&&f.push(String.fromCharCode.apply(String,b.slice(0,g))),f.join("")):String.fromCharCode.apply(String,b.slice(0,g))},t.write=function(n,a,s){for(var c,f,b=s,g=0;g<n.length;++g)(c=n.charCodeAt(g))<128?a[s++]=c:c<2048?(a[s++]=c>>6|192,a[s++]=63&c|128):(64512&c)==55296&&(64512&(f=n.charCodeAt(g+1)))==56320?(c=65536+((1023&c)<<10)+(1023&f),++g,a[s++]=c>>18|240,a[s++]=c>>12&63|128,a[s++]=c>>6&63|128,a[s++]=63&c|128):(a[s++]=c>>12|224,a[s++]=c>>6&63|128,a[s++]=63&c|128);return s-b}},3442:(r,e)=>{e.__esModule=!0;var t=function(){function n(a){if(!a)throw new TypeError("Invalid argument; `value` has no value.");this.value=n.EMPTY,a&&n.isGuid(a)&&(this.value=a)}return n.isGuid=function(a){var s=a.toString();return a&&(a instanceof n||n.validator.test(s))},n.create=function(){return new n([n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-"))},n.createEmpty=function(){return new n("emptyguid")},n.parse=function(a){return new n(a)},n.raw=function(){return[n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-")},n.gen=function(a){for(var s="",c=0;c<a;c++)s+=(65536*(1+Math.random())|0).toString(16).substring(1);return s},n.prototype.equals=function(a){return n.isGuid(a)&&this.value===a.toString()},n.prototype.isEmpty=function(){return this.value===n.EMPTY},n.prototype.toString=function(){return this.value},n.prototype.toJSON=function(){return{value:this.value}},n.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),n.EMPTY="00000000-0000-0000-0000-000000000000",n}();e.Guid=t},2100:(r,e,t)=>{r.exports=t(9482)},9482:(r,e,t)=>{var n=e;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=t(1173),n.BufferWriter=t(3155),n.Reader=t(1408),n.BufferReader=t(593),n.util=t(9693),n.rpc=t(5994),n.roots=t(5054),n.configure=a,a()},1408:(r,e,t)=>{r.exports=b;var n,a=t(9693),s=a.LongBits,c=a.utf8;function f(y,w){return RangeError("index out of range: "+y.pos+" + "+(w||1)+" > "+y.len)}function b(y){this.buf=y,this.pos=0,this.len=y.length}var g,m=typeof Uint8Array<"u"?function(y){if(y instanceof Uint8Array||Array.isArray(y))return new b(y);throw Error("illegal buffer")}:function(y){if(Array.isArray(y))return new b(y);throw Error("illegal buffer")},l=function(){return a.Buffer?function(y){return(b.create=function(w){return a.Buffer.isBuffer(w)?new n(w):m(w)})(y)}:m};function o(){var y=new s(0,0),w=0;if(!(this.len-this.pos>4)){for(;w<3;++w){if(this.pos>=this.len)throw f(this);if(y.lo=(y.lo|(127&this.buf[this.pos])<<7*w)>>>0,this.buf[this.pos++]<128)return y}return y.lo=(y.lo|(127&this.buf[this.pos++])<<7*w)>>>0,y}for(;w<4;++w)if(y.lo=(y.lo|(127&this.buf[this.pos])<<7*w)>>>0,this.buf[this.pos++]<128)return y;if(y.lo=(y.lo|(127&this.buf[this.pos])<<28)>>>0,y.hi=(y.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return y;if(w=0,this.len-this.pos>4){for(;w<5;++w)if(y.hi=(y.hi|(127&this.buf[this.pos])<<7*w+3)>>>0,this.buf[this.pos++]<128)return y}else for(;w<5;++w){if(this.pos>=this.len)throw f(this);if(y.hi=(y.hi|(127&this.buf[this.pos])<<7*w+3)>>>0,this.buf[this.pos++]<128)return y}throw Error("invalid varint encoding")}function u(y,w){return(y[w-4]|y[w-3]<<8|y[w-2]<<16|y[w-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw f(this,8);return new s(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}b.create=l(),b.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,b.prototype.uint32=(g=4294967295,function(){if(g=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(g=(g|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,f(this,10);return g}),b.prototype.int32=function(){return 0|this.uint32()},b.prototype.sint32=function(){var y=this.uint32();return y>>>1^-(1&y)|0},b.prototype.bool=function(){return this.uint32()!==0},b.prototype.fixed32=function(){if(this.pos+4>this.len)throw f(this,4);return u(this.buf,this.pos+=4)},b.prototype.sfixed32=function(){if(this.pos+4>this.len)throw f(this,4);return 0|u(this.buf,this.pos+=4)},b.prototype.float=function(){if(this.pos+4>this.len)throw f(this,4);var y=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,y},b.prototype.double=function(){if(this.pos+8>this.len)throw f(this,4);var y=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,y},b.prototype.bytes=function(){var y=this.uint32(),w=this.pos,_=this.pos+y;if(_>this.len)throw f(this,y);return this.pos+=y,Array.isArray(this.buf)?this.buf.slice(w,_):w===_?new this.buf.constructor(0):this._slice.call(this.buf,w,_)},b.prototype.string=function(){var y=this.bytes();return c.read(y,0,y.length)},b.prototype.skip=function(y){if(typeof y=="number"){if(this.pos+y>this.len)throw f(this,y);this.pos+=y}else do if(this.pos>=this.len)throw f(this);while(128&this.buf[this.pos++]);return this},b.prototype.skipType=function(y){switch(y){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(y=7&this.uint32())!=4;)this.skipType(y);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+y+" at offset "+this.pos)}return this},b._configure=function(y){n=y,b.create=l(),n._configure();var w=a.Long?"toLong":"toNumber";a.merge(b.prototype,{int64:function(){return o.call(this)[w](!1)},uint64:function(){return o.call(this)[w](!0)},sint64:function(){return o.call(this).zzDecode()[w](!1)},fixed64:function(){return d.call(this)[w](!0)},sfixed64:function(){return d.call(this)[w](!1)}})}},593:(r,e,t)=>{r.exports=s;var n=t(1408);(s.prototype=Object.create(n.prototype)).constructor=s;var a=t(9693);function s(c){n.call(this,c)}s._configure=function(){a.Buffer&&(s.prototype._slice=a.Buffer.prototype.slice)},s.prototype.string=function(){var c=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+c,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+c,this.len))},s._configure()},5054:r=>{r.exports={}},5994:(r,e,t)=>{e.Service=t(7948)},7948:(r,e,t)=>{r.exports=a;var n=t(9693);function a(s,c,f){if(typeof s!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=s,this.requestDelimited=!!c,this.responseDelimited=!!f}(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function s(c,f,b,g,m){if(!g)throw TypeError("request must be specified");var l=this;if(!m)return n.asPromise(s,l,c,f,b,g);if(l.rpcImpl)try{return l.rpcImpl(c,f[l.requestDelimited?"encodeDelimited":"encode"](g).finish(),function(o,u){if(o)return l.emit("error",o,c),m(o);if(u!==null){if(!(u instanceof b))try{u=b[l.responseDelimited?"decodeDelimited":"decode"](u)}catch(d){return l.emit("error",d,c),m(d)}return l.emit("data",u,c),m(null,u)}l.end(!0)})}catch(o){return l.emit("error",o,c),void setTimeout(function(){m(o)},0)}else setTimeout(function(){m(Error("already ended"))},0)},a.prototype.end=function(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(r,e,t)=>{r.exports=a;var n=t(9693);function a(b,g){this.lo=b>>>0,this.hi=g>>>0}var s=a.zero=new a(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var c=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(b){if(b===0)return s;var g=b<0;g&&(b=-b);var m=b>>>0,l=(b-m)/4294967296>>>0;return g&&(l=~l>>>0,m=~m>>>0,++m>4294967295&&(m=0,++l>4294967295&&(l=0))),new a(m,l)},a.from=function(b){if(typeof b=="number")return a.fromNumber(b);if(n.isString(b)){if(!n.Long)return a.fromNumber(parseInt(b,10));b=n.Long.fromString(b)}return b.low||b.high?new a(b.low>>>0,b.high>>>0):s},a.prototype.toNumber=function(b){if(!b&&this.hi>>>31){var g=1+~this.lo>>>0,m=~this.hi>>>0;return g||(m=m+1>>>0),-(g+4294967296*m)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(b){return n.Long?new n.Long(0|this.lo,0|this.hi,!!b):{low:0|this.lo,high:0|this.hi,unsigned:!!b}};var f=String.prototype.charCodeAt;a.fromHash=function(b){return b===c?s:new a((f.call(b,0)|f.call(b,1)<<8|f.call(b,2)<<16|f.call(b,3)<<24)>>>0,(f.call(b,4)|f.call(b,5)<<8|f.call(b,6)<<16|f.call(b,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var b=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^b)>>>0,this.lo=(this.lo<<1^b)>>>0,this},a.prototype.zzDecode=function(){var b=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^b)>>>0,this.hi=(this.hi>>>1^b)>>>0,this},a.prototype.length=function(){var b=this.lo,g=(this.lo>>>28|this.hi<<4)>>>0,m=this.hi>>>24;return m===0?g===0?b<16384?b<128?1:2:b<2097152?3:4:g<16384?g<128?5:6:g<2097152?7:8:m<128?9:10}},9693:function(r,e,t){var n=e;function a(c,f,b){for(var g=Object.keys(f),m=0;m<g.length;++m)c[g[m]]!==void 0&&b||(c[g[m]]=f[g[m]]);return c}function s(c){function f(b,g){if(!(this instanceof f))return new f(b,g);Object.defineProperty(this,"message",{get:function(){return b}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),g&&a(this,g)}return f.prototype=Object.create(Error.prototype,{constructor:{value:f,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return c},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),f}n.asPromise=t(4537),n.base64=t(7419),n.EventEmitter=t(9211),n.float=t(945),n.inquire=t(7199),n.utf8=t(4997),n.pool=t(6662),n.LongBits=t(1945),n.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},n.isString=function(c){return typeof c=="string"||c instanceof String},n.isObject=function(c){return c&&typeof c=="object"},n.isset=n.isSet=function(c,f){var b=c[f];return!(b==null||!c.hasOwnProperty(f))&&(typeof b!="object"||(Array.isArray(b)?b.length:Object.keys(b).length)>0)},n.Buffer=function(){try{var c=n.inquire("buffer").Buffer;return c.prototype.utf8Write?c:null}catch{return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(c){return typeof c=="number"?n.Buffer?n._Buffer_allocUnsafe(c):new n.Array(c):n.Buffer?n._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},n.Array=typeof Uint8Array<"u"?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(c){return c?n.LongBits.from(c).toHash():n.LongBits.zeroHash},n.longFromHash=function(c,f){var b=n.LongBits.fromHash(c);return n.Long?n.Long.fromBits(b.lo,b.hi,f):b.toNumber(!!f)},n.merge=a,n.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(c){for(var f={},b=0;b<c.length;++b)f[c[b]]=1;return function(){for(var g=Object.keys(this),m=g.length-1;m>-1;--m)if(f[g[m]]===1&&this[g[m]]!==void 0&&this[g[m]]!==null)return g[m]}},n.oneOfSetter=function(c){return function(f){for(var b=0;b<c.length;++b)c[b]!==f&&delete this[c[b]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var c=n.Buffer;c?(n._Buffer_from=c.from!==Uint8Array.from&&c.from||function(f,b){return new c(f,b)},n._Buffer_allocUnsafe=c.allocUnsafe||function(f){return new c(f)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:(r,e,t)=>{r.exports=l;var n,a=t(9693),s=a.LongBits,c=a.base64,f=a.utf8;function b(T,S,E){this.fn=T,this.len=S,this.next=void 0,this.val=E}function g(){}function m(T){this.head=T.head,this.tail=T.tail,this.len=T.len,this.next=T.states}function l(){this.len=0,this.head=new b(g,0,0),this.tail=this.head,this.states=null}var o=function(){return a.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function u(T,S,E){S[E]=255&T}function d(T,S){this.len=T,this.next=void 0,this.val=S}function y(T,S,E){for(;T.hi;)S[E++]=127&T.lo|128,T.lo=(T.lo>>>7|T.hi<<25)>>>0,T.hi>>>=7;for(;T.lo>127;)S[E++]=127&T.lo|128,T.lo=T.lo>>>7;S[E++]=T.lo}function w(T,S,E){S[E]=255&T,S[E+1]=T>>>8&255,S[E+2]=T>>>16&255,S[E+3]=T>>>24}l.create=o(),l.alloc=function(T){return new a.Array(T)},a.Array!==Array&&(l.alloc=a.pool(l.alloc,a.Array.prototype.subarray)),l.prototype._push=function(T,S,E){return this.tail=this.tail.next=new b(T,S,E),this.len+=S,this},d.prototype=Object.create(b.prototype),d.prototype.fn=function(T,S,E){for(;T>127;)S[E++]=127&T|128,T>>>=7;S[E]=T},l.prototype.uint32=function(T){return this.len+=(this.tail=this.tail.next=new d((T>>>=0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len,this},l.prototype.int32=function(T){return T<0?this._push(y,10,s.fromNumber(T)):this.uint32(T)},l.prototype.sint32=function(T){return this.uint32((T<<1^T>>31)>>>0)},l.prototype.uint64=function(T){var S=s.from(T);return this._push(y,S.length(),S)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(T){var S=s.from(T).zzEncode();return this._push(y,S.length(),S)},l.prototype.bool=function(T){return this._push(u,1,T?1:0)},l.prototype.fixed32=function(T){return this._push(w,4,T>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(T){var S=s.from(T);return this._push(w,4,S.lo)._push(w,4,S.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(T){return this._push(a.float.writeFloatLE,4,T)},l.prototype.double=function(T){return this._push(a.float.writeDoubleLE,8,T)};var _=a.Array.prototype.set?function(T,S,E){S.set(T,E)}:function(T,S,E){for(var A=0;A<T.length;++A)S[E+A]=T[A]};l.prototype.bytes=function(T){var S=T.length>>>0;if(!S)return this._push(u,1,0);if(a.isString(T)){var E=l.alloc(S=c.length(T));c.decode(T,E,0),T=E}return this.uint32(S)._push(_,S,T)},l.prototype.string=function(T){var S=f.length(T);return S?this.uint32(S)._push(f.write,S,T):this._push(u,1,0)},l.prototype.fork=function(){return this.states=new m(this),this.head=this.tail=new b(g,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new b(g,0,0),this.len=0),this},l.prototype.ldelim=function(){var T=this.head,S=this.tail,E=this.len;return this.reset().uint32(E),E&&(this.tail.next=T.next,this.tail=S,this.len+=E),this},l.prototype.finish=function(){for(var T=this.head.next,S=this.constructor.alloc(this.len),E=0;T;)T.fn(T.val,S,E),E+=T.len,T=T.next;return S},l._configure=function(T){n=T,l.create=o(),n._configure()}},3155:(r,e,t)=>{r.exports=s;var n=t(1173);(s.prototype=Object.create(n.prototype)).constructor=s;var a=t(9693);function s(){n.call(this)}function c(f,b,g){f.length<40?a.utf8.write(f,b,g):b.utf8Write?b.utf8Write(f,g):b.write(f,g)}s._configure=function(){s.alloc=a._Buffer_allocUnsafe,s.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&a.Buffer.prototype.set.name==="set"?function(f,b,g){b.set(f,g)}:function(f,b,g){if(f.copy)f.copy(b,g,0,f.length);else for(var m=0;m<f.length;)b[g++]=f[m++]}},s.prototype.bytes=function(f){a.isString(f)&&(f=a._Buffer_from(f,"base64"));var b=f.length>>>0;return this.uint32(b),b&&this._push(s.writeBytesBuffer,b,f),this},s.prototype.string=function(f){var b=a.Buffer.byteLength(f);return this.uint32(b),b&&this._push(c,b,f),this},s._configure()},4154:r=>{r.exports=`"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},685:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.registerBackend=void 0;const t={},n=[];e.registerBackend=(a,s,c)=>{if(!s||typeof s.init!="function"||typeof s.createSessionHandler!="function")throw new TypeError("not a valid backend");{const f=t[a];if(f===void 0)t[a]={backend:s,priority:c};else{if(f.priority>c)return;if(f.priority===c&&f.backend!==s)throw new Error(`cannot register backend "${a}" using priority ${c}`)}if(c>=0){const b=n.indexOf(a);b!==-1&&n.splice(b,1);for(let g=0;g<n.length;g++)if(t[n[g]].priority<=c)return void n.splice(g,0,a);n.push(a)}}},e.resolveBackend=async a=>{const s=a.length===0?n:a,c=[];for(const f of s){const b=t[f];if(b){if(b.initialized)return b.backend;if(b.aborted)continue;const g=!!b.initPromise;try{return g||(b.initPromise=b.backend.init()),await b.initPromise,b.initialized=!0,b.backend}catch(m){g||c.push({name:f,err:m}),b.aborted=!0}finally{delete b.initPromise}}}throw new Error(`no available backend found. ERR: ${c.map(f=>`[${f.name}] ${f.err}`).join(", ")}`)}},4798:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.registerBackend=void 0;var n=t(685);Object.defineProperty(e,"registerBackend",{enumerable:!0,get:function(){return n.registerBackend}})},3121:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const n=t(9104);let a="warning";e.env={wasm:{},webgl:{},webgpu:{},versions:{common:n.version},set logLevel(s){if(s!==void 0){if(typeof s!="string"||["verbose","info","warning","error","fatal"].indexOf(s)===-1)throw new Error(`Unsupported logging level: ${s}`);a=s}},get logLevel(){return a}},Object.defineProperty(e.env,"logLevel",{enumerable:!0})},2457:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const n=t(3121);e.env=n.env},2235:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,c,f,b){b===void 0&&(b=f);var g=Object.getOwnPropertyDescriptor(c,f);g&&!("get"in g?!c.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(s,b,g)}:function(s,c,f,b){b===void 0&&(b=f),s[b]=c[f]}),a=this&&this.__exportStar||function(s,c){for(var f in s)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,s,f)};Object.defineProperty(e,"__esModule",{value:!0}),a(t(4798),e),a(t(2457),e),a(t(3974),e),a(t(963),e),a(t(7852),e)},8036:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const n=t(685),a=t(963);class s{constructor(f){this.handler=f}async run(f,b,g){const m={};let l={};if(typeof f!="object"||f===null||f instanceof a.Tensor||Array.isArray(f))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof b=="object"){if(b===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(b instanceof a.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(b)){if(b.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(const y of b){if(typeof y!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(y)===-1)throw new RangeError(`'fetches' contains invalid output name: ${y}.`);m[y]=null}if(typeof g=="object"&&g!==null)l=g;else if(g!==void 0)throw new TypeError("'options' must be an object.")}else{let y=!1;const w=Object.getOwnPropertyNames(b);for(const _ of this.outputNames)if(w.indexOf(_)!==-1){const T=b[_];(T===null||T instanceof a.Tensor)&&(y=!0,o=!1,m[_]=T)}if(y){if(typeof g=="object"&&g!==null)l=g;else if(g!==void 0)throw new TypeError("'options' must be an object.")}else l=b}}else if(b!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const y of this.inputNames)if(f[y]===void 0)throw new Error(`input '${y}' is missing in 'feeds'.`);if(o)for(const y of this.outputNames)m[y]=null;const u=await this.handler.run(f,m,l),d={};for(const y in u)Object.hasOwnProperty.call(u,y)&&(d[y]=new a.Tensor(u[y].type,u[y].data,u[y].dims));return d}async release(){return this.handler.dispose()}static async create(f,b,g,m){let l,o={};if(typeof f=="string"){if(l=f,typeof b=="object"&&b!==null)o=b;else if(b!==void 0)throw new TypeError("'options' must be an object.")}else if(f instanceof Uint8Array){if(l=f,typeof b=="object"&&b!==null)o=b;else if(b!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const w=f;let _=0,T=f.byteLength;if(typeof b=="object"&&b!==null)o=b;else if(typeof b=="number"){if(_=b,!Number.isSafeInteger(_))throw new RangeError("'byteOffset' must be an integer.");if(_<0||_>=w.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${w.byteLength}).`);if(T=f.byteLength-_,typeof g=="number"){if(T=g,!Number.isSafeInteger(T))throw new RangeError("'byteLength' must be an integer.");if(T<=0||_+T>w.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${w.byteLength-_}].`);if(typeof m=="object"&&m!==null)o=m;else if(m!==void 0)throw new TypeError("'options' must be an object.")}else if(g!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(b!==void 0)throw new TypeError("'options' must be an object.");l=new Uint8Array(w,_,T)}}const u=(o.executionProviders||[]).map(w=>typeof w=="string"?w:w.name),d=await(0,n.resolveBackend)(u),y=await d.createSessionHandler(l,o);return new s(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}e.InferenceSession=s},3974:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const n=t(8036);e.InferenceSession=n.InferenceSession},7852:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},2350:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tensorToImageData=e.tensorToDataURL=void 0,e.tensorToDataURL=(t,n)=>{const a=document.createElement("canvas");a.width=t.dims[3],a.height=t.dims[2];const s=a.getContext("2d");if(s!=null){let c,f;(n==null?void 0:n.tensorLayout)!==void 0&&n.tensorLayout==="NHWC"?(c=t.dims[2],f=t.dims[3]):(c=t.dims[3],f=t.dims[2]);const b=(n==null?void 0:n.format)!==void 0?n.format:"RGB",g=n==null?void 0:n.norm;let m,l;g===void 0||g.mean===void 0?m=[255,255,255,255]:typeof g.mean=="number"?m=[g.mean,g.mean,g.mean,g.mean]:(m=[g.mean[0],g.mean[1],g.mean[2],0],g.mean[3]!==void 0&&(m[3]=g.mean[3])),g===void 0||g.bias===void 0?l=[0,0,0,0]:typeof g.bias=="number"?l=[g.bias,g.bias,g.bias,g.bias]:(l=[g.bias[0],g.bias[1],g.bias[2],0],g.bias[3]!==void 0&&(l[3]=g.bias[3]));const o=f*c;let u=0,d=o,y=2*o,w=-1;b==="RGBA"?(u=0,d=o,y=2*o,w=3*o):b==="RGB"?(u=0,d=o,y=2*o):b==="RBG"&&(u=0,y=o,d=2*o);for(let _=0;_<f;_++)for(let T=0;T<c;T++){const S=(t.data[u++]-l[0])*m[0],E=(t.data[d++]-l[1])*m[1],A=(t.data[y++]-l[2])*m[2],P=w===-1?255:(t.data[w++]-l[3])*m[3];s.fillStyle="rgba("+S+","+E+","+A+","+P+")",s.fillRect(T,_,1,1)}return a.toDataURL()}throw new Error("Can not access image data")},e.tensorToImageData=(t,n)=>{const a=document.createElement("canvas").getContext("2d");let s;if(a==null)throw new Error("Can not access image data");{let c,f,b;(n==null?void 0:n.tensorLayout)!==void 0&&n.tensorLayout==="NHWC"?(c=t.dims[2],f=t.dims[1],b=t.dims[3]):(c=t.dims[3],f=t.dims[2],b=t.dims[1]);const g=n!==void 0&&n.format!==void 0?n.format:"RGB",m=n==null?void 0:n.norm;let l,o;m===void 0||m.mean===void 0?l=[255,255,255,255]:typeof m.mean=="number"?l=[m.mean,m.mean,m.mean,m.mean]:(l=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(l[3]=m.mean[3])),m===void 0||m.bias===void 0?o=[0,0,0,0]:typeof m.bias=="number"?o=[m.bias,m.bias,m.bias,m.bias]:(o=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(o[3]=m.bias[3]));const u=f*c;if(n!==void 0&&(n.format!==void 0&&b===4&&n.format!=="RGBA"||b===3&&n.format!=="RGB"&&n.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const d=4;let y=0,w=1,_=2,T=3,S=0,E=u,A=2*u,P=-1;g==="RGBA"?(S=0,E=u,A=2*u,P=3*u):g==="RGB"?(S=0,E=u,A=2*u):g==="RBG"&&(S=0,A=u,E=2*u),s=a.createImageData(c,f);for(let k=0;k<f*c;y+=d,w+=d,_+=d,T+=d,k++)s.data[y]=(t.data[S++]-o[0])*l[0],s.data[w]=(t.data[E++]-o[1])*l[1],s.data[_]=(t.data[A++]-o[2])*l[2],s.data[T]=P===-1?255:(t.data[P++]-o[3])*l[3]}return s}},4866:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tensorFromImage=e.bufferToTensor=void 0;const n=t(963);e.bufferToTensor=(a,s)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(s.height===void 0||s.width===void 0)throw new Error("Image height and width must be defined");if(s.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:c,width:f}=s,b=s.norm??{mean:255,bias:0};let g,m;g=typeof b.mean=="number"?[b.mean,b.mean,b.mean,b.mean]:[b.mean[0],b.mean[1],b.mean[2],b.mean[3]??255],m=typeof b.bias=="number"?[b.bias,b.bias,b.bias,b.bias]:[b.bias[0],b.bias[1],b.bias[2],b.bias[3]??0];const l=s.format!==void 0?s.format:"RGBA",o=s.tensorFormat!==void 0&&s.tensorFormat!==void 0?s.tensorFormat:"RGB",u=c*f,d=o==="RGBA"?new Float32Array(4*u):new Float32Array(3*u);let y=4,w=0,_=1,T=2,S=3,E=0,A=u,P=2*u,k=-1;l==="RGB"&&(y=3,w=0,_=1,T=2,S=-1),o==="RGBA"?k=3*u:o==="RBG"?(E=0,P=u,A=2*u):o==="BGR"&&(P=0,A=u,E=2*u);for(let M=0;M<u;M++,w+=y,T+=y,_+=y,S+=y)d[E++]=(a[w]+m[0])/g[0],d[A++]=(a[_]+m[1])/g[1],d[P++]=(a[T]+m[2])/g[2],k!==-1&&S!==-1&&(d[k++]=(a[S]+m[3])/g[3]);return o==="RGBA"?new n.Tensor("float32",d,[1,4,c,f]):new n.Tensor("float32",d,[1,3,c,f])},e.tensorFromImage=async(a,s)=>{const c=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,f=typeof ImageData<"u"&&a instanceof ImageData,b=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,g=typeof a=="string";let m,l=s??{};if(c){const o=document.createElement("canvas");o.width=a.width,o.height=a.height;const u=o.getContext("2d");if(u==null)throw new Error("Can not access image data");{let d=a.height,y=a.width;if(s!==void 0&&s.resizedHeight!==void 0&&s.resizedWidth!==void 0&&(d=s.resizedHeight,y=s.resizedWidth),s!==void 0){if(l=s,s.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=d,l.width=y}else l.tensorFormat="RGBA",l.height=d,l.width=y;u.drawImage(a,0,0),m=u.getImageData(0,0,y,d).data}}else{if(!f){if(b){if(s===void 0)throw new Error("Please provide image config with format for Imagebitmap");const o=document.createElement("canvas");o.width=a.width,o.height=a.height;const u=o.getContext("2d");if(u!=null){const d=a.height,y=a.width;return u.drawImage(a,0,0,y,d),m=u.getImageData(0,0,y,d).data,l.height=d,l.width=y,(0,e.bufferToTensor)(m,l)}throw new Error("Can not access image data")}if(g)return new Promise((o,u)=>{const d=document.createElement("canvas"),y=d.getContext("2d");if(!a||!y)return u();const w=new Image;w.crossOrigin="Anonymous",w.src=a,w.onload=()=>{d.width=w.width,d.height=w.height,y.drawImage(w,0,0,d.width,d.height);const _=y.getImageData(0,0,d.width,d.height);l.height=d.height,l.width=d.width,o((0,e.bufferToTensor)(_.data,l))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let o,u;if(s!==void 0&&s.resizedWidth!==void 0&&s.resizedHeight!==void 0?(o=s.resizedHeight,u=s.resizedWidth):(o=a.height,u=a.width),s!==void 0&&(l=s),l.format="RGBA",l.height=o,l.width=u,s!==void 0){const d=document.createElement("canvas");d.width=u,d.height=o;const y=d.getContext("2d");if(y==null)throw new Error("Can not access image data");y.putImageData(a,0,0),m=y.getImageData(0,0,u,o).data}else m=a.data}}if(m!==void 0)return(0,e.bufferToTensor)(m,l);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const n=t(2350),a=t(4866),s=t(106),c=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),f=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let b=!1;e.Tensor=class{constructor(g,m,l){let o,u,d;if((()=>{if(!b){b=!0;const w=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",_=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";w&&(c.set("int64",BigInt64Array),f.set(BigInt64Array,"int64")),_&&(c.set("uint64",BigUint64Array),f.set(BigUint64Array,"uint64"))}})(),typeof g=="string")if(o=g,d=l,g==="string"){if(!Array.isArray(m))throw new TypeError("A string tensor's data must be a string array.");u=m}else{const w=c.get(g);if(w===void 0)throw new TypeError(`Unsupported tensor type: ${g}.`);if(Array.isArray(m)){if(g==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");u=g==="uint64"||g==="int64"?w.from(m,BigInt):w.from(m)}else{if(!(m instanceof w))throw new TypeError(`A ${o} tensor's data must be type of ${w}`);u=m}}else if(d=m,Array.isArray(g)){if(g.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const w=typeof g[0];if(w==="string")o="string",u=g;else{if(w!=="boolean")throw new TypeError(`Invalid element type of data array: ${w}.`);o="bool",u=Uint8Array.from(g)}}else{const w=f.get(g.constructor);if(w===void 0)throw new TypeError(`Unsupported type for tensor data: ${g.constructor}.`);o=w,u=g}if(d===void 0)d=[u.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");const y=(0,s.calculateSize)(d);if(y!==u.length)throw new Error(`Tensor's size(${y}) does not match data length(${u.length}).`);this.dims=d,this.type=o,this.data=u,this.size=y}static async fromImage(g,m){return(0,a.tensorFromImage)(g,m)}toDataURL(g){return(0,n.tensorToDataURL)(this,g)}toImageData(g){return(0,n.tensorToImageData)(this,g)}reshape(g){return(0,s.tensorReshape)(this,g)}}},106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tensorReshape=e.calculateSize=void 0;const n=t(963);e.calculateSize=a=>{let s=1;for(let c=0;c<a.length;c++){const f=a[c];if(typeof f!="number"||!Number.isSafeInteger(f))throw new TypeError(`dims[${c}] must be an integer, got: ${f}`);if(f<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${f}`);s*=f}return s},e.tensorReshape=(a,s)=>new n.Tensor(a.type,a.data,s)},963:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const n=t(5957);e.Tensor=n.Tensor},9104:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.16.3"},1583:(r,e)=>{var t,n=function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function c(N,V,j){this.low=0|N,this.high=0|V,this.unsigned=!!j}function f(N){return(N&&N.__isLong__)===!0}function b(N){var V=Math.clz32(N&-N);return N?31-V:V}c.prototype.__isLong__,Object.defineProperty(c.prototype,"__isLong__",{value:!0}),c.isLong=f;var g={},m={};function l(N,V){var j,K,ee;return V?(ee=0<=(N>>>=0)&&N<256)&&(K=m[N])?K:(j=u(N,0,!0),ee&&(m[N]=j),j):(ee=-128<=(N|=0)&&N<128)&&(K=g[N])?K:(j=u(N,N<0?-1:0,!1),ee&&(g[N]=j),j)}function o(N,V){if(isNaN(N))return V?P:A;if(V){if(N<0)return P;if(N>=T)return D}else{if(N<=-S)return R;if(N+1>=S)return O}return N<0?o(-N,V).neg():u(N%_|0,N/_|0,V)}function u(N,V,j){return new c(N,V,j)}c.fromInt=l,c.fromNumber=o,c.fromBits=u;var d=Math.pow;function y(N,V,j){if(N.length===0)throw Error("empty string");if(typeof V=="number"?(j=V,V=!1):V=!!V,N==="NaN"||N==="Infinity"||N==="+Infinity"||N==="-Infinity")return V?P:A;if((j=j||10)<2||36<j)throw RangeError("radix");var K;if((K=N.indexOf("-"))>0)throw Error("interior hyphen");if(K===0)return y(N.substring(1),V,j).neg();for(var ee=o(d(j,8)),he=A,ge=0;ge<N.length;ge+=8){var Se=Math.min(8,N.length-ge),we=parseInt(N.substring(ge,ge+Se),j);if(Se<8){var ne=o(d(j,Se));he=he.mul(ne).add(o(we))}else he=(he=he.mul(ee)).add(o(we))}return he.unsigned=V,he}function w(N,V){return typeof N=="number"?o(N,V):typeof N=="string"?y(N,V):u(N.low,N.high,typeof V=="boolean"?V:N.unsigned)}c.fromString=y,c.fromValue=w;var _=4294967296,T=_*_,S=T/2,E=l(1<<24),A=l(0);c.ZERO=A;var P=l(0,!0);c.UZERO=P;var k=l(1);c.ONE=k;var M=l(1,!0);c.UONE=M;var F=l(-1);c.NEG_ONE=F;var O=u(-1,2147483647,!1);c.MAX_VALUE=O;var D=u(-1,-1,!0);c.MAX_UNSIGNED_VALUE=D;var R=u(0,-2147483648,!1);c.MIN_VALUE=R;var C=c.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},C.toString=function(N){if((N=N||10)<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var V=o(N),j=this.div(V),K=j.mul(V).sub(this);return j.toString(N)+K.toInt().toString(N)}return"-"+this.neg().toString(N)}for(var ee=o(d(N,6),this.unsigned),he=this,ge="";;){var Se=he.div(ee),we=(he.sub(Se.mul(ee)).toInt()>>>0).toString(N);if((he=Se).isZero())return we+ge;for(;we.length<6;)we="0"+we;ge=""+we+ge}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var N=this.high!=0?this.high:this.low,V=31;V>0&&!(N&1<<V);V--);return this.high!=0?V+33:V+1},C.isZero=function(){return this.high===0&&this.low===0},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return(1&this.low)==1},C.isEven=function(){return(1&this.low)==0},C.equals=function(N){return f(N)||(N=w(N)),(this.unsigned===N.unsigned||this.high>>>31!=1||N.high>>>31!=1)&&this.high===N.high&&this.low===N.low},C.eq=C.equals,C.notEquals=function(N){return!this.eq(N)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(N){return this.comp(N)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(N){return this.comp(N)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(N){return this.comp(N)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(N){return this.comp(N)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(N){if(f(N)||(N=w(N)),this.eq(N))return 0;var V=this.isNegative(),j=N.isNegative();return V&&!j?-1:!V&&j?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(k)},C.neg=C.negate,C.add=function(N){f(N)||(N=w(N));var V=this.high>>>16,j=65535&this.high,K=this.low>>>16,ee=65535&this.low,he=N.high>>>16,ge=65535&N.high,Se=N.low>>>16,we=0,ne=0,re=0,oe=0;return re+=(oe+=ee+(65535&N.low))>>>16,ne+=(re+=K+Se)>>>16,we+=(ne+=j+ge)>>>16,we+=V+he,u((re&=65535)<<16|(oe&=65535),(we&=65535)<<16|(ne&=65535),this.unsigned)},C.subtract=function(N){return f(N)||(N=w(N)),this.add(N.neg())},C.sub=C.subtract,C.multiply=function(N){if(this.isZero())return this;if(f(N)||(N=w(N)),s)return u(s.mul(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned);if(N.isZero())return this.unsigned?P:A;if(this.eq(R))return N.isOdd()?R:A;if(N.eq(R))return this.isOdd()?R:A;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(E)&&N.lt(E))return o(this.toNumber()*N.toNumber(),this.unsigned);var V=this.high>>>16,j=65535&this.high,K=this.low>>>16,ee=65535&this.low,he=N.high>>>16,ge=65535&N.high,Se=N.low>>>16,we=65535&N.low,ne=0,re=0,oe=0,Ee=0;return oe+=(Ee+=ee*we)>>>16,re+=(oe+=K*we)>>>16,oe&=65535,re+=(oe+=ee*Se)>>>16,ne+=(re+=j*we)>>>16,re&=65535,ne+=(re+=K*Se)>>>16,re&=65535,ne+=(re+=ee*ge)>>>16,ne+=V*we+j*Se+K*ge+ee*he,u((oe&=65535)<<16|(Ee&=65535),(ne&=65535)<<16|(re&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(N){if(f(N)||(N=w(N)),N.isZero())throw Error("division by zero");var V,j,K;if(s)return this.unsigned||this.high!==-2147483648||N.low!==-1||N.high!==-1?u((this.unsigned?s.div_u:s.div_s)(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?P:A;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return P;if(N.gt(this.shru(1)))return M;K=P}else{if(this.eq(R))return N.eq(k)||N.eq(F)?R:N.eq(R)?k:(V=this.shr(1).div(N).shl(1)).eq(A)?N.isNegative()?k:F:(j=this.sub(N.mul(V)),K=V.add(j.div(N)));if(N.eq(R))return this.unsigned?P:A;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();K=A}for(j=this;j.gte(N);){V=Math.max(1,Math.floor(j.toNumber()/N.toNumber()));for(var ee=Math.ceil(Math.log(V)/Math.LN2),he=ee<=48?1:d(2,ee-48),ge=o(V),Se=ge.mul(N);Se.isNegative()||Se.gt(j);)Se=(ge=o(V-=he,this.unsigned)).mul(N);ge.isZero()&&(ge=k),K=K.add(ge),j=j.sub(Se)}return K},C.div=C.divide,C.modulo=function(N){return f(N)||(N=w(N)),s?u((this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned):this.sub(this.div(N).mul(N))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?b(this.low):b(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(N){return f(N)||(N=w(N)),u(this.low&N.low,this.high&N.high,this.unsigned)},C.or=function(N){return f(N)||(N=w(N)),u(this.low|N.low,this.high|N.high,this.unsigned)},C.xor=function(N){return f(N)||(N=w(N)),u(this.low^N.low,this.high^N.high,this.unsigned)},C.shiftLeft=function(N){return f(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?u(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):u(0,this.low<<N-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(N){return f(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?u(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):u(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(N){return f(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?u(this.low>>>N|this.high<<32-N,this.high>>>N,this.unsigned):u(N===32?this.high:this.high>>>N-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(N){var V;return f(N)&&(N=N.toInt()),(N&=63)==0?this:N===32?u(this.high,this.low,this.unsigned):N<32?(V=32-N,u(this.low<<N|this.high>>>V,this.high<<N|this.low>>>V,this.unsigned)):(V=32-(N-=32),u(this.high<<N|this.low>>>V,this.low<<N|this.high>>>V,this.unsigned))},C.rotl=C.rotateLeft,C.rotateRight=function(N){var V;return f(N)&&(N=N.toInt()),(N&=63)==0?this:N===32?u(this.high,this.low,this.unsigned):N<32?(V=32-N,u(this.high<<V|this.low>>>N,this.low<<V|this.high>>>N,this.unsigned)):(V=32-(N-=32),u(this.low<<V|this.high>>>N,this.high<<V|this.low>>>N,this.unsigned))},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var N=this.high,V=this.low;return[255&V,V>>>8&255,V>>>16&255,V>>>24,255&N,N>>>8&255,N>>>16&255,N>>>24]},C.toBytesBE=function(){var N=this.high,V=this.low;return[N>>>24,N>>>16&255,N>>>8&255,255&N,V>>>24,V>>>16&255,V>>>8&255,255&V]},c.fromBytes=function(N,V,j){return j?c.fromBytesLE(N,V):c.fromBytesBE(N,V)},c.fromBytesLE=function(N,V){return new c(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,V)},c.fromBytesBE=function(N,V){return new c(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],V)};var U=c;return a.default=U,"default"in a?a.default:a}({});(t=(function(){return n}).apply(e,[]))===void 0||(r.exports=t)},5686:(r,e,t)=>{t.r(e),t.d(e,{flatbuffers:()=>n});var n={};n.Offset,n.Table,n.SIZEOF_SHORT=2,n.SIZEOF_INT=4,n.FILE_IDENTIFIER_LENGTH=4,n.SIZE_PREFIX_LENGTH=4,n.Encoding={UTF8_BYTES:1,UTF16_STRING:2},n.int32=new Int32Array(2),n.float32=new Float32Array(n.int32.buffer),n.float64=new Float64Array(n.int32.buffer),n.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,n.Long=function(a,s){this.low=0|a,this.high=0|s},n.Long.create=function(a,s){return a==0&&s==0?n.Long.ZERO:new n.Long(a,s)},n.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},n.Long.prototype.equals=function(a){return this.low==a.low&&this.high==a.high},n.Long.ZERO=new n.Long(0,0),n.Builder=function(a){if(a)s=a;else var s=1024;this.bb=n.ByteBuffer.allocate(s),this.space=s,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.forceDefaults=function(a){this.force_defaults=a},n.Builder.prototype.dataBuffer=function(){return this.bb},n.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},n.Builder.prototype.prep=function(a,s){a>this.minalign&&(this.minalign=a);for(var c=1+~(this.bb.capacity()-this.space+s)&a-1;this.space<c+a+s;){var f=this.bb.capacity();this.bb=n.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-f}this.pad(c)},n.Builder.prototype.pad=function(a){for(var s=0;s<a;s++)this.bb.writeInt8(--this.space,0)},n.Builder.prototype.writeInt8=function(a){this.bb.writeInt8(this.space-=1,a)},n.Builder.prototype.writeInt16=function(a){this.bb.writeInt16(this.space-=2,a)},n.Builder.prototype.writeInt32=function(a){this.bb.writeInt32(this.space-=4,a)},n.Builder.prototype.writeInt64=function(a){this.bb.writeInt64(this.space-=8,a)},n.Builder.prototype.writeFloat32=function(a){this.bb.writeFloat32(this.space-=4,a)},n.Builder.prototype.writeFloat64=function(a){this.bb.writeFloat64(this.space-=8,a)},n.Builder.prototype.addInt8=function(a){this.prep(1,0),this.writeInt8(a)},n.Builder.prototype.addInt16=function(a){this.prep(2,0),this.writeInt16(a)},n.Builder.prototype.addInt32=function(a){this.prep(4,0),this.writeInt32(a)},n.Builder.prototype.addInt64=function(a){this.prep(8,0),this.writeInt64(a)},n.Builder.prototype.addFloat32=function(a){this.prep(4,0),this.writeFloat32(a)},n.Builder.prototype.addFloat64=function(a){this.prep(8,0),this.writeFloat64(a)},n.Builder.prototype.addFieldInt8=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt8(s),this.slot(a))},n.Builder.prototype.addFieldInt16=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt16(s),this.slot(a))},n.Builder.prototype.addFieldInt32=function(a,s,c){(this.force_defaults||s!=c)&&(this.addInt32(s),this.slot(a))},n.Builder.prototype.addFieldInt64=function(a,s,c){!this.force_defaults&&s.equals(c)||(this.addInt64(s),this.slot(a))},n.Builder.prototype.addFieldFloat32=function(a,s,c){(this.force_defaults||s!=c)&&(this.addFloat32(s),this.slot(a))},n.Builder.prototype.addFieldFloat64=function(a,s,c){(this.force_defaults||s!=c)&&(this.addFloat64(s),this.slot(a))},n.Builder.prototype.addFieldOffset=function(a,s,c){(this.force_defaults||s!=c)&&(this.addOffset(s),this.slot(a))},n.Builder.prototype.addFieldStruct=function(a,s,c){s!=c&&(this.nested(s),this.slot(a))},n.Builder.prototype.nested=function(a){if(a!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},n.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},n.Builder.prototype.slot=function(a){this.vtable[a]=this.offset()},n.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},n.Builder.growByteBuffer=function(a){var s=a.capacity();if(3221225472&s)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var c=s<<1,f=n.ByteBuffer.allocate(c);return f.setPosition(c-s),f.bytes().set(a.bytes(),c-s),f},n.Builder.prototype.addOffset=function(a){this.prep(n.SIZEOF_INT,0),this.writeInt32(this.offset()-a+n.SIZEOF_INT)},n.Builder.prototype.startObject=function(a){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=a;for(var s=0;s<a;s++)this.vtable[s]=0;this.isNested=!0,this.object_start=this.offset()},n.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var a=this.offset(),s=this.vtable_in_use-1;s>=0&&this.vtable[s]==0;s--);for(var c=s+1;s>=0;s--)this.addInt16(this.vtable[s]!=0?a-this.vtable[s]:0);this.addInt16(a-this.object_start);var f=(c+2)*n.SIZEOF_SHORT;this.addInt16(f);var b=0,g=this.space;e:for(s=0;s<this.vtables.length;s++){var m=this.bb.capacity()-this.vtables[s];if(f==this.bb.readInt16(m)){for(var l=n.SIZEOF_SHORT;l<f;l+=n.SIZEOF_SHORT)if(this.bb.readInt16(g+l)!=this.bb.readInt16(m+l))continue e;b=this.vtables[s];break}}return b?(this.space=this.bb.capacity()-a,this.bb.writeInt32(this.space,b-a)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-a,this.offset()-a)),this.isNested=!1,a},n.Builder.prototype.finish=function(a,s,c){var f=c?n.SIZE_PREFIX_LENGTH:0;if(s){var b=s;if(this.prep(this.minalign,n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH+f),b.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var g=n.FILE_IDENTIFIER_LENGTH-1;g>=0;g--)this.writeInt8(b.charCodeAt(g))}this.prep(this.minalign,n.SIZEOF_INT+f),this.addOffset(a),f&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},n.Builder.prototype.finishSizePrefixed=function(a,s){this.finish(a,s,!0)},n.Builder.prototype.requiredField=function(a,s){var c=this.bb.capacity()-a,f=c-this.bb.readInt32(c);if(this.bb.readInt16(f+s)==0)throw new Error("FlatBuffers: field "+s+" must be set")},n.Builder.prototype.startVector=function(a,s,c){this.notNested(),this.vector_num_elems=s,this.prep(n.SIZEOF_INT,a*s),this.prep(c,a*s)},n.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},n.Builder.prototype.createString=function(a){if(a instanceof Uint8Array)var s=a;else{s=[];for(var c=0;c<a.length;){var f,b=a.charCodeAt(c++);(f=b<55296||b>=56320?b:(b<<10)+a.charCodeAt(c++)+-56613888)<128?s.push(f):(f<2048?s.push(f>>6&31|192):(f<65536?s.push(f>>12&15|224):s.push(f>>18&7|240,f>>12&63|128),s.push(f>>6&63|128)),s.push(63&f|128))}}this.addInt8(0),this.startVector(1,s.length,1),this.bb.setPosition(this.space-=s.length),c=0;for(var g=this.space,m=this.bb.bytes();c<s.length;c++)m[g++]=s[c];return this.endVector()},n.Builder.prototype.createLong=function(a,s){return n.Long.create(a,s)},n.ByteBuffer=function(a){this.bytes_=a,this.position_=0},n.ByteBuffer.allocate=function(a){return new n.ByteBuffer(new Uint8Array(a))},n.ByteBuffer.prototype.clear=function(){this.position_=0},n.ByteBuffer.prototype.bytes=function(){return this.bytes_},n.ByteBuffer.prototype.position=function(){return this.position_},n.ByteBuffer.prototype.setPosition=function(a){this.position_=a},n.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},n.ByteBuffer.prototype.readInt8=function(a){return this.readUint8(a)<<24>>24},n.ByteBuffer.prototype.readUint8=function(a){return this.bytes_[a]},n.ByteBuffer.prototype.readInt16=function(a){return this.readUint16(a)<<16>>16},n.ByteBuffer.prototype.readUint16=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8},n.ByteBuffer.prototype.readInt32=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8|this.bytes_[a+2]<<16|this.bytes_[a+3]<<24},n.ByteBuffer.prototype.readUint32=function(a){return this.readInt32(a)>>>0},n.ByteBuffer.prototype.readInt64=function(a){return new n.Long(this.readInt32(a),this.readInt32(a+4))},n.ByteBuffer.prototype.readUint64=function(a){return new n.Long(this.readUint32(a),this.readUint32(a+4))},n.ByteBuffer.prototype.readFloat32=function(a){return n.int32[0]=this.readInt32(a),n.float32[0]},n.ByteBuffer.prototype.readFloat64=function(a){return n.int32[n.isLittleEndian?0:1]=this.readInt32(a),n.int32[n.isLittleEndian?1:0]=this.readInt32(a+4),n.float64[0]},n.ByteBuffer.prototype.writeInt8=function(a,s){this.bytes_[a]=s},n.ByteBuffer.prototype.writeUint8=function(a,s){this.bytes_[a]=s},n.ByteBuffer.prototype.writeInt16=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8},n.ByteBuffer.prototype.writeUint16=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8},n.ByteBuffer.prototype.writeInt32=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8,this.bytes_[a+2]=s>>16,this.bytes_[a+3]=s>>24},n.ByteBuffer.prototype.writeUint32=function(a,s){this.bytes_[a]=s,this.bytes_[a+1]=s>>8,this.bytes_[a+2]=s>>16,this.bytes_[a+3]=s>>24},n.ByteBuffer.prototype.writeInt64=function(a,s){this.writeInt32(a,s.low),this.writeInt32(a+4,s.high)},n.ByteBuffer.prototype.writeUint64=function(a,s){this.writeUint32(a,s.low),this.writeUint32(a+4,s.high)},n.ByteBuffer.prototype.writeFloat32=function(a,s){n.float32[0]=s,this.writeInt32(a,n.int32[0])},n.ByteBuffer.prototype.writeFloat64=function(a,s){n.float64[0]=s,this.writeInt32(a,n.int32[n.isLittleEndian?0:1]),this.writeInt32(a+4,n.int32[n.isLittleEndian?1:0])},n.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var a="",s=0;s<n.FILE_IDENTIFIER_LENGTH;s++)a+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+s));return a},n.ByteBuffer.prototype.__offset=function(a,s){var c=a-this.readInt32(a);return s<this.readInt16(c)?this.readInt16(c+s):0},n.ByteBuffer.prototype.__union=function(a,s){return a.bb_pos=s+this.readInt32(s),a.bb=this,a},n.ByteBuffer.prototype.__string=function(a,s){a+=this.readInt32(a);var c=this.readInt32(a),f="",b=0;if(a+=n.SIZEOF_INT,s===n.Encoding.UTF8_BYTES)return this.bytes_.subarray(a,a+c);for(;b<c;){var g,m=this.readUint8(a+b++);if(m<192)g=m;else{var l=this.readUint8(a+b++);if(m<224)g=(31&m)<<6|63&l;else{var o=this.readUint8(a+b++);g=m<240?(15&m)<<12|(63&l)<<6|63&o:(7&m)<<18|(63&l)<<12|(63&o)<<6|63&this.readUint8(a+b++)}}g<65536?f+=String.fromCharCode(g):(g-=65536,f+=String.fromCharCode(55296+(g>>10),56320+(1023&g)))}return f},n.ByteBuffer.prototype.__indirect=function(a){return a+this.readInt32(a)},n.ByteBuffer.prototype.__vector=function(a){return a+this.readInt32(a)+n.SIZEOF_INT},n.ByteBuffer.prototype.__vector_len=function(a){return this.readInt32(a+this.readInt32(a))},n.ByteBuffer.prototype.__has_identifier=function(a){if(a.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var s=0;s<n.FILE_IDENTIFIER_LENGTH;s++)if(a.charCodeAt(s)!=this.readInt8(this.position_+n.SIZEOF_INT+s))return!1;return!0},n.ByteBuffer.prototype.createLong=function(a,s){return n.Long.create(a,s)}}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__})())})(ort_min);var ort_minExports=ort_min.exports,util;(function(r){r.assertEqual=a=>a;function e(a){}r.assertIs=e;function t(a){throw new Error}r.assertNever=t,r.arrayToEnum=a=>{const s={};for(const c of a)s[c]=c;return s},r.getValidEnumValues=a=>{const s=r.objectKeys(a).filter(f=>typeof a[a[f]]!="number"),c={};for(const f of s)c[f]=a[f];return r.objectValues(c)},r.objectValues=a=>r.objectKeys(a).map(function(s){return a[s]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&s.push(c);return s},r.find=(a,s)=>{for(const c of a)if(s(c))return c},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,s=" | "){return a.map(c=>typeof c=="string"?`'${c}'`:c).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(util||(util={}));var objectUtil;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=r=>{switch(typeof r){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(r)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(r)?ZodParsedType.array:r===null?ZodParsedType.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&r instanceof Map?ZodParsedType.map:typeof Set<"u"&&r instanceof Set?ZodParsedType.set:typeof Date<"u"&&r instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},n={_errors:[]},a=s=>{for(const c of s.issues)if(c.code==="invalid_union")c.unionErrors.map(a);else if(c.code==="invalid_return_type")a(c.returnTypeError);else if(c.code==="invalid_arguments")a(c.argumentsError);else if(c.path.length===0)n._errors.push(t(c));else{let f=n,b=0;for(;b<c.path.length;){const g=c.path[b];b===c.path.length-1?(f[g]=f[g]||{_errors:[]},f[g]._errors.push(t(c))):f[g]=f[g]||{_errors:[]},f=f[g],b++}}};return a(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ZodError.create=r=>new ZodError(r);const errorMap=(r,e)=>{let t;switch(r.code){case ZodIssueCode.invalid_type:r.received===ZodParsedType.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case ZodIssueCode.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:t=`Unrecognized key(s) in object: ${util.joinValues(r.keys,", ")}`;break;case ZodIssueCode.invalid_union:t="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${util.joinValues(r.options)}`;break;case ZodIssueCode.invalid_enum_value:t=`Invalid enum value. Expected ${util.joinValues(r.options)}, received '${r.received}'`;break;case ZodIssueCode.invalid_arguments:t="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:t="Invalid function return type";break;case ZodIssueCode.invalid_date:t="Invalid date";break;case ZodIssueCode.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:util.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case ZodIssueCode.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case ZodIssueCode.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case ZodIssueCode.custom:t="Invalid input";break;case ZodIssueCode.invalid_intersection_types:t="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case ZodIssueCode.not_finite:t="Number must be finite";break;default:t=e.defaultError,util.assertNever(r)}return{message:t}};let overrideErrorMap=errorMap;function setErrorMap(r){overrideErrorMap=r}function getErrorMap(){return overrideErrorMap}const makeIssue=r=>{const{data:e,path:t,errorMaps:n,issueData:a}=r,s=[...t,...a.path||[]],c={...a,path:s};let f="";const b=n.filter(g=>!!g).slice().reverse();for(const g of b)f=g(c,{data:e,defaultError:f}).message;return{...a,path:s,message:a.message||f}},EMPTY_PATH=[];function addIssueToContext(r,e){const t=makeIssue({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,getErrorMap(),errorMap].filter(n=>!!n)});r.common.issues.push(t)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return INVALID;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t)n.push({key:await a.key,value:await a.value});return ParseStatus.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:s,value:c}=a;if(s.status==="aborted"||c.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof c.value<"u"||a.alwaysSet)&&(n[s.value]=c.value)}return{status:e.value,value:n}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=r=>({status:"dirty",value:r}),OK=r=>({status:"valid",value:r}),isAborted=r=>r.status==="aborted",isDirty=r=>r.status==="dirty",isValid=r=>r.status==="valid",isAsync=r=>typeof Promise<"u"&&r instanceof Promise;var errorUtil;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(r,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ZodError(r.common.issues);return this._error=t,this._error}}};function processCreateParams(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(c,f)=>c.code!=="invalid_type"?{message:f.defaultError}:typeof f.data>"u"?{message:n??f.defaultError}:{message:t??f.defaultError},description:a}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(isAsync(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parseSync({data:e,path:a.path,parent:a});return handleResult(a,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},a=this._parse({data:e,path:n.path,parent:n}),s=await(isAsync(a)?a:Promise.resolve(a));return handleResult(n,s)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,s)=>{const c=e(a),f=()=>s.addIssue({code:ZodIssueCode.custom,...n(a)});return typeof Promise<"u"&&c instanceof Promise?c.then(b=>b?!0:(f(),!1)):c?!0:(f(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:t,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:t,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(r,e){return!!((e==="v4"||!e)&&ipv4Regex.test(r)||(e==="v6"||!e)&&ipv6Regex.test(r))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:s.parsedType}),INVALID}const n=new ParseStatus;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const c=e.data.length>s.value,f=e.data.length<s.value;(c||f)&&(a=this._getOrReturnCtx(e,a),c?addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):f&&addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")emailRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"email",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"emoji",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")uuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"uuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")cuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")cuid2Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")ulidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ulid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"url",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"regex",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?datetimeRegex(s).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?isValidIP(e.data,s.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ip",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):util.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(n)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...errorUtil.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(t)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ZodString.create=r=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(r)})};function floatSafeRemainder(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,s=parseInt(r.toFixed(a).replace(".","")),c=parseInt(e.toFixed(a).replace(".",""));return s%c/Math.pow(10,a)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:s.parsedType}),INVALID}let n;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="int"?util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?floatSafeRemainder(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_finite,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,n,a){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:errorUtil.toString(a)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ZodNumber.create=r=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...processCreateParams(r)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ZodParsedType.bigint){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:s.parsedType}),INVALID}let n;const a=new ParseStatus;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):util.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,n,a){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:errorUtil.toString(a)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ZodBigInt.create=r=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(r)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:n.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=r=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...processCreateParams(r)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:s.parsedType}),INVALID}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_date}),INVALID}const n=new ParseStatus;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):util.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ZodDate.create=r=>new ZodDate({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(r)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:n.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=r=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(r)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:n.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=r=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(r)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:n.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=r=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(r)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=r=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(r)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=r=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(r)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:t.parsedType}),INVALID}}ZodNever.create=r=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(r)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:n.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=r=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(r)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==ZodParsedType.array)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:t.parsedType}),INVALID;if(a.exactLength!==null){const c=t.data.length>a.exactLength.value,f=t.data.length<a.exactLength.value;(c||f)&&(addIssueToContext(t,{code:c?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:f?a.exactLength.value:void 0,maximum:c?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((c,f)=>a.type._parseAsync(new ParseInputLazyPath(t,c,t.path,f)))).then(c=>ParseStatus.mergeArray(n,c));const s=[...t.data].map((c,f)=>a.type._parseSync(new ParseInputLazyPath(t,c,t.path,f)));return ParseStatus.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(r,e)=>new ZodArray({type:r,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(r){if(r instanceof ZodObject){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...r._def,shape:()=>e})}else return r instanceof ZodArray?new ZodArray({...r._def,type:deepPartialify(r.element)}):r instanceof ZodOptional?ZodOptional.create(deepPartialify(r.unwrap())):r instanceof ZodNullable?ZodNullable.create(deepPartialify(r.unwrap())):r instanceof ZodTuple?ZodTuple.create(r.items.map(e=>deepPartialify(e))):r}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:g.parsedType}),INVALID}const{status:n,ctx:a}=this._processInputParams(e),{shape:s,keys:c}=this._getCached(),f=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const g in a.data)c.includes(g)||f.push(g);const b=[];for(const g of c){const m=s[g],l=a.data[g];b.push({key:{status:"valid",value:g},value:m._parse(new ParseInputLazyPath(a,l,a.path,g)),alwaysSet:g in a.data})}if(this._def.catchall instanceof ZodNever){const g=this._def.unknownKeys;if(g==="passthrough")for(const m of f)b.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(g==="strict")f.length>0&&(addIssueToContext(a,{code:ZodIssueCode.unrecognized_keys,keys:f}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const m of f){const l=a.data[m];b.push({key:{status:"valid",value:m},value:g._parse(new ParseInputLazyPath(a,l,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const g=[];for(const m of b){const l=await m.key;g.push({key:l,value:await m.value,alwaysSet:m.alwaysSet})}return g}).then(g=>ParseStatus.mergeObjectSync(n,g)):ParseStatus.mergeObjectSync(n,b)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,s,c,f;const b=(c=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,t,n).message)!==null&&c!==void 0?c:n.defaultError;return t.code==="unrecognized_keys"?{message:(f=errorUtil.errToObj(e).message)!==null&&f!==void 0?f:b}:{message:b}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return util.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return util.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return deepPartialify(this)}partial(e){const t={};return util.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new ZodObject({...this._def,shape:()=>t})}required(e){const t={};return util.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof ZodOptional;)s=s._def.innerType;t[n]=s}}),new ZodObject({...this._def,shape:()=>t})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(r,e)=>new ZodObject({shape:()=>r,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(r,e)=>new ZodObject({shape:()=>r,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(r,e)=>new ZodObject({shape:r,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(s){for(const f of s)if(f.result.status==="valid")return f.result;for(const f of s)if(f.result.status==="dirty")return t.common.issues.push(...f.ctx.common.issues),f.result;const c=s.map(f=>new ZodError(f.ctx.common.issues));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:c}),INVALID}if(t.common.async)return Promise.all(n.map(async s=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(a);{let s;const c=[];for(const b of n){const g={...t,common:{...t.common,issues:[]},parent:null},m=b._parseSync({data:t.data,path:t.path,parent:g});if(m.status==="valid")return m;m.status==="dirty"&&!s&&(s={result:m,ctx:g}),g.common.issues.length&&c.push(g.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const f=c.map(b=>new ZodError(b));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:f}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(r,e)=>new ZodUnion({options:r,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=r=>r instanceof ZodLazy?getDiscriminator(r.schema):r instanceof ZodEffects?getDiscriminator(r.innerType()):r instanceof ZodLiteral?[r.value]:r instanceof ZodEnum?r.options:r instanceof ZodNativeEnum?Object.keys(r.enum):r instanceof ZodDefault?getDiscriminator(r._def.innerType):r instanceof ZodUndefined?[void 0]:r instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.object)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t.parsedType}),INVALID;const n=this.discriminator,a=t.data[n],s=this.optionsMap.get(a);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(addIssueToContext(t,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const s of t){const c=getDiscriminator(s.shape[e]);if(!c)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const f of c){if(a.has(f))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(f)}`);a.set(f,s)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...processCreateParams(n)})}}function mergeValues(r,e){const t=getParsedType(r),n=getParsedType(e);if(r===e)return{valid:!0,data:r};if(t===ZodParsedType.object&&n===ZodParsedType.object){const a=util.objectKeys(e),s=util.objectKeys(r).filter(f=>a.indexOf(f)!==-1),c={...r,...e};for(const f of s){const b=mergeValues(r[f],e[f]);if(!b.valid)return{valid:!1};c[f]=b.data}return{valid:!0,data:c}}else if(t===ZodParsedType.array&&n===ZodParsedType.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let s=0;s<r.length;s++){const c=r[s],f=e[s],b=mergeValues(c,f);if(!b.valid)return{valid:!1};a.push(b.data)}return{valid:!0,data:a}}else return t===ZodParsedType.date&&n===ZodParsedType.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(s,c)=>{if(isAborted(s)||isAborted(c))return INVALID;const f=mergeValues(s.value,c.value);return f.valid?((isDirty(s)||isDirty(c))&&t.dirty(),{status:t.value,value:f.data}):(addIssueToContext(n,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,c])=>a(s,c)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZodIntersection.create=(r,e,t)=>new ZodIntersection({left:r,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(t)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(n.data.length<this._def.items.length)return addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&n.data.length>this._def.items.length&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((c,f)=>{const b=this._def.items[f]||this._def.rest;return b?b._parse(new ParseInputLazyPath(n,c,n.path,f)):null}).filter(c=>!!c);return n.common.async?Promise.all(s).then(c=>ParseStatus.mergeArray(t,c)):ParseStatus.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:r,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const a=[],s=this._def.keyType,c=this._def.valueType;for(const f in n.data)a.push({key:s._parse(new ParseInputLazyPath(n,f,n.path,f)),value:c._parse(new ParseInputLazyPath(n,n.data[f],n.path,f))});return n.common.async?ParseStatus.mergeObjectAsync(t,a):ParseStatus.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof ZodType?new ZodRecord({keyType:e,valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(t)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.map)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:n.parsedType}),INVALID;const a=this._def.keyType,s=this._def.valueType,c=[...n.data.entries()].map(([f,b],g)=>({key:a._parse(new ParseInputLazyPath(n,f,n.path,[g,"key"])),value:s._parse(new ParseInputLazyPath(n,b,n.path,[g,"value"]))}));if(n.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const b of c){const g=await b.key,m=await b.value;if(g.status==="aborted"||m.status==="aborted")return INVALID;(g.status==="dirty"||m.status==="dirty")&&t.dirty(),f.set(g.value,m.value)}return{status:t.value,value:f}})}else{const f=new Map;for(const b of c){const g=b.key,m=b.value;if(g.status==="aborted"||m.status==="aborted")return INVALID;(g.status==="dirty"||m.status==="dirty")&&t.dirty(),f.set(g.value,m.value)}return{status:t.value,value:f}}}}ZodMap.create=(r,e,t)=>new ZodMap({valueType:e,keyType:r,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(t)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.set)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:n.parsedType}),INVALID;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const s=this._def.valueType;function c(b){const g=new Set;for(const m of b){if(m.status==="aborted")return INVALID;m.status==="dirty"&&t.dirty(),g.add(m.value)}return{status:t.value,value:g}}const f=[...n.data.values()].map((b,g)=>s._parse(new ParseInputLazyPath(n,b,n.path,g)));return n.common.async?Promise.all(f).then(b=>c(b)):c(f)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ZodSet.create=(r,e)=>new ZodSet({valueType:r,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.function)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:t.parsedType}),INVALID;function n(f,b){return makeIssue({data:f,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter(g=>!!g),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:b}})}function a(f,b){return makeIssue({data:f,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter(g=>!!g),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:b}})}const s={errorMap:t.common.contextualErrorMap},c=t.data;if(this._def.returns instanceof ZodPromise){const f=this;return OK(async function(...b){const g=new ZodError([]),m=await f._def.args.parseAsync(b,s).catch(u=>{throw g.addIssue(n(b,u)),g}),l=await Reflect.apply(c,this,m);return await f._def.returns._def.type.parseAsync(l,s).catch(u=>{throw g.addIssue(a(l,u)),g})})}else{const f=this;return OK(function(...b){const g=f._def.args.safeParse(b,s);if(!g.success)throw new ZodError([n(b,g.error)]);const m=Reflect.apply(c,this,g.data),l=f._def.returns.safeParse(m,s);if(!l.success)throw new ZodError([a(m,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(n)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZodLazy.create=(r,e)=>new ZodLazy({getter:r,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(r,e)=>new ZodLiteral({value:r,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(r,e){return new ZodEnum({values:r,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(t,{expected:util.joinValues(n),received:t.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_enum_value,options:n}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ZodEnum.create(e)}exclude(e){return ZodEnum.create(this.options.filter(t=>!e.includes(t)))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const t=util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ZodParsedType.string&&n.parsedType!==ZodParsedType.number){const a=util.objectValues(t);return addIssueToContext(n,{expected:util.joinValues(a),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(t.indexOf(e.data)===-1){const a=util.objectValues(t);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(r,e)=>new ZodNativeEnum({values:r,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.promise&&t.common.async===!1)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:t.parsedType}),INVALID;const n=t.parsedType===ZodParsedType.promise?t.data:Promise.resolve(t.data);return OK(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ZodPromise.create=(r,e)=>new ZodPromise({type:r,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:c=>{addIssueToContext(n,c),c.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){const c=a.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(c).then(f=>this._def.schema._parseAsync({data:f,path:n.path,parent:n})):this._def.schema._parseSync({data:c,path:n.path,parent:n})}if(a.type==="refinement"){const c=f=>{const b=a.refinement(f,s);if(n.common.async)return Promise.resolve(b);if(b instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(n.common.async===!1){const f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return f.status==="aborted"?INVALID:(f.status==="dirty"&&t.dirty(),c(f.value),{status:t.value,value:f.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>f.status==="aborted"?INVALID:(f.status==="dirty"&&t.dirty(),c(f.value).then(()=>({status:t.value,value:f.value}))))}if(a.type==="transform")if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!isValid(c))return c;const f=a.transform(c.value,s);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:f}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>isValid(c)?Promise.resolve(a.transform(c.value,s)).then(f=>({status:t.value,value:f})):c);util.assertNever(a)}}ZodEffects.create=(r,e,t)=>new ZodEffects({schema:r,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(t)});ZodEffects.createWithPreprocess=(r,e,t)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:r},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(t)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(r,e)=>new ZodOptional({innerType:r,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(r,e)=>new ZodNullable({innerType:r,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ZodDefault.create=(r,e)=>new ZodDefault({innerType:r,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return isAsync(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(r,e)=>new ZodCatch({innerType:r,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:n.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=r=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(r)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?INVALID:s.status==="dirty"?(t.dirty(),DIRTY(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?INVALID:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const t=this._def.innerType._parse(e);return isValid(t)&&(t.value=Object.freeze(t.value)),t}}ZodReadonly.create=(r,e)=>new ZodReadonly({innerType:r,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});const custom=(r,e={},t)=>r?ZodAny.create().superRefine((n,a)=>{var s,c;if(!r(n)){const f=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,b=(c=(s=f.fatal)!==null&&s!==void 0?s:t)!==null&&c!==void 0?c:!0,g=typeof f=="string"?{message:f}:f;a.addIssue({code:"custom",...g,fatal:b})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(r,e={message:`Input not instance of ${r.name}`})=>custom(t=>t instanceof r,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:r=>ZodString.create({...r,coerce:!0}),number:r=>ZodNumber.create({...r,coerce:!0}),boolean:r=>ZodBoolean.create({...r,coerce:!0}),bigint:r=>ZodBigInt.create({...r,coerce:!0}),date:r=>ZodDate.create({...r,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(r,e){(function(){var t,n="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",b="__lodash_hash_undefined__",g=500,m="__lodash_placeholder__",l=1,o=2,u=4,d=1,y=2,w=1,_=2,T=4,S=8,E=16,A=32,P=64,k=128,M=256,F=512,O=30,D="...",R=800,C=16,U=1,N=2,V=3,j=1/0,K=9007199254740991,ee=17976931348623157e292,he=0/0,ge=4294967295,Se=ge-1,we=ge>>>1,ne=[["ary",k],["bind",w],["bindKey",_],["curry",S],["curryRight",E],["flip",F],["partial",A],["partialRight",P],["rearg",M]],re="[object Arguments]",oe="[object Array]",Ee="[object AsyncFunction]",Re="[object Boolean]",De="[object Date]",He="[object DOMException]",qe="[object Error]",W="[object Function]",X="[object GeneratorFunction]",te="[object Map]",ie="[object Number]",ye="[object Null]",be="[object Object]",Ae="[object Promise]",J="[object Proxy]",ve="[object RegExp]",de="[object Set]",Oe="[object String]",fe="[object Symbol]",Ue="[object Undefined]",Ze="[object WeakMap]",$e="[object WeakSet]",Le="[object ArrayBuffer]",Ge="[object DataView]",ze="[object Float32Array]",Je="[object Float64Array]",ot="[object Int8Array]",Qe="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",We="[object Uint8ClampedArray]",pt="[object Uint16Array]",vt="[object Uint32Array]",Y=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pe=/&(?:amp|lt|gt|quot|#39);/g,Ye=/[&<>"']/g,et=RegExp(Pe.source),nt=RegExp(Ye.source),Et=/<%-([\s\S]+?)%>/g,Pt=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xe=/^\w*$/,Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,le=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(le.source),lt=/^\s+/,mt=/\s/,kt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jt=/\{\n\/\* \[wrapped with (.+)\] \*/,Rr=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sr=/[()=,{}\[\]\/\s]/,$t=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,lr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,rr=/^\[object .+?Constructor\]$/,Lr=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,It=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pr=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,dr="\\ud800-\\udfff",ci="\\u0300-\\u036f",hi="\\ufe20-\\ufe2f",fi="\\u20d0-\\u20ff",Bn=ci+hi+fi,Ln="\\u2700-\\u27bf",Vn="a-z\\xdf-\\xf6\\xf8-\\xff",so="\\xac\\xb1\\xd7\\xf7",di="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pi="\\u2000-\\u206f",gi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",mi="\\ufe0e\\ufe0f",Un=so+di+pi+gi,zn="[']",lo="["+dr+"]",sn="["+Un+"]",ln="["+Bn+"]",Gn="\\d+",vn="["+Ln+"]",Hn="["+Vn+"]",_n="[^"+dr+Un+Gn+Ln+Vn+jn+"]",un="\\ud83c[\\udffb-\\udfff]",bi="(?:"+ln+"|"+un+")",Zn="[^"+dr+"]",Tn="(?:\\ud83c[\\udde6-\\uddff]){2}",cn="[\\ud800-\\udbff][\\udc00-\\udfff]",kr="["+jn+"]",Sn="\\u200d",Wn="(?:"+Hn+"|"+_n+")",L="(?:"+kr+"|"+_n+")",q="(?:"+zn+"(?:d|ll|m|re|s|t|ve))?",ae="(?:"+zn+"(?:D|LL|M|RE|S|T|VE))?",Te=bi+"?",ke="["+mi+"]?",Ke="(?:"+Sn+"(?:"+[Zn,Tn,cn].join("|")+")"+ke+Te+")*",it="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ft="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nr=ke+Te+Ke,Zt="(?:"+[vn,Tn,cn].join("|")+")"+nr,Qt="(?:"+[Zn+ln+"?",ln,Tn,cn,lo].join("|")+")",yi=RegExp(zn,"g"),xi=RegExp(ln,"g"),Me=RegExp(un+"(?="+un+")|"+Qt+nr,"g"),Tt=RegExp([kr+"?"+Hn+"+"+q+"(?="+[sn,kr,"$"].join("|")+")",L+"+"+ae+"(?="+[sn,kr+Wn,"$"].join("|")+")",kr+"?"+Wn+"+"+q,kr+"+"+ae,Ft,it,Gn,Zt].join("|"),"g"),Nt=RegExp("["+Sn+dr+Bn+mi+"]"),Vr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],El=-1,Dt={};Dt[ze]=Dt[Je]=Dt[ot]=Dt[Qe]=Dt[at]=Dt[st]=Dt[We]=Dt[pt]=Dt[vt]=!0,Dt[re]=Dt[oe]=Dt[Le]=Dt[Re]=Dt[Ge]=Dt[De]=Dt[qe]=Dt[W]=Dt[te]=Dt[ie]=Dt[be]=Dt[ve]=Dt[de]=Dt[Oe]=Dt[Ze]=!1;var Ct={};Ct[re]=Ct[oe]=Ct[Le]=Ct[Ge]=Ct[Re]=Ct[De]=Ct[ze]=Ct[Je]=Ct[ot]=Ct[Qe]=Ct[at]=Ct[te]=Ct[ie]=Ct[be]=Ct[ve]=Ct[de]=Ct[Oe]=Ct[fe]=Ct[st]=Ct[We]=Ct[pt]=Ct[vt]=!0,Ct[qe]=Ct[W]=Ct[Ze]=!1;var Al={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Il={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ol={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kl=parseFloat,Ml=parseInt,ga=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Cl=typeof self=="object"&&self&&self.Object===Object&&self,Xt=ga||Cl||Function("return this")(),uo=e&&!e.nodeType&&e,hn=uo&&!0&&r&&!r.nodeType&&r,ma=hn&&hn.exports===uo,co=ma&&ga.process,wr=function(){try{var ce=hn&&hn.require&&hn.require("util").types;return ce||co&&co.binding&&co.binding("util")}catch{}}(),ba=wr&&wr.isArrayBuffer,ya=wr&&wr.isDate,xa=wr&&wr.isMap,wa=wr&&wr.isRegExp,va=wr&&wr.isSet,_a=wr&&wr.isTypedArray;function pr(ce,Ce,Ie){switch(Ie.length){case 0:return ce.call(Ce);case 1:return ce.call(Ce,Ie[0]);case 2:return ce.call(Ce,Ie[0],Ie[1]);case 3:return ce.call(Ce,Ie[0],Ie[1],Ie[2])}return ce.apply(Ce,Ie)}function Dl(ce,Ce,Ie,tt){for(var ft=-1,St=ce==null?0:ce.length;++ft<St;){var Wt=ce[ft];Ce(tt,Wt,Ie(Wt),ce)}return tt}function vr(ce,Ce){for(var Ie=-1,tt=ce==null?0:ce.length;++Ie<tt&&Ce(ce[Ie],Ie,ce)!==!1;);return ce}function $l(ce,Ce){for(var Ie=ce==null?0:ce.length;Ie--&&Ce(ce[Ie],Ie,ce)!==!1;);return ce}function Ta(ce,Ce){for(var Ie=-1,tt=ce==null?0:ce.length;++Ie<tt;)if(!Ce(ce[Ie],Ie,ce))return!1;return!0}function Xr(ce,Ce){for(var Ie=-1,tt=ce==null?0:ce.length,ft=0,St=[];++Ie<tt;){var Wt=ce[Ie];Ce(Wt,Ie,ce)&&(St[ft++]=Wt)}return St}function vi(ce,Ce){var Ie=ce==null?0:ce.length;return!!Ie&&En(ce,Ce,0)>-1}function ho(ce,Ce,Ie){for(var tt=-1,ft=ce==null?0:ce.length;++tt<ft;)if(Ie(Ce,ce[tt]))return!0;return!1}function Rt(ce,Ce){for(var Ie=-1,tt=ce==null?0:ce.length,ft=Array(tt);++Ie<tt;)ft[Ie]=Ce(ce[Ie],Ie,ce);return ft}function Jr(ce,Ce){for(var Ie=-1,tt=Ce.length,ft=ce.length;++Ie<tt;)ce[ft+Ie]=Ce[Ie];return ce}function fo(ce,Ce,Ie,tt){var ft=-1,St=ce==null?0:ce.length;for(tt&&St&&(Ie=ce[++ft]);++ft<St;)Ie=Ce(Ie,ce[ft],ft,ce);return Ie}function Rl(ce,Ce,Ie,tt){var ft=ce==null?0:ce.length;for(tt&&ft&&(Ie=ce[--ft]);ft--;)Ie=Ce(Ie,ce[ft],ft,ce);return Ie}function po(ce,Ce){for(var Ie=-1,tt=ce==null?0:ce.length;++Ie<tt;)if(Ce(ce[Ie],Ie,ce))return!0;return!1}var Fl=go("length");function Nl(ce){return ce.split("")}function Bl(ce){return ce.match(Ut)||[]}function Sa(ce,Ce,Ie){var tt;return Ie(ce,function(ft,St,Wt){if(Ce(ft,St,Wt))return tt=St,!1}),tt}function _i(ce,Ce,Ie,tt){for(var ft=ce.length,St=Ie+(tt?1:-1);tt?St--:++St<ft;)if(Ce(ce[St],St,ce))return St;return-1}function En(ce,Ce,Ie){return Ce===Ce?Kl(ce,Ce,Ie):_i(ce,Ea,Ie)}function Ll(ce,Ce,Ie,tt){for(var ft=Ie-1,St=ce.length;++ft<St;)if(tt(ce[ft],Ce))return ft;return-1}function Ea(ce){return ce!==ce}function Aa(ce,Ce){var Ie=ce==null?0:ce.length;return Ie?bo(ce,Ce)/Ie:he}function go(ce){return function(Ce){return Ce==null?t:Ce[ce]}}function mo(ce){return function(Ce){return ce==null?t:ce[Ce]}}function Ia(ce,Ce,Ie,tt,ft){return ft(ce,function(St,Wt,Mt){Ie=tt?(tt=!1,St):Ce(Ie,St,Wt,Mt)}),Ie}function Vl(ce,Ce){var Ie=ce.length;for(ce.sort(Ce);Ie--;)ce[Ie]=ce[Ie].value;return ce}function bo(ce,Ce){for(var Ie,tt=-1,ft=ce.length;++tt<ft;){var St=Ce(ce[tt]);St!==t&&(Ie=Ie===t?St:Ie+St)}return Ie}function yo(ce,Ce){for(var Ie=-1,tt=Array(ce);++Ie<ce;)tt[Ie]=Ce(Ie);return tt}function jl(ce,Ce){return Rt(Ce,function(Ie){return[Ie,ce[Ie]]})}function Oa(ce){return ce&&ce.slice(0,Ca(ce)+1).replace(lt,"")}function gr(ce){return function(Ce){return ce(Ce)}}function xo(ce,Ce){return Rt(Ce,function(Ie){return ce[Ie]})}function Yn(ce,Ce){return ce.has(Ce)}function Pa(ce,Ce){for(var Ie=-1,tt=ce.length;++Ie<tt&&En(Ce,ce[Ie],0)>-1;);return Ie}function ka(ce,Ce){for(var Ie=ce.length;Ie--&&En(Ce,ce[Ie],0)>-1;);return Ie}function Ul(ce,Ce){for(var Ie=ce.length,tt=0;Ie--;)ce[Ie]===Ce&&++tt;return tt}var zl=mo(Al),Gl=mo(Il);function Hl(ce){return"\\"+Pl[ce]}function Zl(ce,Ce){return ce==null?t:ce[Ce]}function An(ce){return Nt.test(ce)}function Wl(ce){return Vr.test(ce)}function Yl(ce){for(var Ce,Ie=[];!(Ce=ce.next()).done;)Ie.push(Ce.value);return Ie}function wo(ce){var Ce=-1,Ie=Array(ce.size);return ce.forEach(function(tt,ft){Ie[++Ce]=[ft,tt]}),Ie}function Ma(ce,Ce){return function(Ie){return ce(Ce(Ie))}}function Qr(ce,Ce){for(var Ie=-1,tt=ce.length,ft=0,St=[];++Ie<tt;){var Wt=ce[Ie];(Wt===Ce||Wt===m)&&(ce[Ie]=m,St[ft++]=Ie)}return St}function Ti(ce){var Ce=-1,Ie=Array(ce.size);return ce.forEach(function(tt){Ie[++Ce]=tt}),Ie}function ql(ce){var Ce=-1,Ie=Array(ce.size);return ce.forEach(function(tt){Ie[++Ce]=[tt,tt]}),Ie}function Kl(ce,Ce,Ie){for(var tt=Ie-1,ft=ce.length;++tt<ft;)if(ce[tt]===Ce)return tt;return-1}function Xl(ce,Ce,Ie){for(var tt=Ie+1;tt--;)if(ce[tt]===Ce)return tt;return tt}function In(ce){return An(ce)?Ql(ce):Fl(ce)}function Mr(ce){return An(ce)?eu(ce):Nl(ce)}function Ca(ce){for(var Ce=ce.length;Ce--&&mt.test(ce.charAt(Ce)););return Ce}var Jl=mo(Ol);function Ql(ce){for(var Ce=Me.lastIndex=0;Me.test(ce);)++Ce;return Ce}function eu(ce){return ce.match(Me)||[]}function tu(ce){return ce.match(Tt)||[]}var ru=function ce(Ce){Ce=Ce==null?Xt:On.defaults(Xt.Object(),Ce,On.pick(Xt,wi));var Ie=Ce.Array,tt=Ce.Date,ft=Ce.Error,St=Ce.Function,Wt=Ce.Math,Mt=Ce.Object,vo=Ce.RegExp,nu=Ce.String,_r=Ce.TypeError,Si=Ie.prototype,iu=St.prototype,Pn=Mt.prototype,Ei=Ce["__core-js_shared__"],Ai=iu.toString,Ot=Pn.hasOwnProperty,ou=0,Da=function(){var x=/[^.]+$/.exec(Ei&&Ei.keys&&Ei.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Ii=Pn.toString,au=Ai.call(Mt),su=Xt._,lu=vo("^"+Ai.call(Ot).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oi=ma?Ce.Buffer:t,en=Ce.Symbol,Pi=Ce.Uint8Array,$a=Oi?Oi.allocUnsafe:t,ki=Ma(Mt.getPrototypeOf,Mt),Ra=Mt.create,Fa=Pn.propertyIsEnumerable,Mi=Si.splice,Na=en?en.isConcatSpreadable:t,qn=en?en.iterator:t,fn=en?en.toStringTag:t,Ci=function(){try{var x=bn(Mt,"defineProperty");return x({},"",{}),x}catch{}}(),uu=Ce.clearTimeout!==Xt.clearTimeout&&Ce.clearTimeout,cu=tt&&tt.now!==Xt.Date.now&&tt.now,hu=Ce.setTimeout!==Xt.setTimeout&&Ce.setTimeout,Di=Wt.ceil,$i=Wt.floor,_o=Mt.getOwnPropertySymbols,fu=Oi?Oi.isBuffer:t,Ba=Ce.isFinite,du=Si.join,pu=Ma(Mt.keys,Mt),Yt=Wt.max,er=Wt.min,gu=tt.now,mu=Ce.parseInt,La=Wt.random,bu=Si.reverse,To=bn(Ce,"DataView"),Kn=bn(Ce,"Map"),So=bn(Ce,"Promise"),kn=bn(Ce,"Set"),Xn=bn(Ce,"WeakMap"),Jn=bn(Mt,"create"),Ri=Xn&&new Xn,Mn={},yu=yn(To),xu=yn(Kn),wu=yn(So),vu=yn(kn),_u=yn(Xn),Fi=en?en.prototype:t,Qn=Fi?Fi.valueOf:t,Va=Fi?Fi.toString:t;function G(x){if(Vt(x)&&!dt(x)&&!(x instanceof wt)){if(x instanceof Tr)return x;if(Ot.call(x,"__wrapped__"))return js(x)}return new Tr(x)}var Cn=function(){function x(){}return function(v){if(!Bt(v))return{};if(Ra)return Ra(v);x.prototype=v;var I=new x;return x.prototype=t,I}}();function Ni(){}function Tr(x,v){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=t}G.templateSettings={escape:Et,evaluate:Pt,interpolate:H,variable:"",imports:{_:G}},G.prototype=Ni.prototype,G.prototype.constructor=G,Tr.prototype=Cn(Ni.prototype),Tr.prototype.constructor=Tr;function wt(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function Tu(){var x=new wt(this.__wrapped__);return x.__actions__=ur(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=ur(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=ur(this.__views__),x}function Su(){if(this.__filtered__){var x=new wt(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function Eu(){var x=this.__wrapped__.value(),v=this.__dir__,I=dt(x),$=v<0,B=I?x.length:0,Z=Nc(0,B,this.__views__),Q=Z.start,se=Z.end,pe=se-Q,Fe=$?se:Q-1,Ne=this.__iteratees__,je=Ne.length,Xe=0,rt=er(pe,this.__takeCount__);if(!I||!$&&B==pe&&rt==pe)return cs(x,this.__actions__);var ct=[];e:for(;pe--&&Xe<rt;){Fe+=v;for(var bt=-1,ht=x[Fe];++bt<je;){var xt=Ne[bt],_t=xt.iteratee,yr=xt.type,ar=_t(ht);if(yr==N)ht=ar;else if(!ar){if(yr==U)continue e;break e}}ct[Xe++]=ht}return ct}wt.prototype=Cn(Ni.prototype),wt.prototype.constructor=wt;function dn(x){var v=-1,I=x==null?0:x.length;for(this.clear();++v<I;){var $=x[v];this.set($[0],$[1])}}function Au(){this.__data__=Jn?Jn(null):{},this.size=0}function Iu(x){var v=this.has(x)&&delete this.__data__[x];return this.size-=v?1:0,v}function Ou(x){var v=this.__data__;if(Jn){var I=v[x];return I===b?t:I}return Ot.call(v,x)?v[x]:t}function Pu(x){var v=this.__data__;return Jn?v[x]!==t:Ot.call(v,x)}function ku(x,v){var I=this.__data__;return this.size+=this.has(x)?0:1,I[x]=Jn&&v===t?b:v,this}dn.prototype.clear=Au,dn.prototype.delete=Iu,dn.prototype.get=Ou,dn.prototype.has=Pu,dn.prototype.set=ku;function jr(x){var v=-1,I=x==null?0:x.length;for(this.clear();++v<I;){var $=x[v];this.set($[0],$[1])}}function Mu(){this.__data__=[],this.size=0}function Cu(x){var v=this.__data__,I=Bi(v,x);if(I<0)return!1;var $=v.length-1;return I==$?v.pop():Mi.call(v,I,1),--this.size,!0}function Du(x){var v=this.__data__,I=Bi(v,x);return I<0?t:v[I][1]}function $u(x){return Bi(this.__data__,x)>-1}function Ru(x,v){var I=this.__data__,$=Bi(I,x);return $<0?(++this.size,I.push([x,v])):I[$][1]=v,this}jr.prototype.clear=Mu,jr.prototype.delete=Cu,jr.prototype.get=Du,jr.prototype.has=$u,jr.prototype.set=Ru;function Ur(x){var v=-1,I=x==null?0:x.length;for(this.clear();++v<I;){var $=x[v];this.set($[0],$[1])}}function Fu(){this.size=0,this.__data__={hash:new dn,map:new(Kn||jr),string:new dn}}function Nu(x){var v=Ki(this,x).delete(x);return this.size-=v?1:0,v}function Bu(x){return Ki(this,x).get(x)}function Lu(x){return Ki(this,x).has(x)}function Vu(x,v){var I=Ki(this,x),$=I.size;return I.set(x,v),this.size+=I.size==$?0:1,this}Ur.prototype.clear=Fu,Ur.prototype.delete=Nu,Ur.prototype.get=Bu,Ur.prototype.has=Lu,Ur.prototype.set=Vu;function pn(x){var v=-1,I=x==null?0:x.length;for(this.__data__=new Ur;++v<I;)this.add(x[v])}function ju(x){return this.__data__.set(x,b),this}function Uu(x){return this.__data__.has(x)}pn.prototype.add=pn.prototype.push=ju,pn.prototype.has=Uu;function Cr(x){var v=this.__data__=new jr(x);this.size=v.size}function zu(){this.__data__=new jr,this.size=0}function Gu(x){var v=this.__data__,I=v.delete(x);return this.size=v.size,I}function Hu(x){return this.__data__.get(x)}function Zu(x){return this.__data__.has(x)}function Wu(x,v){var I=this.__data__;if(I instanceof jr){var $=I.__data__;if(!Kn||$.length<a-1)return $.push([x,v]),this.size=++I.size,this;I=this.__data__=new Ur($)}return I.set(x,v),this.size=I.size,this}Cr.prototype.clear=zu,Cr.prototype.delete=Gu,Cr.prototype.get=Hu,Cr.prototype.has=Zu,Cr.prototype.set=Wu;function ja(x,v){var I=dt(x),$=!I&&xn(x),B=!I&&!$&&an(x),Z=!I&&!$&&!B&&Fn(x),Q=I||$||B||Z,se=Q?yo(x.length,nu):[],pe=se.length;for(var Fe in x)(v||Ot.call(x,Fe))&&!(Q&&(Fe=="length"||B&&(Fe=="offset"||Fe=="parent")||Z&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Zr(Fe,pe)))&&se.push(Fe);return se}function Ua(x){var v=x.length;return v?x[Ro(0,v-1)]:t}function Yu(x,v){return Xi(ur(x),gn(v,0,x.length))}function qu(x){return Xi(ur(x))}function Eo(x,v,I){(I!==t&&!Dr(x[v],I)||I===t&&!(v in x))&&zr(x,v,I)}function ei(x,v,I){var $=x[v];(!(Ot.call(x,v)&&Dr($,I))||I===t&&!(v in x))&&zr(x,v,I)}function Bi(x,v){for(var I=x.length;I--;)if(Dr(x[I][0],v))return I;return-1}function Ku(x,v,I,$){return tn(x,function(B,Z,Q){v($,B,I(B),Q)}),$}function za(x,v){return x&&Nr(v,Kt(v),x)}function Xu(x,v){return x&&Nr(v,hr(v),x)}function zr(x,v,I){v=="__proto__"&&Ci?Ci(x,v,{configurable:!0,enumerable:!0,value:I,writable:!0}):x[v]=I}function Ao(x,v){for(var I=-1,$=v.length,B=Ie($),Z=x==null;++I<$;)B[I]=Z?t:aa(x,v[I]);return B}function gn(x,v,I){return x===x&&(I!==t&&(x=x<=I?x:I),v!==t&&(x=x>=v?x:v)),x}function Sr(x,v,I,$,B,Z){var Q,se=v&l,pe=v&o,Fe=v&u;if(I&&(Q=B?I(x,$,B,Z):I(x)),Q!==t)return Q;if(!Bt(x))return x;var Ne=dt(x);if(Ne){if(Q=Lc(x),!se)return ur(x,Q)}else{var je=tr(x),Xe=je==W||je==X;if(an(x))return ds(x,se);if(je==be||je==re||Xe&&!B){if(Q=pe||Xe?{}:Cs(x),!se)return pe?Oc(x,Xu(Q,x)):Ic(x,za(Q,x))}else{if(!Ct[je])return B?x:{};Q=Vc(x,je,se)}}Z||(Z=new Cr);var rt=Z.get(x);if(rt)return rt;Z.set(x,Q),sl(x)?x.forEach(function(ht){Q.add(Sr(ht,v,I,ht,x,Z))}):ol(x)&&x.forEach(function(ht,xt){Q.set(xt,Sr(ht,v,I,xt,x,Z))});var ct=Fe?pe?Zo:Ho:pe?hr:Kt,bt=Ne?t:ct(x);return vr(bt||x,function(ht,xt){bt&&(xt=ht,ht=x[xt]),ei(Q,xt,Sr(ht,v,I,xt,x,Z))}),Q}function Ju(x){var v=Kt(x);return function(I){return Ga(I,x,v)}}function Ga(x,v,I){var $=I.length;if(x==null)return!$;for(x=Mt(x);$--;){var B=I[$],Z=v[B],Q=x[B];if(Q===t&&!(B in x)||!Z(Q))return!1}return!0}function Ha(x,v,I){if(typeof x!="function")throw new _r(c);return si(function(){x.apply(t,I)},v)}function ti(x,v,I,$){var B=-1,Z=vi,Q=!0,se=x.length,pe=[],Fe=v.length;if(!se)return pe;I&&(v=Rt(v,gr(I))),$?(Z=ho,Q=!1):v.length>=a&&(Z=Yn,Q=!1,v=new pn(v));e:for(;++B<se;){var Ne=x[B],je=I==null?Ne:I(Ne);if(Ne=$||Ne!==0?Ne:0,Q&&je===je){for(var Xe=Fe;Xe--;)if(v[Xe]===je)continue e;pe.push(Ne)}else Z(v,je,$)||pe.push(Ne)}return pe}var tn=ys(Fr),Za=ys(Oo,!0);function Qu(x,v){var I=!0;return tn(x,function($,B,Z){return I=!!v($,B,Z),I}),I}function Li(x,v,I){for(var $=-1,B=x.length;++$<B;){var Z=x[$],Q=v(Z);if(Q!=null&&(se===t?Q===Q&&!br(Q):I(Q,se)))var se=Q,pe=Z}return pe}function ec(x,v,I,$){var B=x.length;for(I=gt(I),I<0&&(I=-I>B?0:B+I),$=$===t||$>B?B:gt($),$<0&&($+=B),$=I>$?0:ul($);I<$;)x[I++]=v;return x}function Wa(x,v){var I=[];return tn(x,function($,B,Z){v($,B,Z)&&I.push($)}),I}function Jt(x,v,I,$,B){var Z=-1,Q=x.length;for(I||(I=Uc),B||(B=[]);++Z<Q;){var se=x[Z];v>0&&I(se)?v>1?Jt(se,v-1,I,$,B):Jr(B,se):$||(B[B.length]=se)}return B}var Io=xs(),Ya=xs(!0);function Fr(x,v){return x&&Io(x,v,Kt)}function Oo(x,v){return x&&Ya(x,v,Kt)}function Vi(x,v){return Xr(v,function(I){return Wr(x[I])})}function mn(x,v){v=nn(v,x);for(var I=0,$=v.length;x!=null&&I<$;)x=x[Br(v[I++])];return I&&I==$?x:t}function qa(x,v,I){var $=v(x);return dt(x)?$:Jr($,I(x))}function ir(x){return x==null?x===t?Ue:ye:fn&&fn in Mt(x)?Fc(x):qc(x)}function Po(x,v){return x>v}function tc(x,v){return x!=null&&Ot.call(x,v)}function rc(x,v){return x!=null&&v in Mt(x)}function nc(x,v,I){return x>=er(v,I)&&x<Yt(v,I)}function ko(x,v,I){for(var $=I?ho:vi,B=x[0].length,Z=x.length,Q=Z,se=Ie(Z),pe=1/0,Fe=[];Q--;){var Ne=x[Q];Q&&v&&(Ne=Rt(Ne,gr(v))),pe=er(Ne.length,pe),se[Q]=!I&&(v||B>=120&&Ne.length>=120)?new pn(Q&&Ne):t}Ne=x[0];var je=-1,Xe=se[0];e:for(;++je<B&&Fe.length<pe;){var rt=Ne[je],ct=v?v(rt):rt;if(rt=I||rt!==0?rt:0,!(Xe?Yn(Xe,ct):$(Fe,ct,I))){for(Q=Z;--Q;){var bt=se[Q];if(!(bt?Yn(bt,ct):$(x[Q],ct,I)))continue e}Xe&&Xe.push(ct),Fe.push(rt)}}return Fe}function ic(x,v,I,$){return Fr(x,function(B,Z,Q){v($,I(B),Z,Q)}),$}function ri(x,v,I){v=nn(v,x),x=Fs(x,v);var $=x==null?x:x[Br(Ar(v))];return $==null?t:pr($,x,I)}function Ka(x){return Vt(x)&&ir(x)==re}function oc(x){return Vt(x)&&ir(x)==Le}function ac(x){return Vt(x)&&ir(x)==De}function ni(x,v,I,$,B){return x===v?!0:x==null||v==null||!Vt(x)&&!Vt(v)?x!==x&&v!==v:sc(x,v,I,$,ni,B)}function sc(x,v,I,$,B,Z){var Q=dt(x),se=dt(v),pe=Q?oe:tr(x),Fe=se?oe:tr(v);pe=pe==re?be:pe,Fe=Fe==re?be:Fe;var Ne=pe==be,je=Fe==be,Xe=pe==Fe;if(Xe&&an(x)){if(!an(v))return!1;Q=!0,Ne=!1}if(Xe&&!Ne)return Z||(Z=new Cr),Q||Fn(x)?Ps(x,v,I,$,B,Z):$c(x,v,pe,I,$,B,Z);if(!(I&d)){var rt=Ne&&Ot.call(x,"__wrapped__"),ct=je&&Ot.call(v,"__wrapped__");if(rt||ct){var bt=rt?x.value():x,ht=ct?v.value():v;return Z||(Z=new Cr),B(bt,ht,I,$,Z)}}return Xe?(Z||(Z=new Cr),Rc(x,v,I,$,B,Z)):!1}function lc(x){return Vt(x)&&tr(x)==te}function Mo(x,v,I,$){var B=I.length,Z=B,Q=!$;if(x==null)return!Z;for(x=Mt(x);B--;){var se=I[B];if(Q&&se[2]?se[1]!==x[se[0]]:!(se[0]in x))return!1}for(;++B<Z;){se=I[B];var pe=se[0],Fe=x[pe],Ne=se[1];if(Q&&se[2]){if(Fe===t&&!(pe in x))return!1}else{var je=new Cr;if($)var Xe=$(Fe,Ne,pe,x,v,je);if(!(Xe===t?ni(Ne,Fe,d|y,$,je):Xe))return!1}}return!0}function Xa(x){if(!Bt(x)||Gc(x))return!1;var v=Wr(x)?lu:rr;return v.test(yn(x))}function uc(x){return Vt(x)&&ir(x)==ve}function cc(x){return Vt(x)&&tr(x)==de}function hc(x){return Vt(x)&&no(x.length)&&!!Dt[ir(x)]}function Ja(x){return typeof x=="function"?x:x==null?fr:typeof x=="object"?dt(x)?ts(x[0],x[1]):es(x):wl(x)}function Co(x){if(!ai(x))return pu(x);var v=[];for(var I in Mt(x))Ot.call(x,I)&&I!="constructor"&&v.push(I);return v}function fc(x){if(!Bt(x))return Yc(x);var v=ai(x),I=[];for(var $ in x)$=="constructor"&&(v||!Ot.call(x,$))||I.push($);return I}function Do(x,v){return x<v}function Qa(x,v){var I=-1,$=cr(x)?Ie(x.length):[];return tn(x,function(B,Z,Q){$[++I]=v(B,Z,Q)}),$}function es(x){var v=Yo(x);return v.length==1&&v[0][2]?$s(v[0][0],v[0][1]):function(I){return I===x||Mo(I,x,v)}}function ts(x,v){return Ko(x)&&Ds(v)?$s(Br(x),v):function(I){var $=aa(I,x);return $===t&&$===v?sa(I,x):ni(v,$,d|y)}}function ji(x,v,I,$,B){x!==v&&Io(v,function(Z,Q){if(B||(B=new Cr),Bt(Z))dc(x,v,Q,I,ji,$,B);else{var se=$?$(Jo(x,Q),Z,Q+"",x,v,B):t;se===t&&(se=Z),Eo(x,Q,se)}},hr)}function dc(x,v,I,$,B,Z,Q){var se=Jo(x,I),pe=Jo(v,I),Fe=Q.get(pe);if(Fe){Eo(x,I,Fe);return}var Ne=Z?Z(se,pe,I+"",x,v,Q):t,je=Ne===t;if(je){var Xe=dt(pe),rt=!Xe&&an(pe),ct=!Xe&&!rt&&Fn(pe);Ne=pe,Xe||rt||ct?dt(se)?Ne=se:zt(se)?Ne=ur(se):rt?(je=!1,Ne=ds(pe,!0)):ct?(je=!1,Ne=ps(pe,!0)):Ne=[]:ui(pe)||xn(pe)?(Ne=se,xn(se)?Ne=cl(se):(!Bt(se)||Wr(se))&&(Ne=Cs(pe))):je=!1}je&&(Q.set(pe,Ne),B(Ne,pe,$,Z,Q),Q.delete(pe)),Eo(x,I,Ne)}function rs(x,v){var I=x.length;if(I)return v+=v<0?I:0,Zr(v,I)?x[v]:t}function ns(x,v,I){v.length?v=Rt(v,function(Z){return dt(Z)?function(Q){return mn(Q,Z.length===1?Z[0]:Z)}:Z}):v=[fr];var $=-1;v=Rt(v,gr(ut()));var B=Qa(x,function(Z,Q,se){var pe=Rt(v,function(Fe){return Fe(Z)});return{criteria:pe,index:++$,value:Z}});return Vl(B,function(Z,Q){return Ac(Z,Q,I)})}function pc(x,v){return is(x,v,function(I,$){return sa(x,$)})}function is(x,v,I){for(var $=-1,B=v.length,Z={};++$<B;){var Q=v[$],se=mn(x,Q);I(se,Q)&&ii(Z,nn(Q,x),se)}return Z}function gc(x){return function(v){return mn(v,x)}}function $o(x,v,I,$){var B=$?Ll:En,Z=-1,Q=v.length,se=x;for(x===v&&(v=ur(v)),I&&(se=Rt(x,gr(I)));++Z<Q;)for(var pe=0,Fe=v[Z],Ne=I?I(Fe):Fe;(pe=B(se,Ne,pe,$))>-1;)se!==x&&Mi.call(se,pe,1),Mi.call(x,pe,1);return x}function os(x,v){for(var I=x?v.length:0,$=I-1;I--;){var B=v[I];if(I==$||B!==Z){var Z=B;Zr(B)?Mi.call(x,B,1):Bo(x,B)}}return x}function Ro(x,v){return x+$i(La()*(v-x+1))}function mc(x,v,I,$){for(var B=-1,Z=Yt(Di((v-x)/(I||1)),0),Q=Ie(Z);Z--;)Q[$?Z:++B]=x,x+=I;return Q}function Fo(x,v){var I="";if(!x||v<1||v>K)return I;do v%2&&(I+=x),v=$i(v/2),v&&(x+=x);while(v);return I}function yt(x,v){return Qo(Rs(x,v,fr),x+"")}function bc(x){return Ua(Nn(x))}function yc(x,v){var I=Nn(x);return Xi(I,gn(v,0,I.length))}function ii(x,v,I,$){if(!Bt(x))return x;v=nn(v,x);for(var B=-1,Z=v.length,Q=Z-1,se=x;se!=null&&++B<Z;){var pe=Br(v[B]),Fe=I;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return x;if(B!=Q){var Ne=se[pe];Fe=$?$(Ne,pe,se):t,Fe===t&&(Fe=Bt(Ne)?Ne:Zr(v[B+1])?[]:{})}ei(se,pe,Fe),se=se[pe]}return x}var as=Ri?function(x,v){return Ri.set(x,v),x}:fr,xc=Ci?function(x,v){return Ci(x,"toString",{configurable:!0,enumerable:!1,value:ua(v),writable:!0})}:fr;function wc(x){return Xi(Nn(x))}function Er(x,v,I){var $=-1,B=x.length;v<0&&(v=-v>B?0:B+v),I=I>B?B:I,I<0&&(I+=B),B=v>I?0:I-v>>>0,v>>>=0;for(var Z=Ie(B);++$<B;)Z[$]=x[$+v];return Z}function vc(x,v){var I;return tn(x,function($,B,Z){return I=v($,B,Z),!I}),!!I}function Ui(x,v,I){var $=0,B=x==null?$:x.length;if(typeof v=="number"&&v===v&&B<=we){for(;$<B;){var Z=$+B>>>1,Q=x[Z];Q!==null&&!br(Q)&&(I?Q<=v:Q<v)?$=Z+1:B=Z}return B}return No(x,v,fr,I)}function No(x,v,I,$){var B=0,Z=x==null?0:x.length;if(Z===0)return 0;v=I(v);for(var Q=v!==v,se=v===null,pe=br(v),Fe=v===t;B<Z;){var Ne=$i((B+Z)/2),je=I(x[Ne]),Xe=je!==t,rt=je===null,ct=je===je,bt=br(je);if(Q)var ht=$||ct;else Fe?ht=ct&&($||Xe):se?ht=ct&&Xe&&($||!rt):pe?ht=ct&&Xe&&!rt&&($||!bt):rt||bt?ht=!1:ht=$?je<=v:je<v;ht?B=Ne+1:Z=Ne}return er(Z,Se)}function ss(x,v){for(var I=-1,$=x.length,B=0,Z=[];++I<$;){var Q=x[I],se=v?v(Q):Q;if(!I||!Dr(se,pe)){var pe=se;Z[B++]=Q===0?0:Q}}return Z}function ls(x){return typeof x=="number"?x:br(x)?he:+x}function mr(x){if(typeof x=="string")return x;if(dt(x))return Rt(x,mr)+"";if(br(x))return Va?Va.call(x):"";var v=x+"";return v=="0"&&1/x==-j?"-0":v}function rn(x,v,I){var $=-1,B=vi,Z=x.length,Q=!0,se=[],pe=se;if(I)Q=!1,B=ho;else if(Z>=a){var Fe=v?null:Cc(x);if(Fe)return Ti(Fe);Q=!1,B=Yn,pe=new pn}else pe=v?[]:se;e:for(;++$<Z;){var Ne=x[$],je=v?v(Ne):Ne;if(Ne=I||Ne!==0?Ne:0,Q&&je===je){for(var Xe=pe.length;Xe--;)if(pe[Xe]===je)continue e;v&&pe.push(je),se.push(Ne)}else B(pe,je,I)||(pe!==se&&pe.push(je),se.push(Ne))}return se}function Bo(x,v){return v=nn(v,x),x=Fs(x,v),x==null||delete x[Br(Ar(v))]}function us(x,v,I,$){return ii(x,v,I(mn(x,v)),$)}function zi(x,v,I,$){for(var B=x.length,Z=$?B:-1;($?Z--:++Z<B)&&v(x[Z],Z,x););return I?Er(x,$?0:Z,$?Z+1:B):Er(x,$?Z+1:0,$?B:Z)}function cs(x,v){var I=x;return I instanceof wt&&(I=I.value()),fo(v,function($,B){return B.func.apply(B.thisArg,Jr([$],B.args))},I)}function Lo(x,v,I){var $=x.length;if($<2)return $?rn(x[0]):[];for(var B=-1,Z=Ie($);++B<$;)for(var Q=x[B],se=-1;++se<$;)se!=B&&(Z[B]=ti(Z[B]||Q,x[se],v,I));return rn(Jt(Z,1),v,I)}function hs(x,v,I){for(var $=-1,B=x.length,Z=v.length,Q={};++$<B;){var se=$<Z?v[$]:t;I(Q,x[$],se)}return Q}function Vo(x){return zt(x)?x:[]}function jo(x){return typeof x=="function"?x:fr}function nn(x,v){return dt(x)?x:Ko(x,v)?[x]:Vs(At(x))}var _c=yt;function on(x,v,I){var $=x.length;return I=I===t?$:I,!v&&I>=$?x:Er(x,v,I)}var fs=uu||function(x){return Xt.clearTimeout(x)};function ds(x,v){if(v)return x.slice();var I=x.length,$=$a?$a(I):new x.constructor(I);return x.copy($),$}function Uo(x){var v=new x.constructor(x.byteLength);return new Pi(v).set(new Pi(x)),v}function Tc(x,v){var I=v?Uo(x.buffer):x.buffer;return new x.constructor(I,x.byteOffset,x.byteLength)}function Sc(x){var v=new x.constructor(x.source,Lt.exec(x));return v.lastIndex=x.lastIndex,v}function Ec(x){return Qn?Mt(Qn.call(x)):{}}function ps(x,v){var I=v?Uo(x.buffer):x.buffer;return new x.constructor(I,x.byteOffset,x.length)}function gs(x,v){if(x!==v){var I=x!==t,$=x===null,B=x===x,Z=br(x),Q=v!==t,se=v===null,pe=v===v,Fe=br(v);if(!se&&!Fe&&!Z&&x>v||Z&&Q&&pe&&!se&&!Fe||$&&Q&&pe||!I&&pe||!B)return 1;if(!$&&!Z&&!Fe&&x<v||Fe&&I&&B&&!$&&!Z||se&&I&&B||!Q&&B||!pe)return-1}return 0}function Ac(x,v,I){for(var $=-1,B=x.criteria,Z=v.criteria,Q=B.length,se=I.length;++$<Q;){var pe=gs(B[$],Z[$]);if(pe){if($>=se)return pe;var Fe=I[$];return pe*(Fe=="desc"?-1:1)}}return x.index-v.index}function ms(x,v,I,$){for(var B=-1,Z=x.length,Q=I.length,se=-1,pe=v.length,Fe=Yt(Z-Q,0),Ne=Ie(pe+Fe),je=!$;++se<pe;)Ne[se]=v[se];for(;++B<Q;)(je||B<Z)&&(Ne[I[B]]=x[B]);for(;Fe--;)Ne[se++]=x[B++];return Ne}function bs(x,v,I,$){for(var B=-1,Z=x.length,Q=-1,se=I.length,pe=-1,Fe=v.length,Ne=Yt(Z-se,0),je=Ie(Ne+Fe),Xe=!$;++B<Ne;)je[B]=x[B];for(var rt=B;++pe<Fe;)je[rt+pe]=v[pe];for(;++Q<se;)(Xe||B<Z)&&(je[rt+I[Q]]=x[B++]);return je}function ur(x,v){var I=-1,$=x.length;for(v||(v=Ie($));++I<$;)v[I]=x[I];return v}function Nr(x,v,I,$){var B=!I;I||(I={});for(var Z=-1,Q=v.length;++Z<Q;){var se=v[Z],pe=$?$(I[se],x[se],se,I,x):t;pe===t&&(pe=x[se]),B?zr(I,se,pe):ei(I,se,pe)}return I}function Ic(x,v){return Nr(x,qo(x),v)}function Oc(x,v){return Nr(x,ks(x),v)}function Gi(x,v){return function(I,$){var B=dt(I)?Dl:Ku,Z=v?v():{};return B(I,x,ut($,2),Z)}}function Dn(x){return yt(function(v,I){var $=-1,B=I.length,Z=B>1?I[B-1]:t,Q=B>2?I[2]:t;for(Z=x.length>3&&typeof Z=="function"?(B--,Z):t,Q&&or(I[0],I[1],Q)&&(Z=B<3?t:Z,B=1),v=Mt(v);++$<B;){var se=I[$];se&&x(v,se,$,Z)}return v})}function ys(x,v){return function(I,$){if(I==null)return I;if(!cr(I))return x(I,$);for(var B=I.length,Z=v?B:-1,Q=Mt(I);(v?Z--:++Z<B)&&$(Q[Z],Z,Q)!==!1;);return I}}function xs(x){return function(v,I,$){for(var B=-1,Z=Mt(v),Q=$(v),se=Q.length;se--;){var pe=Q[x?se:++B];if(I(Z[pe],pe,Z)===!1)break}return v}}function Pc(x,v,I){var $=v&w,B=oi(x);function Z(){var Q=this&&this!==Xt&&this instanceof Z?B:x;return Q.apply($?I:this,arguments)}return Z}function ws(x){return function(v){v=At(v);var I=An(v)?Mr(v):t,$=I?I[0]:v.charAt(0),B=I?on(I,1).join(""):v.slice(1);return $[x]()+B}}function $n(x){return function(v){return fo(yl(bl(v).replace(yi,"")),x,"")}}function oi(x){return function(){var v=arguments;switch(v.length){case 0:return new x;case 1:return new x(v[0]);case 2:return new x(v[0],v[1]);case 3:return new x(v[0],v[1],v[2]);case 4:return new x(v[0],v[1],v[2],v[3]);case 5:return new x(v[0],v[1],v[2],v[3],v[4]);case 6:return new x(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new x(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var I=Cn(x.prototype),$=x.apply(I,v);return Bt($)?$:I}}function kc(x,v,I){var $=oi(x);function B(){for(var Z=arguments.length,Q=Ie(Z),se=Z,pe=Rn(B);se--;)Q[se]=arguments[se];var Fe=Z<3&&Q[0]!==pe&&Q[Z-1]!==pe?[]:Qr(Q,pe);if(Z-=Fe.length,Z<I)return Es(x,v,Hi,B.placeholder,t,Q,Fe,t,t,I-Z);var Ne=this&&this!==Xt&&this instanceof B?$:x;return pr(Ne,this,Q)}return B}function vs(x){return function(v,I,$){var B=Mt(v);if(!cr(v)){var Z=ut(I,3);v=Kt(v),I=function(se){return Z(B[se],se,B)}}var Q=x(v,I,$);return Q>-1?B[Z?v[Q]:Q]:t}}function _s(x){return Hr(function(v){var I=v.length,$=I,B=Tr.prototype.thru;for(x&&v.reverse();$--;){var Z=v[$];if(typeof Z!="function")throw new _r(c);if(B&&!Q&&qi(Z)=="wrapper")var Q=new Tr([],!0)}for($=Q?$:I;++$<I;){Z=v[$];var se=qi(Z),pe=se=="wrapper"?Wo(Z):t;pe&&Xo(pe[0])&&pe[1]==(k|S|A|M)&&!pe[4].length&&pe[9]==1?Q=Q[qi(pe[0])].apply(Q,pe[3]):Q=Z.length==1&&Xo(Z)?Q[se]():Q.thru(Z)}return function(){var Fe=arguments,Ne=Fe[0];if(Q&&Fe.length==1&&dt(Ne))return Q.plant(Ne).value();for(var je=0,Xe=I?v[je].apply(this,Fe):Ne;++je<I;)Xe=v[je].call(this,Xe);return Xe}})}function Hi(x,v,I,$,B,Z,Q,se,pe,Fe){var Ne=v&k,je=v&w,Xe=v&_,rt=v&(S|E),ct=v&F,bt=Xe?t:oi(x);function ht(){for(var xt=arguments.length,_t=Ie(xt),yr=xt;yr--;)_t[yr]=arguments[yr];if(rt)var ar=Rn(ht),xr=Ul(_t,ar);if($&&(_t=ms(_t,$,B,rt)),Z&&(_t=bs(_t,Z,Q,rt)),xt-=xr,rt&&xt<Fe){var Gt=Qr(_t,ar);return Es(x,v,Hi,ht.placeholder,I,_t,Gt,se,pe,Fe-xt)}var $r=je?I:this,qr=Xe?$r[x]:x;return xt=_t.length,se?_t=Kc(_t,se):ct&&xt>1&&_t.reverse(),Ne&&pe<xt&&(_t.length=pe),this&&this!==Xt&&this instanceof ht&&(qr=bt||oi(qr)),qr.apply($r,_t)}return ht}function Ts(x,v){return function(I,$){return ic(I,x,v($),{})}}function Zi(x,v){return function(I,$){var B;if(I===t&&$===t)return v;if(I!==t&&(B=I),$!==t){if(B===t)return $;typeof I=="string"||typeof $=="string"?(I=mr(I),$=mr($)):(I=ls(I),$=ls($)),B=x(I,$)}return B}}function zo(x){return Hr(function(v){return v=Rt(v,gr(ut())),yt(function(I){var $=this;return x(v,function(B){return pr(B,$,I)})})})}function Wi(x,v){v=v===t?" ":mr(v);var I=v.length;if(I<2)return I?Fo(v,x):v;var $=Fo(v,Di(x/In(v)));return An(v)?on(Mr($),0,x).join(""):$.slice(0,x)}function Mc(x,v,I,$){var B=v&w,Z=oi(x);function Q(){for(var se=-1,pe=arguments.length,Fe=-1,Ne=$.length,je=Ie(Ne+pe),Xe=this&&this!==Xt&&this instanceof Q?Z:x;++Fe<Ne;)je[Fe]=$[Fe];for(;pe--;)je[Fe++]=arguments[++se];return pr(Xe,B?I:this,je)}return Q}function Ss(x){return function(v,I,$){return $&&typeof $!="number"&&or(v,I,$)&&(I=$=t),v=Yr(v),I===t?(I=v,v=0):I=Yr(I),$=$===t?v<I?1:-1:Yr($),mc(v,I,$,x)}}function Yi(x){return function(v,I){return typeof v=="string"&&typeof I=="string"||(v=Ir(v),I=Ir(I)),x(v,I)}}function Es(x,v,I,$,B,Z,Q,se,pe,Fe){var Ne=v&S,je=Ne?Q:t,Xe=Ne?t:Q,rt=Ne?Z:t,ct=Ne?t:Z;v|=Ne?A:P,v&=~(Ne?P:A),v&T||(v&=~(w|_));var bt=[x,v,B,rt,je,ct,Xe,se,pe,Fe],ht=I.apply(t,bt);return Xo(x)&&Ns(ht,bt),ht.placeholder=$,Bs(ht,x,v)}function Go(x){var v=Wt[x];return function(I,$){if(I=Ir(I),$=$==null?0:er(gt($),292),$&&Ba(I)){var B=(At(I)+"e").split("e"),Z=v(B[0]+"e"+(+B[1]+$));return B=(At(Z)+"e").split("e"),+(B[0]+"e"+(+B[1]-$))}return v(I)}}var Cc=kn&&1/Ti(new kn([,-0]))[1]==j?function(x){return new kn(x)}:fa;function As(x){return function(v){var I=tr(v);return I==te?wo(v):I==de?ql(v):jl(v,x(v))}}function Gr(x,v,I,$,B,Z,Q,se){var pe=v&_;if(!pe&&typeof x!="function")throw new _r(c);var Fe=$?$.length:0;if(Fe||(v&=~(A|P),$=B=t),Q=Q===t?Q:Yt(gt(Q),0),se=se===t?se:gt(se),Fe-=B?B.length:0,v&P){var Ne=$,je=B;$=B=t}var Xe=pe?t:Wo(x),rt=[x,v,I,$,B,Ne,je,Z,Q,se];if(Xe&&Wc(rt,Xe),x=rt[0],v=rt[1],I=rt[2],$=rt[3],B=rt[4],se=rt[9]=rt[9]===t?pe?0:x.length:Yt(rt[9]-Fe,0),!se&&v&(S|E)&&(v&=~(S|E)),!v||v==w)var ct=Pc(x,v,I);else v==S||v==E?ct=kc(x,v,se):(v==A||v==(w|A))&&!B.length?ct=Mc(x,v,I,$):ct=Hi.apply(t,rt);var bt=Xe?as:Ns;return Bs(bt(ct,rt),x,v)}function Is(x,v,I,$){return x===t||Dr(x,Pn[I])&&!Ot.call($,I)?v:x}function Os(x,v,I,$,B,Z){return Bt(x)&&Bt(v)&&(Z.set(v,x),ji(x,v,t,Os,Z),Z.delete(v)),x}function Dc(x){return ui(x)?t:x}function Ps(x,v,I,$,B,Z){var Q=I&d,se=x.length,pe=v.length;if(se!=pe&&!(Q&&pe>se))return!1;var Fe=Z.get(x),Ne=Z.get(v);if(Fe&&Ne)return Fe==v&&Ne==x;var je=-1,Xe=!0,rt=I&y?new pn:t;for(Z.set(x,v),Z.set(v,x);++je<se;){var ct=x[je],bt=v[je];if($)var ht=Q?$(bt,ct,je,v,x,Z):$(ct,bt,je,x,v,Z);if(ht!==t){if(ht)continue;Xe=!1;break}if(rt){if(!po(v,function(xt,_t){if(!Yn(rt,_t)&&(ct===xt||B(ct,xt,I,$,Z)))return rt.push(_t)})){Xe=!1;break}}else if(!(ct===bt||B(ct,bt,I,$,Z))){Xe=!1;break}}return Z.delete(x),Z.delete(v),Xe}function $c(x,v,I,$,B,Z,Q){switch(I){case Ge:if(x.byteLength!=v.byteLength||x.byteOffset!=v.byteOffset)return!1;x=x.buffer,v=v.buffer;case Le:return!(x.byteLength!=v.byteLength||!Z(new Pi(x),new Pi(v)));case Re:case De:case ie:return Dr(+x,+v);case qe:return x.name==v.name&&x.message==v.message;case ve:case Oe:return x==v+"";case te:var se=wo;case de:var pe=$&d;if(se||(se=Ti),x.size!=v.size&&!pe)return!1;var Fe=Q.get(x);if(Fe)return Fe==v;$|=y,Q.set(x,v);var Ne=Ps(se(x),se(v),$,B,Z,Q);return Q.delete(x),Ne;case fe:if(Qn)return Qn.call(x)==Qn.call(v)}return!1}function Rc(x,v,I,$,B,Z){var Q=I&d,se=Ho(x),pe=se.length,Fe=Ho(v),Ne=Fe.length;if(pe!=Ne&&!Q)return!1;for(var je=pe;je--;){var Xe=se[je];if(!(Q?Xe in v:Ot.call(v,Xe)))return!1}var rt=Z.get(x),ct=Z.get(v);if(rt&&ct)return rt==v&&ct==x;var bt=!0;Z.set(x,v),Z.set(v,x);for(var ht=Q;++je<pe;){Xe=se[je];var xt=x[Xe],_t=v[Xe];if($)var yr=Q?$(_t,xt,Xe,v,x,Z):$(xt,_t,Xe,x,v,Z);if(!(yr===t?xt===_t||B(xt,_t,I,$,Z):yr)){bt=!1;break}ht||(ht=Xe=="constructor")}if(bt&&!ht){var ar=x.constructor,xr=v.constructor;ar!=xr&&"constructor"in x&&"constructor"in v&&!(typeof ar=="function"&&ar instanceof ar&&typeof xr=="function"&&xr instanceof xr)&&(bt=!1)}return Z.delete(x),Z.delete(v),bt}function Hr(x){return Qo(Rs(x,t,Gs),x+"")}function Ho(x){return qa(x,Kt,qo)}function Zo(x){return qa(x,hr,ks)}var Wo=Ri?function(x){return Ri.get(x)}:fa;function qi(x){for(var v=x.name+"",I=Mn[v],$=Ot.call(Mn,v)?I.length:0;$--;){var B=I[$],Z=B.func;if(Z==null||Z==x)return B.name}return v}function Rn(x){var v=Ot.call(G,"placeholder")?G:x;return v.placeholder}function ut(){var x=G.iteratee||ca;return x=x===ca?Ja:x,arguments.length?x(arguments[0],arguments[1]):x}function Ki(x,v){var I=x.__data__;return zc(v)?I[typeof v=="string"?"string":"hash"]:I.map}function Yo(x){for(var v=Kt(x),I=v.length;I--;){var $=v[I],B=x[$];v[I]=[$,B,Ds(B)]}return v}function bn(x,v){var I=Zl(x,v);return Xa(I)?I:t}function Fc(x){var v=Ot.call(x,fn),I=x[fn];try{x[fn]=t;var $=!0}catch{}var B=Ii.call(x);return $&&(v?x[fn]=I:delete x[fn]),B}var qo=_o?function(x){return x==null?[]:(x=Mt(x),Xr(_o(x),function(v){return Fa.call(x,v)}))}:da,ks=_o?function(x){for(var v=[];x;)Jr(v,qo(x)),x=ki(x);return v}:da,tr=ir;(To&&tr(new To(new ArrayBuffer(1)))!=Ge||Kn&&tr(new Kn)!=te||So&&tr(So.resolve())!=Ae||kn&&tr(new kn)!=de||Xn&&tr(new Xn)!=Ze)&&(tr=function(x){var v=ir(x),I=v==be?x.constructor:t,$=I?yn(I):"";if($)switch($){case yu:return Ge;case xu:return te;case wu:return Ae;case vu:return de;case _u:return Ze}return v});function Nc(x,v,I){for(var $=-1,B=I.length;++$<B;){var Z=I[$],Q=Z.size;switch(Z.type){case"drop":x+=Q;break;case"dropRight":v-=Q;break;case"take":v=er(v,x+Q);break;case"takeRight":x=Yt(x,v-Q);break}}return{start:x,end:v}}function Bc(x){var v=x.match(jt);return v?v[1].split(Rr):[]}function Ms(x,v,I){v=nn(v,x);for(var $=-1,B=v.length,Z=!1;++$<B;){var Q=Br(v[$]);if(!(Z=x!=null&&I(x,Q)))break;x=x[Q]}return Z||++$!=B?Z:(B=x==null?0:x.length,!!B&&no(B)&&Zr(Q,B)&&(dt(x)||xn(x)))}function Lc(x){var v=x.length,I=new x.constructor(v);return v&&typeof x[0]=="string"&&Ot.call(x,"index")&&(I.index=x.index,I.input=x.input),I}function Cs(x){return typeof x.constructor=="function"&&!ai(x)?Cn(ki(x)):{}}function Vc(x,v,I){var $=x.constructor;switch(v){case Le:return Uo(x);case Re:case De:return new $(+x);case Ge:return Tc(x,I);case ze:case Je:case ot:case Qe:case at:case st:case We:case pt:case vt:return ps(x,I);case te:return new $;case ie:case Oe:return new $(x);case ve:return Sc(x);case de:return new $;case fe:return Ec(x)}}function jc(x,v){var I=v.length;if(!I)return x;var $=I-1;return v[$]=(I>1?"& ":"")+v[$],v=v.join(I>2?", ":" "),x.replace(kt,`{
/* [wrapped with `+v+`] */
`)}function Uc(x){return dt(x)||xn(x)||!!(Na&&x&&x[Na])}function Zr(x,v){var I=typeof x;return v=v??K,!!v&&(I=="number"||I!="symbol"&&wn.test(x))&&x>-1&&x%1==0&&x<v}function or(x,v,I){if(!Bt(I))return!1;var $=typeof v;return($=="number"?cr(I)&&Zr(v,I.length):$=="string"&&v in I)?Dr(I[v],x):!1}function Ko(x,v){if(dt(x))return!1;var I=typeof x;return I=="number"||I=="symbol"||I=="boolean"||x==null||br(x)?!0:xe.test(x)||!ue.test(x)||v!=null&&x in Mt(v)}function zc(x){var v=typeof x;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?x!=="__proto__":x===null}function Xo(x){var v=qi(x),I=G[v];if(typeof I!="function"||!(v in wt.prototype))return!1;if(x===I)return!0;var $=Wo(I);return!!$&&x===$[0]}function Gc(x){return!!Da&&Da in x}var Hc=Ei?Wr:pa;function ai(x){var v=x&&x.constructor,I=typeof v=="function"&&v.prototype||Pn;return x===I}function Ds(x){return x===x&&!Bt(x)}function $s(x,v){return function(I){return I==null?!1:I[x]===v&&(v!==t||x in Mt(I))}}function Zc(x){var v=to(x,function($){return I.size===g&&I.clear(),$}),I=v.cache;return v}function Wc(x,v){var I=x[1],$=v[1],B=I|$,Z=B<(w|_|k),Q=$==k&&I==S||$==k&&I==M&&x[7].length<=v[8]||$==(k|M)&&v[7].length<=v[8]&&I==S;if(!(Z||Q))return x;$&w&&(x[2]=v[2],B|=I&w?0:T);var se=v[3];if(se){var pe=x[3];x[3]=pe?ms(pe,se,v[4]):se,x[4]=pe?Qr(x[3],m):v[4]}return se=v[5],se&&(pe=x[5],x[5]=pe?bs(pe,se,v[6]):se,x[6]=pe?Qr(x[5],m):v[6]),se=v[7],se&&(x[7]=se),$&k&&(x[8]=x[8]==null?v[8]:er(x[8],v[8])),x[9]==null&&(x[9]=v[9]),x[0]=v[0],x[1]=B,x}function Yc(x){var v=[];if(x!=null)for(var I in Mt(x))v.push(I);return v}function qc(x){return Ii.call(x)}function Rs(x,v,I){return v=Yt(v===t?x.length-1:v,0),function(){for(var $=arguments,B=-1,Z=Yt($.length-v,0),Q=Ie(Z);++B<Z;)Q[B]=$[v+B];B=-1;for(var se=Ie(v+1);++B<v;)se[B]=$[B];return se[v]=I(Q),pr(x,this,se)}}function Fs(x,v){return v.length<2?x:mn(x,Er(v,0,-1))}function Kc(x,v){for(var I=x.length,$=er(v.length,I),B=ur(x);$--;){var Z=v[$];x[$]=Zr(Z,I)?B[Z]:t}return x}function Jo(x,v){if(!(v==="constructor"&&typeof x[v]=="function")&&v!="__proto__")return x[v]}var Ns=Ls(as),si=hu||function(x,v){return Xt.setTimeout(x,v)},Qo=Ls(xc);function Bs(x,v,I){var $=v+"";return Qo(x,jc($,Xc(Bc($),I)))}function Ls(x){var v=0,I=0;return function(){var $=gu(),B=C-($-I);if(I=$,B>0){if(++v>=R)return arguments[0]}else v=0;return x.apply(t,arguments)}}function Xi(x,v){var I=-1,$=x.length,B=$-1;for(v=v===t?$:v;++I<v;){var Z=Ro(I,B),Q=x[Z];x[Z]=x[I],x[I]=Q}return x.length=v,x}var Vs=Zc(function(x){var v=[];return x.charCodeAt(0)===46&&v.push(""),x.replace(Be,function(I,$,B,Z){v.push(B?Z.replace($t,"$1"):$||I)}),v});function Br(x){if(typeof x=="string"||br(x))return x;var v=x+"";return v=="0"&&1/x==-j?"-0":v}function yn(x){if(x!=null){try{return Ai.call(x)}catch{}try{return x+""}catch{}}return""}function Xc(x,v){return vr(ne,function(I){var $="_."+I[0];v&I[1]&&!vi(x,$)&&x.push($)}),x.sort()}function js(x){if(x instanceof wt)return x.clone();var v=new Tr(x.__wrapped__,x.__chain__);return v.__actions__=ur(x.__actions__),v.__index__=x.__index__,v.__values__=x.__values__,v}function Jc(x,v,I){(I?or(x,v,I):v===t)?v=1:v=Yt(gt(v),0);var $=x==null?0:x.length;if(!$||v<1)return[];for(var B=0,Z=0,Q=Ie(Di($/v));B<$;)Q[Z++]=Er(x,B,B+=v);return Q}function Qc(x){for(var v=-1,I=x==null?0:x.length,$=0,B=[];++v<I;){var Z=x[v];Z&&(B[$++]=Z)}return B}function eh(){var x=arguments.length;if(!x)return[];for(var v=Ie(x-1),I=arguments[0],$=x;$--;)v[$-1]=arguments[$];return Jr(dt(I)?ur(I):[I],Jt(v,1))}var th=yt(function(x,v){return zt(x)?ti(x,Jt(v,1,zt,!0)):[]}),rh=yt(function(x,v){var I=Ar(v);return zt(I)&&(I=t),zt(x)?ti(x,Jt(v,1,zt,!0),ut(I,2)):[]}),nh=yt(function(x,v){var I=Ar(v);return zt(I)&&(I=t),zt(x)?ti(x,Jt(v,1,zt,!0),t,I):[]});function ih(x,v,I){var $=x==null?0:x.length;return $?(v=I||v===t?1:gt(v),Er(x,v<0?0:v,$)):[]}function oh(x,v,I){var $=x==null?0:x.length;return $?(v=I||v===t?1:gt(v),v=$-v,Er(x,0,v<0?0:v)):[]}function ah(x,v){return x&&x.length?zi(x,ut(v,3),!0,!0):[]}function sh(x,v){return x&&x.length?zi(x,ut(v,3),!0):[]}function lh(x,v,I,$){var B=x==null?0:x.length;return B?(I&&typeof I!="number"&&or(x,v,I)&&(I=0,$=B),ec(x,v,I,$)):[]}function Us(x,v,I){var $=x==null?0:x.length;if(!$)return-1;var B=I==null?0:gt(I);return B<0&&(B=Yt($+B,0)),_i(x,ut(v,3),B)}function zs(x,v,I){var $=x==null?0:x.length;if(!$)return-1;var B=$-1;return I!==t&&(B=gt(I),B=I<0?Yt($+B,0):er(B,$-1)),_i(x,ut(v,3),B,!0)}function Gs(x){var v=x==null?0:x.length;return v?Jt(x,1):[]}function uh(x){var v=x==null?0:x.length;return v?Jt(x,j):[]}function ch(x,v){var I=x==null?0:x.length;return I?(v=v===t?1:gt(v),Jt(x,v)):[]}function hh(x){for(var v=-1,I=x==null?0:x.length,$={};++v<I;){var B=x[v];$[B[0]]=B[1]}return $}function Hs(x){return x&&x.length?x[0]:t}function fh(x,v,I){var $=x==null?0:x.length;if(!$)return-1;var B=I==null?0:gt(I);return B<0&&(B=Yt($+B,0)),En(x,v,B)}function dh(x){var v=x==null?0:x.length;return v?Er(x,0,-1):[]}var ph=yt(function(x){var v=Rt(x,Vo);return v.length&&v[0]===x[0]?ko(v):[]}),gh=yt(function(x){var v=Ar(x),I=Rt(x,Vo);return v===Ar(I)?v=t:I.pop(),I.length&&I[0]===x[0]?ko(I,ut(v,2)):[]}),mh=yt(function(x){var v=Ar(x),I=Rt(x,Vo);return v=typeof v=="function"?v:t,v&&I.pop(),I.length&&I[0]===x[0]?ko(I,t,v):[]});function bh(x,v){return x==null?"":du.call(x,v)}function Ar(x){var v=x==null?0:x.length;return v?x[v-1]:t}function yh(x,v,I){var $=x==null?0:x.length;if(!$)return-1;var B=$;return I!==t&&(B=gt(I),B=B<0?Yt($+B,0):er(B,$-1)),v===v?Xl(x,v,B):_i(x,Ea,B,!0)}function xh(x,v){return x&&x.length?rs(x,gt(v)):t}var wh=yt(Zs);function Zs(x,v){return x&&x.length&&v&&v.length?$o(x,v):x}function vh(x,v,I){return x&&x.length&&v&&v.length?$o(x,v,ut(I,2)):x}function _h(x,v,I){return x&&x.length&&v&&v.length?$o(x,v,t,I):x}var Th=Hr(function(x,v){var I=x==null?0:x.length,$=Ao(x,v);return os(x,Rt(v,function(B){return Zr(B,I)?+B:B}).sort(gs)),$});function Sh(x,v){var I=[];if(!(x&&x.length))return I;var $=-1,B=[],Z=x.length;for(v=ut(v,3);++$<Z;){var Q=x[$];v(Q,$,x)&&(I.push(Q),B.push($))}return os(x,B),I}function ea(x){return x==null?x:bu.call(x)}function Eh(x,v,I){var $=x==null?0:x.length;return $?(I&&typeof I!="number"&&or(x,v,I)?(v=0,I=$):(v=v==null?0:gt(v),I=I===t?$:gt(I)),Er(x,v,I)):[]}function Ah(x,v){return Ui(x,v)}function Ih(x,v,I){return No(x,v,ut(I,2))}function Oh(x,v){var I=x==null?0:x.length;if(I){var $=Ui(x,v);if($<I&&Dr(x[$],v))return $}return-1}function Ph(x,v){return Ui(x,v,!0)}function kh(x,v,I){return No(x,v,ut(I,2),!0)}function Mh(x,v){var I=x==null?0:x.length;if(I){var $=Ui(x,v,!0)-1;if(Dr(x[$],v))return $}return-1}function Ch(x){return x&&x.length?ss(x):[]}function Dh(x,v){return x&&x.length?ss(x,ut(v,2)):[]}function $h(x){var v=x==null?0:x.length;return v?Er(x,1,v):[]}function Rh(x,v,I){return x&&x.length?(v=I||v===t?1:gt(v),Er(x,0,v<0?0:v)):[]}function Fh(x,v,I){var $=x==null?0:x.length;return $?(v=I||v===t?1:gt(v),v=$-v,Er(x,v<0?0:v,$)):[]}function Nh(x,v){return x&&x.length?zi(x,ut(v,3),!1,!0):[]}function Bh(x,v){return x&&x.length?zi(x,ut(v,3)):[]}var Lh=yt(function(x){return rn(Jt(x,1,zt,!0))}),Vh=yt(function(x){var v=Ar(x);return zt(v)&&(v=t),rn(Jt(x,1,zt,!0),ut(v,2))}),jh=yt(function(x){var v=Ar(x);return v=typeof v=="function"?v:t,rn(Jt(x,1,zt,!0),t,v)});function Uh(x){return x&&x.length?rn(x):[]}function zh(x,v){return x&&x.length?rn(x,ut(v,2)):[]}function Gh(x,v){return v=typeof v=="function"?v:t,x&&x.length?rn(x,t,v):[]}function ta(x){if(!(x&&x.length))return[];var v=0;return x=Xr(x,function(I){if(zt(I))return v=Yt(I.length,v),!0}),yo(v,function(I){return Rt(x,go(I))})}function Ws(x,v){if(!(x&&x.length))return[];var I=ta(x);return v==null?I:Rt(I,function($){return pr(v,t,$)})}var Hh=yt(function(x,v){return zt(x)?ti(x,v):[]}),Zh=yt(function(x){return Lo(Xr(x,zt))}),Wh=yt(function(x){var v=Ar(x);return zt(v)&&(v=t),Lo(Xr(x,zt),ut(v,2))}),Yh=yt(function(x){var v=Ar(x);return v=typeof v=="function"?v:t,Lo(Xr(x,zt),t,v)}),qh=yt(ta);function Kh(x,v){return hs(x||[],v||[],ei)}function Xh(x,v){return hs(x||[],v||[],ii)}var Jh=yt(function(x){var v=x.length,I=v>1?x[v-1]:t;return I=typeof I=="function"?(x.pop(),I):t,Ws(x,I)});function Ys(x){var v=G(x);return v.__chain__=!0,v}function Qh(x,v){return v(x),x}function Ji(x,v){return v(x)}var ef=Hr(function(x){var v=x.length,I=v?x[0]:0,$=this.__wrapped__,B=function(Z){return Ao(Z,x)};return v>1||this.__actions__.length||!($ instanceof wt)||!Zr(I)?this.thru(B):($=$.slice(I,+I+(v?1:0)),$.__actions__.push({func:Ji,args:[B],thisArg:t}),new Tr($,this.__chain__).thru(function(Z){return v&&!Z.length&&Z.push(t),Z}))});function tf(){return Ys(this)}function rf(){return new Tr(this.value(),this.__chain__)}function nf(){this.__values__===t&&(this.__values__=ll(this.value()));var x=this.__index__>=this.__values__.length,v=x?t:this.__values__[this.__index__++];return{done:x,value:v}}function of(){return this}function af(x){for(var v,I=this;I instanceof Ni;){var $=js(I);$.__index__=0,$.__values__=t,v?B.__wrapped__=$:v=$;var B=$;I=I.__wrapped__}return B.__wrapped__=x,v}function sf(){var x=this.__wrapped__;if(x instanceof wt){var v=x;return this.__actions__.length&&(v=new wt(this)),v=v.reverse(),v.__actions__.push({func:Ji,args:[ea],thisArg:t}),new Tr(v,this.__chain__)}return this.thru(ea)}function lf(){return cs(this.__wrapped__,this.__actions__)}var uf=Gi(function(x,v,I){Ot.call(x,I)?++x[I]:zr(x,I,1)});function cf(x,v,I){var $=dt(x)?Ta:Qu;return I&&or(x,v,I)&&(v=t),$(x,ut(v,3))}function hf(x,v){var I=dt(x)?Xr:Wa;return I(x,ut(v,3))}var ff=vs(Us),df=vs(zs);function pf(x,v){return Jt(Qi(x,v),1)}function gf(x,v){return Jt(Qi(x,v),j)}function mf(x,v,I){return I=I===t?1:gt(I),Jt(Qi(x,v),I)}function qs(x,v){var I=dt(x)?vr:tn;return I(x,ut(v,3))}function Ks(x,v){var I=dt(x)?$l:Za;return I(x,ut(v,3))}var bf=Gi(function(x,v,I){Ot.call(x,I)?x[I].push(v):zr(x,I,[v])});function yf(x,v,I,$){x=cr(x)?x:Nn(x),I=I&&!$?gt(I):0;var B=x.length;return I<0&&(I=Yt(B+I,0)),io(x)?I<=B&&x.indexOf(v,I)>-1:!!B&&En(x,v,I)>-1}var xf=yt(function(x,v,I){var $=-1,B=typeof v=="function",Z=cr(x)?Ie(x.length):[];return tn(x,function(Q){Z[++$]=B?pr(v,Q,I):ri(Q,v,I)}),Z}),wf=Gi(function(x,v,I){zr(x,I,v)});function Qi(x,v){var I=dt(x)?Rt:Qa;return I(x,ut(v,3))}function vf(x,v,I,$){return x==null?[]:(dt(v)||(v=v==null?[]:[v]),I=$?t:I,dt(I)||(I=I==null?[]:[I]),ns(x,v,I))}var _f=Gi(function(x,v,I){x[I?0:1].push(v)},function(){return[[],[]]});function Tf(x,v,I){var $=dt(x)?fo:Ia,B=arguments.length<3;return $(x,ut(v,4),I,B,tn)}function Sf(x,v,I){var $=dt(x)?Rl:Ia,B=arguments.length<3;return $(x,ut(v,4),I,B,Za)}function Ef(x,v){var I=dt(x)?Xr:Wa;return I(x,ro(ut(v,3)))}function Af(x){var v=dt(x)?Ua:bc;return v(x)}function If(x,v,I){(I?or(x,v,I):v===t)?v=1:v=gt(v);var $=dt(x)?Yu:yc;return $(x,v)}function Of(x){var v=dt(x)?qu:wc;return v(x)}function Pf(x){if(x==null)return 0;if(cr(x))return io(x)?In(x):x.length;var v=tr(x);return v==te||v==de?x.size:Co(x).length}function kf(x,v,I){var $=dt(x)?po:vc;return I&&or(x,v,I)&&(v=t),$(x,ut(v,3))}var Mf=yt(function(x,v){if(x==null)return[];var I=v.length;return I>1&&or(x,v[0],v[1])?v=[]:I>2&&or(v[0],v[1],v[2])&&(v=[v[0]]),ns(x,Jt(v,1),[])}),eo=cu||function(){return Xt.Date.now()};function Cf(x,v){if(typeof v!="function")throw new _r(c);return x=gt(x),function(){if(--x<1)return v.apply(this,arguments)}}function Xs(x,v,I){return v=I?t:v,v=x&&v==null?x.length:v,Gr(x,k,t,t,t,t,v)}function Js(x,v){var I;if(typeof v!="function")throw new _r(c);return x=gt(x),function(){return--x>0&&(I=v.apply(this,arguments)),x<=1&&(v=t),I}}var ra=yt(function(x,v,I){var $=w;if(I.length){var B=Qr(I,Rn(ra));$|=A}return Gr(x,$,v,I,B)}),Qs=yt(function(x,v,I){var $=w|_;if(I.length){var B=Qr(I,Rn(Qs));$|=A}return Gr(v,$,x,I,B)});function el(x,v,I){v=I?t:v;var $=Gr(x,S,t,t,t,t,t,v);return $.placeholder=el.placeholder,$}function tl(x,v,I){v=I?t:v;var $=Gr(x,E,t,t,t,t,t,v);return $.placeholder=tl.placeholder,$}function rl(x,v,I){var $,B,Z,Q,se,pe,Fe=0,Ne=!1,je=!1,Xe=!0;if(typeof x!="function")throw new _r(c);v=Ir(v)||0,Bt(I)&&(Ne=!!I.leading,je="maxWait"in I,Z=je?Yt(Ir(I.maxWait)||0,v):Z,Xe="trailing"in I?!!I.trailing:Xe);function rt(Gt){var $r=$,qr=B;return $=B=t,Fe=Gt,Q=x.apply(qr,$r),Q}function ct(Gt){return Fe=Gt,se=si(xt,v),Ne?rt(Gt):Q}function bt(Gt){var $r=Gt-pe,qr=Gt-Fe,vl=v-$r;return je?er(vl,Z-qr):vl}function ht(Gt){var $r=Gt-pe,qr=Gt-Fe;return pe===t||$r>=v||$r<0||je&&qr>=Z}function xt(){var Gt=eo();if(ht(Gt))return _t(Gt);se=si(xt,bt(Gt))}function _t(Gt){return se=t,Xe&&$?rt(Gt):($=B=t,Q)}function yr(){se!==t&&fs(se),Fe=0,$=pe=B=se=t}function ar(){return se===t?Q:_t(eo())}function xr(){var Gt=eo(),$r=ht(Gt);if($=arguments,B=this,pe=Gt,$r){if(se===t)return ct(pe);if(je)return fs(se),se=si(xt,v),rt(pe)}return se===t&&(se=si(xt,v)),Q}return xr.cancel=yr,xr.flush=ar,xr}var Df=yt(function(x,v){return Ha(x,1,v)}),$f=yt(function(x,v,I){return Ha(x,Ir(v)||0,I)});function Rf(x){return Gr(x,F)}function to(x,v){if(typeof x!="function"||v!=null&&typeof v!="function")throw new _r(c);var I=function(){var $=arguments,B=v?v.apply(this,$):$[0],Z=I.cache;if(Z.has(B))return Z.get(B);var Q=x.apply(this,$);return I.cache=Z.set(B,Q)||Z,Q};return I.cache=new(to.Cache||Ur),I}to.Cache=Ur;function ro(x){if(typeof x!="function")throw new _r(c);return function(){var v=arguments;switch(v.length){case 0:return!x.call(this);case 1:return!x.call(this,v[0]);case 2:return!x.call(this,v[0],v[1]);case 3:return!x.call(this,v[0],v[1],v[2])}return!x.apply(this,v)}}function Ff(x){return Js(2,x)}var Nf=_c(function(x,v){v=v.length==1&&dt(v[0])?Rt(v[0],gr(ut())):Rt(Jt(v,1),gr(ut()));var I=v.length;return yt(function($){for(var B=-1,Z=er($.length,I);++B<Z;)$[B]=v[B].call(this,$[B]);return pr(x,this,$)})}),na=yt(function(x,v){var I=Qr(v,Rn(na));return Gr(x,A,t,v,I)}),nl=yt(function(x,v){var I=Qr(v,Rn(nl));return Gr(x,P,t,v,I)}),Bf=Hr(function(x,v){return Gr(x,M,t,t,t,v)});function Lf(x,v){if(typeof x!="function")throw new _r(c);return v=v===t?v:gt(v),yt(x,v)}function Vf(x,v){if(typeof x!="function")throw new _r(c);return v=v==null?0:Yt(gt(v),0),yt(function(I){var $=I[v],B=on(I,0,v);return $&&Jr(B,$),pr(x,this,B)})}function jf(x,v,I){var $=!0,B=!0;if(typeof x!="function")throw new _r(c);return Bt(I)&&($="leading"in I?!!I.leading:$,B="trailing"in I?!!I.trailing:B),rl(x,v,{leading:$,maxWait:v,trailing:B})}function Uf(x){return Xs(x,1)}function zf(x,v){return na(jo(v),x)}function Gf(){if(!arguments.length)return[];var x=arguments[0];return dt(x)?x:[x]}function Hf(x){return Sr(x,u)}function Zf(x,v){return v=typeof v=="function"?v:t,Sr(x,u,v)}function Wf(x){return Sr(x,l|u)}function Yf(x,v){return v=typeof v=="function"?v:t,Sr(x,l|u,v)}function qf(x,v){return v==null||Ga(x,v,Kt(v))}function Dr(x,v){return x===v||x!==x&&v!==v}var Kf=Yi(Po),Xf=Yi(function(x,v){return x>=v}),xn=Ka(function(){return arguments}())?Ka:function(x){return Vt(x)&&Ot.call(x,"callee")&&!Fa.call(x,"callee")},dt=Ie.isArray,Jf=ba?gr(ba):oc;function cr(x){return x!=null&&no(x.length)&&!Wr(x)}function zt(x){return Vt(x)&&cr(x)}function Qf(x){return x===!0||x===!1||Vt(x)&&ir(x)==Re}var an=fu||pa,ed=ya?gr(ya):ac;function td(x){return Vt(x)&&x.nodeType===1&&!ui(x)}function rd(x){if(x==null)return!0;if(cr(x)&&(dt(x)||typeof x=="string"||typeof x.splice=="function"||an(x)||Fn(x)||xn(x)))return!x.length;var v=tr(x);if(v==te||v==de)return!x.size;if(ai(x))return!Co(x).length;for(var I in x)if(Ot.call(x,I))return!1;return!0}function nd(x,v){return ni(x,v)}function id(x,v,I){I=typeof I=="function"?I:t;var $=I?I(x,v):t;return $===t?ni(x,v,t,I):!!$}function ia(x){if(!Vt(x))return!1;var v=ir(x);return v==qe||v==He||typeof x.message=="string"&&typeof x.name=="string"&&!ui(x)}function od(x){return typeof x=="number"&&Ba(x)}function Wr(x){if(!Bt(x))return!1;var v=ir(x);return v==W||v==X||v==Ee||v==J}function il(x){return typeof x=="number"&&x==gt(x)}function no(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=K}function Bt(x){var v=typeof x;return x!=null&&(v=="object"||v=="function")}function Vt(x){return x!=null&&typeof x=="object"}var ol=xa?gr(xa):lc;function ad(x,v){return x===v||Mo(x,v,Yo(v))}function sd(x,v,I){return I=typeof I=="function"?I:t,Mo(x,v,Yo(v),I)}function ld(x){return al(x)&&x!=+x}function ud(x){if(Hc(x))throw new ft(s);return Xa(x)}function cd(x){return x===null}function hd(x){return x==null}function al(x){return typeof x=="number"||Vt(x)&&ir(x)==ie}function ui(x){if(!Vt(x)||ir(x)!=be)return!1;var v=ki(x);if(v===null)return!0;var I=Ot.call(v,"constructor")&&v.constructor;return typeof I=="function"&&I instanceof I&&Ai.call(I)==au}var oa=wa?gr(wa):uc;function fd(x){return il(x)&&x>=-K&&x<=K}var sl=va?gr(va):cc;function io(x){return typeof x=="string"||!dt(x)&&Vt(x)&&ir(x)==Oe}function br(x){return typeof x=="symbol"||Vt(x)&&ir(x)==fe}var Fn=_a?gr(_a):hc;function dd(x){return x===t}function pd(x){return Vt(x)&&tr(x)==Ze}function gd(x){return Vt(x)&&ir(x)==$e}var md=Yi(Do),bd=Yi(function(x,v){return x<=v});function ll(x){if(!x)return[];if(cr(x))return io(x)?Mr(x):ur(x);if(qn&&x[qn])return Yl(x[qn]());var v=tr(x),I=v==te?wo:v==de?Ti:Nn;return I(x)}function Yr(x){if(!x)return x===0?x:0;if(x=Ir(x),x===j||x===-j){var v=x<0?-1:1;return v*ee}return x===x?x:0}function gt(x){var v=Yr(x),I=v%1;return v===v?I?v-I:v:0}function ul(x){return x?gn(gt(x),0,ge):0}function Ir(x){if(typeof x=="number")return x;if(br(x))return he;if(Bt(x)){var v=typeof x.valueOf=="function"?x.valueOf():x;x=Bt(v)?v+"":v}if(typeof x!="string")return x===0?x:+x;x=Oa(x);var I=Or.test(x);return I||Lr.test(x)?Ml(x.slice(2),I?2:8):lr.test(x)?he:+x}function cl(x){return Nr(x,hr(x))}function yd(x){return x?gn(gt(x),-K,K):x===0?x:0}function At(x){return x==null?"":mr(x)}var xd=Dn(function(x,v){if(ai(v)||cr(v)){Nr(v,Kt(v),x);return}for(var I in v)Ot.call(v,I)&&ei(x,I,v[I])}),hl=Dn(function(x,v){Nr(v,hr(v),x)}),oo=Dn(function(x,v,I,$){Nr(v,hr(v),x,$)}),wd=Dn(function(x,v,I,$){Nr(v,Kt(v),x,$)}),vd=Hr(Ao);function _d(x,v){var I=Cn(x);return v==null?I:za(I,v)}var Td=yt(function(x,v){x=Mt(x);var I=-1,$=v.length,B=$>2?v[2]:t;for(B&&or(v[0],v[1],B)&&($=1);++I<$;)for(var Z=v[I],Q=hr(Z),se=-1,pe=Q.length;++se<pe;){var Fe=Q[se],Ne=x[Fe];(Ne===t||Dr(Ne,Pn[Fe])&&!Ot.call(x,Fe))&&(x[Fe]=Z[Fe])}return x}),Sd=yt(function(x){return x.push(t,Os),pr(fl,t,x)});function Ed(x,v){return Sa(x,ut(v,3),Fr)}function Ad(x,v){return Sa(x,ut(v,3),Oo)}function Id(x,v){return x==null?x:Io(x,ut(v,3),hr)}function Od(x,v){return x==null?x:Ya(x,ut(v,3),hr)}function Pd(x,v){return x&&Fr(x,ut(v,3))}function kd(x,v){return x&&Oo(x,ut(v,3))}function Md(x){return x==null?[]:Vi(x,Kt(x))}function Cd(x){return x==null?[]:Vi(x,hr(x))}function aa(x,v,I){var $=x==null?t:mn(x,v);return $===t?I:$}function Dd(x,v){return x!=null&&Ms(x,v,tc)}function sa(x,v){return x!=null&&Ms(x,v,rc)}var $d=Ts(function(x,v,I){v!=null&&typeof v.toString!="function"&&(v=Ii.call(v)),x[v]=I},ua(fr)),Rd=Ts(function(x,v,I){v!=null&&typeof v.toString!="function"&&(v=Ii.call(v)),Ot.call(x,v)?x[v].push(I):x[v]=[I]},ut),Fd=yt(ri);function Kt(x){return cr(x)?ja(x):Co(x)}function hr(x){return cr(x)?ja(x,!0):fc(x)}function Nd(x,v){var I={};return v=ut(v,3),Fr(x,function($,B,Z){zr(I,v($,B,Z),$)}),I}function Bd(x,v){var I={};return v=ut(v,3),Fr(x,function($,B,Z){zr(I,B,v($,B,Z))}),I}var Ld=Dn(function(x,v,I){ji(x,v,I)}),fl=Dn(function(x,v,I,$){ji(x,v,I,$)}),Vd=Hr(function(x,v){var I={};if(x==null)return I;var $=!1;v=Rt(v,function(Z){return Z=nn(Z,x),$||($=Z.length>1),Z}),Nr(x,Zo(x),I),$&&(I=Sr(I,l|o|u,Dc));for(var B=v.length;B--;)Bo(I,v[B]);return I});function jd(x,v){return dl(x,ro(ut(v)))}var Ud=Hr(function(x,v){return x==null?{}:pc(x,v)});function dl(x,v){if(x==null)return{};var I=Rt(Zo(x),function($){return[$]});return v=ut(v),is(x,I,function($,B){return v($,B[0])})}function zd(x,v,I){v=nn(v,x);var $=-1,B=v.length;for(B||(B=1,x=t);++$<B;){var Z=x==null?t:x[Br(v[$])];Z===t&&($=B,Z=I),x=Wr(Z)?Z.call(x):Z}return x}function Gd(x,v,I){return x==null?x:ii(x,v,I)}function Hd(x,v,I,$){return $=typeof $=="function"?$:t,x==null?x:ii(x,v,I,$)}var pl=As(Kt),gl=As(hr);function Zd(x,v,I){var $=dt(x),B=$||an(x)||Fn(x);if(v=ut(v,4),I==null){var Z=x&&x.constructor;B?I=$?new Z:[]:Bt(x)?I=Wr(Z)?Cn(ki(x)):{}:I={}}return(B?vr:Fr)(x,function(Q,se,pe){return v(I,Q,se,pe)}),I}function Wd(x,v){return x==null?!0:Bo(x,v)}function Yd(x,v,I){return x==null?x:us(x,v,jo(I))}function qd(x,v,I,$){return $=typeof $=="function"?$:t,x==null?x:us(x,v,jo(I),$)}function Nn(x){return x==null?[]:xo(x,Kt(x))}function Kd(x){return x==null?[]:xo(x,hr(x))}function Xd(x,v,I){return I===t&&(I=v,v=t),I!==t&&(I=Ir(I),I=I===I?I:0),v!==t&&(v=Ir(v),v=v===v?v:0),gn(Ir(x),v,I)}function Jd(x,v,I){return v=Yr(v),I===t?(I=v,v=0):I=Yr(I),x=Ir(x),nc(x,v,I)}function Qd(x,v,I){if(I&&typeof I!="boolean"&&or(x,v,I)&&(v=I=t),I===t&&(typeof v=="boolean"?(I=v,v=t):typeof x=="boolean"&&(I=x,x=t)),x===t&&v===t?(x=0,v=1):(x=Yr(x),v===t?(v=x,x=0):v=Yr(v)),x>v){var $=x;x=v,v=$}if(I||x%1||v%1){var B=La();return er(x+B*(v-x+kl("1e-"+((B+"").length-1))),v)}return Ro(x,v)}var ep=$n(function(x,v,I){return v=v.toLowerCase(),x+(I?ml(v):v)});function ml(x){return la(At(x).toLowerCase())}function bl(x){return x=At(x),x&&x.replace(It,zl).replace(xi,"")}function tp(x,v,I){x=At(x),v=mr(v);var $=x.length;I=I===t?$:gn(gt(I),0,$);var B=I;return I-=v.length,I>=0&&x.slice(I,B)==v}function rp(x){return x=At(x),x&&nt.test(x)?x.replace(Ye,Gl):x}function np(x){return x=At(x),x&&Ve.test(x)?x.replace(le,"\\$&"):x}var ip=$n(function(x,v,I){return x+(I?"-":"")+v.toLowerCase()}),op=$n(function(x,v,I){return x+(I?" ":"")+v.toLowerCase()}),ap=ws("toLowerCase");function sp(x,v,I){x=At(x),v=gt(v);var $=v?In(x):0;if(!v||$>=v)return x;var B=(v-$)/2;return Wi($i(B),I)+x+Wi(Di(B),I)}function lp(x,v,I){x=At(x),v=gt(v);var $=v?In(x):0;return v&&$<v?x+Wi(v-$,I):x}function up(x,v,I){x=At(x),v=gt(v);var $=v?In(x):0;return v&&$<v?Wi(v-$,I)+x:x}function cp(x,v,I){return I||v==null?v=0:v&&(v=+v),mu(At(x).replace(lt,""),v||0)}function hp(x,v,I){return(I?or(x,v,I):v===t)?v=1:v=gt(v),Fo(At(x),v)}function fp(){var x=arguments,v=At(x[0]);return x.length<3?v:v.replace(x[1],x[2])}var dp=$n(function(x,v,I){return x+(I?"_":"")+v.toLowerCase()});function pp(x,v,I){return I&&typeof I!="number"&&or(x,v,I)&&(v=I=t),I=I===t?ge:I>>>0,I?(x=At(x),x&&(typeof v=="string"||v!=null&&!oa(v))&&(v=mr(v),!v&&An(x))?on(Mr(x),0,I):x.split(v,I)):[]}var gp=$n(function(x,v,I){return x+(I?" ":"")+la(v)});function mp(x,v,I){return x=At(x),I=I==null?0:gn(gt(I),0,x.length),v=mr(v),x.slice(I,I+v.length)==v}function bp(x,v,I){var $=G.templateSettings;I&&or(x,v,I)&&(v=t),x=At(x),v=oo({},v,$,Is);var B=oo({},v.imports,$.imports,Is),Z=Kt(B),Q=xo(B,Z),se,pe,Fe=0,Ne=v.interpolate||Pr,je="__p += '",Xe=vo((v.escape||Pr).source+"|"+Ne.source+"|"+(Ne===H?Ht:Pr).source+"|"+(v.evaluate||Pr).source+"|$","g"),rt="//# sourceURL="+(Ot.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++El+"]")+`
`;x.replace(Xe,function(ht,xt,_t,yr,ar,xr){return _t||(_t=yr),je+=x.slice(Fe,xr).replace(Kr,Hl),xt&&(se=!0,je+=`' +
__e(`+xt+`) +
'`),ar&&(pe=!0,je+=`';
`+ar+`;
__p += '`),_t&&(je+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),Fe=xr+ht.length,ht}),je+=`';
`;var ct=Ot.call(v,"variable")&&v.variable;if(!ct)je=`with (obj) {
`+je+`
}
`;else if(sr.test(ct))throw new ft(f);je=(pe?je.replace(Y,""):je).replace(me,"$1").replace(_e,"$1;"),je="function("+(ct||"obj")+`) {
`+(ct?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(se?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+je+`return __p
}`;var bt=xl(function(){return St(Z,rt+"return "+je).apply(t,Q)});if(bt.source=je,ia(bt))throw bt;return bt}function yp(x){return At(x).toLowerCase()}function xp(x){return At(x).toUpperCase()}function wp(x,v,I){if(x=At(x),x&&(I||v===t))return Oa(x);if(!x||!(v=mr(v)))return x;var $=Mr(x),B=Mr(v),Z=Pa($,B),Q=ka($,B)+1;return on($,Z,Q).join("")}function vp(x,v,I){if(x=At(x),x&&(I||v===t))return x.slice(0,Ca(x)+1);if(!x||!(v=mr(v)))return x;var $=Mr(x),B=ka($,Mr(v))+1;return on($,0,B).join("")}function _p(x,v,I){if(x=At(x),x&&(I||v===t))return x.replace(lt,"");if(!x||!(v=mr(v)))return x;var $=Mr(x),B=Pa($,Mr(v));return on($,B).join("")}function Tp(x,v){var I=O,$=D;if(Bt(v)){var B="separator"in v?v.separator:B;I="length"in v?gt(v.length):I,$="omission"in v?mr(v.omission):$}x=At(x);var Z=x.length;if(An(x)){var Q=Mr(x);Z=Q.length}if(I>=Z)return x;var se=I-In($);if(se<1)return $;var pe=Q?on(Q,0,se).join(""):x.slice(0,se);if(B===t)return pe+$;if(Q&&(se+=pe.length-se),oa(B)){if(x.slice(se).search(B)){var Fe,Ne=pe;for(B.global||(B=vo(B.source,At(Lt.exec(B))+"g")),B.lastIndex=0;Fe=B.exec(Ne);)var je=Fe.index;pe=pe.slice(0,je===t?se:je)}}else if(x.indexOf(mr(B),se)!=se){var Xe=pe.lastIndexOf(B);Xe>-1&&(pe=pe.slice(0,Xe))}return pe+$}function Sp(x){return x=At(x),x&&et.test(x)?x.replace(Pe,Jl):x}var Ep=$n(function(x,v,I){return x+(I?" ":"")+v.toUpperCase()}),la=ws("toUpperCase");function yl(x,v,I){return x=At(x),v=I?t:v,v===t?Wl(x)?tu(x):Bl(x):x.match(v)||[]}var xl=yt(function(x,v){try{return pr(x,t,v)}catch(I){return ia(I)?I:new ft(I)}}),Ap=Hr(function(x,v){return vr(v,function(I){I=Br(I),zr(x,I,ra(x[I],x))}),x});function Ip(x){var v=x==null?0:x.length,I=ut();return x=v?Rt(x,function($){if(typeof $[1]!="function")throw new _r(c);return[I($[0]),$[1]]}):[],yt(function($){for(var B=-1;++B<v;){var Z=x[B];if(pr(Z[0],this,$))return pr(Z[1],this,$)}})}function Op(x){return Ju(Sr(x,l))}function ua(x){return function(){return x}}function Pp(x,v){return x==null||x!==x?v:x}var kp=_s(),Mp=_s(!0);function fr(x){return x}function ca(x){return Ja(typeof x=="function"?x:Sr(x,l))}function Cp(x){return es(Sr(x,l))}function Dp(x,v){return ts(x,Sr(v,l))}var $p=yt(function(x,v){return function(I){return ri(I,x,v)}}),Rp=yt(function(x,v){return function(I){return ri(x,I,v)}});function ha(x,v,I){var $=Kt(v),B=Vi(v,$);I==null&&!(Bt(v)&&(B.length||!$.length))&&(I=v,v=x,x=this,B=Vi(v,Kt(v)));var Z=!(Bt(I)&&"chain"in I)||!!I.chain,Q=Wr(x);return vr(B,function(se){var pe=v[se];x[se]=pe,Q&&(x.prototype[se]=function(){var Fe=this.__chain__;if(Z||Fe){var Ne=x(this.__wrapped__),je=Ne.__actions__=ur(this.__actions__);return je.push({func:pe,args:arguments,thisArg:x}),Ne.__chain__=Fe,Ne}return pe.apply(x,Jr([this.value()],arguments))})}),x}function Fp(){return Xt._===this&&(Xt._=su),this}function fa(){}function Np(x){return x=gt(x),yt(function(v){return rs(v,x)})}var Bp=zo(Rt),Lp=zo(Ta),Vp=zo(po);function wl(x){return Ko(x)?go(Br(x)):gc(x)}function jp(x){return function(v){return x==null?t:mn(x,v)}}var Up=Ss(),zp=Ss(!0);function da(){return[]}function pa(){return!1}function Gp(){return{}}function Hp(){return""}function Zp(){return!0}function Wp(x,v){if(x=gt(x),x<1||x>K)return[];var I=ge,$=er(x,ge);v=ut(v),x-=ge;for(var B=yo($,v);++I<x;)v(I);return B}function Yp(x){return dt(x)?Rt(x,Br):br(x)?[x]:ur(Vs(At(x)))}function qp(x){var v=++ou;return At(x)+v}var Kp=Zi(function(x,v){return x+v},0),Xp=Go("ceil"),Jp=Zi(function(x,v){return x/v},1),Qp=Go("floor");function e0(x){return x&&x.length?Li(x,fr,Po):t}function t0(x,v){return x&&x.length?Li(x,ut(v,2),Po):t}function r0(x){return Aa(x,fr)}function n0(x,v){return Aa(x,ut(v,2))}function i0(x){return x&&x.length?Li(x,fr,Do):t}function o0(x,v){return x&&x.length?Li(x,ut(v,2),Do):t}var a0=Zi(function(x,v){return x*v},1),s0=Go("round"),l0=Zi(function(x,v){return x-v},0);function u0(x){return x&&x.length?bo(x,fr):0}function c0(x,v){return x&&x.length?bo(x,ut(v,2)):0}return G.after=Cf,G.ary=Xs,G.assign=xd,G.assignIn=hl,G.assignInWith=oo,G.assignWith=wd,G.at=vd,G.before=Js,G.bind=ra,G.bindAll=Ap,G.bindKey=Qs,G.castArray=Gf,G.chain=Ys,G.chunk=Jc,G.compact=Qc,G.concat=eh,G.cond=Ip,G.conforms=Op,G.constant=ua,G.countBy=uf,G.create=_d,G.curry=el,G.curryRight=tl,G.debounce=rl,G.defaults=Td,G.defaultsDeep=Sd,G.defer=Df,G.delay=$f,G.difference=th,G.differenceBy=rh,G.differenceWith=nh,G.drop=ih,G.dropRight=oh,G.dropRightWhile=ah,G.dropWhile=sh,G.fill=lh,G.filter=hf,G.flatMap=pf,G.flatMapDeep=gf,G.flatMapDepth=mf,G.flatten=Gs,G.flattenDeep=uh,G.flattenDepth=ch,G.flip=Rf,G.flow=kp,G.flowRight=Mp,G.fromPairs=hh,G.functions=Md,G.functionsIn=Cd,G.groupBy=bf,G.initial=dh,G.intersection=ph,G.intersectionBy=gh,G.intersectionWith=mh,G.invert=$d,G.invertBy=Rd,G.invokeMap=xf,G.iteratee=ca,G.keyBy=wf,G.keys=Kt,G.keysIn=hr,G.map=Qi,G.mapKeys=Nd,G.mapValues=Bd,G.matches=Cp,G.matchesProperty=Dp,G.memoize=to,G.merge=Ld,G.mergeWith=fl,G.method=$p,G.methodOf=Rp,G.mixin=ha,G.negate=ro,G.nthArg=Np,G.omit=Vd,G.omitBy=jd,G.once=Ff,G.orderBy=vf,G.over=Bp,G.overArgs=Nf,G.overEvery=Lp,G.overSome=Vp,G.partial=na,G.partialRight=nl,G.partition=_f,G.pick=Ud,G.pickBy=dl,G.property=wl,G.propertyOf=jp,G.pull=wh,G.pullAll=Zs,G.pullAllBy=vh,G.pullAllWith=_h,G.pullAt=Th,G.range=Up,G.rangeRight=zp,G.rearg=Bf,G.reject=Ef,G.remove=Sh,G.rest=Lf,G.reverse=ea,G.sampleSize=If,G.set=Gd,G.setWith=Hd,G.shuffle=Of,G.slice=Eh,G.sortBy=Mf,G.sortedUniq=Ch,G.sortedUniqBy=Dh,G.split=pp,G.spread=Vf,G.tail=$h,G.take=Rh,G.takeRight=Fh,G.takeRightWhile=Nh,G.takeWhile=Bh,G.tap=Qh,G.throttle=jf,G.thru=Ji,G.toArray=ll,G.toPairs=pl,G.toPairsIn=gl,G.toPath=Yp,G.toPlainObject=cl,G.transform=Zd,G.unary=Uf,G.union=Lh,G.unionBy=Vh,G.unionWith=jh,G.uniq=Uh,G.uniqBy=zh,G.uniqWith=Gh,G.unset=Wd,G.unzip=ta,G.unzipWith=Ws,G.update=Yd,G.updateWith=qd,G.values=Nn,G.valuesIn=Kd,G.without=Hh,G.words=yl,G.wrap=zf,G.xor=Zh,G.xorBy=Wh,G.xorWith=Yh,G.zip=qh,G.zipObject=Kh,G.zipObjectDeep=Xh,G.zipWith=Jh,G.entries=pl,G.entriesIn=gl,G.extend=hl,G.extendWith=oo,ha(G,G),G.add=Kp,G.attempt=xl,G.camelCase=ep,G.capitalize=ml,G.ceil=Xp,G.clamp=Xd,G.clone=Hf,G.cloneDeep=Wf,G.cloneDeepWith=Yf,G.cloneWith=Zf,G.conformsTo=qf,G.deburr=bl,G.defaultTo=Pp,G.divide=Jp,G.endsWith=tp,G.eq=Dr,G.escape=rp,G.escapeRegExp=np,G.every=cf,G.find=ff,G.findIndex=Us,G.findKey=Ed,G.findLast=df,G.findLastIndex=zs,G.findLastKey=Ad,G.floor=Qp,G.forEach=qs,G.forEachRight=Ks,G.forIn=Id,G.forInRight=Od,G.forOwn=Pd,G.forOwnRight=kd,G.get=aa,G.gt=Kf,G.gte=Xf,G.has=Dd,G.hasIn=sa,G.head=Hs,G.identity=fr,G.includes=yf,G.indexOf=fh,G.inRange=Jd,G.invoke=Fd,G.isArguments=xn,G.isArray=dt,G.isArrayBuffer=Jf,G.isArrayLike=cr,G.isArrayLikeObject=zt,G.isBoolean=Qf,G.isBuffer=an,G.isDate=ed,G.isElement=td,G.isEmpty=rd,G.isEqual=nd,G.isEqualWith=id,G.isError=ia,G.isFinite=od,G.isFunction=Wr,G.isInteger=il,G.isLength=no,G.isMap=ol,G.isMatch=ad,G.isMatchWith=sd,G.isNaN=ld,G.isNative=ud,G.isNil=hd,G.isNull=cd,G.isNumber=al,G.isObject=Bt,G.isObjectLike=Vt,G.isPlainObject=ui,G.isRegExp=oa,G.isSafeInteger=fd,G.isSet=sl,G.isString=io,G.isSymbol=br,G.isTypedArray=Fn,G.isUndefined=dd,G.isWeakMap=pd,G.isWeakSet=gd,G.join=bh,G.kebabCase=ip,G.last=Ar,G.lastIndexOf=yh,G.lowerCase=op,G.lowerFirst=ap,G.lt=md,G.lte=bd,G.max=e0,G.maxBy=t0,G.mean=r0,G.meanBy=n0,G.min=i0,G.minBy=o0,G.stubArray=da,G.stubFalse=pa,G.stubObject=Gp,G.stubString=Hp,G.stubTrue=Zp,G.multiply=a0,G.nth=xh,G.noConflict=Fp,G.noop=fa,G.now=eo,G.pad=sp,G.padEnd=lp,G.padStart=up,G.parseInt=cp,G.random=Qd,G.reduce=Tf,G.reduceRight=Sf,G.repeat=hp,G.replace=fp,G.result=zd,G.round=s0,G.runInContext=ce,G.sample=Af,G.size=Pf,G.snakeCase=dp,G.some=kf,G.sortedIndex=Ah,G.sortedIndexBy=Ih,G.sortedIndexOf=Oh,G.sortedLastIndex=Ph,G.sortedLastIndexBy=kh,G.sortedLastIndexOf=Mh,G.startCase=gp,G.startsWith=mp,G.subtract=l0,G.sum=u0,G.sumBy=c0,G.template=bp,G.times=Wp,G.toFinite=Yr,G.toInteger=gt,G.toLength=ul,G.toLower=yp,G.toNumber=Ir,G.toSafeInteger=yd,G.toString=At,G.toUpper=xp,G.trim=wp,G.trimEnd=vp,G.trimStart=_p,G.truncate=Tp,G.unescape=Sp,G.uniqueId=qp,G.upperCase=Ep,G.upperFirst=la,G.each=qs,G.eachRight=Ks,G.first=Hs,ha(G,function(){var x={};return Fr(G,function(v,I){Ot.call(G.prototype,I)||(x[I]=v)}),x}(),{chain:!1}),G.VERSION=n,vr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){G[x].placeholder=G}),vr(["drop","take"],function(x,v){wt.prototype[x]=function(I){I=I===t?1:Yt(gt(I),0);var $=this.__filtered__&&!v?new wt(this):this.clone();return $.__filtered__?$.__takeCount__=er(I,$.__takeCount__):$.__views__.push({size:er(I,ge),type:x+($.__dir__<0?"Right":"")}),$},wt.prototype[x+"Right"]=function(I){return this.reverse()[x](I).reverse()}}),vr(["filter","map","takeWhile"],function(x,v){var I=v+1,$=I==U||I==V;wt.prototype[x]=function(B){var Z=this.clone();return Z.__iteratees__.push({iteratee:ut(B,3),type:I}),Z.__filtered__=Z.__filtered__||$,Z}}),vr(["head","last"],function(x,v){var I="take"+(v?"Right":"");wt.prototype[x]=function(){return this[I](1).value()[0]}}),vr(["initial","tail"],function(x,v){var I="drop"+(v?"":"Right");wt.prototype[x]=function(){return this.__filtered__?new wt(this):this[I](1)}}),wt.prototype.compact=function(){return this.filter(fr)},wt.prototype.find=function(x){return this.filter(x).head()},wt.prototype.findLast=function(x){return this.reverse().find(x)},wt.prototype.invokeMap=yt(function(x,v){return typeof x=="function"?new wt(this):this.map(function(I){return ri(I,x,v)})}),wt.prototype.reject=function(x){return this.filter(ro(ut(x)))},wt.prototype.slice=function(x,v){x=gt(x);var I=this;return I.__filtered__&&(x>0||v<0)?new wt(I):(x<0?I=I.takeRight(-x):x&&(I=I.drop(x)),v!==t&&(v=gt(v),I=v<0?I.dropRight(-v):I.take(v-x)),I)},wt.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},wt.prototype.toArray=function(){return this.take(ge)},Fr(wt.prototype,function(x,v){var I=/^(?:filter|find|map|reject)|While$/.test(v),$=/^(?:head|last)$/.test(v),B=G[$?"take"+(v=="last"?"Right":""):v],Z=$||/^find/.test(v);B&&(G.prototype[v]=function(){var Q=this.__wrapped__,se=$?[1]:arguments,pe=Q instanceof wt,Fe=se[0],Ne=pe||dt(Q),je=function(xt){var _t=B.apply(G,Jr([xt],se));return $&&Xe?_t[0]:_t};Ne&&I&&typeof Fe=="function"&&Fe.length!=1&&(pe=Ne=!1);var Xe=this.__chain__,rt=!!this.__actions__.length,ct=Z&&!Xe,bt=pe&&!rt;if(!Z&&Ne){Q=bt?Q:new wt(this);var ht=x.apply(Q,se);return ht.__actions__.push({func:Ji,args:[je],thisArg:t}),new Tr(ht,Xe)}return ct&&bt?x.apply(this,se):(ht=this.thru(je),ct?$?ht.value()[0]:ht.value():ht)})}),vr(["pop","push","shift","sort","splice","unshift"],function(x){var v=Si[x],I=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",$=/^(?:pop|shift)$/.test(x);G.prototype[x]=function(){var B=arguments;if($&&!this.__chain__){var Z=this.value();return v.apply(dt(Z)?Z:[],B)}return this[I](function(Q){return v.apply(dt(Q)?Q:[],B)})}}),Fr(wt.prototype,function(x,v){var I=G[v];if(I){var $=I.name+"";Ot.call(Mn,$)||(Mn[$]=[]),Mn[$].push({name:v,func:I})}}),Mn[Hi(t,_).name]=[{name:"wrapper",func:t}],wt.prototype.clone=Tu,wt.prototype.reverse=Su,wt.prototype.value=Eu,G.prototype.at=ef,G.prototype.chain=tf,G.prototype.commit=rf,G.prototype.next=nf,G.prototype.plant=af,G.prototype.reverse=sf,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=lf,G.prototype.first=G.prototype.head,qn&&(G.prototype[qn]=of),G},On=ru();hn?((hn.exports=On)._=On,uo._=On):Xt._=On}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;async function imageDecode(r){const e=await createImageBitmap(r),t=imageBitmapToImageData(e);return ndarray4(t.data,[t.height,t.width,4])}async function imageEncode(r,e=.8,t="image/png"){const[n,a,s]=r.shape;switch(t){case"image/x-rgba8":return new Blob([r.data],{type:"image/x-rgba8"});case"image/png":case"image/jpeg":case"image/webp":const b=new ImageData(new Uint8ClampedArray(r.data),a,n);var c=new OffscreenCanvas(b.width,b.height),f=c.getContext("2d");return f.putImageData(b,0,0),c.convertToBlob({quality:e,type:t});default:throw new Error(`Invalid format: ${t}`)}}function imageBitmapToImageData(r){var e=new OffscreenCanvas(r.width,r.height),t=e.getContext("2d");return t.drawImage(r,0,0),t.getImageData(0,0,e.width,e.height)}async function tensorResize(r,e,t){const[n,a,s]=r.shape,c=a/e,f=n/t,b=ndarray4(new Uint8Array(s*e*t),[t,e,s]);for(let g=0;g<t;g++)for(let m=0;m<e;m++)for(let l=0;l<s;l++){const o=m*c,u=g*f,d=Math.floor(o),y=Math.ceil(o),w=Math.floor(u),_=Math.ceil(u),T=o-d,S=u-w,E=r.get(w,d,l),A=r.get(w,y,l),P=r.get(_,d,l),k=r.get(_,y,l),M=(1-T)*(1-S)*E+T*(1-S)*A+(1-T)*S*P+T*S*k;b.set(g,m,l,Math.round(M))}return b}function tensorHWCtoBCHW(r,e=[128,128,128],t=[256,256,256]){var n=r.data;const[a,s,c]=r.shape,f=a*s,b=new Float32Array(3*f);for(let g=0,m=0;g<n.length;g+=4,m+=1)b[m]=(n[g]-e[0])/t[0],b[m+f]=(n[g+1]-e[1])/t[1],b[m+f+f]=(n[g+2]-e[2])/t[2];return ndarray4(b,[1,3,a,s])}function calculateProportionalSize(r,e,t,n){const a=t/r,s=n/e,c=Math.min(a,s),f=Math.floor(r*c),b=Math.floor(e*c);return[f,b]}async function loadAsUrl(r,e){return URL.createObjectURL(await loadAsBlob(r,e))}async function loadAsBlob(r,e){const t=new URL("resources.json",e.publicPath),n=await fetch(t);if(!n.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const s=(await n.json())[r];if(!s)throw new Error(`Resource ${r} not found. Ensure that the config.publicPath is configured correctly.`);let c=Object.keys(s.chunks);const b=(await Promise.all(c.map(async m=>{e.publicPath&&(m=new URL(m,e.publicPath).toString());const l=await fetch(m,e.fetchArgs);return e.progress?await fetchChunked(l,s,e,r):[await l.blob()]}))).flat(),g=new Blob(b,{type:s.mime});if(g.size!==s.size)throw new Error(`Failed to fetch ${r} with size ${s.size} but got ${g.size}`);return g}async function fetchChunked(r,e,t,n){const a=r.body.getReader(),s=e.size??0;let c=0,f=[];for(;;){const{done:b,value:g}=await a.read();if(b)break;f.push(g),c+=g.length,t.progress&&t.progress(`fetch:${n}`,c,s)}return f}var simd=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async r=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(r)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));async function createOnnxSession(r,e){const t={simd:await simd(),threads:await threads(),numThreads:navigator.hardwareConcurrency??4,webgpu:navigator.gpu!==void 0};e.debug&&(console.debug("Capabilities:",t),ort_minExports.env.debug=!0,ort_minExports.env.logLevel="verbose"),ort_minExports.env.wasm.numThreads=t.numThreads,ort_minExports.env.wasm.simd=t.simd,ort_minExports.env.wasm.proxy=e.proxyToWorker,ort_minExports.env.wasm.wasmPaths={"ort-wasm-simd-threaded.wasm":t.simd&&t.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd-threaded.wasm",e):void 0,"ort-wasm-simd.wasm":t.simd&&!t.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-simd.wasm",e):void 0,"ort-wasm-threaded.wasm":!t.simd&&t.threads?await loadAsUrl("/onnxruntime-web/ort-wasm-threaded.wasm",e):void 0,"ort-wasm.wasm":!t.simd&&!t.threads?await loadAsUrl("/onnxruntime-web/ort-wasm.wasm",e):void 0},e.debug&&console.debug("ort.env.wasm:",ort_minExports.env.wasm);const n={executionProviders:["wasm"],graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await ort_minExports.InferenceSession.create(r,n).catch(s=>{throw new Error(`Failed to create session: ${s}. Please check if the publicPath is set correctly.`)})}async function runOnnxSession(r,e,t){const n={};for(const[c,f]of e)n[c]=new ort_minExports.Tensor("float32",new Float32Array(f.data),f.shape);const a=await r.run(n,{}),s=[];for(const c of t){const f=a[c],b=f.dims,g=f.data,m=ndarray4(g,b);s.push(m)}return s}var package_default={name:"@imgly/background-removal",version:"1.2.1",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","CHANGELOG.md","dist/","bin/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs","changelog:create":"node ../../scripts/changelog/create.mjs","changelog:generate":"node ../../scripts/changelog/generate.mjs",build:"npm run clean && npm run resources && npm run changelog:generate && node scripts/build.mjs",watch:"npm run clean && npm run resources && npm run changelog:generate && node scripts/watch.mjs",publish:"npm run build && npm publish --access public",lint:"npx prettier --write ."},dependencies:{"@types/lodash":"^4.14.195","@types/node":"^20.3.1",lodash:"^4.17.21",ndarray:"^1.0.19","onnxruntime-web":"^1.16.0",zod:"^3.21.4"},devDependencies:{assert:"^2.0.0",esbuild:"^0.18.18",glob:"^10.3.3","npm-dts":"^1.3.12",process:"^0.11.10","ts-loader":"^9.4.3",tslib:"^2.5.3",typescript:"^5.1.3",util:"^0.12.5",webpack:"^5.85.1","webpack-cli":"^5.1.4"}},ConfigSchema=z.object({publicPath:z.string().optional().describe("The public path to the wasm files and the onnx model.").default(`https://unpkg.com/${package_default.name}@${package_default.version}/dist/`),debug:z.boolean().default(!1).describe("Whether to enable debug logging."),proxyToWorker:z.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z.function().args(z.string(),z.number(),z.number()).returns(z.undefined()).describe("Progress callback.").optional(),model:z.enum(["small","medium"]).default("medium"),output:z.object({format:z.enum(["image/png","image/jpeg","image/webp","image/x-rgba8"]).default("image/png"),quality:z.number().default(.8),type:z.enum(["foreground","background","mask"]).default("foreground")}).default({})}).default({});function validateConfig(r){const e=ConfigSchema.parse(r??{});return e.debug&&console.log("Config:",e),e.debug&&!e.progress&&(e.progress=e.progress??((t,n,a)=>{console.debug(`Downloading ${t}: ${n} of ${a}`)}),crossOriginIsolated||console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),e}async function initInference(r){r=validateConfig(r),r.debug&&console.debug("Loading model...");const e=r.model,n=await(await loadAsBlob(`/models/${e}`,r)).arrayBuffer(),a=await createOnnxSession(n,r);return{config:r,session:a}}async function runInference(r,e,t){e.progress&&e.progress("compute:inference",0,1);const n=1024,[a,s,c]=r.shape;let f=await tensorResize(r,n,n);const b=tensorHWCtoBCHW(f),g=await runOnnxSession(t,[["input",b]],["output"]),m=n*n;if(e.output.type==="mask"){f=ndarray4(new Uint8Array(4*m),[n,n,4]);for(let y=0;y<4*m;y+=4){let w=y/4,_=g[0].data[w];f.data[y+3]=_*255}}else if(e.output.type==="foreground")for(let y=0;y<4*m;y+=4){let w=y/4,_=g[0].data[w];f.data[y+3]=_*255}else if(e.output.type==="background")for(let y=0;y<4*m;y+=4){let w=y/4,_=g[0].data[w];f.data[y+3]=(1-_)*255}const[l,o]=calculateProportionalSize(s,a,n,n),u=Math.min(l,s),d=Math.min(o,a);return f=await tensorResize(f,u,d),e.progress&&e.progress("compute:inference",1,1),ndarray4(f.data,[d,u,4])}function isAbsoluteURI(r){return new RegExp("^(?:[a-z+]+:)?//","i").test(r)}function ensureAbsoluteURI(r,e){return isAbsoluteURI(r)?r:new URL(r,e).href}var src_default=removeBackground,init=lodashExports.memoize(initInference,r=>JSON.stringify(r));async function removeBackground(r,e){const{config:t,session:n}=await init(e);r=await imageSourceToImageData(r,t);const a=await runInference(r,t,n);return await imageEncode(a,t.output.quality,t.output.format)}async function imageSourceToImageData(r,e){return typeof r=="string"&&(r=ensureAbsoluteURI(r,e.publicPath),r=new URL(r)),r instanceof URL&&(r=await(await fetch(r,{})).blob()),(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r=new Blob([r])),r instanceof Blob&&(r=await imageDecode(r)),r}/**
 * GammaCV v0.5.3
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018-2023 Peculiar Ventures.
 * All rights reserved.
 *//**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class GraphNode{static GlobalCountIncrease(){return GraphNode.GlobalNodesCount+=1,GraphNode.GlobalNodesCount}constructor(e){this.id=GraphNode.GlobalCountIncrease(),this.name=`${e}:${this.id}`}}GraphNode.GlobalNodesCount=0;/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class GLUniform{constructor(e,t,n,a){this.gl=e,this.name=n,this.dtype=a,this.location=e.getUniformLocation(t,this.name)}set(e){const t=this.gl;switch(this.dtype){case"int":t.uniform1i(this.location,e);break;case"float":t.uniform1f(this.location,e);break;case"vec2":t.uniform2fv(this.location,e);break;case"vec3":t.uniform3fv(this.location,e);break;case"vec4":t.uniform4fv(this.location,e);break;case"mat3":t.uniformMatrix3fv(this.location,!1,e);break;case"mat4":t.uniformMatrix4fv(this.location,!1,e);break;default:return!1}return!0}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class GLBuffer{constructor(e,t,n,a){this.program=t,this.gl=e,this.name=n,this.dtype=a,this.location=e.getAttribLocation(this.program,this.name),this.ctx=e.createBuffer(),this.empty=new ArrayBuffer(1),a==="float"||a==="int"?this.size=1:(this.size=parseInt(/\d/g.exec(a)[0],10),e.enableVertexAttribArray(this.location))}set(e){const t=this.gl;this.bind(this.ctx),this.dtype==="int"?t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW):t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}bind(){const e=this.gl;this.dtype==="int"?e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ctx):(e.bindBuffer(e.ARRAY_BUFFER,this.ctx),e.vertexAttribPointer(this.location,this.size,e.FLOAT,!1,0,0))}unbind(){const e=this.gl;this.dtype==="int"?e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null):(e.bindBuffer(e.ARRAY_BUFFER,null),e.vertexAttribPointer(this.location,this.size,e.FLOAT,!1,0,0))}disable(){this.gl.disableVertexAttribArray(this.ctx)}enable(){this.gl.enableVertexAttribArray(this.ctx)}delete(){this.gl.deleteBuffer(this.ctx),this.program=null,this.gl=null,this.ctx=null}}var vertexShader="precision highp float;attribute vec3 aVertexPosition;attribute vec2 aTextureCoords;varying vec2 texCoords;void main(void){texCoords=aTextureCoords;gl_Position=vec4(aVertexPosition,1.0);}";/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */const errorStart="Error: An error occurred compiling the shaders: ";function getOffset(r){const e=/\d+\|(\s+)/.exec(r);return e?" ".repeat(e[1].length):" ".repeat(2)}function prepareSourceLines(r){let e=r.split(`
`);const t=(e.length+1).toString().length;return e=e.map((n,a)=>`${(a+1).toString().padStart(t)}|  ${n}`),e}function calcErrorStats(r){let e=0,t=0;for(let n=0;n<r.length;n+=1)/ERROR/.exec(r[n])&&(e+=1),/WARNING/.exec(r[n])&&(t+=1);return{errCount:e,warnCount:t}}function injectAll(r,e,t=!0){const n=prepareSourceLines(r),a=(n.length+1).toString().length;let s=e.toString();const c=[],f=[];s.startsWith(errorStart)&&(s=s.substr(errorStart.length));const b=s.split(`
`),g=calcErrorStats(b);let m=0;for(let l=0;l<b.length;l+=1){const o=b[l],u=/0:(\d+)/.exec(o);if(u){const d=+u[1]+m,y=`${" ".repeat(a)}|${getOffset(n[d-1])}`;c.push(`${o}
${n[d-2]}
${n[d-1]}
${y}^
${n[d]}`);const w=t?"%c":"";n.splice(d,0,`${w}${y}^--${o}${w}`),t&&(f.push("color: red;"),f.push("color: inherit;")),m+=1}}return{fullText:n.join(`
`),firstError:c[0],errorsStats:g,fullTextStyle:f}}function processError(r,e,t){try{const n=injectAll(r,t),a=n.errorsStats;console.group(`Error: An error occurred compiling the shader ${e}: ${a.errCount} ERRORS, ${a.warnCount} WARNINGS`),console.log(n.firstError),console.groupCollapsed("Show more"),console.log(n.fullText,...n.fullTextStyle),console.groupEnd(),console.groupEnd()}catch{console.warn("Unable to process GLSG compiling error.")}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */const AVAILABLE_GLSL_CHUNKS=["pickCurrentValue","pickValue","float"],assert=(r,e)=>{if(!r)throw new Error(e)},assertDOMFeature=(r,e)=>{assert(r,`GammaCV: DOMFeature not supported, "${e}" is not supported in current environment`)},assertCreateElement=r=>{assertDOMFeature(document&&document.createElement,r)},assertOffsetCanvas=()=>{assert(typeof OffscreenCanvas=="function","OffscreenCanvas")},isValidShape=r=>Array.isArray(r)&&r.length>0&&!r.some(e=>e%1!==0),isOperation=r=>r instanceof Operation,isMediaInput=r=>r instanceof MediaInput,isTensor=r=>r instanceof Tensor,isVideoElement=r=>typeof HTMLVideoElement=="function"?r instanceof HTMLVideoElement:!1,isCanvasElement=r=>typeof HTMLCanvasElement=="function"?r instanceof HTMLCanvasElement:"getContext"in r,isValidGLSLChunk=r=>AVAILABLE_GLSL_CHUNKS.includes(r),isValidGLSLVariableName=r=>/^[A-Za-z](\w+)?$/.test(r);function deprecationWarning(r,e){console.warn(`GammaCV Deprecation Warning: "${r}" is deprecated${e?`, ${e}`:""}. "${r}" will be removed in next major version.`)}function getCanvas(){try{return assertCreateElement("canvas"),document.createElement("canvas")}catch{return assertOffsetCanvas(),new OffscreenCanvas(1,1)}}function getImage(){return assertCreateElement("img"),document.createElement("img")}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */const parameters={};function testFloatTextures(){let r,e=!1;try{const n=getCanvas().getContext("webgl");if(!n||!n.getExtension("OES_texture_float"))return!1;const a=n.createFramebuffer(),s=n.createTexture();parameters.MAX_TEXTURE_SIZE=n.getParameter(n.MAX_TEXTURE_SIZE),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.FLOAT,null),n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0),e=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE,n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,new Float32Array(4)),r=n.getError()===n.NO_ERROR}catch{r=!1}return e&&r}const SOURCE_ENV={SUPPORTS_FLOAT_TEXTURES:testFloatTextures(),DEBUG:!1,MAX_TEXTURE_SIZE:parameters.MAX_TEXTURE_SIZE},ENV=Object.assign({},SOURCE_ENV);/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function main(r){let e=`
void main(void) {
  vec2 coords = gl_FragCoord.xy - 0.5;
  vec4 result = operation(coords.y, coords.x);

  gl_FragColor = result;
}
  `;return!ENV.SUPPORTS_FLOAT_TEXTURES&&r.dtype==="float32"&&(e=`
    void main(void) {
      vec2 coords = gl_FragCoord.xy;

      highp float ox = floor(coords.x / 4.0);
      float dx = floor(coords.x - ox * 4.0 + 0.5);
    
      vec4 result = operation(coords.y - 0.5, floor((coords.x - 0.5) / 4.0));

      float value;

      if (dx == 1.0) {
        value = result.r;
      } else if (dx == 2.0) {
        value = result.g;
      } else if (dx == 3.0) {
        value = result.b;
      } else if (dx == 4.0) {
        value = result.a;
      }
    
      gl_FragColor = encode_float(value);
    }
    `),e}var floatCode="precision highp float;highp vec4 encode_float(highp float f){if(f==1./0.){return vec4(0.0,0.0,128.0,127.0)/255.0;}highp vec4 rgba;highp float e=5.0;highp float F=abs(f);highp float sign=step(0.0,-f);highp float exponent=floor(log2(F));highp float mantissa=(exp2(-exponent)*F);exponent=floor(log2(F)+127.0)+floor(log2(mantissa));rgba[0]=128.0*sign+floor(exponent*exp2(-1.0));rgba[1]=128.0*mod(exponent,2.0)+mod(floor(mantissa*64.0*2.0),128.0);rgba[2]=floor(mod(floor(mantissa*exp2(23.0-8.0)),exp2(8.0)));rgba[3]=floor(exp2(23.0)*mod(mantissa,exp2(-15.0)));return rgba.abgr/255.0;}float decode_float(highp vec4 rgba){rgba=rgba.abgr*255.0;highp float sign=1.0-step(128.0,rgba[0])*2.0;highp float exponent=2.0*mod(rgba[0],128.0)+step(128.0,rgba[1])-127.0;exponent=floor(exponent+0.5);highp float mantissa=mod(rgba[1],128.0)*32768.0*2.0+rgba[2]*256.0+rgba[3]+float(0x800000);highp float result=sign*mantissa*exp2(-23.0)*exp2(exponent);return result;}";/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function pick_value(r){const e=Object.keys(r.input),t=[];for(let n=0;n<e.length;n+=1){const a=e[n];if(!r.input[a].shape)continue;const s=[...r.input[a].shape],c=s[1].toFixed(1),f=s[0].toFixed(1),b=(s[1]*4).toFixed(1);let g=(m,l,o)=>`${m} ${l}_${a}(float y, float x) {
	return texture2D(${a}, vec2((x + 0.5) / ${c}, (y + 0.5) / ${f}))${o};
}`;!ENV.SUPPORTS_FLOAT_TEXTURES&&r.input[a].dtype==="float32"&&(g=(m,l,o)=>`
        ${m} ${l}_${a}(float y, float x) {
          float r = decode_float(texture2D(${a}, vec2((x * 4.0 + 0.5) / ${b}, y / ${f})));
          float g = decode_float(texture2D(${a}, vec2((x * 4.0 + 1.5) / ${b}, y / ${f})));
          float b = decode_float(texture2D(${a}, vec2((x * 4.0 + 2.5) / ${b}, y / ${f})));
          float a = decode_float(texture2D(${a}, vec2((x * 4.0 + 3.5) / ${b}, y / ${f})));

          return vec4(r, g, b, a)${o};
        }
      `),t.push(g("vec4","pickValue","")),t.push(g("float","pickScalarValue",".x"))}return t.join(`
`)}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */const float=()=>floatCode;var chunks=Object.freeze({__proto__:null,float,main,pickValue:pick_value});/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function validType(r){return["bool","int","uint","float","double","vec2","vec3","vec4","mat2","mat3","mat4","sampler2D"].indexOf(r)>=0}function getType(r){let e=typeof r;r=String(r);const t=/^(vec\d|mat\d)\([^)]+\)$/.exec(r);return t?e=t[1]:/^\d+$/.exec(r)?e="int":/^\d+\.(\d+)?$/.exec(r)?e="float":e==="boolean"&&(e="bool"),e}function constructHeading(r){const e=Object.assign({},r.uniform),t=Object.keys(r.input);let n=`precision highp float;
`;for(let c=0;c<t.length;c+=1){const f=t[c];e[f]={dtype:"sampler2D"}}const a=Object.keys(e);for(let c=0;c<a.length;c+=1){const f=a[c];if(!validType(e[f].dtype))throw new Error(`KernelConstructor: Uniform ${f} has invalid type "${e[f].dtype}"`);n+=`uniform ${e[f].dtype} ${f};
`}n+=`varying vec2 texCoords;
`;const s=Object.keys(r.constant);for(let c=0;c<s.length;c+=1){const f=s[c];let b=r.constant[f];typeof b==="number"&&b%1===0&&(b=b.toFixed(1));const m=getType(b);if(!validType(m))throw new Error(`KernelConstructor: Constant ${f}, has invalid type "${m}"`);n+=`#define ${f} ${b}
`}return n}function injectChunks(r){const t=[];return ENV.SUPPORTS_FLOAT_TEXTURES||t.push("float"),t.concat(r.chunks.filter((a,s,c)=>c.indexOf(a)===s)).map(a=>{const s=` Chunk ${a} `,c=35-s.length,f=`${"-".repeat(Math.floor(c/2))}${s}${"-".repeat(Math.ceil(c/2))}`;if(typeof chunks[a]=="function")return`/*${f}*/
${chunks[a](r)}
/*${"-".repeat(35)}*/`;throw new TypeError(`KernelConstructor: Chunk "${a}" is not a function`)}).join(`
`)}function hasMain(r){return!!/void main\(([^)]+)?\)([\s]+)?{/.exec(r)}function constructKernel(r){let e;if(hasMain(r.kernel))e=r.kernel;else{const t=constructHeading(r),n=injectChunks(r),a=main(r);e=[t,n,r.kernel,a].join(`

`)}return ENV.DEBUG&&(console.groupCollapsed(r.name),console.log(prepareSourceLines(e).join(`
`)),console.groupEnd()),e}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class Operation extends GraphNode{constructor(e){assert(typeof e<"u","Operation: Operation should have a name"),super(e),this.dtype=null,this.input={},this.uniform={},this.constant={},this.chunks=[],this.inputKeys=[],this.isInitialized=!1,this.lastCtx=Math.random(),this.cache=!0}run(e,t,n){assert(this.isInitialized,"Operation: Unable to run uninitialized operation.");const a=this.gl,s=e.texture[this.name];if(t===this.lastCtx&&this.cache&&!n)return s.bind(this.program,!1,this.inputKeys.length),this.bindBuffer(),!1;this.lastCtx=t,a.useProgram(this.program);for(let c=0;c<this.inputKeys.length;c+=1){const f=this.inputKeys[c],b=this.input[f],g=b.name,m=e.texture[g];m.bind(this.program,f,c),isTensor(b)&&m.set(b),isMediaInput(b)&&m.set(b.media)}return s.bind(this.program,!1,this.inputKeys.length),this.bindBuffer(),ENV.SUPPORTS_FLOAT_TEXTURES?a.viewport(0,0,this.shape[1],this.shape[0]):a.viewport(0,0,(this.dtype==="float32"?4:1)*this.shape[1],this.shape[0]),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0),!0}unbindBuffer(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}bindBuffer(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)}init(e){if(!this.isInitialized){if(this.gl=e,this.program=e.createProgram(),this.framebuffer=e.createFramebuffer(),this.isInitialized)return!1;this.constant.OUT_VIEW=`vec2(${this.shape[1]}, ${this.shape[0]})`,this.kernel=constructKernel(this);try{this.vertexShader=this.getShader("vertex",vertexShader),e.attachShader(this.program,this.vertexShader),this.fragmentShader=this.getShader("fragment",this.kernel),e.attachShader(this.program,this.fragmentShader),e.linkProgram(this.program),e.useProgram(this.program)}catch(n){throw processError(this.kernel,this.name,n),new Error(`Operation: Error during shader compilation.
${n.message}`)}this.attributes={aVertexPosition:new GLBuffer(this.gl,this.program,"aVertexPosition","vec3"),aTextureCoords:new GLBuffer(this.gl,this.program,"aTextureCoords","vec2"),aIndices:new GLBuffer(this.gl,this.program,"aIndices","int")},this.attributes.aVertexPosition.set([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),this.attributes.aTextureCoords.set([1,1,0,1,0,0,1,0]),this.attributes.aIndices.set([0,1,2,0,2,3]);const t=Object.keys(this.uniform);for(let n=0;n<t.length;n+=1){const a=this.uniform[t[n]];this.uniform[t[n]]=new GLUniform(this.gl,this.program,a.name,a.dtype),a.defaultValue&&this.uniform[t[n]].set(a.defaultValue)}this.isInitialized=!0}return!0}getShader(e,t){const n=this.gl;let a=null;if(e==="fragment"?a=n.createShader(n.FRAGMENT_SHADER):a=n.createShader(n.VERTEX_SHADER),n.shaderSource(a,t),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error(`Operation: An error occurred compiling the shaders.
${n.getShaderInfoLog(a)}`);return a}traverse(e,t){const n=Object.keys(this.input);for(let a=0;a<n.length;a+=1){const s=n[a];isOperation(this.input[s])?this.input[s].traverse(e,t):e(this.input[s],t)}e(this,t)}getDependencies(){const e=[],t=Object.keys(this.input);for(let n=0;n<t.length;n+=1){const a=t[n];if(isOperation(this.input[a])){const s=this.input[a].getDependencies();for(let c=0;c<s.length;c+=1)e.indexOf(s[c])===-1&&e.push(s[c]);e.concat(s)}}return e.push(this.name),e}assignInput(e,t){this.input[e]=t,this.inputKeys.indexOf(e)===-1&&this.inputKeys.push(e)}cloneProp(e){const t=Object.keys(this[e]),n={};for(let a=0;a<t.length;a+=1){const s=t[a];n[s]=this[e][s]}return n}destroy(){this.program&&this.gl.deleteProgram(this.program),this.vertexShader&&this.gl.deleteShader(this.vertexShader),this.fragmentShader&&this.gl.deleteShader(this.fragmentShader),this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer)}clone(){const e=new Operation(this.name.split(":")[0]);return e.input=this.cloneProp("input"),e.uniform=this.cloneProp("uniform"),e.constant=this.cloneProp("constant"),e.dtype=this.dtype,e.kernel=this.kernel,e.chunks=this.chunks,e}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class GPUTexture{constructor(e,t,n,a){if(e==="float32"||e==="uint8")this.unit=n,this.dtype=e,this.gl=t,this.ctx=t.createTexture(),this.shape=a,t.bindTexture(t.TEXTURE_2D,this.ctx),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.allocate();else throw new Error(`GPUTexture: Invalid texture type, currently supported is: float32, uint8, but got ${e} `)}allocate(){const e=this.gl;let t=this.shape[1],n=e.UNSIGNED_BYTE;this.dtype==="float32"&&(ENV.SUPPORTS_FLOAT_TEXTURES?n=e.FLOAT:t*=4),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,this.shape[0],0,e.RGBA,n,null)}set(e=null){const t=this.gl;if(isVideoElement(e)||isCanvasElement(e))t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);else{let n=e.shape[1],a=t.UNSIGNED_BYTE,s=e.data;e.dtype==="float32"&&(ENV.SUPPORTS_FLOAT_TEXTURES?a=t.FLOAT:(n*=4,s=e.uint8View)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,this.shape[0],0,t.RGBA,a,s)}}bind(e,t,n){const a=this.gl;if(t){const s=a.getUniformLocation(e,t);a.uniform1i(s,n)}a.activeTexture(a.TEXTURE0+n),a.bindTexture(a.TEXTURE_2D,this.ctx),this.unit=n}unbind(){const e=this.gl;e.activeTexture(e.TEXTURE0+this.unit),e.bindTexture(e.TEXTURE_2D,null)}delete(){const e=this.gl;e.deleteTexture(this.ctx),this.gl=null,this.program=null,this.ctx=null,e.bindTexture(e.TEXTURE_2D,null)}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class Session{constructor(){this.canvas=getCanvas(),this.canvas.width=1,this.canvas.height=1,this.initWebGL(this.canvas),this.operation={},this.texture={},this.textureCount=0}initWebGL(e,t){this.canvas=e;const n=this.canvas.getContext("webgl",t);assert(!!n,"Session: WebGL not supported.");const a=n.getExtension("OES_texture_float");assert(!!a,"Session: Unable to find extension OES_texture_float"),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.gl=n}init(e){assert(!!e,"Session: Unable to initialize undefined operation"),assert(isOperation(e)||isTensor(e),"Session: Unable to initialize operation with invalid input type"),isOperation(e)&&e.traverse((t,n)=>{n.operation[t.name]=t},this),(isTensor(e)||isMediaInput(e))&&(this.operation[e.name]=e),this.update()}update(){const e=this.gl,t=Object.keys(this.operation);for(let n=0;n<t.length;n+=1){const a=this.operation[t[n]];a instanceof Operation&&a.init(this.gl),this.texture[t[n]]||(this.texture[t[n]]=new GPUTexture(a.dtype,this.gl,this.textureCount,a.shape),a instanceof Operation&&(e.bindFramebuffer(e.FRAMEBUFFER,a.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture[t[n]].ctx,0),e.bindFramebuffer(e.FRAMEBUFFER,null)),this.textureCount+=1)}}runOp(e,t,n=!1){const a=e.sequence;let s=!1;for(let c=0;c<a.length;c+=1){const f=a[c],b=this.operation[f],g=c===a.length-1;assert(!!b,`Session: Unable to run uninitialized operation ${e.name}.`),isCanvasElement(n)&&g&&((this.canvas.width!==b.shape[1]||this.canvas.height!==b.shape[0])&&(this.canvas.width=b.shape[1],this.canvas.height=b.shape[0]),b.framebuffer=null),b.run(this,t,s)?s=!0:s=!1,n&&g&&isTensor(n)&&this.readToTensor(n),n&&g&&isCanvasElement(n)&&this.readToCanvas(n,b.shape)}}destroy(){const e=this.gl.getExtension("WEBGL_lose_context"),t=Object.keys(this.texture),n=Object.keys(this.operation);e&&e.loseContext();for(let a=0;a<t.length;a+=1)this.texture[t[a]].delete();for(let a=0;a<n.length;a+=1){const s=this.operation[n[a]];s instanceof Operation&&s.destroy()}this.canvas=null,this.operation={},this.texture={},this.gl=null,this.textureCount=0}readToTensor(e){const t=this.gl,n=e.shape[0];let a=e.shape[1],s=t.UNSIGNED_BYTE,c=e.data;e.dtype==="float32"&&(ENV.SUPPORTS_FLOAT_TEXTURES?s=t.FLOAT:(a*=4,c=e.uint8View)),t.readPixels(0,0,a,n,t.RGBA,s,c)}readToCanvas(e,t){const n=e.getContext("2d");e.width=t[1],e.height=t[0],n.drawImage(this.canvas,0,0,t[1],t[0],0,0,t[1],t[0])}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class RegisterOperation{constructor(e){this.op=new Operation(e),this.name=e,this.checkShape=t=>{const n=Object.keys(t);return t[n[0]]},this.preCompile=()=>{},this.postCompile=()=>{},this.chunks=[]}GLSLKernel(e){return assert(typeof e=="string","RegisterOperation: The kernel should be a string but it is not."),this.op.kernel=e,this}LoadChunk(...e){for(const t of e)assert(isValidGLSLChunk(t),`RegisterOperation: There is no available GLSL chunk supported: ${t}`);return this.op.chunks=this.op.chunks.concat(e),this}Input(e,t){return assert(isValidGLSLVariableName(e)),this.op.input[e]={name:e,dtype:t},this}Output(e){return assert(this.op.dtype===null,"RegisterOperation: The operation allows a single output."),this.op.dtype=e,this}Constant(e,t){return assert(isValidGLSLVariableName(e)),this.op.constant[e]=t,this}SetShapeFn(e){return assert(typeof e=="function","RegisterOperation: SetShapeFn should receive function in first argument"),this.checkShape=e,this}PreCompile(e){return assert(typeof e=="function","RegisterOperation: PreCompile should receive function in first argument"),this.preCompile=e,this}PostCompile(e){return assert(typeof e=="function","RegisterOperation: PostCompile should receive function in first argument"),this.postCompile=e,this}Uniform(e,t,n){return assert(isValidGLSLVariableName(e)),this.op.uniform[e]={name:e,dtype:t,defaultValue:n},this}Compile(e){const t=this.op.clone(),n={},a=Object.keys(e);this.preCompile(t);for(let s=0;s<a.length;s+=1){const c=a[s],f=e[c];assert(!!f,`RegisterOperation:${t.name}.${c}:
         Can't compile operation with undefined input.`),assert(isTensor(f)||isMediaInput(f)||isOperation(f),`RegisterOperation:${t.name}.${c}:
         Can't compile operation with invalid input type.
         You can only use Tensor or another Operation to be an input`),n[c]=e[c].shape,t.assignInput(c,e[c])}return t.shape=this.checkShape(n),t.sequence=t.getDependencies(),t}}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function range(r){const e=new Array(r);for(let t=0;t<r;t+=1)e[t]=t;return e}function tensorFrom(r,e=!1){let t=null;return isOperation(r)&&(t=new Tensor(e||r.dtype,r.shape)),isTensor(r)&&(t=new Tensor(e||r.dtype,r.shape)),isMediaInput(r)&&(t=new Tensor(e||r.dtype,r.shape)),t}function tensorClone(r,e){if(e.data.set)e.data.set(r.data);else for(let t=0;t<e.size;t+=1)e.data[t]=r.data[t]}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */class Tensor extends GraphNode{constructor(e,t,n,a,s=0){super("Tensor"),this.dtype=e,this.shape=t||[n.length],assert(isValidShape(this.shape),"Tensor: Shape is not valid"),a&&(assert(isValidShape(a),"Tensor: Stride is not valid"),assert(this.shape.length===a.length,"Tensor: Stride length should be equal to shape length")),assert(typeof s=="number"&&s%1===0,`Tensor: Offset should be integer, but got ${s}`),this.size=Tensor.GetSize(this.shape),this.stride=a||this._defineStride(this.shape),this.offset=s,this._compileJITMethods(),typeof n>"u"?(this.data=Tensor.Malloc(e,this.size),this.empty=Tensor.Malloc(e,this.size)):this.assign(n),!ENV.SUPPORTS_FLOAT_TEXTURES&&e==="float32"&&(this.uint8View=new Uint8Array(this.data.buffer))}_compileJITMethods(){const e=range(this.shape.length),t=e.map(a=>`i${a}`).join(","),n=`${this.offset}+${e.map(a=>`${this.stride[a]}*i${a}`).join("+")}`;this.get=new Function(`return function get(${t}) { return this.data[${n}]; }`)(),this.set=new Function(`return function get(${t}, v) { this.data[${n}] = v; }`)(),this.index=new Function(`return function get(${t}, v) { return ${n}; }`)()}_defineStride(e){const t=e.length,n=new Array(t);for(let a=t-1,s=1;a>=0;a-=1)n[a]=s,s*=this.shape[a];return n}assign(e){const t=Tensor.DefineType(e),n=e.length;return assert(t===this.dtype,`Tensor: Different dtypes assigned: 
   expected - ${this.dtype} 
   actual - ${t}`),assert(n===this.size+this.offset,`Tensor: Different sizes assigned: 
   expected - ${this.size+this.offset} 
   actual - ${n}`),this.data=e,this}release(){return this.empty?this.data.set(this.empty):this.data=Tensor.Malloc(this.dtype,this.size),this}relese(){return deprecationWarning("Tensor: relese"),this.release(),this}clone(){const e=new Tensor(this.dtype,this.shape,void 0,this.stride,this.offset);return tensorClone(this,e),e}static IndexToCoord(e,t){const n=new Array(e.length);let a=t,s=e.reduce((c,f)=>c*f);for(let c=0;c<=e.length-2;c+=1){s/=e[c];const f=~~(a/s);a%=s,n[c]=f}return n[n.length-1]=a%e[e.length-1],n}static CoordToIndex(e,t){let n=1,a=0;for(let s=e.length-1;s>=0;s-=1)a+=n*t[s],n*=e[s];return a}static Malloc(e,t){switch(e){case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"float32":return new Float32Array(t);case"float64":return new Float64Array(t);case"uint8c":return new Uint8ClampedArray(t);case"array":return new Array(t);default:throw new Error(`Tensor: Unexpected type: ${e}.`)}}static DefineType(e){const t=Object.prototype.toString.call(e);switch(t){case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Float32Array]":return"float32";case"[object Float64Array]":return"float64";case"[object Uint8ClampedArray]":return"uint8c";case"[object Array]":return"array";default:throw new Error(`Tensor: Unknown dtype: ${t}.`)}}static GetTypedArray(e,t){if(e===Tensor.DefineType(t))return t;switch(e){case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"float32":return new Float32Array(t);case"float64":return new Float64Array(t);case"uint8c":return new Uint8ClampedArray(t);case"array":return new Array(t);default:throw new Error(`Unknown type: ${e}.`)}}static GetSize(e){return e.reduce((t,n)=>t*n,1)}}class MediaInput extends GraphNode{constructor(e,t){super("MediaInput"),this.dtype="uint8",this.inputKeys=[],this.isInitialized=!1,this.lastCtx=Math.random(),this.cache=!0,this.assignMedia(e,t)}assignMedia(e,t){e&&assert(isVideoElement(e)||isCanvasElement(e),"MediaInput: Is only Video, Canvas element available as input"),t&&assert(isValidShape(t),"MediaInput: Shape is invalid"),this.media=e,this.shape=t}}function toImageData(r,e=!1,t=!1){const n=new ImageData(r.shape[1],r.shape[0]),a=r.shape[0]*r.shape[1];if(e&&r.dtype==="uint8")return n.data.set(r.data),n;if(!e){for(let s=0;s<a;s+=1){const c=~~(s/r.shape[0]),f=s-c*r.shape[1],b=r.data[s];let g=0;t?g=(f*r.shape[0]+c)*4:g=(c*r.shape[1]+f)*4,n.data[g+0]=b,n.data[g+1]=b,n.data[g+2]=b,n.data[g+3]=255}return n}if(r.dtype==="float32")for(let s=0;s<r.size;s+=1)n.data[s]=r.data[s]*255;else for(let s=0;s<r.size;s+=1)n.data[s]=r.data[s];return n}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function canvasFromTensor(r,e,t=!1,n=!1){if(!(e instanceof Tensor))throw Error("tensorToCanvas: Input tensor invalid");e.shape[2]&&e.shape[2]===4&&(t=!0);const a=toImageData(e,t,n);r.getContext("2d").putImageData(a,0,0)}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */function imageTensorFromURL(r,e="uint8",t,n=!1){return new Promise((a,s)=>{const c=getImage(),f=getCanvas(),b=f.getContext("2d");let g,m;n&&(c.crossOrigin="anonymous"),c.onload=()=>{t?(g=t[1],m=t[0]):(g=c.width,m=c.height),f.width=g,f.height=m,b.drawImage(c,0,0,g,m);let l;const o=b.getImageData(0,0,g,m);switch(e){case"uint8":{l=new Uint8Array(o.data.buffer);break}case"float32":{l=new Float32Array(o.data);break}default:l=o.data}const u=new Tensor(e,[m,g,4],l);a(u)},c.onerror=s,c.src=r})}var kernel$f="const vec3 k=vec3(0.2128,0.7148,0.0724);vec4 operation(float y,float x){float value=dot(pickValue_tSrc(y,x).rgb,k);return vec4(value,value,value,1.0);}";/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */var index$k=r=>new RegisterOperation("Grayscale").Input("tSrc","uint8").Output("uint8").LoadChunk("pickValue").GLSLKernel(kernel$f).Compile({tSrc:r}),kernel$e="const float hWidth=(KERNEL_WIDTH-1.0)/2.0;const float hHeight=(KERNEL_HEIGHT-1.0)/2.0;vec4 operation(float y,float x){vec3 finalColour=vec3(0.0);for(float dy=-hHeight;dy<=hHeight;dy+=1.0){for(float dx=-hWidth;dx<=hWidth;dx+=1.0){vec3 k=pickValue_tKernel(float(dy+hHeight),float(dx+hWidth)).rgb;finalColour+=pickValue_tSrc(y+dy,x+dx).rgb*k;}}return vec4(finalColour*factor+bias,1.0);}";function gaussianBlur(r=3,e=1){const t=new Tensor("float32",[r,r]),n=(r-1)/2,a=new Tensor("float32",[r,r,4]);let s=0;for(let c=0;c<r;c+=1)for(let f=0;f<r;f+=1){const b=Math.exp(-.5*(((f-n)/e)**2+((c-n)/e)**2))/(2*Math.PI*e*e);t.set(f,c,b),s+=t.get(f,c)}for(let c=0;c<r;c+=1)for(let f=0;f<r;f+=1)a.set(f,c,0,t.get(f,c)/s),a.set(f,c,1,t.get(f,c)/s),a.set(f,c,2,t.get(f,c)/s);return a}/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */var Convolutiion=(r,e,t=1,n=0)=>new RegisterOperation("Convolution2d").Input("tSrc",r.dtype).Input("tKernel","float32").Output(r.dtype).LoadChunk("pickValue").Constant("KERNEL_WIDTH",e.shape[1]).Constant("KERNEL_HEIGHT",e.shape[0]).Uniform("bias","float",n).Uniform("factor","float",t).GLSLKernel(kernel$e).Compile({tSrc:r,tKernel:e});/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */var index$j=(r,e=3,t=3)=>(assert(e>=3,"Kernel size should be greater equal 3"),assert(t>0,"Sigma should be greater then 0"),Convolutiion(r,gaussianBlur(e,t))),kernel$c="vec4 operation(float y,float x){float wk=1.0;float hk=1.0;float dx=0.0;float dy=0.0;dx+=-1.0*pickScalarValue_tSrc(y-hk,x-wk);dx+=-2.0*pickScalarValue_tSrc(y,x-wk);dx+=-1.0*pickScalarValue_tSrc(y+wk,x-wk);dx+=+1.0*pickScalarValue_tSrc(y-wk,x+wk);dx+=+2.0*pickScalarValue_tSrc(y,x+wk);dx+=+1.0*pickScalarValue_tSrc(y+wk,x+wk);dy+=-1.0*pickScalarValue_tSrc(y-wk,x-wk);dy+=-2.0*pickScalarValue_tSrc(y-wk,x);dy+=-1.0*pickScalarValue_tSrc(y-wk,x+wk);dy+=+1.0*pickScalarValue_tSrc(y+wk,x-wk);dy+=+2.0*pickScalarValue_tSrc(y+wk,x);dy+=+1.0*pickScalarValue_tSrc(y+wk,x+wk);float magniture=sqrt((dx*dx)+(dy*dy));float theta=atan(dy/dx);return vec4(magniture,dx,dy,theta);}";/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */var index$h=r=>new RegisterOperation("SobelOperator").Input("tSrc",r.dtype).Output("float32").Uniform("uWidth","float",r.shape[0]).Uniform("uHeight","float",r.shape[1]).Constant("PI",Math.PI).GLSLKernel(kernel$c).LoadChunk("pickValue").Compile({tSrc:r}),nmsKernel=`
#define STROKE uSize
vec4 operation(float y,float x){vec4 M=pickValue_tSrc(y,x);float N=pickValue_tSrc(y+STROKE,x).r;float S=pickValue_tSrc(y-STROKE,x).r;float W=pickValue_tSrc(y,x-STROKE).r;float E=pickValue_tSrc(y,x+STROKE).r;float SE=pickValue_tSrc(y-STROKE,x+STROKE).r;float NW=pickValue_tSrc(y+STROKE,x-STROKE).r;float NE=pickValue_tSrc(y+STROKE,x+STROKE).r;float SW=pickValue_tSrc(y-STROKE,x-STROKE).r;float H=0.0;float V=M.r;float dx=M.g;float dy=M.b;float theta=atan(dy/dx);float deg=theta*(180.0/PI);float angle=0.0;if(deg<0.0){deg=180.0+deg;}if(deg<22.5||deg>=157.5){if(V>W&&V>E){H+=1.0;}}if(deg<67.5&&deg>=22.5){if(V>SW&&V>NE){H+=1.0;}}if(deg<112.5&&deg>=67.5){if(V>N&&V>S){H+=1.0;}}if(deg<157.5&&deg>=112.5){if(V>NW&&V>SE){H+=1.0;}}if(H==1.0){return vec4(V,V,V,255);}else{return vec4(0,0,0,255);}}`,hysteresisKernel=`
#define STROKE uSize
vec4 operation(float y,float x){vec4 M=pickValue_tSrc(y,x);float N=pickValue_tSrc(y+STROKE,x).r;float S=pickValue_tSrc(y-STROKE,x).r;float W=pickValue_tSrc(y,x-STROKE).r;float E=pickValue_tSrc(y,x+STROKE).r;float SE=pickValue_tSrc(y-STROKE,x+STROKE).r;float NW=pickValue_tSrc(y+STROKE,x-STROKE).r;float NE=pickValue_tSrc(y+STROKE,x+STROKE).r;float SW=pickValue_tSrc(y-STROKE,x-STROKE).r;float V=M.r;float H=0.0;if(V>uThresholdHigh){H+=1.0;}if(V>uThresholdLow&&V<uThresholdHigh){if(N>0.0||S>0.0||W>0.0||E>0.0||SE>0.0||NW>0.0||NE>0.0||SW>0.0){H+=1.0;}}if(H==1.0){return vec4(255,255,255,255);}else{return vec4(0,0,0,255);}}`;/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */const CannyNMS=r=>new RegisterOperation("ImageCannyEdgesNMS").Input("tSrc",r.dtype).Output(r.dtype).LoadChunk("pickValue").Uniform("uSize","float",1).Constant("PI",Math.PI).GLSLKernel(nmsKernel).Compile({tSrc:r}),CannyHysteresis=(r,e,t)=>(assert(e>=0,"Canny low threshold should be greater equal 0"),assert(t<=1,"Canny high threshold should be less equal 1"),new RegisterOperation("ImageCannyEdgesHysteresis").Input("tSrc",r.dtype).Output(r.dtype).LoadChunk("pickValue").Uniform("uSize","float",1).Uniform("uThresholdLow","float",e).Uniform("uThresholdHigh","float",t).GLSLKernel(hysteresisKernel).Compile({tSrc:r}));var index$e=(r,e=.25,t=.75)=>CannyHysteresis(CannyNMS(r),e,t),kernel$a="const float _step=1.0/CLUSTERS;vec4 operation(float y,float x){float minDistance=256.0;float label=0.0;vec3 value=pickValue_tSrc(y,x).rgb;for(int i=0;i<int(CLUSTERS);i+=1){vec3 curr=pickValue_tCentroids(float(i),0.0).rgb;float distance=sqrt(((value.r-curr.r)*(value.r-curr.r)));if(distance<minDistance){minDistance=distance;label=float(i)/CLUSTERS;}}return vec4(label,label,label,1.0);}";/**
 * @license MIT
 * @author Arkadiy Pilguk(apilguk@gmail.com)
 * @author Mihail Zachepilo(mihailzachepilo@gmail.com)
 * Copyright 2018 Peculiar Ventures and Pentatonica.
 * All rights reserved.
 */var index$d=(r,e=3)=>(assert(r.dtype==="uint8","Color Segmentation currently available for uint8 image input"),assert(e>1,"Number of clusters should be greater than 1"),new RegisterOperation("ImageColorSegmentation").Input("tSrc","uint8").Input("tCentroids","uint8").Output("uint8").LoadChunk("pickValue").Constant("CLUSTERS",e).GLSLKernel(kernel$a).PreCompile(t=>{const n=~~(256/e);t.centroids=new Tensor("uint8",[e,1,4]);for(let a=0;a<e;a+=1)t.centroids.set(a,0,0,a*n);t.assignInput("tCentroids",t.centroids)}).Compile({tSrc:r}));const _hoisted_1$1={class:"h-full"},_hoisted_2={class:"flex flex-col md:flex-row justify-center md:items-stretch md:h-full w-full"},_hoisted_3={class:"w-full md:min-w-1/3 md:max-w-[500px]"},_hoisted_4={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_5={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_6={class:"flex justify-center items-center mx-10 mt-3 gap-5"},_hoisted_7={class:"flex-col justify-center items-center w-full"},_hoisted_8=["disabled"],_hoisted_9={class:"flex flex-wrap gap-3 mt-10"},_hoisted_10=["onClick"],_hoisted_11={class:"relative grow"},_hoisted_12={key:0,class:"flex-col flex-wrap"},_hoisted_13={class:"flex flex-wrap items-center gap-5"},_hoisted_14={class:"flex items-center gap-5 basis-full"},_hoisted_15={class:"flex items-center gap-5 basis-full"},_hoisted_16={class:"flex items-center gap-5 basis-full"},_hoisted_17={class:"flex flex-wrap gap-5"},_hoisted_18={key:0,class:"flex grow"},_hoisted_19=createBaseVNode("div",{class:"animate-spin"},"",-1),_hoisted_20=[_hoisted_19],_hoisted_21={key:1,class:"flex"},_hoisted_22=["id"],_hoisted_23={key:2},_hoisted_24=["src"],_sfc_main$1={__name:"ColorSchemer",setup(r){const e=allColors.find(ne=>ne.colorValue==="transparent"),t=allColors.find(ne=>ne.colorValue==="#ffffff"),n=ref([marineSimple,marineComplex,fromImage]),a=ref(marineSimple),s=ref({}),c=ref(null),f=ref(null),b=ref(new URLSearchParams(window.location.search)),g=ref(null),m=ref(!1),l=ref({}),o=ref({}),u=ref({}),d=ref(null),y=ref({colorSegmentation:5,backgroundRemoval:!1,greyscale:!0,edgePipeline:!0,maskPipeline:!0,highValues:!0,cannyEdges:!0,sobelOperator:!0});onMounted(()=>{S(),watch(s,debounce$1(ne=>{b.value.set("state",M(a.value,ne)),history.replaceState(null,null,"?"+b.value.toString())},300),{deep:!0}),watch(a,()=>{w()}),ge()});const w=()=>{f.value=null,s.value=a.value.basicScheme({transparent:e,perfectWhite:t},1)},_=()=>{l.value={},o.value={},u.value={},d.value.value=null},T=ne=>{f.value=ne},S=()=>{try{const ne=F(b.value.get("state"));a.value=ne.model||n.value[0],s.value=a.value.basicScheme({transparent:e,perfectWhite:t},1),ne.model&&(ne.colorScheme||[]).forEach(([re,oe])=>{s.value[re]={color:oe.color,opacity:oe.opacity}})}catch(ne){console.error(ne),w()}},E=ne=>{s.value[f.value].color=ne.filteredOptions[ne.pointer]},A=(ne,re)=>{g.value&&(s.value[f.value].color=g.value,s.value[f.value].opacity=g.value)},P=(ne,re)=>{s.value[f.value].color=ne,g.value=null,m.value=!1},k=()=>{m.value=!0,g.value=s.value[f.value].color},M=(ne,re)=>{const oe=Object.entries(re).map(([Ee,Re])=>[Ee,Re.color.uuid,Re.opacity].join(",")).join(";");return`${btoa(ne.name)}-${btoa(oe)}`},F=ne=>{const re=ne==null?void 0:ne.split("-");if(!re||re.length!==2)return;const oe=atob(re[0]),Ee=atob(re[1]),Re=n.value.find(He=>He.name===oe);if(!Re)throw new Error("Invalid code");const De=Ee.split(";").map(He=>He.split(",")).map(He=>{const qe=He[0],W=allColors.find(te=>te.uuid===He[1]),X=He[2];if(qe&&W&&X)return[qe,{color:W,opacity:X}]});return{model:Re,colorScheme:De[0]?De:null}},O=(ne,re)=>{var Ee;const oe=s.value[ne.layer];return{"mask-image":`url(${ne.path})`,"mask-repeat":"no-repeat","mask-size":"contain","z-index":re+10,opacity:(oe==null?void 0:oe.opacity)||1,background:((Ee=oe==null?void 0:oe.color)==null?void 0:Ee.colorValue)||"#fff000"}},D=ne=>{var oe,Ee;console.log(ne);const re=new FileReader;re.addEventListener("load",()=>{R(re.result)},!1),(oe=ne==null?void 0:ne.target)!=null&&oe.files[0]&&re.readAsDataURL((Ee=ne==null?void 0:ne.target)==null?void 0:Ee.files[0])},R=ne=>{u.value.source=ne,setTimeout(()=>{y.value.backgroundRemoval&&C(ne),y.value.greyscale&&ee(ne),y.value.edgePipeline&&j(ne),y.value.maskPipeline&&K(ne),y.value.highValues&&U(ne),y.value.cannyEdges&&V(ne),y.value.sobelOperator&&N(ne)})},C=ne=>{u.value.bgremoval="image",src_default(ne,{output:{quality:.8,format:"image/png"}}).then(oe=>{const Ee=URL.createObjectURL(oe);u.value.bgremoval=Ee})},U=ne=>{u.value.highValues="canvas";const re=`vec4 operation(float y, float x) {
    vec4 data = pickValue_tSrc(y, x);
    if ((data.r + data.g + data.b) > 1.5) {
      return vec4(1.0, 1.0, 1.0, 0);
    }
    
    return vec4(data.r, data.g, data.b, 1.0);
  }`,oe=o.value.source.naturalWidth,Ee=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[Ee,oe,4],!0).then(Re=>{const De=new RegisterOperation("highValues").Input("tSrc","uint8").Output("uint8").SetShapeFn(()=>[Ee,oe,4]).Constant("FILL",0).Constant("MASK",1).Uniform("uMultiplier","float",.5).LoadChunk("pickValue").GLSLKernel(re).Compile({tSrc:Re}),He=tensorFrom(De),qe=new Session;qe.init(De),qe.runOp(De,0,He),he(l.value.highValues,oe,Ee),canvasFromTensor(l.value.highValues,He)})},N=ne=>{u.value.sobelOperator="canvas";const re=o.value.source.naturalWidth,oe=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[oe,re,4],!0).then(Ee=>{const Re=index$h(Ee),De=tensorFrom(Re),He=new Session;He.init(Re),He.runOp(Re,0,De),he(l.value.sobelOperator,re,oe),canvasFromTensor(l.value.sobelOperator,De)})},V=ne=>{u.value.cannyEdges="canvas";const re=o.value.source.naturalWidth,oe=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[oe,re,4],!0).then(Ee=>{const Re=index$e(Ee,.25,.75),De=tensorFrom(Re),He=new Session;He.init(Re),He.runOp(Re,0,De),he(l.value.cannyEdges,re,oe),canvasFromTensor(l.value.cannyEdges,De)})},j=ne=>{u.value.edgePipeline="canvas";const re=o.value.source.naturalWidth,oe=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[oe,re,4],!0).then(Ee=>{let Re=Ee;Re=index$k(Re),Re=index$j(Re,3,3),Re=index$h(Re),Re=index$e(Re,.25,.75);const De=tensorFrom(Re),He=new Session;He.init(Re),He.runOp(Re,0,De),he(l.value.edgePipeline,re,oe),canvasFromTensor(l.value.edgePipeline,De)})},K=ne=>{u.value.maskPipeline__colorSegmentation="canvas";const re=`vec4 operation(float y, float x) {
    vec4 data = pickValue_tSrc(y, x);
    if (
      (data.r < RED + 0.1 && data.r > RED - 0.1)
      && (data.g < GREEN + 0.1 && data.g > GREEN - 0.1)
      && (data.b < BLUE + 0.1 && data.b > BLUE - 0.1)
      && (data.a < ALPHA + 0.1 && data.a > ALPHA - 0.1)
    ) {
      return vec4(0, 0, 0, 1.0);
    }
    
    return vec4(1.0, 1.0, 1.0, 0);
  }`,oe=o.value.source.naturalWidth,Ee=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[Ee,oe,4],!0).then(Re=>{u.value.maskPipeline__colorSegmentation="canvas";const De=index$d(Re,y.colorSegmentation),He=tensorFrom(De),qe=new Session;qe.init(De),qe.runOp(De,0,He);const W=we(He);setTimeout(()=>{he(l.value.maskPipeline__colorSegmentation,oe,Ee),canvasFromTensor(l.value.maskPipeline__colorSegmentation,He)},0),W.forEach(([X,te,ie,ye])=>{const be=`maskPipeline__R${X}G${te}B${ie}A${ye}`;u.value[be]="canvas";const Ae=new RegisterOperation("customOperation").Input("tSrc","uint8").Output("uint8").SetShapeFn(()=>[Ee,oe,4]).Constant("RED",X/255).Constant("GREEN",te/255).Constant("BLUE",ie/255).Constant("ALPHA",ye/255).LoadChunk("pickValue").GLSLKernel(re).Compile({tSrc:Re}),J=tensorFrom(Ae),ve=new Session;ve.init(Ae),ve.runOp(Ae,0,J),setTimeout(()=>{he(l.value[be],oe,Ee),canvasFromTensor(l.value[be],J)},0)})})},ee=ne=>{u.value.greyscale="canvas";const re=o.value.source.naturalWidth,oe=o.value.source.naturalHeight;imageTensorFromURL(ne,"uint8",[oe,re,4],!0).then(Ee=>{const Re=index$k(Ee),De=tensorFrom(Re),He=new Session;He.init(Re),He.runOp(Re,0,De),he(l.value.greyscale,re,oe),canvasFromTensor(l.value.greyscale,De)})},he=(ne,re,oe)=>{const Ee=ne.getContext("2d");Ee.width=re,Ee.height=oe,ne.width=re,ne.height=oe},ge=()=>{new MarvinImage},Se=(ne,re)=>ne.reduce((oe,Ee,Re)=>{const De=Math.floor(Re/re);return oe[De]||(oe[De]=[]),oe[De].push(Ee),oe},[]),we=ne=>[...new Set(Se(ne.data,4).map(re=>re.join(".")))].map(re=>re.split("."));return(ne,re)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createVNode(Multiselect,{class:"!text-black",modelValue:a.value,"onUpdate:modelValue":re[0]||(re[0]=oe=>a.value=oe),options:n.value,"close-on-select":!0,"clear-on-select":!1,hideSelected:!0,label:"name",selectLabel:"","tack-by":"name"},null,8,["modelValue","options"])]),createBaseVNode("div",_hoisted_5,[createBaseVNode("button",{onClick:re[1]||(re[1]=oe=>w()),class:"p-2 bg-white text-black rounded-lg grow"}," reset colors  ")]),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[createBaseVNode("div",null,[createVNode(Multiselect,{ref_key:"multiselect",ref:c,modelValue:(s.value[f.value]||{}).color,"onUpdate:modelValue":re[2]||(re[2]=oe=>(s.value[f.value]||{}).color=oe),class:"!text-black overflow-visible grow",showLabels:!1,onPointerChange:E,onClose:A,onOpen:k,onSelect:P,options:unref(allColors),"close-on-select":!0,"clear-on-select":!1,placeholder:"color...",label:"text","tack-by":"uuid",selectLabel:"",disabled:!f.value},null,8,["modelValue","options","disabled"]),withDirectives(createBaseVNode("input",{class:"w-full","onUpdate:modelValue":re[3]||(re[3]=oe=>(s.value[f.value]||{}).opacity=oe),name:"opacity",step:"0.01",type:"range",min:"0",max:"1",disabled:!f.value},null,8,_hoisted_8),[[vModelText,(s.value[f.value]||{}).opacity]])]),createBaseVNode("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(s.value),oe=>(openBlock(),createElementBlock("div",{key:oe,onClick:Ee=>T(oe),class:"flex justify-center items-center relative hover:translate-y-[-4px] cursor-pointer"},[createBaseVNode("div",{class:normalizeClass(["bg-[#181818] text-white border-2 border-black rounded-lg p-1 translate-y-[-5px]",{"!border-gray-500":f.value===oe}])},toDisplayString(oe),3),createBaseVNode("div",{class:"absolute bottom-0 w-[95%] h-1 rounded-xl",style:normalizeStyle({background:s.value[oe].color.colorValue})},null,4)],8,_hoisted_10))),128))])])])]),createBaseVNode("div",_hoisted_11,[a.value.name==="from Image"?(openBlock(),createElementBlock("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[createBaseVNode("button",{onClick:re[4]||(re[4]=oe=>_()),class:"px-2 bg-white text-black rounded-lg"}," reset"),createBaseVNode("input",{ref_key:"fileInput",ref:d,type:"file",accept:"image/png, image/jpeg",onInput:D},null,544),createBaseVNode("span",null,[createTextVNode("colorSegmentation: "),withDirectives(createBaseVNode("input",{class:"w-20 px-2 text-black",type:"number",min:"1",max:"255","onUpdate:modelValue":re[5]||(re[5]=oe=>y.value.colorSegmentation=oe)},null,512),[[vModelText,y.value.colorSegmentation]])])]),createBaseVNode("div",_hoisted_15,[createBaseVNode("span",null,[createTextVNode("edgePipeline: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[6]||(re[6]=oe=>y.value.edgePipeline=oe)},null,512),[[vModelCheckbox,y.value.edgePipeline]])]),createBaseVNode("span",null,[createTextVNode("maskPipeline: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[7]||(re[7]=oe=>y.value.maskPipeline=oe)},null,512),[[vModelCheckbox,y.value.maskPipeline]])])]),createBaseVNode("div",_hoisted_16,[createBaseVNode("span",null,[createTextVNode("backgroundRemoval: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[8]||(re[8]=oe=>y.value.backgroundRemoval=oe)},null,512),[[vModelCheckbox,y.value.backgroundRemoval]])]),createBaseVNode("span",null,[createTextVNode("greyscale: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[9]||(re[9]=oe=>y.value.greyscale=oe)},null,512),[[vModelCheckbox,y.value.greyscale]])]),createBaseVNode("span",null,[createTextVNode("highValues: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[10]||(re[10]=oe=>y.value.highValues=oe)},null,512),[[vModelCheckbox,y.value.highValues]])]),createBaseVNode("span",null,[createTextVNode("cannyEdges: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[11]||(re[11]=oe=>y.value.cannyEdges=oe)},null,512),[[vModelCheckbox,y.value.cannyEdges]])]),createBaseVNode("span",null,[createTextVNode("sobelOperator: "),withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":re[12]||(re[12]=oe=>y.value.sobelOperator=oe)},null,512),[[vModelCheckbox,y.value.sobelOperator]])])])]),createBaseVNode("div",_hoisted_17,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,(oe,Ee)=>(openBlock(),createElementBlock("div",{key:Ee,class:"flex flex-col justify-center items-center"},[createTextVNode(toDisplayString(Ee)+" ",1),oe==="image"?(openBlock(),createElementBlock("div",_hoisted_18,_hoisted_20)):oe==="canvas"?(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("canvas",{id:Ee,ref_for:!0,ref:Re=>l.value[Ee]=Re,class:"max-w-[400px]"},null,8,_hoisted_22)])):(openBlock(),createElementBlock("div",_hoisted_23,[createBaseVNode("img",{ref_for:!0,ref:Re=>o.value[Ee]=Re,class:"max-w-[400px]",src:oe},null,8,_hoisted_24)]))]))),128))])])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(a.value.svgs,(oe,Ee)=>(openBlock(),createElementBlock("div",{key:oe.layer,class:"absolute h-[100vh] md:max-h-50vh md:h-full left-0 right-0 top-0",style:normalizeStyle(O(oe,Ee))},null,4))),128))])])]))}},_hoisted_1=createBaseVNode("div",{class:"flex items-center mx-5 mt-5"},[createBaseVNode("img",{class:"h-20",src:_imports_0}),createBaseVNode("h1",{class:"text-xl"},"colors be scheming")],-1),_sfc_main={__name:"App",setup(r){return(e,t)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1,createVNode(_sfc_main$1)],64))}},tailwind="";createApp(_sfc_main).mount("#app");
